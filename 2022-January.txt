From george@br|d@ @end|ng |rom gm@||@com  Sun Jan  2 22:36:01 2022
From: george@br|d@ @end|ng |rom gm@||@com (george brida)
Date: Sun, 2 Jan 2022 22:36:01 +0100
Subject: [R] Mapping of groups of countries
In-Reply-To: <CA+8X3fU-Xczjp6X7oRmdCPaZ8YrdQYUGkZ63o874Ji0c6b7HfA@mail.gmail.com>
References: <CAGsroM0GkdR=63reA1h5T1Qtr5rm=ACL3T0xusiu+qkhbbC18A@mail.gmail.com>
 <CA+8X3fU-Xczjp6X7oRmdCPaZ8YrdQYUGkZ63o874Ji0c6b7HfA@mail.gmail.com>
Message-ID: <CAGsroM0=z=WZRNipMOcD8EcoUcjFJ7+SKK7fMqaM4MEy_2mHbQ@mail.gmail.com>

Thanks a lot Jim. I really appreciate your help. Happy new year 2022.
George

On Wed, Dec 29, 2021 at 10:10 PM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi George,
> This example is obviously a mess, but it shows the basic elements. The
> labels may be placed manually using something like boxed.labels
> (plotrix) with lines connecting the labels to the smaller countries.
> If you want the labels within the countries you will have to use a big
> graphics device.
>
> library(maps)
> map("world")
> countries=c("China","Bangladesh","Egypt","Indonesia","South
> Korea","Nigeria",
>  "Brazil","Pakistan","Philippines","Vietnam","South Africa",
>  "India","Mexico","Turkey")
> countrycol<-c(rep("red",6),rep("blue",4),"green",rep("orange",3))
> for(i in 1:length(countries)) {
>  mapinf<-map(region=countries[i],col=countrycol[i],add=TRUE)
>  xpos<-sum(mapinf$range[1:2])/2
>  ypos<-sum(mapinf$range[3:4])/2
>  text(xpos,ypos,countries[i])
> }
>
>
> Jim
>
> On Thu, Dec 30, 2021 at 7:34 AM george brida <george.brida at gmail.com>
> wrote:
> >
> > Dear R users,
> >
> > I would like to map with R the following countries (with their names on
> the
> > map) as follows: the first group in red composed by China, Bangladesh,
> > Eypt, Indonesia, South Korea, Nigeria. The second group in blue composed
> by
> > Brazil, Pakistan, Philippines, Vietnam.
> >
> > The third group in green solely composed by South Africa.
> >
> > Finally, the fourth group in orange composed by India, Mexico and Turkey.
> >
> > I'd also like a legend that assigns the different colors to the various
> > group.
> > I tried several times with library maps but it seems that I failed to
> find
> > the real setting of xlim and ylim. Can you please help me, I will be very
> > grateful.
> >
> > Best regards
> > George
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Sun Jan  2 23:00:06 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Mon, 3 Jan 2022 09:00:06 +1100
Subject: [R] Mapping of groups of countries
In-Reply-To: <CAGsroM0=z=WZRNipMOcD8EcoUcjFJ7+SKK7fMqaM4MEy_2mHbQ@mail.gmail.com>
References: <CAGsroM0GkdR=63reA1h5T1Qtr5rm=ACL3T0xusiu+qkhbbC18A@mail.gmail.com>
 <CA+8X3fU-Xczjp6X7oRmdCPaZ8YrdQYUGkZ63o874Ji0c6b7HfA@mail.gmail.com>
 <CAGsroM0=z=WZRNipMOcD8EcoUcjFJ7+SKK7fMqaM4MEy_2mHbQ@mail.gmail.com>
Message-ID: <CA+8X3fXv74goBQDVEF4axRz4s00yVb9W07Z6TbcEmrvCqpv-MQ@mail.gmail.com>

Hi George,
Same to you. I fooled around with the plot a bit after I sent the email.

Jim

On Mon, Jan 3, 2022 at 8:36 AM george brida <george.brida at gmail.com> wrote:
>
> Thanks a lot Jim. I really appreciate your help. Happy new year 2022.
> George
>
> On Wed, Dec 29, 2021 at 10:10 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>> Hi George,
>> This example is obviously a mess, but it shows the basic elements. The
>> labels may be placed manually using something like boxed.labels
>> (plotrix) with lines connecting the labels to the smaller countries.
>> If you want the labels within the countries you will have to use a big
>> graphics device.
>>
>> library(maps)
>> map("world")
>> countries=c("China","Bangladesh","Egypt","Indonesia","South Korea","Nigeria",
>>  "Brazil","Pakistan","Philippines","Vietnam","South Africa",
>>  "India","Mexico","Turkey")
>> countrycol<-c(rep("red",6),rep("blue",4),"green",rep("orange",3))
>> for(i in 1:length(countries)) {
>>  mapinf<-map(region=countries[i],col=countrycol[i],add=TRUE)
>>  xpos<-sum(mapinf$range[1:2])/2
>>  ypos<-sum(mapinf$range[3:4])/2
>>  text(xpos,ypos,countries[i])
>> }
>>
>>
>> Jim
>>
>> On Thu, Dec 30, 2021 at 7:34 AM george brida <george.brida at gmail.com> wrote:
>> >
>> > Dear R users,
>> >
>> > I would like to map with R the following countries (with their names on the
>> > map) as follows: the first group in red composed by China, Bangladesh,
>> > Eypt, Indonesia, South Korea, Nigeria. The second group in blue composed by
>> > Brazil, Pakistan, Philippines, Vietnam.
>> >
>> > The third group in green solely composed by South Africa.
>> >
>> > Finally, the fourth group in orange composed by India, Mexico and Turkey.
>> >
>> > I'd also like a legend that assigns the different colors to the various
>> > group.
>> > I tried several times with library maps but it seems that I failed to find
>> > the real setting of xlim and ylim. Can you please help me, I will be very
>> > grateful.
>> >
>> > Best regards
>> > George
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.

From petr@p|k@| @end|ng |rom prechez@@cz  Mon Jan  3 10:37:36 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 3 Jan 2022 09:37:36 +0000
Subject: [R] mixture univariate distributions fit
In-Reply-To: <CAGxFJbQw074136DhPJFx_Lg_qNTiT_vy01REMrc8qguhHt1MVw@mail.gmail.com>
References: <42e04a96845c4c96a15da9d7e8044028@SRVEXCHCM1301.precheza.cz>
 <CAGxFJbTxasFj4+MpFZfngvHA_d_8BK41mknZzoSDFfq+Cxa6fg@mail.gmail.com>
 <f95d630111d44aa1ad9823501a4eef16@SRVEXCHCM1301.precheza.cz>
 <CAGxFJbSnPeSPZSOudUZapg1V4waoG2A-DpnstE2FLZMMwUyCcw@mail.gmail.com>
 <08b00b524de748d28179321e8cf41145@SRVEXCHCM1301.precheza.cz>
 <20211231112549.7bf51abb@Tarkus>
 <09d639fe79ce44198db4c276dc726956@SRVEXCHCM1301.precheza.cz>
 <CAGxFJbQw074136DhPJFx_Lg_qNTiT_vy01REMrc8qguhHt1MVw@mail.gmail.com>
Message-ID: <666bc577c4984a1ea6d04423fdd0e765@SRVEXCHCM1301.precheza.cz>

Hallo Bert

The discussion starts to be more off topic here, as you already pointed. There 
probably is not any package (function) in R designed for easy overlapping peak 
(distribution) fitting. With original data one could use mixtools, with 
density or cummulative density values Ivan's suggestion seems to work 
reasonably.

To your questions
1. No, peak location is not known. If I decided to code the function (package) 
myself I would start with plot and user should select possible location by 
locator.

2. No, but one should restrict the number of components to some reasonable 
value.

3. In particle size measurement it is usually lognormal or normal 
distribution, for which the way suggested by Ivan is workable solution. 
However in the other case I have on mind, the function could be more variable 
(Fraser-Suzuki, Cauchy, Pseudo-Voigt, ...) and I would need to program the 
curves myself. Possible way is to make a plot with the starting values and let 
user to change them until the fit is relatively close to measured values.

So unless somebody could point me to an R package for such peak shape mixture 
evaluation I do not consider further discussion necessary. I first need to do 
my homework if I decided to code such function myself.

Thank you again and best regards.
Petr

> -----Original Message-----
> From: Bert Gunter <bgunter.4567 at gmail.com>
> Sent: Friday, December 31, 2021 6:57 PM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Cc: Ivan Krylov <krylov.r00t at gmail.com>; r-help mailing list <r-help at r-
> project.org>
> Subject: Re: [R] mixture univariate distributions fit
>
> Petr:
> Please feel free to ignore and not reply if you think the following 
> questions
> are unhelpful.
>
> 1. Do you want to know the location of peaks (local modes) or the
> parameters of the/a mixture distribution? Peaks do not have to be located at
> the modes of the individual components of the mixture.
>
> 2. Do you know the number of components in the mixture? This would
> simplify the problem (a lot, I believe; though those more knowledgeable
> should comment on that).
>
> 3. Do you know that the points on the fitted density you get are obtained as
> a mixture of normals? Or  at least of symmetric distributions? ... or 
> whether
> they are obtained by some sort of
> (algorithmic) density estimation procedure?
>
> Best and New Year's greeting to all,
> Bert
>
>
>
> On Fri, Dec 31, 2021 at 1:49 AM PIKAL Petr <petr.pikal at precheza.cz> wrote:
> >
> > Hallo Ivan
> >
> > Thanks. Yes, this approach seems to be viable. I did not consider
> > using dnorm in fitting procedure. But as you pointed
> >
> > > (Some nonlinear least squares problems will be much harder to solve
> > > though.)
> >
> > This simple example is quite easy. The more messy are data and the
> > more distributions are mixed in them the more problematic could be the
> > correct starting values selection. Errors could be quite common.
> >
> > x <- (0:200)/100
> > y1 <- dnorm(x, mean=.3, sd=.1)
> > y2 <- dnorm(x, mean=.7, sd=.2)
> > y3 <- dnorm(x, mean=.5, sd=.1)
> >
> > ymix <- ((y1+2*y2+y3)/max(y1+2*y2+y3))+rnorm(201, sd=.001) plot(x,
> > ymix)
> >
> > With just sd1 and sd2 slightly higher, the fit results to error.
> > > fit <- minpack.lm::nlsLM(
> > +  ymix ~ a1 * dnorm(x, mu1, sd1) + a2 * dnorm(x, mu2, sd2)+
> > +  a3 * dnorm(x, mu3, sd3),
> > +  start = c(a1 = 1, mu1 = .3, sd1=.3, a2 = 2, mu2 = .7, sd2 =.3,
> > +  a3 = 1, mu3 = .5, sd3 = .1),
> > +  lower = rep(0, 9) # help minpack avoid NaNs
> > + )
> > Error in nlsModel(formula, mf, start, wts) :
> >   singular gradient matrix at initial parameter estimates
> >
> > If sd1 and sd2 are set to lower value, the function is no longer
> > singular and arrives with result.
> >
> > Well, it seems that the  only way how to procced is to code such
> > function by myself and take care of suitable starting values.
> >
> > Best regards.
> > Petr
> >
> > > -----Original Message-----
> > > From: Ivan Krylov <krylov.r00t at gmail.com>
> > > Sent: Friday, December 31, 2021 9:26 AM
> > > To: PIKAL Petr <petr.pikal at precheza.cz>
> > > Cc: r-help mailing list <r-help at r-project.org>
> > > Subject: Re: [R] mixture univariate distributions fit
> > >
> > > On Fri, 31 Dec 2021 07:59:11 +0000
> > > PIKAL Petr <petr.pikal at precheza.cz> wrote:
> > >
> > > > x <- (0:100)/100
> > > > y1 <- dnorm((x, mean=.3, sd=.1)
> > > > y2 <- dnorm((x, mean=.7, sd=.1)
> > > > ymix <- ((y1+2*y2)/max(y1+2*y2))
> > >
> > > > My question is if there is some package or function which could
> > > > get those values ***directly from x and ymix values***, which is
> > > > basically what is measured in my case.
> > >
> > > Apologies if I'm missing something, but, this being a peak fitting
> > > problem, shouldn't nls() (or something from the minpack.lm or nlsr
> > > packages) work for you here?
> > >
> > > minpack.lm::nlsLM(
> > >  ymix ~ a1 * dnorm(x, mu1, sigma1) + a2 * dnorm(x, mu2, sigma2),
> > > start = c(a1 = 1, mu1 = 0, sigma1 = 1, a2 = 1, mu2 = 1, sigma2 = 1),
> > > lower = rep(0, 6) # help minpack avoid NaNs
> > > )
> > > # Nonlinear regression model
> > > #  model: ymix ~ a1 * dnorm(x, mu1, sigma1) + a2 * dnorm(x, mu2,
> > > sigma2) #  data: parent.frame()
> > > #      a1    mu1 sigma1     a2    mu2 sigma2
> > > #  0.1253 0.3000 0.1000 0.2506 0.7000 0.1000 # residual
> > > sum-of-squares: 1.289e-31 # # Number of iterations to convergence:
> > > 23 # Achieved convergence tolerance: 1.49e-08
> > >
> > > (Some nonlinear least squares problems will be much harder to solve
> > > though.)
> > >
> > > --
> > > Best regards,
> > > Ivan
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.

From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Mon Jan  3 20:49:22 2022
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Mon, 3 Jan 2022 19:49:22 +0000 (UTC)
Subject: [R] Speed up studentized confidence intervals ?
In-Reply-To: <175EC817-7136-4559-BF04-39675578EDA0@mcmaster.ca>
References: <721769419.5879847.1639914338826.ref@mail.yahoo.com>
 <721769419.5879847.1639914338826@mail.yahoo.com>
 <ade3d6fe-011e-7b1d-174e-d5e5dc6fa0cf@sapo.pt>
 <5715_1640804948_1BTJ96KP008110_1382401986.3579113.1640804913673@mail.yahoo.com>
 <175EC817-7136-4559-BF04-39675578EDA0@mcmaster.ca>
Message-ID: <461304800.1787849.1641239362781@mail.yahoo.com>

Dear John, Dear Rui,

I really thank you a lot for your R code.

Best,
SV




Le jeudi 30 d?cembre 2021, 05:25:11 UTC+1, Fox, John <jfox at mcmaster.ca> a ?crit : 





Dear varin sacha,

You didn't correctly adapt the code to the median. The outer call to mean() in the last line shouldn't be replaced with median() -- it computes the proportion of intervals that include the population median.

As well, you can't rely on the asymptotics of the bootstrap for a nonlinear statistic like the median with an n as small as 5, as your example, properly implemented (and with the code slightly cleaned up), illustrates:

> library(boot)
> set.seed(123)
> s <- rgamma(n=100000, shape=2, rate=5)
> (m <- median(s))
[1] 0.3364465
> N <- 1000
> n <- 5
> set.seed(321)
> out <- replicate(N, {
+? dat <- data.frame(sample(s, size=n))
+? med <- function(d, i) {
+? ? median(d[i, ])
+? }
+? boot.out <- boot(data = dat, statistic = med, R = 10000)
+? boot.ci(boot.out, type = "bca")$bca[, 4:5]
+ })
> #coverage probability
> mean(out[1, ] < m & m < out[2, ])
[1] 0.758


You do get the expected coverage, however, for a larger sample, here with n = 100:

> N <- 1000
> n <- 100
> set.seed(321)
> out <- replicate(N, {
+? dat <- data.frame(sample(s, size=n))
+? med <- function(d, i) {
+? ? median(d[i, ])
+? }
+? boot.out <- boot(data = dat, statistic = med, R = 10000)
+? boot.ci(boot.out, type = "bca")$bca[, 4:5]
+ })
> #coverage probability
> mean(out[1, ] < m & m < out[2, ])
[1] 0.952

I hope this helps,
John

-- 
John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
Web: http://socserv.mcmaster.ca/jfox/




?On 2021-12-29, 2:09 PM, "R-help on behalf of varin sacha via R-help" <r-help-bounces at r-project.org on behalf of r-help at r-project.org> wrote:

? ? Dear David,
? ? Dear Rui,

? ? Many thanks for your response. It perfectly works for the mean. Now I have a problem with my R code for the median. Because I always get 1 (100%) coverage probability that is more than very strange. Indeed, considering that an interval whose lower limit is the smallest value in the sample and whose upper limit is the largest value has 1/32 + 1/32 = 1/16 probability of non-coverage, implying that the confidence of such an interval is 15/16 rather than 1 (100%), I suspect that the confidence interval I use for the median is not correctly defined for n=5 observations, and likely contains all observations in the sample ? What is wrong with my R code ?

? ? ########################################
? ? library(boot)

? ? s=rgamma(n=100000,shape=2,rate=5)
? ? median(s)

? ? N <- 100
? ? out <- replicate(N, {
? ? a<- sample(s,size=5)
? ? median(a) 

? ? dat<-data.frame(a)
? ? med<-function(d,i) {
? ? temp<-d[i,]
? ? median(temp)
? ? }

? ? ? boot.out <- boot(data = dat, statistic = med, R = 10000)
? ? ? boot.ci(boot.out, type = "bca")$bca[, 4:5]
? ? })

? ? #coverage probability
? ? median(out[1, ] < median(s) & median(s) < out[2, ])
? ? ########################################




? ? Le jeudi 23 d?cembre 2021, 14:10:36 UTC+1, Rui Barradas <ruipbarradas at sapo.pt> a ?crit : 





? ? Hello,

? ? The code is running very slowly because you are recreating the function 
? ? in the replicate() loop and because you are creating a data.frame also 
? ? in the loop.

? ? And because in the bootstrap statistic function med() you are computing 
? ? the variance of yet another loop. This is probably statistically wrong 
? ? but like David says, without a problem description it's hard to say.

? ? Also, why compute variances if they are never used?

? ? Here is complete code executing in much less than 2:00 hours. Note that 
? ? it passes the vector a directly to med(), not a df with just one column.


? ? library(boot)

? ? set.seed(2021)
? ? s <- sample(178:798, 100000, replace = TRUE)
? ? mean(s)

? ? med <- function(d, i) {
? ? ? temp <- d[i]
? ? ? f <- mean(temp)
? ? ? g <- var(temp)
? ? ? c(Mean = f, Var = g)
? ? }

? ? N <- 1000
? ? out <- replicate(N, {
? ? ? a <- sample(s, size = 5)
? ? ? boot.out <- boot(data = a, statistic = med, R = 10000)
? ? ? boot.ci(boot.out, type = "stud")$stud[, 4:5]
? ? })
? ? mean(out[1, ] < mean(s) & mean(s) < out[2, ])
? ? #[1] 0.952



? ? Hope this helps,

? ? Rui Barradas

? ? ?s 11:45 de 19/12/21, varin sacha via R-help escreveu:
? ? > Dear R-experts,
? ? > 
? ? > Here below my R code working but really really slowly ! I need 2 hours with my computer to finally get an answer ! Is there a way to improve my R code to speed it up ? At least to win 1 hour ;=)
? ? > 
? ? > Many thanks
? ? > 
? ? > ########################################################
? ? > library(boot)
? ? > 
? ? > s<- sample(178:798, 100000, replace=TRUE)
? ? > mean(s)
? ? > 
? ? > N <- 1000
? ? > out <- replicate(N, {
? ? > a<- sample(s,size=5)
? ? > mean(a)
? ? > dat<-data.frame(a)
? ? > 
? ? > med<-function(d,i) {
? ? > temp<-d[i,]
? ? > f<-mean(temp)
? ? > g<-var(replicate(50,mean(sample(temp,replace=T))))
? ? > return(c(f,g))
? ? > 
? ? > }
? ? > 
? ? >? ? boot.out <- boot(data = dat, statistic = med, R = 10000)
? ? >? ? boot.ci(boot.out, type = "stud")$stud[, 4:5]
? ? > })
? ? > mean(out[1,] < mean(s) & mean(s) < out[2,])
? ? > ########################################################
? ? > 
? ? > ______________________________________________
? ? > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
? ? > https://stat.ethz.ch/mailman/listinfo/r-help
? ? > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
? ? > and provide commented, minimal, self-contained, reproducible code.
? ? > 

? ? ______________________________________________
? ? R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
? ? https://stat.ethz.ch/mailman/listinfo/r-help
? ? PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
? ? and provide commented, minimal, self-contained, reproducible code.


From @n@@j@m@hed1994 @end|ng |rom gm@||@com  Tue Jan  4 02:06:26 2022
From: @n@@j@m@hed1994 @end|ng |rom gm@||@com (Anas Jamshed)
Date: Tue, 4 Jan 2022 06:06:26 +0500
Subject: [R] Connect R with Ensemble Rest API to fetch variations
Message-ID: <CAG0CrLj_jLMAwk9kXFhKEuSUKXqkp9xL97c1AUc+fSof4Nx3FA@mail.gmail.com>

I have a list of 422 genes in excel file .I want to know if its possible to
get snps details of these gene by using Ensemble Rest API or biomart?

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jan  4 02:22:34 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 3 Jan 2022 17:22:34 -0800
Subject: [R] Connect R with Ensemble Rest API to fetch variations
In-Reply-To: <CAG0CrLj_jLMAwk9kXFhKEuSUKXqkp9xL97c1AUc+fSof4Nx3FA@mail.gmail.com>
References: <CAG0CrLj_jLMAwk9kXFhKEuSUKXqkp9xL97c1AUc+fSof4Nx3FA@mail.gmail.com>
Message-ID: <CAGxFJbQANR7V6STBTY=1EFbRAUXnO+dD43iR9Fme80k+0ZAveQ@mail.gmail.com>

Your query is completely off topic here. I suggest you try posting at:
https://www.bioconductor.org/help/
instead. I also suggest that you read and follow their posting guide before
doing so.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Mon, Jan 3, 2022 at 5:08 PM Anas Jamshed <anasjamshed1994 at gmail.com>
wrote:

> I have a list of 422 genes in excel file .I want to know if its possible to
> get snps details of these gene by using Ensemble Rest API or biomart?
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From wjm1 @end|ng |rom c@@@co|umb|@@edu  Tue Jan  4 04:16:47 2022
From: wjm1 @end|ng |rom c@@@co|umb|@@edu (William Michels)
Date: Mon, 3 Jan 2022 19:16:47 -0800
Subject: [R] Connect R with Ensemble Rest API to fetch variations
In-Reply-To: <CAG0CrLj_jLMAwk9kXFhKEuSUKXqkp9xL97c1AUc+fSof4Nx3FA@mail.gmail.com>
References: <CAG0CrLj_jLMAwk9kXFhKEuSUKXqkp9xL97c1AUc+fSof4Nx3FA@mail.gmail.com>
Message-ID: <CAA99HCyvh2aqYMNRj9BzfQjd4=PR-8k8O8rONkiEp5BgaGiJRA@mail.gmail.com>

Hello Anas,

You can find courses and/or training materials on the Ensembl/EBI
websites, including R code:

https://www.ebi.ac.uk/training/online/courses/ensembl-rest-api/
http://training.ensembl.org/

You can also click on individual 'Ensembl REST API Endpoints', and
find sample R code there:

http://rest.ensembl.org/

Good luck,

Bill.

W. Michels, Ph.D.





On Mon, Jan 3, 2022 at 5:08 PM Anas Jamshed <anasjamshed1994 at gmail.com> wrote:
>
> I have a list of 422 genes in excel file .I want to know if its possible to
> get snps details of these gene by using Ensemble Rest API or biomart?
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From he|n0106 @end|ng |rom umn@edu  Tue Jan  4 04:19:31 2022
From: he|n0106 @end|ng |rom umn@edu (Bradley Heins)
Date: Mon, 3 Jan 2022 21:19:31 -0600
Subject: [R] Multiple Data Import Excel
Message-ID: <CAHv3Gw0TrKU+=mvm0syBU0z-yB-27tjj9zGxM4AKAjV93=m6rQ@mail.gmail.com>

Hello,
I have 2100 Excel files (.xlsx) that I need to read and combine into 1
file.
I am perplexed because the first 6 lines are header information and the 8th
line are the columns that are needed with the data in columns.

I need to save the first last (IceTag ID) because that number becomes the
ID for all of the data in each specific Excel file.  The ID can be
different for spreadsheets.

Line 2 to 7 are not needed.
Line 8 are the column headers.

The columns are Date, Time, Motion Standing (in time format), Lying (In
time format), Steps and bouts.  See example below.

Any help in reading in multiple files and discarding some lines would
be appreciated.
Regards,
Brad



IceTag ID: 61409782
Site ID: n/a
Animal ID: n/a
First Record: 05/18/2021 14:04:27
Last Record: 05/25/2021 14:00:51
File Time Zone: Central Standard Time

Date             Time    Motion StandingT LyingT Steps Bouts
05/18/2021 14:04:27  65  0:10:29 0:00:04 20 1
05/18/2021 14:15:00 69 0:08:52 0:06:08 15 1


-- 
Bradley J. Heins
Extension Specialist, Dairy Management | Extension | extension.umn.edu
Associate Professor, Dairy Management | West Central ROC |
wcroc.cfans.umn.edu
University of Minnesota | umn.edu
46352 State Hwy 329, Morris, MN 56267
hein0106 at umn.edu | 320-589-1711, Ext. 2118

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Tue Jan  4 09:05:36 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Tue, 4 Jan 2022 08:05:36 +0000
Subject: [R] Multiple Data Import Excel
In-Reply-To: <CAHv3Gw0TrKU+=mvm0syBU0z-yB-27tjj9zGxM4AKAjV93=m6rQ@mail.gmail.com>
References: <CAHv3Gw0TrKU+=mvm0syBU0z-yB-27tjj9zGxM4AKAjV93=m6rQ@mail.gmail.com>
Message-ID: <8447e9e398424c4a8ab5c38dbe8a2f8f@SRVEXCHCM1301.precheza.cz>

Hi

Try readxl package which has possibility to limit range of cells for
reading.

https://cran.r-project.org/web/packages/readxl/readxl.pdf

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Bradley Heins via
> R-help
> Sent: Tuesday, January 4, 2022 4:20 AM
> To: r-help at r-project.org
> Subject: [R] Multiple Data Import Excel
> 
> Hello,
> I have 2100 Excel files (.xlsx) that I need to read and combine into 1
file.
> I am perplexed because the first 6 lines are header information and the
8th
> line are the columns that are needed with the data in columns.
> 
> I need to save the first last (IceTag ID) because that number becomes the
ID
> for all of the data in each specific Excel file.  The ID can be different
for
> spreadsheets.
> 
> Line 2 to 7 are not needed.
> Line 8 are the column headers.
> 
> The columns are Date, Time, Motion Standing (in time format), Lying (In
time
> format), Steps and bouts.  See example below.
> 
> Any help in reading in multiple files and discarding some lines would be
> appreciated.
> Regards,
> Brad
> 
> 
> 
> IceTag ID: 61409782
> Site ID: n/a
> Animal ID: n/a
> First Record: 05/18/2021 14:04:27
> Last Record: 05/25/2021 14:00:51
> File Time Zone: Central Standard Time
> 
> Date             Time    Motion StandingT LyingT Steps Bouts
> 05/18/2021 14:04:27  65  0:10:29 0:00:04 20 1
> 05/18/2021 14:15:00 69 0:08:52 0:06:08 15 1
> 
> 
> --
> Bradley J. Heins
> Extension Specialist, Dairy Management | Extension | extension.umn.edu
> Associate Professor, Dairy Management | West Central ROC |
> wcroc.cfans.umn.edu University of Minnesota | umn.edu
> 46352 State Hwy 329, Morris, MN 56267
> hein0106 at umn.edu | 320-589-1711, Ext. 2118
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Jan  4 09:54:29 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 04 Jan 2022 00:54:29 -0800
Subject: [R] Multiple Data Import Excel
In-Reply-To: <CAHv3Gw0TrKU+=mvm0syBU0z-yB-27tjj9zGxM4AKAjV93=m6rQ@mail.gmail.com>
References: <CAHv3Gw0TrKU+=mvm0syBU0z-yB-27tjj9zGxM4AKAjV93=m6rQ@mail.gmail.com>
Message-ID: <D23D54D6-74E2-46CD-8B8C-5760D62758F0@dcn.davis.ca.us>

Reading Excel files isn't a feature of base R (the topic here... read the Posting Guide linked below) but the readxl contributed package can help with that. The read_xlsx function has arguments to skip rows, limit the number of rows read in, or specify regions to import such as B2:B2. Read the help documentation with ?read_xlsx to learn more.

You should always focus first on creating a function that can read one of these files as a data frame. With that done, lapply can be used with list.files to read in 2 or 20000 files. The do.call function can be used with rbind to assemble those data frames into one (or dplyr::bind_rows can do that in one call).

You may find [1] or [2] helpful with the process if not the details. I don't feel energetic enough to actually invent xlsx files for a reproducible example.

[1] https://jdnewmil.github.io/RLoopsAndGroups/DoItAgainR.html
[2] https://jdnewmil.github.io/FunctionsTalk/FunctionsTalk.html


On January 3, 2022 7:19:31 PM PST, Bradley Heins via R-help <r-help at r-project.org> wrote:
>Hello,
>I have 2100 Excel files (.xlsx) that I need to read and combine into 1
>file.
>I am perplexed because the first 6 lines are header information and the 8th
>line are the columns that are needed with the data in columns.
>
>I need to save the first last (IceTag ID) because that number becomes the
>ID for all of the data in each specific Excel file.  The ID can be
>different for spreadsheets.
>
>Line 2 to 7 are not needed.
>Line 8 are the column headers.
>
>The columns are Date, Time, Motion Standing (in time format), Lying (In
>time format), Steps and bouts.  See example below.
>
>Any help in reading in multiple files and discarding some lines would
>be appreciated.
>Regards,
>Brad
>
>
>
>IceTag ID: 61409782
>Site ID: n/a
>Animal ID: n/a
>First Record: 05/18/2021 14:04:27
>Last Record: 05/25/2021 14:00:51
>File Time Zone: Central Standard Time
>
>Date             Time    Motion StandingT LyingT Steps Bouts
>05/18/2021 14:04:27  65  0:10:29 0:00:04 20 1
>05/18/2021 14:15:00 69 0:08:52 0:06:08 15 1
>
>

-- 
Sent from my phone. Please excuse my brevity.


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Tue Jan  4 11:55:43 2022
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Tue, 4 Jan 2022 11:55:43 +0100
Subject: [R] how to run r biotools boxM terst on multiple groups?
Message-ID: <CAMk+s2TWiN6deYJFOc-UY5zAFM0hCEeuicSVCCH6yUHyRK0H4A@mail.gmail.com>

I have a data frame containing a half dozen continuous measurements
and over a dozen ordinal variables (such as, death, fever, symptoms
etc).
I would like to run a box matrix test and I am using biotools' boxM,
but it allows to run only one ordinal group at the time. For instance:
```
>data(iris)
>boxM(iris[,1:4], iris[,5])

Box's M-test for Homogeneity of Covariance Matrices

data:  iris[, 1:4]
Chi-Sq (approx.) = 140.94, df = 20, p-value < 2.2e-16

>bins <- c(1,2); iris$bin <- findInterval(iris$Petal.Width, bins)
>iris$bin = factor(iris$bin)
>boxM(iris[,1:4], iris[,6])

Box's M-test for Homogeneity of Covariance Matrices

data:  iris[, 1:4]
Chi-Sq (approx.) = 140.94, df = 20, p-value < 2.2e-16

>boxM(iris[,1:4], iris[,5:6])
Error in boxM(iris[, 1:4], iris[, 5:6]) : incompatible dimensions!
```
Is there a way to check for equality of variance-covariance on
multiple groups simultaneously?
Thanks


From petr@p|k@| @end|ng |rom prechez@@cz  Tue Jan  4 12:34:07 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Tue, 4 Jan 2022 11:34:07 +0000
Subject: [R] how to run r biotools boxM terst on multiple groups?
In-Reply-To: <CAMk+s2TWiN6deYJFOc-UY5zAFM0hCEeuicSVCCH6yUHyRK0H4A@mail.gmail.com>
References: <CAMk+s2TWiN6deYJFOc-UY5zAFM0hCEeuicSVCCH6yUHyRK0H4A@mail.gmail.com>
Message-ID: <06477492d1d24ad0be88d2b10acb3014@SRVEXCHCM1301.precheza.cz>

Hi.

Not sure if statistically correct but what about

iris$int<- interaction(iris$bin, iris$Species)
boxM(iris[,1:4], iris[,7])

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Luigi Marongiu
> Sent: Tuesday, January 4, 2022 11:56 AM
> To: r-help <r-help at r-project.org>
> Subject: [R] how to run r biotools boxM terst on multiple groups?
> 
> I have a data frame containing a half dozen continuous measurements and
> over a dozen ordinal variables (such as, death, fever, symptoms etc).
> I would like to run a box matrix test and I am using biotools' boxM, but
it
> allows to run only one ordinal group at the time. For instance:
> ```
> >data(iris)
> >boxM(iris[,1:4], iris[,5])
> 
> Box's M-test for Homogeneity of Covariance Matrices
> 
> data:  iris[, 1:4]
> Chi-Sq (approx.) = 140.94, df = 20, p-value < 2.2e-16
> 
> >bins <- c(1,2); iris$bin <- findInterval(iris$Petal.Width, bins)
> >iris$bin = factor(iris$bin) boxM(iris[,1:4], iris[,6])
> 
> Box's M-test for Homogeneity of Covariance Matrices
> 
> data:  iris[, 1:4]
> Chi-Sq (approx.) = 140.94, df = 20, p-value < 2.2e-16
> 
> >boxM(iris[,1:4], iris[,5:6])
> Error in boxM(iris[, 1:4], iris[, 5:6]) : incompatible dimensions!
> ```
> Is there a way to check for equality of variance-covariance on multiple
groups
> simultaneously?
> Thanks
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From m@rong|u@|u|g| @end|ng |rom gm@||@com  Tue Jan  4 16:32:01 2022
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Tue, 4 Jan 2022 16:32:01 +0100
Subject: [R] how to run r biotools boxM terst on multiple groups?
In-Reply-To: <06477492d1d24ad0be88d2b10acb3014@SRVEXCHCM1301.precheza.cz>
References: <CAMk+s2TWiN6deYJFOc-UY5zAFM0hCEeuicSVCCH6yUHyRK0H4A@mail.gmail.com>
 <06477492d1d24ad0be88d2b10acb3014@SRVEXCHCM1301.precheza.cz>
Message-ID: <CAMk+s2SLrEV9GCL8zkH3jYj1xbZ-7wO531QoJ-o9SoL6edfMnw@mail.gmail.com>

thanks, this is essentially merging bin and species into a single
variable. I was more interested in knowing if boxM can run on multiple
classes directly...

On Tue, Jan 4, 2022 at 12:34 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> Hi.
>
> Not sure if statistically correct but what about
>
> iris$int<- interaction(iris$bin, iris$Species)
> boxM(iris[,1:4], iris[,7])
>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Luigi Marongiu
> > Sent: Tuesday, January 4, 2022 11:56 AM
> > To: r-help <r-help at r-project.org>
> > Subject: [R] how to run r biotools boxM terst on multiple groups?
> >
> > I have a data frame containing a half dozen continuous measurements and
> > over a dozen ordinal variables (such as, death, fever, symptoms etc).
> > I would like to run a box matrix test and I am using biotools' boxM, but
> it
> > allows to run only one ordinal group at the time. For instance:
> > ```
> > >data(iris)
> > >boxM(iris[,1:4], iris[,5])
> >
> > Box's M-test for Homogeneity of Covariance Matrices
> >
> > data:  iris[, 1:4]
> > Chi-Sq (approx.) = 140.94, df = 20, p-value < 2.2e-16
> >
> > >bins <- c(1,2); iris$bin <- findInterval(iris$Petal.Width, bins)
> > >iris$bin = factor(iris$bin) boxM(iris[,1:4], iris[,6])
> >
> > Box's M-test for Homogeneity of Covariance Matrices
> >
> > data:  iris[, 1:4]
> > Chi-Sq (approx.) = 140.94, df = 20, p-value < 2.2e-16
> >
> > >boxM(iris[,1:4], iris[,5:6])
> > Error in boxM(iris[, 1:4], iris[, 5:6]) : incompatible dimensions!
> > ```
> > Is there a way to check for equality of variance-covariance on multiple
> groups
> > simultaneously?
> > Thanks
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-
> > guide.html
> > and provide commented, minimal, self-contained, reproducible code.



-- 
Best regards,
Luigi


From |@heemj@n93 @end|ng |rom y@hoo@com  Wed Jan  5 04:52:34 2022
From: |@heemj@n93 @end|ng |rom y@hoo@com (Faheem Jan)
Date: Wed, 5 Jan 2022 03:52:34 +0000 (UTC)
Subject: [R] splitting data matrix into submatrices
References: <1606908911.1738332.1641354754130.ref@mail.yahoo.com>
Message-ID: <1606908911.1738332.1641354754130@mail.yahoo.com>

I have data in a matrix form of order 1826*24 where 1826 represents the days and 24 hourly observations on each data. My objective is to split the matrix into working (Monday to Friday) and non-working (Saturday and Sunday) submatrices. Can anyone help me that how I will do that splitting using R?


	[[alternative HTML version deleted]]


From @v|gro@@ @end|ng |rom ver|zon@net  Wed Jan  5 05:29:14 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Wed, 5 Jan 2022 04:29:14 +0000 (UTC)
Subject: [R] splitting data matrix into submatrices
In-Reply-To: <1606908911.1738332.1641354754130@mail.yahoo.com>
References: <1606908911.1738332.1641354754130.ref@mail.yahoo.com>
 <1606908911.1738332.1641354754130@mail.yahoo.com>
Message-ID: <1534514481.1092676.1641356954030@mail.yahoo.com>


If you explain better, we can help. But first consider what you are asking and how it is relected in the data.
Is the first component a row number whose meaning is day 1 contains a 1 or perhaps 0 and the next row contains one more? Or is there some kind of date in there?
What day of the week is the first day? Is it a Sunday or a Wednesday or what?
Just for arguments sake, say the first row is a Sunday and all later rows are sequential. Then row 1 is a weekend and row 7 is a weekend and so are rows 7 more (8 and 18) and those 7 more and so on.?
What do you call it when you are looking for the remainder after dividing by 7?
Can you make a list of indices that contain every possible weekend, and another index containing just the non-weekends??
If other things like Holidays do not matter, you can index the matrix many ways by asking for all columns but only the rows that your logical index wants.?
If I have misunderstood the problem, ignore.

-----Original Message-----
From: Faheem Jan via R-help <r-help at r-project.org>
To: R-help Mailing List <r-help at r-project.org>
Sent: Tue, Jan 4, 2022 10:52 pm
Subject: [R] splitting data matrix into submatrices

I have data in a matrix form of order 1826*24 where 1826 represents the days and 24 hourly observations on each data. My objective is to split the matrix into working (Monday to Friday) and non-working (Saturday and Sunday) submatrices. Can anyone help me that how I will do that splitting using R?


??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jan  5 07:10:32 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 04 Jan 2022 22:10:32 -0800
Subject: [R] splitting data matrix into submatrices
In-Reply-To: <1606908911.1738332.1641354754130@mail.yahoo.com>
References: <1606908911.1738332.1641354754130.ref@mail.yahoo.com>
 <1606908911.1738332.1641354754130@mail.yahoo.com>
Message-ID: <7CFA85D1-801C-4A27-ACC2-89403EDA91C5@dcn.davis.ca.us>

A lot of new R users fail to grasp what makes data frames more useful than matrices, or use data frames without even realizing they are not using matrices.

This is important because there are more tools for manipulating data frames than matrices. One tool is the split function... if you have a vector of values identifying how each row should be identified you can give that to the split function with your data frame and it will return a list of data frames (2 in this case).

v <- rep( 0:6, length=1826 )
wkv <- ifelse( v < 5, "Weekday", "Weekend" )
ans <- split( DF, wkv )
ans$Weekday
ans$Weekend

Note that this is a fragile technique for generating wkv though... usually there will be a column of dates that can be used to generate wkv more consistently if your data changes.

Please read the Posting Guide... using formatted email can cause readers to not see what you sent. Use plain text email format... it is a setting in your email client.

On January 4, 2022 7:52:34 PM PST, Faheem Jan via R-help <r-help at r-project.org> wrote:
>I have data in a matrix form of order 1826*24 where 1826 represents the days and 24 hourly observations on each data. My objective is to split the matrix into working (Monday to Friday) and non-working (Saturday and Sunday) submatrices. Can anyone help me that how I will do that splitting using R?
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jan  5 08:56:33 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 04 Jan 2022 23:56:33 -0800
Subject: [R] splitting data matrix into submatrices
In-Reply-To: <142684577.1776749.1641365079399@mail.yahoo.com>
References: <1606908911.1738332.1641354754130.ref@mail.yahoo.com>
 <1606908911.1738332.1641354754130@mail.yahoo.com>
 <7CFA85D1-801C-4A27-ACC2-89403EDA91C5@dcn.davis.ca.us>
 <142684577.1776749.1641365079399@mail.yahoo.com>
Message-ID: <CB9C8114-7C46-4FBC-AB5C-B8FE4C516185@dcn.davis.ca.us>

Please reply all so the mailing list is included in the discussion. I don't do 1:1 tutoring and others can chime in if I make a mistake.

I would say you don't understand what my example did, since it doesn't care how many columns are in your data frame. If you are in fact working with a matrix, then convert it to a data frame.

As for continuing to help you... you need to provide a minimal reproducible example with a small sample data set if what I showed you isn't helping.

[1] http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

[2] http://adv-r.had.co.nz/Reproducibility.html

On January 4, 2022 10:44:39 PM PST, Faheem Jan <faheemjan93 at yahoo.com> wrote:
>I understand what you have done, it can easily apply in the case of vector information mean each day having a single observation. But in my case I have 24 observations each day, I want to convert the matrix into two submatrices for weekdays and the other for weekends. So please suggest to me anyway that how I do this?
>
>    On Wednesday, January 5, 2022, 11:10:34 AM GMT+5, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:  
> 
> A lot of new R users fail to grasp what makes data frames more useful than matrices, or use data frames without even realizing they are not using matrices.
>
>This is important because there are more tools for manipulating data frames than matrices. One tool is the split function... if you have a vector of values identifying how each row should be identified you can give that to the split function with your data frame and it will return a list of data frames (2 in this case).
>
>v <- rep( 0:6, length=1826 )
>wkv <- ifelse( v < 5, "Weekday", "Weekend" )
>ans <- split( DF, wkv )
>ans$Weekday
>ans$Weekend
>
>Note that this is a fragile technique for generating wkv though... usually there will be a column of dates that can be used to generate wkv more consistently if your data changes.
>
>Please read the Posting Guide... using formatted email can cause readers to not see what you sent. Use plain text email format... it is a setting in your email client.
>
>On January 4, 2022 7:52:34 PM PST, Faheem Jan via R-help <r-help at r-project.org> wrote:
>>I have data in a matrix form of order 1826*24 where 1826 represents the days and 24 hourly observations on each data. My objective is to split the matrix into working (Monday to Friday) and non-working (Saturday and Sunday) submatrices. Can anyone help me that how I will do that splitting using R?
>>
>>
>>??? [[alternative HTML version deleted]]
>>
>>______________________________________________
>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.
>

-- 
Sent from my phone. Please excuse my brevity.


From petr@p|k@| @end|ng |rom prechez@@cz  Wed Jan  5 09:44:37 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Wed, 5 Jan 2022 08:44:37 +0000
Subject: [R] splitting data matrix into submatrices
In-Reply-To: <CB9C8114-7C46-4FBC-AB5C-B8FE4C516185@dcn.davis.ca.us>
References: <1606908911.1738332.1641354754130.ref@mail.yahoo.com>
 <1606908911.1738332.1641354754130@mail.yahoo.com>
 <7CFA85D1-801C-4A27-ACC2-89403EDA91C5@dcn.davis.ca.us>
 <142684577.1776749.1641365079399@mail.yahoo.com>
 <CB9C8114-7C46-4FBC-AB5C-B8FE4C516185@dcn.davis.ca.us>
Message-ID: <1280543af3364fe5b43d2d5256fefc89@SRVEXCHCM1301.precheza.cz>

Hi

As Jeff said for data frames you can use split.
If you insist to work with matrices, the principle is similar but you cannot 
use split.

mat <- matrix(1:20, 5,4)
mat
     [,1] [,2] [,3] [,4]
[1,]    1    6   11   16
[2,]    2    7   12   17
[3,]    3    8   13   18
[4,]    4    9   14   19
[5,]    5   10   15   20

# factor for splitting
fac <- factor(c(1,2,1,2,1))
> fac
[1] 1 2 1 2 1
Levels: 1 2

#splitting matrix according to the factor levels
> mat[which(fac==1), ]
     [,1] [,2] [,3] [,4]
[1,]    1    6   11   16
[2,]    3    8   13   18
[3,]    5   10   15   20
> mat[which(fac==2), ]
     [,1] [,2] [,3] [,4]
[1,]    2    7   12   17
[2,]    4    9   14   19

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Newmiller
> Sent: Wednesday, January 5, 2022 8:57 AM
> To: Faheem Jan <faheemjan93 at yahoo.com>; R-help <r-help at r-project.org>
> Subject: Re: [R] splitting data matrix into submatrices
>
> Please reply all so the mailing list is included in the discussion. I don't 
> do 1:1
> tutoring and others can chime in if I make a mistake.
>
> I would say you don't understand what my example did, since it doesn't care
> how many columns are in your data frame. If you are in fact working with a
> matrix, then convert it to a data frame.
>
> As for continuing to help you... you need to provide a minimal reproducible
> example with a small sample data set if what I showed you isn't helping.
>
> [1] http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-
> reproducible-example
>
> [2] http://adv-r.had.co.nz/Reproducibility.html
>
> On January 4, 2022 10:44:39 PM PST, Faheem Jan
> <faheemjan93 at yahoo.com> wrote:
> >I understand what you have done, it can easily apply in the case of vector
> information mean each day having a single observation. But in my case I have
> 24 observations each day, I want to convert the matrix into two submatrices
> for weekdays and the other for weekends. So please suggest to me anyway
> that how I do this?
> >
> >    On Wednesday, January 5, 2022, 11:10:34 AM GMT+5, Jeff Newmiller
> <jdnewmil at dcn.davis.ca.us> wrote:
> >
> > A lot of new R users fail to grasp what makes data frames more useful than
> matrices, or use data frames without even realizing they are not using
> matrices.
> >
> >This is important because there are more tools for manipulating data frames
> than matrices. One tool is the split function... if you have a vector of 
> values
> identifying how each row should be identified you can give that to the split
> function with your data frame and it will return a list of data frames (2 in 
> this
> case).
> >
> >v <- rep( 0:6, length=1826 )
> >wkv <- ifelse( v < 5, "Weekday", "Weekend" ) ans <- split( DF, wkv )
> >ans$Weekday ans$Weekend
> >
> >Note that this is a fragile technique for generating wkv though... usually
> there will be a column of dates that can be used to generate wkv more
> consistently if your data changes.
> >
> >Please read the Posting Guide... using formatted email can cause readers to
> not see what you sent. Use plain text email format... it is a setting in 
> your
> email client.
> >
> >On January 4, 2022 7:52:34 PM PST, Faheem Jan via R-help <r-help at r-
> project.org> wrote:
> >>I have data in a matrix form of order 1826*24 where 1826 represents the
> days and 24 hourly observations on each data. My objective is to split the
> matrix into working (Monday to Friday) and non-working (Saturday and
> Sunday) submatrices. Can anyone help me that how I will do that splitting
> using R?
> >>
> >>
> >>    [[alternative HTML version deleted]]
> >>
> >>______________________________________________
> >>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>https://stat.ethz.ch/mailman/listinfo/r-help
> >>PLEASE do read the posting guide
> >>http://www.R-project.org/posting-guide.html
> >>and provide commented, minimal, self-contained, reproducible code.
> >
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From dj@ndr|j@ @end|ng |rom gm@||@com  Tue Jan  4 14:55:42 2022
From: dj@ndr|j@ @end|ng |rom gm@||@com (Andrija Djurovic)
Date: Tue, 4 Jan 2022 14:55:42 +0100
Subject: [R] [R-pkgs] PDtoolkit: Collection of Tools for PD Rating Model
 Development
Message-ID: <CABcwgRRDj=V=CUp5gg=vHawRzGLXKy_uLFQMWxcyM0TsHZzhPg@mail.gmail.com>

Dear R users,

I am happy to announce that my new package PDtoolkit is now available on
CRAN.

The goal of this package is to cover the most common steps in probability
of default (PD) rating model development and validation. The main
procedures available are those that refer to univariate, bivariate,
multivariate analysis, calibration and validation. Along with accompanied
monobin and monobinShiny packages, PDtoolkit provides functions which are
suitable for different data transformation and modeling tasks such as:
imputations, monotonic binning of numeric risk factors, binning of
categorical risk factors, weights of evidence (WoE) and information value
(IV) calculations, WoE coding (replacement of risk factors modalities with
WoE values), risk factor clustering, area under curve (AUC) calculation and
others. Additionally, package provides set of validation functions for
testing homogeneity, heterogeneity, discriminatory and predictive power of
the model.

For details and examples please check out the github page
https://github.com/andrija-djurovic/PDtoolkit  or README file on CRAN page
https://CRAN.R-project.org/package=PDtoolkit

Best regards,
Andrija Djurovic

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From @erv|ce @end|ng |rom @hd@w@on@com  Wed Jan  5 14:08:01 2022
From: @erv|ce @end|ng |rom @hd@w@on@com (Stephen H. Dawson, DSL)
Date: Wed, 5 Jan 2022 08:08:01 -0500
Subject: [R] splitting data matrix into submatrices
In-Reply-To: <1606908911.1738332.1641354754130@mail.yahoo.com>
References: <1606908911.1738332.1641354754130.ref@mail.yahoo.com>
 <1606908911.1738332.1641354754130@mail.yahoo.com>
Message-ID: <f5d8004b-0d23-eaa5-efa5-340ccdd45cf7@shdawson.com>

Hi,


Please post the data structure so it is more clear what data is being 
massaged.


Thanks,
*Stephen Dawson, DSL*
/Executive Strategy Consultant/
Business & Technology
+1 (865) 804-3454
http://www.shdawson.com <http://www.shdawson.com>


On 1/4/22 10:52 PM, Faheem Jan via R-help wrote:
> I have data in a matrix form of order 1826*24 where 1826 represents the days and 24 hourly observations on each data. My objective is to split the matrix into working (Monday to Friday) and non-working (Saturday and Sunday) submatrices. Can anyone help me that how I will do that splitting using R?
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From @v|gro@@ @end|ng |rom ver|zon@net  Wed Jan  5 18:52:18 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Wed, 5 Jan 2022 17:52:18 +0000 (UTC)
Subject: [R] splitting data matrix into submatrices
In-Reply-To: <974163148.1748840.1641357842656@mail.yahoo.com>
References: <1606908911.1738332.1641354754130.ref@mail.yahoo.com>
 <1606908911.1738332.1641354754130@mail.yahoo.com>
 <1534514481.1092676.1641356954030@mail.yahoo.com>
 <974163148.1748840.1641357842656@mail.yahoo.com>
Message-ID: <1941149728.1202836.1641405138132@mail.yahoo.com>

Faheem seems to reply to people in private and I replid to him in private but seeing later messages, am giving a synopsis in public.
I too suggesed that using a data.frame is a better way to keep his data and use it for some purposes.
But my understanding is that his matrix is fairly easy to understand and can be indexed given the way it is set up.
Every row of the matrix has info for a single day, with each hour represented by one column. There is no date anywhere in sight or any visible index. But the collection was done starting on a Sunday and continuing without gaps so every seventh following row is a Sunday. So it is trivial to do what he asks using the %% operator to select all numbers between 1 and the number of rows in the matrix that have a remainder of either 0 (Saturdays) or 1 (Sundays) with something like this if the data is in mymat:
rows <- 1826weekends <- (rows %% 7 <= 1)satsun <- mymat[weekends,]
This basically indexes the matrix using a boolean vector. The result can be saved as a matrix of weekend data.
Getting the second matrix is as trivial as flipping the boolean vector.
workweek <- mymat[!weekends,]

-----Original Message-----
From: Faheem Jan <faheemjan93 at yahoo.com>
To: Avi Gross <avigross at verizon.net>
Sent: Tue, Jan 4, 2022 11:44 pm
Subject: Re: [R] splitting data matrix into submatrices

First I will thank you for your interest and time. As my first day is Sunday, in my data matrix 24 are hourly demand of electricity. As electricity demand is different is working and non-working days, so I want a separate analysis for working and nonworking days that's why I want to split the data matrix into submatrices. Can we use for looping which divides the matrix into submatrices? 

    On Wednesday, January 5, 2022, 09:29:44 AM GMT+5, Avi Gross via R-help <r-help at r-project.org> wrote:  
 
 
If you explain better, we can help. But first consider what you are asking and how it is relected in the data.
Is the first component a row number whose meaning is day 1 contains a 1 or perhaps 0 and the next row contains one more? Or is there some kind of date in there?
What day of the week is the first day? Is it a Sunday or a Wednesday or what?
Just for arguments sake, say the first row is a Sunday and all later rows are sequential. Then row 1 is a weekend and row 7 is a weekend and so are rows 7 more (8 and 18) and those 7 more and so on.?
What do you call it when you are looking for the remainder after dividing by 7?
Can you make a list of indices that contain every possible weekend, and another index containing just the non-weekends??
If other things like Holidays do not matter, you can index the matrix many ways by asking for all columns but only the rows that your logical index wants.?
If I have misunderstood the problem, ignore.

-----Original Message-----
From: Faheem Jan via R-help <r-help at r-project.org>
To: R-help Mailing List <r-help at r-project.org>
Sent: Tue, Jan 4, 2022 10:52 pm
Subject: [R] splitting data matrix into submatrices

I have data in a matrix form of order 1826*24 where 1826 represents the days and 24 hourly observations on each data. My objective is to split the matrix into working (Monday to Friday) and non-working (Saturday and Sunday) submatrices. Can anyone help me that how I will do that splitting using R?


??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
  
	[[alternative HTML version deleted]]


From chuckco|em@n @end|ng |rom y@hoo@com  Wed Jan  5 16:47:07 2022
From: chuckco|em@n @end|ng |rom y@hoo@com (Chuck Coleman)
Date: Wed, 5 Jan 2022 15:47:07 +0000 (UTC)
Subject: [R] Error:  if statement: missing value where TRUE/FALSE needed
References: <1233449163.1172379.1641397627054.ref@mail.yahoo.com>
Message-ID: <1233449163.1172379.1641397627054@mail.yahoo.com>

This is a rather complex error, for which I created?https://sourceforge.net/projects/rhelp/files/Metro/?to hold a minimal workspace with all files needed to make everything work.? I'm afraid I can't make a minimal example because the environment may be involved.? I suspect that it is an error with base R itself.? I've verified it in both MacOS and Ubuntu Linux using Rstudio?2021.09.1?Build 372?and R 4.1.2.? I'm trying to run the command

Metro.imf0 <- extractIMF0(Metro.xts,threshold = 1.7,robust=TRUE)$IMF0

This is the last command in MetroTest.R, which also sets up the workspace.? The output is in MetroTest.log.? The error is:

????Error in if (xseg[w1] > ub & m == 1) olrmark[wi] = TRUE else if (xseg[w1] <? :?
? ????missing value where TRUE/FALSE needed
????Called from: detectspikes(x, mindex = mindex, threshold = threshold, robust = robust)

extractIMF0() calls extractoutliers() which iteratively calls detectspikes() using while().? I've put in tracking code to show the beginning and end of each iteration of while() and the call to detectspikes().

The command producing the error is:

? ? ? if (xseg[w1] > ub & m == 1) olrmark[wi] = TRUE
? ? ? else if (xseg[w1] < lb & m == 2) olrmark[wi] = TRUE

This code used to work before R 4.1.2.? (I forget the exact version.)? The first time I had this error, I inserted a browser() command right before if/else so I could manually check all of the if/else arguments and they were nonmissing.? Then, executing the if/else caused a crash, I believe the first time it was called.? I then made the browser() statement conditional to stop execution if a missing argument were encountered and detectspikes() happily passed it and crashed.? Then, I individually called print() for each variable.? detectspikes() happily ran several times, then crashed in a later call after running for several seconds.? Again, browser() never stopped the program.? It is this version that I have verified on both a Mac and Ubuntu box.

The first step appears to be to run the code using earlier versions of R.? (I don't want to tamper with my installations.)? Afterwards, I have no idea.? Hence, my post.

Thank you for your help,
Chuck


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Jan  5 19:22:37 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 5 Jan 2022 21:22:37 +0300
Subject: [R] Error:  if statement: missing value where TRUE/FALSE needed
In-Reply-To: <1233449163.1172379.1641397627054@mail.yahoo.com>
References: <1233449163.1172379.1641397627054.ref@mail.yahoo.com>
 <1233449163.1172379.1641397627054@mail.yahoo.com>
Message-ID: <20220105212237.07489025@Tarkus>

On Wed, 5 Jan 2022 15:47:07 +0000 (UTC)
Chuck Coleman via R-help <r-help at r-project.org> wrote:

> I then made the browser() statement conditional to stop execution if
> a missing argument were encountered and detectspikes() happily passed
> it and crashed.

How exactly do you check for a missing argument?

Could options(error = recover) shed some more light on the situation?
This way a crash happens first, then you get to use browser() to take a
look at the environment at the time of the crash.

-- 
Best regards,
Ivan


From w||||@mwdun|@p @end|ng |rom gm@||@com  Wed Jan  5 19:49:57 2022
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Wed, 5 Jan 2022 10:49:57 -0800
Subject: [R] Error: if statement: missing value where TRUE/FALSE needed
In-Reply-To: <1233449163.1172379.1641397627054@mail.yahoo.com>
References: <1233449163.1172379.1641397627054.ref@mail.yahoo.com>
 <1233449163.1172379.1641397627054@mail.yahoo.com>
Message-ID: <CAHqSRuS-e2y+4J0uqfHbrwN0mKPRTbW+hTkLT+LMTT4iP7s5qQ@mail.gmail.com>

And how does one [easily] download those files from sourceforge?

-Bill

On Wed, Jan 5, 2022 at 10:15 AM Chuck Coleman via R-help <
r-help at r-project.org> wrote:

> This is a rather complex error, for which I created
> https://sourceforge.net/projects/rhelp/files/Metro/ to hold a minimal
> workspace with all files needed to make everything work.  I'm afraid I
> can't make a minimal example because the environment may be involved.  I
> suspect that it is an error with base R itself.  I've verified it in both
> MacOS and Ubuntu Linux using Rstudio 2021.09.1 Build 372 and R 4.1.2.  I'm
> trying to run the command
>
> Metro.imf0 <- extractIMF0(Metro.xts,threshold = 1.7,robust=TRUE)$IMF0
>
> This is the last command in MetroTest.R, which also sets up the
> workspace.  The output is in MetroTest.log.  The error is:
>
>     Error in if (xseg[w1] > ub & m == 1) olrmark[wi] = TRUE else if
> (xseg[w1] <  :
>       missing value where TRUE/FALSE needed
>     Called from: detectspikes(x, mindex = mindex, threshold = threshold,
> robust = robust)
>
> extractIMF0() calls extractoutliers() which iteratively calls
> detectspikes() using while().  I've put in tracking code to show the
> beginning and end of each iteration of while() and the call to
> detectspikes().
>
> The command producing the error is:
>
>       if (xseg[w1] > ub & m == 1) olrmark[wi] = TRUE
>       else if (xseg[w1] < lb & m == 2) olrmark[wi] = TRUE
>
> This code used to work before R 4.1.2.  (I forget the exact version.)  The
> first time I had this error, I inserted a browser() command right before
> if/else so I could manually check all of the if/else arguments and they
> were nonmissing.  Then, executing the if/else caused a crash, I believe the
> first time it was called.  I then made the browser() statement conditional
> to stop execution if a missing argument were encountered and detectspikes()
> happily passed it and crashed.  Then, I individually called print() for
> each variable.  detectspikes() happily ran several times, then crashed in a
> later call after running for several seconds.  Again, browser() never
> stopped the program.  It is this version that I have verified on both a Mac
> and Ubuntu box.
>
> The first step appears to be to run the code using earlier versions of R.
> (I don't want to tamper with my installations.)  Afterwards, I have no
> idea.  Hence, my post.
>
> Thank you for your help,
> Chuck
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jan  5 19:57:15 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 5 Jan 2022 13:57:15 -0500
Subject: [R] Error: if statement: missing value where TRUE/FALSE needed
In-Reply-To: <1233449163.1172379.1641397627054@mail.yahoo.com>
References: <1233449163.1172379.1641397627054.ref@mail.yahoo.com>
 <1233449163.1172379.1641397627054@mail.yahoo.com>
Message-ID: <a1b11637-db7f-40f9-2834-d7c0382c73d7@gmail.com>

On 05/01/2022 10:47 a.m., Chuck Coleman via R-help wrote:
> This is a rather complex error, for which I created?https://sourceforge.net/projects/rhelp/files/Metro/?to hold a minimal workspace with all files needed to make everything work.? I'm afraid I can't make a minimal example because the environment may be involved.? I suspect that it is an error with base R itself.? I've verified it in both MacOS and Ubuntu Linux using Rstudio?2021.09.1?Build 372?and R 4.1.2.? I'm trying to run the command
> 
> Metro.imf0 <- extractIMF0(Metro.xts,threshold = 1.7,robust=TRUE)$IMF0
> 
> This is the last command in MetroTest.R, which also sets up the workspace.? The output is in MetroTest.log.? The error is:
> 
>  ????Error in if (xseg[w1] > ub & m == 1) olrmark[wi] = TRUE else if (xseg[w1] <? :
>  ? ????missing value where TRUE/FALSE needed
>  ????Called from: detectspikes(x, mindex = mindex, threshold = threshold, robust = robust)
> 
> extractIMF0() calls extractoutliers() which iteratively calls detectspikes() using while().? I've put in tracking code to show the beginning and end of each iteration of while() and the call to detectspikes().
> 
> The command producing the error is:
> 
>  ? ? ? if (xseg[w1] > ub & m == 1) olrmark[wi] = TRUE
>  ? ? ? else if (xseg[w1] < lb & m == 2) olrmark[wi] = TRUE
> 
> This code used to work before R 4.1.2.? (I forget the exact version.)? The first time I had this error, I inserted a browser() command right before if/else so I could manually check all of the if/else arguments and they were nonmissing. 

The error message is misleading:  you don't get this message from 
missing values, it comes from using NA in the condition of the if(). 
Missing values would lead to an error message like 'argument "x" is 
missing, with no default'.


  Then, executing the if/else caused a crash,

Usually the word crash is a serious problem where R shuts down.  From 
your description, I think you just have an error.

Errors are much easier to diagnose.  As Ivan said, you can use 
options(recover) to stop when the error is raised, find the right 
evaluation frame, and print all the values involved in the condition.

You can also just use cat() to print everything just before the bad 
statement, e.g.

  cat("xseg[w1]=", xseg[w1], " ub=", ub,  " m=", m, " lb=", lb, "\n")

and then see if the last message printed contains any NA values.

Duncan Murdoch



I believe the first time it was called.? I then made the browser() 
statement conditional to stop execution if a missing argument were 
encountered and detectspikes() happily passed it and crashed.? Then, I 
individually called print() for each variable.? detectspikes() happily 
ran several times, then crashed in a later call after running for 
several seconds.? Again, browser() never stopped the program.? It is 
this version that I have verified on both a Mac and Ubuntu box.
> 
> The first step appears to be to run the code using earlier versions of R.? (I don't want to tamper with my installations.)? Afterwards, I have no idea.? Hence, my post.
> 
> Thank you for your help,
> Chuck
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Jan  5 20:09:53 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 5 Jan 2022 22:09:53 +0300
Subject: [R] Error:  if statement: missing value where TRUE/FALSE needed
In-Reply-To: <20220105212237.07489025@Tarkus>
References: <1233449163.1172379.1641397627054.ref@mail.yahoo.com>
 <1233449163.1172379.1641397627054@mail.yahoo.com>
 <20220105212237.07489025@Tarkus>
Message-ID: <20220105220953.13afa63d@Tarkus>

On Wed, 5 Jan 2022 21:22:37 +0300
Ivan Krylov <krylov.r00t at gmail.com> wrote:

> How exactly do you check for a missing argument?

To answer my own question, the check is

>> browser(expr = {
>>  is.na(w1) | is.na(ub) | is.na(m) | is.na(wi) | is.na(lb)
>> })

I think that there are NAs in xseg, which I don't see a check for. In
particular, a few lines above, there's

>> md = median( xseg, na.rm = TRUE);
>> if (robust) sdd = mad(xseg,na.rm = TRUE)
>> else sdd = sd(xseg,na.rm = TRUE)

...which seems to suggest they are expected to happen there.

Not sure which advice to give regarding the choice of file hosting
service. On the one hand, SourceForge lets you upload a whole directory
of files in arbitrary formats, but isn't very convenient do download
more than one file from. On the other hand, "pastebin" services like
http://paste.debian.net/ or http://paste.org.ru/ let us browse the code
right away, without having to look at the "Your download will start
shortly..." screen, but don't host *.RData or more than one file per
link. I guess that some other code hosting service like
SourceHut/GitHub/GitLab/Gitea/... could fulfil both criteria.

-- 
Best regards,
Ivan


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Wed Jan  5 20:45:47 2022
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Wed, 5 Jan 2022 19:45:47 +0000
Subject: [R] Save a graph file use jpeg(file=file)
Message-ID: <MN2PR03MB5167F17C6538C90BB30C0646E24B9@MN2PR03MB5167.namprd03.prod.outlook.com>

I am trying to create a 3-D graph (using scatter3d) and save the graph to a file so I can insert the graph into a manuscript. I am able to create the graph. When I run the code below an RGL window opens that has the graph. The file is saved to disk after dev.odd() runs. Unfortunately, when I open the saved file, all I see is a white window. Can someone tell me how to have the file so I can subsequently read and place the file in a paper? The problem occurs regardless of the format in which I try to save the file, e.g. png, tiff.


x <- 1:10
y <- 2:11
z <- y+rnorm(10)
ForGraph<-data.frame(x=x,y=y,z=z)
ForGraph

gpathj <- file.path("C:","LAL","test.jpeg")
gpathj
jpeg(file = gpathj)
par(mai = c(0.5, 0.5, 0.5, 0.5))
scatter3d(z=ForGraph$x,
          y=ForGraph$y,
          x=ForGraph$z,
          surface=FALSE,grid=TRUE,sphere.size=4
          ,xlab="Categories",ylab="ScoreRange",
          zlab="VTE Rate (%)",axis.ticks=TRUE)
dev.off()


Thank you,
John


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jan  5 20:51:05 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 5 Jan 2022 14:51:05 -0500
Subject: [R] Error: if statement: missing value where TRUE/FALSE needed
In-Reply-To: <20220105220953.13afa63d@Tarkus>
References: <1233449163.1172379.1641397627054.ref@mail.yahoo.com>
 <1233449163.1172379.1641397627054@mail.yahoo.com>
 <20220105212237.07489025@Tarkus> <20220105220953.13afa63d@Tarkus>
Message-ID: <d92593f1-fc70-9457-2025-894ada66b077@gmail.com>

On 05/01/2022 2:09 p.m., Ivan Krylov wrote:
> On Wed, 5 Jan 2022 21:22:37 +0300
> Ivan Krylov <krylov.r00t at gmail.com> wrote:
> 
>> How exactly do you check for a missing argument?
> 
> To answer my own question, the check is
> 
>>> browser(expr = {
>>>   is.na(w1) | is.na(ub) | is.na(m) | is.na(wi) | is.na(lb)
>>> })
> 
> I think that there are NAs in xseg, which I don't see a check for. In
> particular, a few lines above, there's
> 
>>> md = median( xseg, na.rm = TRUE);
>>> if (robust) sdd = mad(xseg,na.rm = TRUE)
>>> else sdd = sd(xseg,na.rm = TRUE)
> 
> ...which seems to suggest they are expected to happen there.
> 
> Not sure which advice to give regarding the choice of file hosting
> service. On the one hand, SourceForge lets you upload a whole directory
> of files in arbitrary formats, but isn't very convenient do download
> more than one file from. On the other hand, "pastebin" services like
> http://paste.debian.net/ or http://paste.org.ru/ let us browse the code
> right away, without having to look at the "Your download will start
> shortly..." screen, but don't host *.RData or more than one file per
> link. I guess that some other code hosting service like
> SourceHut/GitHub/GitLab/Gitea/... could fulfil both criteria.

I would take one step back, and suggest that if any project has as many 
scripts as this one, it should be put in an R package.  You can 
distribute that by building it into a tar.gz file and putting that 
single file in a place where people can download it.  Github and R-forge 
work well for packages, and I assume other hosting services do too, 
though I haven't used many.

People seem to be unreasonably reluctant to put their code into packages.

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jan  5 20:58:40 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 5 Jan 2022 14:58:40 -0500
Subject: [R] Save a graph file use jpeg(file=file)
In-Reply-To: <MN2PR03MB5167F17C6538C90BB30C0646E24B9@MN2PR03MB5167.namprd03.prod.outlook.com>
References: <MN2PR03MB5167F17C6538C90BB30C0646E24B9@MN2PR03MB5167.namprd03.prod.outlook.com>
Message-ID: <00b8bfd6-cbf3-2666-d89c-1bd7a4e71d6d@gmail.com>

On 05/01/2022 2:45 p.m., Sorkin, John wrote:
> I am trying to create a 3-D graph (using scatter3d) and save the graph to a file so I can insert the graph into a manuscript. I am able to create the graph. When I run the code below an RGL window opens that has the graph. The file is saved to disk after dev.odd() runs. Unfortunately, when I open the saved file, all I see is a white window. Can someone tell me how to have the file so I can subsequently read and place the file in a paper? The problem occurs regardless of the format in which I try to save the file, e.g. png, tiff.
> 
> 
> x <- 1:10
> y <- 2:11
> z <- y+rnorm(10)
> ForGraph<-data.frame(x=x,y=y,z=z)
> ForGraph
> 
> gpathj <- file.path("C:","LAL","test.jpeg")
> gpathj
> jpeg(file = gpathj)
> par(mai = c(0.5, 0.5, 0.5, 0.5))
> scatter3d(z=ForGraph$x,
>            y=ForGraph$y,
>            x=ForGraph$z,
>            surface=FALSE,grid=TRUE,sphere.size=4
>            ,xlab="Categories",ylab="ScoreRange",
>            zlab="VTE Rate (%)",axis.ticks=TRUE)
> dev.off()
> 
> 

You didn't say what package you found scatter3d in, but you did say it 
opens an rgl window.  rgl doesn't use R graphics devices, so jpeg() and 
the like don't work.

To save an rgl image, you use the rgl::snapshot3d() function.  It only 
has support for saving to PNG format.

If you are writing your manuscript in R Markdown or knitr Rnw, there are 
ways to have the file included automatically.  There have been methods 
to use with Sweave as well, but those aren't being maintained:  people 
should use knitr instead.

Duncan Murdoch


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Wed Jan  5 21:42:25 2022
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Wed, 5 Jan 2022 20:42:25 +0000
Subject: [R] Save a graph file use jpeg(file=file)
In-Reply-To: <BN6PR2201MB1553F7991B382B0F5AE308FECF4B9@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <MN2PR03MB5167F17C6538C90BB30C0646E24B9@MN2PR03MB5167.namprd03.prod.outlook.com>
 <BN6PR2201MB1553F7991B382B0F5AE308FECF4B9@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <CA1A1A19-88C1-409C-8874-5808AE673FF1@som.umaryland.edu>

Tim
Thank you for your suggestion. The problem with your suggestion is that the copied image is low resolution, 96dpi. Saved files can have higher resolution.
Thank you
John

John David Sorkin M.D., Ph.D.
Professor of Medicine
Chief, Biostatistics and Informatics
University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
Baltimore VA Medical Center
10 North Greene Street<x-apple-data-detectors://12>
GRECC<x-apple-data-detectors://12> (BT/18/GR)
Baltimore, MD 21201-1524<x-apple-data-detectors://13/0>
(Phone) 410-605-711<tel:410-605-7119>9
(Fax) 410-605-7913<tel:410-605-7913> (Please call phone number above prior to faxing)

On Jan 5, 2022, at 2:59 PM, Ebert,Timothy Aaron <tebert at ufl.edu> wrote:

?The simple solution for Windows is to use (windows icon) + shift + s. You then select a portion of your screen and it gets copied to your clipboard. You can then paste that into your document. Of course this will not work if it is important that the reader is able to rotate the graphic.
Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
Sent: Wednesday, January 5, 2022 2:46 PM
To: r-help at r-project.org (r-help at r-project.org) <r-help at r-project.org>
Subject: [R] Save a graph file use jpeg(file=file)

[External Email]

I am trying to create a 3-D graph (using scatter3d) and save the graph to a file so I can insert the graph into a manuscript. I am able to create the graph. When I run the code below an RGL window opens that has the graph. The file is saved to disk after dev.odd() runs. Unfortunately, when I open the saved file, all I see is a white window. Can someone tell me how to have the file so I can subsequently read and place the file in a paper? The problem occurs regardless of the format in which I try to save the file, e.g. png, tiff.


x <- 1:10
y <- 2:11
z <- y+rnorm(10)
ForGraph<-data.frame(x=x,y=y,z=z)
ForGraph

gpathj <- file.path("C:","LAL","test.jpeg") gpathj jpeg(file = gpathj) par(mai = c(0.5, 0.5, 0.5, 0.5)) scatter3d(z=ForGraph$x,
         y=ForGraph$y,
         x=ForGraph$z,
         surface=FALSE,grid=TRUE,sphere.size=4
         ,xlab="Categories",ylab="ScoreRange",
         zlab="VTE Rate (%)",axis.ticks=TRUE)
dev.off()


Thank you,
John


       [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Furldefense.proofpoint.com%2Fv2%2Furl%3Fu%3Dhttps-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp%26d%3DDwICAg%26c%3DsJ6xIWYx-zLMB3EPkvcnVg%26r%3D9PEhQh2kVeAsRzsn7AkP-g%26m%3D9AMmnr8IGTA1cG1beZmaYb3IDwiObdbc6OI3PkjbwbniR_W4i9hcMzYbyzYTE-gS%26s%3D2IkUWGiufhME4qqOuIRPGShSOMTsStDDwSkLoTt4zdM%26e%3D&amp;data=04%7C01%7Cjsorkin%40som.umaryland.edu%7C9e6f54c1880f46b971f608d9d085e667%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637770095783063118%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=g0489Q9jetIGpbYyjL%2FY2LTKxKud5r4EnFoDlP6uO5c%3D&amp;reserved=0
PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Furldefense.proofpoint.com%2Fv2%2Furl%3Fu%3Dhttp-3A__www.R-2Dproject.org_posting-2Dguide.html%26d%3DDwICAg%26c%3DsJ6xIWYx-zLMB3EPkvcnVg%26r%3D9PEhQh2kVeAsRzsn7AkP-g%26m%3D9AMmnr8IGTA1cG1beZmaYb3IDwiObdbc6OI3PkjbwbniR_W4i9hcMzYbyzYTE-gS%26s%3DNHEqSQ0hFwKq_5lC0CqVYr53rYXLTpdWVNXZMCEMLLI%26e%3D&amp;data=04%7C01%7Cjsorkin%40som.umaryland.edu%7C9e6f54c1880f46b971f608d9d085e667%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637770095783063118%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=8vRn%2FuQJVjFydNfiXOQKIyYBDM3EXXBdBRCccHQnvWY%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From |r|end|y @end|ng |rom yorku@c@  Wed Jan  5 21:50:28 2022
From: |r|end|y @end|ng |rom yorku@c@ (Michael L Friendly)
Date: Wed, 5 Jan 2022 20:50:28 +0000
Subject: [R] how to run r biotools boxM terst on multiple groups?
Message-ID: <YT1PR01MB3146E26E9962414370BC7D46AB4B9@YT1PR01MB3146.CANPRD01.PROD.OUTLOOK.COM>

Try
heplots::boxM

This also has a nice plot method to visualize the contributions to box's M test.

See my paper:
https://www.datavis.ca/papers/EqCov-TAS.pdf



> -----Original Message-----

> From: R-help <r-help-bounces at r-project.org<mailto:r-help-bounces at r-project.org>> On Behalf Of Luigi

> Marongiu

> Sent: Tuesday, January 4, 2022 11:56 AM

> To: r-help <r-help at r-project.org<mailto:r-help at r-project.org>>

> Subject: [R] how to run r biotools boxM terst on multiple groups?

>

> I have a data frame containing a half dozen continuous measurements

> and over a dozen ordinal variables (such as, death, fever, symptoms etc).

> I would like to run a box matrix test and I am using biotools' boxM,

> but

it


Michael Friendly     Email: friendly AT yorku DOT ca
Professor, Psychology Dept. & Former Chair, ASA Statistical Graphics Section
York University      Voice: 416 736-2100 x66249
4700 Keele Street    Web: http://www.datavis.ca | @datavisFriendly
Toronto, ONT  M3J 1P3 CANADA


	[[alternative HTML version deleted]]


From tebert @end|ng |rom u||@edu  Wed Jan  5 20:57:07 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Wed, 5 Jan 2022 19:57:07 +0000
Subject: [R] Save a graph file use jpeg(file=file)
In-Reply-To: <MN2PR03MB5167F17C6538C90BB30C0646E24B9@MN2PR03MB5167.namprd03.prod.outlook.com>
References: <MN2PR03MB5167F17C6538C90BB30C0646E24B9@MN2PR03MB5167.namprd03.prod.outlook.com>
Message-ID: <BN6PR2201MB1553F7991B382B0F5AE308FECF4B9@BN6PR2201MB1553.namprd22.prod.outlook.com>

The simple solution for Windows is to use (windows icon) + shift + s. You then select a portion of your screen and it gets copied to your clipboard. You can then paste that into your document. Of course this will not work if it is important that the reader is able to rotate the graphic. 
Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
Sent: Wednesday, January 5, 2022 2:46 PM
To: r-help at r-project.org (r-help at r-project.org) <r-help at r-project.org>
Subject: [R] Save a graph file use jpeg(file=file)

[External Email]

I am trying to create a 3-D graph (using scatter3d) and save the graph to a file so I can insert the graph into a manuscript. I am able to create the graph. When I run the code below an RGL window opens that has the graph. The file is saved to disk after dev.odd() runs. Unfortunately, when I open the saved file, all I see is a white window. Can someone tell me how to have the file so I can subsequently read and place the file in a paper? The problem occurs regardless of the format in which I try to save the file, e.g. png, tiff.


x <- 1:10
y <- 2:11
z <- y+rnorm(10)
ForGraph<-data.frame(x=x,y=y,z=z)
ForGraph

gpathj <- file.path("C:","LAL","test.jpeg") gpathj jpeg(file = gpathj) par(mai = c(0.5, 0.5, 0.5, 0.5)) scatter3d(z=ForGraph$x,
          y=ForGraph$y,
          x=ForGraph$z,
          surface=FALSE,grid=TRUE,sphere.size=4
          ,xlab="Categories",ylab="ScoreRange",
          zlab="VTE Rate (%)",axis.ticks=TRUE)
dev.off()


Thank you,
John


        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=9AMmnr8IGTA1cG1beZmaYb3IDwiObdbc6OI3PkjbwbniR_W4i9hcMzYbyzYTE-gS&s=2IkUWGiufhME4qqOuIRPGShSOMTsStDDwSkLoTt4zdM&e=
PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=9AMmnr8IGTA1cG1beZmaYb3IDwiObdbc6OI3PkjbwbniR_W4i9hcMzYbyzYTE-gS&s=NHEqSQ0hFwKq_5lC0CqVYr53rYXLTpdWVNXZMCEMLLI&e=
and provide commented, minimal, self-contained, reproducible code.


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Thu Jan  6 02:23:34 2022
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Thu, 6 Jan 2022 01:23:34 +0000
Subject: [R] Save a graph file use jpeg(file=file)
In-Reply-To: <00b8bfd6-cbf3-2666-d89c-1bd7a4e71d6d@gmail.com>
References: <MN2PR03MB5167F17C6538C90BB30C0646E24B9@MN2PR03MB5167.namprd03.prod.outlook.com>
 <00b8bfd6-cbf3-2666-d89c-1bd7a4e71d6d@gmail.com>
Message-ID: <MN2PR03MB516782F618D42A2BEFD98862E24C9@MN2PR03MB5167.namprd03.prod.outlook.com>

Ducan,

As always, you are very giving of your time to help R users. Thank you!

scatter3d is from the car package.

As I understand snapshot3d, it takes a screen shot and saves the resultant file. This implies that the resultant file will be 72 DPI. I need to get a higher resolution image, at least 300 DPI. Do you have any suggestions?

Thanks as always.

John

________________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Wednesday, January 5, 2022 2:58 PM
To: Sorkin, John; r-help at r-project.org (r-help at r-project.org)
Subject: Re: [R] Save a graph file use jpeg(file=file)

On 05/01/2022 2:45 p.m., Sorkin, John wrote:
> I am trying to create a 3-D graph (using scatter3d) and save the graph to a file so I can insert the graph into a manuscript. I am able to create the graph. When I run the code below an RGL window opens that has the graph. The file is saved to disk after dev.odd() runs. Unfortunately, when I open the saved file, all I see is a white window. Can someone tell me how to have the file so I can subsequently read and place the file in a paper? The problem occurs regardless of the format in which I try to save the file, e.g. png, tiff.
>
>
> x <- 1:10
> y <- 2:11
> z <- y+rnorm(10)
> ForGraph<-data.frame(x=x,y=y,z=z)
> ForGraph
>
> gpathj <- file.path("C:","LAL","test.jpeg")
> gpathj
> jpeg(file = gpathj)
> par(mai = c(0.5, 0.5, 0.5, 0.5))
> scatter3d(z=ForGraph$x,
>            y=ForGraph$y,
>            x=ForGraph$z,
>            surface=FALSE,grid=TRUE,sphere.size=4
>            ,xlab="Categories",ylab="ScoreRange",
>            zlab="VTE Rate (%)",axis.ticks=TRUE)
> dev.off()
>
>

You didn't say what package you found scatter3d in, but you did say it
opens an rgl window.  rgl doesn't use R graphics devices, so jpeg() and
the like don't work.

To save an rgl image, you use the rgl::snapshot3d() function.  It only
has support for saving to PNG format.

If you are writing your manuscript in R Markdown or knitr Rnw, there are
ways to have the file included automatically.  There have been methods
to use with Sweave as well, but those aren't being maintained:  people
should use knitr instead.

Duncan Murdoch

	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Thu Jan  6 02:31:15 2022
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Thu, 6 Jan 2022 01:31:15 +0000
Subject: [R] [External] Re:  Save a graph file use jpeg(file=file)
In-Reply-To: <MN2PR03MB516782F618D42A2BEFD98862E24C9@MN2PR03MB5167.namprd03.prod.outlook.com>
References: <MN2PR03MB5167F17C6538C90BB30C0646E24B9@MN2PR03MB5167.namprd03.prod.outlook.com>
 <00b8bfd6-cbf3-2666-d89c-1bd7a4e71d6d@gmail.com>
 <MN2PR03MB516782F618D42A2BEFD98862E24C9@MN2PR03MB5167.namprd03.prod.outlook.com>
Message-ID: <BL1PR11MB5239EBFAD1940C9B7FF835EED24C9@BL1PR11MB5239.namprd11.prod.outlook.com>

you can make the rgl window full screen, and then stretch the graph to fill the window, and then use snapshot 3d
________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Sorkin, John <jsorkin at som.umaryland.edu>
Sent: Wednesday, January 5, 2022 8:23:34 PM
To: Duncan Murdoch <murdoch.duncan at gmail.com>; r-help at r-project.org (r-help at r-project.org) <r-help at r-project.org>
Subject: [External] Re: [R] Save a graph file use jpeg(file=file)

Ducan,

As always, you are very giving of your time to help R users. Thank you!

scatter3d is from the car package.

As I understand snapshot3d, it takes a screen shot and saves the resultant file. This implies that the resultant file will be 72 DPI. I need to get a higher resolution image, at least 300 DPI. Do you have any suggestions?

Thanks as always.

John

________________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Wednesday, January 5, 2022 2:58 PM
To: Sorkin, John; r-help at r-project.org (r-help at r-project.org)
Subject: Re: [R] Save a graph file use jpeg(file=file)

On 05/01/2022 2:45 p.m., Sorkin, John wrote:
> I am trying to create a 3-D graph (using scatter3d) and save the graph to a file so I can insert the graph into a manuscript. I am able to create the graph. When I run the code below an RGL window opens that has the graph. The file is saved to disk after dev.odd() runs. Unfortunately, when I open the saved file, all I see is a white window. Can someone tell me how to have the file so I can subsequently read and place the file in a paper? The problem occurs regardless of the format in which I try to save the file, e.g. png, tiff.
>
>
> x <- 1:10
> y <- 2:11
> z <- y+rnorm(10)
> ForGraph<-data.frame(x=x,y=y,z=z)
> ForGraph
>
> gpathj <- file.path("C:","LAL","test.jpeg")
> gpathj
> jpeg(file = gpathj)
> par(mai = c(0.5, 0.5, 0.5, 0.5))
> scatter3d(z=ForGraph$x,
>            y=ForGraph$y,
>            x=ForGraph$z,
>            surface=FALSE,grid=TRUE,sphere.size=4
>            ,xlab="Categories",ylab="ScoreRange",
>            zlab="VTE Rate (%)",axis.ticks=TRUE)
> dev.off()
>
>

You didn't say what package you found scatter3d in, but you did say it
opens an rgl window.  rgl doesn't use R graphics devices, so jpeg() and
the like don't work.

To save an rgl image, you use the rgl::snapshot3d() function.  It only
has support for saving to PNG format.

If you are writing your manuscript in R Markdown or knitr Rnw, there are
ways to have the file included automatically.  There have been methods
to use with Sweave as well, but those aren't being maintained:  people
should use knitr instead.

Duncan Murdoch

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7Crmh%40temple.edu%7C7efac70023f74f426dda08d9d0b337b8%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637770290874513198%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=QjooPjMvPZ%2BTnPh%2B9SOISOyeGVRYFMmU2NSfkel7rug%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7Crmh%40temple.edu%7C7efac70023f74f426dda08d9d0b337b8%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637770290874513198%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=TCjwf2%2FaEiUl6d%2BUx37bRRQOsXjUx80DhvwKbeCnkHg%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Thu Jan  6 02:32:02 2022
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Thu, 6 Jan 2022 01:32:02 +0000
Subject: [R] [External] Re:  Save a graph file use jpeg(file=file)
In-Reply-To: <BL1PR11MB5239EBFAD1940C9B7FF835EED24C9@BL1PR11MB5239.namprd11.prod.outlook.com>
References: <MN2PR03MB5167F17C6538C90BB30C0646E24B9@MN2PR03MB5167.namprd03.prod.outlook.com>
 <00b8bfd6-cbf3-2666-d89c-1bd7a4e71d6d@gmail.com>
 <MN2PR03MB516782F618D42A2BEFD98862E24C9@MN2PR03MB5167.namprd03.prod.outlook.com>
 <BL1PR11MB5239EBFAD1940C9B7FF835EED24C9@BL1PR11MB5239.namprd11.prod.outlook.com>
Message-ID: <MN2PR03MB51677F81F62D8CFC635920A1E24C9@MN2PR03MB5167.namprd03.prod.outlook.com>

I'll try that.

Get Outlook for iOS<https://aka.ms/o0ukef>
________________________________
From: Richard M. Heiberger <rmh at temple.edu>
Sent: Wednesday, January 5, 2022 8:31:15 PM
To: Sorkin, John <jsorkin at som.umaryland.edu>; Duncan Murdoch <murdoch.duncan at gmail.com>; r-help at r-project.org (r-help at r-project.org) <r-help at r-project.org>
Subject: Re: [External] Re: [R] Save a graph file use jpeg(file=file)

you can make the rgl window full screen, and then stretch the graph to fill the window, and then use snapshot 3d
________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Sorkin, John <jsorkin at som.umaryland.edu>
Sent: Wednesday, January 5, 2022 8:23:34 PM
To: Duncan Murdoch <murdoch.duncan at gmail.com>; r-help at r-project.org (r-help at r-project.org) <r-help at r-project.org>
Subject: [External] Re: [R] Save a graph file use jpeg(file=file)

Ducan,

As always, you are very giving of your time to help R users. Thank you!

scatter3d is from the car package.

As I understand snapshot3d, it takes a screen shot and saves the resultant file. This implies that the resultant file will be 72 DPI. I need to get a higher resolution image, at least 300 DPI. Do you have any suggestions?

Thanks as always.

John

________________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Wednesday, January 5, 2022 2:58 PM
To: Sorkin, John; r-help at r-project.org (r-help at r-project.org)
Subject: Re: [R] Save a graph file use jpeg(file=file)

On 05/01/2022 2:45 p.m., Sorkin, John wrote:
> I am trying to create a 3-D graph (using scatter3d) and save the graph to a file so I can insert the graph into a manuscript. I am able to create the graph. When I run the code below an RGL window opens that has the graph. The file is saved to disk after dev.odd() runs. Unfortunately, when I open the saved file, all I see is a white window. Can someone tell me how to have the file so I can subsequently read and place the file in a paper? The problem occurs regardless of the format in which I try to save the file, e.g. png, tiff.
>
>
> x <- 1:10
> y <- 2:11
> z <- y+rnorm(10)
> ForGraph<-data.frame(x=x,y=y,z=z)
> ForGraph
>
> gpathj <- file.path("C:","LAL","test.jpeg")
> gpathj
> jpeg(file = gpathj)
> par(mai = c(0.5, 0.5, 0.5, 0.5))
> scatter3d(z=ForGraph$x,
>            y=ForGraph$y,
>            x=ForGraph$z,
>            surface=FALSE,grid=TRUE,sphere.size=4
>            ,xlab="Categories",ylab="ScoreRange",
>            zlab="VTE Rate (%)",axis.ticks=TRUE)
> dev.off()
>
>

You didn't say what package you found scatter3d in, but you did say it
opens an rgl window.  rgl doesn't use R graphics devices, so jpeg() and
the like don't work.

To save an rgl image, you use the rgl::snapshot3d() function.  It only
has support for saving to PNG format.

If you are writing your manuscript in R Markdown or knitr Rnw, there are
ways to have the file included automatically.  There have been methods
to use with Sweave as well, but those aren't being maintained:  people
should use knitr instead.

Duncan Murdoch

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7Crmh%40temple.edu%7C7efac70023f74f426dda08d9d0b337b8%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637770290874513198%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=QjooPjMvPZ%2BTnPh%2B9SOISOyeGVRYFMmU2NSfkel7rug%3D&amp;reserved=0<https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=04%7C01%7Cjsorkin%40som.umaryland.edu%7C1de6e94adaff4ee3df8908d9d0b43bd2%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637770294833471347%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=ZzC0nzJzm5XlBE1eb0oMmwcy31%2FjDQSySkspobqGXto%3D&reserved=0>
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7Crmh%40temple.edu%7C7efac70023f74f426dda08d9d0b337b8%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637770290874513198%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=TCjwf2%2FaEiUl6d%2BUx37bRRQOsXjUx80DhvwKbeCnkHg%3D&amp;reserved=0<https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=04%7C01%7Cjsorkin%40som.umaryland.edu%7C1de6e94adaff4ee3df8908d9d0b43bd2%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637770294833471347%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=dqIeUcRjrWKCuRlmR%2FYwmTn2OIgNYLQHnnU%2FBSwK82Q%3D&reserved=0>
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From cec|||@reyn@ @end|ng |rom gm@||@com  Thu Jan  6 11:02:27 2022
From: cec|||@reyn@ @end|ng |rom gm@||@com (Cecilia Reyna)
Date: Thu, 6 Jan 2022 07:02:27 -0300
Subject: [R] Information function in CRM model
Message-ID: <CAHbBvVi+hb4HHkMXekBQEYgUM9XvdRbGgc_QPJfkvaKPZX6AxQ@mail.gmail.com>

Dear,

I am trying to model the information function of items (and full) based on
the continuous response model.

I am using the EstCRM (1.4) package, but it doesn't compute the information
function.

Another person noticed me of Wang & Zeng's paper (Item parameter estimation
for a continuous response model using an EM algorithm, 1998, Applied
Psychological Measurement). But I am not sure how to calculate it in R.

Please, If someone has calculated that function could you share the script?

Thanks in advance,
Cecilia

-- 
Cecilia Reyna
Instituto de Investigaciones Psicol?gicas (IIPsi) - CONICET - UNC
Facultad de Psicolog?a - Universidad Nacional de C?rdoba
(5000) C?rdoba - ARGENTINA
Tel. 54-351-5353890 int. 60201

RACC: http://www.revistas.unc.edu.ar/index.php/racc

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jan  6 11:10:03 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 6 Jan 2022 05:10:03 -0500
Subject: [R] [External] Re:  Save a graph file use jpeg(file=file)
In-Reply-To: <MN2PR03MB51677F81F62D8CFC635920A1E24C9@MN2PR03MB5167.namprd03.prod.outlook.com>
References: <MN2PR03MB5167F17C6538C90BB30C0646E24B9@MN2PR03MB5167.namprd03.prod.outlook.com>
 <00b8bfd6-cbf3-2666-d89c-1bd7a4e71d6d@gmail.com>
 <MN2PR03MB516782F618D42A2BEFD98862E24C9@MN2PR03MB5167.namprd03.prod.outlook.com>
 <BL1PR11MB5239EBFAD1940C9B7FF835EED24C9@BL1PR11MB5239.namprd11.prod.outlook.com>
 <MN2PR03MB51677F81F62D8CFC635920A1E24C9@MN2PR03MB5167.namprd03.prod.outlook.com>
Message-ID: <d1a2dc52-6657-a1f0-a480-328a7be48d30@gmail.com>

What Rich said will work.  Here are some details to think about:

There are two ways that snapshot3d works.  The original way takes a 
snapshot from your screen.  That will produce an image the same as what 
you see, at the same resolution.  You get this mode if you set "webshot 
= FALSE", or if you don't have the webshot2 package installed.

The newer way uses the webshot2 package.  Unfortunately that package is 
not on CRAN, so you'd need to install it using 
remotes::install_github("rstudio/webshot2") .  It requires that you have 
the Chrome browser installed (or supposedly some other browser providing 
the same libraries; I don't know what else will work).

The webshot2 package doesn't need to display on your screen, so in 
theory you can produce larger snapshots.  It can also do a better 
version of rendering:  the rgl window uses OpenGL 1.x methods, while 
webshot2 uses WebGL, which is based on a newer OpenGL version.  I find 
the font support to be better, and there are some improvements to 
shading of surfaces.  On the negative side, it can be much slower, 
especially on a complex scene, and occasionally has different bugs than 
the other display.

Finally, you don't need to use your mouse to change the window size; you 
can specify width and height in the snapshot3d() call, and the window 
will change as requested.

Duncan Murdoch


On 05/01/2022 8:32 p.m., Sorkin, John wrote:
> I'll try that.
> 
> Get Outlook for iOS <https://aka.ms/o0ukef>
> ------------------------------------------------------------------------
> *From:* Richard M. Heiberger <rmh at temple.edu>
> *Sent:* Wednesday, January 5, 2022 8:31:15 PM
> *To:* Sorkin, John <jsorkin at som.umaryland.edu>; Duncan Murdoch 
> <murdoch.duncan at gmail.com>; r-help at r-project.org (r-help at r-project.org) 
> <r-help at r-project.org>
> *Subject:* Re: [External] Re: [R] Save a graph file use jpeg(file=file)
> you can make the rgl window full screen, and then stretch the graph to 
> fill the window, and then use snapshot 3d
> ------------------------------------------------------------------------
> *From:* R-help <r-help-bounces at r-project.org> on behalf of Sorkin, John 
> <jsorkin at som.umaryland.edu>
> *Sent:* Wednesday, January 5, 2022 8:23:34 PM
> *To:* Duncan Murdoch <murdoch.duncan at gmail.com>; r-help at r-project.org 
> (r-help at r-project.org) <r-help at r-project.org>
> *Subject:* [External] Re: [R] Save a graph file use jpeg(file=file)
> Ducan,
> 
> As always, you are very giving of your time to help R users. Thank you!
> 
> scatter3d is from the car package.
> 
> As I understand snapshot3d, it takes a screen shot and saves the 
> resultant file. This implies that the resultant file will be 72 DPI. I 
> need to get a higher resolution image, at least 300 DPI. Do you have any 
> suggestions?
> 
> Thanks as always.
> 
> John
> 
> ________________________________________
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Wednesday, January 5, 2022 2:58 PM
> To: Sorkin, John; r-help at r-project.org (r-help at r-project.org)
> Subject: Re: [R] Save a graph file use jpeg(file=file)
> 
> On 05/01/2022 2:45 p.m., Sorkin, John wrote:
>> I am trying to create a 3-D graph (using scatter3d) and save the graph to a file so I can insert the graph into a manuscript. I am able to create the graph. When I run the code below an RGL window opens that has the graph. The file is saved to disk after  dev.odd() runs. Unfortunately, when I open the saved file, all I see 
> is a white window. Can someone tell me how to have the file so I can 
> subsequently read and place the file in a paper? The problem occurs 
> regardless of the format in which I try to save the file, e.g. png, tiff.
>>
>>
>> x <- 1:10
>> y <- 2:11
>> z <- y+rnorm(10)
>> ForGraph<-data.frame(x=x,y=y,z=z)
>> ForGraph
>>
>> gpathj <- file.path("C:","LAL","test.jpeg")
>> gpathj
>> jpeg(file = gpathj)
>> par(mai = c(0.5, 0.5, 0.5, 0.5))
>> scatter3d(z=ForGraph$x,
>>??????????? y=ForGraph$y,
>>??????????? x=ForGraph$z,
>>??????????? surface=FALSE,grid=TRUE,sphere.size=4
>>??????????? ,xlab="Categories",ylab="ScoreRange",
>>??????????? zlab="VTE Rate (%)",axis.ticks=TRUE)
>> dev.off()
>>
>>
> 
> You didn't say what package you found scatter3d in, but you did say it
> opens an rgl window.? rgl doesn't use R graphics devices, so jpeg() and
> the like don't work.
> 
> To save an rgl image, you use the rgl::snapshot3d() function.? It only
> has support for saving to PNG format.
> 
> If you are writing your manuscript in R Markdown or knitr Rnw, there are
> ways to have the file included automatically.? There have been methods
> to use with Sweave as well, but those aren't being maintained:? people
> should use knitr instead.
> 
> Duncan Murdoch
> 
>  ??????? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7Crmh%40temple.edu%7C7efac70023f74f426dda08d9d0b337b8%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637770290874513198%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=QjooPjMvPZ%2BTnPh%2B9SOISOyeGVRYFMmU2NSfkel7rug%3D&amp;reserved=0 
> <https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=04%7C01%7Cjsorkin%40som.umaryland.edu%7C1de6e94adaff4ee3df8908d9d0b43bd2%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637770294833471347%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=ZzC0nzJzm5XlBE1eb0oMmwcy31%2FjDQSySkspobqGXto%3D&reserved=0>
> PLEASE do read the posting guide 
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7Crmh%40temple.edu%7C7efac70023f74f426dda08d9d0b337b8%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637770290874513198%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=TCjwf2%2FaEiUl6d%2BUx37bRRQOsXjUx80DhvwKbeCnkHg%3D&amp;reserved=0 
> <https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=04%7C01%7Cjsorkin%40som.umaryland.edu%7C1de6e94adaff4ee3df8908d9d0b43bd2%7C717009a620de461a88940312a395cac9%7C0%7C0%7C637770294833471347%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=dqIeUcRjrWKCuRlmR%2FYwmTn2OIgNYLQHnnU%2FBSwK82Q%3D&reserved=0>
> and provide commented, minimal, self-contained, reproducible code.


From cec|||@reyn@ @end|ng |rom gm@||@com  Thu Jan  6 12:10:54 2022
From: cec|||@reyn@ @end|ng |rom gm@||@com (Cecilia Reyna)
Date: Thu, 6 Jan 2022 08:10:54 -0300
Subject: [R] Information function in CRM model
In-Reply-To: <CAHbBvVi+hb4HHkMXekBQEYgUM9XvdRbGgc_QPJfkvaKPZX6AxQ@mail.gmail.com>
References: <CAHbBvVi+hb4HHkMXekBQEYgUM9XvdRbGgc_QPJfkvaKPZX6AxQ@mail.gmail.com>
Message-ID: <CAHbBvVj8DcydGn=SLTdNw1-TLrTdOSUsNRi5MvB9qQayAPPcyA@mail.gmail.com>

Please, forget and delete the previous post!

Thanks!



On Thu, Jan 6, 2022 at 7:02 AM Cecilia Reyna <ceciliareyna at gmail.com> wrote:

> Dear,
>
> I am trying to model the information function of items (and full) based on
> the continuous response model.
>
> I am using the EstCRM (1.4) package, but it doesn't compute the
> information function.
>
> Another person noticed me of Wang & Zeng's paper (Item parameter
> estimation for a continuous response model using an EM algorithm, 1998,
> Applied Psychological Measurement). But I am not sure how to calculate it
> in R.
>
> Please, If someone has calculated that function could you share the script?
>
> Thanks in advance,
> Cecilia
>
> --
> Cecilia Reyna
> Instituto de Investigaciones Psicol?gicas (IIPsi) - CONICET - UNC
> Facultad de Psicolog?a - Universidad Nacional de C?rdoba
> (5000) C?rdoba - ARGENTINA
> Tel. 54-351-5353890 int. 60201
>
> RACC: http://www.revistas.unc.edu.ar/index.php/racc
>


-- 
Cecilia Reyna
Instituto de Investigaciones Psicol?gicas (IIPsi) - CONICET - UNC
Facultad de Psicolog?a - Universidad Nacional de C?rdoba
(5000) C?rdoba - ARGENTINA
Tel. 54-351-5353890 int. 60201

RACC: http://www.revistas.unc.edu.ar/index.php/racc

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Thu Jan  6 16:01:48 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 6 Jan 2022 07:01:48 -0800
Subject: [R] Information function in CRM model
In-Reply-To: <CAHbBvVi+hb4HHkMXekBQEYgUM9XvdRbGgc_QPJfkvaKPZX6AxQ@mail.gmail.com>
References: <CAHbBvVi+hb4HHkMXekBQEYgUM9XvdRbGgc_QPJfkvaKPZX6AxQ@mail.gmail.com>
Message-ID: <CAGxFJbSes-0RF1LtSemUOMq0puwcf5zNvdeULAdScbOgdHuiQw@mail.gmail.com>

If you haven't already done so, you should probably look here:
https://cran.r-project.org/web/views/Psychometrics.html

Further detailed discussion of the statistics is generally off topic here.
Per the posting guide (linked below):

"Questions about statistics: The R mailing lists are primarily intended for
questions and discussion about the R software. However, questions about
statistical methodology are sometimes posted. If the question is well-asked
and of interest to someone on the list, it may elicit an informative
up-to-date answer."


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Thu, Jan 6, 2022 at 2:03 AM Cecilia Reyna <ceciliareyna at gmail.com> wrote:

> Dear,
>
> I am trying to model the information function of items (and full) based on
> the continuous response model.
>
> I am using the EstCRM (1.4) package, but it doesn't compute the information
> function.
>
> Another person noticed me of Wang & Zeng's paper (Item parameter estimation
> for a continuous response model using an EM algorithm, 1998, Applied
> Psychological Measurement). But I am not sure how to calculate it in R.
>
> Please, If someone has calculated that function could you share the script?
>
> Thanks in advance,
> Cecilia
>
> --
> Cecilia Reyna
> Instituto de Investigaciones Psicol?gicas (IIPsi) - CONICET - UNC
> Facultad de Psicolog?a - Universidad Nacional de C?rdoba
> (5000) C?rdoba - ARGENTINA
> Tel. 54-351-5353890 int. 60201
>
> RACC: http://www.revistas.unc.edu.ar/index.php/racc
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From chuckco|em@n @end|ng |rom y@hoo@com  Thu Jan  6 16:23:56 2022
From: chuckco|em@n @end|ng |rom y@hoo@com (Chuck Coleman)
Date: Thu, 6 Jan 2022 15:23:56 +0000 (UTC)
Subject: [R] Error: if statement: missing value where TRUE/FALSE needed
In-Reply-To: <d92593f1-fc70-9457-2025-894ada66b077@gmail.com>
References: <1233449163.1172379.1641397627054.ref@mail.yahoo.com>
 <1233449163.1172379.1641397627054@mail.yahoo.com>
 <20220105212237.07489025@Tarkus> <20220105220953.13afa63d@Tarkus>
 <d92593f1-fc70-9457-2025-894ada66b077@gmail.com>
Message-ID: <1725598260.1394699.1641482636279@mail.yahoo.com>

I've created a git repository at?https://sourceforge.net/p/rhelp/code/ci/master/tree/.? I've used git before, so that's what I chose.? I had forgotten that sourceforge didn't have a download all files command.? I don't post files often.

About the semantics of "crash":? Perhaps I'm showing my age here.? It used to be that programs crashed, bombed, etc. when they hit unanticipated errors.? These programs lived in a OS without an intermediary.? Now, we have programs of programs running within multiple applications on multiple servers with multiple OSs.? Since I'm not a programmer by profession, I've had little need to use these constructs.

Chuck Coleman



On Wednesday, January 5, 2022, 02:51:07 PM EST, Duncan Murdoch <murdoch.duncan at gmail.com> wrote: 





On 05/01/2022 2:09 p.m., Ivan Krylov wrote:

> On Wed, 5 Jan 2022 21:22:37 +0300
> Ivan Krylov <krylov.r00t at gmail.com> wrote:
> 
>> How exactly do you check for a missing argument?
> 
> To answer my own question, the check is
> 
>>> browser(expr = {
>>>? is.na(w1) | is.na(ub) | is.na(m) | is.na(wi) | is.na(lb)
>>> })
> 
> I think that there are NAs in xseg, which I don't see a check for. In
> particular, a few lines above, there's
> 
>>> md = median( xseg, na.rm = TRUE);
>>> if (robust) sdd = mad(xseg,na.rm = TRUE)
>>> else sdd = sd(xseg,na.rm = TRUE)
> 
> ...which seems to suggest they are expected to happen there.
> 
> Not sure which advice to give regarding the choice of file hosting
> service. On the one hand, SourceForge lets you upload a whole directory
> of files in arbitrary formats, but isn't very convenient do download
> more than one file from. On the other hand, "pastebin" services like
> http://paste.debian.net/ or http://paste.org.ru/ let us browse the code
> right away, without having to look at the "Your download will start
> shortly..." screen, but don't host *.RData or more than one file per
> link. I guess that some other code hosting service like
> SourceHut/GitHub/GitLab/Gitea/... could fulfil both criteria.


I would take one step back, and suggest that if any project has as many 
scripts as this one, it should be put in an R package.? You can 
distribute that by building it into a tar.gz file and putting that 
single file in a place where people can download it.? Github and R-forge 
work well for packages, and I assume other hosting services do too, 
though I haven't used many.

People seem to be unreasonably reluctant to put their code into packages.

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jan  6 18:14:10 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 6 Jan 2022 12:14:10 -0500
Subject: [R] Error: if statement: missing value where TRUE/FALSE needed
In-Reply-To: <1725598260.1394699.1641482636279@mail.yahoo.com>
References: <1233449163.1172379.1641397627054.ref@mail.yahoo.com>
 <1233449163.1172379.1641397627054@mail.yahoo.com>
 <20220105212237.07489025@Tarkus> <20220105220953.13afa63d@Tarkus>
 <d92593f1-fc70-9457-2025-894ada66b077@gmail.com>
 <1725598260.1394699.1641482636279@mail.yahoo.com>
Message-ID: <0f2a708b-938e-584d-c9c4-670874c1e197@gmail.com>

I've downloaded your code, and I'm seeing some strange results.  When I 
source MetroTest.R, it creates a log file ending

Error in if (xseg[w1] > ub & m == 1) olrmark[wi] = TRUE else if 
(xseg[w1] <  :
   missing value where TRUE/FALSE needed

as you saw.  But when I comment out the sink() lines in it, I don't see 
an error.  If I comment out only the first sink line, i.e. run with

   my_log <- file("MetroTest.log")
   #sink(my_log, append = TRUE, type = "output") # Writing console 
output to log file
   sink(my_log, append = TRUE, type = "message")

I get an error on the last line:

 > sink(my_log, append = TRUE, type = "message")
Error in sink(my_log, append = TRUE, type = "message") :
   'file' must be NULL or an already open connection

Once running this code R crashed.

I find all of that quite perplexing.  I suspect one of the packages has 
some buggy code, but I don't know which one.  Currently I'm running the 
script after running gctorture(); that's really slow.  If it turns up 
anything I'll let you know.

Duncan Murdoch



On 06/01/2022 10:23 a.m., Chuck Coleman wrote:
> I've created a git repository at?https://sourceforge.net/p/rhelp/code/ci/master/tree/.? I've used git before, so that's what I chose.? I had forgotten that sourceforge didn't have a download all files command.? I don't post files often.
> 
> About the semantics of "crash":? Perhaps I'm showing my age here.? It used to be that programs crashed, bombed, etc. when they hit unanticipated errors.? These programs lived in a OS without an intermediary.? Now, we have programs of programs running within multiple applications on multiple servers with multiple OSs.? Since I'm not a programmer by profession, I've had little need to use these constructs.
> 
> Chuck Coleman
> 
> 
> 
> On Wednesday, January 5, 2022, 02:51:07 PM EST, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> 
> 
> 
> 
> On 05/01/2022 2:09 p.m., Ivan Krylov wrote:
> 
>> On Wed, 5 Jan 2022 21:22:37 +0300
>> Ivan Krylov <krylov.r00t at gmail.com> wrote:
>>
>>> How exactly do you check for a missing argument?
>>
>> To answer my own question, the check is
>>
>>>> browser(expr = {
>>>>  ? is.na(w1) | is.na(ub) | is.na(m) | is.na(wi) | is.na(lb)
>>>> })
>>
>> I think that there are NAs in xseg, which I don't see a check for. In
>> particular, a few lines above, there's
>>
>>>> md = median( xseg, na.rm = TRUE);
>>>> if (robust) sdd = mad(xseg,na.rm = TRUE)
>>>> else sdd = sd(xseg,na.rm = TRUE)
>>
>> ...which seems to suggest they are expected to happen there.
>>
>> Not sure which advice to give regarding the choice of file hosting
>> service. On the one hand, SourceForge lets you upload a whole directory
>> of files in arbitrary formats, but isn't very convenient do download
>> more than one file from. On the other hand, "pastebin" services like
>> http://paste.debian.net/ or http://paste.org.ru/ let us browse the code
>> right away, without having to look at the "Your download will start
>> shortly..." screen, but don't host *.RData or more than one file per
>> link. I guess that some other code hosting service like
>> SourceHut/GitHub/GitLab/Gitea/... could fulfil both criteria.
> 
> 
> I would take one step back, and suggest that if any project has as many
> scripts as this one, it should be put in an R package.? You can
> distribute that by building it into a tar.gz file and putting that
> single file in a place where people can download it.? Github and R-forge
> work well for packages, and I assume other hosting services do too,
> though I haven't used many.
> 
> People seem to be unreasonably reluctant to put their code into packages.
> 
> Duncan Murdoch
>


From @v|gro@@ @end|ng |rom ver|zon@net  Thu Jan  6 18:36:55 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Thu, 6 Jan 2022 17:36:55 +0000 (UTC)
Subject: [R] splitting data matrix into submatrices
In-Reply-To: <1941149728.1202836.1641405138132@mail.yahoo.com>
References: <1606908911.1738332.1641354754130.ref@mail.yahoo.com>
 <1606908911.1738332.1641354754130@mail.yahoo.com>
 <1534514481.1092676.1641356954030@mail.yahoo.com>
 <974163148.1748840.1641357842656@mail.yahoo.com>
 <1941149728.1202836.1641405138132@mail.yahoo.com>
Message-ID: <1188322469.1430447.1641490615425@mail.yahoo.com>


My apologies. I temporarily used another mailer and I see it did not send my message as plain text. I have not yet seen a way to change on a per message basis. My code, was naturally displayed badly. Sigh.
rows <- 1826

weekends <- (rows %% 7 <= 1)

satsun <- mymat[weekends,]

workweek <- mymat[!weekends,]

Is this any better?


-----Original Message-----
From: Avi Gross via R-help <r-help at r-project.org>
To: r-help at r-project.org <r-help at r-project.org>
Sent: Wed, Jan 5, 2022 12:52 pm
Subject: Re: [R] splitting data matrix into submatrices

Faheem seems to reply to people in private and I replid to him in private but seeing later messages, am giving a synopsis in public.
I too suggesed that using a data.frame is a better way to keep his data and use it for some purposes.
But my understanding is that his matrix is fairly easy to understand and can be indexed given the way it is set up.
Every row of the matrix has info for a single day, with each hour represented by one column. There is no date anywhere in sight or any visible index. But the collection was done starting on a Sunday and continuing without gaps so every seventh following row is a Sunday. So it is trivial to do what he asks using the %% operator to select all numbers between 1 and the number of rows in the matrix that have a remainder of either 0 (Saturdays) or 1 (Sundays) with something like this if the data is in mymat:
rows <- 1826weekends <- (rows %% 7 <= 1)satsun <- mymat[weekends,]
This basically indexes the matrix using a boolean vector. The result can be saved as a matrix of weekend data.
Getting the second matrix is as trivial as flipping the boolean vector.
workweek <- mymat[!weekends,]

-----Original Message-----
From: Faheem Jan <faheemjan93 at yahoo.com>
To: Avi Gross <avigross at verizon.net>
Sent: Tue, Jan 4, 2022 11:44 pm
Subject: Re: [R] splitting data matrix into submatrices

First I will thank you for your interest and time. As my first day is Sunday, in my data matrix 24 are hourly demand of electricity. As electricity demand is different is working and non-working days, so I want a separate analysis for working and nonworking days that's why I want to split the data matrix into submatrices. Can we use for looping which divides the matrix into submatrices? 

? ? On Wednesday, January 5, 2022, 09:29:44 AM GMT+5, Avi Gross via R-help <r-help at r-project.org> wrote:? 
 
 
If you explain better, we can help. But first consider what you are asking and how it is relected in the data.
Is the first component a row number whose meaning is day 1 contains a 1 or perhaps 0 and the next row contains one more? Or is there some kind of date in there?
What day of the week is the first day? Is it a Sunday or a Wednesday or what?
Just for arguments sake, say the first row is a Sunday and all later rows are sequential. Then row 1 is a weekend and row 7 is a weekend and so are rows 7 more (8 and 18) and those 7 more and so on.?
What do you call it when you are looking for the remainder after dividing by 7?
Can you make a list of indices that contain every possible weekend, and another index containing just the non-weekends??
If other things like Holidays do not matter, you can index the matrix many ways by asking for all columns but only the rows that your logical index wants.?
If I have misunderstood the problem, ignore.

-----Original Message-----
From: Faheem Jan via R-help <r-help at r-project.org>
To: R-help Mailing List <r-help at r-project.org>
Sent: Tue, Jan 4, 2022 10:52 pm
Subject: [R] splitting data matrix into submatrices

I have data in a matrix form of order 1826*24 where 1826 represents the days and 24 hourly observations on each data. My objective is to split the matrix into working (Monday to Friday) and non-working (Saturday and Sunday) submatrices. Can anyone help me that how I will do that splitting using R?


??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
? 
??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From chuckco|em@n @end|ng |rom y@hoo@com  Thu Jan  6 19:05:59 2022
From: chuckco|em@n @end|ng |rom y@hoo@com (Chuck Coleman)
Date: Thu, 6 Jan 2022 18:05:59 +0000 (UTC)
Subject: [R] Error: if statement: missing value where TRUE/FALSE needed
In-Reply-To: <0f2a708b-938e-584d-c9c4-670874c1e197@gmail.com>
References: <1233449163.1172379.1641397627054.ref@mail.yahoo.com>
 <1233449163.1172379.1641397627054@mail.yahoo.com>
 <20220105212237.07489025@Tarkus> <20220105220953.13afa63d@Tarkus>
 <d92593f1-fc70-9457-2025-894ada66b077@gmail.com>
 <1725598260.1394699.1641482636279@mail.yahoo.com>
 <0f2a708b-938e-584d-c9c4-670874c1e197@gmail.com>
Message-ID: <1465328847.1438812.1641492359330@mail.yahoo.com>

I added the sink() commands to capture the output I was seeing and saw no noticeable difference.? Granted, I didn't look too hard.? Still, the code ran for the usual time before the error.? Remove the print() commands and you'll probably the error in an entirely different iteration.


Thanks for helping,
Chuck



On Thursday, January 6, 2022, 12:14:15 PM EST, Duncan Murdoch <murdoch.duncan at gmail.com> wrote: 





I've downloaded your code, and I'm seeing some strange results.? When I 
source MetroTest.R, it creates a log file ending

Error in if (xseg[w1] > ub & m == 1) olrmark[wi] = TRUE else if 
(xseg[w1] <? :
? missing value where TRUE/FALSE needed

as you saw.? But when I comment out the sink() lines in it, I don't see 
an error.? If I comment out only the first sink line, i.e. run with

? my_log <- file("MetroTest.log")
? #sink(my_log, append = TRUE, type = "output") # Writing console 
output to log file
? sink(my_log, append = TRUE, type = "message")

I get an error on the last line:

> sink(my_log, append = TRUE, type = "message")
Error in sink(my_log, append = TRUE, type = "message") :
? 'file' must be NULL or an already open connection

Once running this code R crashed.

I find all of that quite perplexing.? I suspect one of the packages has 
some buggy code, but I don't know which one.? Currently I'm running the 
script after running gctorture(); that's really slow.? If it turns up 
anything I'll let you know.

Duncan Murdoch



On 06/01/2022 10:23 a.m., Chuck Coleman wrote:
> I've created a git repository at?https://sourceforge.net/p/rhelp/code/ci/master/tree/.? I've used git before, so that's what I chose.? I had forgotten that sourceforge didn't have a download all files command.? I don't post files often.
> 
> About the semantics of "crash":? Perhaps I'm showing my age here.? It used to be that programs crashed, bombed, etc. when they hit unanticipated errors.? These programs lived in a OS without an intermediary.? Now, we have programs of programs running within multiple applications on multiple servers with multiple OSs.? Since I'm not a programmer by profession, I've had little need to use these constructs.
> 
> Chuck Coleman
> 
> 
> 
> On Wednesday, January 5, 2022, 02:51:07 PM EST, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
> 
> 
> 
> 
> 
> On 05/01/2022 2:09 p.m., Ivan Krylov wrote:
> 
>> On Wed, 5 Jan 2022 21:22:37 +0300
>> Ivan Krylov <krylov.r00t at gmail.com> wrote:
>>
>>> How exactly do you check for a missing argument?
>>
>> To answer my own question, the check is
>>
>>>> browser(expr = {
>>>>? ? is.na(w1) | is.na(ub) | is.na(m) | is.na(wi) | is.na(lb)
>>>> })
>>
>> I think that there are NAs in xseg, which I don't see a check for. In
>> particular, a few lines above, there's
>>
>>>> md = median( xseg, na.rm = TRUE);
>>>> if (robust) sdd = mad(xseg,na.rm = TRUE)
>>>> else sdd = sd(xseg,na.rm = TRUE)
>>
>> ...which seems to suggest they are expected to happen there.
>>
>> Not sure which advice to give regarding the choice of file hosting
>> service. On the one hand, SourceForge lets you upload a whole directory
>> of files in arbitrary formats, but isn't very convenient do download
>> more than one file from. On the other hand, "pastebin" services like
>> http://paste.debian.net/ or http://paste.org.ru/ let us browse the code
>> right away, without having to look at the "Your download will start
>> shortly..." screen, but don't host *.RData or more than one file per
>> link. I guess that some other code hosting service like
>> SourceHut/GitHub/GitLab/Gitea/... could fulfil both criteria.
> 
> 
> I would take one step back, and suggest that if any project has as many
> scripts as this one, it should be put in an R package.? You can
> distribute that by building it into a tar.gz file and putting that
> single file in a place where people can download it.? Github and R-forge
> work well for packages, and I assume other hosting services do too,
> though I haven't used many.
> 
> People seem to be unreasonably reluctant to put their code into packages.
> 
> Duncan Murdoch
> 


From drj|m|emon @end|ng |rom gm@||@com  Fri Jan  7 05:17:43 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 7 Jan 2022 15:17:43 +1100
Subject: [R] Dependencies for building R
Message-ID: <CA+8X3fVKGvny6WnB8tpQMB7BE6pbwrdcoQee-5i622YODp9UXQ@mail.gmail.com>

Hi,
I'm facing the usual challenge of  building the latest release of R on
a new install of Fedora 35 Linux. Is there a list of dependencies that
have to be installed (or even better, a package) to avoid the
necessity of running ./configure many times and installing them
piecemeal? I've just been reading Installation and Administration in
the manual and haven't found anything like this. Any pointers
appreciated.

Jim


From bgunter@4567 @end|ng |rom gm@||@com  Fri Jan  7 05:44:17 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 6 Jan 2022 20:44:17 -0800
Subject: [R] Dependencies for building R
In-Reply-To: <CA+8X3fVKGvny6WnB8tpQMB7BE6pbwrdcoQee-5i622YODp9UXQ@mail.gmail.com>
References: <CA+8X3fVKGvny6WnB8tpQMB7BE6pbwrdcoQee-5i622YODp9UXQ@mail.gmail.com>
Message-ID: <CAGxFJbRXZiOYRp-M=cbHqKTC8CcF1WcSSPdmBc3tgRTY6CQgwA@mail.gmail.com>

Ask on r-sig-fedora rather than here, no?

On Thu, Jan 6, 2022, 8:18 PM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi,
> I'm facing the usual challenge of  building the latest release of R on
> a new install of Fedora 35 Linux. Is there a list of dependencies that
> have to be installed (or even better, a package) to avoid the
> necessity of running ./configure many times and installing them
> piecemeal? I've just been reading Installation and Administration in
> the manual and haven't found anything like this. Any pointers
> appreciated.
>
> Jim
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Fri Jan  7 05:53:09 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 7 Jan 2022 15:53:09 +1100
Subject: [R] Dependencies for building R
In-Reply-To: <CAGxFJbRXZiOYRp-M=cbHqKTC8CcF1WcSSPdmBc3tgRTY6CQgwA@mail.gmail.com>
References: <CA+8X3fVKGvny6WnB8tpQMB7BE6pbwrdcoQee-5i622YODp9UXQ@mail.gmail.com>
 <CAGxFJbRXZiOYRp-M=cbHqKTC8CcF1WcSSPdmBc3tgRTY6CQgwA@mail.gmail.com>
Message-ID: <CA+8X3fWazW5zExOEjz484zscdF+u2Gdo37eqUhsB1Ab2Ekevdw@mail.gmail.com>

Thanks, Bert. I will.

Jim

On Fri, Jan 7, 2022 at 3:44 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> Ask on r-sig-fedora rather than here, no?
>
> On Thu, Jan 6, 2022, 8:18 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>> Hi,
>> I'm facing the usual challenge of  building the latest release of R on
>> a new install of Fedora 35 Linux. Is there a list of dependencies that
>> have to be installed (or even better, a package) to avoid the
>> necessity of running ./configure many times and installing them
>> piecemeal? I've just been reading Installation and Administration in
>> the manual and haven't found anything like this. Any pointers
>> appreciated.
>>
>> Jim
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From g@@@uu| @end|ng |rom gm@||@com  Fri Jan  7 08:25:18 2022
From: g@@@uu| @end|ng |rom gm@||@com (ani jaya)
Date: Fri, 7 Jan 2022 16:25:18 +0900
Subject: [R] unexpected (?) behavior of box()
Message-ID: <CAHXS41y8vutwR9-d=pMv=1RaM9Q9-Ev1zCFFAEaRUM+q4a43xQ@mail.gmail.com>

Dear R expert,

I try to box a figure using box(). However it box the default margin,
not the specified margin.

#working as expected
barplot(1:20)
box()

#working as expected, the box follow the margin
par(mar=c(2, 6, 5, 4))
barplot(1:20)
box()

#not working
install.packages("maps")
library(maps)
par(mar=c(2, 6, 5, 4))
m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
       lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
box()

#the turnaround
par(mar=c(2, 6, 5, 4))
m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
       lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
par(mar=c(2, 6, 5, 4))
box()

I just curious with this behavior. Is it the problem with the package
"map" or box() function?
Thank you.

> sessionInfo()
R version 4.0.2 (2020-06-22)
Platform: i386-w64-mingw32/i386 (32-bit)
Running under: Windows 10 x64 (build 19043)



Ani


From petr@p|k@| @end|ng |rom prechez@@cz  Fri Jan  7 08:39:34 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Fri, 7 Jan 2022 07:39:34 +0000
Subject: [R] unexpected (?) behavior of box()
In-Reply-To: <CAHXS41y8vutwR9-d=pMv=1RaM9Q9-Ev1zCFFAEaRUM+q4a43xQ@mail.gmail.com>
References: <CAHXS41y8vutwR9-d=pMv=1RaM9Q9-Ev1zCFFAEaRUM+q4a43xQ@mail.gmail.com>
Message-ID: <819fdb0f07e84c628471b6d40f59dd6a@SRVEXCHCM1301.precheza.cz>

Hi.

Why do you consider it unexpected?

see

map(database = "world", regions = ".", exact = FALSE, boundary = TRUE,
  interior = TRUE, projection = "", parameters = NULL, orientation = NULL,
  fill = FALSE, col = 1, plot = TRUE, add = FALSE, namesonly = FALSE,
  xlim = NULL, ylim = NULL, wrap = FALSE, resolution = if (plot) 1 else 0,
  type = "l", bg = par("bg"), mar = c(4.1, 4.1, par("mar")[3], 0.1),
  myborder = 0.01, namefield="name", lforce="n", ...)

map function redefines mar so your first par is probably changed during
plotting map and after you define it again box use new mar values.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of ani jaya
> Sent: Friday, January 7, 2022 8:25 AM
> To: r-help <r-help at r-project.org>
> Subject: [R] unexpected (?) behavior of box()
> 
> Dear R expert,
> 
> I try to box a figure using box(). However it box the default margin,
> not the specified margin.
> 
> #working as expected
> barplot(1:20)
> box()
> 
> #working as expected, the box follow the margin
> par(mar=c(2, 6, 5, 4))
> barplot(1:20)
> box()
> 
> #not working
> install.packages("maps")
> library(maps)
> par(mar=c(2, 6, 5, 4))
> m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
>        lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
> box()
> 
> #the turnaround
> par(mar=c(2, 6, 5, 4))
> m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
>        lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
> par(mar=c(2, 6, 5, 4))
> box()
> 
> I just curious with this behavior. Is it the problem with the package
> "map" or box() function?
> Thank you.
> 
> > sessionInfo()
> R version 4.0.2 (2020-06-22)
> Platform: i386-w64-mingw32/i386 (32-bit)
> Running under: Windows 10 x64 (build 19043)
> 
> 
> 
> Ani
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From drj|m|emon @end|ng |rom gm@||@com  Fri Jan  7 08:41:21 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 7 Jan 2022 18:41:21 +1100
Subject: [R] unexpected (?) behavior of box()
In-Reply-To: <CAHXS41y8vutwR9-d=pMv=1RaM9Q9-Ev1zCFFAEaRUM+q4a43xQ@mail.gmail.com>
References: <CAHXS41y8vutwR9-d=pMv=1RaM9Q9-Ev1zCFFAEaRUM+q4a43xQ@mail.gmail.com>
Message-ID: <CA+8X3fWH9PiQYiWgNCByY_edTkgg6GuXbj5h+giXNZ0xKvv6uA@mail.gmail.com>

Hi Ani,
Blame Mercator. Maps draws an approximately 2x1 plot. Maybe this:

mappar<-par("usr")
rect(mappar[1],mappar[3],mappar[2],mappar[4])

Jim

On Fri, Jan 7, 2022 at 6:25 PM ani jaya <gaaauul at gmail.com> wrote:
>
> Dear R expert,
>
> I try to box a figure using box(). However it box the default margin,
> not the specified margin.
>
> #working as expected
> barplot(1:20)
> box()
>
> #working as expected, the box follow the margin
> par(mar=c(2, 6, 5, 4))
> barplot(1:20)
> box()
>
> #not working
> install.packages("maps")
> library(maps)
> par(mar=c(2, 6, 5, 4))
> m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
>        lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
> box()
>
> #the turnaround
> par(mar=c(2, 6, 5, 4))
> m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
>        lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
> par(mar=c(2, 6, 5, 4))
> box()
>
> I just curious with this behavior. Is it the problem with the package
> "map" or box() function?
> Thank you.
>
> > sessionInfo()
> R version 4.0.2 (2020-06-22)
> Platform: i386-w64-mingw32/i386 (32-bit)
> Running under: Windows 10 x64 (build 19043)
>
>
>
> Ani
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From g@@@uu| @end|ng |rom gm@||@com  Fri Jan  7 09:11:56 2022
From: g@@@uu| @end|ng |rom gm@||@com (ani jaya)
Date: Fri, 7 Jan 2022 17:11:56 +0900
Subject: [R] unexpected (?) behavior of box()
In-Reply-To: <819fdb0f07e84c628471b6d40f59dd6a@SRVEXCHCM1301.precheza.cz>
References: <CAHXS41y8vutwR9-d=pMv=1RaM9Q9-Ev1zCFFAEaRUM+q4a43xQ@mail.gmail.com>
 <819fdb0f07e84c628471b6d40f59dd6a@SRVEXCHCM1301.precheza.cz>
Message-ID: <CAHXS41xpsVNuFhUC14xppjBVJvFCZSH8H0XhjT5BZ3G_juZ6Hg@mail.gmail.com>

Hi Petr,

Thank you for pointing that out! Silly newbie here.
So, just want to make sure my mind,
using my example:

par(mar=c(2, 6, 5, 4))
m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
       lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
box()

first, map use the first mar=c(2,6,5,4),
and then defines the new mar that is mar=c(4.1, 4.1, par("mar")[3],
0.1)=c(4.1, 4.1, 5, 0.1).
And then box using the new mar=c(4.1, 4.1, 5, 0.1). Is that right?

I am sorry if out of topic. Maybe further I will post at r-sig-geo. Thank you.

On Fri, Jan 7, 2022 at 4:39 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> Hi.
>
> Why do you consider it unexpected?
>
> see
>
> map(database = "world", regions = ".", exact = FALSE, boundary = TRUE,
>   interior = TRUE, projection = "", parameters = NULL, orientation = NULL,
>   fill = FALSE, col = 1, plot = TRUE, add = FALSE, namesonly = FALSE,
>   xlim = NULL, ylim = NULL, wrap = FALSE, resolution = if (plot) 1 else 0,
>   type = "l", bg = par("bg"), mar = c(4.1, 4.1, par("mar")[3], 0.1),
>   myborder = 0.01, namefield="name", lforce="n", ...)
>
> map function redefines mar so your first par is probably changed during
> plotting map and after you define it again box use new mar values.
>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of ani jaya
> > Sent: Friday, January 7, 2022 8:25 AM
> > To: r-help <r-help at r-project.org>
> > Subject: [R] unexpected (?) behavior of box()
> >
> > Dear R expert,
> >
> > I try to box a figure using box(). However it box the default margin,
> > not the specified margin.
> >
> > #working as expected
> > barplot(1:20)
> > box()
> >
> > #working as expected, the box follow the margin
> > par(mar=c(2, 6, 5, 4))
> > barplot(1:20)
> > box()
> >
> > #not working
> > install.packages("maps")
> > library(maps)
> > par(mar=c(2, 6, 5, 4))
> > m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
> >        lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
> > box()
> >
> > #the turnaround
> > par(mar=c(2, 6, 5, 4))
> > m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
> >        lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
> > par(mar=c(2, 6, 5, 4))
> > box()
> >
> > I just curious with this behavior. Is it the problem with the package
> > "map" or box() function?
> > Thank you.
> >
> > > sessionInfo()
> > R version 4.0.2 (2020-06-22)
> > Platform: i386-w64-mingw32/i386 (32-bit)
> > Running under: Windows 10 x64 (build 19043)
> >
> >
> >
> > Ani
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From g@@@uu| @end|ng |rom gm@||@com  Fri Jan  7 09:20:22 2022
From: g@@@uu| @end|ng |rom gm@||@com (ani jaya)
Date: Fri, 7 Jan 2022 17:20:22 +0900
Subject: [R] unexpected (?) behavior of box()
In-Reply-To: <CA+8X3fWH9PiQYiWgNCByY_edTkgg6GuXbj5h+giXNZ0xKvv6uA@mail.gmail.com>
References: <CAHXS41y8vutwR9-d=pMv=1RaM9Q9-Ev1zCFFAEaRUM+q4a43xQ@mail.gmail.com>
 <CA+8X3fWH9PiQYiWgNCByY_edTkgg6GuXbj5h+giXNZ0xKvv6uA@mail.gmail.com>
Message-ID: <CAHXS41ysBOM2GGe-MTvitQsOs_nff5chxRhGTatEX=fPhFzjRw@mail.gmail.com>

Hi Jim,

Thank you for the alternative. Absolutely will try it.
Can you explain a bit about "Maps draws an approximately 2x1 plot"?
Is it the size proportion 2 in x-axis and 1 in y-axis?

On Fri, Jan 7, 2022 at 4:41 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Hi Ani,
> Blame Mercator. Maps draws an approximately 2x1 plot. Maybe this:
>
> mappar<-par("usr")
> rect(mappar[1],mappar[3],mappar[2],mappar[4])
>
> Jim
>
> On Fri, Jan 7, 2022 at 6:25 PM ani jaya <gaaauul at gmail.com> wrote:
> >
> > Dear R expert,
> >
> > I try to box a figure using box(). However it box the default margin,
> > not the specified margin.
> >
> > #working as expected
> > barplot(1:20)
> > box()
> >
> > #working as expected, the box follow the margin
> > par(mar=c(2, 6, 5, 4))
> > barplot(1:20)
> > box()
> >
> > #not working
> > install.packages("maps")
> > library(maps)
> > par(mar=c(2, 6, 5, 4))
> > m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
> >        lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
> > box()
> >
> > #the turnaround
> > par(mar=c(2, 6, 5, 4))
> > m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
> >        lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
> > par(mar=c(2, 6, 5, 4))
> > box()
> >
> > I just curious with this behavior. Is it the problem with the package
> > "map" or box() function?
> > Thank you.
> >
> > > sessionInfo()
> > R version 4.0.2 (2020-06-22)
> > Platform: i386-w64-mingw32/i386 (32-bit)
> > Running under: Windows 10 x64 (build 19043)
> >
> >
> >
> > Ani
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From petr@p|k@| @end|ng |rom prechez@@cz  Fri Jan  7 09:36:12 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Fri, 7 Jan 2022 08:36:12 +0000
Subject: [R] unexpected (?) behavior of box()
In-Reply-To: <CAHXS41xpsVNuFhUC14xppjBVJvFCZSH8H0XhjT5BZ3G_juZ6Hg@mail.gmail.com>
References: <CAHXS41y8vutwR9-d=pMv=1RaM9Q9-Ev1zCFFAEaRUM+q4a43xQ@mail.gmail.com>
 <819fdb0f07e84c628471b6d40f59dd6a@SRVEXCHCM1301.precheza.cz>
 <CAHXS41xpsVNuFhUC14xppjBVJvFCZSH8H0XhjT5BZ3G_juZ6Hg@mail.gmail.com>
Message-ID: <834fac7d4a1f411a9abe45c1c25df9d7@SRVEXCHCM1301.precheza.cz>

Hi Ani

No need to apologise. I may by wrong as I did not dig into the map code and do 
not use the package so I only guess. You could check how mar changes by

> par("mar")
[1] 5.1 4.1 4.1 2.1

So
par("mar")
par(mar=c(2, 6, 5, 4))
par("mar")
m<-map('world', xlim = c(91, 142), ylim = c(25, 40), lwd=1.5, col = 
"grey",border=NA, fill = T,  bg="white")
par("mar")
box()

should give you info how mar looks like before each step and which one is to 
blame.

Jim gave you also some possible workaround.

Cheers
Petr

> -----Original Message-----
> From: ani jaya <gaaauul at gmail.com>
> Sent: Friday, January 7, 2022 9:12 AM
> To: PIKAL Petr <petr.pikal at precheza.cz>; r-help <r-help at r-project.org>
> Subject: Re: [R] unexpected (?) behavior of box()
>
> Hi Petr,
>
> Thank you for pointing that out! Silly newbie here.
> So, just want to make sure my mind,
> using my example:
>
> par(mar=c(2, 6, 5, 4))
> m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
>        lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
> box()
>
> first, map use the first mar=c(2,6,5,4), and then defines the new mar that 
> is
> mar=c(4.1, 4.1, par("mar")[3], 0.1)=c(4.1, 4.1, 5, 0.1).
> And then box using the new mar=c(4.1, 4.1, 5, 0.1). Is that right?
>
> I am sorry if out of topic. Maybe further I will post at r-sig-geo. Thank 
> you.
>
> On Fri, Jan 7, 2022 at 4:39 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
> >
> > Hi.
> >
> > Why do you consider it unexpected?
> >
> > see
> >
> > map(database = "world", regions = ".", exact = FALSE, boundary = TRUE,
> >   interior = TRUE, projection = "", parameters = NULL, orientation = NULL,
> >   fill = FALSE, col = 1, plot = TRUE, add = FALSE, namesonly = FALSE,
> >   xlim = NULL, ylim = NULL, wrap = FALSE, resolution = if (plot) 1 else 0,
> >   type = "l", bg = par("bg"), mar = c(4.1, 4.1, par("mar")[3], 0.1),
> >   myborder = 0.01, namefield="name", lforce="n", ...)
> >
> > map function redefines mar so your first par is probably changed
> > during plotting map and after you define it again box use new mar values.
> >
> > Cheers
> > Petr
> >
> > > -----Original Message-----
> > > From: R-help <r-help-bounces at r-project.org> On Behalf Of ani jaya
> > > Sent: Friday, January 7, 2022 8:25 AM
> > > To: r-help <r-help at r-project.org>
> > > Subject: [R] unexpected (?) behavior of box()
> > >
> > > Dear R expert,
> > >
> > > I try to box a figure using box(). However it box the default
> > > margin, not the specified margin.
> > >
> > > #working as expected
> > > barplot(1:20)
> > > box()
> > >
> > > #working as expected, the box follow the margin par(mar=c(2, 6, 5,
> > > 4))
> > > barplot(1:20)
> > > box()
> > >
> > > #not working
> > > install.packages("maps")
> > > library(maps)
> > > par(mar=c(2, 6, 5, 4))
> > > m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
> > >        lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
> > > box()
> > >
> > > #the turnaround
> > > par(mar=c(2, 6, 5, 4))
> > > m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
> > >        lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
> > > par(mar=c(2, 6, 5, 4))
> > > box()
> > >
> > > I just curious with this behavior. Is it the problem with the
> > > package "map" or box() function?
> > > Thank you.
> > >
> > > > sessionInfo()
> > > R version 4.0.2 (2020-06-22)
> > > Platform: i386-w64-mingw32/i386 (32-bit) Running under: Windows 10
> > > x64 (build 19043)
> > >
> > >
> > >
> > > Ani
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.

From g@@@uu| @end|ng |rom gm@||@com  Fri Jan  7 10:04:29 2022
From: g@@@uu| @end|ng |rom gm@||@com (ani jaya)
Date: Fri, 7 Jan 2022 18:04:29 +0900
Subject: [R] unexpected (?) behavior of box()
In-Reply-To: <834fac7d4a1f411a9abe45c1c25df9d7@SRVEXCHCM1301.precheza.cz>
References: <CAHXS41y8vutwR9-d=pMv=1RaM9Q9-Ev1zCFFAEaRUM+q4a43xQ@mail.gmail.com>
 <819fdb0f07e84c628471b6d40f59dd6a@SRVEXCHCM1301.precheza.cz>
 <CAHXS41xpsVNuFhUC14xppjBVJvFCZSH8H0XhjT5BZ3G_juZ6Hg@mail.gmail.com>
 <834fac7d4a1f411a9abe45c1c25df9d7@SRVEXCHCM1301.precheza.cz>
Message-ID: <CAHXS41zMOJiZOjPYB2+e__0iG4ewJYkwuQjLdWu=jk67_xwYFA@mail.gmail.com>

Got it. Thank you very much.

On Fri, Jan 7, 2022 at 5:36 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> Hi Ani
>
> No need to apologise. I may by wrong as I did not dig into the map code and do
> not use the package so I only guess. You could check how mar changes by
>
> > par("mar")
> [1] 5.1 4.1 4.1 2.1
>
> So
> par("mar")
> par(mar=c(2, 6, 5, 4))
> par("mar")
> m<-map('world', xlim = c(91, 142), ylim = c(25, 40), lwd=1.5, col =
> "grey",border=NA, fill = T,  bg="white")
> par("mar")
> box()
>
> should give you info how mar looks like before each step and which one is to
> blame.
>
> Jim gave you also some possible workaround.
>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: ani jaya <gaaauul at gmail.com>
> > Sent: Friday, January 7, 2022 9:12 AM
> > To: PIKAL Petr <petr.pikal at precheza.cz>; r-help <r-help at r-project.org>
> > Subject: Re: [R] unexpected (?) behavior of box()
> >
> > Hi Petr,
> >
> > Thank you for pointing that out! Silly newbie here.
> > So, just want to make sure my mind,
> > using my example:
> >
> > par(mar=c(2, 6, 5, 4))
> > m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
> >        lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
> > box()
> >
> > first, map use the first mar=c(2,6,5,4), and then defines the new mar that
> > is
> > mar=c(4.1, 4.1, par("mar")[3], 0.1)=c(4.1, 4.1, 5, 0.1).
> > And then box using the new mar=c(4.1, 4.1, 5, 0.1). Is that right?
> >
> > I am sorry if out of topic. Maybe further I will post at r-sig-geo. Thank
> > you.
> >
> > On Fri, Jan 7, 2022 at 4:39 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
> > >
> > > Hi.
> > >
> > > Why do you consider it unexpected?
> > >
> > > see
> > >
> > > map(database = "world", regions = ".", exact = FALSE, boundary = TRUE,
> > >   interior = TRUE, projection = "", parameters = NULL, orientation = NULL,
> > >   fill = FALSE, col = 1, plot = TRUE, add = FALSE, namesonly = FALSE,
> > >   xlim = NULL, ylim = NULL, wrap = FALSE, resolution = if (plot) 1 else 0,
> > >   type = "l", bg = par("bg"), mar = c(4.1, 4.1, par("mar")[3], 0.1),
> > >   myborder = 0.01, namefield="name", lforce="n", ...)
> > >
> > > map function redefines mar so your first par is probably changed
> > > during plotting map and after you define it again box use new mar values.
> > >
> > > Cheers
> > > Petr
> > >
> > > > -----Original Message-----
> > > > From: R-help <r-help-bounces at r-project.org> On Behalf Of ani jaya
> > > > Sent: Friday, January 7, 2022 8:25 AM
> > > > To: r-help <r-help at r-project.org>
> > > > Subject: [R] unexpected (?) behavior of box()
> > > >
> > > > Dear R expert,
> > > >
> > > > I try to box a figure using box(). However it box the default
> > > > margin, not the specified margin.
> > > >
> > > > #working as expected
> > > > barplot(1:20)
> > > > box()
> > > >
> > > > #working as expected, the box follow the margin par(mar=c(2, 6, 5,
> > > > 4))
> > > > barplot(1:20)
> > > > box()
> > > >
> > > > #not working
> > > > install.packages("maps")
> > > > library(maps)
> > > > par(mar=c(2, 6, 5, 4))
> > > > m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
> > > >        lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
> > > > box()
> > > >
> > > > #the turnaround
> > > > par(mar=c(2, 6, 5, 4))
> > > > m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
> > > >        lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
> > > > par(mar=c(2, 6, 5, 4))
> > > > box()
> > > >
> > > > I just curious with this behavior. Is it the problem with the
> > > > package "map" or box() function?
> > > > Thank you.
> > > >
> > > > > sessionInfo()
> > > > R version 4.0.2 (2020-06-22)
> > > > Platform: i386-w64-mingw32/i386 (32-bit) Running under: Windows 10
> > > > x64 (build 19043)
> > > >
> > > >
> > > >
> > > > Ani
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > > and provide commented, minimal, self-contained, reproducible code.


From drj|m|emon @end|ng |rom gm@||@com  Fri Jan  7 10:08:20 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 7 Jan 2022 20:08:20 +1100
Subject: [R] unexpected (?) behavior of box()
In-Reply-To: <CAHXS41ysBOM2GGe-MTvitQsOs_nff5chxRhGTatEX=fPhFzjRw@mail.gmail.com>
References: <CAHXS41y8vutwR9-d=pMv=1RaM9Q9-Ev1zCFFAEaRUM+q4a43xQ@mail.gmail.com>
 <CA+8X3fWH9PiQYiWgNCByY_edTkgg6GuXbj5h+giXNZ0xKvv6uA@mail.gmail.com>
 <CAHXS41ysBOM2GGe-MTvitQsOs_nff5chxRhGTatEX=fPhFzjRw@mail.gmail.com>
Message-ID: <CA+8X3fW6miq8NsZKwsyCjM6DK8tZurhK-K113gzvk8_ZmMqFWQ@mail.gmail.com>

Yes, the Mercator projection unwraps the globe (360 degrees around)
while the poles are 180 degrees apart. It then stretches the result
into a rectangle. If you enter:

par("usr")

after drawing the world map you will see the proportions.

Jim

On Fri, Jan 7, 2022 at 7:20 PM ani jaya <gaaauul at gmail.com> wrote:
>
> Hi Jim,
>
> Thank you for the alternative. Absolutely will try it.
> Can you explain a bit about "Maps draws an approximately 2x1 plot"?
> Is it the size proportion 2 in x-axis and 1 in y-axis?
>
> On Fri, Jan 7, 2022 at 4:41 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> >
> > Hi Ani,
> > Blame Mercator. Maps draws an approximately 2x1 plot. Maybe this:
> >
> > mappar<-par("usr")
> > rect(mappar[1],mappar[3],mappar[2],mappar[4])
> >
> > Jim
> >
> > On Fri, Jan 7, 2022 at 6:25 PM ani jaya <gaaauul at gmail.com> wrote:
> > >
> > > Dear R expert,
> > >
> > > I try to box a figure using box(). However it box the default margin,
> > > not the specified margin.
> > >
> > > #working as expected
> > > barplot(1:20)
> > > box()
> > >
> > > #working as expected, the box follow the margin
> > > par(mar=c(2, 6, 5, 4))
> > > barplot(1:20)
> > > box()
> > >
> > > #not working
> > > install.packages("maps")
> > > library(maps)
> > > par(mar=c(2, 6, 5, 4))
> > > m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
> > >        lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
> > > box()
> > >
> > > #the turnaround
> > > par(mar=c(2, 6, 5, 4))
> > > m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
> > >        lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
> > > par(mar=c(2, 6, 5, 4))
> > > box()
> > >
> > > I just curious with this behavior. Is it the problem with the package
> > > "map" or box() function?
> > > Thank you.
> > >
> > > > sessionInfo()
> > > R version 4.0.2 (2020-06-22)
> > > Platform: i386-w64-mingw32/i386 (32-bit)
> > > Running under: Windows 10 x64 (build 19043)
> > >
> > >
> > >
> > > Ani
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.


From g@@@uu| @end|ng |rom gm@||@com  Fri Jan  7 11:05:26 2022
From: g@@@uu| @end|ng |rom gm@||@com (ani jaya)
Date: Fri, 7 Jan 2022 19:05:26 +0900
Subject: [R] unexpected (?) behavior of box()
In-Reply-To: <CA+8X3fW6miq8NsZKwsyCjM6DK8tZurhK-K113gzvk8_ZmMqFWQ@mail.gmail.com>
References: <CAHXS41y8vutwR9-d=pMv=1RaM9Q9-Ev1zCFFAEaRUM+q4a43xQ@mail.gmail.com>
 <CA+8X3fWH9PiQYiWgNCByY_edTkgg6GuXbj5h+giXNZ0xKvv6uA@mail.gmail.com>
 <CAHXS41ysBOM2GGe-MTvitQsOs_nff5chxRhGTatEX=fPhFzjRw@mail.gmail.com>
 <CA+8X3fW6miq8NsZKwsyCjM6DK8tZurhK-K113gzvk8_ZmMqFWQ@mail.gmail.com>
Message-ID: <CAHXS41yavqXNLtZg4iG30JjJUsMx5MevH+-kTm2mBgg7aS9XWw@mail.gmail.com>

Ah I see.
Thank you very much!

On Fri, Jan 7, 2022 at 6:08 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> Yes, the Mercator projection unwraps the globe (360 degrees around)
> while the poles are 180 degrees apart. It then stretches the result
> into a rectangle. If you enter:
>
> par("usr")
>
> after drawing the world map you will see the proportions.
>
> Jim
>
> On Fri, Jan 7, 2022 at 7:20 PM ani jaya <gaaauul at gmail.com> wrote:
> >
> > Hi Jim,
> >
> > Thank you for the alternative. Absolutely will try it.
> > Can you explain a bit about "Maps draws an approximately 2x1 plot"?
> > Is it the size proportion 2 in x-axis and 1 in y-axis?
> >
> > On Fri, Jan 7, 2022 at 4:41 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> > >
> > > Hi Ani,
> > > Blame Mercator. Maps draws an approximately 2x1 plot. Maybe this:
> > >
> > > mappar<-par("usr")
> > > rect(mappar[1],mappar[3],mappar[2],mappar[4])
> > >
> > > Jim
> > >
> > > On Fri, Jan 7, 2022 at 6:25 PM ani jaya <gaaauul at gmail.com> wrote:
> > > >
> > > > Dear R expert,
> > > >
> > > > I try to box a figure using box(). However it box the default margin,
> > > > not the specified margin.
> > > >
> > > > #working as expected
> > > > barplot(1:20)
> > > > box()
> > > >
> > > > #working as expected, the box follow the margin
> > > > par(mar=c(2, 6, 5, 4))
> > > > barplot(1:20)
> > > > box()
> > > >
> > > > #not working
> > > > install.packages("maps")
> > > > library(maps)
> > > > par(mar=c(2, 6, 5, 4))
> > > > m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
> > > >        lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
> > > > box()
> > > >
> > > > #the turnaround
> > > > par(mar=c(2, 6, 5, 4))
> > > > m<-map('world', xlim = c(91, 142), ylim = c(25, 40),
> > > >        lwd=1.5, col = "grey",border=NA, fill = T,  bg="white")
> > > > par(mar=c(2, 6, 5, 4))
> > > > box()
> > > >
> > > > I just curious with this behavior. Is it the problem with the package
> > > > "map" or box() function?
> > > > Thank you.
> > > >
> > > > > sessionInfo()
> > > > R version 4.0.2 (2020-06-22)
> > > > Platform: i386-w64-mingw32/i386 (32-bit)
> > > > Running under: Windows 10 x64 (build 19043)
> > > >
> > > >
> > > >
> > > > Ani
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > > > and provide commented, minimal, self-contained, reproducible code.


From mkey @end|ng |rom |n|o@c|tex@com  Fri Jan  7 17:23:58 2022
From: mkey @end|ng |rom |n|o@c|tex@com (Key, Melissa)
Date: Fri, 7 Jan 2022 16:23:58 +0000
Subject: [R] bug in Windows implementation of nlme::groupedData
Message-ID: <BN2P110MB1461789D12779C7083013726B14D9@BN2P110MB1461.NAMP110.PROD.OUTLOOK.COM>

I am trying to replicate a semi-parametric analysis described in Harezlak, Jaroslaw, David Ruppert, and Matt P. Wand. Semiparametric regression with R. New York, NY: Springer, 2018. (https://link.springer.com/book/10.1007%2F978-1-4939-8853-2).

I can successfully run the analysis, but now I'm trying to move it into my workflow, which requires that the analysis be conducted within a function (using targets package), and the `groupedData` function now fails with an error that it cannot find the `X` matrix (see reprex below).  I've tried the reprex on both my personal Mac (where it works??) and on windows machines (where it does not) - so the problem is likely specific to Windows computers (yes, this seems weird to me too).
All packages have been updated, and I'm running the latest version of R on all machines.

Reprex:

library(HRW) # contains example data and ZOSull function
library(nlme)

data(growthIndiana)


analyze_this <- function(df) {

  mean.x <- mean(df$age)
  mean.y <- mean(df$height)
  sd.x <- sd(df$age)
  sd.y <- sd(df$height)

  df$x <- (df$age - mean.x) / sd.x
  df$y <- (df$height - mean.y) / sd.y

  X <- model.matrix(~ x * male * black, data = df)
  dummyID <- rep(1, length(nrow(X)))

  grouped_data <- groupedData(y ~ X[,-1]|rep(1, length = nrow(X)), data = data.frame(y = df$y, X, dummyID))

}


# doesn't work on Windows machine, does work on the Mac
analyze_this(growthIndiana)
#> Error in eval(aux[[2]], object): object 'X' not found

# does work

df <- growthIndiana

mean.x <- mean(df$age)
mean.y <- mean(df$height)
sd.x <- sd(df$age)
sd.y <- sd(df$height)

df$x <- (df$age - mean.x) / sd.x
df$y <- (df$height - mean.y) / sd.y

X <- model.matrix(~ x * male * black, data = df)
dummyID <- rep(1, length(nrow(X)))

grouped_data <- groupedData(y ~ X[,-1]|rep(1, length = nrow(X)), data = data.frame(y = df$y, X, dummyID))


# attempted work-around.

analyze_this2 <- function(df) {
  num.global.knots = 20
  num.subject.knots = 10

  mean.x <- mean(df$age)
  mean.y <- mean(df$height)
  sd.x <- sd(df$age)
  sd.y <- sd(df$height)

  df$x <- (df$age - mean.x) / sd.x
  df$y <- (df$height - mean.y) / sd.y

  X <- model.matrix(~ x * male * black, data = df)
  dummyID <- rep(1, length(nrow(X)))

  # grouped_data <- groupedData(y ~ X[,-1]|rep(1, length = nrow(X)), data = data.frame(y = df$y, X, dummyID))

  global.knots = quantile(unique(df$x), seq(0, 1, length = num.global.knots + 2)[-c(1, num.global.knots + 2)])
  subject.knots = quantile(unique(df$x), seq(0, 1, length = num.subject.knots + 2)[-c(1, num.subject.knots + 2)])

  Z.global <- ZOSull(df$x, range.x = range(df$x), global.knots)
  Z.group <- df$black * Z.global
  Z.subject <- ZOSull(df$x, range.x = range(df$x), subject.knots)

  Zblock <- list(
    dummyID = pdIdent(~ 0 + Z.global),
    dummyID = pdIdent(~ 0 + Z.group),
    idnum = pdSymm(~ x),
    idnum = pdIdent(~ 0 + Z.subject)
  )

  df$dummyID <- dummyID
  tmp_data <- c(
    df,
    X = list(X),
    Z.global = list(Z.global),
    Z.group = list(Z.global),
    Z.subject = list(Z.subject)
  )

  fit <- lme(y ~ 0 + X,
    data = tmp_data,
    random = Zblock
  )

}

# this works (warning - lme takes awhile to fit)
analyze_this2(growthIndiana)

sessionInfo()
#> R version 4.1.2 (2021-11-01)
#> Platform: x86_64-w64-mingw32/x64 (64-bit)
#> Running under: Windows 10 x64 (build 22000)
#>
#> Matrix products: default
#>
#> locale:
#> [1] LC_COLLATE=English_United States.1252
#> [2] LC_CTYPE=English_United States.1252
#> [3] LC_MONETARY=English_United States.1252
#> [4] LC_NUMERIC=C
#> [5] LC_TIME=English_United States.1252
#>
#> attached base packages:
#> [1] stats     graphics  grDevices utils     datasets  methods   base
#>
#> other attached packages:
#> [1] nlme_3.1-153 HRW_1.0-5
#>
#> loaded via a namespace (and not attached):
#>  [1] lattice_0.20-45    digest_0.6.29      withr_2.4.3        grid_4.1.2
#>  [5] magrittr_2.0.1     reprex_2.0.1       evaluate_0.14      KernSmooth_2.23-20
#>  [9] highr_0.9          stringi_1.7.6      rlang_0.4.12       cli_3.1.0
#> [13] rstudioapi_0.13    fs_1.5.2           rmarkdown_2.11     splines_4.1.2
#> [17] tools_4.1.2        stringr_1.4.0      glue_1.6.0         xfun_0.29
#> [21] yaml_2.2.1         fastmap_1.1.0      compiler_4.1.2     htmltools_0.5.2
#> [25] knitr_1.37

Created on 2022-01-07 by the [reprex package](https://reprex.tidyverse.org) (v2.0.1)

 Here's the session Info for the Mac:

sessionInfo()
R version 4.1.2 (2021-11-01)
Platform: aarch64-apple-darwin20 (64-bit)
Running under: macOS Monterey 12.1

Matrix products: default
LAPACK: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRlapack.dylib

locale:[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] nlme_3.1-153  targets_0.8.1 HRW_1.0-5

loaded via a namespace (and not attached):
 [1] compiler_4.1.2     pillar_1.6.4       tools_4.1.2        digest_0.6.28      lattice_0.20-45    jsonlite_1.7.2     evaluate_0.14
 [8] lifecycle_1.0.1    tibble_3.1.6       pkgconfig_2.0.3    rlang_0.4.12       igraph_1.2.9       cli_3.1.0          yaml_2.2.1
[15] xfun_0.28          fastmap_1.1.0      withr_2.4.2        knitr_1.36         htmlwidgets_1.5.4  vctrs_0.3.8        grid_4.1.2
[22] tidyselect_1.1.1   glue_1.5.0         data.table_1.14.2  R6_2.5.1           processx_3.5.2     fansi_0.5.0        rmarkdown_2.11
[29] callr_3.7.0        purrr_0.3.4        magrittr_2.0.1     scales_1.1.1       codetools_0.2-18   ps_1.6.0           htmltools_0.5.2
[36] ellipsis_0.3.2     splines_4.1.2      colorspace_2.0-2   KernSmooth_2.23-20 utf8_1.2.2         visNetwork_2.1.0   munsell_0.5.0
[43] crayon_1.4.2


Melissa Key, Ph.D.
Statistician
Non-Invasive Brain Stimulation Team
Infoscitex

Cell: 937-550-4981
Email: mkey at infoscitex.com<mailto:mkey at infoscitex.com>
Base email: melissa.key.ctr at us.af.mil<mailto:melissa.key.ctr at us.af.mil>


	[[alternative HTML version deleted]]


From j|ox @end|ng |rom mcm@@ter@c@  Fri Jan  7 22:34:52 2022
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Fri, 7 Jan 2022 16:34:52 -0500
Subject: [R] bug in Windows implementation of nlme::groupedData
In-Reply-To: <13531_1641588163_207Kgg0o023122_BN2P110MB1461789D12779C7083013726B14D9@BN2P110MB1461.NAMP110.PROD.OUTLOOK.COM>
References: <13531_1641588163_207Kgg0o023122_BN2P110MB1461789D12779C7083013726B14D9@BN2P110MB1461.NAMP110.PROD.OUTLOOK.COM>
Message-ID: <41dc78c4-734c-0b7b-ec97-e50133266223@mcmaster.ca>

Dear Melissa,

It seems strange to me that your code would work on any platform (it 
doesn't on my Mac) because the data frame you create shouldn't contain a 
matrix named "X" but rather columns including those originating from X. 
To illustrate:

 > X <- matrix(1:12, 4, 3)
 > colnames(X) <- c("a", "b", "c")
 > X
      a b  c
[1,] 1 5  9
[2,] 2 6 10
[3,] 3 7 11
[4,] 4 8 12

 > y <- 1:4

 > (D <- data.frame(y, X))
   y a b  c
1 1 1 5  9
2 2 2 6 10
3 3 3 7 11
4 4 4 8 12

 > str(D)
'data.frame':	4 obs. of  4 variables:
  $ y: int  1 2 3 4
  $ a: int  1 2 3 4
  $ b: int  5 6 7 8
  $ c: int  9 10 11 12

My session info:

 > sessionInfo()
R version 4.1.2 (2021-11-01)
Platform: aarch64-apple-darwin20 (64-bit)
Running under: macOS Monterey 12.1

Matrix products: default
LAPACK: 
/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] nlme_3.1-153 HRW_1.0-5

loaded via a namespace (and not attached):
[1] compiler_4.1.2     tools_4.1.2        KernSmooth_2.23-20 
splines_4.1.2
[5] grid_4.1.2         lattice_0.20-45

I hope this helps,
  John

-- 
John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
web: https://socialsciences.mcmaster.ca/jfox/

On 2022-01-07 11:23 a.m., Key, Melissa wrote:
> I am trying to replicate a semi-parametric analysis described in Harezlak, Jaroslaw, David Ruppert, and Matt P. Wand. Semiparametric regression with R. New York, NY: Springer, 2018. (https://link.springer.com/book/10.1007%2F978-1-4939-8853-2).
> 
> I can successfully run the analysis, but now I'm trying to move it into my workflow, which requires that the analysis be conducted within a function (using targets package), and the `groupedData` function now fails with an error that it cannot find the `X` matrix (see reprex below).  I've tried the reprex on both my personal Mac (where it works??) and on windows machines (where it does not) - so the problem is likely specific to Windows computers (yes, this seems weird to me too).
> All packages have been updated, and I'm running the latest version of R on all machines.
> 
> Reprex:
> 
> library(HRW) # contains example data and ZOSull function
> library(nlme)
> 
> data(growthIndiana)
> 
> 
> analyze_this <- function(df) {
> 
>    mean.x <- mean(df$age)
>    mean.y <- mean(df$height)
>    sd.x <- sd(df$age)
>    sd.y <- sd(df$height)
> 
>    df$x <- (df$age - mean.x) / sd.x
>    df$y <- (df$height - mean.y) / sd.y
> 
>    X <- model.matrix(~ x * male * black, data = df)
>    dummyID <- rep(1, length(nrow(X)))
> 
>    grouped_data <- groupedData(y ~ X[,-1]|rep(1, length = nrow(X)), data = data.frame(y = df$y, X, dummyID))
> 
> }
> 
> 
> # doesn't work on Windows machine, does work on the Mac
> analyze_this(growthIndiana)
> #> Error in eval(aux[[2]], object): object 'X' not found
> 
> # does work
> 
> df <- growthIndiana
> 
> mean.x <- mean(df$age)
> mean.y <- mean(df$height)
> sd.x <- sd(df$age)
> sd.y <- sd(df$height)
> 
> df$x <- (df$age - mean.x) / sd.x
> df$y <- (df$height - mean.y) / sd.y
> 
> X <- model.matrix(~ x * male * black, data = df)
> dummyID <- rep(1, length(nrow(X)))
> 
> grouped_data <- groupedData(y ~ X[,-1]|rep(1, length = nrow(X)), data = data.frame(y = df$y, X, dummyID))
> 
> 
> # attempted work-around.
> 
> analyze_this2 <- function(df) {
>    num.global.knots = 20
>    num.subject.knots = 10
> 
>    mean.x <- mean(df$age)
>    mean.y <- mean(df$height)
>    sd.x <- sd(df$age)
>    sd.y <- sd(df$height)
> 
>    df$x <- (df$age - mean.x) / sd.x
>    df$y <- (df$height - mean.y) / sd.y
> 
>    X <- model.matrix(~ x * male * black, data = df)
>    dummyID <- rep(1, length(nrow(X)))
> 
>    # grouped_data <- groupedData(y ~ X[,-1]|rep(1, length = nrow(X)), data = data.frame(y = df$y, X, dummyID))
> 
>    global.knots = quantile(unique(df$x), seq(0, 1, length = num.global.knots + 2)[-c(1, num.global.knots + 2)])
>    subject.knots = quantile(unique(df$x), seq(0, 1, length = num.subject.knots + 2)[-c(1, num.subject.knots + 2)])
> 
>    Z.global <- ZOSull(df$x, range.x = range(df$x), global.knots)
>    Z.group <- df$black * Z.global
>    Z.subject <- ZOSull(df$x, range.x = range(df$x), subject.knots)
> 
>    Zblock <- list(
>      dummyID = pdIdent(~ 0 + Z.global),
>      dummyID = pdIdent(~ 0 + Z.group),
>      idnum = pdSymm(~ x),
>      idnum = pdIdent(~ 0 + Z.subject)
>    )
> 
>    df$dummyID <- dummyID
>    tmp_data <- c(
>      df,
>      X = list(X),
>      Z.global = list(Z.global),
>      Z.group = list(Z.global),
>      Z.subject = list(Z.subject)
>    )
> 
>    fit <- lme(y ~ 0 + X,
>      data = tmp_data,
>      random = Zblock
>    )
> 
> }
> 
> # this works (warning - lme takes awhile to fit)
> analyze_this2(growthIndiana)
> 
> sessionInfo()
> #> R version 4.1.2 (2021-11-01)
> #> Platform: x86_64-w64-mingw32/x64 (64-bit)
> #> Running under: Windows 10 x64 (build 22000)
> #>
> #> Matrix products: default
> #>
> #> locale:
> #> [1] LC_COLLATE=English_United States.1252
> #> [2] LC_CTYPE=English_United States.1252
> #> [3] LC_MONETARY=English_United States.1252
> #> [4] LC_NUMERIC=C
> #> [5] LC_TIME=English_United States.1252
> #>
> #> attached base packages:
> #> [1] stats     graphics  grDevices utils     datasets  methods   base
> #>
> #> other attached packages:
> #> [1] nlme_3.1-153 HRW_1.0-5
> #>
> #> loaded via a namespace (and not attached):
> #>  [1] lattice_0.20-45    digest_0.6.29      withr_2.4.3        grid_4.1.2
> #>  [5] magrittr_2.0.1     reprex_2.0.1       evaluate_0.14      KernSmooth_2.23-20
> #>  [9] highr_0.9          stringi_1.7.6      rlang_0.4.12       cli_3.1.0
> #> [13] rstudioapi_0.13    fs_1.5.2           rmarkdown_2.11     splines_4.1.2
> #> [17] tools_4.1.2        stringr_1.4.0      glue_1.6.0         xfun_0.29
> #> [21] yaml_2.2.1         fastmap_1.1.0      compiler_4.1.2     htmltools_0.5.2
> #> [25] knitr_1.37
> 
> Created on 2022-01-07 by the [reprex package](https://reprex.tidyverse.org) (v2.0.1)
> 
>   Here's the session Info for the Mac:
> 
> sessionInfo()
> R version 4.1.2 (2021-11-01)
> Platform: aarch64-apple-darwin20 (64-bit)
> Running under: macOS Monterey 12.1
> 
> Matrix products: default
> LAPACK: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRlapack.dylib
> 
> locale:[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> other attached packages:
> [1] nlme_3.1-153  targets_0.8.1 HRW_1.0-5
> 
> loaded via a namespace (and not attached):
>   [1] compiler_4.1.2     pillar_1.6.4       tools_4.1.2        digest_0.6.28      lattice_0.20-45    jsonlite_1.7.2     evaluate_0.14
>   [8] lifecycle_1.0.1    tibble_3.1.6       pkgconfig_2.0.3    rlang_0.4.12       igraph_1.2.9       cli_3.1.0          yaml_2.2.1
> [15] xfun_0.28          fastmap_1.1.0      withr_2.4.2        knitr_1.36         htmlwidgets_1.5.4  vctrs_0.3.8        grid_4.1.2
> [22] tidyselect_1.1.1   glue_1.5.0         data.table_1.14.2  R6_2.5.1           processx_3.5.2     fansi_0.5.0        rmarkdown_2.11
> [29] callr_3.7.0        purrr_0.3.4        magrittr_2.0.1     scales_1.1.1       codetools_0.2-18   ps_1.6.0           htmltools_0.5.2
> [36] ellipsis_0.3.2     splines_4.1.2      colorspace_2.0-2   KernSmooth_2.23-20 utf8_1.2.2         visNetwork_2.1.0   munsell_0.5.0
> [43] crayon_1.4.2
> 
> 
> Melissa Key, Ph.D.
> Statistician
> Non-Invasive Brain Stimulation Team
> Infoscitex
> 
> Cell: 937-550-4981
> Email: mkey at infoscitex.com<mailto:mkey at infoscitex.com>
> Base email: melissa.key.ctr at us.af.mil<mailto:melissa.key.ctr at us.af.mil>
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From mkey @end|ng |rom |n|o@c|tex@com  Fri Jan  7 23:29:29 2022
From: mkey @end|ng |rom |n|o@c|tex@com (Key, Melissa)
Date: Fri, 7 Jan 2022 22:29:29 +0000
Subject: [R] [EXTERNAL] Re: bug in Windows implementation of
 nlme::groupedData
In-Reply-To: <41dc78c4-734c-0b7b-ec97-e50133266223@mcmaster.ca>
References: <13531_1641588163_207Kgg0o023122_BN2P110MB1461789D12779C7083013726B14D9@BN2P110MB1461.NAMP110.PROD.OUTLOOK.COM>
 <41dc78c4-734c-0b7b-ec97-e50133266223@mcmaster.ca>
Message-ID: <BN2P110MB146194711F7FC9CA8BCCADCFB14D9@BN2P110MB1461.NAMP110.PROD.OUTLOOK.COM>

John,

Thanks for your response.  I agree that the definition of the data frame is poor (in my defense it came directly from the demo code, but I should have checked it more thoroughly).  The good news is that your comments caused me to take a closer look at where X was defined, and I found the reason I wasn't getting the same results on my Mac and PC - that error was between keyboard and chair.

There is still something funny going on though (at least relative to my previous experience with how R searches environments:

If X is defined in the global environment, groupedData can find it there and use it.  (this is what I'm used to)
If X is defined within a function, groupedData cannot find it, even if groupedData is called within the same function. (this seems strange to me - usually parent.frame() captures information within the function environment, or so I thought)

My solution at the bottom still works - and unlike groupedData, nlme allows a list as input to the data argument (or at least, doesn't check to make sure it's a data frame), so I have a working (albeit hacky) solution that actually makes more sense to me than using groupedData, but it still seems strange that the function cannot find X in its search path.

Thanks again!
Melissa

-----Original Message-----
From: John Fox <jfox at mcmaster.ca> 
Sent: Friday, January 7, 2022 4:35 PM
To: Key, Melissa <mkey at infoscitex.com>
Cc: r-help at r-project.org
Subject: [EXTERNAL] Re: [R] bug in Windows implementation of nlme::groupedData

Dear Melissa,

It seems strange to me that your code would work on any platform (it doesn't on my Mac) because the data frame you create shouldn't contain a matrix named "X" but rather columns including those originating from X. 
To illustrate:

 > X <- matrix(1:12, 4, 3)
 > colnames(X) <- c("a", "b", "c")
 > X
      a b  c
[1,] 1 5  9
[2,] 2 6 10
[3,] 3 7 11
[4,] 4 8 12

 > y <- 1:4

 > (D <- data.frame(y, X))
   y a b  c
1 1 1 5  9
2 2 2 6 10
3 3 3 7 11
4 4 4 8 12

 > str(D)
'data.frame':	4 obs. of  4 variables:
  $ y: int  1 2 3 4
  $ a: int  1 2 3 4
  $ b: int  5 6 7 8
  $ c: int  9 10 11 12

My session info:

 > sessionInfo()
R version 4.1.2 (2021-11-01)
Platform: aarch64-apple-darwin20 (64-bit) Running under: macOS Monterey 12.1

Matrix products: default
LAPACK: 
/Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] nlme_3.1-153 HRW_1.0-5

loaded via a namespace (and not attached):
[1] compiler_4.1.2     tools_4.1.2        KernSmooth_2.23-20 
splines_4.1.2
[5] grid_4.1.2         lattice_0.20-45

I hope this helps,
  John

--
John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
web: https://usg02.safelinks.protection.office365.us/?url=https%3A%2F%2Fsocialsciences.mcmaster.ca%2Fjfox%2F&amp;data=04%7C01%7Cmkey%40infoscitex.com%7C57e0067b32a24526600c08d9d2258bd8%7C3430c5de5e6f4f9d9d9690e985038b58%7C0%7C0%7C637771881005380638%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=nTXsf6vbxVIstMup5AUlmABv9CdQa3hw44Fdb2lej7A%3D&amp;reserved=0

On 2022-01-07 11:23 a.m., Key, Melissa wrote:
> I am trying to replicate a semi-parametric analysis described in Harezlak, Jaroslaw, David Ruppert, and Matt P. Wand. Semiparametric regression with R. New York, NY: Springer, 2018. (https://usg02.safelinks.protection.office365.us/?url=https%3A%2F%2Flink.springer.com%2Fbook%2F10.1007%252F978-1-4939-8853-2&amp;data=04%7C01%7Cmkey%40infoscitex.com%7C57e0067b32a24526600c08d9d2258bd8%7C3430c5de5e6f4f9d9d9690e985038b58%7C0%7C0%7C637771881005380638%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ESCv%2Bp%2FPo7pyKm055Y4nYAK8Cj1RTkorP9ZvahZTPmE%3D&amp;reserved=0).
> 
> I can successfully run the analysis, but now I'm trying to move it into my workflow, which requires that the analysis be conducted within a function (using targets package), and the `groupedData` function now fails with an error that it cannot find the `X` matrix (see reprex below).  I've tried the reprex on both my personal Mac (where it works??) and on windows machines (where it does not) - so the problem is likely specific to Windows computers (yes, this seems weird to me too).
> All packages have been updated, and I'm running the latest version of R on all machines.
> 
> Reprex:
> 
> library(HRW) # contains example data and ZOSull function
> library(nlme)
> 
> data(growthIndiana)
> 
> 
> analyze_this <- function(df) {
> 
>    mean.x <- mean(df$age)
>    mean.y <- mean(df$height)
>    sd.x <- sd(df$age)
>    sd.y <- sd(df$height)
> 
>    df$x <- (df$age - mean.x) / sd.x
>    df$y <- (df$height - mean.y) / sd.y
> 
>    X <- model.matrix(~ x * male * black, data = df)
>    dummyID <- rep(1, length(nrow(X)))
> 
>    grouped_data <- groupedData(y ~ X[,-1]|rep(1, length = nrow(X)), 
> data = data.frame(y = df$y, X, dummyID))
> 
> }
> 
> 
> # doesn't work on Windows machine, does work on the Mac
> analyze_this(growthIndiana)
> #> Error in eval(aux[[2]], object): object 'X' not found
> 
> # does work
> 
> df <- growthIndiana
> 
> mean.x <- mean(df$age)
> mean.y <- mean(df$height)
> sd.x <- sd(df$age)
> sd.y <- sd(df$height)
> 
> df$x <- (df$age - mean.x) / sd.x
> df$y <- (df$height - mean.y) / sd.y
> 
> X <- model.matrix(~ x * male * black, data = df) dummyID <- rep(1, 
> length(nrow(X)))
> 
> grouped_data <- groupedData(y ~ X[,-1]|rep(1, length = nrow(X)), data 
> = data.frame(y = df$y, X, dummyID))
> 
> 
> # attempted work-around.
> 
> analyze_this2 <- function(df) {
>    num.global.knots = 20
>    num.subject.knots = 10
> 
>    mean.x <- mean(df$age)
>    mean.y <- mean(df$height)
>    sd.x <- sd(df$age)
>    sd.y <- sd(df$height)
> 
>    df$x <- (df$age - mean.x) / sd.x
>    df$y <- (df$height - mean.y) / sd.y
> 
>    X <- model.matrix(~ x * male * black, data = df)
>    dummyID <- rep(1, length(nrow(X)))
> 
>    # grouped_data <- groupedData(y ~ X[,-1]|rep(1, length = nrow(X)), 
> data = data.frame(y = df$y, X, dummyID))
> 
>    global.knots = quantile(unique(df$x), seq(0, 1, length = num.global.knots + 2)[-c(1, num.global.knots + 2)])
>    subject.knots = quantile(unique(df$x), seq(0, 1, length = 
> num.subject.knots + 2)[-c(1, num.subject.knots + 2)])
> 
>    Z.global <- ZOSull(df$x, range.x = range(df$x), global.knots)
>    Z.group <- df$black * Z.global
>    Z.subject <- ZOSull(df$x, range.x = range(df$x), subject.knots)
> 
>    Zblock <- list(
>      dummyID = pdIdent(~ 0 + Z.global),
>      dummyID = pdIdent(~ 0 + Z.group),
>      idnum = pdSymm(~ x),
>      idnum = pdIdent(~ 0 + Z.subject)
>    )
> 
>    df$dummyID <- dummyID
>    tmp_data <- c(
>      df,
>      X = list(X),
>      Z.global = list(Z.global),
>      Z.group = list(Z.global),
>      Z.subject = list(Z.subject)
>    )
> 
>    fit <- lme(y ~ 0 + X,
>      data = tmp_data,
>      random = Zblock
>    )
> 
> }
> 
> # this works (warning - lme takes awhile to fit)
> analyze_this2(growthIndiana)
> 
> sessionInfo()
> #> R version 4.1.2 (2021-11-01)
> #> Platform: x86_64-w64-mingw32/x64 (64-bit) #> Running under: Windows 
> 10 x64 (build 22000) #> #> Matrix products: default #> #> locale:
> #> [1] LC_COLLATE=English_United States.1252 #> [2] 
> LC_CTYPE=English_United States.1252 #> [3] LC_MONETARY=English_United 
> States.1252 #> [4] LC_NUMERIC=C #> [5] LC_TIME=English_United 
> States.1252 #> #> attached base packages:
> #> [1] stats     graphics  grDevices utils     datasets  methods   base
> #>
> #> other attached packages:
> #> [1] nlme_3.1-153 HRW_1.0-5
> #>
> #> loaded via a namespace (and not attached):
> #>  [1] lattice_0.20-45    digest_0.6.29      withr_2.4.3        grid_4.1.2
> #>  [5] magrittr_2.0.1     reprex_2.0.1       evaluate_0.14      KernSmooth_2.23-20
> #>  [9] highr_0.9          stringi_1.7.6      rlang_0.4.12       cli_3.1.0
> #> [13] rstudioapi_0.13    fs_1.5.2           rmarkdown_2.11     splines_4.1.2
> #> [17] tools_4.1.2        stringr_1.4.0      glue_1.6.0         xfun_0.29
> #> [21] yaml_2.2.1         fastmap_1.1.0      compiler_4.1.2     htmltools_0.5.2
> #> [25] knitr_1.37
> 
> Created on 2022-01-07 by the [reprex 
> package](https://usg02.safelinks.protection.office365.us/?url=https%3A
> %2F%2Freprex.tidyverse.org%2F&amp;data=04%7C01%7Cmkey%40infoscitex.com
> %7C57e0067b32a24526600c08d9d2258bd8%7C3430c5de5e6f4f9d9d9690e985038b58
> %7C0%7C0%7C637771881005380638%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAw
> MDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=hH
> 5ncnSVZGQ4KZsvLpvjgM%2Fgf9Zu5QnoeSntTrCZWjk%3D&amp;reserved=0) 
> (v2.0.1)
> 
>   Here's the session Info for the Mac:
> 
> sessionInfo()
> R version 4.1.2 (2021-11-01)
> Platform: aarch64-apple-darwin20 (64-bit) Running under: macOS 
> Monterey 12.1
> 
> Matrix products: default
> LAPACK: 
> /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRl
> apack.dylib
> 
> locale:[1] 
> en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> other attached packages:
> [1] nlme_3.1-153  targets_0.8.1 HRW_1.0-5
> 
> loaded via a namespace (and not attached):
>   [1] compiler_4.1.2     pillar_1.6.4       tools_4.1.2        digest_0.6.28      lattice_0.20-45    jsonlite_1.7.2     evaluate_0.14
>   [8] lifecycle_1.0.1    tibble_3.1.6       pkgconfig_2.0.3    rlang_0.4.12       igraph_1.2.9       cli_3.1.0          yaml_2.2.1
> [15] xfun_0.28          fastmap_1.1.0      withr_2.4.2        knitr_1.36         htmlwidgets_1.5.4  vctrs_0.3.8        grid_4.1.2
> [22] tidyselect_1.1.1   glue_1.5.0         data.table_1.14.2  R6_2.5.1           processx_3.5.2     fansi_0.5.0        rmarkdown_2.11
> [29] callr_3.7.0        purrr_0.3.4        magrittr_2.0.1     scales_1.1.1       codetools_0.2-18   ps_1.6.0           htmltools_0.5.2
> [36] ellipsis_0.3.2     splines_4.1.2      colorspace_2.0-2   KernSmooth_2.23-20 utf8_1.2.2         visNetwork_2.1.0   munsell_0.5.0
> [43] crayon_1.4.2
> 
> 
> Melissa Key, Ph.D.
> Statistician
> Non-Invasive Brain Stimulation Team
> Infoscitex
> 
> Cell: 937-550-4981
> Email: mkey at infoscitex.com<mailto:mkey at infoscitex.com>
> Base email: 
> melissa.key.ctr at us.af.mil<mailto:melissa.key.ctr at us.af.mil>
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://usg02.safelinks.protection.office365.us/?url=https%3A%2F%2Fsta
> t.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7Cmkey%40info
> scitex.com%7C57e0067b32a24526600c08d9d2258bd8%7C3430c5de5e6f4f9d9d9690
> e985038b58%7C0%7C0%7C637771881005380638%7CUnknown%7CTWFpbGZsb3d8eyJWIj
> oiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&am
> p;sdata=4c%2Bnu06ZfIKpwowJCTz2mIl7kAEQR5vbZSw8pTuqumk%3D&amp;reserved=
> 0 PLEASE do read the posting guide 
> https://usg02.safelinks.protection.office365.us/?url=http%3A%2F%2Fwww.
> r-project.org%2Fposting-guide.html&amp;data=04%7C01%7Cmkey%40infoscite
> x.com%7C57e0067b32a24526600c08d9d2258bd8%7C3430c5de5e6f4f9d9d9690e9850
> 38b58%7C0%7C0%7C637771881005380638%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4
> wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sda
> ta=iT8fu9JX5i7gUfo0T2gQMVdHEm%2FSThakp2yaOJ2pOBQ%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.


From j|ox @end|ng |rom mcm@@ter@c@  Sat Jan  8 02:17:34 2022
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Fri, 7 Jan 2022 20:17:34 -0500
Subject: [R] [EXTERNAL] Re: bug in Windows implementation of
 nlme::groupedData
In-Reply-To: <BN2P110MB146194711F7FC9CA8BCCADCFB14D9@BN2P110MB1461.NAMP110.PROD.OUTLOOK.COM>
References: <13531_1641588163_207Kgg0o023122_BN2P110MB1461789D12779C7083013726B14D9@BN2P110MB1461.NAMP110.PROD.OUTLOOK.COM>
 <41dc78c4-734c-0b7b-ec97-e50133266223@mcmaster.ca>
 <BN2P110MB146194711F7FC9CA8BCCADCFB14D9@BN2P110MB1461.NAMP110.PROD.OUTLOOK.COM>
Message-ID: <e5ea5186-991c-78a6-ae3b-d6b19d21f074@mcmaster.ca>

Dear Melissa,

Normally, in evaluating a formula an R modeling function follows the 
scoping rules in ?formula; that is,

"A formula object has an associated environment, and this environment 
(rather than the parent environment) is used by model.frame to evaluate 
variables that are not found in the supplied data argument.

"Formulas created with the ~ operator use the environment in which they 
were created. Formulas created with as.formula will use the env argument 
for their environment."

So, for example, if the variables in the formula live in the environment 
of the calling function and if the data argument isn't used, then the 
variables should be found. Modifying your example a bit and calling 
lme() works, for example:

------- snip -------

 > analyze_this <- function(df) {
+
+   mean.x <- mean(df$age)
+   mean.y <- mean(df$height)
+   sd.x <- sd(df$age)
+   sd.y <- sd(df$height)
+
+   x <- (df$age - mean.x) / sd.x
+   y <- (df$height - mean.y) / sd.y
+   X <- model.matrix(~ x * male * black, data = df)
+   dummyID <- rep(1:2, times=c(floor(nrow(X)/2), ceiling(nrow(X)/2)))
+
+   lme(y ~ X[, -1], random= ~ 1 | dummyID)
+
+   # groupedData(y ~ X[, -1] | dummyID)
+
+ }

 > analyze_this(growthIndiana)
Linear mixed-effects model fit by REML
   Data: NULL
   Log-restricted-likelihood: -2546.266
   Fixed: y ~ X[, -1]
         (Intercept)            X[, -1]x         X[, -1]male        X[, 
-1]black
         -0.16086555          0.73401464          0.26303561 
-0.04761425
       X[, -1]x:male      X[, -1]x:black   X[, -1]male:black X[, 
-1]x:male:black
          0.27517924         -0.10318100          0.21899350 
0.03048160

Random effects:
  Formula: ~1 | dummyID
          (Intercept)  Residual
StdDev: 3.688461e-05 0.4462984

Number of Observations: 4123
Number of Groups: 2

------- snip -------

Note that model.matrix() finds x and y in the environment of 
analyze_this(), and male and black in df.

But if you unquote the line groupedData(y ~ X[, -1] | dummyID), the 
function fails:

------- snip -------

 > analyze_this(growthIndiana)
  Error in data.frame(y = y, X = X, dummyID = dummyID) :
   object 'X' not found

------- snip -------

This suggests that groupedData() is doing something unusual (which I 
don't have the inclination to figure out).

I'm not sure why one needs to manipulate the model matrix directly like 
this, but I assume that there is some coherent reason or you wouldn't be 
asking. Also isn't the formula for groupedData() supposed to have a 
*single* covariate on the right, like y ~ x | g (where y, x, and g are 
individual variables)?

Best,
  John

On 2022-01-07 5:29 p.m., Key, Melissa wrote:
> John,
> 
> Thanks for your response.  I agree that the definition of the data frame is poor (in my defense it came directly from the demo code, but I should have checked it more thoroughly).  The good news is that your comments caused me to take a closer look at where X was defined, and I found the reason I wasn't getting the same results on my Mac and PC - that error was between keyboard and chair.
> 
> There is still something funny going on though (at least relative to my previous experience with how R searches environments:
> 
> If X is defined in the global environment, groupedData can find it there and use it.  (this is what I'm used to)
> If X is defined within a function, groupedData cannot find it, even if groupedData is called within the same function. (this seems strange to me - usually parent.frame() captures information within the function environment, or so I thought)
> 
> My solution at the bottom still works - and unlike groupedData, nlme allows a list as input to the data argument (or at least, doesn't check to make sure it's a data frame), so I have a working (albeit hacky) solution that actually makes more sense to me than using groupedData, but it still seems strange that the function cannot find X in its search path.
> 
> Thanks again!
> Melissa
> 
> -----Original Message-----
> From: John Fox <jfox at mcmaster.ca>
> Sent: Friday, January 7, 2022 4:35 PM
> To: Key, Melissa <mkey at infoscitex.com>
> Cc: r-help at r-project.org
> Subject: [EXTERNAL] Re: [R] bug in Windows implementation of nlme::groupedData
> 
> Dear Melissa,
> 
> It seems strange to me that your code would work on any platform (it doesn't on my Mac) because the data frame you create shouldn't contain a matrix named "X" but rather columns including those originating from X.
> To illustrate:
> 
>   > X <- matrix(1:12, 4, 3)
>   > colnames(X) <- c("a", "b", "c")
>   > X
>        a b  c
> [1,] 1 5  9
> [2,] 2 6 10
> [3,] 3 7 11
> [4,] 4 8 12
> 
>   > y <- 1:4
> 
>   > (D <- data.frame(y, X))
>     y a b  c
> 1 1 1 5  9
> 2 2 2 6 10
> 3 3 3 7 11
> 4 4 4 8 12
> 
>   > str(D)
> 'data.frame':	4 obs. of  4 variables:
>    $ y: int  1 2 3 4
>    $ a: int  1 2 3 4
>    $ b: int  5 6 7 8
>    $ c: int  9 10 11 12
> 
> My session info:
> 
>   > sessionInfo()
> R version 4.1.2 (2021-11-01)
> Platform: aarch64-apple-darwin20 (64-bit) Running under: macOS Monterey 12.1
> 
> Matrix products: default
> LAPACK:
> /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRlapack.dylib
> 
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> other attached packages:
> [1] nlme_3.1-153 HRW_1.0-5
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.1.2     tools_4.1.2        KernSmooth_2.23-20
> splines_4.1.2
> [5] grid_4.1.2         lattice_0.20-45
> 
> I hope this helps,
>    John
> 
> --
> John Fox, Professor Emeritus
> McMaster University
> Hamilton, Ontario, Canada
> web: https://usg02.safelinks.protection.office365.us/?url=https%3A%2F%2Fsocialsciences.mcmaster.ca%2Fjfox%2F&amp;data=04%7C01%7Cmkey%40infoscitex.com%7C57e0067b32a24526600c08d9d2258bd8%7C3430c5de5e6f4f9d9d9690e985038b58%7C0%7C0%7C637771881005380638%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=nTXsf6vbxVIstMup5AUlmABv9CdQa3hw44Fdb2lej7A%3D&amp;reserved=0
> 
> On 2022-01-07 11:23 a.m., Key, Melissa wrote:
>> I am trying to replicate a semi-parametric analysis described in Harezlak, Jaroslaw, David Ruppert, and Matt P. Wand. Semiparametric regression with R. New York, NY: Springer, 2018. (https://usg02.safelinks.protection.office365.us/?url=https%3A%2F%2Flink.springer.com%2Fbook%2F10.1007%252F978-1-4939-8853-2&amp;data=04%7C01%7Cmkey%40infoscitex.com%7C57e0067b32a24526600c08d9d2258bd8%7C3430c5de5e6f4f9d9d9690e985038b58%7C0%7C0%7C637771881005380638%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=ESCv%2Bp%2FPo7pyKm055Y4nYAK8Cj1RTkorP9ZvahZTPmE%3D&amp;reserved=0).
>>
>> I can successfully run the analysis, but now I'm trying to move it into my workflow, which requires that the analysis be conducted within a function (using targets package), and the `groupedData` function now fails with an error that it cannot find the `X` matrix (see reprex below).  I've tried the reprex on both my personal Mac (where it works??) and on windows machines (where it does not) - so the problem is likely specific to Windows computers (yes, this seems weird to me too).
>> All packages have been updated, and I'm running the latest version of R on all machines.
>>
>> Reprex:
>>
>> library(HRW) # contains example data and ZOSull function
>> library(nlme)
>>
>> data(growthIndiana)
>>
>>
>> analyze_this <- function(df) {
>>
>>     mean.x <- mean(df$age)
>>     mean.y <- mean(df$height)
>>     sd.x <- sd(df$age)
>>     sd.y <- sd(df$height)
>>
>>     df$x <- (df$age - mean.x) / sd.x
>>     df$y <- (df$height - mean.y) / sd.y
>>
>>     X <- model.matrix(~ x * male * black, data = df)
>>     dummyID <- rep(1, length(nrow(X)))
>>
>>     grouped_data <- groupedData(y ~ X[,-1]|rep(1, length = nrow(X)),
>> data = data.frame(y = df$y, X, dummyID))
>>
>> }
>>
>>
>> # doesn't work on Windows machine, does work on the Mac
>> analyze_this(growthIndiana)
>> #> Error in eval(aux[[2]], object): object 'X' not found
>>
>> # does work
>>
>> df <- growthIndiana
>>
>> mean.x <- mean(df$age)
>> mean.y <- mean(df$height)
>> sd.x <- sd(df$age)
>> sd.y <- sd(df$height)
>>
>> df$x <- (df$age - mean.x) / sd.x
>> df$y <- (df$height - mean.y) / sd.y
>>
>> X <- model.matrix(~ x * male * black, data = df) dummyID <- rep(1,
>> length(nrow(X)))
>>
>> grouped_data <- groupedData(y ~ X[,-1]|rep(1, length = nrow(X)), data
>> = data.frame(y = df$y, X, dummyID))
>>
>>
>> # attempted work-around.
>>
>> analyze_this2 <- function(df) {
>>     num.global.knots = 20
>>     num.subject.knots = 10
>>
>>     mean.x <- mean(df$age)
>>     mean.y <- mean(df$height)
>>     sd.x <- sd(df$age)
>>     sd.y <- sd(df$height)
>>
>>     df$x <- (df$age - mean.x) / sd.x
>>     df$y <- (df$height - mean.y) / sd.y
>>
>>     X <- model.matrix(~ x * male * black, data = df)
>>     dummyID <- rep(1, length(nrow(X)))
>>
>>     # grouped_data <- groupedData(y ~ X[,-1]|rep(1, length = nrow(X)),
>> data = data.frame(y = df$y, X, dummyID))
>>
>>     global.knots = quantile(unique(df$x), seq(0, 1, length = num.global.knots + 2)[-c(1, num.global.knots + 2)])
>>     subject.knots = quantile(unique(df$x), seq(0, 1, length =
>> num.subject.knots + 2)[-c(1, num.subject.knots + 2)])
>>
>>     Z.global <- ZOSull(df$x, range.x = range(df$x), global.knots)
>>     Z.group <- df$black * Z.global
>>     Z.subject <- ZOSull(df$x, range.x = range(df$x), subject.knots)
>>
>>     Zblock <- list(
>>       dummyID = pdIdent(~ 0 + Z.global),
>>       dummyID = pdIdent(~ 0 + Z.group),
>>       idnum = pdSymm(~ x),
>>       idnum = pdIdent(~ 0 + Z.subject)
>>     )
>>
>>     df$dummyID <- dummyID
>>     tmp_data <- c(
>>       df,
>>       X = list(X),
>>       Z.global = list(Z.global),
>>       Z.group = list(Z.global),
>>       Z.subject = list(Z.subject)
>>     )
>>
>>     fit <- lme(y ~ 0 + X,
>>       data = tmp_data,
>>       random = Zblock
>>     )
>>
>> }
>>
>> # this works (warning - lme takes awhile to fit)
>> analyze_this2(growthIndiana)
>>
>> sessionInfo()
>> #> R version 4.1.2 (2021-11-01)
>> #> Platform: x86_64-w64-mingw32/x64 (64-bit) #> Running under: Windows
>> 10 x64 (build 22000) #> #> Matrix products: default #> #> locale:
>> #> [1] LC_COLLATE=English_United States.1252 #> [2]
>> LC_CTYPE=English_United States.1252 #> [3] LC_MONETARY=English_United
>> States.1252 #> [4] LC_NUMERIC=C #> [5] LC_TIME=English_United
>> States.1252 #> #> attached base packages:
>> #> [1] stats     graphics  grDevices utils     datasets  methods   base
>> #>
>> #> other attached packages:
>> #> [1] nlme_3.1-153 HRW_1.0-5
>> #>
>> #> loaded via a namespace (and not attached):
>> #>  [1] lattice_0.20-45    digest_0.6.29      withr_2.4.3        grid_4.1.2
>> #>  [5] magrittr_2.0.1     reprex_2.0.1       evaluate_0.14      KernSmooth_2.23-20
>> #>  [9] highr_0.9          stringi_1.7.6      rlang_0.4.12       cli_3.1.0
>> #> [13] rstudioapi_0.13    fs_1.5.2           rmarkdown_2.11     splines_4.1.2
>> #> [17] tools_4.1.2        stringr_1.4.0      glue_1.6.0         xfun_0.29
>> #> [21] yaml_2.2.1         fastmap_1.1.0      compiler_4.1.2     htmltools_0.5.2
>> #> [25] knitr_1.37
>>
>> Created on 2022-01-07 by the [reprex
>> package](https://usg02.safelinks.protection.office365.us/?url=https%3A
>> %2F%2Freprex.tidyverse.org%2F&amp;data=04%7C01%7Cmkey%40infoscitex.com
>> %7C57e0067b32a24526600c08d9d2258bd8%7C3430c5de5e6f4f9d9d9690e985038b58
>> %7C0%7C0%7C637771881005380638%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAw
>> MDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=hH
>> 5ncnSVZGQ4KZsvLpvjgM%2Fgf9Zu5QnoeSntTrCZWjk%3D&amp;reserved=0)
>> (v2.0.1)
>>
>>    Here's the session Info for the Mac:
>>
>> sessionInfo()
>> R version 4.1.2 (2021-11-01)
>> Platform: aarch64-apple-darwin20 (64-bit) Running under: macOS
>> Monterey 12.1
>>
>> Matrix products: default
>> LAPACK:
>> /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRl
>> apack.dylib
>>
>> locale:[1]
>> en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>> other attached packages:
>> [1] nlme_3.1-153  targets_0.8.1 HRW_1.0-5
>>
>> loaded via a namespace (and not attached):
>>    [1] compiler_4.1.2     pillar_1.6.4       tools_4.1.2        digest_0.6.28      lattice_0.20-45    jsonlite_1.7.2     evaluate_0.14
>>    [8] lifecycle_1.0.1    tibble_3.1.6       pkgconfig_2.0.3    rlang_0.4.12       igraph_1.2.9       cli_3.1.0          yaml_2.2.1
>> [15] xfun_0.28          fastmap_1.1.0      withr_2.4.2        knitr_1.36         htmlwidgets_1.5.4  vctrs_0.3.8        grid_4.1.2
>> [22] tidyselect_1.1.1   glue_1.5.0         data.table_1.14.2  R6_2.5.1           processx_3.5.2     fansi_0.5.0        rmarkdown_2.11
>> [29] callr_3.7.0        purrr_0.3.4        magrittr_2.0.1     scales_1.1.1       codetools_0.2-18   ps_1.6.0           htmltools_0.5.2
>> [36] ellipsis_0.3.2     splines_4.1.2      colorspace_2.0-2   KernSmooth_2.23-20 utf8_1.2.2         visNetwork_2.1.0   munsell_0.5.0
>> [43] crayon_1.4.2
>>
>>
>> Melissa Key, Ph.D.
>> Statistician
>> Non-Invasive Brain Stimulation Team
>> Infoscitex
>>
>> Cell: 937-550-4981
>> Email: mkey at infoscitex.com<mailto:mkey at infoscitex.com>
>> Base email:
>> melissa.key.ctr at us.af.mil<mailto:melissa.key.ctr at us.af.mil>
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://usg02.safelinks.protection.office365.us/?url=https%3A%2F%2Fsta
>> t.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7Cmkey%40info
>> scitex.com%7C57e0067b32a24526600c08d9d2258bd8%7C3430c5de5e6f4f9d9d9690
>> e985038b58%7C0%7C0%7C637771881005380638%7CUnknown%7CTWFpbGZsb3d8eyJWIj
>> oiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&am
>> p;sdata=4c%2Bnu06ZfIKpwowJCTz2mIl7kAEQR5vbZSw8pTuqumk%3D&amp;reserved=
>> 0 PLEASE do read the posting guide
>> https://usg02.safelinks.protection.office365.us/?url=http%3A%2F%2Fwww.
>> r-project.org%2Fposting-guide.html&amp;data=04%7C01%7Cmkey%40infoscite
>> x.com%7C57e0067b32a24526600c08d9d2258bd8%7C3430c5de5e6f4f9d9d9690e9850
>> 38b58%7C0%7C0%7C637771881005380638%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4
>> wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sda
>> ta=iT8fu9JX5i7gUfo0T2gQMVdHEm%2FSThakp2yaOJ2pOBQ%3D&amp;reserved=0
>> and provide commented, minimal, self-contained, reproducible code.
>


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Sat Jan  8 18:04:21 2022
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Sat, 8 Jan 2022 17:04:21 +0000 (UTC)
Subject: [R] Percentile bootstrap for the median : error message
References: <409962399.396260.1641661461383.ref@mail.yahoo.com>
Message-ID: <409962399.396260.1641661461383@mail.yahoo.com>

Dear R-experts,

Here below my R code for the percentile bootstrap confidence intervals with an error message. 
Is there a way to make my R code work ?
Many thanks for your help and time.

############################################
library(boot)

s=rnorm(100000,0,1)
(m<-median(s)) 

N <- 100
n<-5
out <- replicate(N, {

dat<-data.frame(sample(s,size=n))
med<-function(d,i) {
median(d[i, ])
}

? boot.out <- boot(data = dat, statistic = med, R = 10000)

? boot.ci(boot.out, type = "per")$per[, 4:5]

})

mean(out[1, ] < m & m < out[2, ])
############################################


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jan  8 18:08:08 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 8 Jan 2022 09:08:08 -0800
Subject: [R] Percentile bootstrap for the median : error message
In-Reply-To: <409962399.396260.1641661461383@mail.yahoo.com>
References: <409962399.396260.1641661461383.ref@mail.yahoo.com>
 <409962399.396260.1641661461383@mail.yahoo.com>
Message-ID: <CAGxFJbQh=H4UOTE57ihmHQbDgxKg46HO0SX2Ae61Q-UGm0C=pA@mail.gmail.com>

I see no error message.

Bert Gunter



On Sat, Jan 8, 2022 at 9:04 AM varin sacha via R-help <r-help at r-project.org>
wrote:

> Dear R-experts,
>
> Here below my R code for the percentile bootstrap confidence intervals
> with an error message.
> Is there a way to make my R code work ?
> Many thanks for your help and time.
>
> ############################################
> library(boot)
>
> s=rnorm(100000,0,1)
> (m<-median(s))
>
> N <- 100
> n<-5
> out <- replicate(N, {
>
> dat<-data.frame(sample(s,size=n))
> med<-function(d,i) {
> median(d[i, ])
> }
>
>   boot.out <- boot(data = dat, statistic = med, R = 10000)
>
>   boot.ci(boot.out, type = "per")$per[, 4:5]
>
> })
>
> mean(out[1, ] < m & m < out[2, ])
> ############################################
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From j|ox @end|ng |rom mcm@@ter@c@  Sat Jan  8 19:09:35 2022
From: j|ox @end|ng |rom mcm@@ter@c@ (Fox, John)
Date: Sat, 8 Jan 2022 18:09:35 +0000
Subject: [R] Percentile bootstrap for the median : error message
In-Reply-To: <26705_1641661485_208H4i9g015198_409962399.396260.1641661461383@mail.yahoo.com>
References: <409962399.396260.1641661461383.ref@mail.yahoo.com>
 <26705_1641661485_208H4i9g015198_409962399.396260.1641661461383@mail.yahoo.com>
Message-ID: <354513C1-905B-4CF6-BCE3-8B9CECDD568C@mcmaster.ca>

Dear Sacha,

Here's your corrected and cleaned-up code:

> library(boot)
> set.seed(123)
> s <- rnorm(100000,0,1)
> (m <- median(s)) 
[1] 0.000946463

> med <- function(d,i) {
+   median(d[i, ])
+ }

> set.seed(456)
> N <- 100
> n<-5

> out <- replicate(N, {
+   dat <- data.frame(sample(s,size=n))
+   boot.out <- boot(data = dat, statistic = med, R = 10000)
+   boot.ci(boot.out, type = "perc")$perc[, 4:5]  
+ })

> mean(out[1, ] < m & m < out[2, ])
[1] 0.94

A couple of comments:

(1) I moved the definition of med() outside of the call to replicate() so the function doesn't get defined repeatedly -- something that, if I'm not mistaken, you were advised to do the last time you asked a very similar question.

(2) Maybe it's time to polish your debugging skills. I quickly found the error in the call to boot.ci() by calling browser() before the line dat <- data.frame(sample(s,size=n)) and stepping through the commands.

I hope this helps,
 John

  -----------------------------
  John Fox, Professor Emeritus
  McMaster University
  Hamilton, Ontario, Canada
  Web: http::/socserv.mcmaster.ca/jfox

> On Jan 8, 2022, at 12:04 PM, varin sacha via R-help <r-help at r-project.org> wrote:
> 
> Dear R-experts,
> 
> Here below my R code for the percentile bootstrap confidence intervals with an error message. 
> Is there a way to make my R code work ?
> Many thanks for your help and time.
> 
> ############################################
> library(boot)
> 
> s=rnorm(100000,0,1)
> (m<-median(s)) 
> 
> N <- 100
> n<-5
> out <- replicate(N, {
> 
> dat<-data.frame(sample(s,size=n))
> med<-function(d,i) {
> median(d[i, ])
> }
> 
>   boot.out <- boot(data = dat, statistic = med, R = 10000)
> 
>   boot.ci(boot.out, type = "per")$per[, 4:5]
> 
> })
> 
> mean(out[1, ] < m & m < out[2, ])
> ############################################
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Sat Jan  8 20:46:18 2022
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Sat, 8 Jan 2022 19:46:18 +0000 (UTC)
Subject: [R] Percentile bootstrap for the median : error message
In-Reply-To: <354513C1-905B-4CF6-BCE3-8B9CECDD568C@mcmaster.ca>
References: <409962399.396260.1641661461383.ref@mail.yahoo.com>
 <26705_1641661485_208H4i9g015198_409962399.396260.1641661461383@mail.yahoo.com>
 <354513C1-905B-4CF6-BCE3-8B9CECDD568C@mcmaster.ca>
Message-ID: <245141304.330883.1641671178352@mail.yahoo.com>


Dear John,

Great, many thanks for your quick help.

Best,
SV



Le samedi 8 janvier 2022, 19:09:39 UTC+1, Fox, John <jfox at mcmaster.ca> a ?crit : 





Dear Sacha,

Here's your corrected and cleaned-up code:

> library(boot)
> set.seed(123)
> s <- rnorm(100000,0,1)
> (m <- median(s)) 
[1] 0.000946463

> med <- function(d,i) {
+? median(d[i, ])
+ }

> set.seed(456)
> N <- 100
> n<-5

> out <- replicate(N, {
+? dat <- data.frame(sample(s,size=n))
+? boot.out <- boot(data = dat, statistic = med, R = 10000)
+? boot.ci(boot.out, type = "perc")$perc[, 4:5]? 
+ })

> mean(out[1, ] < m & m < out[2, ])
[1] 0.94

A couple of comments:

(1) I moved the definition of med() outside of the call to replicate() so the function doesn't get defined repeatedly -- something that, if I'm not mistaken, you were advised to do the last time you asked a very similar question.

(2) Maybe it's time to polish your debugging skills. I quickly found the error in the call to boot.ci() by calling browser() before the line dat <- data.frame(sample(s,size=n)) and stepping through the commands.

I hope this helps,
John

? -----------------------------
? John Fox, Professor Emeritus
? McMaster University
? Hamilton, Ontario, Canada
? Web: http::/socserv.mcmaster.ca/jfox

> On Jan 8, 2022, at 12:04 PM, varin sacha via R-help <r-help at r-project.org> wrote:
> 
> Dear R-experts,
> 
> Here below my R code for the percentile bootstrap confidence intervals with an error message. 
> Is there a way to make my R code work ?
> Many thanks for your help and time.
> 
> ############################################
> library(boot)
> 
> s=rnorm(100000,0,1)
> (m<-median(s)) 
> 
> N <- 100
> n<-5
> out <- replicate(N, {
> 
> dat<-data.frame(sample(s,size=n))
> med<-function(d,i) {
> median(d[i, ])
> }
> 
>? boot.out <- boot(data = dat, statistic = med, R = 10000)
> 
>? boot.ci(boot.out, type = "per")$per[, 4:5]
> 
> })
> 
> mean(out[1, ] < m & m < out[2, ])
> ############################################
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Sun Jan  9 09:15:54 2022
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Sun, 9 Jan 2022 09:15:54 +0100
Subject: [R] Error in using multiple correspondence analysis in R's
 FactoMineR
Message-ID: <CAMk+s2Ti0UL_2S+Fti0dz+iJuTN3Vni79V3KgRfZAiCbrMJMbA@mail.gmail.com>

Hello,
I am trying to apply multiple correspondence analysis to a data frame
using the FactoMineR package following the post
http://sebastien.ledien.free.fr/unofficial_factominer/factosbest/dimensions-description.html

My data frame has this structure:
```
> str(df)
'data.frame': 27 obs. of  33 variables:
$ id              : int  1 6 9 10 11 12 13 36 40 49 ...
$ retinol         : num  2.56 2.93 3.21 1.73 1.32 2.34 2.43 2.54 0.37 1.22 ...
...
$ age             : int  60 63 66 72 64 73 66 68 72 59 ...
$ death           : Factor w/ 2 levels "No","Yes": 1 2 1 1 2 1 1 2 1 1 ...
...
$ age_bin         : Factor w/ 4 levels "<30","30-49",..: 3 3 3 4 3 4 3 3 4 3 ...
```
Thus, following the post, I have set the quantitative supplementary
column to `age` (df[10]) and then tested the factorial variables
(df[11:33) but:
```
> res.mca = MCA(df, quanti.sup=2, quali.sup=c(11:33))
Error in dimnames(res) <- list(attributes(tab)$row.names, listModa) :
length of 'dimnames' [2] not equal to array extent
> nrow(df[10])
[1] 27
> nrow(df[11:33])
[1] 27
```

What would be the problem?
Thank you


-- 
Best regards,
Luigi


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Jan  9 18:20:37 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 9 Jan 2022 17:20:37 +0000
Subject: [R] Error in using multiple correspondence analysis in R's
 FactoMineR
In-Reply-To: <CAMk+s2Ti0UL_2S+Fti0dz+iJuTN3Vni79V3KgRfZAiCbrMJMbA@mail.gmail.com>
References: <CAMk+s2Ti0UL_2S+Fti0dz+iJuTN3Vni79V3KgRfZAiCbrMJMbA@mail.gmail.com>
Message-ID: <bc8ff31f-9e45-161a-bafa-dfbb1c7e02c1@sapo.pt>

Hello,

You have set quanti.sup to retinol (df[[2]]), not age. In the code it's 
quanti.sup=2.

Without data it's difficult to say but try changing it.

Hope this helps,

Rui Barradas

?s 08:15 de 09/01/22, Luigi Marongiu escreveu:
> Hello,
> I am trying to apply multiple correspondence analysis to a data frame
> using the FactoMineR package following the post
> http://sebastien.ledien.free.fr/unofficial_factominer/factosbest/dimensions-description.html
> 
> My data frame has this structure:
> ```
>> str(df)
> 'data.frame': 27 obs. of  33 variables:
> $ id              : int  1 6 9 10 11 12 13 36 40 49 ...
> $ retinol         : num  2.56 2.93 3.21 1.73 1.32 2.34 2.43 2.54 0.37 1.22 ...
> ...
> $ age             : int  60 63 66 72 64 73 66 68 72 59 ...
> $ death           : Factor w/ 2 levels "No","Yes": 1 2 1 1 2 1 1 2 1 1 ...
> ...
> $ age_bin         : Factor w/ 4 levels "<30","30-49",..: 3 3 3 4 3 4 3 3 4 3 ...
> ```
> Thus, following the post, I have set the quantitative supplementary
> column to `age` (df[10]) and then tested the factorial variables
> (df[11:33) but:
> ```
>> res.mca = MCA(df, quanti.sup=2, quali.sup=c(11:33))
> Error in dimnames(res) <- list(attributes(tab)$row.names, listModa) :
> length of 'dimnames' [2] not equal to array extent
>> nrow(df[10])
> [1] 27
>> nrow(df[11:33])
> [1] 27
> ```
> 
> What would be the problem?
> Thank you
> 
>


From @pr||ett|ngton @end|ng |rom gm@||@com  Mon Jan 10 01:26:55 2022
From: @pr||ett|ngton @end|ng |rom gm@||@com (April Ettington)
Date: Mon, 10 Jan 2022 13:26:55 +1300
Subject: [R] ggtree node labels
Message-ID: <CAE9tUWc96wbW2bMUgcJ_nxKzqTPyaT9TNoeXhUMRZhpXcjMtrA@mail.gmail.com>

Hello,

Is there a way to add nodelabels to a ggtree plot in R?  Thanks in advance
:)

April

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon Jan 10 01:32:32 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 9 Jan 2022 16:32:32 -0800
Subject: [R] ggtree node labels
In-Reply-To: <CAE9tUWc96wbW2bMUgcJ_nxKzqTPyaT9TNoeXhUMRZhpXcjMtrA@mail.gmail.com>
References: <CAE9tUWc96wbW2bMUgcJ_nxKzqTPyaT9TNoeXhUMRZhpXcjMtrA@mail.gmail.com>
Message-ID: <CAGxFJbRcekZG3j+3tghh8jvUCQA+vqy69wz3eMmEeBmX4w=39g@mail.gmail.com>

RStudio is **not** R. In particular, the so-called TidyVerse and
ggplot-related graphics consistsof all *non*-standard contributed packages,
about which the Posting Guide (linked below) says:

"For questions about functions in standard packages distributed with R (see
the FAQ Add-on packages in R), ask questions on R-help.
[The link is:
https://cran.r-project.org/doc/FAQ/R-FAQ.html#Add-on-packages-in-R
This gives the list of current _standard_ packages]

If the question relates to a contributed package , e.g., one downloaded
from CRAN, try contacting the package maintainer first. You can also use
find("functionname") and packageDescription("packagename") to find this
information. Only send such questions to R-help or R-devel if you get no
reply or need further assistance. This applies to both requests for help
and to bug reports."

Note that RStudio maintains its own help resources at:
https://community.rstudio.com/
This is where questions about the TidyVerse, ggplot, etc. should be posted.


Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Jan 9, 2022 at 4:27 PM April Ettington <aprilettington at gmail.com>
wrote:

> Hello,
>
> Is there a way to add nodelabels to a ggtree plot in R?  Thanks in advance
> :)
>
> April
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Jan 10 08:16:20 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 10 Jan 2022 07:16:20 +0000
Subject: [R] ggtree node labels
In-Reply-To: <CAE9tUWc96wbW2bMUgcJ_nxKzqTPyaT9TNoeXhUMRZhpXcjMtrA@mail.gmail.com>
References: <CAE9tUWc96wbW2bMUgcJ_nxKzqTPyaT9TNoeXhUMRZhpXcjMtrA@mail.gmail.com>
Message-ID: <c793a3aea80b4640b9134f01bb71013d@SRVEXCHCM1301.precheza.cz>

Hi

If you asked google ggtree node label you will get many hits which tell you
how to label nodes

E.g.
https://bioc.ism.ac.jp/packages/3.3/bioc/vignettes/ggtree/inst/doc/treeAnnot
ation.html

And you will get it much more quickly than by asking here.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of April Ettington
> Sent: Monday, January 10, 2022 1:27 AM
> To: r-help at r-project.org
> Subject: [R] ggtree node labels
> 
> Hello,
> 
> Is there a way to add nodelabels to a ggtree plot in R?  Thanks in advance
> :)
> 
> April
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From @dr|@n@@@|@t|g @end|ng |rom |c@hn@m@@m@edu  Mon Jan 10 22:06:27 2022
From: @dr|@n@@@|@t|g @end|ng |rom |c@hn@m@@m@edu (Adriana Sistig)
Date: Mon, 10 Jan 2022 16:06:27 -0500
Subject: [R] Help with developing package DWLS
Message-ID: <FD23122F-6045-4F6A-8194-17292FAEC526@icahn.mssm.edu>

Hello, 

My name is Adriana Sistig and I am struggle to fix an ERROR and a few WARNING and NOTE message that I am getting from my package. I am new to CRAN packaging and am having some trouble finalizing my package. 

I do not have any ERRORS when I check using Mac but when checking via Windows and Debian I do. The current Status: 1 ERROR, 3 WARNINGs, 6 NOTEs ?
Pasted below for more information. 

GitHub link: https://github.com/sistia01/DWLS <https://github.com/sistia01/DWLS>

Further information: 

> sessionInfo()
R version 4.0.5 (2021-03-31)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Big Sur 10.16

Matrix products: default
LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] parallel  stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] DWLS_0.1.0          Giotto_1.0.3        Biobase_2.50.0      BiocGenerics_0.36.1

loaded via a namespace (and not attached):
  [1] Seurat_4.0.5                Rtsne_0.15                  colorspace_2.0-2           
  [4] deldir_1.0-6                class_7.3-19                ellipsis_0.3.2             
  [7] ggridges_0.5.3              XVector_0.30.0              GenomicRanges_1.42.0       
 [10] proxy_0.4-26                spatstat.data_2.1-0         leiden_0.3.9               
 [13] listenv_0.8.0               ggrepel_0.9.1               fansi_0.5.0                
 [16] codetools_0.2-18            splines_4.0.5               polyclip_1.10-0            
 [19] jsonlite_1.7.2              ica_1.0-2                   cluster_2.1.2              
 [22] png_0.1-7                   uwot_0.1.11                 shiny_1.7.1                
 [25] sctransform_0.3.2           spatstat.sparse_2.0-0       compiler_4.0.5             
 [28] httr_1.4.2                  SeuratObject_4.0.4          Matrix_1.3-4               
 [31] fastmap_1.1.0               lazyeval_0.2.2              cli_3.1.0                  
 [34] later_1.3.0                 htmltools_0.5.2             tools_4.0.5                
 [37] igraph_1.2.9                gtable_0.3.0                glue_1.6.0                 
 [40] GenomeInfoDbData_1.2.4      RANN_2.6.1                  reshape2_1.4.4             
 [43] dplyr_1.0.7                 Rcpp_1.0.7                  scattermore_0.7            
 [46] vctrs_0.3.8                 nlme_3.1-153                lmtest_0.9-39              
 [49] stringr_1.4.0               globals_0.14.0              mime_0.12                  
 [52] miniUI_0.1.1.1              lifecycle_1.0.1             irlba_2.3.5                
 [55] goftest_1.2-3               future_1.23.0               zlibbioc_1.36.0            
 [58] MASS_7.3-54                 zoo_1.8-9                   scales_1.1.1               
 [61] MAST_1.16.0                 spatstat.core_2.3-2         promises_1.2.0.1           
 [64] MatrixGenerics_1.2.1        spatstat.utils_2.2-0        SummarizedExperiment_1.20.0
 [67] RColorBrewer_1.1-2          SingleCellExperiment_1.12.0 reticulate_1.22            
 [70] pbapply_1.5-0               gridExtra_2.3               ggplot2_3.3.5              
 [73] rpart_4.1-15                reshape_0.8.8               stringi_1.7.6              
 [76] S4Vectors_0.28.1            e1071_1.7-9                 GenomeInfoDb_1.26.7        
 [79] rlang_0.4.12                pkgconfig_2.0.3             matrixStats_0.61.0         
 [82] bitops_1.0-7                lattice_0.20-45             ROCR_1.0-11                
 [85] purrr_0.3.4                 tensor_1.5                  patchwork_1.1.1            
 [88] htmlwidgets_1.5.4           cowplot_1.1.1               tidyselect_1.1.1           
 [91] parallelly_1.29.0           RcppAnnoy_0.0.19            plyr_1.8.6                 
 [94] magrittr_2.0.1              R6_2.5.1                    IRanges_2.24.1             
 [97] generics_0.1.1              DBI_1.1.1                   DelayedArray_0.16.3        
[100] mgcv_1.8-38                 pillar_1.6.4                fitdistrplus_1.1-6         
[103] survival_3.2-13             abind_1.4-5                 RCurl_1.98-1.5             
[106] tibble_3.1.6                future.apply_1.8.1          crayon_1.4.2               
[109] KernSmooth_2.23-20          utf8_1.2.2                  spatstat.geom_2.3-0        
[112] plotly_4.10.0               grid_4.0.5                  data.table_1.14.2          
[115] digest_0.6.29               xtable_1.8-4                tidyr_1.1.4                
[118] httpuv_1.6.3                stats4_4.0.5                munsell_0.5.0              
[121] viridisLite_0.4.0           quadprog_1.5-8  

> Sys.getlocale()
[1] "en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8?

?????????????????
* using log directory 'd:/RCompile/CRANguest/R-devel/DWLS.Rcheck'
* using R Under development (unstable) (2022-01-09 r81462 ucrt)
* using platform: x86_64-w64-mingw32 (64-bit)
* using session charset: UTF-8
* checking for file 'DWLS/DESCRIPTION' ... OK
* checking extension type ... Package
* this is package 'DWLS' version '0.1.0'
* package encoding: UTF-8
* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Adriana Sistig <adriana.sistig at icahn.mssm.edu>'

New submission

Possibly misspelled words in DESCRIPTION:
  DWLS (25:67, 32:42)
  Deconvolution (3:24)
  deconvolution (26:46)
  transcriptomic (10:51)
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking whether package 'DWLS' can be installed ... OK
* checking installed package size ... NOTE
  installed size is 66.4Mb
  sub-directories of 1Mb or more:
    data  66.3Mb
* checking package directory ... OK
* checking for future file timestamps ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... NOTE
Non-standard files/directories found at top level:
  'Reference_Manual_DWLS.md' 'Reference_Manual_Rd2md.md'
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ... OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking loading without being on the library search path ... OK
* checking use of S3 registration ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... [28s] NOTE
DEAnalysisMAST: no visible binding for global variable
  'Number.of.Cells'
Undefined global functions or variables:
  Number.of.Cells
* checking Rd files ... [1s] OK
* checking Rd metadata ... OK
* checking Rd line widths ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... WARNING
Undocumented code objects:
  'Sig' 'dataBulk' 'dataSC_1' 'dataSC_2' 'labels' 'trueLabels'
Undocumented data sets:
  'Sig' 'dataBulk' 'dataSC_1' 'dataSC_2' 'labels' 'trueLabels'
All user-level objects in a package should have documentation entries.
See chapter 'Writing R documentation files' in the 'Writing R
Extensions' manual.
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking contents of 'data' directory ... OK
* checking data for non-ASCII characters ... OK
* checking LazyData ... WARNING
  LazyData DB of 66.3 MB without LazyDataCompression set
  See ??1.1.6 of 'Writing R Extensions'
* checking data for ASCII and uncompressed saves ... OK
* checking R/sysdata.rda ... OK
* checking examples ... [80s] NOTE
Examples with CPU (user + system) or elapsed time > 10s
           user system elapsed
stat.log2 50.87  11.58   62.45
* checking for unstated dependencies in 'tests' ... OK
* checking tests ... [9s] OK
  Running 'testthat.R' [9s]
* checking PDF version of manual ... WARNING
LaTeX errors when creating PDF version.
This typically indicates Rd problems.
LaTeX errors found:
! Package inputenc Error: Unicode character ??? (U+2212)
(inputenc)                not set up for use with LaTeX.

See the inputenc package documentation for explanation.
Type  H <return>  for immediate help.
* checking PDF version of manual without hyperrefs or index ... ERROR
* checking for detritus in the temp directory ... NOTE
Found the following files/directories:
  'lastMiKTeXException'
* DONE
Status: 1 ERROR, 3 WARNINGs, 6 NOTEs
?????? 
With regard to the NOTE about function DEAnalysisMAST ?> I?m unsure about why this function in particular is throwing a note while other functions which use very similar code are not. 
I have tried a few different methods to create the pdf document of the manual but have not been able to succeed. I?m unsure of how to decipher the LaTeX Errors and have found from further research online that this may actually be quite an arduous task. I would greatly appreciate any help with this as it is not something that I have been able to solve on my own for the past few months. Please let me know if any further information is required. I thank you in advance for your help. 

Best, 
Adriana Sistig 


	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Tue Jan 11 11:04:20 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Tue, 11 Jan 2022 05:04:20 -0500
Subject: [R] Help with developing package DWLS
In-Reply-To: <FD23122F-6045-4F6A-8194-17292FAEC526@icahn.mssm.edu>
References: <FD23122F-6045-4F6A-8194-17292FAEC526@icahn.mssm.edu>
Message-ID: <CAPcHnpQvEsfD0fak0+4+W+OJLO48G+wbobNhP6dkYJ2pdZcZ+w@mail.gmail.com>

The NOTE saying 'Possibly misspelled words in DESCRIPTION' can probably be
ignored (though I would probably put the name of your package in single
quotes).


The NOTE 'Non-standard files/directories found at top level' means that you
should move the non-standard files to a different location OR add the
files/directories to your .Rbuildignore file
For example, in my own packages, I usually have a script that will
conveniently run R CMD build, R CMD INSTALL, and R CMD check on that
package, but I don't want to include it in the *.tar.gz, so I add the line:
^Check_This\.R$
to the .Rbuildignore file, and then it's not included. For you, adding
something like:
^Reference_Manual_DWLS\.md$
^Reference_Manual_Rd2md\.md$
might work.


The NOTE 'DEAnalysisMAST: no visible binding for global variable
  'Number.of.Cells'', basically on line 46 of the function you have
something like vbeta.1 <- subset(vbeta.fa, Number.of.Cells == 1)
Anyone reading this would know that Number.of.Cells == 1 is evaluated
within the context vbeta.fa, but R CMD check doesn't, so something like:
vbeta.1 <- vbeta.fa[vbeta.fa[["Number.of.Cells"]] == 1, , drop = FALSE]
might get around this issue while still behaving the same code-wise.


The WARNING 'Undocumented code objects:', even though these objects you've
exported are not functions, they still need a documentation file.
It seems like you're using roxygen for documentation, I'm not familiar with
that, but I'd imagine it's nearly identical to documenting a function.
Here's the chapter of the manual they were referring to:
https://cran.r-project.org/doc/manuals/R-exts.html#Writing-R-documentation-files


The NOTE 'installed size is 66.4Mb'
and WARNING 'LazyData DB of 66.3 MB without LazyDataCompression set'
basically, you have too much data. Or not too much necessarily, but it's
not compressed enough.
The default compression is gzip, but you can also try bzip2 and xz.
You can do this by adding the argument --data-compress=bzip2
or --data-compress=xz to R CMD INSTALL,
or you can add LazyDataCompression: bzip2 or LazyDataCompression: xz to
your DESCRIPTION file.
It seems like you already have the line LazyDataCompression: xz in your
DESCRIPTION, but it's commented out, might want to un-comment it.
Also, for comparisons sake, you could add '-1' to the package version
and LazyDataCompression:
gzip, and then do the same thing adding '-2' and LazyDataCompression:
bzip2, and '-3' and LazyDataCompression: xz so that you figure out which
has the best compression.
You can also visit here for more details:
https://cran.r-project.org/doc/manuals/R-exts.html#Data-in-packages


The NOTE 'Examples with CPU (user + system) or elapsed time > 10s'
basically, your examples need to not take as long. If you'd like, you could
move the long computations into a demo, see here:
https://cran.r-project.org/doc/manuals/R-exts.html#Package-subdirectories
Or you could also add a question for the user:
if (utils::askYesNo("Would you like to run the longer, more involved
example?", default = interactive())) {
    # long example
} else {
    # make a shorter example here
}
and this way, when being check by R CMD check, it will run the short
example, while still allowing the user to run the long example.


I don't think I can offer much help with the last ERROR,


Might also be worth noting, my Windows machine brings up some things that
yours doesn't. For example, it says the directory should be named 'data',
not 'Data'.
Here's the rest of the print out:
andre at DESKTOP-VR312SR:~$ R CMD "check" "--as-cran"
"C:\Users\andre\AppData\Local\Temp\RtmpcjdmpU\file4b8c681a309f\DWLS_0.1.0.tar.gz"
* using log directory 'C:/Users/andre/Documents/DWLS.Rcheck'
* using R version 4.1.2 (2021-11-01)
* using platform: x86_64-w64-mingw32 (64-bit)
* using session charset: ISO8859-1
* using option '--as-cran'
* checking for file 'DWLS/DESCRIPTION' ... OK
* checking extension type ... Package
* this is package 'DWLS' version '0.1.0'
* package encoding: UTF-8
* checking CRAN incoming feasibility ... NOTE
Maintainer: 'Adriana Sistig <adriana.sistig at icahn.mssm.edu>'

New submission

Unknown, possibly mis-spelled, fields in DESCRIPTION:
  'RemoteType' 'RemoteHost' 'RemoteRepo' 'RemoteUsername' 'RemoteRef'
'RemoteSha' 'GithubRepo' 'GithubUsername' 'GithubRef' 'GithubSHA1'

Size of tarball: 32169874 bytes
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking whether package 'DWLS' can be installed ... OK
* checking installed package size ... NOTE
  installed size is 66.4Mb
  sub-directories of 1Mb or more:
    data  66.3Mb
* checking package directory ... OK
* checking for future file timestamps ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... NOTE
Non-standard file/directory found at top level:
  'Data'
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ...
OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking loading without being on the library search path ... OK
* checking use of S3 registration ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... NOTE
DEAnalysisMAST: no visible binding for global variable
  'Number.of.Cells'
Undefined global functions or variables:
  Number.of.Cells
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd line widths ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... WARNING
Undocumented code objects:
  'Sig' 'dataBulk' 'dataSC_1' 'dataSC_2' 'labels' 'trueLabels'
Undocumented data sets:
  'Sig' 'dataBulk' 'dataSC_1' 'dataSC_2' 'labels' 'trueLabels'
All user-level objects in a package should have documentation entries.
See chapter 'Writing R documentation files' in the 'Writing R
Extensions' manual.
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking contents of 'data' directory ... OK
* checking data for non-ASCII characters ... OK
* checking LazyData ... WARNING
  LazyData DB of 66.3 MB without LazyDataCompression set
  See ?1.1.6 of 'Writing R Extensions'
* checking data for ASCII and uncompressed saves ... OK
* checking R/sysdata.rda ... OK
* checking examples ... ERROR
Running examples in 'DWLS-Ex.R' failed
The error most likely occurred in:

> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
> ### Name: stat.log2
> ### Title: stat.log2
> ### Aliases: stat.log2
>
> ### ** Examples
>
> pseudo.count = 0.1
> dataSC <- cbind(dataSC_1, dataSC_2)
> data.used.log2   <- log2(dataSC+pseudo.count)
> colnames(data.used.log2)<-make.unique(colnames(data.used.log2))
> diff.cutoff=0.5
> for (i in unique(labels)){
+   cells.symbol.list2 = colnames(data.used.log2)[which(labels==i)]
+   cells.coord.list2 = match(cells.symbol.list2, colnames(data.used.log2))
+   cells.symbol.list1 = colnames(data.used.log2)[which(labels != i)]
+   cells.coord.list1 = match(cells.symbol.list1, colnames(data.used.log2))
+   data.used.log2.ordered = cbind(data.used.log2[,cells.coord.list1],
+
data.used.log2[,cells.coord.list2])}
Error: cannot allocate vector of size 2.6 Gb
Execution halted
* checking for unstated dependencies in 'tests' ... OK
* checking tests ...
  Running 'testthat.R'
 OK
* checking PDF version of manual ... WARNING
LaTeX errors when creating PDF version.
This typically indicates Rd problems.
LaTeX errors found:
! Package inputenc Error: Unicode character ??? (U+2212)
(inputenc)                not set up for use with LaTeX.

See the inputenc package documentation for explanation.
Type  H <return>  for immediate help.
* checking PDF version of manual without hyperrefs or index ... ERROR
* checking for non-standard things in the check directory ... NOTE
Found the following files/directories:
  'DWLS-manual.tex'
* checking for detritus in the temp directory ... NOTE
Found the following files/directories:
  'lastMiKTeXException'
* DONE

Status: 2 ERRORs, 3 WARNINGs, 6 NOTEs
See
  'C:/Users/andre/Documents/DWLS.Rcheck/00check.log'
for details.

Warning message:
In .system(command = command, ...) :
  'R CMD "check" "--as-cran"
"C:\Users\andre\AppData\Local\Temp\RtmpcjdmpU\file4b8c681a309f\DWLS_0.1.0.tar.gz"'
execution failed with error code 1


On Tue, Jan 11, 2022 at 3:10 AM Adriana Sistig <
adriana.sistig at icahn.mssm.edu> wrote:

> Hello,
>
> My name is Adriana Sistig and I am struggle to fix an ERROR and a few
> WARNING and NOTE message that I am getting from my package. I am new to
> CRAN packaging and am having some trouble finalizing my package.
>
> I do not have any ERRORS when I check using Mac but when checking via
> Windows and Debian I do. The current Status: 1 ERROR, 3 WARNINGs, 6 NOTEs ?
> Pasted below for more information.
>
> GitHub link: https://github.com/sistia01/DWLS <
> https://github.com/sistia01/DWLS>
>
> Further information:
>
> > sessionInfo()
> R version 4.0.5 (2021-03-31)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Big Sur 10.16
>
> Matrix products: default
> LAPACK:
> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] parallel  stats     graphics  grDevices utils     datasets  methods
>  base
>
> other attached packages:
> [1] DWLS_0.1.0          Giotto_1.0.3        Biobase_2.50.0
> BiocGenerics_0.36.1
>
> loaded via a namespace (and not attached):
>   [1] Seurat_4.0.5                Rtsne_0.15
> colorspace_2.0-2
>   [4] deldir_1.0-6                class_7.3-19
> ellipsis_0.3.2
>   [7] ggridges_0.5.3              XVector_0.30.0
> GenomicRanges_1.42.0
>  [10] proxy_0.4-26                spatstat.data_2.1-0
>  leiden_0.3.9
>  [13] listenv_0.8.0               ggrepel_0.9.1               fansi_0.5.0
>
>  [16] codetools_0.2-18            splines_4.0.5
>  polyclip_1.10-0
>  [19] jsonlite_1.7.2              ica_1.0-2
>  cluster_2.1.2
>  [22] png_0.1-7                   uwot_0.1.11                 shiny_1.7.1
>
>  [25] sctransform_0.3.2           spatstat.sparse_2.0-0
>  compiler_4.0.5
>  [28] httr_1.4.2                  SeuratObject_4.0.4
> Matrix_1.3-4
>  [31] fastmap_1.1.0               lazyeval_0.2.2              cli_3.1.0
>
>  [34] later_1.3.0                 htmltools_0.5.2             tools_4.0.5
>
>  [37] igraph_1.2.9                gtable_0.3.0                glue_1.6.0
>
>  [40] GenomeInfoDbData_1.2.4      RANN_2.6.1
> reshape2_1.4.4
>  [43] dplyr_1.0.7                 Rcpp_1.0.7
> scattermore_0.7
>  [46] vctrs_0.3.8                 nlme_3.1-153
> lmtest_0.9-39
>  [49] stringr_1.4.0               globals_0.14.0              mime_0.12
>
>  [52] miniUI_0.1.1.1              lifecycle_1.0.1             irlba_2.3.5
>
>  [55] goftest_1.2-3               future_1.23.0
>  zlibbioc_1.36.0
>  [58] MASS_7.3-54                 zoo_1.8-9
>  scales_1.1.1
>  [61] MAST_1.16.0                 spatstat.core_2.3-2
>  promises_1.2.0.1
>  [64] MatrixGenerics_1.2.1        spatstat.utils_2.2-0
> SummarizedExperiment_1.20.0
>  [67] RColorBrewer_1.1-2          SingleCellExperiment_1.12.0
> reticulate_1.22
>  [70] pbapply_1.5-0               gridExtra_2.3
>  ggplot2_3.3.5
>  [73] rpart_4.1-15                reshape_0.8.8
>  stringi_1.7.6
>  [76] S4Vectors_0.28.1            e1071_1.7-9
>  GenomeInfoDb_1.26.7
>  [79] rlang_0.4.12                pkgconfig_2.0.3
>  matrixStats_0.61.0
>  [82] bitops_1.0-7                lattice_0.20-45             ROCR_1.0-11
>
>  [85] purrr_0.3.4                 tensor_1.5
> patchwork_1.1.1
>  [88] htmlwidgets_1.5.4           cowplot_1.1.1
>  tidyselect_1.1.1
>  [91] parallelly_1.29.0           RcppAnnoy_0.0.19            plyr_1.8.6
>
>  [94] magrittr_2.0.1              R6_2.5.1
> IRanges_2.24.1
>  [97] generics_0.1.1              DBI_1.1.1
>  DelayedArray_0.16.3
> [100] mgcv_1.8-38                 pillar_1.6.4
> fitdistrplus_1.1-6
> [103] survival_3.2-13             abind_1.4-5
>  RCurl_1.98-1.5
> [106] tibble_3.1.6                future.apply_1.8.1
> crayon_1.4.2
> [109] KernSmooth_2.23-20          utf8_1.2.2
> spatstat.geom_2.3-0
> [112] plotly_4.10.0               grid_4.0.5
> data.table_1.14.2
> [115] digest_0.6.29               xtable_1.8-4                tidyr_1.1.4
>
> [118] httpuv_1.6.3                stats4_4.0.5
> munsell_0.5.0
> [121] viridisLite_0.4.0           quadprog_1.5-8
>
> > Sys.getlocale()
> [1] "en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8?
>
> ?????????????????
> * using log directory 'd:/RCompile/CRANguest/R-devel/DWLS.Rcheck'
> * using R Under development (unstable) (2022-01-09 r81462 ucrt)
> * using platform: x86_64-w64-mingw32 (64-bit)
> * using session charset: UTF-8
> * checking for file 'DWLS/DESCRIPTION' ... OK
> * checking extension type ... Package
> * this is package 'DWLS' version '0.1.0'
> * package encoding: UTF-8
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: 'Adriana Sistig <adriana.sistig at icahn.mssm.edu>'
>
> New submission
>
> Possibly misspelled words in DESCRIPTION:
>   DWLS (25:67, 32:42)
>   Deconvolution (3:24)
>   deconvolution (26:46)
>   transcriptomic (10:51)
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking whether package 'DWLS' can be installed ... OK
> * checking installed package size ... NOTE
>   installed size is 66.4Mb
>   sub-directories of 1Mb or more:
>     data  66.3Mb
> * checking package directory ... OK
> * checking for future file timestamps ... OK
> * checking DESCRIPTION meta-information ... OK
> * checking top-level files ... NOTE
> Non-standard files/directories found at top level:
>   'Reference_Manual_DWLS.md' 'Reference_Manual_Rd2md.md'
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * checking whether the package can be loaded ... OK
> * checking whether the package can be loaded with stated dependencies ...
> OK
> * checking whether the package can be unloaded cleanly ... OK
> * checking whether the namespace can be loaded with stated dependencies
> ... OK
> * checking whether the namespace can be unloaded cleanly ... OK
> * checking loading without being on the library search path ... OK
> * checking use of S3 registration ... OK
> * checking dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... [28s] NOTE
> DEAnalysisMAST: no visible binding for global variable
>   'Number.of.Cells'
> Undefined global functions or variables:
>   Number.of.Cells
> * checking Rd files ... [1s] OK
> * checking Rd metadata ... OK
> * checking Rd line widths ... OK
> * checking Rd cross-references ... OK
> * checking for missing documentation entries ... WARNING
> Undocumented code objects:
>   'Sig' 'dataBulk' 'dataSC_1' 'dataSC_2' 'labels' 'trueLabels'
> Undocumented data sets:
>   'Sig' 'dataBulk' 'dataSC_1' 'dataSC_2' 'labels' 'trueLabels'
> All user-level objects in a package should have documentation entries.
> See chapter 'Writing R documentation files' in the 'Writing R
> Extensions' manual.
> * checking for code/documentation mismatches ... OK
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking contents of 'data' directory ... OK
> * checking data for non-ASCII characters ... OK
> * checking LazyData ... WARNING
>   LazyData DB of 66.3 MB without LazyDataCompression set
>   See ??1.1.6 of 'Writing R Extensions'
> * checking data for ASCII and uncompressed saves ... OK
> * checking R/sysdata.rda ... OK
> * checking examples ... [80s] NOTE
> Examples with CPU (user + system) or elapsed time > 10s
>            user system elapsed
> stat.log2 50.87  11.58   62.45
> * checking for unstated dependencies in 'tests' ... OK
> * checking tests ... [9s] OK
>   Running 'testthat.R' [9s]
> * checking PDF version of manual ... WARNING
> LaTeX errors when creating PDF version.
> This typically indicates Rd problems.
> LaTeX errors found:
> ! Package inputenc Error: Unicode character ??? (U+2212)
> (inputenc)                not set up for use with LaTeX.
>
> See the inputenc package documentation for explanation.
> Type  H <return>  for immediate help.
> * checking PDF version of manual without hyperrefs or index ... ERROR
> * checking for detritus in the temp directory ... NOTE
> Found the following files/directories:
>   'lastMiKTeXException'
> * DONE
> Status: 1 ERROR, 3 WARNINGs, 6 NOTEs
> ??????
> With regard to the NOTE about function DEAnalysisMAST ?> I?m unsure about
> why this function in particular is throwing a note while other functions
> which use very similar code are not.
> I have tried a few different methods to create the pdf document of the
> manual but have not been able to succeed. I?m unsure of how to decipher the
> LaTeX Errors and have found from further research online that this may
> actually be quite an arduous task. I would greatly appreciate any help with
> this as it is not something that I have been able to solve on my own for
> the past few months. Please let me know if any further information is
> required. I thank you in advance for your help.
>
> Best,
> Adriana Sistig
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jan 11 16:48:07 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 11 Jan 2022 07:48:07 -0800
Subject: [R] Help with developing package DWLS
In-Reply-To: <FD23122F-6045-4F6A-8194-17292FAEC526@icahn.mssm.edu>
References: <FD23122F-6045-4F6A-8194-17292FAEC526@icahn.mssm.edu>
Message-ID: <CAGxFJbThwXvs9E_6LJf7hm+y2BiZvP9nZhsX6gzuTj6Og2-FGQ@mail.gmail.com>

Andrew has already provided you a lot of help, but further posts should go
to r-package-devel, which is a mailing list specifically set up to provide
the sort of help you requested.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Tue, Jan 11, 2022 at 12:10 AM Adriana Sistig <
adriana.sistig at icahn.mssm.edu> wrote:

> Hello,
>
> My name is Adriana Sistig and I am struggle to fix an ERROR and a few
> WARNING and NOTE message that I am getting from my package. I am new to
> CRAN packaging and am having some trouble finalizing my package.
>
> I do not have any ERRORS when I check using Mac but when checking via
> Windows and Debian I do. The current Status: 1 ERROR, 3 WARNINGs, 6 NOTEs ?
> Pasted below for more information.
>
> GitHub link: https://github.com/sistia01/DWLS <
> https://github.com/sistia01/DWLS>
>
> Further information:
>
> > sessionInfo()
> R version 4.0.5 (2021-03-31)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Big Sur 10.16
>
> Matrix products: default
> LAPACK:
> /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
>
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>
> attached base packages:
> [1] parallel  stats     graphics  grDevices utils     datasets  methods
>  base
>
> other attached packages:
> [1] DWLS_0.1.0          Giotto_1.0.3        Biobase_2.50.0
> BiocGenerics_0.36.1
>
> loaded via a namespace (and not attached):
>   [1] Seurat_4.0.5                Rtsne_0.15
> colorspace_2.0-2
>   [4] deldir_1.0-6                class_7.3-19
> ellipsis_0.3.2
>   [7] ggridges_0.5.3              XVector_0.30.0
> GenomicRanges_1.42.0
>  [10] proxy_0.4-26                spatstat.data_2.1-0
>  leiden_0.3.9
>  [13] listenv_0.8.0               ggrepel_0.9.1               fansi_0.5.0
>
>  [16] codetools_0.2-18            splines_4.0.5
>  polyclip_1.10-0
>  [19] jsonlite_1.7.2              ica_1.0-2
>  cluster_2.1.2
>  [22] png_0.1-7                   uwot_0.1.11                 shiny_1.7.1
>
>  [25] sctransform_0.3.2           spatstat.sparse_2.0-0
>  compiler_4.0.5
>  [28] httr_1.4.2                  SeuratObject_4.0.4
> Matrix_1.3-4
>  [31] fastmap_1.1.0               lazyeval_0.2.2              cli_3.1.0
>
>  [34] later_1.3.0                 htmltools_0.5.2             tools_4.0.5
>
>  [37] igraph_1.2.9                gtable_0.3.0                glue_1.6.0
>
>  [40] GenomeInfoDbData_1.2.4      RANN_2.6.1
> reshape2_1.4.4
>  [43] dplyr_1.0.7                 Rcpp_1.0.7
> scattermore_0.7
>  [46] vctrs_0.3.8                 nlme_3.1-153
> lmtest_0.9-39
>  [49] stringr_1.4.0               globals_0.14.0              mime_0.12
>
>  [52] miniUI_0.1.1.1              lifecycle_1.0.1             irlba_2.3.5
>
>  [55] goftest_1.2-3               future_1.23.0
>  zlibbioc_1.36.0
>  [58] MASS_7.3-54                 zoo_1.8-9
>  scales_1.1.1
>  [61] MAST_1.16.0                 spatstat.core_2.3-2
>  promises_1.2.0.1
>  [64] MatrixGenerics_1.2.1        spatstat.utils_2.2-0
> SummarizedExperiment_1.20.0
>  [67] RColorBrewer_1.1-2          SingleCellExperiment_1.12.0
> reticulate_1.22
>  [70] pbapply_1.5-0               gridExtra_2.3
>  ggplot2_3.3.5
>  [73] rpart_4.1-15                reshape_0.8.8
>  stringi_1.7.6
>  [76] S4Vectors_0.28.1            e1071_1.7-9
>  GenomeInfoDb_1.26.7
>  [79] rlang_0.4.12                pkgconfig_2.0.3
>  matrixStats_0.61.0
>  [82] bitops_1.0-7                lattice_0.20-45             ROCR_1.0-11
>
>  [85] purrr_0.3.4                 tensor_1.5
> patchwork_1.1.1
>  [88] htmlwidgets_1.5.4           cowplot_1.1.1
>  tidyselect_1.1.1
>  [91] parallelly_1.29.0           RcppAnnoy_0.0.19            plyr_1.8.6
>
>  [94] magrittr_2.0.1              R6_2.5.1
> IRanges_2.24.1
>  [97] generics_0.1.1              DBI_1.1.1
>  DelayedArray_0.16.3
> [100] mgcv_1.8-38                 pillar_1.6.4
> fitdistrplus_1.1-6
> [103] survival_3.2-13             abind_1.4-5
>  RCurl_1.98-1.5
> [106] tibble_3.1.6                future.apply_1.8.1
> crayon_1.4.2
> [109] KernSmooth_2.23-20          utf8_1.2.2
> spatstat.geom_2.3-0
> [112] plotly_4.10.0               grid_4.0.5
> data.table_1.14.2
> [115] digest_0.6.29               xtable_1.8-4                tidyr_1.1.4
>
> [118] httpuv_1.6.3                stats4_4.0.5
> munsell_0.5.0
> [121] viridisLite_0.4.0           quadprog_1.5-8
>
> > Sys.getlocale()
> [1] "en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8?
>
> ?????????????????
> * using log directory 'd:/RCompile/CRANguest/R-devel/DWLS.Rcheck'
> * using R Under development (unstable) (2022-01-09 r81462 ucrt)
> * using platform: x86_64-w64-mingw32 (64-bit)
> * using session charset: UTF-8
> * checking for file 'DWLS/DESCRIPTION' ... OK
> * checking extension type ... Package
> * this is package 'DWLS' version '0.1.0'
> * package encoding: UTF-8
> * checking CRAN incoming feasibility ... NOTE
> Maintainer: 'Adriana Sistig <adriana.sistig at icahn.mssm.edu>'
>
> New submission
>
> Possibly misspelled words in DESCRIPTION:
>   DWLS (25:67, 32:42)
>   Deconvolution (3:24)
>   deconvolution (26:46)
>   transcriptomic (10:51)
> * checking package namespace information ... OK
> * checking package dependencies ... OK
> * checking if this is a source package ... OK
> * checking if there is a namespace ... OK
> * checking for hidden files and directories ... OK
> * checking for portable file names ... OK
> * checking whether package 'DWLS' can be installed ... OK
> * checking installed package size ... NOTE
>   installed size is 66.4Mb
>   sub-directories of 1Mb or more:
>     data  66.3Mb
> * checking package directory ... OK
> * checking for future file timestamps ... OK
> * checking DESCRIPTION meta-information ... OK
> * checking top-level files ... NOTE
> Non-standard files/directories found at top level:
>   'Reference_Manual_DWLS.md' 'Reference_Manual_Rd2md.md'
> * checking for left-over files ... OK
> * checking index information ... OK
> * checking package subdirectories ... OK
> * checking R files for non-ASCII characters ... OK
> * checking R files for syntax errors ... OK
> * checking whether the package can be loaded ... OK
> * checking whether the package can be loaded with stated dependencies ...
> OK
> * checking whether the package can be unloaded cleanly ... OK
> * checking whether the namespace can be loaded with stated dependencies
> ... OK
> * checking whether the namespace can be unloaded cleanly ... OK
> * checking loading without being on the library search path ... OK
> * checking use of S3 registration ... OK
> * checking dependencies in R code ... OK
> * checking S3 generic/method consistency ... OK
> * checking replacement functions ... OK
> * checking foreign function calls ... OK
> * checking R code for possible problems ... [28s] NOTE
> DEAnalysisMAST: no visible binding for global variable
>   'Number.of.Cells'
> Undefined global functions or variables:
>   Number.of.Cells
> * checking Rd files ... [1s] OK
> * checking Rd metadata ... OK
> * checking Rd line widths ... OK
> * checking Rd cross-references ... OK
> * checking for missing documentation entries ... WARNING
> Undocumented code objects:
>   'Sig' 'dataBulk' 'dataSC_1' 'dataSC_2' 'labels' 'trueLabels'
> Undocumented data sets:
>   'Sig' 'dataBulk' 'dataSC_1' 'dataSC_2' 'labels' 'trueLabels'
> All user-level objects in a package should have documentation entries.
> See chapter 'Writing R documentation files' in the 'Writing R
> Extensions' manual.
> * checking for code/documentation mismatches ... OK
> * checking Rd \usage sections ... OK
> * checking Rd contents ... OK
> * checking for unstated dependencies in examples ... OK
> * checking contents of 'data' directory ... OK
> * checking data for non-ASCII characters ... OK
> * checking LazyData ... WARNING
>   LazyData DB of 66.3 MB without LazyDataCompression set
>   See ??1.1.6 of 'Writing R Extensions'
> * checking data for ASCII and uncompressed saves ... OK
> * checking R/sysdata.rda ... OK
> * checking examples ... [80s] NOTE
> Examples with CPU (user + system) or elapsed time > 10s
>            user system elapsed
> stat.log2 50.87  11.58   62.45
> * checking for unstated dependencies in 'tests' ... OK
> * checking tests ... [9s] OK
>   Running 'testthat.R' [9s]
> * checking PDF version of manual ... WARNING
> LaTeX errors when creating PDF version.
> This typically indicates Rd problems.
> LaTeX errors found:
> ! Package inputenc Error: Unicode character ??? (U+2212)
> (inputenc)                not set up for use with LaTeX.
>
> See the inputenc package documentation for explanation.
> Type  H <return>  for immediate help.
> * checking PDF version of manual without hyperrefs or index ... ERROR
> * checking for detritus in the temp directory ... NOTE
> Found the following files/directories:
>   'lastMiKTeXException'
> * DONE
> Status: 1 ERROR, 3 WARNINGs, 6 NOTEs
> ??????
> With regard to the NOTE about function DEAnalysisMAST ?> I?m unsure about
> why this function in particular is throwing a note while other functions
> which use very similar code are not.
> I have tried a few different methods to create the pdf document of the
> manual but have not been able to succeed. I?m unsure of how to decipher the
> LaTeX Errors and have found from further research online that this may
> actually be quite an arduous task. I would greatly appreciate any help with
> this as it is not something that I have been able to solve on my own for
> the past few months. Please let me know if any further information is
> required. I thank you in advance for your help.
>
> Best,
> Adriana Sistig
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@rt|n@@m|th @end|ng |rom durh@m@@c@uk  Tue Jan 11 12:12:13 2022
From: m@rt|n@@m|th @end|ng |rom durh@m@@c@uk (Martin R. Smith)
Date: Tue, 11 Jan 2022 11:12:13 +0000
Subject: [R] [R-pkgs] Fwd: Ternary 2.0: Holdridge life zones and ternary
 plots
In-Reply-To: <CANotEPs8zWn5xJzuanqLV38VdpHFVnO2qS+iUWnpwkFDp8OTuA@mail.gmail.com>
References: <CANotEPs8zWn5xJzuanqLV38VdpHFVnO2qS+iUWnpwkFDp8OTuA@mail.gmail.com>
Message-ID: <CANotEPvg_U-vjwO=+BQU4Fp3gkqf6ekr0zQ+Rdeg8mSMNB=-HQ@mail.gmail.com>

Dear R users,

It is now possible to create and annotate Holdridge life zone plots using
functions modelled on the standard graphics package using the the package
"Ternary", whose v2.0 release is now available from CRAN:
https://CRAN.R-project.org/package=Ternary .
The vignette at https://ms609.github.io/Ternary/articles/Holdridge.html gives
an example and pointers to detailed documentation.

Ternary 2.0 also includes a complete 'shiny' graphical user interface to
allow interactive construction of ternary plots without detailed knowledge
of R.

Regards,

Martin Smith


--

*Dr. Martin R. Smith*
Associate Professor in Palaeontology
Durham University
Department of Earth Sciences
Mountjoy Site, South Road, Durham, DH1 3LE United Kingdom

*M*: +44 (0)774 353 7510
*E*: martin.smith at durham.ac.uk

smithlabdurham.github.io
twitter.com/PalaeoSmith

The information in this e-mail and any attachments is co...{{dropped:7}}


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Wed Jan 12 01:56:20 2022
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Tue, 11 Jan 2022 18:56:20 -0600
Subject: [R] Method Guidance
References: <000c01d8074f$376e83b0$a64b8b10$.ref@sbcglobal.net>
Message-ID: <000c01d8074f$376e83b0$a64b8b10$@sbcglobal.net>

R-Help Forum

 

Looking for a little guidance. Have an issue were I'm trying to determine
the time between when Event A happened(In days) to when a subsequent Event B
happens. For Example at Time 1 Evat A happens and subsequently Event B
happens at the same day (0) and the next day (1) then Event A happens again
at time 4 and Event B happens the next day and 3 days later so on and so
forth. I gather there is no function that will do that so I suspect I will
need to grate so sour of do while loop?  Any suggestions?

 

 

Time      Event_A               Event_B               Time_B

1              1                              1
0

2              0                              1
1                              

3              0                              0
0

4              1                              0
0

5              0                              1
1

6              0                              0
0

7              0                              1
3

8              1                              1
0

9              0                              0
0

10           0                              1                              2


 

Jeff Reichman    


	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jan 12 03:33:29 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 11 Jan 2022 18:33:29 -0800
Subject: [R] Method Guidance
In-Reply-To: <000c01d8074f$376e83b0$a64b8b10$@sbcglobal.net>
References: <000c01d8074f$376e83b0$a64b8b10$.ref@sbcglobal.net>
 <000c01d8074f$376e83b0$a64b8b10$@sbcglobal.net>
Message-ID: <F052FF01-D36B-4C12-A732-0F96AA1D12A1@dcn.davis.ca.us>

1) Figure out how to post plain text please. What you saw is not what we see.

2) I see a "table" of input information but no specific expectation of what would come out of this hypothetical function.

3) Maybe you will find something relevant in this blog post: https://jdnewmil.github.io/blog/post/cumsum-and-diff-tricks/

ps not sure what "grate so sour" was supposed to be.

pps While loops are not necessarily evil.

On January 11, 2022 4:56:20 PM PST, Jeff Reichman <reichmanj at sbcglobal.net> wrote:
>R-Help Forum
>
> 
>
>Looking for a little guidance. Have an issue were I'm trying to determine
>the time between when Event A happened(In days) to when a subsequent Event B
>happens. For Example at Time 1 Evat A happens and subsequently Event B
>happens at the same day (0) and the next day (1) then Event A happens again
>at time 4 and Event B happens the next day and 3 days later so on and so
>forth. I gather there is no function that will do that so I suspect I will
>need to grate so sour of do while loop?  Any suggestions?
>
> 
>
> 
>
>Time      Event_A               Event_B               Time_B
>
>1              1                              1
>0
>
>2              0                              1
>1                              
>
>3              0                              0
>0
>
>4              1                              0
>0
>
>5              0                              1
>1
>
>6              0                              0
>0
>
>7              0                              1
>3
>
>8              1                              1
>0
>
>9              0                              0
>0
>
>10           0                              1                              2
>
>
> 
>
>Jeff Reichman    
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From drj|m|emon @end|ng |rom gm@||@com  Wed Jan 12 07:44:51 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 12 Jan 2022 17:44:51 +1100
Subject: [R] Method Guidance
In-Reply-To: <F052FF01-D36B-4C12-A732-0F96AA1D12A1@dcn.davis.ca.us>
References: <000c01d8074f$376e83b0$a64b8b10$.ref@sbcglobal.net>
 <000c01d8074f$376e83b0$a64b8b10$@sbcglobal.net>
 <F052FF01-D36B-4C12-A732-0F96AA1D12A1@dcn.davis.ca.us>
Message-ID: <CA+8X3fXoGVqe10yGHcsbHAOgTwGehZt3r8SvZwsFAb=k+PSp5w@mail.gmail.com>

Hi Jeff,
A completely obscure question deserves a completely obscure answer:

jrdf<-read.table(text="Time   Event_A    Event_B   Lag_B
1          1         1        0
2          0         1        1
3          0         0        0
4          1         0        0
5          0         1        1
6          0         0        0
7          0         1        3
8          1         1        0
9          0         0        0
10         0         1        2",
header=TRUE,stringsAsFactors=FALSE)
plot(jrdf$Time-0.2,jrdf$Event_A,type="p",
 xlim=c(1,12),ylim=c(0.9,1.1),
 xlab="Day",ylab="",main="The As and the Bs",
 pch=c(" ","A")[jrdf$Event_A+1],yaxt="n")
points(jrdf$Time+jrdf$Lag_B+0.2,jrdf$Event_B,pch=c(" ","B")[jrdf$Event_B+1])

Jim

On Wed, Jan 12, 2022 at 1:33 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> 1) Figure out how to post plain text please. What you saw is not what we see.
>
> 2) I see a "table" of input information but no specific expectation of what would come out of this hypothetical function.
>
> 3) Maybe you will find something relevant in this blog post: https://jdnewmil.github.io/blog/post/cumsum-and-diff-tricks/
>
> ps not sure what "grate so sour" was supposed to be.
>
> pps While loops are not necessarily evil.
>
> On January 11, 2022 4:56:20 PM PST, Jeff Reichman <reichmanj at sbcglobal.net> wrote:
> >R-Help Forum
> >
> >
> >
> >Looking for a little guidance. Have an issue were I'm trying to determine
> >the time between when Event A happened(In days) to when a subsequent Event B
> >happens. For Example at Time 1 Evat A happens and subsequently Event B
> >happens at the same day (0) and the next day (1) then Event A happens again
> >at time 4 and Event B happens the next day and 3 days later so on and so
> >forth. I gather there is no function that will do that so I suspect I will
> >need to grate so sour of do while loop?  Any suggestions?
> >
> >
> >
> >
> >
> >Time      Event_A               Event_B               Time_B
> >
> >1              1                              1
> >0
> >
> >2              0                              1
> >1
> >
> >3              0                              0
> >0
> >
> >4              1                              0
> >0
> >
> >5              0                              1
> >1
> >
> >6              0                              0
> >0
> >
> >7              0                              1
> >3
> >
> >8              1                              1
> >0
> >
> >9              0                              0
> >0
> >
> >10           0                              1                              2
> >
> >
> >
> >
> >Jeff Reichman
> >
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Jan 12 12:07:57 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 12 Jan 2022 11:07:57 +0000
Subject: [R] Method Guidance
In-Reply-To: <000c01d8074f$376e83b0$a64b8b10$@sbcglobal.net>
References: <000c01d8074f$376e83b0$a64b8b10$.ref@sbcglobal.net>
 <000c01d8074f$376e83b0$a64b8b10$@sbcglobal.net>
Message-ID: <2e753baf-0b60-e4eb-21e5-77c515f3ec23@sapo.pt>

Hello,

Here is a base R solution for what I understand of the question.
It involves ave and cumsum. cumsum of the values of Event_A breaks 
Event_B in segments and ave applies a function to each segment. To find 
where are the times B, coerce to logical and have which() take care of 
it. Data in dput format at the end.



ave(as.logical(df1$Event_B), cumsum(df1$Event_A),
     FUN = function(x) {
       y <- integer(length(x))
       y[x] <- which(x) - 1L
       y
     })
#[1] 0 1 0 0 1 0 3 0 0 2


More readable, with an auxiliary function.


aux_fun <- function(x) {
   y <- integer(length(x))
   y[x] <- which(x) - 1L
   y
}

ave(as.logical(df1$Event_B), cumsum(df1$Event_A), FUN = aux_fun)
#[1] 0 1 0 0 1 0 3 0 0 2



Now assign this result to a df1 column. Here I just test for equality.


new <- ave(as.logical(df1$Event_B), cumsum(df1$Event_A), FUN = aux_fun)
identical(new, df1$Time_B)
#[1] TRUE


# Data
df1 <-
structure(list(Time = 1:10, Event_A = c(1L, 0L, 0L, 1L, 0L, 0L,
0L, 1L, 0L, 0L), Event_B = c(1L, 1L, 0L, 0L, 1L, 0L, 1L, 1L,
0L, 1L), Time_B = c(0L, 1L, 0L, 0L, 1L, 0L, 3L, 0L, 0L, 2L)),
class = "data.frame", row.names = c(NA, -10L))



Hope this helps,

Rui Barradas

?s 00:56 de 12/01/22, Jeff Reichman escreveu:
> R-Help Forum
> 
>   
> 
> Looking for a little guidance. Have an issue were I'm trying to determine
> the time between when Event A happened(In days) to when a subsequent Event B
> happens. For Example at Time 1 Evat A happens and subsequently Event B
> happens at the same day (0) and the next day (1) then Event A happens again
> at time 4 and Event B happens the next day and 3 days later so on and so
> forth. I gather there is no function that will do that so I suspect I will
> need to grate so sour of do while loop?  Any suggestions?
> 
>   
> 
>   
> 
> Time      Event_A               Event_B               Time_B
> 
> 1              1                              1
> 0
> 
> 2              0                              1
> 1
> 
> 3              0                              0
> 0
> 
> 4              1                              0
> 0
> 
> 5              0                              1
> 1
> 
> 6              0                              0
> 0
> 
> 7              0                              1
> 3
> 
> 8              1                              1
> 0
> 
> 9              0                              0
> 0
> 
> 10           0                              1                              2
> 
> 
>   
> 
> Jeff Reichman
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Wed Jan 12 14:40:08 2022
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Wed, 12 Jan 2022 07:40:08 -0600
Subject: [R] Method Guidance
In-Reply-To: <2e753baf-0b60-e4eb-21e5-77c515f3ec23@sapo.pt>
References: <000c01d8074f$376e83b0$a64b8b10$.ref@sbcglobal.net>
 <000c01d8074f$376e83b0$a64b8b10$@sbcglobal.net>
 <2e753baf-0b60-e4eb-21e5-77c515f3ec23@sapo.pt>
Message-ID: <002f01d807b9$eaf88790$c0e996b0$@sbcglobal.net>

Rui

Well that certainly is a lot more straight forward than the direction I was trying and you have introduced me to a couple of new functions. Thank you

Jeff

-----Original Message-----
From: Rui Barradas <ruipbarradas at sapo.pt> 
Sent: Wednesday, January 12, 2022 5:08 AM
To: reichmanj at sbcglobal.net; r-help at r-project.org
Subject: Re: [R] Method Guidance

Hello,

Here is a base R solution for what I understand of the question.
It involves ave and cumsum. cumsum of the values of Event_A breaks Event_B in segments and ave applies a function to each segment. To find where are the times B, coerce to logical and have which() take care of it. Data in dput format at the end.



ave(as.logical(df1$Event_B), cumsum(df1$Event_A),
     FUN = function(x) {
       y <- integer(length(x))
       y[x] <- which(x) - 1L
       y
     })
#[1] 0 1 0 0 1 0 3 0 0 2


More readable, with an auxiliary function.


aux_fun <- function(x) {
   y <- integer(length(x))
   y[x] <- which(x) - 1L
   y
}

ave(as.logical(df1$Event_B), cumsum(df1$Event_A), FUN = aux_fun) #[1] 0 1 0 0 1 0 3 0 0 2



Now assign this result to a df1 column. Here I just test for equality.


new <- ave(as.logical(df1$Event_B), cumsum(df1$Event_A), FUN = aux_fun) identical(new, df1$Time_B) #[1] TRUE


# Data
df1 <-
structure(list(Time = 1:10, Event_A = c(1L, 0L, 0L, 1L, 0L, 0L, 0L, 1L, 0L, 0L), Event_B = c(1L, 1L, 0L, 0L, 1L, 0L, 1L, 1L, 0L, 1L), Time_B = c(0L, 1L, 0L, 0L, 1L, 0L, 3L, 0L, 0L, 2L)), class = "data.frame", row.names = c(NA, -10L))



Hope this helps,

Rui Barradas

?s 00:56 de 12/01/22, Jeff Reichman escreveu:
> R-Help Forum
> 
>   
> 
> Looking for a little guidance. Have an issue were I'm trying to 
> determine the time between when Event A happened(In days) to when a 
> subsequent Event B happens. For Example at Time 1 Evat A happens and 
> subsequently Event B happens at the same day (0) and the next day (1) 
> then Event A happens again at time 4 and Event B happens the next day 
> and 3 days later so on and so forth. I gather there is no function 
> that will do that so I suspect I will need to grate so sour of do while loop?  Any suggestions?
> 
>   
> 
>   
> 
> Time      Event_A               Event_B               Time_B
> 
> 1              1                              1
> 0
> 
> 2              0                              1
> 1
> 
> 3              0                              0
> 0
> 
> 4              1                              0
> 0
> 
> 5              0                              1
> 1
> 
> 6              0                              0
> 0
> 
> 7              0                              1
> 3
> 
> 8              1                              1
> 0
> 
> 9              0                              0
> 0
> 
> 10           0                              1                              2
> 
> 
>   
> 
> Jeff Reichman
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 


From @v|gro@@ @end|ng |rom ver|zon@net  Wed Jan 12 18:26:28 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Wed, 12 Jan 2022 17:26:28 +0000 (UTC)
Subject: [R] Method Guidance
In-Reply-To: <CA+8X3fXoGVqe10yGHcsbHAOgTwGehZt3r8SvZwsFAb=k+PSp5w@mail.gmail.com>
References: <000c01d8074f$376e83b0$a64b8b10$.ref@sbcglobal.net>
 <000c01d8074f$376e83b0$a64b8b10$@sbcglobal.net>
 <F052FF01-D36B-4C12-A732-0F96AA1D12A1@dcn.davis.ca.us>
 <CA+8X3fXoGVqe10yGHcsbHAOgTwGehZt3r8SvZwsFAb=k+PSp5w@mail.gmail.com>
Message-ID: <1579704448.83269.1642008388822@mail.yahoo.com>

To be fair, Jim, when people stop and think carefully before sending a message to a forum like this, and then explain their situation and request carefully and in enough detail, often a solution comes to them and they can abort sending!
Yes, the question asked is a bit vague. Other than asking for more details, the answers would also tend to be vague, or completely mysterious.
Someone sent a pointer to a web page that may well supply ideas to use, but maybe not as the question remains unclear.
So here is my vague reply. You say you have data in what seems to be a data.frame that includes some events marked with a starting time and other related events with a starting/stopping time or something like that.?
You want in some way to line up two or more such related events so you can calculate something like time elapsed. I am not clear if these come in pairs or can be extended as in go from point A to B then C and so on. For some such things, a data.frame may not ultimately be the right data structure.
So first you need to specify how to match things up. Is there another common field like StudentID that can be used to find all records showing when they began doing A or B? If not, how do you recognize what B goes with what A? The difference matters in terms of how to approach the problem.
Once you show a small representative sample, maybe people can suggest approaches. I did not find your sample even slightly useful. Lots of 1 and 0 and maybe some wrapping lines.
The overall approaches for doing what I hope you are doing, vary. You can of course go through the data row by row and look forward and do a calculation and print results. Or, you might want to reshape your data, perhaps merging subsets of the data with other subsets, to create new data where the start and stop segments are in the same row in multiple columns. The latter might be useful for all kinds of analyses including making graphs.
Your example seems to suggest you have a variable that is focused on days so you have not shown some kind of date field. But do events always happen in subsequent days, like in a game of postal chess, or can it happen within a day, perhaps multiple times, like taking your dog for a walk? Can two events interweave or is there a guarantee that each event completes before the next round starts? Is your data in a specific time order so B always follows A?
Many questions like the above matter in understanding your purpose and goal and then seeing what algorithm will take the data you start with and do something. If organized in certain ways and with no errors, it may be trivial. If not, in some cases it simply is not doable. And in some cases, such as buying and selling shares of stock, you have interesting things like rules of what happens if you buy back shares within a month or so as to whether you adjust the basis and of course the length of time can determine capital gains rates. More complexity is whether you have to do some kind of averaging or FIFO or can designate which shares. Now this may have nothing to do with your application, but is an example of why some problems may better be treated differently than others.

-----Original Message-----
From: Jim Lemon <drjimlemon at gmail.com>
To: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Cc: r-help mailing list <r-help at r-project.org>
Sent: Wed, Jan 12, 2022 1:44 am
Subject: Re: [R] Method Guidance

Hi Jeff,
A completely obscure question deserves a completely obscure answer:

jrdf<-read.table(text="Time? Event_A? ? Event_B? Lag_B
1? ? ? ? ? 1? ? ? ? 1? ? ? ? 0
2? ? ? ? ? 0? ? ? ? 1? ? ? ? 1
3? ? ? ? ? 0? ? ? ? 0? ? ? ? 0
4? ? ? ? ? 1? ? ? ? 0? ? ? ? 0
5? ? ? ? ? 0? ? ? ? 1? ? ? ? 1
6? ? ? ? ? 0? ? ? ? 0? ? ? ? 0
7? ? ? ? ? 0? ? ? ? 1? ? ? ? 3
8? ? ? ? ? 1? ? ? ? 1? ? ? ? 0
9? ? ? ? ? 0? ? ? ? 0? ? ? ? 0
10? ? ? ? 0? ? ? ? 1? ? ? ? 2",
header=TRUE,stringsAsFactors=FALSE)
plot(jrdf$Time-0.2,jrdf$Event_A,type="p",
 xlim=c(1,12),ylim=c(0.9,1.1),
 xlab="Day",ylab="",main="The As and the Bs",
 pch=c(" ","A")[jrdf$Event_A+1],yaxt="n")
points(jrdf$Time+jrdf$Lag_B+0.2,jrdf$Event_B,pch=c(" ","B")[jrdf$Event_B+1])

Jim

On Wed, Jan 12, 2022 at 1:33 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> 1) Figure out how to post plain text please. What you saw is not what we see.
>
> 2) I see a "table" of input information but no specific expectation of what would come out of this hypothetical function.
>
> 3) Maybe you will find something relevant in this blog post: https://jdnewmil.github.io/blog/post/cumsum-and-diff-tricks/
>
> ps not sure what "grate so sour" was supposed to be.
>
> pps While loops are not necessarily evil.
>
> On January 11, 2022 4:56:20 PM PST, Jeff Reichman <reichmanj at sbcglobal.net> wrote:
> >R-Help Forum
> >
> >
> >
> >Looking for a little guidance. Have an issue were I'm trying to determine
> >the time between when Event A happened(In days) to when a subsequent Event B
> >happens. For Example at Time 1 Evat A happens and subsequently Event B
> >happens at the same day (0) and the next day (1) then Event A happens again
> >at time 4 and Event B happens the next day and 3 days later so on and so
> >forth. I gather there is no function that will do that so I suspect I will
> >need to grate so sour of do while loop?? Any suggestions?
> >
> >
> >
> >
> >
> >Time? ? ? Event_A? ? ? ? ? ? ? Event_B? ? ? ? ? ? ? Time_B
> >
> >1? ? ? ? ? ? ? 1? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 1
> >0
> >
> >2? ? ? ? ? ? ? 0? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 1
> >1
> >
> >3? ? ? ? ? ? ? 0? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 0
> >0
> >
> >4? ? ? ? ? ? ? 1? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 0
> >0
> >
> >5? ? ? ? ? ? ? 0? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 1
> >1
> >
> >6? ? ? ? ? ? ? 0? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 0
> >0
> >
> >7? ? ? ? ? ? ? 0? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 1
> >3
> >
> >8? ? ? ? ? ? ? 1? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 1
> >0
> >
> >9? ? ? ? ? ? ? 0? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 0
> >0
> >
> >10? ? ? ? ? 0? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 1? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 2
> >
> >
> >
> >
> >Jeff Reichman
> >
> >
> >? ? ? [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From y@ngk@|9999 @end|ng |rom y@hoo@com  Wed Jan 12 21:07:22 2022
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Wed, 12 Jan 2022 20:07:22 +0000 (UTC)
Subject: [R] how to find the table in R studio
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
Message-ID: <1058985502.868240.1642018042467@mail.yahoo.com>

Hi all,
I created a function in R. It will be generate a table "temp". I can view it in R studio, but I cannot find it on the top right window in R studio. Can someone tell me how to find it in there? Same thing for f_table.?
Thank you,
Kai
library(tidyverse)

f1 <- function(indata , subgrp1){
? subgrp1 <- enquo(subgrp1)
? indata0 <- indata
? temp? ? <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%?
? ? group_by(!!subgrp1) %>%
? ? mutate(numbering =row_number(), max=max(numbering))
? view(temp)
? f_table <- table(temp$Species)
? view(f_table)
}

f1(iris, Species)


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jan 12 21:22:00 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 12 Jan 2022 15:22:00 -0500
Subject: [R] how to find the table in R studio
In-Reply-To: <1058985502.868240.1642018042467@mail.yahoo.com>
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
 <1058985502.868240.1642018042467@mail.yahoo.com>
Message-ID: <d3662f4d-ab69-24b7-cc03-8a18e692f522@gmail.com>

On 12/01/2022 3:07 p.m., Kai Yang via R-help wrote:
> Hi all,
> I created a function in R. It will be generate a table "temp". I can view it in R studio, but I cannot find it on the top right window in R studio. Can someone tell me how to find it in there? Same thing for f_table.
> Thank you,
> Kai
> library(tidyverse)
> 
> f1 <- function(indata , subgrp1){
>  ? subgrp1 <- enquo(subgrp1)
>  ? indata0 <- indata
>  ? temp? ? <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>  ? ? group_by(!!subgrp1) %>%
>  ? ? mutate(numbering =row_number(), max=max(numbering))
>  ? view(temp)
>  ? f_table <- table(temp$Species)
>  ? view(f_table)
> }
> 
> f1(iris, Species)
> 

Someone is sure to point out that this isn't an RStudio support list, 
but your issue is with R, not with RStudio.  You created the table in 
f1, but you never returned it.  The variable f_table is local to the 
function.  You'd need the following code to do what you want:

f1 <- function(indata , subgrp1){
   subgrp1 <- enquo(subgrp1)
   indata0 <- indata
   temp    <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
     group_by(!!subgrp1) %>%
     mutate(numbering =row_number(), max=max(numbering))
   view(temp)
   f_table <- table(temp$Species)
   view(f_table)
   f_table
}

f_table <- f1(iris, Species)

It's not so easy to also make temp available.  You can do it with 
assign(), but I think you'd be better off splitting f1 into two 
functions, one to create temp, and one to create f_table.

Duncan Murdoch


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jan 12 21:34:25 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 12 Jan 2022 12:34:25 -0800
Subject: [R] how to find the table in R studio
In-Reply-To: <d3662f4d-ab69-24b7-cc03-8a18e692f522@gmail.com>
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
 <1058985502.868240.1642018042467@mail.yahoo.com>
 <d3662f4d-ab69-24b7-cc03-8a18e692f522@gmail.com>
Message-ID: <BA5E1864-63E6-4E9C-BB5F-4303C1FCD8C5@dcn.davis.ca.us>

Definitely avoid the assign solution... remembering side effects on the global environment is hard and difficult to troubleshoot, and that also makes "doing that many times" unreasonably difficult. IMO even mentioning such an alternative is a dangerous distraction.

I also would advocate not mixing the act of obtaining a result with the act of displaying it (e.g. the view function). A three line script (input, analysis, output) is always easier to adapt to answer new questions than a one-line script is, and is arguably even more understandable.

On January 12, 2022 12:22:00 PM PST, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>On 12/01/2022 3:07 p.m., Kai Yang via R-help wrote:
>> Hi all,
>> I created a function in R. It will be generate a table "temp". I can view it in R studio, but I cannot find it on the top right window in R studio. Can someone tell me how to find it in there? Same thing for f_table.
>> Thank you,
>> Kai
>> library(tidyverse)
>> 
>> f1 <- function(indata , subgrp1){
>>  ? subgrp1 <- enquo(subgrp1)
>>  ? indata0 <- indata
>>  ? temp? ? <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>>  ? ? group_by(!!subgrp1) %>%
>>  ? ? mutate(numbering =row_number(), max=max(numbering))
>>  ? view(temp)
>>  ? f_table <- table(temp$Species)
>>  ? view(f_table)
>> }
>> 
>> f1(iris, Species)
>> 
>
>Someone is sure to point out that this isn't an RStudio support list, 
>but your issue is with R, not with RStudio.  You created the table in 
>f1, but you never returned it.  The variable f_table is local to the 
>function.  You'd need the following code to do what you want:
>
>f1 <- function(indata , subgrp1){
>   subgrp1 <- enquo(subgrp1)
>   indata0 <- indata
>   temp    <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>     group_by(!!subgrp1) %>%
>     mutate(numbering =row_number(), max=max(numbering))
>   view(temp)
>   f_table <- table(temp$Species)
>   view(f_table)
>   f_table
>}
>
>f_table <- f1(iris, Species)
>
>It's not so easy to also make temp available.  You can do it with 
>assign(), but I think you'd be better off splitting f1 into two 
>functions, one to create temp, and one to create f_table.
>
>Duncan Murdoch
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jan 12 22:46:37 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 12 Jan 2022 13:46:37 -0800
Subject: [R] how to find the table in R studio
In-Reply-To: <1058985502.868240.1642018042467@mail.yahoo.com>
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
 <1058985502.868240.1642018042467@mail.yahoo.com>
Message-ID: <CAGxFJbQoy6oX1WOX665LwRbUnQa0yf7npJcRAuDn9Z+HEVWJkA@mail.gmail.com>

If you intend to use R for work beyond simple scripts and plots, you will
have to understand how to use functions in R: the principle that Duncan
mentioned -- that objects such as f-table that are local to a function are
not available outside the function (with caveats -- see below) is
__absolutely fundamental__ to function use in R. You can search for a
suitable R function tutorial on the web of course -- there are tons.

As you learn about how to use functions in R, you will encounter the
concepts of __scoping__ in R and R __environments__. Unfortunately, this
does get a bit technical, but it is very useful to understand at least the
basics for working with functions; and it explains the below example, which
is the 'caveat' I referred to. Feel free to ignore, of course, if you think
this is too much at this point.

*********  R function scoping/environment example ********

## create a function that returns a function as its output
 outer_fun<- function(x){
    inner_fun <- function(y)x*y  ## the function definition, a one-liner
        ## the function returns x*y with input y
   inner_fun ## the last object in a function is automatically returned
      ## so here a function is returned
 }

## let's see
> infun10 <- outer_fun(10)   ## x = 10
## note that the function returned by outer_fun(10) was assigned to infun10

> x  ## but x is not present in the global environment/command line window
Error: object 'x' not found

> infun10(5) ## but infun10 somehow 'knows' about x
[1] 50 ## = 10*5

> rm(outer_fun) ## what if we remove outer_fun completely
> outer_fun
Error: object 'outer_fun' not found  ## yup, it's gone

> infun10(2)
[1] 20  ## But infun10 still knows about x

## this is because x is in the **environment** of infun10
> environment(infun10)$x
[1] 10
## and it can even be changed there:
> environment(infun10)$x <- 3
> infun10(2)
[1] 6 ## now it's 3*2 instead of 10*2

So there's obviously a lot going on under the hood here. If you decide that
you want (or need) to get into at least some of this, please note that this
list cannot serve as a tutorial service. We can help, as you know, but we
expect that you will put in the effort required. As I said, there are a ton
of (good) tutorials out there to choose from.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jan 12, 2022 at 12:07 PM Kai Yang via R-help <r-help at r-project.org>
wrote:

> Hi all,
> I created a function in R. It will be generate a table "temp". I can view
> it in R studio, but I cannot find it on the top right window in R studio.
> Can someone tell me how to find it in there? Same thing for f_table.
> Thank you,
> Kai
> library(tidyverse)
>
> f1 <- function(indata , subgrp1){
>   subgrp1 <- enquo(subgrp1)
>   indata0 <- indata
>   temp    <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>     group_by(!!subgrp1) %>%
>     mutate(numbering =row_number(), max=max(numbering))
>   view(temp)
>   f_table <- table(temp$Species)
>   view(f_table)
> }
>
> f1(iris, Species)
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @v|gro@@ @end|ng |rom ver|zon@net  Thu Jan 13 04:17:55 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Thu, 13 Jan 2022 03:17:55 +0000 (UTC)
Subject: [R] how to find the table in R studio
In-Reply-To: <1058985502.868240.1642018042467@mail.yahoo.com>
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
 <1058985502.868240.1642018042467@mail.yahoo.com>
Message-ID: <1067258532.2261467.1642043875044@mail.yahoo.com>

The table you are looking for indeed does not any longer exists. Kai.
Anything created within a function generally disappears as soon as it exits as the only pointer to it goes away and garbage collection can eventuially reuse the space.
The code you wrote should end with:

MyNamedVariable <-?f1(iris, Species)
It will then have a pointer to it and will show up as that name in the RSTUDIO window for Environment when it is the selected function of the upper right.?
By just writing this:

f1(iris, Species)

What you effectively did at the console level is this becue of automatic printing:

print(f1(iris, Species))

As soon as the printing is done, nothing is pointing at the memory location in the current environment or any environment.
There are, of course, ways for your f1() function to create a variable and save it in another environment such as global or parent under a designated name, but the easiest thing to do is to save teh result as shown as the return value of the function. Again, note, that if the place the function is called from is another function, any variables within it will disappear again when it exists, ...
Not suggesting you use it, but there is an assignment operator that assigns outside the immediate function using <<-
But back to your code, tell us more about the function view() you call several times in f1() and I assume you used it in debugging and it is not to be kept. On my machine the normal function is capitalized as View() so I am guessing you are getting the tidyverse version with view() in all lower case. It does return the object viewed and as that is the last line, it will return the object from the function. But probably not the best or most obvious way to return something as using the more standard View() function returns NULL.


-----Original Message-----
From: Kai Yang via R-help <r-help at r-project.org>
To: R-help Mailing List <r-help at r-project.org>
Sent: Wed, Jan 12, 2022 3:07 pm
Subject: [R] how to find the table in R studio

Hi all,
I created a function in R. It will be generate a table "temp". I can view it in R studio, but I cannot find it on the top right window in R studio. Can someone tell me how to find it in there? Same thing for f_table.?
Thank you,
Kai
library(tidyverse)

f1 <- function(indata , subgrp1){
? subgrp1 <- enquo(subgrp1)
? indata0 <- indata
? temp? ? <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%?
? ? group_by(!!subgrp1) %>%
? ? mutate(numbering =row_number(), max=max(numbering))
? view(temp)
? f_table <- table(temp$Species)
? view(f_table)
}

f1(iris, Species)


??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @v|gro@@ @end|ng |rom ver|zon@net  Thu Jan 13 04:27:20 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Thu, 13 Jan 2022 03:27:20 +0000 (UTC)
Subject: [R] Time for a companion mailing list for R packages?
In-Reply-To: <d3662f4d-ab69-24b7-cc03-8a18e692f522@gmail.com>
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
 <1058985502.868240.1642018042467@mail.yahoo.com>
 <d3662f4d-ab69-24b7-cc03-8a18e692f522@gmail.com>
Message-ID: <1792243350.2724951.1642044440134@mail.yahoo.com>

Respectfully, this forum gets lots of questions that include non-base R components and especially packages in the tidyverse. Like it or not, the extended R language is far more useful and interesting for many people and especially those who do not wish to constantly reinvent the wheel.
And repeatedly, we get people reminding (and sometimes chiding) others for daring to post questions or supply answers on what they see as a pure R list. They have a point.
Yes, there are other places (many not being mailing lists like this one) where we can direct the questions but why can't there be an official mailing list alongside this one specifically focused on helping or just discussing R issues related partially to the use of packages. I don't mean for people making a package to share, just users who may be searching for an appropriate package or using a common package, especially the ones in the tidyverse that are NOT GOING AWAY just because some purists ...
I prefer a diverse set of ways to do things and base R is NOT enough for me, nor frankly is R with all packages included as I find other languages suit my needs at times for doing various things. If this group is for purists, fine. Can we have another for the rest of us? Live and let live.


-----Original Message-----
From: Duncan Murdoch <murdoch.duncan at gmail.com>
To: Kai Yang <yangkai9999 at yahoo.com>; R-help Mailing List <r-help at r-project.org>
Sent: Wed, Jan 12, 2022 3:22 pm
Subject: Re: [R] how to find the table in R studio

On 12/01/2022 3:07 p.m., Kai Yang via R-help wrote:
> Hi all,
> I created a function in R. It will be generate a table "temp". I can view it in R studio, but I cannot find it on the top right window in R studio. Can someone tell me how to find it in there? Same thing for f_table.
> Thank you,
> Kai
> library(tidyverse)
> 
> f1 <- function(indata , subgrp1){
>? ? subgrp1 <- enquo(subgrp1)
>? ? indata0 <- indata
>? ? temp? ? <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>? ? ? group_by(!!subgrp1) %>%
>? ? ? mutate(numbering =row_number(), max=max(numbering))
>? ? view(temp)
>? ? f_table <- table(temp$Species)
>? ? view(f_table)
> }
> 
> f1(iris, Species)
> 

Someone is sure to point out that this isn't an RStudio support list, 
but your issue is with R, not with RStudio.? You created the table in 
f1, but you never returned it.? The variable f_table is local to the 
function.? You'd need the following code to do what you want:

f1 <- function(indata , subgrp1){
? subgrp1 <- enquo(subgrp1)
? indata0 <- indata
? temp? ? <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
? ? group_by(!!subgrp1) %>%
? ? mutate(numbering =row_number(), max=max(numbering))
? view(temp)
? f_table <- table(temp$Species)
? view(f_table)
? f_table
}

f_table <- f1(iris, Species)

It's not so easy to also make temp available.? You can do it with 
assign(), but I think you'd be better off splitting f1 into two 
functions, one to create temp, and one to create f_table.

Duncan Murdoch

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Jan 13 05:24:01 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 12 Jan 2022 20:24:01 -0800
Subject: [R] Time for a companion mailing list for R packages?
In-Reply-To: <1792243350.2724951.1642044440134@mail.yahoo.com>
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
 <1058985502.868240.1642018042467@mail.yahoo.com>
 <d3662f4d-ab69-24b7-cc03-8a18e692f522@gmail.com>
 <1792243350.2724951.1642044440134@mail.yahoo.com>
Message-ID: <BD7A8D26-C736-4BBA-80BB-4891CE8758BC@dcn.davis.ca.us>

TL;DR The people responsible for tidyverse don't think much of mailing lists.

IANAMLA (I am not mailing list admin) and I know some people get kind of heated about these things, but my take is that this list _is_ about R so to be on topic the question needs to be about R and how to get things done in R. Since contributed packages are almost by definition creating capabilities linked with specific problem domains or domain-specific-languages (DSLs), and there are thousands of these, it isn't practical to support questions framed within those DSLs here. It seems perfectly legitimate IMHO to mention such packages here, as long as the question does not hinge on that package, and even to offer small solutions to posed R problems using such packages. Others may disagree with my perspective on this. Unfortunately all of this this subtlety is usually lost upon newbies, much to the detriment of this list's reputation.

The responsibility to setup and manage support for contributed packages belongs to the package maintainer. In the case of tidyverse, the general opinion of those people seems to be that web forums avoid the "only unformatted info can be shared" nature of traditional mailing lists, so mailing lists have AFAIK not been built or tended.

Unfortunately, they also try to "allow all topics" as much as possible in those forums to minimize the appearance of unfriendliness to beginners, but my impression is that this leads to such a wide range of topics that many posts don't get answered. I have certainly found it to be just too much quantity to sift through, and I really am selective about which portions of the tidyverse I work with anyway, so I don't hang out there much at all.

On January 12, 2022 7:27:20 PM PST, Avi Gross via R-help <r-help at r-project.org> wrote:
>Respectfully, this forum gets lots of questions that include non-base R components and especially packages in the tidyverse. Like it or not, the extended R language is far more useful and interesting for many people and especially those who do not wish to constantly reinvent the wheel.
>And repeatedly, we get people reminding (and sometimes chiding) others for daring to post questions or supply answers on what they see as a pure R list. They have a point.
>Yes, there are other places (many not being mailing lists like this one) where we can direct the questions but why can't there be an official mailing list alongside this one specifically focused on helping or just discussing R issues related partially to the use of packages. I don't mean for people making a package to share, just users who may be searching for an appropriate package or using a common package, especially the ones in the tidyverse that are NOT GOING AWAY just because some purists ...
>I prefer a diverse set of ways to do things and base R is NOT enough for me, nor frankly is R with all packages included as I find other languages suit my needs at times for doing various things. If this group is for purists, fine. Can we have another for the rest of us? Live and let live.
>
>
>-----Original Message-----
>From: Duncan Murdoch <murdoch.duncan at gmail.com>
>To: Kai Yang <yangkai9999 at yahoo.com>; R-help Mailing List <r-help at r-project.org>
>Sent: Wed, Jan 12, 2022 3:22 pm
>Subject: Re: [R] how to find the table in R studio
>
>On 12/01/2022 3:07 p.m., Kai Yang via R-help wrote:
>> Hi all,
>> I created a function in R. It will be generate a table "temp". I can view it in R studio, but I cannot find it on the top right window in R studio. Can someone tell me how to find it in there? Same thing for f_table.
>> Thank you,
>> Kai
>> library(tidyverse)
>> 
>> f1 <- function(indata , subgrp1){
>>? ? subgrp1 <- enquo(subgrp1)
>>? ? indata0 <- indata
>>? ? temp? ? <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>>? ? ? group_by(!!subgrp1) %>%
>>? ? ? mutate(numbering =row_number(), max=max(numbering))
>>? ? view(temp)
>>? ? f_table <- table(temp$Species)
>>? ? view(f_table)
>> }
>> 
>> f1(iris, Species)
>> 
>
>Someone is sure to point out that this isn't an RStudio support list, 
>but your issue is with R, not with RStudio.? You created the table in 
>f1, but you never returned it.? The variable f_table is local to the 
>function.? You'd need the following code to do what you want:
>
>f1 <- function(indata , subgrp1){
>? subgrp1 <- enquo(subgrp1)
>? indata0 <- indata
>? temp? ? <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>? ? group_by(!!subgrp1) %>%
>? ? mutate(numbering =row_number(), max=max(numbering))
>? view(temp)
>? f_table <- table(temp$Species)
>? view(f_table)
>? f_table
>}
>
>f_table <- f1(iris, Species)
>
>It's not so easy to also make temp available.? You can do it with 
>assign(), but I think you'd be better off splitting f1 into two 
>functions, one to create temp, and one to create f_table.
>
>Duncan Murdoch
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From kev|n@thorpe @end|ng |rom utoronto@c@  Thu Jan 13 13:44:49 2022
From: kev|n@thorpe @end|ng |rom utoronto@c@ (Kevin Thorpe)
Date: Thu, 13 Jan 2022 12:44:49 +0000
Subject: [R] 
 (Off-Topic) Time for a companion mailing list for R packages?
In-Reply-To: <BD7A8D26-C736-4BBA-80BB-4891CE8758BC@dcn.davis.ca.us>
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
 <1058985502.868240.1642018042467@mail.yahoo.com>
 <d3662f4d-ab69-24b7-cc03-8a18e692f522@gmail.com>
 <1792243350.2724951.1642044440134@mail.yahoo.com>
 <BD7A8D26-C736-4BBA-80BB-4891CE8758BC@dcn.davis.ca.us>
Message-ID: <05566482-E9D1-43B6-8A77-4F41F5C422DC@utoronto.ca>

This is an interesting issue and something I have been thinking about raising with my fellow volunteer moderators.

I honestly don?t know what the best solution is. Personally, I would loathe having to check multiple web-forums/mailing lists to find an answer. New users often do not appreciate the subtleties (i.e. RStudio is not R) and will continue to post here. The frequent reply to questions outside base R that inform them they are off-topic could come across as unfriendly. That could have the side effect of making the community appear elitist. Folks are also often referred to package maintainers but not all maintainers are equally responsive to queries about their packages. In summary, it can be very hard for novice users to get the help they need.

I appreciate the desire of many to keep the focus of this list narrow, yet despite the narrow mandate there are many readers who can answer non-base R questions, which is probably one of the reasons we see the questions. I wonder if there would be an appetite to create a new list, R-package-help, that has a broad mandate (as suggested by Avi). Naturally there is no guarantee that specific questions about some esoteric package will be answered, but that?s a different problem. On the other hand, why not expand the mandate of R-help rather than going to the trouble of creating a new list? Like I said, I don?t know.

Thanks for raising the issue.

Kevin


> On Jan 12, 2022, at 11:24 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> 
> TL;DR The people responsible for tidyverse don't think much of mailing lists.
> 
> IANAMLA (I am not mailing list admin) and I know some people get kind of heated about these things, but my take is that this list _is_ about R so to be on topic the question needs to be about R and how to get things done in R. Since contributed packages are almost by definition creating capabilities linked with specific problem domains or domain-specific-languages (DSLs), and there are thousands of these, it isn't practical to support questions framed within those DSLs here. It seems perfectly legitimate IMHO to mention such packages here, as long as the question does not hinge on that package, and even to offer small solutions to posed R problems using such packages. Others may disagree with my perspective on this. Unfortunately all of this this subtlety is usually lost upon newbies, much to the detriment of this list's reputation.
> 
> The responsibility to setup and manage support for contributed packages belongs to the package maintainer. In the case of tidyverse, the general opinion of those people seems to be that web forums avoid the "only unformatted info can be shared" nature of traditional mailing lists, so mailing lists have AFAIK not been built or tended.
> 
> Unfortunately, they also try to "allow all topics" as much as possible in those forums to minimize the appearance of unfriendliness to beginners, but my impression is that this leads to such a wide range of topics that many posts don't get answered. I have certainly found it to be just too much quantity to sift through, and I really am selective about which portions of the tidyverse I work with anyway, so I don't hang out there much at all.
> 
> On January 12, 2022 7:27:20 PM PST, Avi Gross via R-help <r-help at r-project.org> wrote:
>> Respectfully, this forum gets lots of questions that include non-base R components and especially packages in the tidyverse. Like it or not, the extended R language is far more useful and interesting for many people and especially those who do not wish to constantly reinvent the wheel.
>> And repeatedly, we get people reminding (and sometimes chiding) others for daring to post questions or supply answers on what they see as a pure R list. They have a point.
>> Yes, there are other places (many not being mailing lists like this one) where we can direct the questions but why can't there be an official mailing list alongside this one specifically focused on helping or just discussing R issues related partially to the use of packages. I don't mean for people making a package to share, just users who may be searching for an appropriate package or using a common package, especially the ones in the tidyverse that are NOT GOING AWAY just because some purists ...
>> I prefer a diverse set of ways to do things and base R is NOT enough for me, nor frankly is R with all packages included as I find other languages suit my needs at times for doing various things. If this group is for purists, fine. Can we have another for the rest of us? Live and let live.
>> 
>> 
>> -----Original Message-----
>> From: Duncan Murdoch <murdoch.duncan at gmail.com>
>> To: Kai Yang <yangkai9999 at yahoo.com>; R-help Mailing List <r-help at r-project.org>
>> Sent: Wed, Jan 12, 2022 3:22 pm
>> Subject: Re: [R] how to find the table in R studio
>> 
>> On 12/01/2022 3:07 p.m., Kai Yang via R-help wrote:
>>> Hi all,
>>> I created a function in R. It will be generate a table "temp". I can view it in R studio, but I cannot find it on the top right window in R studio. Can someone tell me how to find it in there? Same thing for f_table.
>>> Thank you,
>>> Kai
>>> library(tidyverse)
>>> 
>>> f1 <- function(indata , subgrp1){
>>>     subgrp1 <- enquo(subgrp1)
>>>     indata0 <- indata
>>>     temp    <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>>>       group_by(!!subgrp1) %>%
>>>       mutate(numbering =row_number(), max=max(numbering))
>>>     view(temp)
>>>     f_table <- table(temp$Species)
>>>     view(f_table)
>>> }
>>> 
>>> f1(iris, Species)
>>> 
>> 
>> Someone is sure to point out that this isn't an RStudio support list, 
>> but your issue is with R, not with RStudio.  You created the table in 
>> f1, but you never returned it.  The variable f_table is local to the 
>> function.  You'd need the following code to do what you want:
>> 
>> f1 <- function(indata , subgrp1){
>>   subgrp1 <- enquo(subgrp1)
>>   indata0 <- indata
>>   temp    <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>>     group_by(!!subgrp1) %>%
>>     mutate(numbering =row_number(), max=max(numbering))
>>   view(temp)
>>   f_table <- table(temp$Species)
>>   view(f_table)
>>   f_table
>> }
>> 
>> f_table <- f1(iris, Species)
>> 
>> It's not so easy to also make temp available.  You can do it with 
>> assign(), but I think you'd be better off splitting f1 into two 
>> functions, one to create temp, and one to create f_table.
>> 
>> Duncan Murdoch
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> -- 
> Sent from my phone. Please excuse my brevity.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Kevin E. Thorpe
Head of Biostatistics,  Applied Health Research Centre (AHRC)
Li Ka Shing Knowledge Institute of St. Michael?s Hospital
Assistant Professor, Dalla Lana School of Public Health
University of Toronto
email: kevin.thorpe at utoronto.ca  Tel: 416.864.5776  Fax: 416.864.3016


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jan 13 14:25:26 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 13 Jan 2022 08:25:26 -0500
Subject: [R] 
 (Off-Topic) Time for a companion mailing list for R packages?
In-Reply-To: <05566482-E9D1-43B6-8A77-4F41F5C422DC@utoronto.ca>
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
 <1058985502.868240.1642018042467@mail.yahoo.com>
 <d3662f4d-ab69-24b7-cc03-8a18e692f522@gmail.com>
 <1792243350.2724951.1642044440134@mail.yahoo.com>
 <BD7A8D26-C736-4BBA-80BB-4891CE8758BC@dcn.davis.ca.us>
 <05566482-E9D1-43B6-8A77-4F41F5C422DC@utoronto.ca>
Message-ID: <bba68c9c-99fc-d4bc-4bdb-951205d8b754@gmail.com>

Currently help for contributed packages is available on StackOverflow, 
package-specific web sites and Github.

I rarely read package-specific (e.g. RStudio) web pages, and have only 
posted questions there a few times, with generally unsatisfactory results.

Most package developers (including tidyverse ones) respond very 
helpfully on Github, but to post there you need to already have a very 
good idea of where the problem lies.  It's not an appropriate place for 
beginners to ask for help.

That leaves StackOverflow.  It gets way too much traffic from people who 
don't pose their questions well, but it has the advantage over a mailing 
list that questions can be edited and improved (or deleted) after the 
fact.  We should be sending beginners there.  And if you want to read 
questions and help people, apply N95 filters to the questions:  e.g. I 
mainly read questions that have been unanswered and undeleted for an 
hour or more.

Duncan Murdoch

On 13/01/2022 7:44 a.m., Kevin Thorpe wrote:
> This is an interesting issue and something I have been thinking about raising with my fellow volunteer moderators.
> 
> I honestly don?t know what the best solution is. Personally, I would loathe having to check multiple web-forums/mailing lists to find an answer. New users often do not appreciate the subtleties (i.e. RStudio is not R) and will continue to post here. The frequent reply to questions outside base R that inform them they are off-topic could come across as unfriendly. That could have the side effect of making the community appear elitist. Folks are also often referred to package maintainers but not all maintainers are equally responsive to queries about their packages. In summary, it can be very hard for novice users to get the help they need.
> 
> I appreciate the desire of many to keep the focus of this list narrow, yet despite the narrow mandate there are many readers who can answer non-base R questions, which is probably one of the reasons we see the questions. I wonder if there would be an appetite to create a new list, R-package-help, that has a broad mandate (as suggested by Avi). Naturally there is no guarantee that specific questions about some esoteric package will be answered, but that?s a different problem. On the other hand, why not expand the mandate of R-help rather than going to the trouble of creating a new list? Like I said, I don?t know.
> 
> Thanks for raising the issue.
> 
> Kevin
> 
> 
>> On Jan 12, 2022, at 11:24 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>>
>> TL;DR The people responsible for tidyverse don't think much of mailing lists.
>>
>> IANAMLA (I am not mailing list admin) and I know some people get kind of heated about these things, but my take is that this list _is_ about R so to be on topic the question needs to be about R and how to get things done in R. Since contributed packages are almost by definition creating capabilities linked with specific problem domains or domain-specific-languages (DSLs), and there are thousands of these, it isn't practical to support questions framed within those DSLs here. It seems perfectly legitimate IMHO to mention such packages here, as long as the question does not hinge on that package, and even to offer small solutions to posed R problems using such packages. Others may disagree with my perspective on this. Unfortunately all of this this subtlety is usually lost upon newbies, much to the detriment of this list's reputation.
>>
>> The responsibility to setup and manage support for contributed packages belongs to the package maintainer. In the case of tidyverse, the general opinion of those people seems to be that web forums avoid the "only unformatted info can be shared" nature of traditional mailing lists, so mailing lists have AFAIK not been built or tended.
>>
>> Unfortunately, they also try to "allow all topics" as much as possible in those forums to minimize the appearance of unfriendliness to beginners, but my impression is that this leads to such a wide range of topics that many posts don't get answered. I have certainly found it to be just too much quantity to sift through, and I really am selective about which portions of the tidyverse I work with anyway, so I don't hang out there much at all.
>>
>> On January 12, 2022 7:27:20 PM PST, Avi Gross via R-help <r-help at r-project.org> wrote:
>>> Respectfully, this forum gets lots of questions that include non-base R components and especially packages in the tidyverse. Like it or not, the extended R language is far more useful and interesting for many people and especially those who do not wish to constantly reinvent the wheel.
>>> And repeatedly, we get people reminding (and sometimes chiding) others for daring to post questions or supply answers on what they see as a pure R list. They have a point.
>>> Yes, there are other places (many not being mailing lists like this one) where we can direct the questions but why can't there be an official mailing list alongside this one specifically focused on helping or just discussing R issues related partially to the use of packages. I don't mean for people making a package to share, just users who may be searching for an appropriate package or using a common package, especially the ones in the tidyverse that are NOT GOING AWAY just because some purists ...
>>> I prefer a diverse set of ways to do things and base R is NOT enough for me, nor frankly is R with all packages included as I find other languages suit my needs at times for doing various things. If this group is for purists, fine. Can we have another for the rest of us? Live and let live.
>>>
>>>
>>> -----Original Message-----
>>> From: Duncan Murdoch <murdoch.duncan at gmail.com>
>>> To: Kai Yang <yangkai9999 at yahoo.com>; R-help Mailing List <r-help at r-project.org>
>>> Sent: Wed, Jan 12, 2022 3:22 pm
>>> Subject: Re: [R] how to find the table in R studio
>>>
>>> On 12/01/2022 3:07 p.m., Kai Yang via R-help wrote:
>>>> Hi all,
>>>> I created a function in R. It will be generate a table "temp". I can view it in R studio, but I cannot find it on the top right window in R studio. Can someone tell me how to find it in there? Same thing for f_table.
>>>> Thank you,
>>>> Kai
>>>> library(tidyverse)
>>>>
>>>> f1 <- function(indata , subgrp1){
>>>>      subgrp1 <- enquo(subgrp1)
>>>>      indata0 <- indata
>>>>      temp    <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>>>>        group_by(!!subgrp1) %>%
>>>>        mutate(numbering =row_number(), max=max(numbering))
>>>>      view(temp)
>>>>      f_table <- table(temp$Species)
>>>>      view(f_table)
>>>> }
>>>>
>>>> f1(iris, Species)
>>>>
>>>
>>> Someone is sure to point out that this isn't an RStudio support list,
>>> but your issue is with R, not with RStudio.  You created the table in
>>> f1, but you never returned it.  The variable f_table is local to the
>>> function.  You'd need the following code to do what you want:
>>>
>>> f1 <- function(indata , subgrp1){
>>>    subgrp1 <- enquo(subgrp1)
>>>    indata0 <- indata
>>>    temp    <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>>>      group_by(!!subgrp1) %>%
>>>      mutate(numbering =row_number(), max=max(numbering))
>>>    view(temp)
>>>    f_table <- table(temp$Species)
>>>    view(f_table)
>>>    f_table
>>> }
>>>
>>> f_table <- f1(iris, Species)
>>>
>>> It's not so easy to also make temp available.  You can do it with
>>> assign(), but I think you'd be better off splitting f1 into two
>>> functions, one to create temp, and one to create f_table.
>>>
>>> Duncan Murdoch
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> 	[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> -- 
>> Sent from my phone. Please excuse my brevity.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From petr@p|k@| @end|ng |rom prechez@@cz  Thu Jan 13 14:28:51 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Thu, 13 Jan 2022 13:28:51 +0000
Subject: [R] 
 (Off-Topic) Time for a companion mailing list for R packages?
In-Reply-To: <05566482-E9D1-43B6-8A77-4F41F5C422DC@utoronto.ca>
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
 <1058985502.868240.1642018042467@mail.yahoo.com>
 <d3662f4d-ab69-24b7-cc03-8a18e692f522@gmail.com>
 <1792243350.2724951.1642044440134@mail.yahoo.com>
 <BD7A8D26-C736-4BBA-80BB-4891CE8758BC@dcn.davis.ca.us>
 <05566482-E9D1-43B6-8A77-4F41F5C422DC@utoronto.ca>
Message-ID: <7deeb636d1234975b648c82b4daf3504@SRVEXCHCM1301.precheza.cz>

Hallo all

I do not consider answers here unresponsive or unfriendly. Most answers point to the way how to procced and solve the problems. Although RTFM is sometimes the best what anybody can do (and I did it myself around 1997 when I started with R). Hardly anybody here is flamed when he/she asks simple questions.

To create some other list where questions about broad range of available packages should be answered is, IMHO, wrong way forward. You need to have some critical mass of answering people in list to be worth to attend.

You state
>it can be very hard for novice users to get the help they need.<
but can we prove it? How many unanswered questions are in a year? How many responses are "this is off topic" as the only response in thread? How many responses are "contact maintainer" as the only response in thread? An most importantly are these numbers increasing?

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Kevin Thorpe
> Sent: Thursday, January 13, 2022 1:45 PM
> To: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> Cc: R Help Mailing List <r-help at r-project.org>
> Subject: Re: [R] (Off-Topic) Time for a companion mailing list for R packages?
> 
> This is an interesting issue and something I have been thinking about raising with
> my fellow volunteer moderators.
> 
> I honestly don?t know what the best solution is. Personally, I would loathe
> having to check multiple web-forums/mailing lists to find an answer. New users
> often do not appreciate the subtleties (i.e. RStudio is not R) and will continue to
> post here. The frequent reply to questions outside base R that inform them they
> are off-topic could come across as unfriendly. That could have the side effect of
> making the community appear elitist. Folks are also often referred to package
> maintainers but not all maintainers are equally responsive to queries about their
> packages. In summary, it can be very hard for novice users to get the help they
> need.
> 
> I appreciate the desire of many to keep the focus of this list narrow, yet despite
> the narrow mandate there are many readers who can answer non-base R
> questions, which is probably one of the reasons we see the questions. I wonder
> if there would be an appetite to create a new list, R-package-help, that has a
> broad mandate (as suggested by Avi). Naturally there is no guarantee that
> specific questions about some esoteric package will be answered, but that?s a
> different problem. On the other hand, why not expand the mandate of R-help
> rather than going to the trouble of creating a new list? Like I said, I don?t know.
> 
> Thanks for raising the issue.
> 
> Kevin
> 
> 
> > On Jan 12, 2022, at 11:24 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> wrote:
> >
> > TL;DR The people responsible for tidyverse don't think much of mailing lists.
> >
> > IANAMLA (I am not mailing list admin) and I know some people get kind of
> heated about these things, but my take is that this list _is_ about R so to be on
> topic the question needs to be about R and how to get things done in R. Since
> contributed packages are almost by definition creating capabilities linked with
> specific problem domains or domain-specific-languages (DSLs), and there are
> thousands of these, it isn't practical to support questions framed within those
> DSLs here. It seems perfectly legitimate IMHO to mention such packages here, as
> long as the question does not hinge on that package, and even to offer small
> solutions to posed R problems using such packages. Others may disagree with
> my perspective on this. Unfortunately all of this this subtlety is usually lost upon
> newbies, much to the detriment of this list's reputation.
> >
> > The responsibility to setup and manage support for contributed packages
> belongs to the package maintainer. In the case of tidyverse, the general opinion
> of those people seems to be that web forums avoid the "only unformatted info
> can be shared" nature of traditional mailing lists, so mailing lists have AFAIK not
> been built or tended.
> >
> > Unfortunately, they also try to "allow all topics" as much as possible in those
> forums to minimize the appearance of unfriendliness to beginners, but my
> impression is that this leads to such a wide range of topics that many posts don't
> get answered. I have certainly found it to be just too much quantity to sift
> through, and I really am selective about which portions of the tidyverse I work
> with anyway, so I don't hang out there much at all.
> >
> > On January 12, 2022 7:27:20 PM PST, Avi Gross via R-help <r-help at r-
> project.org> wrote:
> >> Respectfully, this forum gets lots of questions that include non-base R
> components and especially packages in the tidyverse. Like it or not, the
> extended R language is far more useful and interesting for many people and
> especially those who do not wish to constantly reinvent the wheel.
> >> And repeatedly, we get people reminding (and sometimes chiding) others for
> daring to post questions or supply answers on what they see as a pure R list.
> They have a point.
> >> Yes, there are other places (many not being mailing lists like this one) where
> we can direct the questions but why can't there be an official mailing list
> alongside this one specifically focused on helping or just discussing R issues
> related partially to the use of packages. I don't mean for people making a
> package to share, just users who may be searching for an appropriate package
> or using a common package, especially the ones in the tidyverse that are NOT
> GOING AWAY just because some purists ...
> >> I prefer a diverse set of ways to do things and base R is NOT enough for me,
> nor frankly is R with all packages included as I find other languages suit my
> needs at times for doing various things. If this group is for purists, fine. Can we
> have another for the rest of us? Live and let live.
> >>
> >>
> >> -----Original Message-----
> >> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> >> To: Kai Yang <yangkai9999 at yahoo.com>; R-help Mailing List
> >> <r-help at r-project.org>
> >> Sent: Wed, Jan 12, 2022 3:22 pm
> >> Subject: Re: [R] how to find the table in R studio
> >>
> >> On 12/01/2022 3:07 p.m., Kai Yang via R-help wrote:
> >>> Hi all,
> >>> I created a function in R. It will be generate a table "temp". I can view it in R
> studio, but I cannot find it on the top right window in R studio. Can someone tell
> me how to find it in there? Same thing for f_table.
> >>> Thank you,
> >>> Kai
> >>> library(tidyverse)
> >>>
> >>> f1 <- function(indata , subgrp1){
> >>>     subgrp1 <- enquo(subgrp1)
> >>>     indata0 <- indata
> >>>     temp    <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
> >>>       group_by(!!subgrp1) %>%
> >>>       mutate(numbering =row_number(), max=max(numbering))
> >>>     view(temp)
> >>>     f_table <- table(temp$Species)
> >>>     view(f_table)
> >>> }
> >>>
> >>> f1(iris, Species)
> >>>
> >>
> >> Someone is sure to point out that this isn't an RStudio support list,
> >> but your issue is with R, not with RStudio.  You created the table in
> >> f1, but you never returned it.  The variable f_table is local to the
> >> function.  You'd need the following code to do what you want:
> >>
> >> f1 <- function(indata , subgrp1){
> >>   subgrp1 <- enquo(subgrp1)
> >>   indata0 <- indata
> >>   temp    <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
> >>     group_by(!!subgrp1) %>%
> >>     mutate(numbering =row_number(), max=max(numbering))
> >>   view(temp)
> >>   f_table <- table(temp$Species)
> >>   view(f_table)
> >>   f_table
> >> }
> >>
> >> f_table <- f1(iris, Species)
> >>
> >> It's not so easy to also make temp available.  You can do it with
> >> assign(), but I think you'd be better off splitting f1 into two
> >> functions, one to create temp, and one to create f_table.
> >>
> >> Duncan Murdoch
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >> 	[[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >
> > --
> > Sent from my phone. Please excuse my brevity.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> 
> --
> Kevin E. Thorpe
> Head of Biostatistics,  Applied Health Research Centre (AHRC) Li Ka Shing
> Knowledge Institute of St. Michael?s Hospital Assistant Professor, Dalla Lana
> School of Public Health University of Toronto
> email: kevin.thorpe at utoronto.ca  Tel: 416.864.5776  Fax: 416.864.3016
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From @erv|ce @end|ng |rom @hd@w@on@com  Thu Jan 13 14:31:01 2022
From: @erv|ce @end|ng |rom @hd@w@on@com (Stephen H. Dawson, DSL)
Date: Thu, 13 Jan 2022 08:31:01 -0500
Subject: [R] 
 (Off-Topic) Time for a companion mailing list for R packages?
In-Reply-To: <bba68c9c-99fc-d4bc-4bdb-951205d8b754@gmail.com>
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
 <1058985502.868240.1642018042467@mail.yahoo.com>
 <d3662f4d-ab69-24b7-cc03-8a18e692f522@gmail.com>
 <1792243350.2724951.1642044440134@mail.yahoo.com>
 <BD7A8D26-C736-4BBA-80BB-4891CE8758BC@dcn.davis.ca.us>
 <05566482-E9D1-43B6-8A77-4F41F5C422DC@utoronto.ca>
 <bba68c9c-99fc-d4bc-4bdb-951205d8b754@gmail.com>
Message-ID: <5327ff5d-a47e-e972-2b9f-6037f68f0491@shdawson.com>

Great discussion thread.

The problem is not a mailing list. The problem is the inability to 
segment questions. Segment, by keyword or sub-directory (loose word) or 
any other compartmentalization.

QUESTION
What other technology options are available here beyond a mailing list?


*Stephen Dawson, DSL*
/Executive Strategy Consultant/
Business & Technology
+1 (865) 804-3454
http://www.shdawson.com <http://www.shdawson.com>


On 1/13/22 8:25 AM, Duncan Murdoch wrote:
> Currently help for contributed packages is available on StackOverflow, 
> package-specific web sites and Github.
>
> I rarely read package-specific (e.g. RStudio) web pages, and have only 
> posted questions there a few times, with generally unsatisfactory 
> results.
>
> Most package developers (including tidyverse ones) respond very 
> helpfully on Github, but to post there you need to already have a very 
> good idea of where the problem lies.? It's not an appropriate place 
> for beginners to ask for help.
>
> That leaves StackOverflow.? It gets way too much traffic from people 
> who don't pose their questions well, but it has the advantage over a 
> mailing list that questions can be edited and improved (or deleted) 
> after the fact.? We should be sending beginners there.? And if you 
> want to read questions and help people, apply N95 filters to the 
> questions:? e.g. I mainly read questions that have been unanswered and 
> undeleted for an hour or more.
>
> Duncan Murdoch
>
> On 13/01/2022 7:44 a.m., Kevin Thorpe wrote:
>> This is an interesting issue and something I have been thinking about 
>> raising with my fellow volunteer moderators.
>>
>> I honestly don?t know what the best solution is. Personally, I would 
>> loathe having to check multiple web-forums/mailing lists to find an 
>> answer. New users often do not appreciate the subtleties (i.e. 
>> RStudio is not R) and will continue to post here. The frequent reply 
>> to questions outside base R that inform them they are off-topic could 
>> come across as unfriendly. That could have the side effect of making 
>> the community appear elitist. Folks are also often referred to 
>> package maintainers but not all maintainers are equally responsive to 
>> queries about their packages. In summary, it can be very hard for 
>> novice users to get the help they need.
>>
>> I appreciate the desire of many to keep the focus of this list 
>> narrow, yet despite the narrow mandate there are many readers who can 
>> answer non-base R questions, which is probably one of the reasons we 
>> see the questions. I wonder if there would be an appetite to create a 
>> new list, R-package-help, that has a broad mandate (as suggested by 
>> Avi). Naturally there is no guarantee that specific questions about 
>> some esoteric package will be answered, but that?s a different 
>> problem. On the other hand, why not expand the mandate of R-help 
>> rather than going to the trouble of creating a new list? Like I said, 
>> I don?t know.
>>
>> Thanks for raising the issue.
>>
>> Kevin
>>
>>
>>> On Jan 12, 2022, at 11:24 PM, Jeff Newmiller 
>>> <jdnewmil at dcn.davis.ca.us> wrote:
>>>
>>> TL;DR The people responsible for tidyverse don't think much of 
>>> mailing lists.
>>>
>>> IANAMLA (I am not mailing list admin) and I know some people get 
>>> kind of heated about these things, but my take is that this list 
>>> _is_ about R so to be on topic the question needs to be about R and 
>>> how to get things done in R. Since contributed packages are almost 
>>> by definition creating capabilities linked with specific problem 
>>> domains or domain-specific-languages (DSLs), and there are thousands 
>>> of these, it isn't practical to support questions framed within 
>>> those DSLs here. It seems perfectly legitimate IMHO to mention such 
>>> packages here, as long as the question does not hinge on that 
>>> package, and even to offer small solutions to posed R problems using 
>>> such packages. Others may disagree with my perspective on this. 
>>> Unfortunately all of this this subtlety is usually lost upon 
>>> newbies, much to the detriment of this list's reputation.
>>>
>>> The responsibility to setup and manage support for contributed 
>>> packages belongs to the package maintainer. In the case of 
>>> tidyverse, the general opinion of those people seems to be that web 
>>> forums avoid the "only unformatted info can be shared" nature of 
>>> traditional mailing lists, so mailing lists have AFAIK not been 
>>> built or tended.
>>>
>>> Unfortunately, they also try to "allow all topics" as much as 
>>> possible in those forums to minimize the appearance of 
>>> unfriendliness to beginners, but my impression is that this leads to 
>>> such a wide range of topics that many posts don't get answered. I 
>>> have certainly found it to be just too much quantity to sift 
>>> through, and I really am selective about which portions of the 
>>> tidyverse I work with anyway, so I don't hang out there much at all.
>>>
>>> On January 12, 2022 7:27:20 PM PST, Avi Gross via R-help 
>>> <r-help at r-project.org> wrote:
>>>> Respectfully, this forum gets lots of questions that include 
>>>> non-base R components and especially packages in the tidyverse. 
>>>> Like it or not, the extended R language is far more useful and 
>>>> interesting for many people and especially those who do not wish to 
>>>> constantly reinvent the wheel.
>>>> And repeatedly, we get people reminding (and sometimes chiding) 
>>>> others for daring to post questions or supply answers on what they 
>>>> see as a pure R list. They have a point.
>>>> Yes, there are other places (many not being mailing lists like this 
>>>> one) where we can direct the questions but why can't there be an 
>>>> official mailing list alongside this one specifically focused on 
>>>> helping or just discussing R issues related partially to the use of 
>>>> packages. I don't mean for people making a package to share, just 
>>>> users who may be searching for an appropriate package or using a 
>>>> common package, especially the ones in the tidyverse that are NOT 
>>>> GOING AWAY just because some purists ...
>>>> I prefer a diverse set of ways to do things and base R is NOT 
>>>> enough for me, nor frankly is R with all packages included as I 
>>>> find other languages suit my needs at times for doing various 
>>>> things. If this group is for purists, fine. Can we have another for 
>>>> the rest of us? Live and let live.
>>>>
>>>>
>>>> -----Original Message-----
>>>> From: Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> To: Kai Yang <yangkai9999 at yahoo.com>; R-help Mailing List 
>>>> <r-help at r-project.org>
>>>> Sent: Wed, Jan 12, 2022 3:22 pm
>>>> Subject: Re: [R] how to find the table in R studio
>>>>
>>>> On 12/01/2022 3:07 p.m., Kai Yang via R-help wrote:
>>>>> Hi all,
>>>>> I created a function in R. It will be generate a table "temp". I 
>>>>> can view it in R studio, but I cannot find it on the top right 
>>>>> window in R studio. Can someone tell me how to find it in there? 
>>>>> Same thing for f_table.
>>>>> Thank you,
>>>>> Kai
>>>>> library(tidyverse)
>>>>>
>>>>> f1 <- function(indata , subgrp1){
>>>>> ???? subgrp1 <- enquo(subgrp1)
>>>>> ???? indata0 <- indata
>>>>> ???? temp??? <- indata0 %>% select(!!subgrp1) %>% 
>>>>> arrange(!!subgrp1) %>%
>>>>> ?????? group_by(!!subgrp1) %>%
>>>>> ?????? mutate(numbering =row_number(), max=max(numbering))
>>>>> ???? view(temp)
>>>>> ???? f_table <- table(temp$Species)
>>>>> ???? view(f_table)
>>>>> }
>>>>>
>>>>> f1(iris, Species)
>>>>>
>>>>
>>>> Someone is sure to point out that this isn't an RStudio support list,
>>>> but your issue is with R, not with RStudio.? You created the table in
>>>> f1, but you never returned it.? The variable f_table is local to the
>>>> function.? You'd need the following code to do what you want:
>>>>
>>>> f1 <- function(indata , subgrp1){
>>>> ?? subgrp1 <- enquo(subgrp1)
>>>> ?? indata0 <- indata
>>>> ?? temp??? <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>>>> ???? group_by(!!subgrp1) %>%
>>>> ???? mutate(numbering =row_number(), max=max(numbering))
>>>> ?? view(temp)
>>>> ?? f_table <- table(temp$Species)
>>>> ?? view(f_table)
>>>> ?? f_table
>>>> }
>>>>
>>>> f_table <- f1(iris, Species)
>>>>
>>>> It's not so easy to also make temp available.? You can do it with
>>>> assign(), but I think you'd be better off splitting f1 into two
>>>> functions, one to create temp, and one to create f_table.
>>>>
>>>> Duncan Murdoch
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide 
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>> ????[[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide 
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> -- 
>>> Sent from my phone. Please excuse my brevity.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From |v@n@c@|@ndr@ @end|ng |rom rgzm@de  Thu Jan 13 15:01:00 2022
From: |v@n@c@|@ndr@ @end|ng |rom rgzm@de (Ivan Calandra)
Date: Thu, 13 Jan 2022 14:01:00 +0000
Subject: [R] 
 (Off-Topic) Time for a companion mailing list for R packages?
In-Reply-To: <bba68c9c-99fc-d4bc-4bdb-951205d8b754@gmail.com>
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
 <1058985502.868240.1642018042467@mail.yahoo.com>
 <d3662f4d-ab69-24b7-cc03-8a18e692f522@gmail.com>
 <1792243350.2724951.1642044440134@mail.yahoo.com>
 <BD7A8D26-C736-4BBA-80BB-4891CE8758BC@dcn.davis.ca.us>
 <05566482-E9D1-43B6-8A77-4F41F5C422DC@utoronto.ca>,
 <bba68c9c-99fc-d4bc-4bdb-951205d8b754@gmail.com>
Message-ID: <a4c0f8b199584b0fa2dba4fc0c515d72@rgzm.de>

This is indeed a very valid question.


IMHO, I still think that these kind of package-specific questions should have a space on the main R mailing list, as long as these questions are about how to do something (coding), and not bug or feature requests. Regarding tidyverse and ggplot2 (and the likes), many answers actually provide ways using different packages (how many times have I seen the same question answered with base R, data.table and dplyr?). This is a great way to learn.

And honestly, how many only use base R? Of course, everything can be done in base R, but packages also belong to R, that's the way it works and why it works so well. Reinventing the wheel is rarely a good solution.


Regarding other help platforms, GitHub is great for the package maintainers that spend time on solving issues, but I myself feel bad to ask there "how to do that" (help is not always good).

I gave up on StackOverflow. Everytime I tried, I either got treated as an idiot by persons who didn't even read my questions (with answers like "do it" to questions like "I don't know how to do it"), or I couldn't comment on my question to make it clearer because I was new (which is ridiculous, it is when you are new that you need to be able to clarify the most!).

If people think it's tough to ask a question on the R mailing list because beginners are not well-handled, they should try SO, it's much worse!

This is to say we should keep the R mailing list!


My $0.02

Ivan

--
Dr. Ivan Calandra
Imaging lab
RGZM - MONREPOS Archaeological Research Centre
Schloss Monrepos
56567 Neuwied, Germany
+49 (0) 2631 9772-243
https://www.researchgate.net/profile/Ivan_Calandra


________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Thursday, January 13, 2022 2:25 PM
To: Kevin Thorpe; Jeff Newmiller
Cc: R Help Mailing List
Subject: Re: [R] (Off-Topic) Time for a companion mailing list for R packages?

Currently help for contributed packages is available on StackOverflow,
package-specific web sites and Github.

I rarely read package-specific (e.g. RStudio) web pages, and have only
posted questions there a few times, with generally unsatisfactory results.

Most package developers (including tidyverse ones) respond very
helpfully on Github, but to post there you need to already have a very
good idea of where the problem lies.  It's not an appropriate place for
beginners to ask for help.

That leaves StackOverflow.  It gets way too much traffic from people who
don't pose their questions well, but it has the advantage over a mailing
list that questions can be edited and improved (or deleted) after the
fact.  We should be sending beginners there.  And if you want to read
questions and help people, apply N95 filters to the questions:  e.g. I
mainly read questions that have been unanswered and undeleted for an
hour or more.

Duncan Murdoch

On 13/01/2022 7:44 a.m., Kevin Thorpe wrote:
> This is an interesting issue and something I have been thinking about raising with my fellow volunteer moderators.
>
> I honestly don?t know what the best solution is. Personally, I would loathe having to check multiple web-forums/mailing lists to find an answer. New users often do not appreciate the subtleties (i.e. RStudio is not R) and will continue to post here. The frequent reply to questions outside base R that inform them they are off-topic could come across as unfriendly. That could have the side effect of making the community appear elitist. Folks are also often referred to package maintainers but not all maintainers are equally responsive to queries about their packages. In summary, it can be very hard for novice users to get the help they need.
>
> I appreciate the desire of many to keep the focus of this list narrow, yet despite the narrow mandate there are many readers who can answer non-base R questions, which is probably one of the reasons we see the questions. I wonder if there would be an appetite to create a new list, R-package-help, that has a broad mandate (as suggested by Avi). Naturally there is no guarantee that specific questions about some esoteric package will be answered, but that?s a different problem. On the other hand, why not expand the mandate of R-help rather than going to the trouble of creating a new list? Like I said, I don?t know.
>
> Thanks for raising the issue.
>
> Kevin
>
>
>> On Jan 12, 2022, at 11:24 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>>
>> TL;DR The people responsible for tidyverse don't think much of mailing lists.
>>
>> IANAMLA (I am not mailing list admin) and I know some people get kind of heated about these things, but my take is that this list _is_ about R so to be on topic the question needs to be about R and how to get things done in R. Since contributed packages are almost by definition creating capabilities linked with specific problem domains or domain-specific-languages (DSLs), and there are thousands of these, it isn't practical to support questions framed within those DSLs here. It seems perfectly legitimate IMHO to mention such packages here, as long as the question does not hinge on that package, and even to offer small solutions to posed R problems using such packages. Others may disagree with my perspective on this. Unfortunately all of this this subtlety is usually lost upon newbies, much to the detriment of this list's reputation.
>>
>> The responsibility to setup and manage support for contributed packages belongs to the package maintainer. In the case of tidyverse, the general opinion of those people seems to be that web forums avoid the "only unformatted info can be shared" nature of traditional mailing lists, so mailing lists have AFAIK not been built or tended.
>>
>> Unfortunately, they also try to "allow all topics" as much as possible in those forums to minimize the appearance of unfriendliness to beginners, but my impression is that this leads to such a wide range of topics that many posts don't get answered. I have certainly found it to be just too much quantity to sift through, and I really am selective about which portions of the tidyverse I work with anyway, so I don't hang out there much at all.
>>
>> On January 12, 2022 7:27:20 PM PST, Avi Gross via R-help <r-help at r-project.org> wrote:
>>> Respectfully, this forum gets lots of questions that include non-base R components and especially packages in the tidyverse. Like it or not, the extended R language is far more useful and interesting for many people and especially those who do not wish to constantly reinvent the wheel.
>>> And repeatedly, we get people reminding (and sometimes chiding) others for daring to post questions or supply answers on what they see as a pure R list. They have a point.
>>> Yes, there are other places (many not being mailing lists like this one) where we can direct the questions but why can't there be an official mailing list alongside this one specifically focused on helping or just discussing R issues related partially to the use of packages. I don't mean for people making a package to share, just users who may be searching for an appropriate package or using a common package, especially the ones in the tidyverse that are NOT GOING AWAY just because some purists ...
>>> I prefer a diverse set of ways to do things and base R is NOT enough for me, nor frankly is R with all packages included as I find other languages suit my needs at times for doing various things. If this group is for purists, fine. Can we have another for the rest of us? Live and let live.
>>>
>>>
>>> -----Original Message-----
>>> From: Duncan Murdoch <murdoch.duncan at gmail.com>
>>> To: Kai Yang <yangkai9999 at yahoo.com>; R-help Mailing List <r-help at r-project.org>
>>> Sent: Wed, Jan 12, 2022 3:22 pm
>>> Subject: Re: [R] how to find the table in R studio
>>>
>>> On 12/01/2022 3:07 p.m., Kai Yang via R-help wrote:
>>>> Hi all,
>>>> I created a function in R. It will be generate a table "temp". I can view it in R studio, but I cannot find it on the top right window in R studio. Can someone tell me how to find it in there? Same thing for f_table.
>>>> Thank you,
>>>> Kai
>>>> library(tidyverse)
>>>>
>>>> f1 <- function(indata , subgrp1){
>>>>      subgrp1 <- enquo(subgrp1)
>>>>      indata0 <- indata
>>>>      temp    <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>>>>        group_by(!!subgrp1) %>%
>>>>        mutate(numbering =row_number(), max=max(numbering))
>>>>      view(temp)
>>>>      f_table <- table(temp$Species)
>>>>      view(f_table)
>>>> }
>>>>
>>>> f1(iris, Species)
>>>>
>>>
>>> Someone is sure to point out that this isn't an RStudio support list,
>>> but your issue is with R, not with RStudio.  You created the table in
>>> f1, but you never returned it.  The variable f_table is local to the
>>> function.  You'd need the following code to do what you want:
>>>
>>> f1 <- function(indata , subgrp1){
>>>    subgrp1 <- enquo(subgrp1)
>>>    indata0 <- indata
>>>    temp    <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>>>      group_by(!!subgrp1) %>%
>>>      mutate(numbering =row_number(), max=max(numbering))
>>>    view(temp)
>>>    f_table <- table(temp$Species)
>>>    view(f_table)
>>>    f_table
>>> }
>>>
>>> f_table <- f1(iris, Species)
>>>
>>> It's not so easy to also make temp available.  You can do it with
>>> assign(), but I think you'd be better off splitting f1 into two
>>> functions, one to create temp, and one to create f_table.
>>>
>>> Duncan Murdoch
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>      [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From pro|jcn@@h @end|ng |rom gm@||@com  Thu Jan 13 15:36:32 2022
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Thu, 13 Jan 2022 09:36:32 -0500
Subject: [R] 
 (Off-Topic) Time for a companion mailing list for R packages?
In-Reply-To: <a4c0f8b199584b0fa2dba4fc0c515d72@rgzm.de>
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
 <1058985502.868240.1642018042467@mail.yahoo.com>
 <d3662f4d-ab69-24b7-cc03-8a18e692f522@gmail.com>
 <1792243350.2724951.1642044440134@mail.yahoo.com>
 <BD7A8D26-C736-4BBA-80BB-4891CE8758BC@dcn.davis.ca.us>
 <05566482-E9D1-43B6-8A77-4F41F5C422DC@utoronto.ca>
 <bba68c9c-99fc-d4bc-4bdb-951205d8b754@gmail.com>
 <a4c0f8b199584b0fa2dba4fc0c515d72@rgzm.de>
Message-ID: <d796505f-0838-5b83-d15e-0da941fe788e@gmail.com>

In 2017 I ran (with Julia Silge and Spencer Graves) a session at UseR! on navigating the R package universe.
See https://github.com/nashjc/Rnavpkg. It was well attended, and we took a few bites out of the whale, but
probably the whale didn't notice.

A possibility has been hinted at by Duncan -- filters on the R-help list. Could filtering be an R package? If
so, does Google Summer of Code https://github.com/rstats-gsoc/gsoc2022/wiki. I already have proposed a project
in a different area, so won't be prepared to lead such an effort, but I'd be willing to kibbitz.

John Nash

On 2022-01-13 9:01 a.m., Ivan Calandra wrote:
> This is indeed a very valid question.
> 
> 
> IMHO, I still think that these kind of package-specific questions should have a space on the main R mailing list, as long as these questions are about how to do something (coding), and not bug or feature requests. Regarding tidyverse and ggplot2 (and the likes), many answers actually provide ways using different packages (how many times have I seen the same question answered with base R, data.table and dplyr?). This is a great way to learn.
> 
> And honestly, how many only use base R? Of course, everything can be done in base R, but packages also belong to R, that's the way it works and why it works so well. Reinventing the wheel is rarely a good solution.
> 
> 
> Regarding other help platforms, GitHub is great for the package maintainers that spend time on solving issues, but I myself feel bad to ask there "how to do that" (help is not always good).
> 
> I gave up on StackOverflow. Everytime I tried, I either got treated as an idiot by persons who didn't even read my questions (with answers like "do it" to questions like "I don't know how to do it"), or I couldn't comment on my question to make it clearer because I was new (which is ridiculous, it is when you are new that you need to be able to clarify the most!).
> 
> If people think it's tough to ask a question on the R mailing list because beginners are not well-handled, they should try SO, it's much worse!
> 
> This is to say we should keep the R mailing list!
> 
> 
> My $0.02
> 
> Ivan
> 
> --
> Dr. Ivan Calandra
> Imaging lab
> RGZM - MONREPOS Archaeological Research Centre
> Schloss Monrepos
> 56567 Neuwied, Germany
> +49 (0) 2631 9772-243
> https://www.researchgate.net/profile/Ivan_Calandra
> 
> 
> ________________________________
> From: R-help <r-help-bounces at r-project.org> on behalf of Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Thursday, January 13, 2022 2:25 PM
> To: Kevin Thorpe; Jeff Newmiller
> Cc: R Help Mailing List
> Subject: Re: [R] (Off-Topic) Time for a companion mailing list for R packages?
> 
> Currently help for contributed packages is available on StackOverflow,
> package-specific web sites and Github.
> 
> I rarely read package-specific (e.g. RStudio) web pages, and have only
> posted questions there a few times, with generally unsatisfactory results.
> 
> Most package developers (including tidyverse ones) respond very
> helpfully on Github, but to post there you need to already have a very
> good idea of where the problem lies.  It's not an appropriate place for
> beginners to ask for help.
> 
> That leaves StackOverflow.  It gets way too much traffic from people who
> don't pose their questions well, but it has the advantage over a mailing
> list that questions can be edited and improved (or deleted) after the
> fact.  We should be sending beginners there.  And if you want to read
> questions and help people, apply N95 filters to the questions:  e.g. I
> mainly read questions that have been unanswered and undeleted for an
> hour or more.
> 
> Duncan Murdoch
> 
> On 13/01/2022 7:44 a.m., Kevin Thorpe wrote:
>> This is an interesting issue and something I have been thinking about raising with my fellow volunteer moderators.
>>
>> I honestly don?t know what the best solution is. Personally, I would loathe having to check multiple web-forums/mailing lists to find an answer. New users often do not appreciate the subtleties (i.e. RStudio is not R) and will continue to post here. The frequent reply to questions outside base R that inform them they are off-topic could come across as unfriendly. That could have the side effect of making the community appear elitist. Folks are also often referred to package maintainers but not all maintainers are equally responsive to queries about their packages. In summary, it can be very hard for novice users to get the help they need.
>>
>> I appreciate the desire of many to keep the focus of this list narrow, yet despite the narrow mandate there are many readers who can answer non-base R questions, which is probably one of the reasons we see the questions. I wonder if there would be an appetite to create a new list, R-package-help, that has a broad mandate (as suggested by Avi). Naturally there is no guarantee that specific questions about some esoteric package will be answered, but that?s a different problem. On the other hand, why not expand the mandate of R-help rather than going to the trouble of creating a new list? Like I said, I don?t know.
>>
>> Thanks for raising the issue.
>>
>> Kevin
>>
>>
>>> On Jan 12, 2022, at 11:24 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>>>
>>> TL;DR The people responsible for tidyverse don't think much of mailing lists.
>>>
>>> IANAMLA (I am not mailing list admin) and I know some people get kind of heated about these things, but my take is that this list _is_ about R so to be on topic the question needs to be about R and how to get things done in R. Since contributed packages are almost by definition creating capabilities linked with specific problem domains or domain-specific-languages (DSLs), and there are thousands of these, it isn't practical to support questions framed within those DSLs here. It seems perfectly legitimate IMHO to mention such packages here, as long as the question does not hinge on that package, and even to offer small solutions to posed R problems using such packages. Others may disagree with my perspective on this. Unfortunately all of this this subtlety is usually lost upon newbies, much to the detriment of this list's reputation.
>>>
>>> The responsibility to setup and manage support for contributed packages belongs to the package maintainer. In the case of tidyverse, the general opinion of those people seems to be that web forums avoid the "only unformatted info can be shared" nature of traditional mailing lists, so mailing lists have AFAIK not been built or tended.
>>>
>>> Unfortunately, they also try to "allow all topics" as much as possible in those forums to minimize the appearance of unfriendliness to beginners, but my impression is that this leads to such a wide range of topics that many posts don't get answered. I have certainly found it to be just too much quantity to sift through, and I really am selective about which portions of the tidyverse I work with anyway, so I don't hang out there much at all.
>>>
>>> On January 12, 2022 7:27:20 PM PST, Avi Gross via R-help <r-help at r-project.org> wrote:
>>>> Respectfully, this forum gets lots of questions that include non-base R components and especially packages in the tidyverse. Like it or not, the extended R language is far more useful and interesting for many people and especially those who do not wish to constantly reinvent the wheel.
>>>> And repeatedly, we get people reminding (and sometimes chiding) others for daring to post questions or supply answers on what they see as a pure R list. They have a point.
>>>> Yes, there are other places (many not being mailing lists like this one) where we can direct the questions but why can't there be an official mailing list alongside this one specifically focused on helping or just discussing R issues related partially to the use of packages. I don't mean for people making a package to share, just users who may be searching for an appropriate package or using a common package, especially the ones in the tidyverse that are NOT GOING AWAY just because some purists ...
>>>> I prefer a diverse set of ways to do things and base R is NOT enough for me, nor frankly is R with all packages included as I find other languages suit my needs at times for doing various things. If this group is for purists, fine. Can we have another for the rest of us? Live and let live.
>>>>
>>>>
>>>> -----Original Message-----
>>>> From: Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> To: Kai Yang <yangkai9999 at yahoo.com>; R-help Mailing List <r-help at r-project.org>
>>>> Sent: Wed, Jan 12, 2022 3:22 pm
>>>> Subject: Re: [R] how to find the table in R studio
>>>>
>>>> On 12/01/2022 3:07 p.m., Kai Yang via R-help wrote:
>>>>> Hi all,
>>>>> I created a function in R. It will be generate a table "temp". I can view it in R studio, but I cannot find it on the top right window in R studio. Can someone tell me how to find it in there? Same thing for f_table.
>>>>> Thank you,
>>>>> Kai
>>>>> library(tidyverse)
>>>>>
>>>>> f1 <- function(indata , subgrp1){
>>>>>       subgrp1 <- enquo(subgrp1)
>>>>>       indata0 <- indata
>>>>>       temp    <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>>>>>         group_by(!!subgrp1) %>%
>>>>>         mutate(numbering =row_number(), max=max(numbering))
>>>>>       view(temp)
>>>>>       f_table <- table(temp$Species)
>>>>>       view(f_table)
>>>>> }
>>>>>
>>>>> f1(iris, Species)
>>>>>
>>>>
>>>> Someone is sure to point out that this isn't an RStudio support list,
>>>> but your issue is with R, not with RStudio.  You created the table in
>>>> f1, but you never returned it.  The variable f_table is local to the
>>>> function.  You'd need the following code to do what you want:
>>>>
>>>> f1 <- function(indata , subgrp1){
>>>>     subgrp1 <- enquo(subgrp1)
>>>>     indata0 <- indata
>>>>     temp    <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>>>>       group_by(!!subgrp1) %>%
>>>>       mutate(numbering =row_number(), max=max(numbering))
>>>>     view(temp)
>>>>     f_table <- table(temp$Species)
>>>>     view(f_table)
>>>>     f_table
>>>> }
>>>>
>>>> f_table <- f1(iris, Species)
>>>>
>>>> It's not so easy to also make temp available.  You can do it with
>>>> assign(), but I think you'd be better off splitting f1 into two
>>>> functions, one to create temp, and one to create f_table.
>>>>
>>>> Duncan Murdoch
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>>       [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> --
>>> Sent from my phone. Please excuse my brevity.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From @erv|ce @end|ng |rom @hd@w@on@com  Thu Jan 13 15:50:51 2022
From: @erv|ce @end|ng |rom @hd@w@on@com (Stephen H. Dawson, DSL)
Date: Thu, 13 Jan 2022 09:50:51 -0500
Subject: [R] 
 (Off-Topic) Time for a companion mailing list for R packages?
In-Reply-To: <a4c0f8b199584b0fa2dba4fc0c515d72@rgzm.de>
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
 <1058985502.868240.1642018042467@mail.yahoo.com>
 <d3662f4d-ab69-24b7-cc03-8a18e692f522@gmail.com>
 <1792243350.2724951.1642044440134@mail.yahoo.com>
 <BD7A8D26-C736-4BBA-80BB-4891CE8758BC@dcn.davis.ca.us>
 <05566482-E9D1-43B6-8A77-4F41F5C422DC@utoronto.ca>
 <bba68c9c-99fc-d4bc-4bdb-951205d8b754@gmail.com>
 <a4c0f8b199584b0fa2dba4fc0c515d72@rgzm.de>
Message-ID: <0bedddde-dbfc-4abf-2d38-9d0ac38a7495@shdawson.com>

Good comments, Ivan.

I also have found StackOverflow to not be too helpful in a structured 
conversation. I have had it and miss success with GitHub interactions.


*Stephen Dawson, DSL*
/Executive Strategy Consultant/
Business & Technology
+1 (865) 804-3454
http://www.shdawson.com <http://www.shdawson.com>


On 1/13/22 9:01 AM, Ivan Calandra wrote:
> This is indeed a very valid question.
>
>
> IMHO, I still think that these kind of package-specific questions should have a space on the main R mailing list, as long as these questions are about how to do something (coding), and not bug or feature requests. Regarding tidyverse and ggplot2 (and the likes), many answers actually provide ways using different packages (how many times have I seen the same question answered with base R, data.table and dplyr?). This is a great way to learn.
>
> And honestly, how many only use base R? Of course, everything can be done in base R, but packages also belong to R, that's the way it works and why it works so well. Reinventing the wheel is rarely a good solution.
>
>
> Regarding other help platforms, GitHub is great for the package maintainers that spend time on solving issues, but I myself feel bad to ask there "how to do that" (help is not always good).
>
> I gave up on StackOverflow. Everytime I tried, I either got treated as an idiot by persons who didn't even read my questions (with answers like "do it" to questions like "I don't know how to do it"), or I couldn't comment on my question to make it clearer because I was new (which is ridiculous, it is when you are new that you need to be able to clarify the most!).
>
> If people think it's tough to ask a question on the R mailing list because beginners are not well-handled, they should try SO, it's much worse!
>
> This is to say we should keep the R mailing list!
>
>
> My $0.02
>
> Ivan
>
> --
> Dr. Ivan Calandra
> Imaging lab
> RGZM - MONREPOS Archaeological Research Centre
> Schloss Monrepos
> 56567 Neuwied, Germany
> +49 (0) 2631 9772-243
> https://www.researchgate.net/profile/Ivan_Calandra
>
>
> ________________________________
> From: R-help <r-help-bounces at r-project.org> on behalf of Duncan Murdoch <murdoch.duncan at gmail.com>
> Sent: Thursday, January 13, 2022 2:25 PM
> To: Kevin Thorpe; Jeff Newmiller
> Cc: R Help Mailing List
> Subject: Re: [R] (Off-Topic) Time for a companion mailing list for R packages?
>
> Currently help for contributed packages is available on StackOverflow,
> package-specific web sites and Github.
>
> I rarely read package-specific (e.g. RStudio) web pages, and have only
> posted questions there a few times, with generally unsatisfactory results.
>
> Most package developers (including tidyverse ones) respond very
> helpfully on Github, but to post there you need to already have a very
> good idea of where the problem lies.  It's not an appropriate place for
> beginners to ask for help.
>
> That leaves StackOverflow.  It gets way too much traffic from people who
> don't pose their questions well, but it has the advantage over a mailing
> list that questions can be edited and improved (or deleted) after the
> fact.  We should be sending beginners there.  And if you want to read
> questions and help people, apply N95 filters to the questions:  e.g. I
> mainly read questions that have been unanswered and undeleted for an
> hour or more.
>
> Duncan Murdoch
>
> On 13/01/2022 7:44 a.m., Kevin Thorpe wrote:
>> This is an interesting issue and something I have been thinking about raising with my fellow volunteer moderators.
>>
>> I honestly don?t know what the best solution is. Personally, I would loathe having to check multiple web-forums/mailing lists to find an answer. New users often do not appreciate the subtleties (i.e. RStudio is not R) and will continue to post here. The frequent reply to questions outside base R that inform them they are off-topic could come across as unfriendly. That could have the side effect of making the community appear elitist. Folks are also often referred to package maintainers but not all maintainers are equally responsive to queries about their packages. In summary, it can be very hard for novice users to get the help they need.
>>
>> I appreciate the desire of many to keep the focus of this list narrow, yet despite the narrow mandate there are many readers who can answer non-base R questions, which is probably one of the reasons we see the questions. I wonder if there would be an appetite to create a new list, R-package-help, that has a broad mandate (as suggested by Avi). Naturally there is no guarantee that specific questions about some esoteric package will be answered, but that?s a different problem. On the other hand, why not expand the mandate of R-help rather than going to the trouble of creating a new list? Like I said, I don?t know.
>>
>> Thanks for raising the issue.
>>
>> Kevin
>>
>>
>>> On Jan 12, 2022, at 11:24 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>>>
>>> TL;DR The people responsible for tidyverse don't think much of mailing lists.
>>>
>>> IANAMLA (I am not mailing list admin) and I know some people get kind of heated about these things, but my take is that this list _is_ about R so to be on topic the question needs to be about R and how to get things done in R. Since contributed packages are almost by definition creating capabilities linked with specific problem domains or domain-specific-languages (DSLs), and there are thousands of these, it isn't practical to support questions framed within those DSLs here. It seems perfectly legitimate IMHO to mention such packages here, as long as the question does not hinge on that package, and even to offer small solutions to posed R problems using such packages. Others may disagree with my perspective on this. Unfortunately all of this this subtlety is usually lost upon newbies, much to the detriment of this list's reputation.
>>>
>>> The responsibility to setup and manage support for contributed packages belongs to the package maintainer. In the case of tidyverse, the general opinion of those people seems to be that web forums avoid the "only unformatted info can be shared" nature of traditional mailing lists, so mailing lists have AFAIK not been built or tended.
>>>
>>> Unfortunately, they also try to "allow all topics" as much as possible in those forums to minimize the appearance of unfriendliness to beginners, but my impression is that this leads to such a wide range of topics that many posts don't get answered. I have certainly found it to be just too much quantity to sift through, and I really am selective about which portions of the tidyverse I work with anyway, so I don't hang out there much at all.
>>>
>>> On January 12, 2022 7:27:20 PM PST, Avi Gross via R-help <r-help at r-project.org> wrote:
>>>> Respectfully, this forum gets lots of questions that include non-base R components and especially packages in the tidyverse. Like it or not, the extended R language is far more useful and interesting for many people and especially those who do not wish to constantly reinvent the wheel.
>>>> And repeatedly, we get people reminding (and sometimes chiding) others for daring to post questions or supply answers on what they see as a pure R list. They have a point.
>>>> Yes, there are other places (many not being mailing lists like this one) where we can direct the questions but why can't there be an official mailing list alongside this one specifically focused on helping or just discussing R issues related partially to the use of packages. I don't mean for people making a package to share, just users who may be searching for an appropriate package or using a common package, especially the ones in the tidyverse that are NOT GOING AWAY just because some purists ...
>>>> I prefer a diverse set of ways to do things and base R is NOT enough for me, nor frankly is R with all packages included as I find other languages suit my needs at times for doing various things. If this group is for purists, fine. Can we have another for the rest of us? Live and let live.
>>>>
>>>>
>>>> -----Original Message-----
>>>> From: Duncan Murdoch <murdoch.duncan at gmail.com>
>>>> To: Kai Yang <yangkai9999 at yahoo.com>; R-help Mailing List <r-help at r-project.org>
>>>> Sent: Wed, Jan 12, 2022 3:22 pm
>>>> Subject: Re: [R] how to find the table in R studio
>>>>
>>>> On 12/01/2022 3:07 p.m., Kai Yang via R-help wrote:
>>>>> Hi all,
>>>>> I created a function in R. It will be generate a table "temp". I can view it in R studio, but I cannot find it on the top right window in R studio. Can someone tell me how to find it in there? Same thing for f_table.
>>>>> Thank you,
>>>>> Kai
>>>>> library(tidyverse)
>>>>>
>>>>> f1 <- function(indata , subgrp1){
>>>>>       subgrp1 <- enquo(subgrp1)
>>>>>       indata0 <- indata
>>>>>       temp    <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>>>>>         group_by(!!subgrp1) %>%
>>>>>         mutate(numbering =row_number(), max=max(numbering))
>>>>>       view(temp)
>>>>>       f_table <- table(temp$Species)
>>>>>       view(f_table)
>>>>> }
>>>>>
>>>>> f1(iris, Species)
>>>>>
>>>> Someone is sure to point out that this isn't an RStudio support list,
>>>> but your issue is with R, not with RStudio.  You created the table in
>>>> f1, but you never returned it.  The variable f_table is local to the
>>>> function.  You'd need the following code to do what you want:
>>>>
>>>> f1 <- function(indata , subgrp1){
>>>>     subgrp1 <- enquo(subgrp1)
>>>>     indata0 <- indata
>>>>     temp    <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>>>>       group_by(!!subgrp1) %>%
>>>>       mutate(numbering =row_number(), max=max(numbering))
>>>>     view(temp)
>>>>     f_table <- table(temp$Species)
>>>>     view(f_table)
>>>>     f_table
>>>> }
>>>>
>>>> f_table <- f1(iris, Species)
>>>>
>>>> It's not so easy to also make temp available.  You can do it with
>>>> assign(), but I think you'd be better off splitting f1 into two
>>>> functions, one to create temp, and one to create f_table.
>>>>
>>>> Duncan Murdoch
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>>       [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>> --
>>> Sent from my phone. Please excuse my brevity.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
> 	[[alternative HTML version deleted]]
>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From j|ox @end|ng |rom mcm@@ter@c@  Thu Jan 13 17:07:55 2022
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Thu, 13 Jan 2022 11:07:55 -0500
Subject: [R] Time for a companion mailing list for R packages?
In-Reply-To: <18857_1642044505_20D3SOXE001113_1792243350.2724951.1642044440134@mail.yahoo.com>
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
 <1058985502.868240.1642018042467@mail.yahoo.com>
 <d3662f4d-ab69-24b7-cc03-8a18e692f522@gmail.com>
 <18857_1642044505_20D3SOXE001113_1792243350.2724951.1642044440134@mail.yahoo.com>
Message-ID: <887f4427-5436-13c0-1236-e74391bf5a28@mcmaster.ca>

Dear Avi et al.,

Rather than proliferating R mailing lists, why not just allow questions 
on non-standard packages on the r-help list?

(1) If people don't want to answer these questions, they don't have to.

(2) Users won't necessarily find the new email list and so may post to 
r-help anyway, only to be told that they should have posted to another list.

(3) Many of the questions currently posted to the list concern 
non-standard packages and most of them are answered.

(4) If people prefer other sources of help (as listed on the R website 
"getting help" page) then they are free to use them.

(5) As I read the posting guide, questions about non-standard packages 
aren't actually disallowed; the posting guide suggests, however, that 
the package maintainer be contacted first. But answers can be helpful to 
other users, and so it may be preferable for at least some of these 
questions to be asked on the list.

(6) Finally, the instruction concerning non-standard packages is buried 
near the end of the posting guide, and users, especially new users, may 
not understand what the term "standard packages" means even if they find 
their way to the posting guide.

Best,
  John

-- 
John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
web: https://socialsciences.mcmaster.ca/jfox/

On 2022-01-12 10:27 p.m., Avi Gross via R-help wrote:
> Respectfully, this forum gets lots of questions that include non-base R components and especially packages in the tidyverse. Like it or not, the extended R language is far more useful and interesting for many people and especially those who do not wish to constantly reinvent the wheel.
> And repeatedly, we get people reminding (and sometimes chiding) others for daring to post questions or supply answers on what they see as a pure R list. They have a point.
> Yes, there are other places (many not being mailing lists like this one) where we can direct the questions but why can't there be an official mailing list alongside this one specifically focused on helping or just discussing R issues related partially to the use of packages. I don't mean for people making a package to share, just users who may be searching for an appropriate package or using a common package, especially the ones in the tidyverse that are NOT GOING AWAY just because some purists ...
> I prefer a diverse set of ways to do things and base R is NOT enough for me, nor frankly is R with all packages included as I find other languages suit my needs at times for doing various things. If this group is for purists, fine. Can we have another for the rest of us? Live and let live.
> 
> 
> -----Original Message-----
> From: Duncan Murdoch <murdoch.duncan at gmail.com>
> To: Kai Yang <yangkai9999 at yahoo.com>; R-help Mailing List <r-help at r-project.org>
> Sent: Wed, Jan 12, 2022 3:22 pm
> Subject: Re: [R] how to find the table in R studio
> 
> On 12/01/2022 3:07 p.m., Kai Yang via R-help wrote:
>> Hi all,
>> I created a function in R. It will be generate a table "temp". I can view it in R studio, but I cannot find it on the top right window in R studio. Can someone tell me how to find it in there? Same thing for f_table.
>> Thank you,
>> Kai
>> library(tidyverse)
>>
>> f1 <- function(indata , subgrp1){
>>  ? ? subgrp1 <- enquo(subgrp1)
>>  ? ? indata0 <- indata
>>  ? ? temp? ? <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>>  ? ? ? group_by(!!subgrp1) %>%
>>  ? ? ? mutate(numbering =row_number(), max=max(numbering))
>>  ? ? view(temp)
>>  ? ? f_table <- table(temp$Species)
>>  ? ? view(f_table)
>> }
>>
>> f1(iris, Species)
>>
> 
> Someone is sure to point out that this isn't an RStudio support list,
> but your issue is with R, not with RStudio.? You created the table in
> f1, but you never returned it.? The variable f_table is local to the
> function.? You'd need the following code to do what you want:
> 
> f1 <- function(indata , subgrp1){
>  ? subgrp1 <- enquo(subgrp1)
>  ? indata0 <- indata
>  ? temp? ? <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>  ? ? group_by(!!subgrp1) %>%
>  ? ? mutate(numbering =row_number(), max=max(numbering))
>  ? view(temp)
>  ? f_table <- table(temp$Species)
>  ? view(f_table)
>  ? f_table
> }
> 
> f_table <- f1(iris, Species)
> 
> It's not so easy to also make temp available.? You can do it with
> assign(), but I think you'd be better off splitting f1 into two
> functions, one to create temp, and one to create f_table.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From er|cjberger @end|ng |rom gm@||@com  Thu Jan 13 18:25:00 2022
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Thu, 13 Jan 2022 19:25:00 +0200
Subject: [R] Time for a companion mailing list for R packages?
In-Reply-To: <887f4427-5436-13c0-1236-e74391bf5a28@mcmaster.ca>
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
 <1058985502.868240.1642018042467@mail.yahoo.com>
 <d3662f4d-ab69-24b7-cc03-8a18e692f522@gmail.com>
 <18857_1642044505_20D3SOXE001113_1792243350.2724951.1642044440134@mail.yahoo.com>
 <887f4427-5436-13c0-1236-e74391bf5a28@mcmaster.ca>
Message-ID: <CAGgJW75tTWF4jLu-t5a90S425AEn7C=imYGE-DCbeHLMMZ37Gg@mail.gmail.com>

Re: constructive criticism to make this list more useful to more people:

Suggestion 1: accommodate questions related to non-base-R packages
                       This has been addressed by many already. The current
de facto situation is that such questions are asked and often answered.
Perhaps the posting guide should be altered so that such questions fall
within the guidelines.

Suggestion 2: expand beyond plain-text mode
                        I assume there is a reason for this restriction but
it seems to create a lot of delay and often havoc. Also, many questions on
this list relate to graphics which is an important part of R (even base R)
and such questions may often be more easily communicated with images.

Eric




On Thu, Jan 13, 2022 at 6:08 PM John Fox <jfox at mcmaster.ca> wrote:

> Dear Avi et al.,
>
> Rather than proliferating R mailing lists, why not just allow questions
> on non-standard packages on the r-help list?
>
> (1) If people don't want to answer these questions, they don't have to.
>
> (2) Users won't necessarily find the new email list and so may post to
> r-help anyway, only to be told that they should have posted to another
> list.
>
> (3) Many of the questions currently posted to the list concern
> non-standard packages and most of them are answered.
>
> (4) If people prefer other sources of help (as listed on the R website
> "getting help" page) then they are free to use them.
>
> (5) As I read the posting guide, questions about non-standard packages
> aren't actually disallowed; the posting guide suggests, however, that
> the package maintainer be contacted first. But answers can be helpful to
> other users, and so it may be preferable for at least some of these
> questions to be asked on the list.
>
> (6) Finally, the instruction concerning non-standard packages is buried
> near the end of the posting guide, and users, especially new users, may
> not understand what the term "standard packages" means even if they find
> their way to the posting guide.
>
> Best,
>   John
>
> --
> John Fox, Professor Emeritus
> McMaster University
> Hamilton, Ontario, Canada
> web: https://socialsciences.mcmaster.ca/jfox/
>
> On 2022-01-12 10:27 p.m., Avi Gross via R-help wrote:
> > Respectfully, this forum gets lots of questions that include non-base R
> components and especially packages in the tidyverse. Like it or not, the
> extended R language is far more useful and interesting for many people and
> especially those who do not wish to constantly reinvent the wheel.
> > And repeatedly, we get people reminding (and sometimes chiding) others
> for daring to post questions or supply answers on what they see as a pure R
> list. They have a point.
> > Yes, there are other places (many not being mailing lists like this one)
> where we can direct the questions but why can't there be an official
> mailing list alongside this one specifically focused on helping or just
> discussing R issues related partially to the use of packages. I don't mean
> for people making a package to share, just users who may be searching for
> an appropriate package or using a common package, especially the ones in
> the tidyverse that are NOT GOING AWAY just because some purists ...
> > I prefer a diverse set of ways to do things and base R is NOT enough for
> me, nor frankly is R with all packages included as I find other languages
> suit my needs at times for doing various things. If this group is for
> purists, fine. Can we have another for the rest of us? Live and let live.
> >
> >
> > -----Original Message-----
> > From: Duncan Murdoch <murdoch.duncan at gmail.com>
> > To: Kai Yang <yangkai9999 at yahoo.com>; R-help Mailing List <
> r-help at r-project.org>
> > Sent: Wed, Jan 12, 2022 3:22 pm
> > Subject: Re: [R] how to find the table in R studio
> >
> > On 12/01/2022 3:07 p.m., Kai Yang via R-help wrote:
> >> Hi all,
> >> I created a function in R. It will be generate a table "temp". I can
> view it in R studio, but I cannot find it on the top right window in R
> studio. Can someone tell me how to find it in there? Same thing for f_table.
> >> Thank you,
> >> Kai
> >> library(tidyverse)
> >>
> >> f1 <- function(indata , subgrp1){
> >>      subgrp1 <- enquo(subgrp1)
> >>      indata0 <- indata
> >>      temp    <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
> >>        group_by(!!subgrp1) %>%
> >>        mutate(numbering =row_number(), max=max(numbering))
> >>      view(temp)
> >>      f_table <- table(temp$Species)
> >>      view(f_table)
> >> }
> >>
> >> f1(iris, Species)
> >>
> >
> > Someone is sure to point out that this isn't an RStudio support list,
> > but your issue is with R, not with RStudio.  You created the table in
> > f1, but you never returned it.  The variable f_table is local to the
> > function.  You'd need the following code to do what you want:
> >
> > f1 <- function(indata , subgrp1){
> >    subgrp1 <- enquo(subgrp1)
> >    indata0 <- indata
> >    temp    <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
> >      group_by(!!subgrp1) %>%
> >      mutate(numbering =row_number(), max=max(numbering))
> >    view(temp)
> >    f_table <- table(temp$Species)
> >    view(f_table)
> >    f_table
> > }
> >
> > f_table <- f1(iris, Species)
> >
> > It's not so easy to also make temp available.  You can do it with
> > assign(), but I think you'd be better off splitting f1 into two
> > functions, one to create temp, and one to create f_table.
> >
> > Duncan Murdoch
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From twoo|m@n @end|ng |rom ont@rgettek@com  Thu Jan 13 18:30:34 2022
From: twoo|m@n @end|ng |rom ont@rgettek@com (Tom Woolman)
Date: Thu, 13 Jan 2022 12:30:34 -0500
Subject: [R] Time for a companion mailing list for R packages?
In-Reply-To: <CAGgJW75tTWF4jLu-t5a90S425AEn7C=imYGE-DCbeHLMMZ37Gg@mail.gmail.com>
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
 <1058985502.868240.1642018042467@mail.yahoo.com>
 <d3662f4d-ab69-24b7-cc03-8a18e692f522@gmail.com>
 <18857_1642044505_20D3SOXE001113_1792243350.2724951.1642044440134@mail.yahoo.com>
 <887f4427-5436-13c0-1236-e74391bf5a28@mcmaster.ca>
 <CAGgJW75tTWF4jLu-t5a90S425AEn7C=imYGE-DCbeHLMMZ37Gg@mail.gmail.com>
Message-ID: <49558fc2fe3ec5c5db532a4e02408dc2@ontargettek.com>

I concur on both of Eric's suggestions below. I love R but I couldn't 
imagine using it on a daily basis without "key" packages for various 
regression and classification modeling problems, etc.   Likewise on 
being able to embed images (within reason... maybe establish a max KB or 
MB file size for attachments).


Thanks,
Tom


On 2022-01-13 12:25, Eric Berger wrote:
> Re: constructive criticism to make this list more useful to more 
> people:
> 
> Suggestion 1: accommodate questions related to non-base-R packages
>                        This has been addressed by many already. The 
> current
> de facto situation is that such questions are asked and often answered.
> Perhaps the posting guide should be altered so that such questions fall
> within the guidelines.
> 
> Suggestion 2: expand beyond plain-text mode
>                         I assume there is a reason for this restriction 
> but
> it seems to create a lot of delay and often havoc. Also, many questions 
> on
> this list relate to graphics which is an important part of R (even base 
> R)
> and such questions may often be more easily communicated with images.
> 
> Eric
> 
> 
> 
> 
> On Thu, Jan 13, 2022 at 6:08 PM John Fox <jfox at mcmaster.ca> wrote:
> 
>> Dear Avi et al.,
>> 
>> Rather than proliferating R mailing lists, why not just allow 
>> questions
>> on non-standard packages on the r-help list?
>> 
>> (1) If people don't want to answer these questions, they don't have 
>> to.
>> 
>> (2) Users won't necessarily find the new email list and so may post to
>> r-help anyway, only to be told that they should have posted to another
>> list.
>> 
>> (3) Many of the questions currently posted to the list concern
>> non-standard packages and most of them are answered.
>> 
>> (4) If people prefer other sources of help (as listed on the R website
>> "getting help" page) then they are free to use them.
>> 
>> (5) As I read the posting guide, questions about non-standard packages
>> aren't actually disallowed; the posting guide suggests, however, that
>> the package maintainer be contacted first. But answers can be helpful 
>> to
>> other users, and so it may be preferable for at least some of these
>> questions to be asked on the list.
>> 
>> (6) Finally, the instruction concerning non-standard packages is 
>> buried
>> near the end of the posting guide, and users, especially new users, 
>> may
>> not understand what the term "standard packages" means even if they 
>> find
>> their way to the posting guide.
>> 
>> Best,
>>   John
>> 
>> --
>> John Fox, Professor Emeritus
>> McMaster University
>> Hamilton, Ontario, Canada
>> web: https://socialsciences.mcmaster.ca/jfox/
>> 
>> On 2022-01-12 10:27 p.m., Avi Gross via R-help wrote:
>> > Respectfully, this forum gets lots of questions that include non-base R
>> components and especially packages in the tidyverse. Like it or not, 
>> the
>> extended R language is far more useful and interesting for many people 
>> and
>> especially those who do not wish to constantly reinvent the wheel.
>> > And repeatedly, we get people reminding (and sometimes chiding) others
>> for daring to post questions or supply answers on what they see as a 
>> pure R
>> list. They have a point.
>> > Yes, there are other places (many not being mailing lists like this one)
>> where we can direct the questions but why can't there be an official
>> mailing list alongside this one specifically focused on helping or 
>> just
>> discussing R issues related partially to the use of packages. I don't 
>> mean
>> for people making a package to share, just users who may be searching 
>> for
>> an appropriate package or using a common package, especially the ones 
>> in
>> the tidyverse that are NOT GOING AWAY just because some purists ...
>> > I prefer a diverse set of ways to do things and base R is NOT enough for
>> me, nor frankly is R with all packages included as I find other 
>> languages
>> suit my needs at times for doing various things. If this group is for
>> purists, fine. Can we have another for the rest of us? Live and let 
>> live.
>> >
>> >
>> > -----Original Message-----
>> > From: Duncan Murdoch <murdoch.duncan at gmail.com>
>> > To: Kai Yang <yangkai9999 at yahoo.com>; R-help Mailing List <
>> r-help at r-project.org>
>> > Sent: Wed, Jan 12, 2022 3:22 pm
>> > Subject: Re: [R] how to find the table in R studio
>> >
>> > On 12/01/2022 3:07 p.m., Kai Yang via R-help wrote:
>> >> Hi all,
>> >> I created a function in R. It will be generate a table "temp". I can
>> view it in R studio, but I cannot find it on the top right window in R
>> studio. Can someone tell me how to find it in there? Same thing for 
>> f_table.
>> >> Thank you,
>> >> Kai
>> >> library(tidyverse)
>> >>
>> >> f1 <- function(indata , subgrp1){
>> >>      subgrp1 <- enquo(subgrp1)
>> >>      indata0 <- indata
>> >>      temp    <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>> >>        group_by(!!subgrp1) %>%
>> >>        mutate(numbering =row_number(), max=max(numbering))
>> >>      view(temp)
>> >>      f_table <- table(temp$Species)
>> >>      view(f_table)
>> >> }
>> >>
>> >> f1(iris, Species)
>> >>
>> >
>> > Someone is sure to point out that this isn't an RStudio support list,
>> > but your issue is with R, not with RStudio.  You created the table in
>> > f1, but you never returned it.  The variable f_table is local to the
>> > function.  You'd need the following code to do what you want:
>> >
>> > f1 <- function(indata , subgrp1){
>> >    subgrp1 <- enquo(subgrp1)
>> >    indata0 <- indata
>> >    temp    <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>> >      group_by(!!subgrp1) %>%
>> >      mutate(numbering =row_number(), max=max(numbering))
>> >    view(temp)
>> >    f_table <- table(temp$Species)
>> >    view(f_table)
>> >    f_table
>> > }
>> >
>> > f_table <- f1(iris, Species)
>> >
>> > It's not so easy to also make temp available.  You can do it with
>> > assign(), but I think you'd be better off splitting f1 into two
>> > functions, one to create temp, and one to create f_table.
>> >
>> > Duncan Murdoch
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> >
>> >       [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @v|gro@@ @end|ng |rom ver|zon@net  Thu Jan 13 19:05:10 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Thu, 13 Jan 2022 18:05:10 +0000 (UTC)
Subject: [R] 
 (Off-Topic) Time for a companion mailing list for R packages?
In-Reply-To: <05566482-E9D1-43B6-8A77-4F41F5C422DC@utoronto.ca>
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
 <1058985502.868240.1642018042467@mail.yahoo.com>
 <d3662f4d-ab69-24b7-cc03-8a18e692f522@gmail.com>
 <1792243350.2724951.1642044440134@mail.yahoo.com>
 <BD7A8D26-C736-4BBA-80BB-4891CE8758BC@dcn.davis.ca.us>
 <05566482-E9D1-43B6-8A77-4F41F5C422DC@utoronto.ca>
Message-ID: <1854929399.2842746.1642097110703@mail.yahoo.com>

Kevin,
My thought was to have a specific place you can direct people to if their main problem or question was outside the reasonable scope of this group but clearly about R and about fairly well-used packages.
There are thousands of packages and I know if I bothered to put one out there, I would not necessarily be willing to volunteer to support it by answering questions from anyone who asked. So I suspect getting replies from package owners or contacts in general, is not that reliable or quick.
R STUDIO is a factor here in that there is a cluster of packages they are associated with. Given it's popularity, it is not a shock if quite a few questions relate to such packages and I think more packages may be entering their domain over time. There may be other packages used often that are commonly used and many hardly anyone would mention.
Who would monitor such groups is always a question, as well as who would take the time to answer. But if the people on this forum who are not interested simply stay here and direct any questions to there politely, maybe it would overall be a better experience. Of course, the people here might also suggest a more base-R approach to solving a problem that might also be satisfactory.
I am in both camps and especially when students who are learning base R are guided to use what was taught in class, rather than pre-built ...
But I also appreciate when someone has a nice and general set of tools that is well designed and well tested and has advantages that can range from being faster to easier to program to just automating fairly tedious and repetitive things otherwise done.?
I will say this. By adding some features like a version of a pipe to base R, I think it fair to say that the base R we are talking about can well be expanding so that over time, some packages may become less attractive or necessary. There are things that would be nice to be able to use without having to ask for them to be loaded and might be quite useful and very commonly used. But as discussed here, maintaining the bloat ...


-----Original Message-----
From: Kevin Thorpe <kevin.thorpe at utoronto.ca>
To: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Cc: Avi Gross <avigross at verizon.net>; R Help Mailing List <r-help at r-project.org>
Sent: Thu, Jan 13, 2022 7:44 am
Subject: Re: [R] (Off-Topic) Time for a companion mailing list for R packages?

This is an interesting issue and something I have been thinking about raising with my fellow volunteer moderators.

I honestly don?t know what the best solution is. Personally, I would loathe having to check multiple web-forums/mailing lists to find an answer. New users often do not appreciate the subtleties (i.e. RStudio is not R) and will continue to post here. The frequent reply to questions outside base R that inform them they are off-topic could come across as unfriendly. That could have the side effect of making the community appear elitist. Folks are also often referred to package maintainers but not all maintainers are equally responsive to queries about their packages. In summary, it can be very hard for novice users to get the help they need.

I appreciate the desire of many to keep the focus of this list narrow, yet despite the narrow mandate there are many readers who can answer non-base R questions, which is probably one of the reasons we see the questions. I wonder if there would be an appetite to create a new list, R-package-help, that has a broad mandate (as suggested by Avi). Naturally there is no guarantee that specific questions about some esoteric package will be answered, but that?s a different problem. On the other hand, why not expand the mandate of R-help rather than going to the trouble of creating a new list? Like I said, I don?t know.

Thanks for raising the issue.

Kevin


> On Jan 12, 2022, at 11:24 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> 
> TL;DR The people responsible for tidyverse don't think much of mailing lists.
> 
> IANAMLA (I am not mailing list admin) and I know some people get kind of heated about these things, but my take is that this list _is_ about R so to be on topic the question needs to be about R and how to get things done in R. Since contributed packages are almost by definition creating capabilities linked with specific problem domains or domain-specific-languages (DSLs), and there are thousands of these, it isn't practical to support questions framed within those DSLs here. It seems perfectly legitimate IMHO to mention such packages here, as long as the question does not hinge on that package, and even to offer small solutions to posed R problems using such packages. Others may disagree with my perspective on this. Unfortunately all of this this subtlety is usually lost upon newbies, much to the detriment of this list's reputation.
> 
> The responsibility to setup and manage support for contributed packages belongs to the package maintainer. In the case of tidyverse, the general opinion of those people seems to be that web forums avoid the "only unformatted info can be shared" nature of traditional mailing lists, so mailing lists have AFAIK not been built or tended.
> 
> Unfortunately, they also try to "allow all topics" as much as possible in those forums to minimize the appearance of unfriendliness to beginners, but my impression is that this leads to such a wide range of topics that many posts don't get answered. I have certainly found it to be just too much quantity to sift through, and I really am selective about which portions of the tidyverse I work with anyway, so I don't hang out there much at all.
> 
> On January 12, 2022 7:27:20 PM PST, Avi Gross via R-help <r-help at r-project.org> wrote:
>> Respectfully, this forum gets lots of questions that include non-base R components and especially packages in the tidyverse. Like it or not, the extended R language is far more useful and interesting for many people and especially those who do not wish to constantly reinvent the wheel.
>> And repeatedly, we get people reminding (and sometimes chiding) others for daring to post questions or supply answers on what they see as a pure R list. They have a point.
>> Yes, there are other places (many not being mailing lists like this one) where we can direct the questions but why can't there be an official mailing list alongside this one specifically focused on helping or just discussing R issues related partially to the use of packages. I don't mean for people making a package to share, just users who may be searching for an appropriate package or using a common package, especially the ones in the tidyverse that are NOT GOING AWAY just because some purists ...
>> I prefer a diverse set of ways to do things and base R is NOT enough for me, nor frankly is R with all packages included as I find other languages suit my needs at times for doing various things. If this group is for purists, fine. Can we have another for the rest of us? Live and let live.
>> 
>> 
>> -----Original Message-----
>> From: Duncan Murdoch <murdoch.duncan at gmail.com>
>> To: Kai Yang <yangkai9999 at yahoo.com>; R-help Mailing List <r-help at r-project.org>
>> Sent: Wed, Jan 12, 2022 3:22 pm
>> Subject: Re: [R] how to find the table in R studio
>> 
>> On 12/01/2022 3:07 p.m., Kai Yang via R-help wrote:
>>> Hi all,
>>> I created a function in R. It will be generate a table "temp". I can view it in R studio, but I cannot find it on the top right window in R studio. Can someone tell me how to find it in there? Same thing for f_table.
>>> Thank you,
>>> Kai
>>> library(tidyverse)
>>> 
>>> f1 <- function(indata , subgrp1){
>>>? ? subgrp1 <- enquo(subgrp1)
>>>? ? indata0 <- indata
>>>? ? temp? ? <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>>>? ? ? group_by(!!subgrp1) %>%
>>>? ? ? mutate(numbering =row_number(), max=max(numbering))
>>>? ? view(temp)
>>>? ? f_table <- table(temp$Species)
>>>? ? view(f_table)
>>> }
>>> 
>>> f1(iris, Species)
>>> 
>> 
>> Someone is sure to point out that this isn't an RStudio support list, 
>> but your issue is with R, not with RStudio.? You created the table in 
>> f1, but you never returned it.? The variable f_table is local to the 
>> function.? You'd need the following code to do what you want:
>> 
>> f1 <- function(indata , subgrp1){
>>? subgrp1 <- enquo(subgrp1)
>>? indata0 <- indata
>>? temp? ? <- indata0 %>% select(!!subgrp1) %>% arrange(!!subgrp1) %>%
>>? ? group_by(!!subgrp1) %>%
>>? ? mutate(numbering =row_number(), max=max(numbering))
>>? view(temp)
>>? f_table <- table(temp$Species)
>>? view(f_table)
>>? f_table
>> }
>> 
>> f_table <- f1(iris, Species)
>> 
>> It's not so easy to also make temp available.? You can do it with 
>> assign(), but I think you'd be better off splitting f1 into two 
>> functions, one to create temp, and one to create f_table.
>> 
>> Duncan Murdoch
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> ??? [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> -- 
> Sent from my phone. Please excuse my brevity.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Kevin E. Thorpe
Head of Biostatistics,? Applied Health Research Centre (AHRC)
Li Ka Shing Knowledge Institute of St. Michael?s Hospital
Assistant Professor, Dalla Lana School of Public Health
University of Toronto
email: kevin.thorpe at utoronto.ca? Tel: 416.864.5776? Fax: 416.864.3016


	[[alternative HTML version deleted]]


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Thu Jan 13 20:38:04 2022
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Thu, 13 Jan 2022 20:38:04 +0100
Subject: [R] how to plot numeric variable against several categories with
 lattice bwplot?
Message-ID: <CAMk+s2Rwt7Bj7rmHYU-tJmXNZuxdC_jf06yhYgyYbWE7nFiagg@mail.gmail.com>

Hello,
I have a numerical variable (x) and a series of categories. I would
like to make a box plot of x against each of the categories. How can I
arrange the data so that I can accomplish it with lattice?
At the moment I got this:
```
df = data.frame(x = c(rep(1,5), rep(2,5), rep(3,5)),
y = rnorm(15),
f1 = rep(letters[1:5],3),
f2 = rep(letters[7:9],5),
f3 = c(rep(LETTERS[10:12],4), LETTERS[10:12]))
df$x = factor(df$x)
df$f1 = factor(df$f1)
df$f2 = factor(df$f2)
df$f3 = factor(df$f3)
library(lattice)
bwplot(y ~ x, data = df, auto.key = TRUE )
```
Also, is it possible to have the wishers in solid line?
Thank you


From m@rc_@chw@rtz @end|ng |rom me@com  Thu Jan 13 21:08:58 2022
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Thu, 13 Jan 2022 15:08:58 -0500
Subject: [R] 
 (Off-Topic) Time for a companion mailing list for R packages?
In-Reply-To: <CAGgJW75tTWF4jLu-t5a90S425AEn7C=imYGE-DCbeHLMMZ37Gg@mail.gmail.com>
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
 <1058985502.868240.1642018042467@mail.yahoo.com>
 <d3662f4d-ab69-24b7-cc03-8a18e692f522@gmail.com>
 <18857_1642044505_20D3SOXE001113_1792243350.2724951.1642044440134@mail.yahoo.com>
 <887f4427-5436-13c0-1236-e74391bf5a28@mcmaster.ca>
 <CAGgJW75tTWF4jLu-t5a90S425AEn7C=imYGE-DCbeHLMMZ37Gg@mail.gmail.com>
Message-ID: <fa8d4f25-799b-8d92-0a71-aeaae9282fa3@me.com>

Eric,

With respect to your second point, as one of the moderators for the 
R-Devel list, where the same considerations apply to all "official" R 
lists like R-Help here, the issue of plain text content restrictions is 
multi-factorial, partly with security considerations in mind, but has 
historically been imposed by the university (ETHZ) that hosts and 
archives all of these R related lists. It is also, historically, very 
common with open source communities generally.

If one sends a message to the list that is only HTML, or perhaps a 
multi-part MIME message with both HTML and plain text sub-parts, the 
HTML markup will be stripped, leaving only the plain text part. You will 
usually see a line at the end of the post/reply as follows:

 ? "[[alternative HTML version deleted]]"

when that occurs.

When we see some messages here that appear to be a single, longish, 
unformatted and largely unreadable paragraph, with no obvious line/para 
breaks, where the sender may have actually formatted the message in HTML 
before sending, that is the result of the HTML filtering by the ETHZ 
server, perhaps also influenced by how the sender's e-mail client 
formatted the plain text sub-part of the message.

That is why it is best, and recommended, to format the e-mail message 
natively in plain text only to begin with, and there are numerous e-mail 
clients that support that functional distinction.

Also, there are still folks out there that use plain text only e-mail 
clients, yes in 2022, where we have to recognize and be sensitive to 
that reality as the official R support venues.

With respect to attachments, a limited set of them are allowed here for 
the R lists. Primarily, these are PDF, [E]PS, PNG and JPG, which would 
generally accommodate the graphics related scenarios that you mention.

As has been noted elsewhere in this thread, there are a number of other 
venues that provide R specific, community based, support using online 
forums with varying levels of, perhaps more "modern" functionality. The 
most prolific likely to be StackOverflow which, without any doubt, and 
to some extent via the gamification on that platform, has markedly 
reduced the traffic volume here over the years. That shift initially 
started in circa 2009 when that platform began, and then rapidly grew, 
with traffic volume on R-Help peaking in 2010. I occasionally run 
traffic volume reports comparing the two venues over time, and having 
been a part of the R community for ~20 years now, the drop-off here post 
2010 is quite noticeable. I don't label that phenomenon as good or bad, 
it is simply the reality of the situation and this is not a competition 
for traffic.

As noted in this thread, other locations find R related interactions as 
well, which would include LinkedIn, ResearchGate, RStudio's forums, and 
some package developers provide support via their GitHub repos, using 
the Issues functionality, even if not a bug. In the case of RStudio, 
having their own support forums, and as comes up here, there is 
frequently a lack of distinction between RStudio the third party GUI, 
and R itself, resulting in confusion by users, and subsequent 
"energetic" discussion here.

I am not advocating the general use or non-use of any specific platform, 
but am primarily addressing the limitations here on the official lists 
as currently implemented. For the record, I am not an RStudio user and 
do not participate on StackOverflow, albeit, in the latter case, Google 
searches on technical subject matter do lead me there on occasion.

We have had numerous online and offline discussions over the many years 
of sub-setting the official R lists by common subject matter. The 
challenge is always, how much granularity do you impose on the list 
structure, even if you just create an "R-Newbie" list, which 
specifically has been discussed many times over the years. The more 
granularity you impose, the more difficult it becomes to manage and 
interact with those "stove pipes", when there may not be a clear 
separation in subject matter, and there will be the inevitable overlap 
in content. You also need relevant, volunteer, community members to then 
be willing to moderate, subscribe to and participate on those multiple 
lists, if they are to be of value.

That would be the challenge even with an R-Packages list. Will every, or 
most, or the most popular, third party package developers subscribe to 
that list, so that if someone posts a query, they are likely to get a 
timely reply? Would enough community members with relevant experience do 
so? Or would a useR then re-post the query to R-Help after a period of 
time of no replies anyway, and in time, give up on the other list due to 
the lack of traffic?

For many third party packages, especially those that have a longer 
history and have a reasonable useR base, posting here is fine in my 
mind, and helpful community replies are reasonable to expect. For 
others, communicating with the package maintainer directly may be the 
only recourse, because there is perhaps not broad experience with the 
package in the community. It may be difficult for the useR of such a 
package to make that distinction a priori, unless they (hopefully) take 
the time to search the list archives first, perhaps using rseek.org or 
Google, which is also recommended.

I always begin with the assumption that the question that I have has 
been asked before, and hopefully an answer will also be present. That 
may be in the relevant documentation, including package vignettes where 
available, or otherwise online here or elsewhere. Certainly, if there is 
a bug or a reasonable suspicion of one in a third party package, the 
package maintainer should be the primary point of contact.

Regards,

Marc Schwartz


Eric Berger wrote on 1/13/22 12:25 PM:
> Re: constructive criticism to make this list more useful to more people:
>
> Suggestion 1: accommodate questions related to non-base-R packages
>                         This has been addressed by many already. The current
> de facto situation is that such questions are asked and often answered.
> Perhaps the posting guide should be altered so that such questions fall
> within the guidelines.
>
> Suggestion 2: expand beyond plain-text mode
>                          I assume there is a reason for this restriction but
> it seems to create a lot of delay and often havoc. Also, many questions on
> this list relate to graphics which is an important part of R (even base R)
> and such questions may often be more easily communicated with images.
>
> Eric


<...earlier content snipped...>


From drj|m|emon @end|ng |rom gm@||@com  Thu Jan 13 22:15:42 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 14 Jan 2022 08:15:42 +1100
Subject: [R] 
 (Off-Topic) Time for a companion mailing list for R packages?
In-Reply-To: <fa8d4f25-799b-8d92-0a71-aeaae9282fa3@me.com>
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
 <1058985502.868240.1642018042467@mail.yahoo.com>
 <d3662f4d-ab69-24b7-cc03-8a18e692f522@gmail.com>
 <18857_1642044505_20D3SOXE001113_1792243350.2724951.1642044440134@mail.yahoo.com>
 <887f4427-5436-13c0-1236-e74391bf5a28@mcmaster.ca>
 <CAGgJW75tTWF4jLu-t5a90S425AEn7C=imYGE-DCbeHLMMZ37Gg@mail.gmail.com>
 <fa8d4f25-799b-8d92-0a71-aeaae9282fa3@me.com>
Message-ID: <CA+8X3fUUAgL9C3Qcq1kheLwA_mOhJ_9nOANxHJgzuWXuRTEOtQ@mail.gmail.com>

Hi,
I wasn't going to contribute to this, but I've got a couple of minutes
and the morning caffeine has hit me.
My 5 Point Plan for taking life as it comes:
1) I don't like to help people, I'd rather trick them into doing it themselves.
2) I'm lazy and intolerant. If somebody wants me to do their work for
them, that's what the delete key is for.
3) I'm not omniscient (and lazy, remember). If I can't provide an
answer, see 2) above.
4) I can read most HTML messages well enough. Be thankful they're not
sending TikTok videos.
5) I've got a good memory and I still blush at some of the stupid
questions I have asked.

Jim


On Fri, Jan 14, 2022 at 7:09 AM Marc Schwartz via R-help
<r-help at r-project.org> wrote:
>
> Eric,
>
> With respect to your second point, as one of the moderators for the
> R-Devel list, where the same considerations apply to all "official" R
> lists like R-Help here, the issue of plain text content restrictions is
> multi-factorial, partly with security considerations in mind, but has
> historically been imposed by the university (ETHZ) that hosts and
> archives all of these R related lists. It is also, historically, very
> common with open source communities generally.
>
> If one sends a message to the list that is only HTML, or perhaps a
> multi-part MIME message with both HTML and plain text sub-parts, the
> HTML markup will be stripped, leaving only the plain text part. You will
> usually see a line at the end of the post/reply as follows:
>
>    "[[alternative HTML version deleted]]"
>
> when that occurs.
>
> When we see some messages here that appear to be a single, longish,
> unformatted and largely unreadable paragraph, with no obvious line/para
> breaks, where the sender may have actually formatted the message in HTML
> before sending, that is the result of the HTML filtering by the ETHZ
> server, perhaps also influenced by how the sender's e-mail client
> formatted the plain text sub-part of the message.
>
> That is why it is best, and recommended, to format the e-mail message
> natively in plain text only to begin with, and there are numerous e-mail
> clients that support that functional distinction.
>
> Also, there are still folks out there that use plain text only e-mail
> clients, yes in 2022, where we have to recognize and be sensitive to
> that reality as the official R support venues.
>
> With respect to attachments, a limited set of them are allowed here for
> the R lists. Primarily, these are PDF, [E]PS, PNG and JPG, which would
> generally accommodate the graphics related scenarios that you mention.
>
> As has been noted elsewhere in this thread, there are a number of other
> venues that provide R specific, community based, support using online
> forums with varying levels of, perhaps more "modern" functionality. The
> most prolific likely to be StackOverflow which, without any doubt, and
> to some extent via the gamification on that platform, has markedly
> reduced the traffic volume here over the years. That shift initially
> started in circa 2009 when that platform began, and then rapidly grew,
> with traffic volume on R-Help peaking in 2010. I occasionally run
> traffic volume reports comparing the two venues over time, and having
> been a part of the R community for ~20 years now, the drop-off here post
> 2010 is quite noticeable. I don't label that phenomenon as good or bad,
> it is simply the reality of the situation and this is not a competition
> for traffic.
>
> As noted in this thread, other locations find R related interactions as
> well, which would include LinkedIn, ResearchGate, RStudio's forums, and
> some package developers provide support via their GitHub repos, using
> the Issues functionality, even if not a bug. In the case of RStudio,
> having their own support forums, and as comes up here, there is
> frequently a lack of distinction between RStudio the third party GUI,
> and R itself, resulting in confusion by users, and subsequent
> "energetic" discussion here.
>
> I am not advocating the general use or non-use of any specific platform,
> but am primarily addressing the limitations here on the official lists
> as currently implemented. For the record, I am not an RStudio user and
> do not participate on StackOverflow, albeit, in the latter case, Google
> searches on technical subject matter do lead me there on occasion.
>
> We have had numerous online and offline discussions over the many years
> of sub-setting the official R lists by common subject matter. The
> challenge is always, how much granularity do you impose on the list
> structure, even if you just create an "R-Newbie" list, which
> specifically has been discussed many times over the years. The more
> granularity you impose, the more difficult it becomes to manage and
> interact with those "stove pipes", when there may not be a clear
> separation in subject matter, and there will be the inevitable overlap
> in content. You also need relevant, volunteer, community members to then
> be willing to moderate, subscribe to and participate on those multiple
> lists, if they are to be of value.
>
> That would be the challenge even with an R-Packages list. Will every, or
> most, or the most popular, third party package developers subscribe to
> that list, so that if someone posts a query, they are likely to get a
> timely reply? Would enough community members with relevant experience do
> so? Or would a useR then re-post the query to R-Help after a period of
> time of no replies anyway, and in time, give up on the other list due to
> the lack of traffic?
>
> For many third party packages, especially those that have a longer
> history and have a reasonable useR base, posting here is fine in my
> mind, and helpful community replies are reasonable to expect. For
> others, communicating with the package maintainer directly may be the
> only recourse, because there is perhaps not broad experience with the
> package in the community. It may be difficult for the useR of such a
> package to make that distinction a priori, unless they (hopefully) take
> the time to search the list archives first, perhaps using rseek.org or
> Google, which is also recommended.
>
> I always begin with the assumption that the question that I have has
> been asked before, and hopefully an answer will also be present. That
> may be in the relevant documentation, including package vignettes where
> available, or otherwise online here or elsewhere. Certainly, if there is
> a bug or a reasonable suspicion of one in a third party package, the
> package maintainer should be the primary point of contact.
>
> Regards,
>
> Marc Schwartz
>
>
> Eric Berger wrote on 1/13/22 12:25 PM:
> > Re: constructive criticism to make this list more useful to more people:
> >
> > Suggestion 1: accommodate questions related to non-base-R packages
> >                         This has been addressed by many already. The current
> > de facto situation is that such questions are asked and often answered.
> > Perhaps the posting guide should be altered so that such questions fall
> > within the guidelines.
> >
> > Suggestion 2: expand beyond plain-text mode
> >                          I assume there is a reason for this restriction but
> > it seems to create a lot of delay and often havoc. Also, many questions on
> > this list relate to graphics which is an important part of R (even base R)
> > and such questions may often be more easily communicated with images.
> >
> > Eric
>
>
> <...earlier content snipped...>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @v|gro@@ @end|ng |rom ver|zon@net  Fri Jan 14 01:07:14 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Fri, 14 Jan 2022 00:07:14 +0000 (UTC)
Subject: [R] 
 (Off-Topic) Time for a companion mailing list for R packages?
In-Reply-To: <fa8d4f25-799b-8d92-0a71-aeaae9282fa3@me.com>
References: <1058985502.868240.1642018042467.ref@mail.yahoo.com>
 <1058985502.868240.1642018042467@mail.yahoo.com>
 <d3662f4d-ab69-24b7-cc03-8a18e692f522@gmail.com>
 <18857_1642044505_20D3SOXE001113_1792243350.2724951.1642044440134@mail.yahoo.com>
 <887f4427-5436-13c0-1236-e74391bf5a28@mcmaster.ca>
 <CAGgJW75tTWF4jLu-t5a90S425AEn7C=imYGE-DCbeHLMMZ37Gg@mail.gmail.com>
 <fa8d4f25-799b-8d92-0a71-aeaae9282fa3@me.com>
Message-ID: <88799134.34836.1642118834640@mail.yahoo.com>

I appreciate your thoughts and some history, Marc.
My personal goal here is to both learn and if possible, be helpful.
I am just bothered when one or two people regularly chime in to remind people that this forum should be pretty much only about base R. One way to satisfy them is to move some discussion away but another is to advise them the (un)official? rules are changing a bit and will tolerate just a bit more.
I think the R STUDIO distinction is next to meaningless. Almost every package that is commonly used can be used anywhere in the R universe. You do not need to be in R Studio to use ggplot or dplyr or glue or many other things that happen to be loosely packaged in the tidyverse. If someone asks a reasonable question about why their multi-line ggplot code did not produce quite the output they expected and someone replies that ggplot uses the current ordering of factors so simply change that before calling it or sort of inline by calling a function that makes a re-ordered copy, so what? In a sense it turns out to be a question about base R and how you create and change factors.
I think though that a good attitude for people answering here should be to begin by mentioning if something the user asks for can easily enough be done in base R and perhaps supply a hint as to what can be used. They might (or might not) then point out that some other packages like data.table have some functionality built-in or are reputed to be much faster, or that doing it using dplyr tools and a pipeline is arguably easier to understand and uses more powerful features if needed, ...
Years ago I learned plenty about base graphics and lattice and then ggplot. Do many people ask about lattice and is it used that much? It does not seem to come up and I suspect that is not because base graphics meets all needs, but because ggplot overall provides enough overlapping functionality and more, ...
Note I had to temporarily switch mailers and use the AOL mailer in my browser and I have not found any easy way to switch to text-only mode on a per-message basis.?


-----Original Message-----
From: Marc Schwartz via R-help <r-help at r-project.org>
To: Eric Berger <ericjberger at gmail.com>
Cc: r-help at r-project.org <r-help at r-project.org>
Sent: Thu, Jan 13, 2022 3:08 pm
Subject: Re: [R] (Off-Topic) Time for a companion mailing list for R packages?

Eric,

With respect to your second point, as one of the moderators for the 
R-Devel list, where the same considerations apply to all "official" R 
lists like R-Help here, the issue of plain text content restrictions is 
multi-factorial, partly with security considerations in mind, but has 
historically been imposed by the university (ETHZ) that hosts and 
archives all of these R related lists. It is also, historically, very 
common with open source communities generally.

If one sends a message to the list that is only HTML, or perhaps a 
multi-part MIME message with both HTML and plain text sub-parts, the 
HTML markup will be stripped, leaving only the plain text part. You will 
usually see a line at the end of the post/reply as follows:

 ? "[[alternative HTML version deleted]]"

when that occurs.

When we see some messages here that appear to be a single, longish, 
unformatted and largely unreadable paragraph, with no obvious line/para 
breaks, where the sender may have actually formatted the message in HTML 
before sending, that is the result of the HTML filtering by the ETHZ 
server, perhaps also influenced by how the sender's e-mail client 
formatted the plain text sub-part of the message.

That is why it is best, and recommended, to format the e-mail message 
natively in plain text only to begin with, and there are numerous e-mail 
clients that support that functional distinction.

Also, there are still folks out there that use plain text only e-mail 
clients, yes in 2022, where we have to recognize and be sensitive to 
that reality as the official R support venues.

With respect to attachments, a limited set of them are allowed here for 
the R lists. Primarily, these are PDF, [E]PS, PNG and JPG, which would 
generally accommodate the graphics related scenarios that you mention.

As has been noted elsewhere in this thread, there are a number of other 
venues that provide R specific, community based, support using online 
forums with varying levels of, perhaps more "modern" functionality. The 
most prolific likely to be StackOverflow which, without any doubt, and 
to some extent via the gamification on that platform, has markedly 
reduced the traffic volume here over the years. That shift initially 
started in circa 2009 when that platform began, and then rapidly grew, 
with traffic volume on R-Help peaking in 2010. I occasionally run 
traffic volume reports comparing the two venues over time, and having 
been a part of the R community for ~20 years now, the drop-off here post 
2010 is quite noticeable. I don't label that phenomenon as good or bad, 
it is simply the reality of the situation and this is not a competition 
for traffic.

As noted in this thread, other locations find R related interactions as 
well, which would include LinkedIn, ResearchGate, RStudio's forums, and 
some package developers provide support via their GitHub repos, using 
the Issues functionality, even if not a bug. In the case of RStudio, 
having their own support forums, and as comes up here, there is 
frequently a lack of distinction between RStudio the third party GUI, 
and R itself, resulting in confusion by users, and subsequent 
"energetic" discussion here.

I am not advocating the general use or non-use of any specific platform, 
but am primarily addressing the limitations here on the official lists 
as currently implemented. For the record, I am not an RStudio user and 
do not participate on StackOverflow, albeit, in the latter case, Google 
searches on technical subject matter do lead me there on occasion.

We have had numerous online and offline discussions over the many years 
of sub-setting the official R lists by common subject matter. The 
challenge is always, how much granularity do you impose on the list 
structure, even if you just create an "R-Newbie" list, which 
specifically has been discussed many times over the years. The more 
granularity you impose, the more difficult it becomes to manage and 
interact with those "stove pipes", when there may not be a clear 
separation in subject matter, and there will be the inevitable overlap 
in content. You also need relevant, volunteer, community members to then 
be willing to moderate, subscribe to and participate on those multiple 
lists, if they are to be of value.

That would be the challenge even with an R-Packages list. Will every, or 
most, or the most popular, third party package developers subscribe to 
that list, so that if someone posts a query, they are likely to get a 
timely reply? Would enough community members with relevant experience do 
so? Or would a useR then re-post the query to R-Help after a period of 
time of no replies anyway, and in time, give up on the other list due to 
the lack of traffic?

For many third party packages, especially those that have a longer 
history and have a reasonable useR base, posting here is fine in my 
mind, and helpful community replies are reasonable to expect. For 
others, communicating with the package maintainer directly may be the 
only recourse, because there is perhaps not broad experience with the 
package in the community. It may be difficult for the useR of such a 
package to make that distinction a priori, unless they (hopefully) take 
the time to search the list archives first, perhaps using rseek.org or 
Google, which is also recommended.

I always begin with the assumption that the question that I have has 
been asked before, and hopefully an answer will also be present. That 
may be in the relevant documentation, including package vignettes where 
available, or otherwise online here or elsewhere. Certainly, if there is 
a bug or a reasonable suspicion of one in a third party package, the 
package maintainer should be the primary point of contact.

Regards,

Marc Schwartz


Eric Berger wrote on 1/13/22 12:25 PM:
> Re: constructive criticism to make this list more useful to more people:
>
> Suggestion 1: accommodate questions related to non-base-R packages
>? ? ? ? ? ? ? ? ? ? ? ? This has been addressed by many already. The current
> de facto situation is that such questions are asked and often answered.
> Perhaps the posting guide should be altered so that such questions fall
> within the guidelines.
>
> Suggestion 2: expand beyond plain-text mode
>? ? ? ? ? ? ? ? ? ? ? ? ? I assume there is a reason for this restriction but
> it seems to create a lot of delay and often havoc. Also, many questions on
> this list relate to graphics which is an important part of R (even base R)
> and such questions may often be more easily communicated with images.
>
> Eric


<...earlier content snipped...>

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From |eo@m@d@ @end|ng |rom @yon|c@eu  Fri Jan 14 02:30:51 2022
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leonard Mada)
Date: Fri, 14 Jan 2022 03:30:51 +0200
Subject: [R] Method Guidance
Message-ID: <366cad50-fcab-ccf3-3622-a30787f69581@syonic.eu>

Dear Jeff,


My answer is a little bit late, but I hope it helps.


jrdf = read.table(text="Time   Event_A    Event_B   Lag_B
1          1         1        0
2          0         1        1
3          0         0        0
4          1         0        0
5          0         1        1
6          0         0        0
7          0         1        3
8          1         1        0
9          0         0        0
10         0         1        2",
header=TRUE, stringsAsFactors=FALSE)

Assuming that:
- Time, Event_A, Event_B are given;
- Lag_B needs to be computed;

Step 1:
- compute time to previous Event A;

tmp = jrdf[, c(1,2)];
# add an extra event so last rows are not lost:
tmp = rbind(tmp, c(nrow(tmp) + 1, 1));

timeBetweenA = diff(tmp$Time[tmp$Event_A > 0]);
timeToA = unlist(sapply(timeBetweenA, function(x) seq(0, x-1)))


### Step 2:
# - extract the times;
timeToA[jrdf$Event_B >= 1];
cbind(jrdf, timeToA);


Sincerely,


Leonard


From w||||@mwdun|@p @end|ng |rom gm@||@com  Fri Jan 14 02:50:35 2022
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Thu, 13 Jan 2022 17:50:35 -0800
Subject: [R] Method Guidance
In-Reply-To: <000c01d8074f$376e83b0$a64b8b10$@sbcglobal.net>
References: <000c01d8074f$376e83b0$a64b8b10$.ref@sbcglobal.net>
 <000c01d8074f$376e83b0$a64b8b10$@sbcglobal.net>
Message-ID: <CAHqSRuQOnMJ4wFDT4-YJaMu1bgdMHd-Ky-j0i5G4m2rhM8RbnA@mail.gmail.com>

Suppose your data were represented as parallel vectors "time" and "type",
meaning that at time[i] a type[i] event occurred.  You didn't say what you
wanted if there were a run of "A" or "B".  If you are looking for the time
span between the last of a run of one sort of event and the first of a run
of the other sort of event then the following can be used.

f <- function(time, type, fromType, toType) {
    # return times of (fromTime) last of a run of 'fromType' and
    # (toTime) first of subsequent run of 'toType for each such transition.
    stopifnot(length(time)==length(type),
              !anyNA(type),
              !anyNA(time),
              !is.unsorted(time),
              length(fromType)==1,
              length(toType)==1)
    i <- seq_len(length(time)-1)
    iBeforeChange <- which((type[i] == fromType) & (type[i+1] == toType))
    data.frame(fromTime=time[iBeforeChange], toTime=time[iBeforeChange+1L])
}

E.g.,

> d <- data.frame(time=c(101,102,102,105,107,111,115),
type=c("A","A","B","A","B","B","A"))
> d
  time type
1  101    A
2  102    A
3  102    B
4  105    A
5  107    B
6  111    B
7  115    A
> f(time=d$time, type=d$type, fromType="A", toType="B")
  fromTime toTime
1      102    102
2      105    107
> with(.Last.value, toTime - fromTime)
[1] 0 2
> f(time=d$time, type=d$type, fromType="B", toType="A")
  fromTime toTime
1      102    105
2      111    115
> with(.Last.value, toTime - fromTime)
[1] 3 4

With the dplyr package you can avoid the index 'i' by using lag() inside of
mutate().  E.g.,

> d |> mutate(AtoB = (lag(type)=="A" & type=="B"))
  time type  AtoB
1  101    A FALSE
2  102    A FALSE
3  102    B  TRUE
4  105    A FALSE
5  107    B  TRUE
6  111    B FALSE
7  115    A FALSE

-Bill


On Tue, Jan 11, 2022 at 4:56 PM Jeff Reichman <reichmanj at sbcglobal.net>
wrote:

> R-Help Forum
>
>
>
> Looking for a little guidance. Have an issue were I'm trying to determine
> the time between when Event A happened(In days) to when a subsequent Event
> B
> happens. For Example at Time 1 Evat A happens and subsequently Event B
> happens at the same day (0) and the next day (1) then Event A happens again
> at time 4 and Event B happens the next day and 3 days later so on and so
> forth. I gather there is no function that will do that so I suspect I will
> need to grate so sour of do while loop?  Any suggestions?
>
>
>
>
>
> Time      Event_A               Event_B               Time_B
>
> 1              1                              1
> 0
>
> 2              0                              1
> 1
>
> 3              0                              0
> 0
>
> 4              1                              0
> 0
>
> 5              0                              1
> 1
>
> 6              0                              0
> 0
>
> 7              0                              1
> 3
>
> 8              1                              1
> 0
>
> 9              0                              0
> 0
>
> 10           0                              1
> 2
>
>
>
>
> Jeff Reichman
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From p@u|bern@|07 @end|ng |rom gm@||@com  Fri Jan 14 16:12:50 2022
From: p@u|bern@|07 @end|ng |rom gm@||@com (Paul Bernal)
Date: Fri, 14 Jan 2022 10:12:50 -0500
Subject: [R] How to create density ellipses with R
Message-ID: <CAMOcQfOottVWXOJjaD=q4ootDkgfgPTP4YnPJpRa70kQOYay+g@mail.gmail.com>

Dear R friends,

Happy new year to you all. Not quite sure if this is the proper place to
ask about this, so I apologize if it is not, and if it isn?t, maybe you can
point me to the right place.

I would like to know if there is any R package that allows me to produce
density ellipses. Searching through the net, I came across a package called
ellipse, but I'm not sure if this is the one I should use.

Any help and/or guidance will be greatly appreciated.

Best regards,

Paul

	[[alternative HTML version deleted]]


From gerr|t@e|chner @end|ng |rom m@th@un|-g|e@@en@de  Fri Jan 14 16:42:28 2022
From: gerr|t@e|chner @end|ng |rom m@th@un|-g|e@@en@de (Gerrit Eichner)
Date: Fri, 14 Jan 2022 16:42:28 +0100
Subject: [R] How to create density ellipses with R
In-Reply-To: <CAMOcQfOottVWXOJjaD=q4ootDkgfgPTP4YnPJpRa70kQOYay+g@mail.gmail.com>
References: <CAMOcQfOottVWXOJjaD=q4ootDkgfgPTP4YnPJpRa70kQOYay+g@mail.gmail.com>
Message-ID: <334bdef1-bbc8-12ec-7608-fb5419922d71@math.uni-giessen.de>

Hi Paul,

take a look at base R's function contour (and the Examples section
of its help page), and follow maybe the hints under "See also".

  Hth  --  Gerrit

---------------------------------------------------------------------
Dr. Gerrit Eichner                   Mathematical Institute, Room 212
gerrit.eichner at math.uni-giessen.de   Justus-Liebig-University Giessen
Tel: +49-(0)641-99-32104          Arndtstr. 2, 35392 Giessen, Germany
http://www.uni-giessen.de/eichner
---------------------------------------------------------------------

Am 14.01.2022 um 16:12 schrieb Paul Bernal:
> Dear R friends,
> 
> Happy new year to you all. Not quite sure if this is the proper place to
> ask about this, so I apologize if it is not, and if it isn?t, maybe you can
> point me to the right place.
> 
> I would like to know if there is any R package that allows me to produce
> density ellipses. Searching through the net, I came across a package called
> ellipse, but I'm not sure if this is the one I should use.
> 
> Any help and/or guidance will be greatly appreciated.
> 
> Best regards,
> 
> Paul
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From j|ox @end|ng |rom mcm@@ter@c@  Fri Jan 14 17:26:58 2022
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Fri, 14 Jan 2022 11:26:58 -0500
Subject: [R] How to create density ellipses with R
In-Reply-To: <12785_1642173199_20EFDJkh027463_CAMOcQfOottVWXOJjaD=q4ootDkgfgPTP4YnPJpRa70kQOYay+g@mail.gmail.com>
References: <12785_1642173199_20EFDJkh027463_CAMOcQfOottVWXOJjaD=q4ootDkgfgPTP4YnPJpRa70kQOYay+g@mail.gmail.com>
Message-ID: <45f23a0f-6aa6-1668-2962-50b5d82112e2@mcmaster.ca>

Dear Paul,

As I understand it, the ellipse package is meant for drawing confidence 
ellipses, not density (i.e., data) ellipses. You should be able to use 
ellipse::ellipse() to draw a bivariate-normal density ellipse (assuming 
that's what you want), but you'll have to do some computation first.

You might find the dataEllipse() function in the car package more 
convenient (again assuming that you want bivariate-normal density contours).

I hope this helps,
  John

-- 
John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
web: https://socialsciences.mcmaster.ca/jfox/

On 2022-01-14 10:12 a.m., Paul Bernal wrote:
> Dear R friends,
> 
> Happy new year to you all. Not quite sure if this is the proper place to
> ask about this, so I apologize if it is not, and if it isn?t, maybe you can
> point me to the right place.
> 
> I would like to know if there is any R package that allows me to produce
> density ellipses. Searching through the net, I came across a package called
> ellipse, but I'm not sure if this is the one I should use.
> 
> Any help and/or guidance will be greatly appreciated.
> 
> Best regards,
> 
> Paul
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Fri Jan 14 18:21:39 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 14 Jan 2022 18:21:39 +0100
Subject: [R] How to create density ellipses with R
In-Reply-To: <334bdef1-bbc8-12ec-7608-fb5419922d71@math.uni-giessen.de>
References: <CAMOcQfOottVWXOJjaD=q4ootDkgfgPTP4YnPJpRa70kQOYay+g@mail.gmail.com>
 <334bdef1-bbc8-12ec-7608-fb5419922d71@math.uni-giessen.de>
Message-ID: <25057.45347.689815.578933@stat.math.ethz.ch>

>>>>> Gerrit Eichner 
>>>>>     on Fri, 14 Jan 2022 16:42:28 +0100 writes:

    > Hi Paul, take a look at base R's function contour (and the
    > Examples section of its help page), and follow maybe the
    > hints under "See also".

    >   Hth -- Gerrit

Also, with Recommended packages 'cluster' and its
ellipsoidPoints() function:

The result of

 library(cluster)
 example(ellipsoidPoints)

is the attached plot with a classical and
robust (via recommend pkg 'MASS') covariance ellipse drawn.

Best,
Martin

--
Martin Maechler
ETH Zurich; R Core, and maintainer of 'cluster'


-------------- next part --------------
A non-text attachment was scrubbed...
Name: cluster_ellipsoidPoints.png
Type: image/png
Size: 34101 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20220114/3bbcb5bc/attachment.png>

From p@u|bern@|07 @end|ng |rom gm@||@com  Fri Jan 14 19:17:47 2022
From: p@u|bern@|07 @end|ng |rom gm@||@com (Paul Bernal)
Date: Fri, 14 Jan 2022 13:17:47 -0500
Subject: [R] How to create density ellipses with R
In-Reply-To: <45f23a0f-6aa6-1668-2962-50b5d82112e2@mcmaster.ca>
References: <12785_1642173199_20EFDJkh027463_CAMOcQfOottVWXOJjaD=q4ootDkgfgPTP4YnPJpRa70kQOYay+g@mail.gmail.com>
 <45f23a0f-6aa6-1668-2962-50b5d82112e2@mcmaster.ca>
Message-ID: <CAMOcQfNDQKA+afosUj=+A2rZk80NE7mgmQ1UtUrTE8ZLMy3i0A@mail.gmail.com>

Dear John and R community friends,

To be a little bit more specific, what I need to accomplish is the creation
of a confidence interval ellipse over a scatterplot at different
percentiles. The confidence interval ellipses should be drawn over the
scatterplot.

Any other guidance will be greatly appreciated.

Cheers,

Paul

El vie, 14 ene 2022 a las 11:27, John Fox (<jfox at mcmaster.ca>) escribi?:

> Dear Paul,
>
> As I understand it, the ellipse package is meant for drawing confidence
> ellipses, not density (i.e., data) ellipses. You should be able to use
> ellipse::ellipse() to draw a bivariate-normal density ellipse (assuming
> that's what you want), but you'll have to do some computation first.
>
> You might find the dataEllipse() function in the car package more
> convenient (again assuming that you want bivariate-normal density
> contours).
>
> I hope this helps,
>   John
>
> --
> John Fox, Professor Emeritus
> McMaster University
> Hamilton, Ontario, Canada
> web: https://socialsciences.mcmaster.ca/jfox/
>
> On 2022-01-14 10:12 a.m., Paul Bernal wrote:
> > Dear R friends,
> >
> > Happy new year to you all. Not quite sure if this is the proper place to
> > ask about this, so I apologize if it is not, and if it isn?t, maybe you
> can
> > point me to the right place.
> >
> > I would like to know if there is any R package that allows me to produce
> > density ellipses. Searching through the net, I came across a package
> called
> > ellipse, but I'm not sure if this is the one I should use.
> >
> > Any help and/or guidance will be greatly appreciated.
> >
> > Best regards,
> >
> > Paul
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jan 14 19:50:25 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 14 Jan 2022 13:50:25 -0500
Subject: [R] How to create density ellipses with R
In-Reply-To: <CAMOcQfNDQKA+afosUj=+A2rZk80NE7mgmQ1UtUrTE8ZLMy3i0A@mail.gmail.com>
References: <12785_1642173199_20EFDJkh027463_CAMOcQfOottVWXOJjaD=q4ootDkgfgPTP4YnPJpRa70kQOYay+g@mail.gmail.com>
 <45f23a0f-6aa6-1668-2962-50b5d82112e2@mcmaster.ca>
 <CAMOcQfNDQKA+afosUj=+A2rZk80NE7mgmQ1UtUrTE8ZLMy3i0A@mail.gmail.com>
Message-ID: <c9b1eb30-2631-43a9-e655-e5b9a8c3a3cf@gmail.com>

On 14/01/2022 1:17 p.m., Paul Bernal wrote:
> Dear John and R community friends,
> 
> To be a little bit more specific, what I need to accomplish is the creation
> of a confidence interval ellipse over a scatterplot at different
> percentiles. The confidence interval ellipses should be drawn over the
> scatterplot.
> 
> Any other guidance will be greatly appreciated.

That's exactly what the ellipses package was designed to do.  If you 
don't see how to use it, post an example of the scatterplot and model 
fitting you used, and someone will be able to show you how to draw the 
ellipses.

Duncan Murdoch

> 
> Cheers,
> 
> Paul
> 
> El vie, 14 ene 2022 a las 11:27, John Fox (<jfox at mcmaster.ca>) escribi?:
> 
>> Dear Paul,
>>
>> As I understand it, the ellipse package is meant for drawing confidence
>> ellipses, not density (i.e., data) ellipses. You should be able to use
>> ellipse::ellipse() to draw a bivariate-normal density ellipse (assuming
>> that's what you want), but you'll have to do some computation first.
>>
>> You might find the dataEllipse() function in the car package more
>> convenient (again assuming that you want bivariate-normal density
>> contours).
>>
>> I hope this helps,
>>    John
>>
>> --
>> John Fox, Professor Emeritus
>> McMaster University
>> Hamilton, Ontario, Canada
>> web: https://socialsciences.mcmaster.ca/jfox/
>>
>> On 2022-01-14 10:12 a.m., Paul Bernal wrote:
>>> Dear R friends,
>>>
>>> Happy new year to you all. Not quite sure if this is the proper place to
>>> ask about this, so I apologize if it is not, and if it isn?t, maybe you
>> can
>>> point me to the right place.
>>>
>>> I would like to know if there is any R package that allows me to produce
>>> density ellipses. Searching through the net, I came across a package
>> called
>>> ellipse, but I'm not sure if this is the one I should use.
>>>
>>> Any help and/or guidance will be greatly appreciated.
>>>
>>> Best regards,
>>>
>>> Paul
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From j|ox @end|ng |rom mcm@@ter@c@  Fri Jan 14 19:53:55 2022
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Fri, 14 Jan 2022 13:53:55 -0500
Subject: [R] How to create density ellipses with R
In-Reply-To: <CAMOcQfNDQKA+afosUj=+A2rZk80NE7mgmQ1UtUrTE8ZLMy3i0A@mail.gmail.com>
References: <12785_1642173199_20EFDJkh027463_CAMOcQfOottVWXOJjaD=q4ootDkgfgPTP4YnPJpRa70kQOYay+g@mail.gmail.com>
 <45f23a0f-6aa6-1668-2962-50b5d82112e2@mcmaster.ca>
 <CAMOcQfNDQKA+afosUj=+A2rZk80NE7mgmQ1UtUrTE8ZLMy3i0A@mail.gmail.com>
Message-ID: <13cf296f-3a11-804d-953f-7ac57bd1b3f2@mcmaster.ca>

Dear Paul,

On 2022-01-14 1:17 p.m., Paul Bernal wrote:
> Dear John and R community friends,
> 
> To be a little bit more specific, what I need to accomplish is the 
> creation of a confidence interval ellipse over a scatterplot?at 
> different percentiles. The confidence interval ellipses should be drawn 
> over the scatterplot.

I'm not sure what you mean. Confidence ellipses are for regression 
coefficients and so are on the scale of the coefficients; data 
(concentration) ellipses are for and on the scale of the explanatory 
variables. As it turns out, for a linear model, the former is the 
rescaled 90 degree rotation of the latter.

Because the scatterplot of the (two) variables has the variables on the 
axes, a data ellipse but not a confidence ellipse makes sense (i.e., is 
in the proper units). Data ellipses are drawn by car::dataEllipse() and 
(as explained by Martin Maechler) cluster::ellipsoidPoints(); confidence 
ellipses are drawn by car::confidenceEllipse() and the various methods 
of ellipse::ellipse().

I hope this helps,
  John

> 
> Any other guidance will be greatly appreciated.
> 
> Cheers,
> 
> Paul
> 
> El vie, 14 ene 2022 a las 11:27, John Fox (<jfox at mcmaster.ca 
> <mailto:jfox at mcmaster.ca>>) escribi?:
> 
>     Dear Paul,
> 
>     As I understand it, the ellipse package is meant for drawing confidence
>     ellipses, not density (i.e., data) ellipses. You should be able to use
>     ellipse::ellipse() to draw a bivariate-normal density ellipse (assuming
>     that's what you want), but you'll have to do some computation first.
> 
>     You might find the dataEllipse() function in the car package more
>     convenient (again assuming that you want bivariate-normal density
>     contours).
> 
>     I hope this helps,
>      ? John
> 
>     -- 
>     John Fox, Professor Emeritus
>     McMaster University
>     Hamilton, Ontario, Canada
>     web: https://socialsciences.mcmaster.ca/jfox/
>     <https://socialsciences.mcmaster.ca/jfox/>
> 
>     On 2022-01-14 10:12 a.m., Paul Bernal wrote:
>      > Dear R friends,
>      >
>      > Happy new year to you all. Not quite sure if this is the proper
>     place to
>      > ask about this, so I apologize if it is not, and if it isn?t,
>     maybe you can
>      > point me to the right place.
>      >
>      > I would like to know if there is any R package that allows me to
>     produce
>      > density ellipses. Searching through the net, I came across a
>     package called
>      > ellipse, but I'm not sure if this is the one I should use.
>      >
>      > Any help and/or guidance will be greatly appreciated.
>      >
>      > Best regards,
>      >
>      > Paul
>      >
>      >? ? ? ?[[alternative HTML version deleted]]
>      >
>      > ______________________________________________
>      > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>     -- To UNSUBSCRIBE and more, see
>      > https://stat.ethz.ch/mailman/listinfo/r-help
>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>      > PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>      > and provide commented, minimal, self-contained, reproducible code.
>


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Fri Jan 14 20:32:13 2022
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Fri, 14 Jan 2022 20:32:13 +0100
Subject: [R] NAs are removed
Message-ID: <CA+nrPnv24xKA-ObkgrgSo9UJO1NQC=m1D1jArRLnEz5s3NNhzA@mail.gmail.com>

Hi everyone

I use na.omit to remove NAs but still it gives me error

Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed

My data is:

data.frame': 340 obs. of  15 variables:
 $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
 $ NumSubclass  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ McCabe       : num  1 1 1 1 1 1 3 3 3 3 ...
 $ LOC          : num  3 4 3 3 4 4 10 10 10 10 ...
 $ DepthNested  : num  1 1 1 1 1 1 2 2 2 2 ...
 $ CA           : num  1 1 1 1 1 1 1 1 1 1 ...
 $ CE           : num  2 2 2 2 2 2 2 2 2 2 ...
 $ Instability  : num  0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667
0.667 0.667 ...
 $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
 $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 2 2 4 13 13 13 1 3
4 7 ...
 $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2 2 2
2 2 2 2 ...

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Fri Jan 14 21:41:13 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Sat, 15 Jan 2022 07:41:13 +1100
Subject: [R] NAs are removed
In-Reply-To: <CA+nrPnv24xKA-ObkgrgSo9UJO1NQC=m1D1jArRLnEz5s3NNhzA@mail.gmail.com>
References: <CA+nrPnv24xKA-ObkgrgSo9UJO1NQC=m1D1jArRLnEz5s3NNhzA@mail.gmail.com>
Message-ID: <CA+8X3fWrauV6=aa5H5V_ez9JzCLVrCcfU=S5S2NtNvfkKruh7w@mail.gmail.com>

Hi Neha,
You're using the argument "na.omit" in what function? My blind guess
is that there's a divide by zero shooting you from behind.

Jim

On Sat, Jan 15, 2022 at 6:32 AM Neha gupta <neha.bologna90 at gmail.com> wrote:
>
> Hi everyone
>
> I use na.omit to remove NAs but still it gives me error
>
> Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed
>
> My data is:
>
> data.frame': 340 obs. of  15 variables:
>  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
>  $ NumSubclass  : num  0 0 0 0 0 0 0 0 0 0 ...
>  $ McCabe       : num  1 1 1 1 1 1 3 3 3 3 ...
>  $ LOC          : num  3 4 3 3 4 4 10 10 10 10 ...
>  $ DepthNested  : num  1 1 1 1 1 1 2 2 2 2 ...
>  $ CA           : num  1 1 1 1 1 1 1 1 1 1 ...
>  $ CE           : num  2 2 2 2 2 2 2 2 2 2 ...
>  $ Instability  : num  0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667
> 0.667 0.667 ...
>  $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
>  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 2 2 4 13 13 13 1 3
> 4 7 ...
>  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2 2 2
> 2 2 2 2 ...
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Fri Jan 14 21:54:46 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 14 Jan 2022 12:54:46 -0800
Subject: [R] NAs are removed
In-Reply-To: <CA+8X3fWrauV6=aa5H5V_ez9JzCLVrCcfU=S5S2NtNvfkKruh7w@mail.gmail.com>
References: <CA+nrPnv24xKA-ObkgrgSo9UJO1NQC=m1D1jArRLnEz5s3NNhzA@mail.gmail.com>
 <CA+8X3fWrauV6=aa5H5V_ez9JzCLVrCcfU=S5S2NtNvfkKruh7w@mail.gmail.com>
Message-ID: <CAGxFJbSu3YfwiFWRJ3w983O6h7YQo-OYaJEVQJCQ9DFPn4tLeA@mail.gmail.com>

Unlikely.

> 1/0
[1] Inf  ## not NA

Bert

On Fri, Jan 14, 2022 at 12:41 PM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Neha,
> You're using the argument "na.omit" in what function? My blind guess
> is that there's a divide by zero shooting you from behind.
>
> Jim
>
> On Sat, Jan 15, 2022 at 6:32 AM Neha gupta <neha.bologna90 at gmail.com>
> wrote:
> >
> > Hi everyone
> >
> > I use na.omit to remove NAs but still it gives me error
> >
> > Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed
> >
> > My data is:
> >
> > data.frame': 340 obs. of  15 variables:
> >  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
> >  $ NumSubclass  : num  0 0 0 0 0 0 0 0 0 0 ...
> >  $ McCabe       : num  1 1 1 1 1 1 3 3 3 3 ...
> >  $ LOC          : num  3 4 3 3 4 4 10 10 10 10 ...
> >  $ DepthNested  : num  1 1 1 1 1 1 2 2 2 2 ...
> >  $ CA           : num  1 1 1 1 1 1 1 1 1 1 ...
> >  $ CE           : num  2 2 2 2 2 2 2 2 2 2 ...
> >  $ Instability  : num  0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667
> > 0.667 0.667 ...
> >  $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
> >  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 2 2 4 13 13 13
> 1 3
> > 4 7 ...
> >  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2 2
> 2
> > 2 2 2 2 ...
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jan 14 21:58:44 2022
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 14 Jan 2022 15:58:44 -0500
Subject: [R] NAs are removed
In-Reply-To: <CAGxFJbSu3YfwiFWRJ3w983O6h7YQo-OYaJEVQJCQ9DFPn4tLeA@mail.gmail.com>
References: <CA+nrPnv24xKA-ObkgrgSo9UJO1NQC=m1D1jArRLnEz5s3NNhzA@mail.gmail.com>
 <CA+8X3fWrauV6=aa5H5V_ez9JzCLVrCcfU=S5S2NtNvfkKruh7w@mail.gmail.com>
 <CAGxFJbSu3YfwiFWRJ3w983O6h7YQo-OYaJEVQJCQ9DFPn4tLeA@mail.gmail.com>
Message-ID: <51f24bc4-b60d-b377-6b0c-dafa679c385b@gmail.com>

On 14/01/2022 3:54 p.m., Bert Gunter wrote:
> Unlikely.
> 
>> 1/0
> [1] Inf  ## not NA

However:

 > if (0/0 <= 1) print("something")
Error in if (0/0 <= 1) print("something") :
   missing value where TRUE/FALSE needed

Duncan Murdoch

> 
> Bert
> 
> On Fri, Jan 14, 2022 at 12:41 PM Jim Lemon <drjimlemon at gmail.com> wrote:
> 
>> Hi Neha,
>> You're using the argument "na.omit" in what function? My blind guess
>> is that there's a divide by zero shooting you from behind.
>>
>> Jim
>>
>> On Sat, Jan 15, 2022 at 6:32 AM Neha gupta <neha.bologna90 at gmail.com>
>> wrote:
>>>
>>> Hi everyone
>>>
>>> I use na.omit to remove NAs but still it gives me error
>>>
>>> Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed
>>>
>>> My data is:
>>>
>>> data.frame': 340 obs. of  15 variables:
>>>   $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
>>>   $ NumSubclass  : num  0 0 0 0 0 0 0 0 0 0 ...
>>>   $ McCabe       : num  1 1 1 1 1 1 3 3 3 3 ...
>>>   $ LOC          : num  3 4 3 3 4 4 10 10 10 10 ...
>>>   $ DepthNested  : num  1 1 1 1 1 1 2 2 2 2 ...
>>>   $ CA           : num  1 1 1 1 1 1 1 1 1 1 ...
>>>   $ CE           : num  2 2 2 2 2 2 2 2 2 2 ...
>>>   $ Instability  : num  0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667
>>> 0.667 0.667 ...
>>>   $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
>>>   $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 2 2 4 13 13 13
>> 1 3
>>> 4 7 ...
>>>   $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2 2
>> 2
>>> 2 2 2 2 ...
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From w||||@mwdun|@p @end|ng |rom gm@||@com  Fri Jan 14 22:04:19 2022
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Fri, 14 Jan 2022 13:04:19 -0800
Subject: [R] NAs are removed
In-Reply-To: <CAGxFJbSu3YfwiFWRJ3w983O6h7YQo-OYaJEVQJCQ9DFPn4tLeA@mail.gmail.com>
References: <CA+nrPnv24xKA-ObkgrgSo9UJO1NQC=m1D1jArRLnEz5s3NNhzA@mail.gmail.com>
 <CA+8X3fWrauV6=aa5H5V_ez9JzCLVrCcfU=S5S2NtNvfkKruh7w@mail.gmail.com>
 <CAGxFJbSu3YfwiFWRJ3w983O6h7YQo-OYaJEVQJCQ9DFPn4tLeA@mail.gmail.com>
Message-ID: <CAHqSRuTduo3Yd7eTwbQ9CqFdAGPa7meEUf+7=09bMh_Lg9KupQ@mail.gmail.com>

> fraction <- 0/0
> if (fraction < .5) TRUE else FALSE
Error in if (fraction < 0.5) TRUE else FALSE :
  missing value where TRUE/FALSE needed

-Bill

On Fri, Jan 14, 2022 at 12:55 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> Unlikely.
>
> > 1/0
> [1] Inf  ## not NA
>
> Bert
>
> On Fri, Jan 14, 2022 at 12:41 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> > Hi Neha,
> > You're using the argument "na.omit" in what function? My blind guess
> > is that there's a divide by zero shooting you from behind.
> >
> > Jim
> >
> > On Sat, Jan 15, 2022 at 6:32 AM Neha gupta <neha.bologna90 at gmail.com>
> > wrote:
> > >
> > > Hi everyone
> > >
> > > I use na.omit to remove NAs but still it gives me error
> > >
> > > Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed
> > >
> > > My data is:
> > >
> > > data.frame': 340 obs. of  15 variables:
> > >  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
> > >  $ NumSubclass  : num  0 0 0 0 0 0 0 0 0 0 ...
> > >  $ McCabe       : num  1 1 1 1 1 1 3 3 3 3 ...
> > >  $ LOC          : num  3 4 3 3 4 4 10 10 10 10 ...
> > >  $ DepthNested  : num  1 1 1 1 1 1 2 2 2 2 ...
> > >  $ CA           : num  1 1 1 1 1 1 1 1 1 1 ...
> > >  $ CE           : num  2 2 2 2 2 2 2 2 2 2 ...
> > >  $ Instability  : num  0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667
> > > 0.667 0.667 ...
> > >  $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
> > >  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 2 2 4 13 13 13
> > 1 3
> > > 4 7 ...
> > >  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2
> 2
> > 2
> > > 2 2 2 2 ...
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Fri Jan 14 22:50:11 2022
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Fri, 14 Jan 2022 22:50:11 +0100
Subject: [R] NAs are removed
In-Reply-To: <CA+8X3fWrauV6=aa5H5V_ez9JzCLVrCcfU=S5S2NtNvfkKruh7w@mail.gmail.com>
References: <CA+nrPnv24xKA-ObkgrgSo9UJO1NQC=m1D1jArRLnEz5s3NNhzA@mail.gmail.com>
 <CA+8X3fWrauV6=aa5H5V_ez9JzCLVrCcfU=S5S2NtNvfkKruh7w@mail.gmail.com>
Message-ID: <CA+nrPnt9ztbTnanbEiFCMDUS9aP24PxCG9sxFmnuU=hqyA-Qqw@mail.gmail.com>

Hi Jim and Ebert

How I am using divide by zero, I did not understand? I am using caret and
AUC metric.

If I do, what is the solution?

On Fri, Jan 14, 2022 at 9:41 PM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Neha,
> You're using the argument "na.omit" in what function? My blind guess
> is that there's a divide by zero shooting you from behind.
>
> Jim
>
> On Sat, Jan 15, 2022 at 6:32 AM Neha gupta <neha.bologna90 at gmail.com>
> wrote:
> >
> > Hi everyone
> >
> > I use na.omit to remove NAs but still it gives me error
> >
> > Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed
> >
> > My data is:
> >
> > data.frame': 340 obs. of  15 variables:
> >  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
> >  $ NumSubclass  : num  0 0 0 0 0 0 0 0 0 0 ...
> >  $ McCabe       : num  1 1 1 1 1 1 3 3 3 3 ...
> >  $ LOC          : num  3 4 3 3 4 4 10 10 10 10 ...
> >  $ DepthNested  : num  1 1 1 1 1 1 2 2 2 2 ...
> >  $ CA           : num  1 1 1 1 1 1 1 1 1 1 ...
> >  $ CE           : num  2 2 2 2 2 2 2 2 2 2 ...
> >  $ Instability  : num  0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667
> > 0.667 0.667 ...
> >  $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
> >  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 2 2 4 13 13 13
> 1 3
> > 4 7 ...
> >  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2 2
> 2
> > 2 2 2 2 ...
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Fri Jan 14 22:53:12 2022
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Fri, 14 Jan 2022 22:53:12 +0100
Subject: [R] NAs are removed
In-Reply-To: <CAHqSRuTduo3Yd7eTwbQ9CqFdAGPa7meEUf+7=09bMh_Lg9KupQ@mail.gmail.com>
References: <CA+nrPnv24xKA-ObkgrgSo9UJO1NQC=m1D1jArRLnEz5s3NNhzA@mail.gmail.com>
 <CA+8X3fWrauV6=aa5H5V_ez9JzCLVrCcfU=S5S2NtNvfkKruh7w@mail.gmail.com>
 <CAGxFJbSu3YfwiFWRJ3w983O6h7YQo-OYaJEVQJCQ9DFPn4tLeA@mail.gmail.com>
 <CAHqSRuTduo3Yd7eTwbQ9CqFdAGPa7meEUf+7=09bMh_Lg9KupQ@mail.gmail.com>
Message-ID: <CA+nrPnuvvLpxbU5ipyFzSXxdN0i+h5HspqJf+5Q4J_7oXYbtBQ@mail.gmail.com>

I have a variable CA which has a value of 1 or 2, and I am using this code
in if statement

prot <- ifelse(ts$CA == '2', 0, 1)

On Fri, Jan 14, 2022 at 10:04 PM Bill Dunlap <williamwdunlap at gmail.com>
wrote:

> > fraction <- 0/0
> > if (fraction < .5) TRUE else FALSE
> Error in if (fraction < 0.5) TRUE else FALSE :
>   missing value where TRUE/FALSE needed
>
> -Bill
>
> On Fri, Jan 14, 2022 at 12:55 PM Bert Gunter <bgunter.4567 at gmail.com>
> wrote:
>
>> Unlikely.
>>
>> > 1/0
>> [1] Inf  ## not NA
>>
>> Bert
>>
>> On Fri, Jan 14, 2022 at 12:41 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>> > Hi Neha,
>> > You're using the argument "na.omit" in what function? My blind guess
>> > is that there's a divide by zero shooting you from behind.
>> >
>> > Jim
>> >
>> > On Sat, Jan 15, 2022 at 6:32 AM Neha gupta <neha.bologna90 at gmail.com>
>> > wrote:
>> > >
>> > > Hi everyone
>> > >
>> > > I use na.omit to remove NAs but still it gives me error
>> > >
>> > > Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed
>> > >
>> > > My data is:
>> > >
>> > > data.frame': 340 obs. of  15 variables:
>> > >  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
>> > >  $ NumSubclass  : num  0 0 0 0 0 0 0 0 0 0 ...
>> > >  $ McCabe       : num  1 1 1 1 1 1 3 3 3 3 ...
>> > >  $ LOC          : num  3 4 3 3 4 4 10 10 10 10 ...
>> > >  $ DepthNested  : num  1 1 1 1 1 1 2 2 2 2 ...
>> > >  $ CA           : num  1 1 1 1 1 1 1 1 1 1 ...
>> > >  $ CE           : num  2 2 2 2 2 2 2 2 2 2 ...
>> > >  $ Instability  : num  0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667
>> > > 0.667 0.667 ...
>> > >  $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
>> > >  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 2 2 4 13 13
>> 13
>> > 1 3
>> > > 4 7 ...
>> > >  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2
>> 2 2
>> > 2
>> > > 2 2 2 2 ...
>> > >
>> > >         [[alternative HTML version deleted]]
>> > >
>> > > ______________________________________________
>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > > https://stat.ethz.ch/mailman/listinfo/r-help
>> > > PLEASE do read the posting guide
>> > http://www.R-project.org/posting-guide.html
>> > > and provide commented, minimal, self-contained, reproducible code.
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> > http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From tebert @end|ng |rom u||@edu  Fri Jan 14 23:00:55 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Fri, 14 Jan 2022 22:00:55 +0000
Subject: [R] NAs are removed
In-Reply-To: <CA+nrPnt9ztbTnanbEiFCMDUS9aP24PxCG9sxFmnuU=hqyA-Qqw@mail.gmail.com>
References: <CA+nrPnv24xKA-ObkgrgSo9UJO1NQC=m1D1jArRLnEz5s3NNhzA@mail.gmail.com>
 <CA+8X3fWrauV6=aa5H5V_ez9JzCLVrCcfU=S5S2NtNvfkKruh7w@mail.gmail.com>
 <CA+nrPnt9ztbTnanbEiFCMDUS9aP24PxCG9sxFmnuU=hqyA-Qqw@mail.gmail.com>
Message-ID: <BN6PR2201MB1553770D77975215454EBFBCCF549@BN6PR2201MB1553.namprd22.prod.outlook.com>

Hi Neha,
   You used a variable named "fraction" so we took a guess. However, as another pointed out 1/0 does not give NA in R. number/0 returns Inf except 0/0 which returns NaN. So 1/0 <= 1 returns FALSE and 0/0 <= 1 returns NA. A great deal of the behavior of your program hinges on what "fraction" is in your program.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Neha gupta
Sent: Friday, January 14, 2022 4:50 PM
To: Jim Lemon <drjimlemon at gmail.com>
Cc: r-help mailing list <r-help at r-project.org>
Subject: Re: [R] NAs are removed

[External Email]

Hi Jim and Ebert

How I am using divide by zero, I did not understand? I am using caret and AUC metric.

If I do, what is the solution?

On Fri, Jan 14, 2022 at 9:41 PM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Neha,
> You're using the argument "na.omit" in what function? My blind guess 
> is that there's a divide by zero shooting you from behind.
>
> Jim
>
> On Sat, Jan 15, 2022 at 6:32 AM Neha gupta <neha.bologna90 at gmail.com>
> wrote:
> >
> > Hi everyone
> >
> > I use na.omit to remove NAs but still it gives me error
> >
> > Error in if (fraction <= 1) { : missing value where TRUE/FALSE 
> > needed
> >
> > My data is:
> >
> > data.frame': 340 obs. of  15 variables:
> >  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
> >  $ NumSubclass  : num  0 0 0 0 0 0 0 0 0 0 ...
> >  $ McCabe       : num  1 1 1 1 1 1 3 3 3 3 ...
> >  $ LOC          : num  3 4 3 3 4 4 10 10 10 10 ...
> >  $ DepthNested  : num  1 1 1 1 1 1 2 2 2 2 ...
> >  $ CA           : num  1 1 1 1 1 1 1 1 1 1 ...
> >  $ CE           : num  2 2 2 2 2 2 2 2 2 2 ...
> >  $ Instability  : num  0.667 0.667 0.667 0.667 0.667 0.667 0.667 
> > 0.667
> > 0.667 0.667 ...
> >  $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
> >  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 2 2 4 13 13 13
> 1 3
> > 4 7 ...
> >  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 
> > 2 2
> 2
> > 2 2 2 2 ...
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_ma
> > ilman_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2k
> > VeAsRzsn7AkP-g&m=WsafNBaOwXzuF-v3jJZaUbBRngZTxjDnPCJN1jlMOzYqG9yy06S
> > kfQKtGPM2OWM5&s=LqAgI3qNLyTF5KeFM9sT9jTT4rkvlcJa1V9CIW_SVy4&e=
> > PLEASE do read the posting guide
> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.or
> g_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeA
> sRzsn7AkP-g&m=WsafNBaOwXzuF-v3jJZaUbBRngZTxjDnPCJN1jlMOzYqG9yy06SkfQKt
> GPM2OWM5&s=hUs_mg3eaWhd-I4H-9rKF6C4B7CFwLsuBkx3Qv68_o0&e=
> > and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=WsafNBaOwXzuF-v3jJZaUbBRngZTxjDnPCJN1jlMOzYqG9yy06SkfQKtGPM2OWM5&s=LqAgI3qNLyTF5KeFM9sT9jTT4rkvlcJa1V9CIW_SVy4&e=
PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=WsafNBaOwXzuF-v3jJZaUbBRngZTxjDnPCJN1jlMOzYqG9yy06SkfQKtGPM2OWM5&s=hUs_mg3eaWhd-I4H-9rKF6C4B7CFwLsuBkx3Qv68_o0&e=
and provide commented, minimal, self-contained, reproducible code.


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Fri Jan 14 23:11:09 2022
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Fri, 14 Jan 2022 23:11:09 +0100
Subject: [R] NAs are removed
In-Reply-To: <BN6PR2201MB1553770D77975215454EBFBCCF549@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <CA+nrPnv24xKA-ObkgrgSo9UJO1NQC=m1D1jArRLnEz5s3NNhzA@mail.gmail.com>
 <CA+8X3fWrauV6=aa5H5V_ez9JzCLVrCcfU=S5S2NtNvfkKruh7w@mail.gmail.com>
 <CA+nrPnt9ztbTnanbEiFCMDUS9aP24PxCG9sxFmnuU=hqyA-Qqw@mail.gmail.com>
 <BN6PR2201MB1553770D77975215454EBFBCCF549@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <CA+nrPnvUTUn1hfZMGOzEGSvuRsf3o6_1asZwi0px2jMqP5rvug@mail.gmail.com>

I have a variable in dataset "CA", which has the following values:

[1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1
 [40] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
2 2 2 2

then I used this statement

prot <- ifelse(ts$CA == '2', 0, 1)

Is the problem exist here?


On Fri, Jan 14, 2022 at 11:02 PM Ebert,Timothy Aaron <tebert at ufl.edu> wrote:

> Hi Neha,
>    You used a variable named "fraction" so we took a guess. However, as
> another pointed out 1/0 does not give NA in R. number/0 returns Inf except
> 0/0 which returns NaN. So 1/0 <= 1 returns FALSE and 0/0 <= 1 returns NA. A
> great deal of the behavior of your program hinges on what "fraction" is in
> your program.
>
> Tim
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Neha gupta
> Sent: Friday, January 14, 2022 4:50 PM
> To: Jim Lemon <drjimlemon at gmail.com>
> Cc: r-help mailing list <r-help at r-project.org>
> Subject: Re: [R] NAs are removed
>
> [External Email]
>
> Hi Jim and Ebert
>
> How I am using divide by zero, I did not understand? I am using caret and
> AUC metric.
>
> If I do, what is the solution?
>
> On Fri, Jan 14, 2022 at 9:41 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> > Hi Neha,
> > You're using the argument "na.omit" in what function? My blind guess
> > is that there's a divide by zero shooting you from behind.
> >
> > Jim
> >
> > On Sat, Jan 15, 2022 at 6:32 AM Neha gupta <neha.bologna90 at gmail.com>
> > wrote:
> > >
> > > Hi everyone
> > >
> > > I use na.omit to remove NAs but still it gives me error
> > >
> > > Error in if (fraction <= 1) { : missing value where TRUE/FALSE
> > > needed
> > >
> > > My data is:
> > >
> > > data.frame': 340 obs. of  15 variables:
> > >  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
> > >  $ NumSubclass  : num  0 0 0 0 0 0 0 0 0 0 ...
> > >  $ McCabe       : num  1 1 1 1 1 1 3 3 3 3 ...
> > >  $ LOC          : num  3 4 3 3 4 4 10 10 10 10 ...
> > >  $ DepthNested  : num  1 1 1 1 1 1 2 2 2 2 ...
> > >  $ CA           : num  1 1 1 1 1 1 1 1 1 1 ...
> > >  $ CE           : num  2 2 2 2 2 2 2 2 2 2 ...
> > >  $ Instability  : num  0.667 0.667 0.667 0.667 0.667 0.667 0.667
> > > 0.667
> > > 0.667 0.667 ...
> > >  $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
> > >  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 2 2 4 13 13 13
> > 1 3
> > > 4 7 ...
> > >  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2
> > > 2 2
> > 2
> > > 2 2 2 2 ...
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_ma
> > > ilman_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2k
> > > VeAsRzsn7AkP-g&m=WsafNBaOwXzuF-v3jJZaUbBRngZTxjDnPCJN1jlMOzYqG9yy06S
> > > kfQKtGPM2OWM5&s=LqAgI3qNLyTF5KeFM9sT9jTT4rkvlcJa1V9CIW_SVy4&e=
> > > PLEASE do read the posting guide
> > https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.or
> > g_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeA
> > sRzsn7AkP-g&m=WsafNBaOwXzuF-v3jJZaUbBRngZTxjDnPCJN1jlMOzYqG9yy06SkfQKt
> > GPM2OWM5&s=hUs_mg3eaWhd-I4H-9rKF6C4B7CFwLsuBkx3Qv68_o0&e=
> > > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=WsafNBaOwXzuF-v3jJZaUbBRngZTxjDnPCJN1jlMOzYqG9yy06SkfQKtGPM2OWM5&s=LqAgI3qNLyTF5KeFM9sT9jTT4rkvlcJa1V9CIW_SVy4&e=
> PLEASE do read the posting guide
> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=WsafNBaOwXzuF-v3jJZaUbBRngZTxjDnPCJN1jlMOzYqG9yy06SkfQKtGPM2OWM5&s=hUs_mg3eaWhd-I4H-9rKF6C4B7CFwLsuBkx3Qv68_o0&e=
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |eo@m@d@ @end|ng |rom @yon|c@eu  Fri Jan 14 23:22:55 2022
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leonard Mada)
Date: Sat, 15 Jan 2022 00:22:55 +0200
Subject: [R] Method Guidance
In-Reply-To: <366cad50-fcab-ccf3-3622-a30787f69581@syonic.eu>
References: <366cad50-fcab-ccf3-3622-a30787f69581@syonic.eu>
Message-ID: <9d838619-5d19-4949-8d82-b9eecb67bc07@syonic.eu>

Dear Jeff,


I am sending an updated version of the code.


The initial version assumed that the time points correspond to an 
integer sequence. The code would fail for arbitrary times.


The new code is robust. I still assume that the data is in column-format 
and that you want the time to the previous "A"-event, even if there are 
other non-A events in between.


The code is similar, but we cannot use seq(0, x-1) anymore. Instead, we 
will repeat the time point of the previous A-event. (Last-A Carried forward)


# jrdf = the data frame from my previous mail;
cumEvent = cumsum(jrdf$Event_A);
# we cannot use the actual values of the cumsum,
# but will use the number of (same) values to the previous event;
freqEvent = rle(cumEvent);
freqEvent = freqEvent$lengths;

# repeat the time-points
timesA = jrdf$Time[jrdf$Event_A == 1];
sameTime = rep(timesA, freqEvent);
timeToA = jrdf$Time - sameTime;

### Step 2:
# extract/view the times (as before);
timeToA[jrdf$Event_B >= 1];
# Every Time to A: e.g. for multiple extractions;
cbind(jrdf, timeToA);
# Time to A only for B: set non-B to 0;


# Note:
- the rle() function might be less known;
- it is "equivalent" to:
tbl = table(cumEvent);
# to be on the safe side (as the cumsum is increasing):
id = order(as.numeric(names(tbl)));
tbl = tbl[id];


Hope this helps,


Leonard


On 1/14/2022 3:30 AM, Leonard Mada wrote:
> Dear Jeff,
>
>
> My answer is a little bit late, but I hope it helps.
>
>
> jrdf = read.table(text="Time?? Event_A??? Event_B?? Lag_B
> 1????????? 1???????? 1??????? 0
> 2????????? 0???????? 1??????? 1
> 3????????? 0???????? 0??????? 0
> 4????????? 1???????? 0??????? 0
> 5????????? 0???????? 1??????? 1
> 6????????? 0???????? 0??????? 0
> 7????????? 0???????? 1??????? 3
> 8????????? 1???????? 1??????? 0
> 9????????? 0???????? 0??????? 0
> 10???????? 0???????? 1??????? 2",
> header=TRUE, stringsAsFactors=FALSE)
>
> Assuming that:
> - Time, Event_A, Event_B are given;
> - Lag_B needs to be computed;
>
> Step 1:
> - compute time to previous Event A;
>
> tmp = jrdf[, c(1,2)];
> # add an extra event so last rows are not lost:
> tmp = rbind(tmp, c(nrow(tmp) + 1, 1));
>
> timeBetweenA = diff(tmp$Time[tmp$Event_A > 0]);
> timeToA = unlist(sapply(timeBetweenA, function(x) seq(0, x-1)))
>
>
> ### Step 2:
> # - extract the times;
> timeToA[jrdf$Event_B >= 1];
> cbind(jrdf, timeToA);
>
>
> Sincerely,
>
>
> Leonard
>
>


From tebert @end|ng |rom u||@edu  Fri Jan 14 23:23:52 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Fri, 14 Jan 2022 22:23:52 +0000
Subject: [R] NAs are removed
In-Reply-To: <CA+nrPnvUTUn1hfZMGOzEGSvuRsf3o6_1asZwi0px2jMqP5rvug@mail.gmail.com>
References: <CA+nrPnv24xKA-ObkgrgSo9UJO1NQC=m1D1jArRLnEz5s3NNhzA@mail.gmail.com>
 <CA+8X3fWrauV6=aa5H5V_ez9JzCLVrCcfU=S5S2NtNvfkKruh7w@mail.gmail.com>
 <CA+nrPnt9ztbTnanbEiFCMDUS9aP24PxCG9sxFmnuU=hqyA-Qqw@mail.gmail.com>
 <BN6PR2201MB1553770D77975215454EBFBCCF549@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <CA+nrPnvUTUn1hfZMGOzEGSvuRsf3o6_1asZwi0px2jMqP5rvug@mail.gmail.com>
Message-ID: <BN6PR2201MB1553A4F07DD3847CA33B094FCF549@BN6PR2201MB1553.namprd22.prod.outlook.com>

I don?t see any. To support this claim I tried it (but no dataframe):
CA = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2)
prot <- ifelse(CA == '2', 0, 1)
print(prot)

R responds:
[1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
[37] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
[73] 0 0 0 0 0 0

You can check other statements in the same way. That said, in a huge dataset you might want to ask if the data provided match what you are assuming is there. If you type unique(ts$CA) do you get anything other than 1 and 2? This is a common task of figuring out if the problem is with the code or the data.

Tim
From: Neha gupta <neha.bologna90 at gmail.com>
Sent: Friday, January 14, 2022 5:11 PM
To: Ebert,Timothy Aaron <tebert at ufl.edu>
Cc: Jim Lemon <drjimlemon at gmail.com>; r-help mailing list <r-help at r-project.org>
Subject: Re: [R] NAs are removed

[External Email]
I have a variable in dataset "CA", which has the following values:

[1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
 [40] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2

then I used this statement

prot <- ifelse(ts$CA == '2', 0, 1)

Is the problem exist here?

On Fri, Jan 14, 2022 at 11:02 PM Ebert,Timothy Aaron <tebert at ufl.edu<mailto:tebert at ufl.edu>> wrote:
Hi Neha,
   You used a variable named "fraction" so we took a guess. However, as another pointed out 1/0 does not give NA in R. number/0 returns Inf except 0/0 which returns NaN. So 1/0 <= 1 returns FALSE and 0/0 <= 1 returns NA. A great deal of the behavior of your program hinges on what "fraction" is in your program.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org<mailto:r-help-bounces at r-project.org>> On Behalf Of Neha gupta
Sent: Friday, January 14, 2022 4:50 PM
To: Jim Lemon <drjimlemon at gmail.com<mailto:drjimlemon at gmail.com>>
Cc: r-help mailing list <r-help at r-project.org<mailto:r-help at r-project.org>>
Subject: Re: [R] NAs are removed

[External Email]

Hi Jim and Ebert

How I am using divide by zero, I did not understand? I am using caret and AUC metric.

If I do, what is the solution?

On Fri, Jan 14, 2022 at 9:41 PM Jim Lemon <drjimlemon at gmail.com<mailto:drjimlemon at gmail.com>> wrote:

> Hi Neha,
> You're using the argument "na.omit" in what function? My blind guess
> is that there's a divide by zero shooting you from behind.
>
> Jim
>
> On Sat, Jan 15, 2022 at 6:32 AM Neha gupta <neha.bologna90 at gmail.com<mailto:neha.bologna90 at gmail.com>>
> wrote:
> >
> > Hi everyone
> >
> > I use na.omit to remove NAs but still it gives me error
> >
> > Error in if (fraction <= 1) { : missing value where TRUE/FALSE
> > needed
> >
> > My data is:
> >
> > data.frame': 340 obs. of  15 variables:
> >  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
> >  $ NumSubclass  : num  0 0 0 0 0 0 0 0 0 0 ...
> >  $ McCabe       : num  1 1 1 1 1 1 3 3 3 3 ...
> >  $ LOC          : num  3 4 3 3 4 4 10 10 10 10 ...
> >  $ DepthNested  : num  1 1 1 1 1 1 2 2 2 2 ...
> >  $ CA           : num  1 1 1 1 1 1 1 1 1 1 ...
> >  $ CE           : num  2 2 2 2 2 2 2 2 2 2 ...
> >  $ Instability  : num  0.667 0.667 0.667 0.667 0.667 0.667 0.667
> > 0.667
> > 0.667 0.667 ...
> >  $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
> >  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 2 2 4 13 13 13
> 1 3
> > 4 7 ...
> >  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2
> > 2 2
> 2
> > 2 2 2 2 ...
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_ma
> > ilman_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2k
> > VeAsRzsn7AkP-g&m=WsafNBaOwXzuF-v3jJZaUbBRngZTxjDnPCJN1jlMOzYqG9yy06S
> > kfQKtGPM2OWM5&s=LqAgI3qNLyTF5KeFM9sT9jTT4rkvlcJa1V9CIW_SVy4&e=
> > PLEASE do read the posting guide
> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.or
> g_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeA
> sRzsn7AkP-g&m=WsafNBaOwXzuF-v3jJZaUbBRngZTxjDnPCJN1jlMOzYqG9yy06SkfQKt
> GPM2OWM5&s=hUs_mg3eaWhd-I4H-9rKF6C4B7CFwLsuBkx3Qv68_o0&e=
> > and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=WsafNBaOwXzuF-v3jJZaUbBRngZTxjDnPCJN1jlMOzYqG9yy06SkfQKtGPM2OWM5&s=LqAgI3qNLyTF5KeFM9sT9jTT4rkvlcJa1V9CIW_SVy4&e=
PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=WsafNBaOwXzuF-v3jJZaUbBRngZTxjDnPCJN1jlMOzYqG9yy06SkfQKtGPM2OWM5&s=hUs_mg3eaWhd-I4H-9rKF6C4B7CFwLsuBkx3Qv68_o0&e=
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Fri Jan 14 23:37:45 2022
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Fri, 14 Jan 2022 22:37:45 +0000
Subject: [R] [External]  NAs are removed
In-Reply-To: <BN6PR2201MB1553A4F07DD3847CA33B094FCF549@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <CA+nrPnv24xKA-ObkgrgSo9UJO1NQC=m1D1jArRLnEz5s3NNhzA@mail.gmail.com>
 <CA+8X3fWrauV6=aa5H5V_ez9JzCLVrCcfU=S5S2NtNvfkKruh7w@mail.gmail.com>
 <CA+nrPnt9ztbTnanbEiFCMDUS9aP24PxCG9sxFmnuU=hqyA-Qqw@mail.gmail.com>
 <BN6PR2201MB1553770D77975215454EBFBCCF549@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <CA+nrPnvUTUn1hfZMGOzEGSvuRsf3o6_1asZwi0px2jMqP5rvug@mail.gmail.com>
 <BN6PR2201MB1553A4F07DD3847CA33B094FCF549@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <AB4CA04D-D471-470D-8035-82A13BE59739@temple.edu>

this is a related issue.  For this example, the ifelse statement is 10 times slower than
a much simpler != comparison.


> tmp <- sample(1:2, 40, TRUE)
> tmp
 [1] 2 2 2 2 1 2 1 2 1 1 1 1 1 2 1 2 2 1 1 2 1 2 2 2 1 1 1 2 2 1 2 1 1 1 2 1 2 1 2 2
> ifelse(tmp==2, 0, 1)
 [1] 0 0 0 0 1 0 1 0 1 1 1 1 1 0 1 0 0 1 1 0 1 0 0 0 1 1 1 0 0 1 0 1 1 1 0 1 0 1 0 0
> as.numeric(tmp != 2)
 [1] 0 0 0 0 1 0 1 0 1 1 1 1 1 0 1 0 0 1 1 0 1 0 0 0 1 1 1 0 0 1 0 1 1 1 0 1 0 1 0 0
>??micro
> microbenchmark::microbenchmark(ifelse=ifelse(tmp==2, 0, 1), notequal=as.numeric(tmp !=2))
Unit: nanoseconds
     expr  min   lq    mean median   uq   max neval cld
   ifelse 2952 3239 3542.81 3382.5 3567 12464   100   b
 notequal  205  287  348.09  328.0  369  1599   100  a 


> 
> From: Neha gupta <neha.bologna90 at gmail.com>
> Sent: Friday, January 14, 2022 5:11 PM
> To: Ebert,Timothy Aaron <tebert at ufl.edu>
> Cc: Jim Lemon <drjimlemon at gmail.com>; r-help mailing list <r-help at r-project.org>
> Subject: Re: [R] NAs are removed
> 
> [External Email]
> I have a variable in dataset "CA", which has the following values:
> 
> [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
> [40] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
> 
> then I used this statement
> 
> prot <- ifelse(ts$CA == '2', 0, 1)
> 
> Is the problem exist here?
> 


From @v|gro@@ @end|ng |rom ver|zon@net  Fri Jan 14 23:47:40 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Fri, 14 Jan 2022 22:47:40 +0000 (UTC)
Subject: [R] NAs are removed
In-Reply-To: <CA+nrPnvUTUn1hfZMGOzEGSvuRsf3o6_1asZwi0px2jMqP5rvug@mail.gmail.com>
References: <CA+nrPnv24xKA-ObkgrgSo9UJO1NQC=m1D1jArRLnEz5s3NNhzA@mail.gmail.com>
 <CA+8X3fWrauV6=aa5H5V_ez9JzCLVrCcfU=S5S2NtNvfkKruh7w@mail.gmail.com>
 <CA+nrPnt9ztbTnanbEiFCMDUS9aP24PxCG9sxFmnuU=hqyA-Qqw@mail.gmail.com>
 <BN6PR2201MB1553770D77975215454EBFBCCF549@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <CA+nrPnvUTUn1hfZMGOzEGSvuRsf3o6_1asZwi0px2jMqP5rvug@mail.gmail.com>
Message-ID: <317421124.228986.1642200460828@mail.yahoo.com>

I do not know what your major problem/issue is but the code you shared seems to be looking for a character value of '2' in what looks like a numeric vector containing the number 2.


-----Original Message-----
From: Neha gupta <neha.bologna90 at gmail.com>
To: Ebert,Timothy Aaron <tebert at ufl.edu>
Cc: r-help mailing list <r-help at r-project.org>
Sent: Fri, Jan 14, 2022 5:11 pm
Subject: Re: [R] NAs are removed

I have a variable in dataset "CA", which has the following values:

[1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1
 [40] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
2 2 2 2

then I used this statement

prot <- ifelse(ts$CA == '2', 0, 1)

Is the problem exist here?


On Fri, Jan 14, 2022 at 11:02 PM Ebert,Timothy Aaron <tebert at ufl.edu> wrote:

> Hi Neha,
>? ? You used a variable named "fraction" so we took a guess. However, as
> another pointed out 1/0 does not give NA in R. number/0 returns Inf except
> 0/0 which returns NaN. So 1/0 <= 1 returns FALSE and 0/0 <= 1 returns NA. A
> great deal of the behavior of your program hinges on what "fraction" is in
> your program.
>
> Tim
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Neha gupta
> Sent: Friday, January 14, 2022 4:50 PM
> To: Jim Lemon <drjimlemon at gmail.com>
> Cc: r-help mailing list <r-help at r-project.org>
> Subject: Re: [R] NAs are removed
>
> [External Email]
>
> Hi Jim and Ebert
>
> How I am using divide by zero, I did not understand? I am using caret and
> AUC metric.
>
> If I do, what is the solution?
>
> On Fri, Jan 14, 2022 at 9:41 PM Jim Lemon <drjimlemon at gmail.com> wrote:
>
> > Hi Neha,
> > You're using the argument "na.omit" in what function? My blind guess
> > is that there's a divide by zero shooting you from behind.
> >
> > Jim
> >
> > On Sat, Jan 15, 2022 at 6:32 AM Neha gupta <neha.bologna90 at gmail.com>
> > wrote:
> > >
> > > Hi everyone
> > >
> > > I use na.omit to remove NAs but still it gives me error
> > >
> > > Error in if (fraction <= 1) { : missing value where TRUE/FALSE
> > > needed
> > >
> > > My data is:
> > >
> > > data.frame': 340 obs. of? 15 variables:
> > >? $ DepthTree? ? : num? 1 1 1 1 1 1 1 1 1 1 ...
> > >? $ NumSubclass? : num? 0 0 0 0 0 0 0 0 0 0 ...
> > >? $ McCabe? ? ? : num? 1 1 1 1 1 1 3 3 3 3 ...
> > >? $ LOC? ? ? ? ? : num? 3 4 3 3 4 4 10 10 10 10 ...
> > >? $ DepthNested? : num? 1 1 1 1 1 1 2 2 2 2 ...
> > >? $ CA? ? ? ? ? : num? 1 1 1 1 1 1 1 1 1 1 ...
> > >? $ CE? ? ? ? ? : num? 2 2 2 2 2 2 2 2 2 2 ...
> > >? $ Instability? : num? 0.667 0.667 0.667 0.667 0.667 0.667 0.667
> > > 0.667
> > > 0.667 0.667 ...
> > >? $ numCovered? : num? 0 0 0 0 0 0 0 0 0 0 ...
> > >? $ operator? ? : Factor w/ 16 levels "T0","T1","T2",..: 2 2 4 13 13 13
> > 1 3
> > > 4 7 ...
> > >? $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2
> > > 2 2
> > 2
> > > 2 2 2 2 ...
> > >
> > >? ? ? ? [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_ma
> > > ilman_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2k
> > > VeAsRzsn7AkP-g&m=WsafNBaOwXzuF-v3jJZaUbBRngZTxjDnPCJN1jlMOzYqG9yy06S
> > > kfQKtGPM2OWM5&s=LqAgI3qNLyTF5KeFM9sT9jTT4rkvlcJa1V9CIW_SVy4&e=
> > > PLEASE do read the posting guide
> > https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.or
> > g_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeA
> > sRzsn7AkP-g&m=WsafNBaOwXzuF-v3jJZaUbBRngZTxjDnPCJN1jlMOzYqG9yy06SkfQKt
> > GPM2OWM5&s=hUs_mg3eaWhd-I4H-9rKF6C4B7CFwLsuBkx3Qv68_o0&e=
> > > and provide commented, minimal, self-contained, reproducible code.
> >
>
>? ? ? ? [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=WsafNBaOwXzuF-v3jJZaUbBRngZTxjDnPCJN1jlMOzYqG9yy06SkfQKtGPM2OWM5&s=LqAgI3qNLyTF5KeFM9sT9jTT4rkvlcJa1V9CIW_SVy4&e=
> PLEASE do read the posting guide
> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=WsafNBaOwXzuF-v3jJZaUbBRngZTxjDnPCJN1jlMOzYqG9yy06SkfQKtGPM2OWM5&s=hUs_mg3eaWhd-I4H-9rKF6C4B7CFwLsuBkx3Qv68_o0&e=
> and provide commented, minimal, self-contained, reproducible code.
>

??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From m@rt|n@@m|th @end|ng |rom durh@m@@c@uk  Thu Jan 13 14:37:24 2022
From: m@rt|n@@m|th @end|ng |rom durh@m@@c@uk (Martin R. Smith)
Date: Thu, 13 Jan 2022 13:37:24 +0000
Subject: [R] [R-pkgs] Package "Rogue": Detect wildcard taxa in sets of
 phylogenetic trees
Message-ID: <CANotEPuHoVPYJ9W35rQniFmB035fD5Mf-axwUMFv-_T-V-jOYA@mail.gmail.com>

Dear R users,

Package "Rogue" has been published on CRAN:
https://CRAN.R-project.org/package=Rogue.

"Rogue" improves phylogenetic analysis by detecting wildcard taxa whose
inconsistent position reduces split support and resolution in consensus
trees.  It implements an effective new information-theoretic approach
(Smith 2022, https://doi.org/10.1093/sysbio/syab099), and provides an R
interface to the established "RogueNaRok" C library (Aberer et al. 2013,
https://doi.org/10.1093/sysbio/sys078).

A vignette demonstrating use on Bayesian posterior tree sets can be found
at https://cran.r-project.org/web/packages/Rogue/vignettes/Bayesian.html.
Questions and bug reports are welcome at https://github.com/ms609/Rogue.

Regards,

Martin Smith

--

*Dr. Martin R. Smith*
Associate Professor in Palaeontology
Durham University
Department of Earth Sciences
Mountjoy Site, South Road, Durham, DH1 3LE United Kingdom

*M*: +44 (0)774 353 7510
*E*: martin.smith at durham.ac.uk

smithlabdurham.github.io
twitter.com/PalaeoSmith

The information in this e-mail and any attachments is co...{{dropped:7}}


From chr|@ho|d @end|ng |rom p@yctc@org  Sat Jan 15 18:00:32 2022
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Sat, 15 Jan 2022 17:00:32 +0000 (UTC)
Subject: [R] How to create density ellipses with R
In-Reply-To: <13cf296f-3a11-804d-953f-7ac57bd1b3f2@mcmaster.ca>
References: <12785_1642173199_20EFDJkh027463_CAMOcQfOottVWXOJjaD=q4ootDkgfgPTP4YnPJpRa70kQOYay+g@mail.gmail.com>
 <45f23a0f-6aa6-1668-2962-50b5d82112e2@mcmaster.ca>
 <CAMOcQfNDQKA+afosUj=+A2rZk80NE7mgmQ1UtUrTE8ZLMy3i0A@mail.gmail.com>
 <13cf296f-3a11-804d-953f-7ac57bd1b3f2@mcmaster.ca>
Message-ID: <1253147752.4951414.1642266032345.JavaMail.zimbra@psyctc.org>

This spurred me on to clarify my own understanding of these ellipses (and of
ellipsoid hulls) and led to:

https://www.psyctc.org/Rblog/posts/2022-01-15-data-ellipses-and-confidence-ellipses/

And I am, decidedly nervously, putting it here in case it's useful to you Paul or
to anyone else.  I think I have the basic ideas correct but of course, if any proper
statisticians have corrections, I would love to receive them, off list probably 
unless the errors are terrible.  I am entirely self-taught as a statistician, much
of what I've learned has come from probably over 10, perhaps nearer 20 years on this
list.  Thanks to all for all the work to maintain the list and contribute to it.

Chris

----- Original Message -----
> From: "John Fox" <jfox at mcmaster.ca>
> To: "Paul Bernal" <paulbernal07 at gmail.com>
> Cc: "R" <r-help at r-project.org>
> Sent: Friday, 14 January, 2022 18:53:55
> Subject: Re: [R] How to create density ellipses with R

> Dear Paul,
> 
> On 2022-01-14 1:17 p.m., Paul Bernal wrote:
>> Dear John and R community friends,
>> 
>> To be a little bit more specific, what I need to accomplish is the
>> creation of a confidence interval ellipse over a scatterplot?at
>> different percentiles. The confidence interval ellipses should be drawn
>> over the scatterplot.
> 
> I'm not sure what you mean. Confidence ellipses are for regression
> coefficients and so are on the scale of the coefficients; data
> (concentration) ellipses are for and on the scale of the explanatory
> variables. As it turns out, for a linear model, the former is the
> rescaled 90 degree rotation of the latter.
> 
> Because the scatterplot of the (two) variables has the variables on the
> axes, a data ellipse but not a confidence ellipse makes sense (i.e., is
> in the proper units). Data ellipses are drawn by car::dataEllipse() and
> (as explained by Martin Maechler) cluster::ellipsoidPoints(); confidence
> ellipses are drawn by car::confidenceEllipse() and the various methods
> of ellipse::ellipse().
> 
> I hope this helps,
>  John
> 
>> 
>> Any other guidance will be greatly appreciated.
>> 
>> Cheers,
>> 
>> Paul
>> 
>> El vie, 14 ene 2022 a las 11:27, John Fox (<jfox at mcmaster.ca
>> <mailto:jfox at mcmaster.ca>>) escribi?:
>> 
>>     Dear Paul,
>> 
>>     As I understand it, the ellipse package is meant for drawing confidence
>>     ellipses, not density (i.e., data) ellipses. You should be able to use
>>     ellipse::ellipse() to draw a bivariate-normal density ellipse (assuming
>>     that's what you want), but you'll have to do some computation first.
>> 
>>     You might find the dataEllipse() function in the car package more
>>     convenient (again assuming that you want bivariate-normal density
>>     contours).
>> 
>>     I hope this helps,
>>      ? John
>> 
>>     --
>>     John Fox, Professor Emeritus
>>     McMaster University
>>     Hamilton, Ontario, Canada
>>     web: https://socialsciences.mcmaster.ca/jfox/
>>     <https://socialsciences.mcmaster.ca/jfox/>
>> 
>>     On 2022-01-14 10:12 a.m., Paul Bernal wrote:
>>      > Dear R friends,
>>      >
>>      > Happy new year to you all. Not quite sure if this is the proper
>>     place to
>>      > ask about this, so I apologize if it is not, and if it isn?t,
>>     maybe you can
>>      > point me to the right place.
>>      >
>>      > I would like to know if there is any R package that allows me to
>>     produce
>>      > density ellipses. Searching through the net, I came across a
>>     package called
>>      > ellipse, but I'm not sure if this is the one I should use.
>>      >
>>      > Any help and/or guidance will be greatly appreciated.
>>      >
>>      > Best regards,
>>      >
>>      > Paul
>>      >
>>      >? ? ? ?[[alternative HTML version deleted]]
>>      >
>>      > ______________________________________________
>>      > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>>     -- To UNSUBSCRIBE and more, see
>>      > https://stat.ethz.ch/mailman/listinfo/r-help
>>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>>      > PLEASE do read the posting guide
>>     http://www.R-project.org/posting-guide.html
>>     <http://www.R-project.org/posting-guide.html>
>>      > and provide commented, minimal, self-contained, reproducible code.
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Chris Evans (he/him) <chris at psyctc.org> 
Visiting Professor, UDLA, Quito, Ecuador & Honorary Professor, University of Roehampton, London, UK.
Work web site: https://www.psyctc.org/psyctc/ 
CORE site:     https://www.coresystemtrust.org.uk/
Personal site: https://www.psyctc.org/pelerinage2016/
OMbook:        https://ombook.psyctc.org/book/


From j|ox @end|ng |rom mcm@@ter@c@  Sat Jan 15 18:49:55 2022
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Sat, 15 Jan 2022 12:49:55 -0500
Subject: [R] How to create density ellipses with R
In-Reply-To: <1253147752.4951414.1642266032345.JavaMail.zimbra@psyctc.org>
References: <12785_1642173199_20EFDJkh027463_CAMOcQfOottVWXOJjaD=q4ootDkgfgPTP4YnPJpRa70kQOYay+g@mail.gmail.com>
 <45f23a0f-6aa6-1668-2962-50b5d82112e2@mcmaster.ca>
 <CAMOcQfNDQKA+afosUj=+A2rZk80NE7mgmQ1UtUrTE8ZLMy3i0A@mail.gmail.com>
 <13cf296f-3a11-804d-953f-7ac57bd1b3f2@mcmaster.ca>
 <1253147752.4951414.1642266032345.JavaMail.zimbra@psyctc.org>
Message-ID: <2a96daa5-b3b0-0427-caf4-82b3e33eb4e1@mcmaster.ca>

Dear Chris,

I took a quick look at your document. You might be interested in 
Friendly, Monette, and Fox, Elliptical Insights: Understanding 
Statistical Methods through Elliptical Geometry, Statistical Science
2013, 28: 1?39, which is available at 
<https://arxiv.org/pdf/1302.4881.pdf>. I probably should cite that paper 
in ?car::ellipse.

Best,
John


On 2022-01-15 12:00 p.m., Chris Evans wrote:
> This spurred me on to clarify my own understanding of these ellipses (and of
> ellipsoid hulls) and led to:
> 
> https://www.psyctc.org/Rblog/posts/2022-01-15-data-ellipses-and-confidence-ellipses/
> 
> And I am, decidedly nervously, putting it here in case it's useful to you Paul or
> to anyone else.  I think I have the basic ideas correct but of course, if any proper
> statisticians have corrections, I would love to receive them, off list probably
> unless the errors are terrible.  I am entirely self-taught as a statistician, much
> of what I've learned has come from probably over 10, perhaps nearer 20 years on this
> list.  Thanks to all for all the work to maintain the list and contribute to it.
> 
> Chris
> 
> ----- Original Message -----
>> From: "John Fox" <jfox at mcmaster.ca>
>> To: "Paul Bernal" <paulbernal07 at gmail.com>
>> Cc: "R" <r-help at r-project.org>
>> Sent: Friday, 14 January, 2022 18:53:55
>> Subject: Re: [R] How to create density ellipses with R
> 
>> Dear Paul,
>>
>> On 2022-01-14 1:17 p.m., Paul Bernal wrote:
>>> Dear John and R community friends,
>>>
>>> To be a little bit more specific, what I need to accomplish is the
>>> creation of a confidence interval ellipse over a scatterplot?at
>>> different percentiles. The confidence interval ellipses should be drawn
>>> over the scatterplot.
>>
>> I'm not sure what you mean. Confidence ellipses are for regression
>> coefficients and so are on the scale of the coefficients; data
>> (concentration) ellipses are for and on the scale of the explanatory
>> variables. As it turns out, for a linear model, the former is the
>> rescaled 90 degree rotation of the latter.
>>
>> Because the scatterplot of the (two) variables has the variables on the
>> axes, a data ellipse but not a confidence ellipse makes sense (i.e., is
>> in the proper units). Data ellipses are drawn by car::dataEllipse() and
>> (as explained by Martin Maechler) cluster::ellipsoidPoints(); confidence
>> ellipses are drawn by car::confidenceEllipse() and the various methods
>> of ellipse::ellipse().
>>
>> I hope this helps,
>>   John
>>
>>>
>>> Any other guidance will be greatly appreciated.
>>>
>>> Cheers,
>>>
>>> Paul
>>>
>>> El vie, 14 ene 2022 a las 11:27, John Fox (<jfox at mcmaster.ca
>>> <mailto:jfox at mcmaster.ca>>) escribi?:
>>>
>>>      Dear Paul,
>>>
>>>      As I understand it, the ellipse package is meant for drawing confidence
>>>      ellipses, not density (i.e., data) ellipses. You should be able to use
>>>      ellipse::ellipse() to draw a bivariate-normal density ellipse (assuming
>>>      that's what you want), but you'll have to do some computation first.
>>>
>>>      You might find the dataEllipse() function in the car package more
>>>      convenient (again assuming that you want bivariate-normal density
>>>      contours).
>>>
>>>      I hope this helps,
>>>       ? John
>>>
>>>      --
>>>      John Fox, Professor Emeritus
>>>      McMaster University
>>>      Hamilton, Ontario, Canada
>>>      web: https://socialsciences.mcmaster.ca/jfox/
>>>      <https://socialsciences.mcmaster.ca/jfox/>
>>>
>>>      On 2022-01-14 10:12 a.m., Paul Bernal wrote:
>>>       > Dear R friends,
>>>       >
>>>       > Happy new year to you all. Not quite sure if this is the proper
>>>      place to
>>>       > ask about this, so I apologize if it is not, and if it isn?t,
>>>      maybe you can
>>>       > point me to the right place.
>>>       >
>>>       > I would like to know if there is any R package that allows me to
>>>      produce
>>>       > density ellipses. Searching through the net, I came across a
>>>      package called
>>>       > ellipse, but I'm not sure if this is the one I should use.
>>>       >
>>>       > Any help and/or guidance will be greatly appreciated.
>>>       >
>>>       > Best regards,
>>>       >
>>>       > Paul
>>>       >
>>>       >? ? ? ?[[alternative HTML version deleted]]
>>>       >
>>>       > ______________________________________________
>>>       > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>>>      -- To UNSUBSCRIBE and more, see
>>>       > https://stat.ethz.ch/mailman/listinfo/r-help
>>>      <https://stat.ethz.ch/mailman/listinfo/r-help>
>>>       > PLEASE do read the posting guide
>>>      http://www.R-project.org/posting-guide.html
>>>      <http://www.R-project.org/posting-guide.html>
>>>       > and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From |r|end|y @end|ng |rom yorku@c@  Sat Jan 15 18:52:43 2022
From: |r|end|y @end|ng |rom yorku@c@ (Michael L Friendly)
Date: Sat, 15 Jan 2022 17:52:43 +0000
Subject: [R] How to create density ellipses with R
Message-ID: <YT1PR01MB3146AD57AFB1F1F552C4E43DAB559@YT1PR01MB3146.CANPRD01.PROD.OUTLOOK.COM>

ellipse draws mathematical ellipses, I believe
For proper bivariate normal density ellipses (not simply contours), check out:

car::dataEllipse
heplots::covEllipses

-Michael


Message: 1
Date: Fri, 14 Jan 2022 10:12:50 -0500
From: Paul Bernal <paulbernal07 at gmail.com>
To: R <r-help at r-project.org>
Subject: [R] How to create density ellipses with R
Message-ID:
	<CAMOcQfOottVWXOJjaD=q4ootDkgfgPTP4YnPJpRa70kQOYay+g at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Dear R friends,

Happy new year to you all. Not quite sure if this is the proper place to
ask about this, so I apologize if it is not, and if it isn?t, maybe you can
point me to the right place.

I would like to know if there is any R package that allows me to produce
density ellipses. Searching through the net, I came across a package called
ellipse, but I'm not sure if this is the one I should use.

Any help and/or guidance will be greatly appreciated.

Best regards,

Paul

	[[alternative HTML version deleted]]




From r@turner @end|ng |rom @uck|@nd@@c@nz  Mon Jan 17 04:22:36 2022
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Mon, 17 Jan 2022 16:22:36 +1300
Subject: [R] 
 how to plot numeric variable against several categories with
 lattice bwplot?
In-Reply-To: <CAMk+s2Rwt7Bj7rmHYU-tJmXNZuxdC_jf06yhYgyYbWE7nFiagg@mail.gmail.com>
References: <CAMk+s2Rwt7Bj7rmHYU-tJmXNZuxdC_jf06yhYgyYbWE7nFiagg@mail.gmail.com>
Message-ID: <20220117162236.479f3328@rolf-Latitude-E7470>


On Thu, 13 Jan 2022 20:38:04 +0100
Luigi Marongiu <marongiu.luigi at gmail.com> wrote:

> Hello,
> I have a numerical variable (x) and a series of categories. I would
> like to make a box plot of x against each of the categories. How can I
> arrange the data so that I can accomplish it with lattice?
> At the moment I got this:
> ```
> df = data.frame(x = c(rep(1,5), rep(2,5), rep(3,5)),
> y = rnorm(15),
> f1 = rep(letters[1:5],3),
> f2 = rep(letters[7:9],5),
> f3 = c(rep(LETTERS[10:12],4), LETTERS[10:12]))
> df$x = factor(df$x)
> df$f1 = factor(df$f1)
> df$f2 = factor(df$f2)
> df$f3 = factor(df$f3)
> library(lattice)
> bwplot(y ~ x, data = df, auto.key = TRUE )
> ```
> Also, is it possible to have the wishers in solid line?
> Thank you

It is not at all clear to me what your are trying to do.  If you really
want "to make a box plot of x against each of the categories", you
could just do:

bwplot(x ~ f1, data = df, auto.key = TRUE )
bwplot(x ~ f2, data = df, auto.key = TRUE )
bwplot(x ~ f3, data = df, auto.key = TRUE )

successively.  But perhaps you meant "y" rather than "x".  Please
clarify what you wish to accomplish.

As to displaying the *whiskers* as solid lines ... that is one hell of
a good question!  I had to struggle:

xxx <- trellis.par.get("box.umbrella")
xxx$lty <- 1
trellis.par.set(box.umbrella=xxx)
junk <- rnorm(42)
bwplot(junk)

That gave me a boxplot "lying on its side"; I wanted one "standing up".
After a great deal more struggle I did

crud <- factor(rep(1,42),labels="")
bwplot(junk ~ crud,ylab="")

which gave me what I was after.

Perhaps others who are more knowledgeable than I could chip in with
better ideas.

But first Luigi must clarify what he wants to obtain.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From rmh @end|ng |rom temp|e@edu  Mon Jan 17 06:25:59 2022
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Mon, 17 Jan 2022 05:25:59 +0000
Subject: [R] [External] how to plot numeric variable against several
 categories with lattice bwplot?
In-Reply-To: <20220117162236.479f3328@rolf-Latitude-E7470>
References: <CAMk+s2Rwt7Bj7rmHYU-tJmXNZuxdC_jf06yhYgyYbWE7nFiagg@mail.gmail.com>
 <20220117162236.479f3328@rolf-Latitude-E7470>
Message-ID: <FBDDB87F-762E-4CD4-82E6-75FA8CCFA5C8@temple.edu>

My guess, continuing from Rolf, is that you should be using conditioning

 bwplot(~ y | f2, df, layout=c(3,1))

> On Jan 16, 2022, at 22:22, Rolf Turner <r.turner at auckland.ac.nz> wrote:
> 
> xxx <- trellis.par.get("box.umbrella")
> xxx$lty <- 1
> trellis.par.set(box.umbrella=xxx)
> junk <- rnorm(42)
> bwplot(junk)


From m@rn@@w@g|ey @end|ng |rom gm@||@com  Mon Jan 17 08:05:38 2022
From: m@rn@@w@g|ey @end|ng |rom gm@||@com (Marna Wagley)
Date: Sun, 16 Jan 2022 23:05:38 -0800
Subject: [R] How to convert category (or range/group) into continuous ?
Message-ID: <CAMwU6B01FEP5CxcXcOhP1h0-1zETOr58Cy-y4eFkwR9xvCOFAQ@mail.gmail.com>

Hi R users,
I first categorized the continuous data into groups (ranges or category)
but now I would like to change the category into a continuous data and
plot it. For example I have attached the data in which you can see two
columns named "group" and "value". The group column contains a range
(group, for example ), I am wondering how I can change the category data
(for example: "0,0.01]" )into continuous data with a 0.1 interval.
Thank you for your suggestions.

daT<-structure(list(group = c("(0,0.01]", "(0.01,0.025]", "(0.025,0.05]",
"(0.05,0.075]", "(0.075,0.1]", "(0.1,0.2]", "(0.2,0.3]", "(0.3,0.4]",
"(0.4,0.5]", "(0.5,0.6]", "(0.6,0.7]", "(0.7,0.8]", "(0.8,0.9]",
"(0.9,1]", "(1,1.1]", "(1.1,1.5]", "(1.5,2]", "(2,2.5]"), VALUE = c(1,
1, 1, 1, 1, 1, 0.944444444, 0.916666667, 0.888888889, 0.857777778,
0.826666667, 0.66, 0.439090909, 0.328636364, 0.273409091, 0.245795455,
 0.218181818, 0.084848485)), class = "data.frame", row.names = c(NA,
-18L))
thanks,
MW

	[[alternative HTML version deleted]]


From g||ted|||e2014 @end|ng |rom gm@||@com  Mon Jan 17 08:55:13 2022
From: g||ted|||e2014 @end|ng |rom gm@||@com (Ogbos Okike)
Date: Mon, 17 Jan 2022 08:55:13 +0100
Subject: [R] How to define a new space based on PC1 and PC2
Message-ID: <CAC8ss336afYwAxAToB+aQVqct=A8O9im-WCvBzEO5AXVydPoxQ@mail.gmail.com>

Dear Experts,
Happy New Year!!, and thank you very much for all the assistance you
rendered to me last year.

I ran a PCA (Principal component analysis) and would like to combine PC1
and PC2 in order to define a new space. The variances associated with PC1
and PC2 are respectively 51% and 14%.

The new space defined by PC1 and PC2 should result in the addition of the
variances of the two PCs, i.e. 51%+14% = 65%.

Some decision boundary lines/curves representing pth = 25%, 50%, 75% should
also be added to the plot combining PC1 and PC2.

I would be extremely happy to receive your help. The quires I tried to
articulate above are indeed comments raised by one of the reviewers of my
manuscript that recently returned for revision. The reviewer seems to have
done such analysis and has sent me a copy of his/her paper where such
analysis is presented in two plots. I would send the paper if anyone would
like to take a look at it.

Many thanks and warm regards
Ogbos

	[[alternative HTML version deleted]]


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Mon Jan 17 13:31:20 2022
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Mon, 17 Jan 2022 13:31:20 +0100
Subject: [R] 
 how to plot numeric variable against several categories with
 lattice bwplot?
In-Reply-To: <20220117162236.479f3328@rolf-Latitude-E7470>
References: <CAMk+s2Rwt7Bj7rmHYU-tJmXNZuxdC_jf06yhYgyYbWE7nFiagg@mail.gmail.com>
 <20220117162236.479f3328@rolf-Latitude-E7470>
Message-ID: <CAMk+s2Rf7iHDd++-g7sf5EDm15RZ3surSAmJ4u=+Ty4LSkbNeA@mail.gmail.com>

Yes, I would like to have a boxplot of y against each of the other
variables, each into a separate panel, without having to type the
command for each pair (I have 23 categories in the real data...).
Thank you for the solid line code (I thought it might have been a
simple parameter to add...)

On Mon, Jan 17, 2022 at 4:22 AM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>
> On Thu, 13 Jan 2022 20:38:04 +0100
> Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>
> > Hello,
> > I have a numerical variable (x) and a series of categories. I would
> > like to make a box plot of x against each of the categories. How can I
> > arrange the data so that I can accomplish it with lattice?
> > At the moment I got this:
> > ```
> > df = data.frame(x = c(rep(1,5), rep(2,5), rep(3,5)),
> > y = rnorm(15),
> > f1 = rep(letters[1:5],3),
> > f2 = rep(letters[7:9],5),
> > f3 = c(rep(LETTERS[10:12],4), LETTERS[10:12]))
> > df$x = factor(df$x)
> > df$f1 = factor(df$f1)
> > df$f2 = factor(df$f2)
> > df$f3 = factor(df$f3)
> > library(lattice)
> > bwplot(y ~ x, data = df, auto.key = TRUE )
> > ```
> > Also, is it possible to have the wishers in solid line?
> > Thank you
>
> It is not at all clear to me what your are trying to do.  If you really
> want "to make a box plot of x against each of the categories", you
> could just do:
>
> bwplot(x ~ f1, data = df, auto.key = TRUE )
> bwplot(x ~ f2, data = df, auto.key = TRUE )
> bwplot(x ~ f3, data = df, auto.key = TRUE )
>
> successively.  But perhaps you meant "y" rather than "x".  Please
> clarify what you wish to accomplish.
>
> As to displaying the *whiskers* as solid lines ... that is one hell of
> a good question!  I had to struggle:
>
> xxx <- trellis.par.get("box.umbrella")
> xxx$lty <- 1
> trellis.par.set(box.umbrella=xxx)
> junk <- rnorm(42)
> bwplot(junk)
>
> That gave me a boxplot "lying on its side"; I wanted one "standing up".
> After a great deal more struggle I did
>
> crud <- factor(rep(1,42),labels="")
> bwplot(junk ~ crud,ylab="")
>
> which gave me what I was after.
>
> Perhaps others who are more knowledgeable than I could chip in with
> better ideas.
>
> But first Luigi must clarify what he wants to obtain.
>
> cheers,
>
> Rolf Turner
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>


-- 
Best regards,
Luigi


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Jan 17 14:31:23 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 17 Jan 2022 13:31:23 +0000
Subject: [R] 
 how to plot numeric variable against several categories with
 lattice bwplot?
In-Reply-To: <CAMk+s2Rf7iHDd++-g7sf5EDm15RZ3surSAmJ4u=+Ty4LSkbNeA@mail.gmail.com>
References: <CAMk+s2Rwt7Bj7rmHYU-tJmXNZuxdC_jf06yhYgyYbWE7nFiagg@mail.gmail.com>
 <20220117162236.479f3328@rolf-Latitude-E7470>
 <CAMk+s2Rf7iHDd++-g7sf5EDm15RZ3surSAmJ4u=+Ty4LSkbNeA@mail.gmail.com>
Message-ID: <b9655d213e2a46cd88b8e840e1cd7864@SRVEXCHCM1301.precheza.cz>

Hi Luigi

Not sure how to do it in lattice but in ggplot you could use for cycle

for(i in 3:5) {
print(ggplot(df, aes(x=df[,i], y=y))+geom_boxplot()+ xlab(names(df)[i]))
}

It is better to put plots to pdf file

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Luigi Marongiu
> Sent: Monday, January 17, 2022 1:31 PM
> To: Rolf Turner <r.turner at auckland.ac.nz>
> Cc: r-help <r-help at r-project.org>
> Subject: Re: [R] how to plot numeric variable against several categories
with
> lattice bwplot?
> 
> Yes, I would like to have a boxplot of y against each of the other
variables, each
> into a separate panel, without having to type the command for each pair (I
have
> 23 categories in the real data...).
> Thank you for the solid line code (I thought it might have been a simple
> parameter to add...)
> 
> On Mon, Jan 17, 2022 at 4:22 AM Rolf Turner <r.turner at auckland.ac.nz>
> wrote:
> >
> >
> > On Thu, 13 Jan 2022 20:38:04 +0100
> > Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
> >
> > > Hello,
> > > I have a numerical variable (x) and a series of categories. I would
> > > like to make a box plot of x against each of the categories. How can
> > > I arrange the data so that I can accomplish it with lattice?
> > > At the moment I got this:
> > > ```
> > > df = data.frame(x = c(rep(1,5), rep(2,5), rep(3,5)), y = rnorm(15),
> > > f1 = rep(letters[1:5],3),
> > > f2 = rep(letters[7:9],5),
> > > f3 = c(rep(LETTERS[10:12],4), LETTERS[10:12])) df$x = factor(df$x)
> > > df$f1 = factor(df$f1)
> > > df$f2 = factor(df$f2)
> > > df$f3 = factor(df$f3)
> > > library(lattice)
> > > bwplot(y ~ x, data = df, auto.key = TRUE ) ``` Also, is it possible
> > > to have the wishers in solid line?
> > > Thank you
> >
> > It is not at all clear to me what your are trying to do.  If you
> > really want "to make a box plot of x against each of the categories",
> > you could just do:
> >
> > bwplot(x ~ f1, data = df, auto.key = TRUE ) bwplot(x ~ f2, data = df,
> > auto.key = TRUE ) bwplot(x ~ f3, data = df, auto.key = TRUE )
> >
> > successively.  But perhaps you meant "y" rather than "x".  Please
> > clarify what you wish to accomplish.
> >
> > As to displaying the *whiskers* as solid lines ... that is one hell of
> > a good question!  I had to struggle:
> >
> > xxx <- trellis.par.get("box.umbrella") xxx$lty <- 1
> > trellis.par.set(box.umbrella=xxx)
> > junk <- rnorm(42)
> > bwplot(junk)
> >
> > That gave me a boxplot "lying on its side"; I wanted one "standing up".
> > After a great deal more struggle I did
> >
> > crud <- factor(rep(1,42),labels="")
> > bwplot(junk ~ crud,ylab="")
> >
> > which gave me what I was after.
> >
> > Perhaps others who are more knowledgeable than I could chip in with
> > better ideas.
> >
> > But first Luigi must clarify what he wants to obtain.
> >
> > cheers,
> >
> > Rolf Turner
> >
> > --
> > Honorary Research Fellow
> > Department of Statistics
> > University of Auckland
> > Phone: +64-9-373-7599 ext. 88276
> >
> 
> 
> --
> Best regards,
> Luigi
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From m@rong|u@|u|g| @end|ng |rom gm@||@com  Mon Jan 17 14:34:13 2022
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Mon, 17 Jan 2022 14:34:13 +0100
Subject: [R] 
 how to plot numeric variable against several categories with
 lattice bwplot?
In-Reply-To: <b9655d213e2a46cd88b8e840e1cd7864@SRVEXCHCM1301.precheza.cz>
References: <CAMk+s2Rwt7Bj7rmHYU-tJmXNZuxdC_jf06yhYgyYbWE7nFiagg@mail.gmail.com>
 <20220117162236.479f3328@rolf-Latitude-E7470>
 <CAMk+s2Rf7iHDd++-g7sf5EDm15RZ3surSAmJ4u=+Ty4LSkbNeA@mail.gmail.com>
 <b9655d213e2a46cd88b8e840e1cd7864@SRVEXCHCM1301.precheza.cz>
Message-ID: <CAMk+s2SFqc3pbRz1-XpRVVYJfHYQEJz+TTht+0zTmmXWZ42-zw@mail.gmail.com>

Thanks, I'll check it out!

On Mon, Jan 17, 2022 at 2:31 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> Hi Luigi
>
> Not sure how to do it in lattice but in ggplot you could use for cycle
>
> for(i in 3:5) {
> print(ggplot(df, aes(x=df[,i], y=y))+geom_boxplot()+ xlab(names(df)[i]))
> }
>
> It is better to put plots to pdf file
>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Luigi Marongiu
> > Sent: Monday, January 17, 2022 1:31 PM
> > To: Rolf Turner <r.turner at auckland.ac.nz>
> > Cc: r-help <r-help at r-project.org>
> > Subject: Re: [R] how to plot numeric variable against several categories
> with
> > lattice bwplot?
> >
> > Yes, I would like to have a boxplot of y against each of the other
> variables, each
> > into a separate panel, without having to type the command for each pair (I
> have
> > 23 categories in the real data...).
> > Thank you for the solid line code (I thought it might have been a simple
> > parameter to add...)
> >
> > On Mon, Jan 17, 2022 at 4:22 AM Rolf Turner <r.turner at auckland.ac.nz>
> > wrote:
> > >
> > >
> > > On Thu, 13 Jan 2022 20:38:04 +0100
> > > Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
> > >
> > > > Hello,
> > > > I have a numerical variable (x) and a series of categories. I would
> > > > like to make a box plot of x against each of the categories. How can
> > > > I arrange the data so that I can accomplish it with lattice?
> > > > At the moment I got this:
> > > > ```
> > > > df = data.frame(x = c(rep(1,5), rep(2,5), rep(3,5)), y = rnorm(15),
> > > > f1 = rep(letters[1:5],3),
> > > > f2 = rep(letters[7:9],5),
> > > > f3 = c(rep(LETTERS[10:12],4), LETTERS[10:12])) df$x = factor(df$x)
> > > > df$f1 = factor(df$f1)
> > > > df$f2 = factor(df$f2)
> > > > df$f3 = factor(df$f3)
> > > > library(lattice)
> > > > bwplot(y ~ x, data = df, auto.key = TRUE ) ``` Also, is it possible
> > > > to have the wishers in solid line?
> > > > Thank you
> > >
> > > It is not at all clear to me what your are trying to do.  If you
> > > really want "to make a box plot of x against each of the categories",
> > > you could just do:
> > >
> > > bwplot(x ~ f1, data = df, auto.key = TRUE ) bwplot(x ~ f2, data = df,
> > > auto.key = TRUE ) bwplot(x ~ f3, data = df, auto.key = TRUE )
> > >
> > > successively.  But perhaps you meant "y" rather than "x".  Please
> > > clarify what you wish to accomplish.
> > >
> > > As to displaying the *whiskers* as solid lines ... that is one hell of
> > > a good question!  I had to struggle:
> > >
> > > xxx <- trellis.par.get("box.umbrella") xxx$lty <- 1
> > > trellis.par.set(box.umbrella=xxx)
> > > junk <- rnorm(42)
> > > bwplot(junk)
> > >
> > > That gave me a boxplot "lying on its side"; I wanted one "standing up".
> > > After a great deal more struggle I did
> > >
> > > crud <- factor(rep(1,42),labels="")
> > > bwplot(junk ~ crud,ylab="")
> > >
> > > which gave me what I was after.
> > >
> > > Perhaps others who are more knowledgeable than I could chip in with
> > > better ideas.
> > >
> > > But first Luigi must clarify what he wants to obtain.
> > >
> > > cheers,
> > >
> > > Rolf Turner
> > >
> > > --
> > > Honorary Research Fellow
> > > Department of Statistics
> > > University of Auckland
> > > Phone: +64-9-373-7599 ext. 88276
> > >
> >
> >
> > --
> > Best regards,
> > Luigi
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.



-- 
Best regards,
Luigi


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Mon Jan 17 14:48:10 2022
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Mon, 17 Jan 2022 19:18:10 +0530
Subject: [R] 
 how to plot numeric variable against several categories with
 lattice bwplot?
In-Reply-To: <b9655d213e2a46cd88b8e840e1cd7864@SRVEXCHCM1301.precheza.cz>
References: <CAMk+s2Rwt7Bj7rmHYU-tJmXNZuxdC_jf06yhYgyYbWE7nFiagg@mail.gmail.com>
 <20220117162236.479f3328@rolf-Latitude-E7470>
 <CAMk+s2Rf7iHDd++-g7sf5EDm15RZ3surSAmJ4u=+Ty4LSkbNeA@mail.gmail.com>
 <b9655d213e2a46cd88b8e840e1cd7864@SRVEXCHCM1301.precheza.cz>
Message-ID: <CADfFDC7jpD7PCA8VeFf=6YonVsYhVHOd+qXLV_V9Zmq-BcfxvQ@mail.gmail.com>

On Mon, Jan 17, 2022 at 7:01 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> Hi Luigi
>
> Not sure how to do it in lattice but in ggplot you could use for cycle
>
> for(i in 3:5) {
> print(ggplot(df, aes(x=df[,i], y=y))+geom_boxplot()+ xlab(names(df)[i]))
> }
>
> It is better to put plots to pdf file

Pretty much the same with lattice, e.g.,

flist <- sprintf("y ~ %s", setdiff(names(df), "y"))
plist <- lapply(flist, function(f) bwplot(as.formula(f), df))

print(plist)

You could then use latticeExtra::c.trellis() to combine them into a
single plot, but YMMV.

library(latticeExtra)
names(plist) <- flist
do.call(c, plist)

Best,
-Deepayan


>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Luigi Marongiu
> > Sent: Monday, January 17, 2022 1:31 PM
> > To: Rolf Turner <r.turner at auckland.ac.nz>
> > Cc: r-help <r-help at r-project.org>
> > Subject: Re: [R] how to plot numeric variable against several categories
> with
> > lattice bwplot?
> >
> > Yes, I would like to have a boxplot of y against each of the other
> variables, each
> > into a separate panel, without having to type the command for each pair (I
> have
> > 23 categories in the real data...).
> > Thank you for the solid line code (I thought it might have been a simple
> > parameter to add...)
> >
> > On Mon, Jan 17, 2022 at 4:22 AM Rolf Turner <r.turner at auckland.ac.nz>
> > wrote:
> > >
> > >
> > > On Thu, 13 Jan 2022 20:38:04 +0100
> > > Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
> > >
> > > > Hello,
> > > > I have a numerical variable (x) and a series of categories. I would
> > > > like to make a box plot of x against each of the categories. How can
> > > > I arrange the data so that I can accomplish it with lattice?
> > > > At the moment I got this:
> > > > ```
> > > > df = data.frame(x = c(rep(1,5), rep(2,5), rep(3,5)), y = rnorm(15),
> > > > f1 = rep(letters[1:5],3),
> > > > f2 = rep(letters[7:9],5),
> > > > f3 = c(rep(LETTERS[10:12],4), LETTERS[10:12])) df$x = factor(df$x)
> > > > df$f1 = factor(df$f1)
> > > > df$f2 = factor(df$f2)
> > > > df$f3 = factor(df$f3)
> > > > library(lattice)
> > > > bwplot(y ~ x, data = df, auto.key = TRUE ) ``` Also, is it possible
> > > > to have the wishers in solid line?
> > > > Thank you
> > >
> > > It is not at all clear to me what your are trying to do.  If you
> > > really want "to make a box plot of x against each of the categories",
> > > you could just do:
> > >
> > > bwplot(x ~ f1, data = df, auto.key = TRUE ) bwplot(x ~ f2, data = df,
> > > auto.key = TRUE ) bwplot(x ~ f3, data = df, auto.key = TRUE )
> > >
> > > successively.  But perhaps you meant "y" rather than "x".  Please
> > > clarify what you wish to accomplish.
> > >
> > > As to displaying the *whiskers* as solid lines ... that is one hell of
> > > a good question!  I had to struggle:
> > >
> > > xxx <- trellis.par.get("box.umbrella") xxx$lty <- 1
> > > trellis.par.set(box.umbrella=xxx)
> > > junk <- rnorm(42)
> > > bwplot(junk)
> > >
> > > That gave me a boxplot "lying on its side"; I wanted one "standing up".
> > > After a great deal more struggle I did
> > >
> > > crud <- factor(rep(1,42),labels="")
> > > bwplot(junk ~ crud,ylab="")
> > >
> > > which gave me what I was after.
> > >
> > > Perhaps others who are more knowledgeable than I could chip in with
> > > better ideas.
> > >
> > > But first Luigi must clarify what he wants to obtain.
> > >
> > > cheers,
> > >
> > > Rolf Turner
> > >
> > > --
> > > Honorary Research Fellow
> > > Department of Statistics
> > > University of Auckland
> > > Phone: +64-9-373-7599 ext. 88276
> > >
> >
> >
> > --
> > Best regards,
> > Luigi
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Mon Jan 17 15:13:01 2022
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Mon, 17 Jan 2022 15:13:01 +0100
Subject: [R] 
 how to plot numeric variable against several categories with
 lattice bwplot?
In-Reply-To: <CADfFDC7jpD7PCA8VeFf=6YonVsYhVHOd+qXLV_V9Zmq-BcfxvQ@mail.gmail.com>
References: <CAMk+s2Rwt7Bj7rmHYU-tJmXNZuxdC_jf06yhYgyYbWE7nFiagg@mail.gmail.com>
 <20220117162236.479f3328@rolf-Latitude-E7470>
 <CAMk+s2Rf7iHDd++-g7sf5EDm15RZ3surSAmJ4u=+Ty4LSkbNeA@mail.gmail.com>
 <b9655d213e2a46cd88b8e840e1cd7864@SRVEXCHCM1301.precheza.cz>
 <CADfFDC7jpD7PCA8VeFf=6YonVsYhVHOd+qXLV_V9Zmq-BcfxvQ@mail.gmail.com>
Message-ID: <CAMk+s2QRv8wimRSzAm13W97YVpTLtb2ssRWO=5hmUHYEMEQ1Rw@mail.gmail.com>

Thank you!

On Mon, Jan 17, 2022 at 2:48 PM Deepayan Sarkar
<deepayan.sarkar at gmail.com> wrote:
>
> On Mon, Jan 17, 2022 at 7:01 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
> >
> > Hi Luigi
> >
> > Not sure how to do it in lattice but in ggplot you could use for cycle
> >
> > for(i in 3:5) {
> > print(ggplot(df, aes(x=df[,i], y=y))+geom_boxplot()+ xlab(names(df)[i]))
> > }
> >
> > It is better to put plots to pdf file
>
> Pretty much the same with lattice, e.g.,
>
> flist <- sprintf("y ~ %s", setdiff(names(df), "y"))
> plist <- lapply(flist, function(f) bwplot(as.formula(f), df))
>
> print(plist)
>
> You could then use latticeExtra::c.trellis() to combine them into a
> single plot, but YMMV.
>
> library(latticeExtra)
> names(plist) <- flist
> do.call(c, plist)
>
> Best,
> -Deepayan
>
>
> >
> > Cheers
> > Petr
> >
> > > -----Original Message-----
> > > From: R-help <r-help-bounces at r-project.org> On Behalf Of Luigi Marongiu
> > > Sent: Monday, January 17, 2022 1:31 PM
> > > To: Rolf Turner <r.turner at auckland.ac.nz>
> > > Cc: r-help <r-help at r-project.org>
> > > Subject: Re: [R] how to plot numeric variable against several categories
> > with
> > > lattice bwplot?
> > >
> > > Yes, I would like to have a boxplot of y against each of the other
> > variables, each
> > > into a separate panel, without having to type the command for each pair (I
> > have
> > > 23 categories in the real data...).
> > > Thank you for the solid line code (I thought it might have been a simple
> > > parameter to add...)
> > >
> > > On Mon, Jan 17, 2022 at 4:22 AM Rolf Turner <r.turner at auckland.ac.nz>
> > > wrote:
> > > >
> > > >
> > > > On Thu, 13 Jan 2022 20:38:04 +0100
> > > > Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
> > > >
> > > > > Hello,
> > > > > I have a numerical variable (x) and a series of categories. I would
> > > > > like to make a box plot of x against each of the categories. How can
> > > > > I arrange the data so that I can accomplish it with lattice?
> > > > > At the moment I got this:
> > > > > ```
> > > > > df = data.frame(x = c(rep(1,5), rep(2,5), rep(3,5)), y = rnorm(15),
> > > > > f1 = rep(letters[1:5],3),
> > > > > f2 = rep(letters[7:9],5),
> > > > > f3 = c(rep(LETTERS[10:12],4), LETTERS[10:12])) df$x = factor(df$x)
> > > > > df$f1 = factor(df$f1)
> > > > > df$f2 = factor(df$f2)
> > > > > df$f3 = factor(df$f3)
> > > > > library(lattice)
> > > > > bwplot(y ~ x, data = df, auto.key = TRUE ) ``` Also, is it possible
> > > > > to have the wishers in solid line?
> > > > > Thank you
> > > >
> > > > It is not at all clear to me what your are trying to do.  If you
> > > > really want "to make a box plot of x against each of the categories",
> > > > you could just do:
> > > >
> > > > bwplot(x ~ f1, data = df, auto.key = TRUE ) bwplot(x ~ f2, data = df,
> > > > auto.key = TRUE ) bwplot(x ~ f3, data = df, auto.key = TRUE )
> > > >
> > > > successively.  But perhaps you meant "y" rather than "x".  Please
> > > > clarify what you wish to accomplish.
> > > >
> > > > As to displaying the *whiskers* as solid lines ... that is one hell of
> > > > a good question!  I had to struggle:
> > > >
> > > > xxx <- trellis.par.get("box.umbrella") xxx$lty <- 1
> > > > trellis.par.set(box.umbrella=xxx)
> > > > junk <- rnorm(42)
> > > > bwplot(junk)
> > > >
> > > > That gave me a boxplot "lying on its side"; I wanted one "standing up".
> > > > After a great deal more struggle I did
> > > >
> > > > crud <- factor(rep(1,42),labels="")
> > > > bwplot(junk ~ crud,ylab="")
> > > >
> > > > which gave me what I was after.
> > > >
> > > > Perhaps others who are more knowledgeable than I could chip in with
> > > > better ideas.
> > > >
> > > > But first Luigi must clarify what he wants to obtain.
> > > >
> > > > cheers,
> > > >
> > > > Rolf Turner
> > > >
> > > > --
> > > > Honorary Research Fellow
> > > > Department of Statistics
> > > > University of Auckland
> > > > Phone: +64-9-373-7599 ext. 88276
> > > >
> > >
> > >
> > > --
> > > Best regards,
> > > Luigi
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.



-- 
Best regards,
Luigi


From gdr@|@m@ @end|ng |rom x@4@||@n|  Mon Jan 17 15:22:39 2022
From: gdr@|@m@ @end|ng |rom x@4@||@n| (Gerrit Draisma)
Date: Mon, 17 Jan 2022 15:22:39 +0100
Subject: [R] 
 how to plot numeric variable against several categories with
 lattice bwplot?
In-Reply-To: <mailman.365585.1.1642417202.51702.r-help@r-project.org>
References: <mailman.365585.1.1642417202.51702.r-help@r-project.org>
Message-ID: <d74645f4-ea93-1eb4-03cd-9ad392eceaae@xs4all.nl>

Luigi,
For *solid whiskers* try:
bwplot(~ y | f2, df, 
layout=c(3,1),par.settings=list(box.umbrella=list(lty=1)))
Gerrit

Op 17-01-2022 om 12:00 schreef r-help-request at r-project.org:
> how to plot numeric variable against


From bgunter@4567 @end|ng |rom gm@||@com  Mon Jan 17 16:34:47 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 17 Jan 2022 07:34:47 -0800
Subject: [R] How to convert category (or range/group) into continuous ?
In-Reply-To: <CAMwU6B01FEP5CxcXcOhP1h0-1zETOr58Cy-y4eFkwR9xvCOFAQ@mail.gmail.com>
References: <CAMwU6B01FEP5CxcXcOhP1h0-1zETOr58Cy-y4eFkwR9xvCOFAQ@mail.gmail.com>
Message-ID: <CAGxFJbTFNs0DPSnDXho1xpT_5zocTZqODANyxs1kwtQkzwStHA@mail.gmail.com>

IMO, this is a bad idea. You are asking how to fabricate information that
isn't there. You lost the information when you created the categories. Why
can you not just go back to your original data?

Bert Gunter

"The trouble with having an open mind is that people keep coming along and
sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Sun, Jan 16, 2022 at 11:06 PM Marna Wagley <marna.wagley at gmail.com>
wrote:

> Hi R users,
> I first categorized the continuous data into groups (ranges or category)
> but now I would like to change the category into a continuous data and
> plot it. For example I have attached the data in which you can see two
> columns named "group" and "value". The group column contains a range
> (group, for example ), I am wondering how I can change the category data
> (for example: "0,0.01]" )into continuous data with a 0.1 interval.
> Thank you for your suggestions.
>
> daT<-structure(list(group = c("(0,0.01]", "(0.01,0.025]", "(0.025,0.05]",
> "(0.05,0.075]", "(0.075,0.1]", "(0.1,0.2]", "(0.2,0.3]", "(0.3,0.4]",
> "(0.4,0.5]", "(0.5,0.6]", "(0.6,0.7]", "(0.7,0.8]", "(0.8,0.9]",
> "(0.9,1]", "(1,1.1]", "(1.1,1.5]", "(1.5,2]", "(2,2.5]"), VALUE = c(1,
> 1, 1, 1, 1, 1, 0.944444444, 0.916666667, 0.888888889, 0.857777778,
> 0.826666667, 0.66, 0.439090909, 0.328636364, 0.273409091, 0.245795455,
>  0.218181818, 0.084848485)), class = "data.frame", row.names = c(NA,
> -18L))
> thanks,
> MW
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @erv|ce @end|ng |rom @hd@w@on@com  Mon Jan 17 16:36:39 2022
From: @erv|ce @end|ng |rom @hd@w@on@com (Stephen H. Dawson, DSL)
Date: Mon, 17 Jan 2022 10:36:39 -0500
Subject: [R] How to convert category (or range/group) into continuous ?
In-Reply-To: <CAGxFJbTFNs0DPSnDXho1xpT_5zocTZqODANyxs1kwtQkzwStHA@mail.gmail.com>
References: <CAMwU6B01FEP5CxcXcOhP1h0-1zETOr58Cy-y4eFkwR9xvCOFAQ@mail.gmail.com>
 <CAGxFJbTFNs0DPSnDXho1xpT_5zocTZqODANyxs1kwtQkzwStHA@mail.gmail.com>
Message-ID: <4b48e45e-bde2-e5bf-6c81-db7323fb6822@shdawson.com>

Thank you, Bert. You beat me to the reply.

I concur, original source is best. Too much at risk otherwise, IMO.


*Stephen Dawson, DSL*
/Executive Strategy Consultant/
Business & Technology
+1 (865) 804-3454
http://www.shdawson.com <http://www.shdawson.com>


On 1/17/22 10:34 AM, Bert Gunter wrote:
> IMO, this is a bad idea. You are asking how to fabricate information that
> isn't there. You lost the information when you created the categories. Why
> can you not just go back to your original data?
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
>
> On Sun, Jan 16, 2022 at 11:06 PM Marna Wagley <marna.wagley at gmail.com>
> wrote:
>
>> Hi R users,
>> I first categorized the continuous data into groups (ranges or category)
>> but now I would like to change the category into a continuous data and
>> plot it. For example I have attached the data in which you can see two
>> columns named "group" and "value". The group column contains a range
>> (group, for example ), I am wondering how I can change the category data
>> (for example: "0,0.01]" )into continuous data with a 0.1 interval.
>> Thank you for your suggestions.
>>
>> daT<-structure(list(group = c("(0,0.01]", "(0.01,0.025]", "(0.025,0.05]",
>> "(0.05,0.075]", "(0.075,0.1]", "(0.1,0.2]", "(0.2,0.3]", "(0.3,0.4]",
>> "(0.4,0.5]", "(0.5,0.6]", "(0.6,0.7]", "(0.7,0.8]", "(0.8,0.9]",
>> "(0.9,1]", "(1,1.1]", "(1.1,1.5]", "(1.5,2]", "(2,2.5]"), VALUE = c(1,
>> 1, 1, 1, 1, 1, 0.944444444, 0.916666667, 0.888888889, 0.857777778,
>> 0.826666667, 0.66, 0.439090909, 0.328636364, 0.273409091, 0.245795455,
>>   0.218181818, 0.084848485)), class = "data.frame", row.names = c(NA,
>> -18L))
>> thanks,
>> MW
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From pd@|gd @end|ng |rom gm@||@com  Mon Jan 17 19:35:34 2022
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Mon, 17 Jan 2022 19:35:34 +0100
Subject: [R] How to convert category (or range/group) into continuous ?
In-Reply-To: <CAGxFJbTFNs0DPSnDXho1xpT_5zocTZqODANyxs1kwtQkzwStHA@mail.gmail.com>
References: <CAMwU6B01FEP5CxcXcOhP1h0-1zETOr58Cy-y4eFkwR9xvCOFAQ@mail.gmail.com>
 <CAGxFJbTFNs0DPSnDXho1xpT_5zocTZqODANyxs1kwtQkzwStHA@mail.gmail.com>
Message-ID: <8E17827A-CFE9-4645-AB7F-B47F5FABC6DD@gmail.com>

Depends on what was meant. If you just want the interval midpoints for plotting, you can do something like

endp <- c(0,.01, .025, .05, ... 2.5) # some manual assembly required here
mid <- (head(endp, -1) + tail(endp, -1))/2
groupmid <- mid[group]
plot(groupmid, VALUE)

-pd

> On 17 Jan 2022, at 16:34 , Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
> IMO, this is a bad idea. You are asking how to fabricate information that
> isn't there. You lost the information when you created the categories. Why
> can you not just go back to your original data?
> 
> Bert Gunter
> 
> "The trouble with having an open mind is that people keep coming along and
> sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> 
> 
> On Sun, Jan 16, 2022 at 11:06 PM Marna Wagley <marna.wagley at gmail.com>
> wrote:
> 
>> Hi R users,
>> I first categorized the continuous data into groups (ranges or category)
>> but now I would like to change the category into a continuous data and
>> plot it. For example I have attached the data in which you can see two
>> columns named "group" and "value". The group column contains a range
>> (group, for example ), I am wondering how I can change the category data
>> (for example: "0,0.01]" )into continuous data with a 0.1 interval.
>> Thank you for your suggestions.
>> 
>> daT<-structure(list(group = c("(0,0.01]", "(0.01,0.025]", "(0.025,0.05]",
>> "(0.05,0.075]", "(0.075,0.1]", "(0.1,0.2]", "(0.2,0.3]", "(0.3,0.4]",
>> "(0.4,0.5]", "(0.5,0.6]", "(0.6,0.7]", "(0.7,0.8]", "(0.8,0.9]",
>> "(0.9,1]", "(1,1.1]", "(1.1,1.5]", "(1.5,2]", "(2,2.5]"), VALUE = c(1,
>> 1, 1, 1, 1, 1, 0.944444444, 0.916666667, 0.888888889, 0.857777778,
>> 0.826666667, 0.66, 0.439090909, 0.328636364, 0.273409091, 0.245795455,
>> 0.218181818, 0.084848485)), class = "data.frame", row.names = c(NA,
>> -18L))
>> thanks,
>> MW
>> 
>>        [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Jan 17 20:50:45 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 17 Jan 2022 19:50:45 +0000
Subject: [R] How to convert category (or range/group) into continuous ?
In-Reply-To: <8E17827A-CFE9-4645-AB7F-B47F5FABC6DD@gmail.com>
References: <CAMwU6B01FEP5CxcXcOhP1h0-1zETOr58Cy-y4eFkwR9xvCOFAQ@mail.gmail.com>
 <CAGxFJbTFNs0DPSnDXho1xpT_5zocTZqODANyxs1kwtQkzwStHA@mail.gmail.com>
 <8E17827A-CFE9-4645-AB7F-B47F5FABC6DD@gmail.com>
Message-ID: <5d3d7ff7-de0f-facd-527f-bbf85623cdaf@sapo.pt>

Hello,

I agree with everybody else, tyhis is a bad idea but I don't understand 
what you mean by you first categorized continuous data and now you want 
continuous data out of categorical one. Don't you still have the 
original data? If yes, why not that one.


If it's just the midpoints, something like


x <- sub("^\\(", "", daT$group)
y <- sub("\\]$", "", x)
sapply(strsplit(y, ","), \(.y){
   diff(as.numeric(.y))/2
})
# [1] 0.0050 0.0075 0.0125 0.0125 0.0125 0.0500 0.0500 0.0500
# [9] 0.0500 0.0500 0.0500 0.0500 0.0500 0.0500 0.0500 0.2000
#[17] 0.2500 0.2500


Hope this helps,

Rui Barradas

?s 18:35 de 17/01/22, peter dalgaard escreveu:
> Depends on what was meant. If you just want the interval midpoints for plotting, you can do something like
> 
> endp <- c(0,.01, .025, .05, ... 2.5) # some manual assembly required here
> mid <- (head(endp, -1) + tail(endp, -1))/2
> groupmid <- mid[group]
> plot(groupmid, VALUE)
> 
> -pd
> 
>> On 17 Jan 2022, at 16:34 , Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>
>> IMO, this is a bad idea. You are asking how to fabricate information that
>> isn't there. You lost the information when you created the categories. Why
>> can you not just go back to your original data?
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along and
>> sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>>
>> On Sun, Jan 16, 2022 at 11:06 PM Marna Wagley <marna.wagley at gmail.com>
>> wrote:
>>
>>> Hi R users,
>>> I first categorized the continuous data into groups (ranges or category)
>>> but now I would like to change the category into a continuous data and
>>> plot it. For example I have attached the data in which you can see two
>>> columns named "group" and "value". The group column contains a range
>>> (group, for example ), I am wondering how I can change the category data
>>> (for example: "0,0.01]" )into continuous data with a 0.1 interval.
>>> Thank you for your suggestions.
>>>
>>> daT<-structure(list(group = c("(0,0.01]", "(0.01,0.025]", "(0.025,0.05]",
>>> "(0.05,0.075]", "(0.075,0.1]", "(0.1,0.2]", "(0.2,0.3]", "(0.3,0.4]",
>>> "(0.4,0.5]", "(0.5,0.6]", "(0.6,0.7]", "(0.7,0.8]", "(0.8,0.9]",
>>> "(0.9,1]", "(1,1.1]", "(1.1,1.5]", "(1.5,2]", "(2,2.5]"), VALUE = c(1,
>>> 1, 1, 1, 1, 1, 0.944444444, 0.916666667, 0.888888889, 0.857777778,
>>> 0.826666667, 0.66, 0.439090909, 0.328636364, 0.273409091, 0.245795455,
>>> 0.218181818, 0.084848485)), class = "data.frame", row.names = c(NA,
>>> -18L))
>>> thanks,
>>> MW
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Jan 18 08:14:17 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 18 Jan 2022 07:14:17 +0000
Subject: [R] unbalanced design in multifactor anova....
Message-ID: <PU4P216MB156892BEAC0E50F88FB85CD2C8589@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

dear members,
                         I have a question on anova as implemented in R.

If there is an unbalanced design in multifactor anova, will aov or lm work properly? I was reading a book on excel where the author points that in an unbalanced design, the factors, as coded vectors, are correlated. He says that variance will be allocated properly only when the coded vectors are uncorrelated. But he also justifies that the function TREND() in Excel handles this automatically using semipartial correlations.

What about aov or lm in R, which are used to implement anova? Should we do some thing extra for them to work properly in an unbalanced design? Or will the coding system used by R to represent the factors or levels internally handles the correlation?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From pd@|gd @end|ng |rom gm@||@com  Tue Jan 18 13:43:25 2022
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Tue, 18 Jan 2022 13:43:25 +0100
Subject: [R] unbalanced design in multifactor anova....
In-Reply-To: <PU4P216MB156892BEAC0E50F88FB85CD2C8589@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156892BEAC0E50F88FB85CD2C8589@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <9EB64A60-A73B-4A0D-982D-6F202D915709@gmail.com>

In brief, aov() requires balancedness (or at least you _really_ need to know what you are doing otherwise), lm() does not, but you need to be careful that results, like in any multiple regression, depends on test order. For models with random effects, things get tricky and you likely need to use the "lme4" package.

- Peter D.

> On 18 Jan 2022, at 08:14 , akshay kulkarni <akshay_e4 at hotmail.com> wrote:
> 
> dear members,
>                         I have a question on anova as implemented in R.
> 
> If there is an unbalanced design in multifactor anova, will aov or lm work properly? I was reading a book on excel where the author points that in an unbalanced design, the factors, as coded vectors, are correlated. He says that variance will be allocated properly only when the coded vectors are uncorrelated. But he also justifies that the function TREND() in Excel handles this automatically using semipartial correlations.
> 
> What about aov or lm in R, which are used to implement anova? Should we do some thing extra for them to work properly in an unbalanced design? Or will the coding system used by R to represent the factors or levels internally handles the correlation?
> 
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jan 18 16:38:10 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 18 Jan 2022 07:38:10 -0800
Subject: [R] unbalanced design in multifactor anova....
In-Reply-To: <PU4P216MB156892BEAC0E50F88FB85CD2C8589@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156892BEAC0E50F88FB85CD2C8589@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbRjXrVY9aLX+=fWHU0ZdZQY2X-BE+x6F07E3Ewofd1SDA@mail.gmail.com>

Please read ?aov and ?lm (and ?anova.lm). This should ordinarily be
your first port of call before posting here.
The former explicitly says:
"aov is designed for balanced designs, and the results can be hard to
interpret without balance: beware that missing values in the
response(s) will likely lose the balance. If there are two or more
error strata, the methods used are statistically inefficient without
balance, and it may be better to use lme in package nlme.

Balance can be checked with the replications function."

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Mon, Jan 17, 2022 at 11:14 PM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> dear members,
>                          I have a question on anova as implemented in R.
>
> If there is an unbalanced design in multifactor anova, will aov or lm work properly? I was reading a book on excel where the author points that in an unbalanced design, the factors, as coded vectors, are correlated. He says that variance will be allocated properly only when the coded vectors are uncorrelated. But he also justifies that the function TREND() in Excel handles this automatically using semipartial correlations.
>
> What about aov or lm in R, which are used to implement anova? Should we do some thing extra for them to work properly in an unbalanced design? Or will the coding system used by R to represent the factors or levels internally handles the correlation?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@turner @end|ng |rom @uck|@nd@@c@nz  Tue Jan 18 22:45:31 2022
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Wed, 19 Jan 2022 10:45:31 +1300
Subject: [R] unbalanced design in multifactor anova....
In-Reply-To: <PU4P216MB156892BEAC0E50F88FB85CD2C8589@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156892BEAC0E50F88FB85CD2C8589@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <20220119104531.4e7ce2df@rolf-Latitude-E7470>


On Tue, 18 Jan 2022 07:14:17 +0000
akshay kulkarni <akshay_e4 at hotmail.com> wrote:

<SNIP>

> I was reading a book on excel ....

<SNIP>

Don't!!!

Clearly you are way out of your depth.  Seek local advice from a
qualified mathematical statistician.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From m@rt|n@@m|th @end|ng |rom durh@m@@c@uk  Tue Jan 18 17:25:34 2022
From: m@rt|n@@m|th @end|ng |rom durh@m@@c@uk (Martin R. Smith)
Date: Tue, 18 Jan 2022 16:25:34 +0000
Subject: [R] [R-pkgs] Analysis of phylogenetic datasets in R: package
 "TreeSearch"
Message-ID: <CANotEPvuOsnHr1qihG5KAJ-BPjYRLC+2OA2e06xY=hCSzZyujA@mail.gmail.com>

Dear R users,

TreeSearch is an R package for phylogenetic analysis, optimized for
morphological datasets. Tree search may be conducted using under equal or
implied step weights with an explicit (albeit inexact) allowance for
inapplicable character entries, avoiding some of the pitfalls inherent in
standard parsimony methods. Profile parsimony and user-specified optimality
criteria are supported.

A graphical interface, which requires no familiarity with R, is designed to
help a user to improve the quality of datasets through critical review of
underpinning character codings; and to obtain additional information from
results by identifying and summarising clusters of similar trees, mapping
the distribution of trees, and removing ?rogue? taxa that obscure
underlying relationships.

Taken together, the package aims to support methodological rigour at each
step of data collection, analysis, and the exploration of phylogenetic
results.

A stable release of TreeSearch is now on CRAN:
https://CRAN.R-project.org/package=TreeSearch

An introduction to the package is provided in the vignette:
https://ms609.github.io/TreeSearch/articles/tree-search.html

Further details are in the BioR?iv preprint:
https://www.biorxiv.org/content/10.1101/2021.11.08.467735

Regards,

Martin


--

*Dr. Martin R. Smith*
Associate Professor in Palaeontology
Durham University
Department of Earth Sciences
Mountjoy Site, South Road, Durham, DH1 3LE United Kingdom

*M*: +44 (0)774 353 7510
*E*: martin.smith at durham.ac.uk

smithlabdurham.github.io
twitter.com/PalaeoSmith

My working days are Monday?Thursday.

The information in this e-mail and any attachments is co...{{dropped:7}}


From |eo@m@d@ @end|ng |rom @yon|c@eu  Wed Jan 19 03:39:56 2022
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leonard Mada)
Date: Wed, 19 Jan 2022 04:39:56 +0200
Subject: [R] How to convert category (or range/group) into continuous?
Message-ID: <6ba743d2-e328-b719-09b7-86f7b6829053@syonic.eu>

Dear Marna,


If you want to extract the middle of those intervals, please find below 
an improved variant of Luigi's code.


Note:
- it is more efficient to process the levels of a factor, instead of all 
the individual strings;
- I envision that there are benefits in a large data frame (> 1 million 
rows) - although I have not explicitly checked it;
- the code also handles better the open/closed intervals;
- the returned data structure may require some tweaking (currently 
returns a data.frame);



### Middle of an Interval
mid.factor = function(x, inf.to = NULL, split.str=",") {
 ?? ?lvl0 = levels(x); lvl = lvl0;
 ?? ?lvl = sub("^[(\\[]", "", lvl);
 ?? ?lvl = sub("[])]$", "", lvl); # tricky;
 ?? ?lvl = strsplit(lvl, split.str);
 ?? ?lvl = lapply(lvl, function(x) as.numeric(x));
 ?? ?if( ! is.null(inf.to)) {
 ?? ???? FUN = function(x) {
 ?? ???? ??? if(any(x == Inf)) 1
 ?? ???? ??? else if(any(x == - Inf)) -1
 ?? ???? ??? else 0;
 ?? ???? }
 ?? ???? whatInf = sapply(lvl, FUN);
 ?? ???? # TODO: more advanced;
 ?? ???? lvl[whatInf == -1] = inf.to[1];
 ?? ???? lvl[whatInf ==? 1] = inf.to[2];
 ?? ?}
 ?? ?mid = sapply(lvl, mean);
 ?? ?lvl = data.frame(lvl=lvl0, mid=mid);
 ?? ?merge(data.frame(lvl=x), lvl, by="lvl");
}


# uses the daT data frame;
# requires a factor:
# - this is probably the case with the original data;
daT$group = as.factor(daT$group);
mid.factor(daT$group);


I have uploaded this code also on my GitHub list of useful data tools:

https://github.com/discoleo/R/blob/master/Stat/Tools.Data.R


Sincerely,


Leonard


From v@|bh@v|@p@nchot|y@ @end|ng |rom ncode@|n  Tue Jan 18 10:48:20 2022
From: v@|bh@v|@p@nchot|y@ @end|ng |rom ncode@|n (Vaibhavi Panchotiya)
Date: Tue, 18 Jan 2022 15:18:20 +0530 (IST)
Subject: [R] Issues regarding pass parameters
Message-ID: <741844394.24169193.1642499300658.JavaMail.zimbra@ncode.in>



Hello I need help In R shiny ,Right now I am passing parameters in Url like these 

observe({ 



query <- parseQueryString(session$clientData$url_search) 



if (!is.null(query[['fyear']])) { 

updateSliderInput(session, "fyear", value = query[['fyear']] ) 

shinyjs::disable("fyear") 

} 

if (!is.null(query[['mnt']])) { 

updateSliderInput(session, "mnt", value = query[['mnt']] ) 

shinyjs::disable("mnt") 

} 

if (!is.null(query[['Typ']])) { 

updateSliderInput(session, "Typ", value = query[['Typ']] ) 

shinyjs::disable("Typ") 

} 

if (!is.null(query[['Dist']])) { 

updateSliderInput(session, "Dist", value = query[['Dist']] ) 

shinyjs::disable("Dist") 

} 

if (!is.null(query[['Min']])) { 

updateSliderInput(session, "Min", value = query[['Min']] ) 

shinyjs::disable("Min") 



} 



}) 

but now the requirement is like that I need to pass not on url but else somewhere for security purpose i hope you understand what i am saying What to do now? 

I tried get post method through temporary html file nothing happened. 


	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jan 19 20:17:17 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 19 Jan 2022 11:17:17 -0800
Subject: [R] Issues regarding pass parameters
In-Reply-To: <741844394.24169193.1642499300658.JavaMail.zimbra@ncode.in>
References: <741844394.24169193.1642499300658.JavaMail.zimbra@ncode.in>
Message-ID: <CAGxFJbSG3v+Gbpp238GnVzuZoQJCmqd69oimb5u42BrUk1gZLA@mail.gmail.com>

 Shiny is an RStudio created package. RStudio is **not** R. As such,
it is a *non*-standard contributed package, about which the posting
guide (linked below) says:

"For questions about functions in standard packages distributed with R
(see the FAQ Add-on packages in R), ask questions on R-help.
[The link is:
https://cran.r-project.org/doc/FAQ/R-FAQ.html#Add-on-packages-in-R
This gives the list of current _standard_ packages]

If the question relates to a contributed package , e.g., one
downloaded from CRAN, try contacting the package maintainer first. You
can also use find("functionname") and
packageDescription("packagename") to find this information. Only send
such questions to R-help or R-devel if you get no reply or need
further assistance. This applies to both requests for help and to bug
reports."

Note that RStudio maintains its own help resources at:
https://community.rstudio.com/
This is where questions about the TidyVerse, Shiny, ggplot, etc.
should be posted.


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jan 19, 2022 at 10:54 AM Vaibhavi Panchotiya
<vaibhavi.panchotiya at ncode.in> wrote:
>
>
>
> Hello I need help In R shiny ,Right now I am passing parameters in Url like these
>
> observe({
>
>
>
> query <- parseQueryString(session$clientData$url_search)
>
>
>
> if (!is.null(query[['fyear']])) {
>
> updateSliderInput(session, "fyear", value = query[['fyear']] )
>
> shinyjs::disable("fyear")
>
> }
>
> if (!is.null(query[['mnt']])) {
>
> updateSliderInput(session, "mnt", value = query[['mnt']] )
>
> shinyjs::disable("mnt")
>
> }
>
> if (!is.null(query[['Typ']])) {
>
> updateSliderInput(session, "Typ", value = query[['Typ']] )
>
> shinyjs::disable("Typ")
>
> }
>
> if (!is.null(query[['Dist']])) {
>
> updateSliderInput(session, "Dist", value = query[['Dist']] )
>
> shinyjs::disable("Dist")
>
> }
>
> if (!is.null(query[['Min']])) {
>
> updateSliderInput(session, "Min", value = query[['Min']] )
>
> shinyjs::disable("Min")
>
>
>
> }
>
>
>
> })
>
> but now the requirement is like that I need to pass not on url but else somewhere for security purpose i hope you understand what i am saying What to do now?
>
> I tried get post method through temporary html file nothing happened.
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From j|n||68 @end|ng |rom gm@||@com  Tue Jan 18 23:48:03 2022
From: j|n||68 @end|ng |rom gm@||@com (Jin Li)
Date: Wed, 19 Jan 2022 09:48:03 +1100
Subject: [R] [R-pkgs] Package "steprf": Stepwise Predictive Variable
 Selection for Random Forest
Message-ID: <CAGu_3ZJqN4W1jYDx0VJZSGmqUn-JK5OaWCC_QM5-S-5Y5FW2GQ@mail.gmail.com>

Dear R users,

A new package "steprf" has been published on CRAN:
https://cran.r-project.org/web/packages/steprf/index.html.

It introduces several novel predictive variable selection methods for
random forest (RF). The selections are based on various
variable  importance methods and predictive accuracy in stepwise
algorithms. Their performance can be seen in the references cited in the
description of the package.

Regards,

-- 
Jin
------------------------------------------
Jin Li, PhD
Founder, Data2action, Australia
https://www.researchgate.net/profile/Jin_Li32
https://scholar.google.com/citations?user=Jeot53EAAAAJ&hl=en

	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From we@move@e@@t2004 @end|ng |rom y@hoo@com  Mon Jan 17 12:38:23 2022
From: we@move@e@@t2004 @end|ng |rom y@hoo@com (Wesley Farnsworth)
Date: Mon, 17 Jan 2022 11:38:23 +0000 (UTC)
Subject: [R] Tephra horizons and confidence
References: <388281821.1393317.1642419504053.ref@mail.yahoo.com>
Message-ID: <388281821.1393317.1642419504053@mail.yahoo.com>

Hello,
I am using rbacon in Rstudio.
I am plotting an age depth model with a mixture of radiocarbon ages (blue) and tephra (green).? From my understanding there should be the greatest confidence (least error) in accordance with my input data. This is not the case when I plot my data. There seems to be an offset between my tephra horizons and confidence. Is this a graphics issue or does this relate to some type of calibrate/correction? Any help would be greatly appreciated.
All the best,W







-------------- next part --------------
A non-text attachment was scrubbed...
Name: Rplot08.png
Type: image/png
Size: 62081 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20220117/78068e86/attachment.png>

From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Jan 20 18:20:15 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 20 Jan 2022 09:20:15 -0800
Subject: [R] Tephra horizons and confidence
In-Reply-To: <388281821.1393317.1642419504053@mail.yahoo.com>
References: <388281821.1393317.1642419504053.ref@mail.yahoo.com>
 <388281821.1393317.1642419504053@mail.yahoo.com>
Message-ID: <50539F56-AE13-438B-94F6-CDEBC57E4E3C@dcn.davis.ca.us>

This really doesn't seem to be a question about R... if it was, you probably would have included a reproducible code and sample data set.  But from what it looks like you don't even have a problem with R... it is most likely a statistical question about your analysis, for which you should be looking to people familiar with your problem domain or the specific contributed packages you are using.

On January 17, 2022 3:38:23 AM PST, Wesley Farnsworth via R-help <r-help at r-project.org> wrote:
>Hello,
>I am using rbacon in Rstudio.
>I am plotting an age depth model with a mixture of radiocarbon ages (blue) and tephra (green).? From my understanding there should be the greatest confidence (least error) in accordance with my input data. This is not the case when I plot my data. There seems to be an offset between my tephra horizons and confidence. Is this a graphics issue or does this relate to some type of calibrate/correction? Any help would be greatly appreciated.
>All the best,W
>
>
>
>
>
>

-- 
Sent from my phone. Please excuse my brevity.


From |eo@m@d@ @end|ng |rom @yon|c@eu  Thu Jan 20 19:44:38 2022
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leonard Mada)
Date: Thu, 20 Jan 2022 20:44:38 +0200
Subject: [R] How to convert category (or range/group) into continuous?
In-Reply-To: <6ba743d2-e328-b719-09b7-86f7b6829053@syonic.eu>
References: <6ba743d2-e328-b719-09b7-86f7b6829053@syonic.eu>
Message-ID: <3ffaf0ab-7e90-f7f7-acb9-e953397dd472@syonic.eu>

Dear Marna,


I have revisited your initial mail and I am still unsure what your true 
statistical intention was. Unfortunately, you did not provide any 
feedback, if any of the solutions helped.


Looking at the data more carefully, I see that you try to plot the 
cumulative frequency.


There is an easy way to do this in R.


# generate some continuous data
x = runif(1000, 0, 2.5);
# lets partially discretize it:
x = round(x, 2);

# Cumulative frequency
x.cum = ecdf(x);
plot(x.cum, do.points=FALSE, lwd=2, xlim=c(0, 3));

# adding some horizontal lines
# using function from previous mail:
daT$group = as.factor(daT$group);
v = mid.factor(daT$group);
# this seems to be on a logarithmic scale:
# [Note: a geometric mean may have been more appropriate]
abline(v=v$mid, col="red");


I hope this helps,


Leonard


On 1/19/2022 4:39 AM, Leonard Mada wrote:
> Dear Marna,
>
>
> If you want to extract the middle of those intervals, please find 
> below an improved variant of Rui's code.
[edit: corrected name]
>
>
> Note:
> - it is more efficient to process the levels of a factor, instead of 
> all the individual strings;
> - I envision that there are benefits in a large data frame (> 1 
> million rows) - although I have not explicitly checked it;
> - the code also handles better the open/closed intervals;
> - the returned data structure may require some tweaking (currently 
> returns a data.frame);
>
>
>
> ### Middle of an Interval
> mid.factor = function(x, inf.to = NULL, split.str=",") {
> ?? ?lvl0 = levels(x); lvl = lvl0;
> ?? ?lvl = sub("^[(\\[]", "", lvl);
> ?? ?lvl = sub("[])]$", "", lvl); # tricky;
> ?? ?lvl = strsplit(lvl, split.str);
> ?? ?lvl = lapply(lvl, function(x) as.numeric(x));
> ?? ?if( ! is.null(inf.to)) {
> ?? ???? FUN = function(x) {
> ?? ???? ??? if(any(x == Inf)) 1
> ?? ???? ??? else if(any(x == - Inf)) -1
> ?? ???? ??? else 0;
> ?? ???? }
> ?? ???? whatInf = sapply(lvl, FUN);
> ?? ???? # TODO: more advanced;
> ?? ???? lvl[whatInf == -1] = inf.to[1];
> ?? ???? lvl[whatInf ==? 1] = inf.to[2];
> ?? ?}
> ?? ?mid = sapply(lvl, mean);
> ?? ?lvl = data.frame(lvl=lvl0, mid=mid);
> ?? ?merge(data.frame(lvl=x), lvl, by="lvl");
> }
>
>
> # uses the daT data frame;
> # requires a factor:
> # - this is probably the case with the original data;
> daT$group = as.factor(daT$group);
> mid.factor(daT$group);
>
>
> I have uploaded this code also on my GitHub list of useful data tools:
>
> https://github.com/discoleo/R/blob/master/Stat/Tools.Data.R
>
>
> Sincerely,
>
>
> Leonard
>
>


From mh@||89446 @end|ng |rom @tt@net  Fri Jan 21 19:55:20 2022
From: mh@||89446 @end|ng |rom @tt@net (Mark Hall)
Date: Fri, 21 Jan 2022 18:55:20 +0000 (UTC)
Subject: [R] Tephra horizons and confidence
In-Reply-To: <388281821.1393317.1642419504053@mail.yahoo.com>
References: <388281821.1393317.1642419504053.ref@mail.yahoo.com>
 <388281821.1393317.1642419504053@mail.yahoo.com>
Message-ID: <1005311431.460525.1642791320498@mail.yahoo.com>

 Without seeing your code and the various potential parameters you can set, it is really hard to say. BACON is a nifty age-depth modelling program, but the devil can be in the details. It would also help knowing the data also.
Best, Mark E Hall


    On Thursday, January 20, 2022, 08:36:36 AM PST, Wesley Farnsworth via R-help <r-help at r-project.org> wrote:  
 
 Hello,
I am using rbacon in Rstudio.
I am plotting an age depth model with a mixture of radiocarbon ages (blue) and tephra (green).? From my understanding there should be the greatest confidence (least error) in accordance with my input data. This is not the case when I plot my data. There seems to be an offset between my tephra horizons and confidence. Is this a graphics issue or does this relate to some type of calibrate/correction? Any help would be greatly appreciated.
All the best,W






______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
  
	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sat Jan 22 12:56:14 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sat, 22 Jan 2022 11:56:14 +0000
Subject: [R] unbalanced design in multifactor anova....
In-Reply-To: <9EB64A60-A73B-4A0D-982D-6F202D915709@gmail.com>
References: <PU4P216MB156892BEAC0E50F88FB85CD2C8589@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <9EB64A60-A73B-4A0D-982D-6F202D915709@gmail.com>
Message-ID: <PU4P216MB1568487413F5290B56E788AFC85C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

dear members,
                         Thanks Peter, Bert, Rolf and Terry. Regrets to reply this late.

iF you say that balancedness is not required for lm, I think there is some inconsistency. The coded vectors can still be correlated and unless lm handles it with some trick, aov and lm are essentially the same. I even came to know that aov calls lm internally! Moroevr, can you please give me  a reference that explains how exactly lm handles semipartial correlations (if at all it does). I am just curious.

Moroever, If I drop some elements to make my data balanced, will the results (from aov and lm) be reliable, i.e makes the correct inference about my sample?

THanking You,
AkshaY Kulkarni

________________________________
From: peter dalgaard <pdalgd at gmail.com>
Sent: Tuesday, January 18, 2022 6:13 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] unbalanced design in multifactor anova....

In brief, aov() requires balancedness (or at least you _really_ need to know what you are doing otherwise), lm() does not, but you need to be careful that results, like in any multiple regression, depends on test order. For models with random effects, things get tricky and you likely need to use the "lme4" package.

- Peter D.

> On 18 Jan 2022, at 08:14 , akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> dear members,
>                         I have a question on anova as implemented in R.
>
> If there is an unbalanced design in multifactor anova, will aov or lm work properly? I was reading a book on excel where the author points that in an unbalanced design, the factors, as coded vectors, are correlated. He says that variance will be allocated properly only when the coded vectors are uncorrelated. But he also justifies that the function TREND() in Excel handles this automatically using semipartial correlations.
>
> What about aov or lm in R, which are used to implement anova? Should we do some thing extra for them to work properly in an unbalanced design? Or will the coding system used by R to represent the factors or levels internally handles the correlation?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

--
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


	[[alternative HTML version deleted]]


From y@ngk@|9999 @end|ng |rom y@hoo@com  Tue Jan 25 01:14:07 2022
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Tue, 25 Jan 2022 00:14:07 +0000 (UTC)
Subject: [R] function problem: multi selection in one argument
References: <2028764329.994082.1643069647485.ref@mail.yahoo.com>
Message-ID: <2028764329.994082.1643069647485@mail.yahoo.com>

Hello Team,
I can run the function below:

library(tidyverse)

f2 <- function(indata, subgrp1){
? indata0 <- indata
? temp? ? <- indata0 %>% select({{subgrp1}}) %>% arrange({{subgrp1}}) %>%?
? ? group_by({{subgrp1}}) %>%
? ? mutate(numbering =row_number(), max=max(numbering))
? view(temp)
? f_table <- table(temp$Species)
? view(f_table)
? return(f_table)
}
f2(iris, Species)

You can see the second argument I use Species only, and it works fine.?
But If I say, I want the 2nd argument =?Petal.Width, Species , how should I write the argument? I did try?f2(iris, c(Petal.Width, Species)), but I got error message:
Error: arrange() failed at implicit mutate() step.?
* Problem with `mutate()` column `..1`.
i `..1 = c(Petal.Width, Species)`.
i `..1` must be size 150 or 1, not 300.

I'm not sure how to fix the problem either in function or can fix it when using the function.
Thank you,
Kai
	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jan 25 01:40:09 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 24 Jan 2022 16:40:09 -0800
Subject: [R] function problem: multi selection in one argument
In-Reply-To: <2028764329.994082.1643069647485@mail.yahoo.com>
References: <2028764329.994082.1643069647485.ref@mail.yahoo.com>
 <2028764329.994082.1643069647485@mail.yahoo.com>
Message-ID: <CAGxFJbRn4wnE+-zJgiFtakZxEmUg+1VGijfMdYBHXCnUU+nx5A@mail.gmail.com>

RStudio is **not** R. In particular, the so-called TidyVerse consists
of all *non*-standard contributed packages, about which the Posting
Guide (linked below) says:

"For questions about functions in standard packages distributed with R
(see the FAQ Add-on packages in R), ask questions on R-help.
[The link is:
https://cran.r-project.org/doc/FAQ/R-FAQ.html#Add-on-packages-in-R
This gives the list of current _standard_ packages]

If the question relates to a contributed package , e.g., one
downloaded from CRAN, try contacting the package maintainer first. You
can also use find("functionname") and
packageDescription("packagename") to find this information. Only send
such questions to R-help or R-devel if you get no reply or need
further assistance. This applies to both requests for help and to bug
reports."

Note that RStudio maintains its own help resources at:
https://community.rstudio.com/
This is where questions about the TidyVerse, ggplot, etc. should be posted.

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Mon, Jan 24, 2022 at 4:14 PM Kai Yang via R-help
<r-help at r-project.org> wrote:
>
> Hello Team,
> I can run the function below:
>
> library(tidyverse)
>
> f2 <- function(indata, subgrp1){
>   indata0 <- indata
>   temp    <- indata0 %>% select({{subgrp1}}) %>% arrange({{subgrp1}}) %>%
>     group_by({{subgrp1}}) %>%
>     mutate(numbering =row_number(), max=max(numbering))
>   view(temp)
>   f_table <- table(temp$Species)
>   view(f_table)
>   return(f_table)
> }
> f2(iris, Species)
>
> You can see the second argument I use Species only, and it works fine.
> But If I say, I want the 2nd argument = Petal.Width, Species , how should I write the argument? I did try f2(iris, c(Petal.Width, Species)), but I got error message:
> Error: arrange() failed at implicit mutate() step.
> * Problem with `mutate()` column `..1`.
> i `..1 = c(Petal.Width, Species)`.
> i `..1` must be size 150 or 1, not 300.
>
> I'm not sure how to fix the problem either in function or can fix it when using the function.
> Thank you,
> Kai
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From petr@p|k@| @end|ng |rom prechez@@cz  Tue Jan 25 09:08:26 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Tue, 25 Jan 2022 08:08:26 +0000
Subject: [R] function problem: multi selection in one argument
In-Reply-To: <2028764329.994082.1643069647485@mail.yahoo.com>
References: <2028764329.994082.1643069647485.ref@mail.yahoo.com>
 <2028764329.994082.1643069647485@mail.yahoo.com>
Message-ID: <8942844f92e945949b663349f7ef80ef@SRVEXCHCM1301.precheza.cz>

Hallo

You should explain better what do you want as many people here do not use 
tidyverse functions.

I am not sure what the function should do.
table(iris$Species)
give the same result and whatever you do in tidyverse part it always finalise 
in table(...$Species)

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Kai Yang via R-help
> Sent: Tuesday, January 25, 2022 1:14 AM
> To: R-help Mailing List <r-help at r-project.org>
> Subject: [R] function problem: multi selection in one argument
>
> Hello Team,
> I can run the function below:
>
> library(tidyverse)
>
> f2 <- function(indata, subgrp1){
>   indata0 <- indata
>   temp    <- indata0 %>% select({{subgrp1}}) %>% arrange({{subgrp1}}) %>%
>     group_by({{subgrp1}}) %>%
>     mutate(numbering =row_number(), max=max(numbering))
>   view(temp)
>   f_table <- table(temp$Species)
>   view(f_table)
>   return(f_table)
> }
> f2(iris, Species)
>
> You can see the second argument I use Species only, and it works fine. But 
> If I
> say, I want the 2nd argument = Petal.Width, Species , how should I write the
> argument? I did try f2(iris, c(Petal.Width, Species)), but I got error 
> message:
> Error: arrange() failed at implicit mutate() step.
> * Problem with `mutate()` column `..1`.
> i `..1 = c(Petal.Width, Species)`.
> i `..1` must be size 150 or 1, not 300.
>
> I'm not sure how to fix the problem either in function or can fix it when 
> using the
> function.
> Thank you,
> Kai
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From p@u|bern@|07 @end|ng |rom gm@||@com  Mon Jan 24 22:24:11 2022
From: p@u|bern@|07 @end|ng |rom gm@||@com (Paul Bernal)
Date: Mon, 24 Jan 2022 16:24:11 -0500
Subject: [R] Constructing confidence interval ellipses with R
Message-ID: <CAMOcQfOPrn5-UF8pSewUxV5O7hPT=zfk+C-9URszV-bggCiWrw@mail.gmail.com>

Dear friends,

I will be sharing a dataset which has the following columns:
1. Scenario
2. Day of Transit date
3. Canal Ampliado
4. Canal Original

Basically, I need to create a scatter plot diagram, with the Canal Ampliado
column values in the x-axis, and the Canal Original column values in the
y-axis, but also, I need to create confidence interval ellipses grouping
the points on the scatterplot, based on the different scenarios.

So I need to have in one graph, the scatterplot of Canal Ampliado vs Canal
Original and then, on the same graph, construct the confidence interval
ellipses.

I will attach an image depicting what I need to accomplish, as well as the
dataset, for your reference.

Any help and/or guidance will be greatly appreciated.

Cheers,
Paul

-------------- next part --------------
A non-text attachment was scrubbed...
Name: MicrosoftTeams-image.png
Type: image/png
Size: 632040 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20220124/ba630ce2/attachment.png>

From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Jan 25 15:22:47 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 25 Jan 2022 14:22:47 +0000
Subject: [R] function problem: multi selection in one argument
In-Reply-To: <2028764329.994082.1643069647485@mail.yahoo.com>
References: <2028764329.994082.1643069647485.ref@mail.yahoo.com>
 <2028764329.994082.1643069647485@mail.yahoo.com>
Message-ID: <b3044b6a-9e42-1f58-3679-d99189e466b8@sapo.pt>

Hello,

Here are 3 functions that do what the question asks for. The first 2 are 
tidyverse solutions, the last one a base R function.

I don't understand why the group_by and mutate, that's why I've included 
a 2nd tidyverse function. And the base R function follows the same lines 
of outputing the table only without data transformation.

And the test dataset is not iris, it only has one factor variable. It 
doesn't make sense to table a continuous variable such as Petal.Width.

The data set mtcars has several numeric variables that are in fact 
categorical ("vs", "am") and one, "cyl", that can be tabled. The 
examples below use mtcars.



f3 <- function(data, ...){
 ? groups <- unlist(list(...))
 ? temp <- data %>%
 ??? select(all_of({{groups}})) %>%
 ??? group_by(across(all_of({{groups}}))) %>%
 ??? mutate(numbering = row_number(), max = n())
 ? temp %>%
 ??? select(all_of({{groups}})) %>%
 ??? table()
}

f4 <- function(data, ...){
 ? groups <- unlist(list(...))
 ? data %>%
 ??? select(all_of({{groups}})) %>%
 ??? table()
}

f5 <- function(data, ...){
 ? temp <- lapply(list(...), \(col) data[[col]])
 ? table(setNames(temp, list(...)))
}

f3(mtcars, "am", "cyl")
f4(mtcars, "am", "cyl")
f5(mtcars, "am", "cyl")


Hope this helps,

Rui Barradas

?s 00:14 de 25/01/2022, Kai Yang via R-help escreveu:
> Hello Team,
> I can run the function below:
>
> library(tidyverse)
>
> f2 <- function(indata, subgrp1){
>  ? indata0 <- indata
>  ? temp? ? <- indata0 %>% select({{subgrp1}}) %>% arrange({{subgrp1}}) %>%
>  ? ? group_by({{subgrp1}}) %>%
>  ? ? mutate(numbering =row_number(), max=max(numbering))
>  ? view(temp)
>  ? f_table <- table(temp$Species)
>  ? view(f_table)
>  ? return(f_table)
> }
> f2(iris, Species)
>
> You can see the second argument I use Species only, and it works fine.
> But If I say, I want the 2nd argument =?Petal.Width, Species , how should I write the argument? I did try?f2(iris, c(Petal.Width, Species)), but I got error message:
> Error: arrange() failed at implicit mutate() step.
> * Problem with `mutate()` column `..1`.
> i `..1 = c(Petal.Width, Species)`.
> i `..1` must be size 150 or 1, not 300.
>
> I'm not sure how to fix the problem either in function or can fix it when using the function.
> Thank you,
> Kai
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From petr@p|k@| @end|ng |rom prechez@@cz  Tue Jan 25 15:55:40 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Tue, 25 Jan 2022 14:55:40 +0000
Subject: [R] Constructing confidence interval ellipses with R
In-Reply-To: <CAMOcQfOPrn5-UF8pSewUxV5O7hPT=zfk+C-9URszV-bggCiWrw@mail.gmail.com>
References: <CAMOcQfOPrn5-UF8pSewUxV5O7hPT=zfk+C-9URszV-bggCiWrw@mail.gmail.com>
Message-ID: <8aa442bb50404c3f91e5616534292c4f@SRVEXCHCM1301.precheza.cz>

Hi

something like

https://ggplot2.tidyverse.org/reference/stat_ellipse.html

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Paul Bernal
> Sent: Monday, January 24, 2022 10:24 PM
> To: R <r-help at r-project.org>
> Subject: [R] Constructing confidence interval ellipses with R
>
> Dear friends,
>
> I will be sharing a dataset which has the following columns:
> 1. Scenario
> 2. Day of Transit date
> 3. Canal Ampliado
> 4. Canal Original
>
> Basically, I need to create a scatter plot diagram, with the Canal Ampliado
> column values in the x-axis, and the Canal Original column values in the 
> y-axis,
> but also, I need to create confidence interval ellipses grouping the points 
> on the
> scatterplot, based on the different scenarios.
>
> So I need to have in one graph, the scatterplot of Canal Ampliado vs Canal
> Original and then, on the same graph, construct the confidence interval 
> ellipses.
>
> I will attach an image depicting what I need to accomplish, as well as the 
> dataset,
> for your reference.
>
> Any help and/or guidance will be greatly appreciated.
>
> Cheers,
> Paul

From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Tue Jan 25 16:10:40 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Tue, 25 Jan 2022 16:10:40 +0100
Subject: [R] function problem: multi selection in one argument
In-Reply-To: <b3044b6a-9e42-1f58-3679-d99189e466b8@sapo.pt>
References: <2028764329.994082.1643069647485.ref@mail.yahoo.com>
 <2028764329.994082.1643069647485@mail.yahoo.com>
 <b3044b6a-9e42-1f58-3679-d99189e466b8@sapo.pt>
Message-ID: <25072.4848.982693.416210@stat.math.ethz.ch>

>>>>> Rui Barradas 
>>>>>     on Tue, 25 Jan 2022 14:22:47 +0000 writes:

    > Hello,
    > Here are 3 functions that do what the question asks for. The first 2 are 
    > tidyverse solutions, the last one a base R function.

    > I don't understand why the group_by and mutate, that's why I've included 
    > a 2nd tidyverse function. And the base R function follows the same lines 
    > of outputing the table only without data transformation.

    > And the test dataset is not iris, it only has one factor variable. It 
    > doesn't make sense to table a continuous variable such as Petal.Width.

    > The data set mtcars has several numeric variables that are in fact 
    > categorical ("vs", "am") and one, "cyl", that can be tabled. The 
    > examples below use mtcars.



    > f3 <- function(data, ...){
    >   groups <- unlist(list(...))
    >   temp <- data %>%
    >     select(all_of({{groups}})) %>%
    >     group_by(across(all_of({{groups}}))) %>%
    >     mutate(numbering = row_number(), max = n())
    >   temp %>%
    >     select(all_of({{groups}})) %>%
    >     table()
    > }

    > f4 <- function(data, ...){
    >   groups <- unlist(list(...))
    >   data %>%
    >     select(all_of({{groups}})) %>%
    >     table()
    > }

    > f5 <- function(data, ...){
    >   temp <- lapply(list(...), \(col) data[[col]])
    >   table(setNames(temp, list(...)))
    > }

    > f3(mtcars, "am", "cyl")
    > f4(mtcars, "am", "cyl")
    > f5(mtcars, "am", "cyl")

    > Hope this helps,
    > Rui Barradas

Thank you, Rui!

Note that your base R solution can be vastly simplified :

> f6 <- function(data, ...) table(data[, unlist(list(...))])
> f6(mtcars, "am", "cyl")
   cyl
am   4  6  8
  0  3  4 12
  1  8  3  2
> 

If you started measuring carefully, I'm sure this would not only
be the shortest but also by far the fastest solution ...

Best,
Martin

--
Martin Maechler
ETH Zurich  and   R Core Team


    > ?s 00:14 de 25/01/2022, Kai Yang via R-help escreveu:
    >> Hello Team,
    >> I can run the function below:
    >> 
    >> library(tidyverse)
    >> 
    >> f2 <- function(indata, subgrp1){
    >>   indata0 <- indata
    >>   temp    <- indata0 %>% select({{subgrp1}}) %>% arrange({{subgrp1}}) %>%
    >>     group_by({{subgrp1}}) %>%
    >>     mutate(numbering =row_number(), max=max(numbering))
    >>   view(temp)
    >>   f_table <- table(temp$Species)
    >>   view(f_table)
    >>   return(f_table)
    >> }
    >> f2(iris, Species)
    >> 
    >> You can see the second argument I use Species only, and it works fine.
    >> But If I say, I want the 2nd argument = Petal.Width, Species , how should I write the argument? I did try f2(iris, c(Petal.Width, Species)), but I got error message:
    >> Error: arrange() failed at implicit mutate() step.
    >> * Problem with `mutate()` column `..1`.
    >> i `..1 = c(Petal.Width, Species)`.
    >> i `..1` must be size 150 or 1, not 300.
    >> 
    >> I'm not sure how to fix the problem either in function or can fix it when using the function.
    >> Thank you,
    >> Kai
    >> [[alternative HTML version deleted]]
    >> 
    >> ______________________________________________
    >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    >> https://stat.ethz.ch/mailman/listinfo/r-help
    >> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    >> and provide commented, minimal, self-contained, reproducible code.

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    > https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    > and provide commented, minimal, self-contained, reproducible code.


From j|ox @end|ng |rom mcm@@ter@c@  Tue Jan 25 17:41:19 2022
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Tue, 25 Jan 2022 11:41:19 -0500
Subject: [R] Constructing confidence interval ellipses with R
In-Reply-To: <6803_1643117944_20PDd3uv029100_CAMOcQfOPrn5-UF8pSewUxV5O7hPT=zfk+C-9URszV-bggCiWrw@mail.gmail.com>
References: <6803_1643117944_20PDd3uv029100_CAMOcQfOPrn5-UF8pSewUxV5O7hPT=zfk+C-9URszV-bggCiWrw@mail.gmail.com>
Message-ID: <c5943e8a-6b06-bf8d-f20b-0798da995570@mcmaster.ca>

Dear Paul,

This looks like a version of the question you asked a couple of weeks 
ago. As I explained then, I'm pretty sure that you want concentration 
(i.e., data) ellipses and not confidence ellipses, which pertain to 
parameters (e.g., regression coefficients). Also, the hand-drawn 
concentration contours in your example graph don't look elliptical, so 
I'm not sure that you really want ellipses, but I'll assume that you do.

Since as far as I can see you didn't share your data, here's a similar 
example using the scatterplot() function in the car package:

library("car")
scatterplot(prestige ~ income | type, data=Prestige, ellipse=TRUE, 
smooth=FALSE, regLine=FALSE)

By default, this draws 50% and 95% concentration ellipses assuming 
bivariate normality in each group, but that and other aspects of the 
graph can be customized -- see ?scatterplot.

I hope this helps,
  John

-- 
John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
web: https://socialsciences.mcmaster.ca/jfox/

On 2022-01-24 4:24 p.m., Paul Bernal wrote:
> Dear friends,
> 
> I will be sharing a dataset which has the following columns:
> 1. Scenario
> 2. Day of Transit date
> 3. Canal Ampliado
> 4. Canal Original
> 
> Basically, I need to create a scatter plot diagram, with the Canal Ampliado
> column values in the x-axis, and the Canal Original column values in the
> y-axis, but also, I need to create confidence interval ellipses grouping
> the points on the scatterplot, based on the different scenarios.
> 
> So I need to have in one graph, the scatterplot of Canal Ampliado vs Canal
> Original and then, on the same graph, construct the confidence interval
> ellipses.
> 
> I will attach an image depicting what I need to accomplish, as well as the
> dataset, for your reference.
> 
> Any help and/or guidance will be greatly appreciated.
> 
> Cheers,
> Paul
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From neh@@bo|ogn@90 @end|ng |rom gm@||@com  Tue Jan 25 21:50:20 2022
From: neh@@bo|ogn@90 @end|ng |rom gm@||@com (Neha gupta)
Date: Tue, 25 Jan 2022 21:50:20 +0100
Subject: [R] How to avoid a divide by zero issue.
Message-ID: <CA+nrPnv+-ybANi2009vvjWgW+xaXhOF=u+o=m6VqDkMnwT0sPQ@mail.gmail.com>

Hello everyone

I have an output variable (0/1) and I want to evaluate how the model is
biased when we have 1 and when 0 value.

The problem is that the package of R I use here is designed originally to
check bias for input metrics. When I evaluate it for this output variable,
it gives me NA values, probably a divide by zero problem. Can I avoid this
issue and how (I am not very expert of R language).

Warm regards

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Wed Jan 26 03:03:20 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 26 Jan 2022 13:03:20 +1100
Subject: [R] How to avoid a divide by zero issue.
In-Reply-To: <CA+nrPnv+-ybANi2009vvjWgW+xaXhOF=u+o=m6VqDkMnwT0sPQ@mail.gmail.com>
References: <CA+nrPnv+-ybANi2009vvjWgW+xaXhOF=u+o=m6VqDkMnwT0sPQ@mail.gmail.com>
Message-ID: <CA+8X3fXOuPGrAsbj=6HR6K5a7jaq3-qLwaJnvROuDVEAO98+4Q@mail.gmail.com>

Hi Neha,
One sure cure for divide by zero is to omit zeros in the denominator variable.

num<-sample(0:10,20,TRUE)
denom<-sample(0:10,20,TRUE)
zeros<-denom == 0
num[!zeros]/denom[!zeros]

If you don't want to lose those data and there are no negative values,
you could add a small number to all denominator values if that would
still give useful output.

Jim

On Wed, Jan 26, 2022 at 7:51 AM Neha gupta <neha.bologna90 at gmail.com> wrote:
>
> Hello everyone
>
> I have an output variable (0/1) and I want to evaluate how the model is
> biased when we have 1 and when 0 value.
>
> The problem is that the package of R I use here is designed originally to
> check bias for input metrics. When I evaluate it for this output variable,
> it gives me NA values, probably a divide by zero problem. Can I avoid this
> issue and how (I am not very expert of R language).
>
> Warm regards
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From yugoh|@v @end|ng |rom gm@||@com  Wed Jan 26 03:07:52 2022
From: yugoh|@v @end|ng |rom gm@||@com (Love Umesi)
Date: Wed, 26 Jan 2022 15:07:52 +1300
Subject: [R] Need help with writing survey design for multilevel analysis
Message-ID: <CAOTqx+L+wSRmvcmB00DyE5B+nu2FLW8aoKO64DoAeouxujbRJg@mail.gmail.com>

Hello,

I am new in using R, and I need to run a multilevel analysis (on two
levels) using Cox frailty survival model on a survey data (Nigeria
Demographic and Health Survey Data).

My problem is how to write the design weight using the two weights needed
and apply them to the analysis.

I have identified the needed variables for the survey design, which are :

psu/cluster=~v021
individual-level weight=~wt1_1
cluster-level weigh=~wt2_1
strata/stratum=~v022

Please can someone help me with the survey design (svydesign) code and how
to include it and the weights in a model.

I have tried to generate a minimum reproducible data

To view the minimum reproducible data: datapasta::df_paste (head(rcom2018,
10)[, c('pid', 'study_time', 'died', 'v021', 'v022', 'wt2_1', 'wt1_1',
'v024', 'v025', 'mat_edu')])


I understand I have to use svycoxph in the model. Please how do I include
survey design and account for the 2 weights in the gamma frailty model
below?

Frailty1 <- coxph (Surv(study_time, died) ~ factor(v024) + factor(mat_edu)
+ v025 + frailty(v021,distribution="gamma"), data=rcom2018)


Really looking forward to your help as my project is hanging on this.

Many thanks.

Love Umesi

library(survey)#> Warning: package 'survey' was built under R version
4.0.5#> Loading required package: grid#> Loading required package:
Matrix#> Loading required package: survival#> Warning: package
'survival' was built under R version 4.0.5#> #> Attaching package:
'survey'#> The following object is masked from 'package:graphics':#>
#>     dotchart
library(survival)


rcom1 <- data.frame(
                         pid = c(1,2,3,4,
                                 5,6,7,8,9,10,11,12,13,14,15,16,17,
                                 18,19,20,21,22,23,24,25,26,27,28,29,
                                 30,31,32,33,34,35,36,37,38,39,40,
                                 41,42,43,44,45,46,47,48,49,50),
                  study_time = c(13,9,17,
                                 31,39,22,24,0,23,12,9,35,18,20,60,
                                 18,5,46,26,54,37,51,31,55,27,15,39,6,
                                 29,0,9,40,23,12,35,56,14,40,57,42,
                                 5,42,39,39,54,19,52,42,7,28),
                        died = c(0,0,0,0,
                                 0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,
                                 0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,
                                 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
                        v021 = c(1,1,1,1,
                                 1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,
                                 2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,
                                 3,3,3,3,3,3,3,3,3,3,3,3,3,4,4),
                        v022 = c("1","1",
                                 "1","1","1","1","1","1","1","1","1","1",
                                 "1","1","1","1","1","1","1","1","1",
                                 "1","1","1","1","1","1","1","1","1",
                                 "1","1","1","1","1","1","1","1","1","1",
                                 "1","1","1","1","1","1","1","1","1",
                                 "1"),
                        v012 = c(40,37,27,
                                 27,24,32,35,35,34,20,28,28,26,24,24,
                                 25,26,26,26,26,28,27,25,25,27,26,
                                 26,21,21,31,36,36,27,23,32,32,33,33,
                                 33,28,25,37,33,34,33,28,28,29,33,33),
                       wt2_1 =
c(401.200012207031,401.200012207031,401.200012207031,
                                 401.200012207031,401.200012207031,

401.200012207031,401.200012207031,401.200012207031,

401.200012207031,401.200012207031,401.200012207031,
                                 401.200012207031,401.200012207031,

401.200012207031,401.200012207031,401.200012207031,

401.200012207031,401.200012207031,401.200012207031,
                                 401.200012207031,401.200012207031,

401.200012207031,401.200012207031,401.200012207031,
                                 401.200012207031,401.200012207031,

401.200012207031,401.200012207031,401.200012207031,

401.200012207031,401.200012207031,401.200012207031,
                                 401.200012207031,401.200012207031,

401.200012207031,401.200012207031,401.200012207031,
                                 401.200012207031,401.200012207031,

401.200012207031,401.200012207031,401.200012207031,

401.200012207031,401.200012207031,401.200012207031,
                                 401.200012207031,401.200012207031,

401.200012207031,401.200012207031,401.200012207031),
                       wt1_1 =
c(2.5074667930603,2.5074667930603,2.5074667930603,

2.5074667930603,2.5074667930603,2.5074667930603,

2.5074667930603,2.5074667930603,2.5074667930603,
                                 2.5074667930603,2.5074667930603,

2.5074667930603,2.5074667930603,2.5074667930603,

2.5074667930603,5.1194109916687,5.1194109916687,

5.1194109916687,5.1194109916687,5.1194109916687,
                                 5.1194109916687,5.1194109916687,

5.1194109916687,5.1194109916687,5.1194109916687,

5.1194109916687,5.1194109916687,5.1194109916687,

5.1194109916687,5.1194109916687,5.1194109916687,
                                 5.1194109916687,5.1194109916687,

5.1194109916687,2.40910983085632,2.40910983085632,

2.40910983085632,2.40910983085632,2.40910983085632,
                                 2.40910983085632,2.40910983085632,

2.40910983085632,2.40910983085632,2.40910983085632,

2.40910983085632,2.40910983085632,2.40910983085632,
                                 2.40910983085632,1.06203985214233,
                                 1.06203985214233),
                        v024 = c("1","1",
                                 "1","1","1","1","1","1","1","1","1","1",
                                 "1","1","1","1","1","1","1","1","1",
                                 "1","1","1","1","1","1","1","1","1",
                                 "1","1","1","1","1","1","1","1","1","1",
                                 "1","1","1","1","1","1","1","1","1",
                                 "1"),
                        v025 = c("1","1",
                                 "1","1","1","1","1","1","1","1","1","1",
                                 "1","1","1","1","1","1","1","1","1",
                                 "1","1","1","1","1","1","1","1","1",
                                 "1","1","1","1","1","1","1","1","1","1",
                                 "1","1","1","1","1","1","1","1","1",
                                 "1"),
                     mat_edu = c("5","5",
                                 "5","4","4","5","4","4","4","4","4","4",
                                 "5","5","5","5","5","5","4","4","5",
                                 "4","4","4","5","3","3","4","4","5",
                                 "5","5","5","4","2","2","0","0","0","5",
                                 "5","0","1","5","5","3","3","5","5",
                                 "5")
                )

Frailty1 <- coxph (Surv(study_time, died) ~ factor(v024) +
factor(mat_edu) + v025 + frailty(v021,distribution="gamma"),
data=rcom1)#> Error in `contrasts<-`(`*tmp*`, value = contr.funs[1 +
isOF[nn]]): contrasts can be applied only to factors with 2 or more
levels

	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Tue Jan 25 21:02:05 2022
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Tue, 25 Jan 2022 15:02:05 -0500
Subject: [R] [R-pkgs] this.path-package: get executing script's path
Message-ID: <CAPcHnpR7sUAxvQ6D-K4vmdkay8gC91Z4EcAhU3Efbz3isyP7pA@mail.gmail.com>

Hello everyone,


R package 'this.path' has received an update, the current version
number is 0.5.0
You can find this package at:

https://CRAN.R-project.org/package=this.path

Updates include:

(1) added this.path::here (similar to here::here), for constructing
the path to a file, starting with the executing script's directory

(2) this.path::this.path is compatible with URLs in base::source, for
example source("https://raw.githubusercontent.com/ArcadeAntics/this.path/main/tests/this.path_w_URLs.R")

(3) added separate methods for extracting the shell argument 'FILE'
for Windows and Unix-alikes (shell arguments are handled slightly
differently between the two)

(4) on Windows, in Rgui, added support for all languages listed by
list.dirs(system.file(package = "translations"), full.names = FALSE,
recursive = FALSE)

If you're using version 0.4.4 or less, it is well worth upgrading.


Regards,
    Andrew Simmons

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From j@vedbtk111 @end|ng |rom gm@||@com  Wed Jan 26 14:47:16 2022
From: j@vedbtk111 @end|ng |rom gm@||@com (javed khan)
Date: Wed, 26 Jan 2022 14:47:16 +0100
Subject: [R] Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
Message-ID: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>

I get this error:

Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed

I used this:

var <- ifelse(test$operator == 'T14', 1, 0)

operator has several values like T1, T3, T7, T15, T31, T37

For some values like T3, T7 it works fine but for majority of values it
gives error.

When I use: is.na(ts$operator), it shows all false values so no NAs.

Where could be the problem?

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Jan 26 14:53:13 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 26 Jan 2022 16:53:13 +0300
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
Message-ID: <20220126165313.26db0d5b@Tarkus>

On Wed, 26 Jan 2022 14:47:16 +0100
javed khan <javedbtk111 at gmail.com> wrote:

> Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed

> var <- ifelse(test$operator == 'T14', 1, 0)

The error must be in a place different from your test$operator
comparison. Have you tried traceback() to get the call stack leading to
the error? Or options(error = recover) to land in a debugger session
the moment an uncaught error happens? (Use options(error = NULL) to go
back to the default behaviour.)

Unrelated: var <- test$operator == 'T14' will also give you an
equivalent logical vector with a bit less work.

-- 
Best regards,
Ivan


From petr@p|k@| @end|ng |rom prechez@@cz  Wed Jan 26 15:01:20 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Wed, 26 Jan 2022 14:01:20 +0000
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
Message-ID: <ada6856b343d4ac089909e5deda537ec@SRVEXCHCM1301.precheza.cz>

Hi

Do not post in HTML, please.
Try to show your real data - use str(test), or preferably dput(test). If
test is big, use only fraction of it
The problem must be probably in your data.

x <- sample(1:20, 100, replace=T)
fake <- paste("T", x, sep="")
ifelse(fake=="T14", 1,0) 
  [1] 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0
 [38] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0
0 0
 [75] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0
 
head(fake)
[1] "T7"  "T9"  "T3"  "T9"  "T12" "T9" 
> str(fake)
 chr [1:100] "T7" "T9" "T3" "T9" "T12" "T9" "T19" "T19" "T12" "T2" "T17" ...
>
Cheers
Petr


> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of javed khan
> Sent: Wednesday, January 26, 2022 2:47 PM
> To: R-help <r-help at r-project.org>
> Subject: [R] Error in if (fraction <= 1) { : missing value where
TRUE/FALSE
> needed
> 
> I get this error:
> 
> Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed
> 
> I used this:
> 
> var <- ifelse(test$operator == 'T14', 1, 0)
> 
> operator has several values like T1, T3, T7, T15, T31, T37
> 
> For some values like T3, T7 it works fine but for majority of values it
gives error.
> 
> When I use: is.na(ts$operator), it shows all false values so no NAs.
> 
> Where could be the problem?
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From j@vedbtk111 @end|ng |rom gm@||@com  Wed Jan 26 15:04:51 2022
From: j@vedbtk111 @end|ng |rom gm@||@com (javed khan)
Date: Wed, 26 Jan 2022 15:04:51 +0100
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <20220126165313.26db0d5b@Tarkus>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
 <20220126165313.26db0d5b@Tarkus>
Message-ID: <CAJhui+s9=zb+MwPF2A=tiJZBdYbvhQaeoG+gbVnW4hPTuem=6Q@mail.gmail.com>

Ivan, thanks

When I use options(error = NULL)

it says: Error during wrapup: missing value where TRUE/FALSE needed
Error: no more error handlers available (recursive errors?); invoking
'abort' restart

With traceback(), I get

4: readable_number(max_value - min_value, FALSE)
3: get_nice_ticks(lower_bound, upper_bound)

On Wed, Jan 26, 2022 at 2:53 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:

> On Wed, 26 Jan 2022 14:47:16 +0100
> javed khan <javedbtk111 at gmail.com> wrote:
>
> > Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed
>
> > var <- ifelse(test$operator == 'T14', 1, 0)
>
> The error must be in a place different from your test$operator
> comparison. Have you tried traceback() to get the call stack leading to
> the error? Or options(error = recover) to land in a debugger session
> the moment an uncaught error happens? (Use options(error = NULL) to go
> back to the default behaviour.)
>
> Unrelated: var <- test$operator == 'T14' will also give you an
> equivalent logical vector with a bit less work.
>
> --
> Best regards,
> Ivan
>

	[[alternative HTML version deleted]]


From j@vedbtk111 @end|ng |rom gm@||@com  Wed Jan 26 15:08:48 2022
From: j@vedbtk111 @end|ng |rom gm@||@com (javed khan)
Date: Wed, 26 Jan 2022 15:08:48 +0100
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <ada6856b343d4ac089909e5deda537ec@SRVEXCHCM1301.precheza.cz>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
 <ada6856b343d4ac089909e5deda537ec@SRVEXCHCM1301.precheza.cz>
Message-ID: <CAJhui+v-1b0Y_8W+_oVSSdjgt8-htm2=thyzBbUHbyB__waaLw@mail.gmail.com>

With str(test), I get

data.frame': 9879 obs. of  15 variables:
 $ DepthTree    : num  3 3 3 3 3 3 3 3 3 3 ...
 $ NumSubclass  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ McCabe       : num  1 1 1 1 1 1 1 1 1 1 ...
 $ LOC          : num  9 16 16 16 16 6 6 8 8 8 ...
 $ DepthNested  : num  1 1 1 1 1 1 1 1 1 1 ...
 $ CA           : num  164 164 164 164 164 164 164 164 164 164 ...
 $ CE           : num  31 31 31 31 31 31 31 31 31 31 ...
 $ Instability  : num  0.159 0.159 0.159 0.159 0.159 0.159 0.159 0.159
0.159 0.159 ...
 $ numCovered   : num  132 2516 2516 2516 2516 ...
 $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 8 16 8 8 8 8 8 16
4 4 ...
 $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2 2 2
2 2 2 2 ...
 $ numTestsCover: num  0 0 0 0 0 0 0 0 0 0 ...
 $ mutantAssert : num  0 0 0 0 0 0 0 0 0 0 ...
 $ classAssert  : num  47 47 47 47 47 47 47 47 47 47 ...
 $ isKilled     : Factor w/ 2 levels "yes","no": 2 1 1 1 1 1 1 1 1 1 ...

On Wed, Jan 26, 2022 at 3:01 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:

> Hi
>
> Do not post in HTML, please.
> Try to show your real data - use str(test), or preferably dput(test). If
> test is big, use only fraction of it
> The problem must be probably in your data.
>
> x <- sample(1:20, 100, replace=T)
> fake <- paste("T", x, sep="")
> ifelse(fake=="T14", 1,0)
>   [1] 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
> 0 0
>  [38] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0
> 0 0
>  [75] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0
>
> head(fake)
> [1] "T7"  "T9"  "T3"  "T9"  "T12" "T9"
> > str(fake)
>  chr [1:100] "T7" "T9" "T3" "T9" "T12" "T9" "T19" "T19" "T12" "T2" "T17"
> ...
> >
> Cheers
> Petr
>
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of javed khan
> > Sent: Wednesday, January 26, 2022 2:47 PM
> > To: R-help <r-help at r-project.org>
> > Subject: [R] Error in if (fraction <= 1) { : missing value where
> TRUE/FALSE
> > needed
> >
> > I get this error:
> >
> > Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed
> >
> > I used this:
> >
> > var <- ifelse(test$operator == 'T14', 1, 0)
> >
> > operator has several values like T1, T3, T7, T15, T31, T37
> >
> > For some values like T3, T7 it works fine but for majority of values it
> gives error.
> >
> > When I use: is.na(ts$operator), it shows all false values so no NAs.
> >
> > Where could be the problem?
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Wed Jan 26 15:29:40 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Wed, 26 Jan 2022 14:29:40 +0000
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <CAJhui+s9=zb+MwPF2A=tiJZBdYbvhQaeoG+gbVnW4hPTuem=6Q@mail.gmail.com>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
 <20220126165313.26db0d5b@Tarkus>
 <CAJhui+s9=zb+MwPF2A=tiJZBdYbvhQaeoG+gbVnW4hPTuem=6Q@mail.gmail.com>
Message-ID: <0192053a80d24bd4857bb4353f9a7009@SRVEXCHCM1301.precheza.cz>

Hi

It seems that you are hiding what you really do. 

This
> options(error = NULL)
works fine without any error. So please If you want some reasonable answer
post question with data and code which is causing the error.

My wild guess is that you have some objects in your environment and you do
not know that they are used in you commands. Try to start fresh R session
and try to inspect your environment with 

ls()

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of javed khan
> Sent: Wednesday, January 26, 2022 3:05 PM
> To: Ivan Krylov <krylov.r00t at gmail.com>
> Cc: R-help <r-help at r-project.org>
> Subject: Re: [R] Error in if (fraction <= 1) { : missing value where
TRUE/FALSE
> needed
> 
> Ivan, thanks
> 
> When I use options(error = NULL)
> 
> it says: Error during wrapup: missing value where TRUE/FALSE needed
> Error: no more error handlers available (recursive errors?); invoking
'abort'
> restart
> 
> With traceback(), I get
> 
> 4: readable_number(max_value - min_value, FALSE)
> 3: get_nice_ticks(lower_bound, upper_bound)
> 
> On Wed, Jan 26, 2022 at 2:53 PM Ivan Krylov <krylov.r00t at gmail.com> wrote:
> 
> > On Wed, 26 Jan 2022 14:47:16 +0100
> > javed khan <javedbtk111 at gmail.com> wrote:
> >
> > > Error in if (fraction <= 1) { : missing value where TRUE/FALSE
> > > needed
> >
> > > var <- ifelse(test$operator == 'T14', 1, 0)
> >
> > The error must be in a place different from your test$operator
> > comparison. Have you tried traceback() to get the call stack leading
> > to the error? Or options(error = recover) to land in a debugger
> > session the moment an uncaught error happens? (Use options(error =
> > NULL) to go back to the default behaviour.)
> >
> > Unrelated: var <- test$operator == 'T14' will also give you an
> > equivalent logical vector with a bit less work.
> >
> > --
> > Best regards,
> > Ivan
> >
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From kry|ov@r00t @end|ng |rom gm@||@com  Wed Jan 26 15:36:55 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 26 Jan 2022 17:36:55 +0300
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <CAJhui+s9=zb+MwPF2A=tiJZBdYbvhQaeoG+gbVnW4hPTuem=6Q@mail.gmail.com>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
 <20220126165313.26db0d5b@Tarkus>
 <CAJhui+s9=zb+MwPF2A=tiJZBdYbvhQaeoG+gbVnW4hPTuem=6Q@mail.gmail.com>
Message-ID: <20220126173655.4c38bb55@parabola>

On Wed, 26 Jan 2022 15:04:51 +0100
javed khan <javedbtk111 at gmail.com> wrote:

> 4: readable_number(max_value - min_value, FALSE)
> 3: get_nice_ticks(lower_bound, upper_bound)

A quick search of CRAN code suggests that the error originates in the
following code:

https://github.com/ModelOriented/fairmodels/blob/073a502fd2210f20f43c9c6b3deb40e520ad7de1/R/helper_functions.R#L362

Use the R debugger (see ?recover, ?debug, ?browser) to find out why
`fraction` becomes NA. It could be because lower_bound == upper_bound,
or because any of them is NA, or for some other reason. We don't know,
but you can find out.

-- 
Best regards,
Ivan


From j@vedbtk111 @end|ng |rom gm@||@com  Wed Jan 26 15:44:34 2022
From: j@vedbtk111 @end|ng |rom gm@||@com (javed khan)
Date: Wed, 26 Jan 2022 15:44:34 +0100
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <0192053a80d24bd4857bb4353f9a7009@SRVEXCHCM1301.precheza.cz>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
 <20220126165313.26db0d5b@Tarkus>
 <CAJhui+s9=zb+MwPF2A=tiJZBdYbvhQaeoG+gbVnW4hPTuem=6Q@mail.gmail.com>
 <0192053a80d24bd4857bb4353f9a7009@SRVEXCHCM1301.precheza.cz>
Message-ID: <CAJhui+v-G+O+3fir67PqVz8m7q592KjOqaBo5J8QvtsJtrLBSA@mail.gmail.com>

Hi Pikal, why would I hide something? I provided just a code where error
is.

Full code is:

index= sample(1:nrow(data), 0.7*nrow(data))
train= data[index,]
test= data[-index,]


task = TaskClassif$new("data", backend = train, target = "isKilled")

learner= lrn("classif.gbm", predict_type = "prob")

model= learner$train(task )

explainer = explain_mlr3(model,
                         data = test[,-15],
                         y = as.numeric(test$isKilled)-1,
                         label="GBM")

prot <- ifelse(test$operator == 'T13', 1, 0)
privileged <- '1'

fc= fairness_check(explainer,
                          protected = prot,
                   privileged = privileged)
plot(fc)


And my data is the following:

str(test)
'data.frame': 146 obs. of  15 variables:
 $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
 $ NumSubclass  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ McCabe       : num  1 3 3 3 3 3 3 1 1 2 ...
 $ LOC          : num  3 10 10 10 10 10 10 4 4 5 ...
 $ DepthNested  : num  1 2 2 2 2 2 2 1 1 2 ...
 $ CA           : num  1 1 1 1 1 1 1 1 1 1 ...
 $ CE           : num  2 2 2 2 2 2 2 2 2 2 ...
 $ Instability  : num  0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667
0.667 0.667 ...
 $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
 $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 4 4 7 8 8 8 11 4
10 7 ...
 $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2 2 2
2 4 4 2 ...
 $ numTestsCover: num  16 15 15 16 15 15 15 4 4 16 ...
 $ mutantAssert : num  55 55 55 55 55 55 55 13 13 55 ...
 $ classAssert  : num  3 3 3 3 3 3 3 3 3 3 ...
 $ isKilled     : Factor w/ 2 levels "yes","no": 2 2 2 2 2 2 2 2 2 2 ...
> dput(test)
structure(list(DepthTree = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 2, 2, 1, 2, 1, 1, 1), NumSubclass = c(0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2), McCabe = c(1, 3, 3,
3, 3, 3, 3, 1, 1, 2, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 1, 1, 1, 2,
2, 2, 1, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 3, 3,
3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 5, 5, 5, 5, 5, 5, 5, 5, 2, 2, 2,
2, 5, 5, 5, 5, 5, 5, 1, 5, 5, 5, 5, 5, 5, 5, 5, 5, 2, 3, 3, 3,
3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1,
2, 2, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 4, 1, 1, 1, 1, 2, 2,
2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1), LOC = c(3,
10, 10, 10, 10, 10, 10, 4, 4, 5, 22, 22, 22, 22, 22, 22, 22,
22, 3, 3, 3, 3, 3, 8, 8, 8, 4, 23, 23, 23, 23, 23, 23, 23, 23,
23, 23, 16, 16, 16, 16, 16, 16, 8, 8, 8, 8, 8, 8, 16, 16, 16,
16, 16, 16, 20, 20, 20, 20, 20, 20, 20, 20, 7, 7, 7, 7, 18, 18,
18, 18, 18, 18, 3, 15, 15, 15, 15, 15, 15, 15, 15, 15, 6, 15,
15, 15, 15, 15, 15, 15, 15, 15, 9, 9, 9, 9, 9, 9, 4, 4, 3, 3,
3, 3, 3, 4, 4, 6, 6, 5, 5, 5, 8, 8, 8, 3, 3, 3, 3, 3, 3, 7, 3,
3, 3, 3, 15, 15, 15, 15, 15, 15, 15, 15, 3, 3, 3, 3, 4, 4, 8,
4, 4, 4, 3), DepthNested = c(1, 2, 2, 2, 2, 2, 2, 1, 1, 2, 4,
4, 4, 4, 4, 4, 4, 4, 1, 1, 1, 1, 1, 2, 2, 2, 1, 3, 3, 3, 3, 3,
3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1,
3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2,
1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1,
1, 1, 1, 1, 2, 1, 1, 1, 1), CA = c(1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
1, 1, 1, 1, 1, 1, 2, 1, 2, 2, 1), CE = c(2, 2, 2, 2, 2, 2, 2,
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 2,
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 2, 2, 2, 2, 2, 2, 0, 2, 0, 0, 2), Instability = c(0.667,
0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0.667, 0.667, 0.667, 0.667, 0.667,
0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
0.667, 0.667, 0.667, 0.667, 0.667, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0, 0.667, 0, 0,
0.667), numCovered = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
150, 54, 54, 123, 54, 54, 123, 54, 189, 189, 189, 138, 33, 18,
27, 27, 18, 27, 15, 54, 54, 150, 150, 54, 150, 150, 54, 150,
66, 60, 12, 60, 15, 45, 72, 12, 12, 45, 255, 255, 255, 255, 129,
129, 0, 0, 6, 6, 6, 6, 303, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 15, 21, 12, 12, 12, 12, 12, 12, 12, 12,
48, 1557, 9, 12, 0, 0, 141, 0, 21, 21, 21), operator = structure(c(4L,
4L, 7L, 8L, 8L, 8L, 11L, 4L, 10L, 7L, 4L, 7L, 8L, 8L, 8L, 9L,
9L, 11L, 7L, 8L, 2L, 8L, 8L, 7L, 8L, 10L, 11L, 1L, 2L, 2L, 4L,
8L, 8L, 8L, 8L, 10L, 12L, 4L, 6L, 6L, 8L, 8L, 8L, 7L, 7L, 8L,
8L, 9L, 9L, 1L, 4L, 6L, 8L, 8L, 8L, 1L, 1L, 7L, 7L, 7L, 8L, 8L,
13L, 7L, 8L, 9L, 9L, 1L, 1L, 2L, 7L, 8L, 10L, 10L, 4L, 7L, 7L,
7L, 8L, 8L, 8L, 9L, 9L, 10L, 1L, 8L, 8L, 8L, 8L, 10L, 11L, 11L,
11L, 6L, 7L, 8L, 9L, 9L, 10L, 6L, 10L, 1L, 4L, 7L, 10L, 6L, 7L,
13L, 7L, 13L, 7L, 8L, 9L, 4L, 6L, 9L, 8L, 10L, 8L, 10L, 8L, 10L,
9L, 8L, 10L, 13L, 10L, 2L, 7L, 7L, 8L, 8L, 9L, 11L, 11L, 10L,
10L, 13L, 13L, 8L, 8L, 9L, 4L, 6L, 10L, 10L), .Label = c("T0",
"T1", "T2", "T3", "T4", "T5", "T6", "T7", "T8", "T9", "T10",
"T11", "T12", "T13", "T14", "T15"), class = "factor"), methodReturn =
structure(c(2L,
2L, 2L, 2L, 2L, 2L, 2L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L,
4L, 4L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
4L, 4L, 4L, 4L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
2L, 2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 1L, 1L,
3L, 3L, 1L, 1L, 3L, 3L, 3L, 3L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 2L, 4L, 4L, 4L,
4L, 4L, 4L, 4L, 4L, 4L, 3L, 3L, 2L, 2L, 4L, 4L, 1L, 3L, 1L, 1L,
4L), .Label = c("I", "V", "Z", "method", "D", "[D", "[[D", "J",
"[I", "C", "[J", "[C", "[S", "F", "[F", "[B", "S", "B", "[Z",
"[[S", "[[B", "[[Z"), class = "factor"), numTestsCover = c(16,
15, 15, 16, 15, 15, 15, 4, 4, 16, 16, 16, 15, 15, 15, 16, 16,
15, 3, 3, 2, 2, 2, 16, 11, 16, 4, 16, 16, 3, 16, 16, 4, 16, 16,
16, 16, 2, 3, 2, 1, 4, 1, 16, 15, 16, 15, 16, 16, 2, 2, 2, 3,
2, 2, 4, 5, 5, 4, 5, 5, 4, 5, 4, 4, 4, 4, 4, 3, 4, 4, 3, 4, 4,
5, 5, 4, 4, 5, 4, 4, 5, 4, 4, 4, 3, 4, 4, 4, 4, 3, 3, 4, 4, 4,
4, 4, 6, 6, 0, 0, 2, 2, 2, 2, 7, 17, 17, 15, 15, 15, 15, 15,
16, 16, 16, 16, 15, 16, 16, 15, 17, 17, 16, 16, 5, 4, 4, 4, 4,
4, 4, 4, 4, 4, 16, 16, 3, 4, 0, 0, 5, 0, 4, 4, 1), mutantAssert = c(55,
55, 55, 55, 55, 55, 55, 13, 13, 55, 55, 55, 55, 55, 55, 55, 55,
55, 9, 9, 9, 9, 9, 55, 41, 55, 13, 55, 55, 5, 55, 55, 13, 55,
55, 55, 55, 8, 13, 8, 4, 13, 4, 55, 55, 55, 55, 55, 55, 9, 9,
9, 9, 9, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 6, 9, 9, 6,
9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 6, 9, 9, 9, 9, 6, 6, 9,
9, 9, 9, 9, 14, 14, 0, 0, 2, 2, 2, 2, 15, 58, 58, 55, 55, 55,
55, 55, 58, 58, 58, 55, 55, 55, 55, 55, 58, 58, 58, 58, 9, 9,
6, 6, 6, 6, 6, 6, 6, 6, 55, 55, 5, 13, 0, 0, 11, 0, 9, 9, 8),
    classAssert = c(3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
    3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
    3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
    3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,
    10, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
    3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 0, 0, 0, 0, 1, 1, 3, 0,
    3, 3, 0), isKilled = structure(c(2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L,
    1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L,
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 1L,
    1L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L,
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L,
    1L, 2L, 1L, 1L, 1L), .Label = c("yes", "no"), class = "factor")),
row.names = c(3L,
9L, 12L, 13L, 14L, 15L, 19L, 21L, 22L, 24L, 28L, 29L, 39L, 44L,
46L, 51L, 52L, 57L, 62L, 63L, 68L, 71L, 73L, 75L, 77L, 80L, 83L,
84L, 85L, 86L, 90L, 95L, 100L, 102L, 103L, 108L, 112L, 120L,
122L, 123L, 142L, 143L, 146L, 158L, 159L, 160L, 163L, 167L, 168L,
170L, 174L, 176L, 183L, 186L, 192L, 196L, 199L, 203L, 205L, 206L,
208L, 214L, 221L, 226L, 229L, 233L, 234L, 235L, 236L, 237L, 238L,
249L, 252L, 255L, 260L, 267L, 270L, 271L, 273L, 275L, 276L, 277L,
278L, 286L, 288L, 293L, 295L, 297L, 298L, 300L, 301L, 302L, 306L,
312L, 313L, 316L, 317L, 331L, 333L, 338L, 341L, 342L, 344L, 346L,
348L, 359L, 370L, 375L, 378L, 381L, 382L, 383L, 386L, 389L, 390L,
394L, 397L, 400L, 402L, 403L, 404L, 408L, 415L, 418L, 419L, 423L,
425L, 426L, 429L, 431L, 432L, 433L, 444L, 446L, 447L, 448L, 449L,
451L, 452L, 457L, 458L, 470L, 474L, 476L, 479L, 484L), class = "data.frame")




On Wed, Jan 26, 2022 at 3:29 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:

> Hi
>
> It seems that you are hiding what you really do.
>
> This
> > options(error = NULL)
> works fine without any error. So please If you want some reasonable answer
> post question with data and code which is causing the error.
>
> My wild guess is that you have some objects in your environment and you do
> not know that they are used in you commands. Try to start fresh R session
> and try to inspect your environment with
>
> ls()
>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of javed khan
> > Sent: Wednesday, January 26, 2022 3:05 PM
> > To: Ivan Krylov <krylov.r00t at gmail.com>
> > Cc: R-help <r-help at r-project.org>
> > Subject: Re: [R] Error in if (fraction <= 1) { : missing value where
> TRUE/FALSE
> > needed
> >
> > Ivan, thanks
> >
> > When I use options(error = NULL)
> >
> > it says: Error during wrapup: missing value where TRUE/FALSE needed
> > Error: no more error handlers available (recursive errors?); invoking
> 'abort'
> > restart
> >
> > With traceback(), I get
> >
> > 4: readable_number(max_value - min_value, FALSE)
> > 3: get_nice_ticks(lower_bound, upper_bound)
> >
> > On Wed, Jan 26, 2022 at 2:53 PM Ivan Krylov <krylov.r00t at gmail.com>
> wrote:
> >
> > > On Wed, 26 Jan 2022 14:47:16 +0100
> > > javed khan <javedbtk111 at gmail.com> wrote:
> > >
> > > > Error in if (fraction <= 1) { : missing value where TRUE/FALSE
> > > > needed
> > >
> > > > var <- ifelse(test$operator == 'T14', 1, 0)
> > >
> > > The error must be in a place different from your test$operator
> > > comparison. Have you tried traceback() to get the call stack leading
> > > to the error? Or options(error = recover) to land in a debugger
> > > session the moment an uncaught error happens? (Use options(error =
> > > NULL) to go back to the default behaviour.)
> > >
> > > Unrelated: var <- test$operator == 'T14' will also give you an
> > > equivalent logical vector with a bit less work.
> > >
> > > --
> > > Best regards,
> > > Ivan
> > >
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jan 26 16:03:56 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 26 Jan 2022 07:03:56 -0800
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
Message-ID: <08361823-248E-43B0-8E73-7A26BD45D59D@dcn.davis.ca.us>

Your error and your code don't match. Please spend some time to make a small reproducible example [1][2] when posting a question... you may even figure out your own answer before you send it out.

[1] http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

[2] http://adv-r.had.co.nz/Reproducibility.html

On January 26, 2022 5:47:16 AM PST, javed khan <javedbtk111 at gmail.com> wrote:
>I get this error:
>
>Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed
>
>I used this:
>
>var <- ifelse(test$operator == 'T14', 1, 0)
>
>operator has several values like T1, T3, T7, T15, T31, T37
>
>For some values like T3, T7 it works fine but for majority of values it
>gives error.
>
>When I use: is.na(ts$operator), it shows all false values so no NAs.
>
>Where could be the problem?
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From v@|kremk @end|ng |rom gm@||@com  Wed Jan 26 16:36:31 2022
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Wed, 26 Jan 2022 10:36:31 -0500
Subject: [R] Linear
Message-ID: <CAJOiR6bAUpbVzLndV3ujK-29d-270-oa9RZbrnqUpUy81r5MEw@mail.gmail.com>

Hi all,

I am trying to get the lsmeans for one of the factors  fitted in the
following model

Model1 = lm(Yld ~ A + B + C, data = dat2)
M_lsm =  as.data.frame(lsmeans(Model1, "C")),

My problem is, I am getting this error message.
"Error: The rows of your requested reference grid would be 81412, which
exceeds the limit of 10000 (not including any multivariate responses)".

How do I fix this?

Thank you

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jan 26 16:49:45 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 26 Jan 2022 07:49:45 -0800
Subject: [R] Linear
In-Reply-To: <CAJOiR6bAUpbVzLndV3ujK-29d-270-oa9RZbrnqUpUy81r5MEw@mail.gmail.com>
References: <CAJOiR6bAUpbVzLndV3ujK-29d-270-oa9RZbrnqUpUy81r5MEw@mail.gmail.com>
Message-ID: <CAGxFJbTGv85s6t5h56=vyr6idW+=4NsMfbRZBgnSRDxEHJJ_2g@mail.gmail.com>

What does str(dat2) give?

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Wed, Jan 26, 2022 at 7:37 AM Val <valkremk at gmail.com> wrote:
>
> Hi all,
>
> I am trying to get the lsmeans for one of the factors  fitted in the
> following model
>
> Model1 = lm(Yld ~ A + B + C, data = dat2)
> M_lsm =  as.data.frame(lsmeans(Model1, "C")),
>
> My problem is, I am getting this error message.
> "Error: The rows of your requested reference grid would be 81412, which
> exceeds the limit of 10000 (not including any multivariate responses)".
>
> How do I fix this?
>
> Thank you
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Jan 26 17:06:16 2022
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 26 Jan 2022 19:06:16 +0300
Subject: [R] Linear
In-Reply-To: <CAJOiR6bAUpbVzLndV3ujK-29d-270-oa9RZbrnqUpUy81r5MEw@mail.gmail.com>
References: <CAJOiR6bAUpbVzLndV3ujK-29d-270-oa9RZbrnqUpUy81r5MEw@mail.gmail.com>
Message-ID: <20220126190616.3f39f947@Tarkus>

On Wed, 26 Jan 2022 10:36:31 -0500
Val <valkremk at gmail.com> wrote:

> My problem is, I am getting this error message.
> "Error: The rows of your requested reference grid would be 81412,
> which exceeds the limit of 10000 (not including any multivariate
> responses)".

Is this the whole error message? According to [*] (and the rest of the
error message), the emmeans package (which lsmeans uses under the hood)
lets you adjust that limit:

>> Your options are:
>>   1. Specify some (or more) nuisance factors using the 'nuisance'
>>      argument (see ?ref_grid). These must be factors that do not
>>      interact with others.
>>   2. Add the argument 'rg.limit = <new limit>' to the call. Be
>>      careful, because this could cause excessive memory use and
>>      performance issues. Or, change the default via
>>      'emm_options(rg.limit = <new limit>)'.

-- 
Best regards,
Ivan

[*]
https://cran.r-project.org/web/packages/emmeans/vignettes/messy-data.html#rg.limit


From v@|kremk @end|ng |rom gm@||@com  Wed Jan 26 19:46:13 2022
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Wed, 26 Jan 2022 13:46:13 -0500
Subject: [R] Linear
In-Reply-To: <CAGxFJbTGv85s6t5h56=vyr6idW+=4NsMfbRZBgnSRDxEHJJ_2g@mail.gmail.com>
References: <CAJOiR6bAUpbVzLndV3ujK-29d-270-oa9RZbrnqUpUy81r5MEw@mail.gmail.com>
 <CAGxFJbTGv85s6t5h56=vyr6idW+=4NsMfbRZBgnSRDxEHJJ_2g@mail.gmail.com>
Message-ID: <CAJOiR6aAWWDF1ZssS6Wz2aYq2DYQ_HEvvc9h+Y9++qgBf-LSaw@mail.gmail.com>

str(dat2)
data.frame': 37654 obs. ...:
 $ Yld    : int
 $ A       : int
 $ B       : chr
 $ C       : chr

On Wed, Jan 26, 2022 at 10:49 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> What does str(dat2) give?
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
> On Wed, Jan 26, 2022 at 7:37 AM Val <valkremk at gmail.com> wrote:
> >
> > Hi all,
> >
> > I am trying to get the lsmeans for one of the factors  fitted in the
> > following model
> >
> > Model1 = lm(Yld ~ A + B + C, data = dat2)
> > M_lsm =  as.data.frame(lsmeans(Model1, "C")),
> >
> > My problem is, I am getting this error message.
> > "Error: The rows of your requested reference grid would be 81412, which
> > exceeds the limit of 10000 (not including any multivariate responses)".
> >
> > How do I fix this?
> >
> > Thank you
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From p@ych@o||u @end|ng |rom gm@||@com  Wed Jan 26 20:12:36 2022
From: p@ych@o||u @end|ng |rom gm@||@com (Chao Liu)
Date: Wed, 26 Jan 2022 14:12:36 -0500
Subject: [R] Simulate type I error
Message-ID: <CACCU-vOgateBp1WWPBtRXdFsWBEWEvSXJcWVb0HrOeMKJL2UJw@mail.gmail.com>

Dear R-help community,

I would like to simulate type I error for a random-effects model I
generated.

The statistic of interest is standard deviations of the random intercept
and random slope. Specifically, for random intercept, H_{0}: lambda_{0} =2
and H_{1}: lambda_{0} not equal to 2; for random slope, H_{0}: lambda_{1}
=1 and H_{1}: lambda_{1} not equal to 1. I assume the test would be
likelihood ratio test but please correct me if I am wrong. How do I assess
type I error for the random-effects model I specified below:

set.seed(323)
#The following code is to specify the structure and parameters of the
random-effects model
dtfunc = function(nsub){
  time = 0:9
  rt = c()
  time.all = rep(time, nsub)
  subid.all = as.factor(rep(1:nsub, each = length(time)))

  # Step 1:  Specify the lambdas.
  G = matrix(c(2^2, 0, 0, 1^2), nrow = 2)
  int.mean = 251
  slope.mean = 10
  sub.ints.slopes = mvrnorm(nsub, c(int.mean, slope.mean), G)
  sub.ints = sub.ints.slopes[,1]
  time.slopes = sub.ints.slopes[,2]

  # Step 2:  Use the intercepts and slopes to generate RT data
  sigma = 30
  for (i in 1:nsub){
    rt.vec = sub.ints[i] + time.slopes[i]*time + rnorm(length(time), sd =
sigma)
    rt = c(rt, rt.vec)
  }

  dat = data.frame(rt, time.all, subid.all)
  return(dat)
}

#Here I run one random-effects model
set.seed(10)
dat = dtfunc(16)
lmer(rt~time.all + (1+time.all |subid.all), dat)

Assuming the test for significance is likelihood ratio test and so in the
end, I want to see if I run the test 1000 times, what is the probability of
rejecting null hypothesis when it is TRUE. Also, how do I plot the behavior
of type I error if I change the values of standard deviations?

Any help is appreciated!

Best,

Chao

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jan 26 20:49:22 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 26 Jan 2022 11:49:22 -0800
Subject: [R] Simulate type I error
In-Reply-To: <CACCU-vOgateBp1WWPBtRXdFsWBEWEvSXJcWVb0HrOeMKJL2UJw@mail.gmail.com>
References: <CACCU-vOgateBp1WWPBtRXdFsWBEWEvSXJcWVb0HrOeMKJL2UJw@mail.gmail.com>
Message-ID: <7F9EEF21-F587-4B04-AA3C-20D4EE27759E@dcn.davis.ca.us>

You might get a response here, but the R-sig-mixed-models mailing list is a more appropriate place for this. See the Posting Guide mentioned in the footer.

Also, post using plain text... formatted email may not communicate what you expected it to communicate.

On January 26, 2022 11:12:36 AM PST, Chao Liu <psychaoliu at gmail.com> wrote:
>Dear R-help community,
>
>I would like to simulate type I error for a random-effects model I
>generated.
>
>The statistic of interest is standard deviations of the random intercept
>and random slope. Specifically, for random intercept, H_{0}: lambda_{0} =2
>and H_{1}: lambda_{0} not equal to 2; for random slope, H_{0}: lambda_{1}
>=1 and H_{1}: lambda_{1} not equal to 1. I assume the test would be
>likelihood ratio test but please correct me if I am wrong. How do I assess
>type I error for the random-effects model I specified below:
>
>set.seed(323)
>#The following code is to specify the structure and parameters of the
>random-effects model
>dtfunc = function(nsub){
>  time = 0:9
>  rt = c()
>  time.all = rep(time, nsub)
>  subid.all = as.factor(rep(1:nsub, each = length(time)))
>
>  # Step 1:  Specify the lambdas.
>  G = matrix(c(2^2, 0, 0, 1^2), nrow = 2)
>  int.mean = 251
>  slope.mean = 10
>  sub.ints.slopes = mvrnorm(nsub, c(int.mean, slope.mean), G)
>  sub.ints = sub.ints.slopes[,1]
>  time.slopes = sub.ints.slopes[,2]
>
>  # Step 2:  Use the intercepts and slopes to generate RT data
>  sigma = 30
>  for (i in 1:nsub){
>    rt.vec = sub.ints[i] + time.slopes[i]*time + rnorm(length(time), sd =
>sigma)
>    rt = c(rt, rt.vec)
>  }
>
>  dat = data.frame(rt, time.all, subid.all)
>  return(dat)
>}
>
>#Here I run one random-effects model
>set.seed(10)
>dat = dtfunc(16)
>lmer(rt~time.all + (1+time.all |subid.all), dat)
>
>Assuming the test for significance is likelihood ratio test and so in the
>end, I want to see if I run the test 1000 times, what is the probability of
>rejecting null hypothesis when it is TRUE. Also, how do I plot the behavior
>of type I error if I change the values of standard deviations?
>
>Any help is appreciated!
>
>Best,
>
>Chao
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From p@ych@o||u @end|ng |rom gm@||@com  Wed Jan 26 22:03:46 2022
From: p@ych@o||u @end|ng |rom gm@||@com (Chao Liu)
Date: Wed, 26 Jan 2022 16:03:46 -0500
Subject: [R] Simulate type I error
In-Reply-To: <7F9EEF21-F587-4B04-AA3C-20D4EE27759E@dcn.davis.ca.us>
References: <CACCU-vOgateBp1WWPBtRXdFsWBEWEvSXJcWVb0HrOeMKJL2UJw@mail.gmail.com>
 <7F9EEF21-F587-4B04-AA3C-20D4EE27759E@dcn.davis.ca.us>
Message-ID: <CACCU-vPx2StZgYYTyBv+JaJXZc84J_ei8_bxYXw_hpcvW0GPvQ@mail.gmail.com>

Hi Jeff,

Thanks for the reminder. I will post my question there. I did post the
plain text but maybe the default font of my gmail makes it look like being
formatted.

Best,

Chao

On Wed, Jan 26, 2022 at 2:49 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> You might get a response here, but the R-sig-mixed-models mailing list is
> a more appropriate place for this. See the Posting Guide mentioned in the
> footer.
>
> Also, post using plain text... formatted email may not communicate what
> you expected it to communicate.
>
> On January 26, 2022 11:12:36 AM PST, Chao Liu <psychaoliu at gmail.com>
> wrote:
> >Dear R-help community,
> >
> >I would like to simulate type I error for a random-effects model I
> >generated.
> >
> >The statistic of interest is standard deviations of the random intercept
> >and random slope. Specifically, for random intercept, H_{0}: lambda_{0} =2
> >and H_{1}: lambda_{0} not equal to 2; for random slope, H_{0}: lambda_{1}
> >=1 and H_{1}: lambda_{1} not equal to 1. I assume the test would be
> >likelihood ratio test but please correct me if I am wrong. How do I assess
> >type I error for the random-effects model I specified below:
> >
> >set.seed(323)
> >#The following code is to specify the structure and parameters of the
> >random-effects model
> >dtfunc = function(nsub){
> >  time = 0:9
> >  rt = c()
> >  time.all = rep(time, nsub)
> >  subid.all = as.factor(rep(1:nsub, each = length(time)))
> >
> >  # Step 1:  Specify the lambdas.
> >  G = matrix(c(2^2, 0, 0, 1^2), nrow = 2)
> >  int.mean = 251
> >  slope.mean = 10
> >  sub.ints.slopes = mvrnorm(nsub, c(int.mean, slope.mean), G)
> >  sub.ints = sub.ints.slopes[,1]
> >  time.slopes = sub.ints.slopes[,2]
> >
> >  # Step 2:  Use the intercepts and slopes to generate RT data
> >  sigma = 30
> >  for (i in 1:nsub){
> >    rt.vec = sub.ints[i] + time.slopes[i]*time + rnorm(length(time), sd =
> >sigma)
> >    rt = c(rt, rt.vec)
> >  }
> >
> >  dat = data.frame(rt, time.all, subid.all)
> >  return(dat)
> >}
> >
> >#Here I run one random-effects model
> >set.seed(10)
> >dat = dtfunc(16)
> >lmer(rt~time.all + (1+time.all |subid.all), dat)
> >
> >Assuming the test for significance is likelihood ratio test and so in the
> >end, I want to see if I run the test 1000 times, what is the probability
> of
> >rejecting null hypothesis when it is TRUE. Also, how do I plot the
> behavior
> >of type I error if I change the values of standard deviations?
> >
> >Any help is appreciated!
> >
> >Best,
> >
> >Chao
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jan 26 22:17:17 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 26 Jan 2022 13:17:17 -0800
Subject: [R] Simulate type I error
In-Reply-To: <CACCU-vPx2StZgYYTyBv+JaJXZc84J_ei8_bxYXw_hpcvW0GPvQ@mail.gmail.com>
References: <CACCU-vOgateBp1WWPBtRXdFsWBEWEvSXJcWVb0HrOeMKJL2UJw@mail.gmail.com>
 <7F9EEF21-F587-4B04-AA3C-20D4EE27759E@dcn.davis.ca.us>
 <CACCU-vPx2StZgYYTyBv+JaJXZc84J_ei8_bxYXw_hpcvW0GPvQ@mail.gmail.com>
Message-ID: <CAGxFJbTYRqQD=3Zo4RJ+hfe3i-3Fw0bEpRNT4=7dvGs+jOAaGA@mail.gmail.com>

Please note:

" I did post the plain text but maybe the default font of my gmail
makes it look like being formatted."

I assume this must be false, because the list server detected html and
posted "[[alternative HTML version deleted]]" after your email. You
have to explicitly choose "Plain text mode" in gmail as its default is
html.

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )


On Wed, Jan 26, 2022 at 1:04 PM Chao Liu <psychaoliu at gmail.com> wrote:
>
> Hi Jeff,
>
> Thanks for the reminder. I will post my question there. I did post the
> plain text but maybe the default font of my gmail makes it look like being
> formatted.
>
> Best,
>
> Chao
>
> On Wed, Jan 26, 2022 at 2:49 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> wrote:
>
> > You might get a response here, but the R-sig-mixed-models mailing list is
> > a more appropriate place for this. See the Posting Guide mentioned in the
> > footer.
> >
> > Also, post using plain text... formatted email may not communicate what
> > you expected it to communicate.
> >
> > On January 26, 2022 11:12:36 AM PST, Chao Liu <psychaoliu at gmail.com>
> > wrote:
> > >Dear R-help community,
> > >
> > >I would like to simulate type I error for a random-effects model I
> > >generated.
> > >
> > >The statistic of interest is standard deviations of the random intercept
> > >and random slope. Specifically, for random intercept, H_{0}: lambda_{0} =2
> > >and H_{1}: lambda_{0} not equal to 2; for random slope, H_{0}: lambda_{1}
> > >=1 and H_{1}: lambda_{1} not equal to 1. I assume the test would be
> > >likelihood ratio test but please correct me if I am wrong. How do I assess
> > >type I error for the random-effects model I specified below:
> > >
> > >set.seed(323)
> > >#The following code is to specify the structure and parameters of the
> > >random-effects model
> > >dtfunc = function(nsub){
> > >  time = 0:9
> > >  rt = c()
> > >  time.all = rep(time, nsub)
> > >  subid.all = as.factor(rep(1:nsub, each = length(time)))
> > >
> > >  # Step 1:  Specify the lambdas.
> > >  G = matrix(c(2^2, 0, 0, 1^2), nrow = 2)
> > >  int.mean = 251
> > >  slope.mean = 10
> > >  sub.ints.slopes = mvrnorm(nsub, c(int.mean, slope.mean), G)
> > >  sub.ints = sub.ints.slopes[,1]
> > >  time.slopes = sub.ints.slopes[,2]
> > >
> > >  # Step 2:  Use the intercepts and slopes to generate RT data
> > >  sigma = 30
> > >  for (i in 1:nsub){
> > >    rt.vec = sub.ints[i] + time.slopes[i]*time + rnorm(length(time), sd =
> > >sigma)
> > >    rt = c(rt, rt.vec)
> > >  }
> > >
> > >  dat = data.frame(rt, time.all, subid.all)
> > >  return(dat)
> > >}
> > >
> > >#Here I run one random-effects model
> > >set.seed(10)
> > >dat = dtfunc(16)
> > >lmer(rt~time.all + (1+time.all |subid.all), dat)
> > >
> > >Assuming the test for significance is likelihood ratio test and so in the
> > >end, I want to see if I run the test 1000 times, what is the probability
> > of
> > >rejecting null hypothesis when it is TRUE. Also, how do I plot the
> > behavior
> > >of type I error if I change the values of standard deviations?
> > >
> > >Any help is appreciated!
> > >
> > >Best,
> > >
> > >Chao
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > >______________________________________________
> > >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >https://stat.ethz.ch/mailman/listinfo/r-help
> > >PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > >and provide commented, minimal, self-contained, reproducible code.
> >
> > --
> > Sent from my phone. Please excuse my brevity.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From petr@p|k@| @end|ng |rom prechez@@cz  Thu Jan 27 08:39:27 2022
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Thu, 27 Jan 2022 07:39:27 +0000
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <CAJhui+v-G+O+3fir67PqVz8m7q592KjOqaBo5J8QvtsJtrLBSA@mail.gmail.com>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
 <20220126165313.26db0d5b@Tarkus>
 <CAJhui+s9=zb+MwPF2A=tiJZBdYbvhQaeoG+gbVnW4hPTuem=6Q@mail.gmail.com>
 <0192053a80d24bd4857bb4353f9a7009@SRVEXCHCM1301.precheza.cz>
 <CAJhui+v-G+O+3fir67PqVz8m7q592KjOqaBo5J8QvtsJtrLBSA@mail.gmail.com>
Message-ID: <992be822fbfd4d759dc1501dfd35018c@SRVEXCHCM1301.precheza.cz>

Hi

Actually you did not. Your original question was:

> Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed
> I used this:
> var <- ifelse(test$operator == 'T14', 1, 0)
> operator has several values like T1, T3, T7, T15, T31, T37
> For some values like T3, T7 it works fine but for majority of values
> it gives error.
> When I use: is.na(ts$operator), it shows all false values so no NAs.

Only now we could inspect your whole code and it was already pointed that the 
error does not originate from ifelse.

With the same data and ifelse code I did not get any error.

test <- structure(list(DepthTree = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
<snip>

> str(test)
'data.frame':   146 obs. of  15 variables:
 $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
 <snip>
$ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
 $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 4 4 7 8 8 8 11 4 10 7 
...
 $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2 2 2 2 4 
4 2 ...
 $ numTestsCover: num  16 15 15 16 15 15 15 4 4 16 ...
 $ mutantAssert : num  55 55 55 55 55 55 55 13 13 55 ...
 $ classAssert  : num  3 3 3 3 3 3 3 3 3 3 ...
 $ isKilled     : Factor w/ 2 levels "yes","no": 2 2 2 2 2 2 2 2 2 2 ...
>
prot <- ifelse(test$operator == 'T13', 1, 0)

the most probable source of the error is

fc= fairness_check(explainer,
                          protected = prot,
                   privileged = privileged)

so you should check explainer and privileged

Cheers
Petr

From: javed khan <javedbtk111 at gmail.com>
Sent: Wednesday, January 26, 2022 3:45 PM
To: PIKAL Petr <petr.pikal at precheza.cz>
Cc: R-help <r-help at r-project.org>
Subject: Re: [R] Error in if (fraction <= 1) { : missing value where 
TRUE/FALSE needed

Hi Pikal, why would I hide something? I provided just a code where error is.

Full code is:

index= sample(1:nrow(data), 0.7*nrow(data))
train= data[index,]
test= data[-index,]


task = TaskClassif$new("data", backend = train, target = "isKilled")

learner= lrn("classif.gbm", predict_type = "prob")

model= learner$train(task )

explainer = explain_mlr3(model,
                         data = test[,-15],
                         y = as.numeric(test$isKilled)-1,
                         label="GBM")

prot <- ifelse(test$operator == 'T13', 1, 0)
privileged <- '1'

fc= fairness_check(explainer,
                          protected = prot,
                   privileged = privileged)
plot(fc)


And my data is the following:

str(test)
'data.frame': 146 obs. of  15 variables:
 $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
 $ NumSubclass  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ McCabe       : num  1 3 3 3 3 3 3 1 1 2 ...
 $ LOC          : num  3 10 10 10 10 10 10 4 4 5 ...
 $ DepthNested  : num  1 2 2 2 2 2 2 1 1 2 ...
 $ CA           : num  1 1 1 1 1 1 1 1 1 1 ...
 $ CE           : num  2 2 2 2 2 2 2 2 2 2 ...
 $ Instability  : num  0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 
0.667 ...
 $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
 $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 4 4 7 8 8 8 11 4 10 7 
...
 $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2 2 2 2 4 
4 2 ...
 $ numTestsCover: num  16 15 15 16 15 15 15 4 4 16 ...
 $ mutantAssert : num  55 55 55 55 55 55 55 13 13 55 ...
 $ classAssert  : num  3 3 3 3 3 3 3 3 3 3 ...
 $ isKilled     : Factor w/ 2 levels "yes","no": 2 2 2 2 2 2 2 2 2 2 ...
> dput(test)
structure(list(DepthTree = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 2, 2, 1, 2, 1, 1, 1), NumSubclass = c(0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2), McCabe = c(1, 3, 3,
3, 3, 3, 3, 1, 1, 2, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 1, 1, 1, 2,
2, 2, 1, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 3, 3,
3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 5, 5, 5, 5, 5, 5, 5, 5, 2, 2, 2,
2, 5, 5, 5, 5, 5, 5, 1, 5, 5, 5, 5, 5, 5, 5, 5, 5, 2, 3, 3, 3,
3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1,
2, 2, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 4, 1, 1, 1, 1, 2, 2,
2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1), LOC = c(3,
10, 10, 10, 10, 10, 10, 4, 4, 5, 22, 22, 22, 22, 22, 22, 22,
22, 3, 3, 3, 3, 3, 8, 8, 8, 4, 23, 23, 23, 23, 23, 23, 23, 23,
23, 23, 16, 16, 16, 16, 16, 16, 8, 8, 8, 8, 8, 8, 16, 16, 16,
16, 16, 16, 20, 20, 20, 20, 20, 20, 20, 20, 7, 7, 7, 7, 18, 18,
18, 18, 18, 18, 3, 15, 15, 15, 15, 15, 15, 15, 15, 15, 6, 15,
15, 15, 15, 15, 15, 15, 15, 15, 9, 9, 9, 9, 9, 9, 4, 4, 3, 3,
3, 3, 3, 4, 4, 6, 6, 5, 5, 5, 8, 8, 8, 3, 3, 3, 3, 3, 3, 7, 3,
3, 3, 3, 15, 15, 15, 15, 15, 15, 15, 15, 3, 3, 3, 3, 4, 4, 8,
4, 4, 4, 3), DepthNested = c(1, 2, 2, 2, 2, 2, 2, 1, 1, 2, 4,
4, 4, 4, 4, 4, 4, 4, 1, 1, 1, 1, 1, 2, 2, 2, 1, 3, 3, 3, 3, 3,
3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1,
3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2,
1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1,
1, 1, 1, 1, 2, 1, 1, 1, 1), CA = c(1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
1, 1, 1, 1, 1, 1, 2, 1, 2, 2, 1), CE = c(2, 2, 2, 2, 2, 2, 2,
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 2,
2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 2, 2, 2, 2, 2, 2, 0, 2, 0, 0, 2), Instability = c(0.667,
0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0.667, 0.667, 0.667, 0.667, 0.667,
0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
0.667, 0.667, 0.667, 0.667, 0.667, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0, 0.667, 0, 0,
0.667), numCovered = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
150, 54, 54, 123, 54, 54, 123, 54, 189, 189, 189, 138, 33, 18,
27, 27, 18, 27, 15, 54, 54, 150, 150, 54, 150, 150, 54, 150,
66, 60, 12, 60, 15, 45, 72, 12, 12, 45, 255, 255, 255, 255, 129,
129, 0, 0, 6, 6, 6, 6, 303, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0, 15, 21, 12, 12, 12, 12, 12, 12, 12, 12,
48, 1557, 9, 12, 0, 0, 141, 0, 21, 21, 21), operator = structure(c(4L,
4L, 7L, 8L, 8L, 8L, 11L, 4L, 10L, 7L, 4L, 7L, 8L, 8L, 8L, 9L,
9L, 11L, 7L, 8L, 2L, 8L, 8L, 7L, 8L, 10L, 11L, 1L, 2L, 2L, 4L,
8L, 8L, 8L, 8L, 10L, 12L, 4L, 6L, 6L, 8L, 8L, 8L, 7L, 7L, 8L,
8L, 9L, 9L, 1L, 4L, 6L, 8L, 8L, 8L, 1L, 1L, 7L, 7L, 7L, 8L, 8L,
13L, 7L, 8L, 9L, 9L, 1L, 1L, 2L, 7L, 8L, 10L, 10L, 4L, 7L, 7L,
7L, 8L, 8L, 8L, 9L, 9L, 10L, 1L, 8L, 8L, 8L, 8L, 10L, 11L, 11L,
11L, 6L, 7L, 8L, 9L, 9L, 10L, 6L, 10L, 1L, 4L, 7L, 10L, 6L, 7L,
13L, 7L, 13L, 7L, 8L, 9L, 4L, 6L, 9L, 8L, 10L, 8L, 10L, 8L, 10L,
9L, 8L, 10L, 13L, 10L, 2L, 7L, 7L, 8L, 8L, 9L, 11L, 11L, 10L,
10L, 13L, 13L, 8L, 8L, 9L, 4L, 6L, 10L, 10L), .Label = c("T0",
"T1", "T2", "T3", "T4", "T5", "T6", "T7", "T8", "T9", "T10",
"T11", "T12", "T13", "T14", "T15"), class = "factor"), methodReturn = 
structure(c(2L,
2L, 2L, 2L, 2L, 2L, 2L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L,
4L, 4L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
4L, 4L, 4L, 4L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
2L, 2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 1L, 1L,
3L, 3L, 1L, 1L, 3L, 3L, 3L, 3L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 2L, 4L, 4L, 4L,
4L, 4L, 4L, 4L, 4L, 4L, 3L, 3L, 2L, 2L, 4L, 4L, 1L, 3L, 1L, 1L,
4L), .Label = c("I", "V", "Z", "method", "D", "[D", "[[D", "J",
"[I", "C", "[J", "[C", "[S", "F", "[F", "[B", "S", "B", "[Z",
"[[S", "[[B", "[[Z"), class = "factor"), numTestsCover = c(16,
15, 15, 16, 15, 15, 15, 4, 4, 16, 16, 16, 15, 15, 15, 16, 16,
15, 3, 3, 2, 2, 2, 16, 11, 16, 4, 16, 16, 3, 16, 16, 4, 16, 16,
16, 16, 2, 3, 2, 1, 4, 1, 16, 15, 16, 15, 16, 16, 2, 2, 2, 3,
2, 2, 4, 5, 5, 4, 5, 5, 4, 5, 4, 4, 4, 4, 4, 3, 4, 4, 3, 4, 4,
5, 5, 4, 4, 5, 4, 4, 5, 4, 4, 4, 3, 4, 4, 4, 4, 3, 3, 4, 4, 4,
4, 4, 6, 6, 0, 0, 2, 2, 2, 2, 7, 17, 17, 15, 15, 15, 15, 15,
16, 16, 16, 16, 15, 16, 16, 15, 17, 17, 16, 16, 5, 4, 4, 4, 4,
4, 4, 4, 4, 4, 16, 16, 3, 4, 0, 0, 5, 0, 4, 4, 1), mutantAssert = c(55,
55, 55, 55, 55, 55, 55, 13, 13, 55, 55, 55, 55, 55, 55, 55, 55,
55, 9, 9, 9, 9, 9, 55, 41, 55, 13, 55, 55, 5, 55, 55, 13, 55,
55, 55, 55, 8, 13, 8, 4, 13, 4, 55, 55, 55, 55, 55, 55, 9, 9,
9, 9, 9, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 6, 9, 9, 6,
9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 6, 9, 9, 9, 9, 6, 6, 9,
9, 9, 9, 9, 14, 14, 0, 0, 2, 2, 2, 2, 15, 58, 58, 55, 55, 55,
55, 55, 58, 58, 58, 55, 55, 55, 55, 55, 58, 58, 58, 58, 9, 9,
6, 6, 6, 6, 6, 6, 6, 6, 55, 55, 5, 13, 0, 0, 11, 0, 9, 9, 8),
    classAssert = c(3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
    3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
    3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
    3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,
    10, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
    3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 0, 0, 0, 0, 1, 1, 3, 0,
    3, 3, 0), isKilled = structure(c(2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L,
    1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L,
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 1L,
    1L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L,
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L,
    1L, 2L, 1L, 1L, 1L), .Label = c("yes", "no"), class = "factor")), 
row.names = c(3L,
9L, 12L, 13L, 14L, 15L, 19L, 21L, 22L, 24L, 28L, 29L, 39L, 44L,
46L, 51L, 52L, 57L, 62L, 63L, 68L, 71L, 73L, 75L, 77L, 80L, 83L,
84L, 85L, 86L, 90L, 95L, 100L, 102L, 103L, 108L, 112L, 120L,
122L, 123L, 142L, 143L, 146L, 158L, 159L, 160L, 163L, 167L, 168L,
170L, 174L, 176L, 183L, 186L, 192L, 196L, 199L, 203L, 205L, 206L,
208L, 214L, 221L, 226L, 229L, 233L, 234L, 235L, 236L, 237L, 238L,
249L, 252L, 255L, 260L, 267L, 270L, 271L, 273L, 275L, 276L, 277L,
278L, 286L, 288L, 293L, 295L, 297L, 298L, 300L, 301L, 302L, 306L,
312L, 313L, 316L, 317L, 331L, 333L, 338L, 341L, 342L, 344L, 346L,
348L, 359L, 370L, 375L, 378L, 381L, 382L, 383L, 386L, 389L, 390L,
394L, 397L, 400L, 402L, 403L, 404L, 408L, 415L, 418L, 419L, 423L,
425L, 426L, 429L, 431L, 432L, 433L, 444L, 446L, 447L, 448L, 449L,
451L, 452L, 457L, 458L, 470L, 474L, 476L, 479L, 484L), class = "data.frame")




On Wed, Jan 26, 2022 at 3:29 PM PIKAL Petr <mailto:petr.pikal at precheza.cz> 
wrote:
Hi

It seems that you are hiding what you really do.

This
> options(error = NULL)
works fine without any error. So please If you want some reasonable answer
post question with data and code which is causing the error.

My wild guess is that you have some objects in your environment and you do
not know that they are used in you commands. Try to start fresh R session
and try to inspect your environment with

ls()

Cheers
Petr

> -----Original Message-----
> From: R-help <mailto:r-help-bounces at r-project.org> On Behalf Of javed khan
> Sent: Wednesday, January 26, 2022 3:05 PM
> To: Ivan Krylov <mailto:krylov.r00t at gmail.com>
> Cc: R-help <mailto:r-help at r-project.org>
> Subject: Re: [R] Error in if (fraction <= 1) { : missing value where
TRUE/FALSE
> needed
>
> Ivan, thanks
>
> When I use options(error = NULL)
>
> it says: Error during wrapup: missing value where TRUE/FALSE needed
> Error: no more error handlers available (recursive errors?); invoking
'abort'
> restart
>
> With traceback(), I get
>
> 4: readable_number(max_value - min_value, FALSE)
> 3: get_nice_ticks(lower_bound, upper_bound)
>
> On Wed, Jan 26, 2022 at 2:53 PM Ivan Krylov <mailto:krylov.r00t at gmail.com> 
> wrote:
>
> > On Wed, 26 Jan 2022 14:47:16 +0100
> > javed khan <mailto:javedbtk111 at gmail.com> wrote:
> >
> > > Error in if (fraction <= 1) { : missing value where TRUE/FALSE
> > > needed
> >
> > > var <- ifelse(test$operator == 'T14', 1, 0)
> >
> > The error must be in a place different from your test$operator
> > comparison. Have you tried traceback() to get the call stack leading
> > to the error? Or options(error = recover) to land in a debugger
> > session the moment an uncaught error happens? (Use options(error =
> > NULL) to go back to the default behaviour.)
> >
> > Unrelated: var <- test$operator == 'T14' will also give you an
> > equivalent logical vector with a bit less work.
> >
> > --
> > Best regards,
> > Ivan
> >
>
>       [[alternative HTML version deleted]]
>
> ______________________________________________
> mailto:R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From bgunter@4567 @end|ng |rom gm@||@com  Thu Jan 27 16:43:57 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 27 Jan 2022 07:43:57 -0800
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <992be822fbfd4d759dc1501dfd35018c@SRVEXCHCM1301.precheza.cz>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
 <20220126165313.26db0d5b@Tarkus>
 <CAJhui+s9=zb+MwPF2A=tiJZBdYbvhQaeoG+gbVnW4hPTuem=6Q@mail.gmail.com>
 <0192053a80d24bd4857bb4353f9a7009@SRVEXCHCM1301.precheza.cz>
 <CAJhui+v-G+O+3fir67PqVz8m7q592KjOqaBo5J8QvtsJtrLBSA@mail.gmail.com>
 <992be822fbfd4d759dc1501dfd35018c@SRVEXCHCM1301.precheza.cz>
Message-ID: <CAGxFJbRbyDqqMNq=+7a7_90Kd89+TWp_Br2Ra=uTZOPivTxDQw@mail.gmail.com>

This will not help solve the issue, but perhaps it is worth pointing
out that the idiom,
prot <- ifelse(test$operator == 'T13', 1, 0)
is perhaps more simply coded as
prot <- test$operator == 'T13'

This will give a logical, TRUE/FALSE, instead of 1/0, but I doubt that
a numeric is needed anyway. However, as.numeric() would of course do
such a conversion, in which case the original ifelse might as well be
used.

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Wed, Jan 26, 2022 at 11:39 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> Hi
>
> Actually you did not. Your original question was:
>
> > Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed
> > I used this:
> > var <- ifelse(test$operator == 'T14', 1, 0)
> > operator has several values like T1, T3, T7, T15, T31, T37
> > For some values like T3, T7 it works fine but for majority of values
> > it gives error.
> > When I use: is.na(ts$operator), it shows all false values so no NAs.
>
> Only now we could inspect your whole code and it was already pointed that the
> error does not originate from ifelse.
>
> With the same data and ifelse code I did not get any error.
>
> test <- structure(list(DepthTree = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> <snip>
>
> > str(test)
> 'data.frame':   146 obs. of  15 variables:
>  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
>  <snip>
> $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
>  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 4 4 7 8 8 8 11 4 10 7
> ...
>  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2 2 2 2 4
> 4 2 ...
>  $ numTestsCover: num  16 15 15 16 15 15 15 4 4 16 ...
>  $ mutantAssert : num  55 55 55 55 55 55 55 13 13 55 ...
>  $ classAssert  : num  3 3 3 3 3 3 3 3 3 3 ...
>  $ isKilled     : Factor w/ 2 levels "yes","no": 2 2 2 2 2 2 2 2 2 2 ...
> >
> prot <- ifelse(test$operator == 'T13', 1, 0)
>
> the most probable source of the error is
>
> fc= fairness_check(explainer,
>                           protected = prot,
>                    privileged = privileged)
>
> so you should check explainer and privileged
>
> Cheers
> Petr
>
> From: javed khan <javedbtk111 at gmail.com>
> Sent: Wednesday, January 26, 2022 3:45 PM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Cc: R-help <r-help at r-project.org>
> Subject: Re: [R] Error in if (fraction <= 1) { : missing value where
> TRUE/FALSE needed
>
> Hi Pikal, why would I hide something? I provided just a code where error is.
>
> Full code is:
>
> index= sample(1:nrow(data), 0.7*nrow(data))
> train= data[index,]
> test= data[-index,]
>
>
> task = TaskClassif$new("data", backend = train, target = "isKilled")
>
> learner= lrn("classif.gbm", predict_type = "prob")
>
> model= learner$train(task )
>
> explainer = explain_mlr3(model,
>                          data = test[,-15],
>                          y = as.numeric(test$isKilled)-1,
>                          label="GBM")
>
> prot <- ifelse(test$operator == 'T13', 1, 0)
> privileged <- '1'
>
> fc= fairness_check(explainer,
>                           protected = prot,
>                    privileged = privileged)
> plot(fc)
>
>
> And my data is the following:
>
> str(test)
> 'data.frame': 146 obs. of  15 variables:
>  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
>  $ NumSubclass  : num  0 0 0 0 0 0 0 0 0 0 ...
>  $ McCabe       : num  1 3 3 3 3 3 3 1 1 2 ...
>  $ LOC          : num  3 10 10 10 10 10 10 4 4 5 ...
>  $ DepthNested  : num  1 2 2 2 2 2 2 1 1 2 ...
>  $ CA           : num  1 1 1 1 1 1 1 1 1 1 ...
>  $ CE           : num  2 2 2 2 2 2 2 2 2 2 ...
>  $ Instability  : num  0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667
> 0.667 ...
>  $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
>  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 4 4 7 8 8 8 11 4 10 7
> ...
>  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2 2 2 2 4
> 4 2 ...
>  $ numTestsCover: num  16 15 15 16 15 15 15 4 4 16 ...
>  $ mutantAssert : num  55 55 55 55 55 55 55 13 13 55 ...
>  $ classAssert  : num  3 3 3 3 3 3 3 3 3 3 ...
>  $ isKilled     : Factor w/ 2 levels "yes","no": 2 2 2 2 2 2 2 2 2 2 ...
> > dput(test)
> structure(list(DepthTree = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> 1, 1, 2, 2, 1, 2, 1, 1, 1), NumSubclass = c(0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2), McCabe = c(1, 3, 3,
> 3, 3, 3, 3, 1, 1, 2, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 1, 1, 1, 2,
> 2, 2, 1, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 3, 3,
> 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 5, 5, 5, 5, 5, 5, 5, 5, 2, 2, 2,
> 2, 5, 5, 5, 5, 5, 5, 1, 5, 5, 5, 5, 5, 5, 5, 5, 5, 2, 3, 3, 3,
> 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> 2, 2, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 4, 1, 1, 1, 1, 2, 2,
> 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1), LOC = c(3,
> 10, 10, 10, 10, 10, 10, 4, 4, 5, 22, 22, 22, 22, 22, 22, 22,
> 22, 3, 3, 3, 3, 3, 8, 8, 8, 4, 23, 23, 23, 23, 23, 23, 23, 23,
> 23, 23, 16, 16, 16, 16, 16, 16, 8, 8, 8, 8, 8, 8, 16, 16, 16,
> 16, 16, 16, 20, 20, 20, 20, 20, 20, 20, 20, 7, 7, 7, 7, 18, 18,
> 18, 18, 18, 18, 3, 15, 15, 15, 15, 15, 15, 15, 15, 15, 6, 15,
> 15, 15, 15, 15, 15, 15, 15, 15, 9, 9, 9, 9, 9, 9, 4, 4, 3, 3,
> 3, 3, 3, 4, 4, 6, 6, 5, 5, 5, 8, 8, 8, 3, 3, 3, 3, 3, 3, 7, 3,
> 3, 3, 3, 15, 15, 15, 15, 15, 15, 15, 15, 3, 3, 3, 3, 4, 4, 8,
> 4, 4, 4, 3), DepthNested = c(1, 2, 2, 2, 2, 2, 2, 1, 1, 2, 4,
> 4, 4, 4, 4, 4, 4, 4, 1, 1, 1, 1, 1, 2, 2, 2, 1, 3, 3, 3, 3, 3,
> 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
> 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1,
> 3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2,
> 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1,
> 1, 1, 1, 1, 2, 1, 1, 1, 1), CA = c(1, 1, 1, 1, 1, 1, 1, 1, 1,
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1,
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> 1, 1, 1, 1, 1, 1, 2, 1, 2, 2, 1), CE = c(2, 2, 2, 2, 2, 2, 2,
> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 2,
> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 2, 2, 2, 2, 2, 2, 0, 2, 0, 0, 2), Instability = c(0.667,
> 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.667, 0.667, 0.667, 0.667, 0.667,
> 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> 0.667, 0.667, 0.667, 0.667, 0.667, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0, 0.667, 0, 0,
> 0.667), numCovered = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 150, 54, 54, 123, 54, 54, 123, 54, 189, 189, 189, 138, 33, 18,
> 27, 27, 18, 27, 15, 54, 54, 150, 150, 54, 150, 150, 54, 150,
> 66, 60, 12, 60, 15, 45, 72, 12, 12, 45, 255, 255, 255, 255, 129,
> 129, 0, 0, 6, 6, 6, 6, 303, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 15, 21, 12, 12, 12, 12, 12, 12, 12, 12,
> 48, 1557, 9, 12, 0, 0, 141, 0, 21, 21, 21), operator = structure(c(4L,
> 4L, 7L, 8L, 8L, 8L, 11L, 4L, 10L, 7L, 4L, 7L, 8L, 8L, 8L, 9L,
> 9L, 11L, 7L, 8L, 2L, 8L, 8L, 7L, 8L, 10L, 11L, 1L, 2L, 2L, 4L,
> 8L, 8L, 8L, 8L, 10L, 12L, 4L, 6L, 6L, 8L, 8L, 8L, 7L, 7L, 8L,
> 8L, 9L, 9L, 1L, 4L, 6L, 8L, 8L, 8L, 1L, 1L, 7L, 7L, 7L, 8L, 8L,
> 13L, 7L, 8L, 9L, 9L, 1L, 1L, 2L, 7L, 8L, 10L, 10L, 4L, 7L, 7L,
> 7L, 8L, 8L, 8L, 9L, 9L, 10L, 1L, 8L, 8L, 8L, 8L, 10L, 11L, 11L,
> 11L, 6L, 7L, 8L, 9L, 9L, 10L, 6L, 10L, 1L, 4L, 7L, 10L, 6L, 7L,
> 13L, 7L, 13L, 7L, 8L, 9L, 4L, 6L, 9L, 8L, 10L, 8L, 10L, 8L, 10L,
> 9L, 8L, 10L, 13L, 10L, 2L, 7L, 7L, 8L, 8L, 9L, 11L, 11L, 10L,
> 10L, 13L, 13L, 8L, 8L, 9L, 4L, 6L, 10L, 10L), .Label = c("T0",
> "T1", "T2", "T3", "T4", "T5", "T6", "T7", "T8", "T9", "T10",
> "T11", "T12", "T13", "T14", "T15"), class = "factor"), methodReturn =
> structure(c(2L,
> 2L, 2L, 2L, 2L, 2L, 2L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> 2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L,
> 4L, 4L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> 4L, 4L, 4L, 4L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> 2L, 2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> 1L, 1L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 1L, 1L,
> 3L, 3L, 1L, 1L, 3L, 3L, 3L, 3L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 2L, 4L, 4L, 4L,
> 4L, 4L, 4L, 4L, 4L, 4L, 3L, 3L, 2L, 2L, 4L, 4L, 1L, 3L, 1L, 1L,
> 4L), .Label = c("I", "V", "Z", "method", "D", "[D", "[[D", "J",
> "[I", "C", "[J", "[C", "[S", "F", "[F", "[B", "S", "B", "[Z",
> "[[S", "[[B", "[[Z"), class = "factor"), numTestsCover = c(16,
> 15, 15, 16, 15, 15, 15, 4, 4, 16, 16, 16, 15, 15, 15, 16, 16,
> 15, 3, 3, 2, 2, 2, 16, 11, 16, 4, 16, 16, 3, 16, 16, 4, 16, 16,
> 16, 16, 2, 3, 2, 1, 4, 1, 16, 15, 16, 15, 16, 16, 2, 2, 2, 3,
> 2, 2, 4, 5, 5, 4, 5, 5, 4, 5, 4, 4, 4, 4, 4, 3, 4, 4, 3, 4, 4,
> 5, 5, 4, 4, 5, 4, 4, 5, 4, 4, 4, 3, 4, 4, 4, 4, 3, 3, 4, 4, 4,
> 4, 4, 6, 6, 0, 0, 2, 2, 2, 2, 7, 17, 17, 15, 15, 15, 15, 15,
> 16, 16, 16, 16, 15, 16, 16, 15, 17, 17, 16, 16, 5, 4, 4, 4, 4,
> 4, 4, 4, 4, 4, 16, 16, 3, 4, 0, 0, 5, 0, 4, 4, 1), mutantAssert = c(55,
> 55, 55, 55, 55, 55, 55, 13, 13, 55, 55, 55, 55, 55, 55, 55, 55,
> 55, 9, 9, 9, 9, 9, 55, 41, 55, 13, 55, 55, 5, 55, 55, 13, 55,
> 55, 55, 55, 8, 13, 8, 4, 13, 4, 55, 55, 55, 55, 55, 55, 9, 9,
> 9, 9, 9, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 6, 9, 9, 6,
> 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 6, 9, 9, 9, 9, 6, 6, 9,
> 9, 9, 9, 9, 14, 14, 0, 0, 2, 2, 2, 2, 15, 58, 58, 55, 55, 55,
> 55, 55, 58, 58, 58, 55, 55, 55, 55, 55, 58, 58, 58, 58, 9, 9,
> 6, 6, 6, 6, 6, 6, 6, 6, 55, 55, 5, 13, 0, 0, 11, 0, 9, 9, 8),
>     classAssert = c(3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
>     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
>     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
>     3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>     0, 0, 0, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,
>     10, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
>     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 0, 0, 0, 0, 1, 1, 3, 0,
>     3, 3, 0), isKilled = structure(c(2L, 2L, 2L, 2L, 2L, 2L,
>     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>     2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L,
>     1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L,
>     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 1L,
>     1L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L,
>     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L,
>     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L,
>     1L, 2L, 1L, 1L, 1L), .Label = c("yes", "no"), class = "factor")),
> row.names = c(3L,
> 9L, 12L, 13L, 14L, 15L, 19L, 21L, 22L, 24L, 28L, 29L, 39L, 44L,
> 46L, 51L, 52L, 57L, 62L, 63L, 68L, 71L, 73L, 75L, 77L, 80L, 83L,
> 84L, 85L, 86L, 90L, 95L, 100L, 102L, 103L, 108L, 112L, 120L,
> 122L, 123L, 142L, 143L, 146L, 158L, 159L, 160L, 163L, 167L, 168L,
> 170L, 174L, 176L, 183L, 186L, 192L, 196L, 199L, 203L, 205L, 206L,
> 208L, 214L, 221L, 226L, 229L, 233L, 234L, 235L, 236L, 237L, 238L,
> 249L, 252L, 255L, 260L, 267L, 270L, 271L, 273L, 275L, 276L, 277L,
> 278L, 286L, 288L, 293L, 295L, 297L, 298L, 300L, 301L, 302L, 306L,
> 312L, 313L, 316L, 317L, 331L, 333L, 338L, 341L, 342L, 344L, 346L,
> 348L, 359L, 370L, 375L, 378L, 381L, 382L, 383L, 386L, 389L, 390L,
> 394L, 397L, 400L, 402L, 403L, 404L, 408L, 415L, 418L, 419L, 423L,
> 425L, 426L, 429L, 431L, 432L, 433L, 444L, 446L, 447L, 448L, 449L,
> 451L, 452L, 457L, 458L, 470L, 474L, 476L, 479L, 484L), class = "data.frame")
>
>
>
>
> On Wed, Jan 26, 2022 at 3:29 PM PIKAL Petr <mailto:petr.pikal at precheza.cz>
> wrote:
> Hi
>
> It seems that you are hiding what you really do.
>
> This
> > options(error = NULL)
> works fine without any error. So please If you want some reasonable answer
> post question with data and code which is causing the error.
>
> My wild guess is that you have some objects in your environment and you do
> not know that they are used in you commands. Try to start fresh R session
> and try to inspect your environment with
>
> ls()
>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: R-help <mailto:r-help-bounces at r-project.org> On Behalf Of javed khan
> > Sent: Wednesday, January 26, 2022 3:05 PM
> > To: Ivan Krylov <mailto:krylov.r00t at gmail.com>
> > Cc: R-help <mailto:r-help at r-project.org>
> > Subject: Re: [R] Error in if (fraction <= 1) { : missing value where
> TRUE/FALSE
> > needed
> >
> > Ivan, thanks
> >
> > When I use options(error = NULL)
> >
> > it says: Error during wrapup: missing value where TRUE/FALSE needed
> > Error: no more error handlers available (recursive errors?); invoking
> 'abort'
> > restart
> >
> > With traceback(), I get
> >
> > 4: readable_number(max_value - min_value, FALSE)
> > 3: get_nice_ticks(lower_bound, upper_bound)
> >
> > On Wed, Jan 26, 2022 at 2:53 PM Ivan Krylov <mailto:krylov.r00t at gmail.com>
> > wrote:
> >
> > > On Wed, 26 Jan 2022 14:47:16 +0100
> > > javed khan <mailto:javedbtk111 at gmail.com> wrote:
> > >
> > > > Error in if (fraction <= 1) { : missing value where TRUE/FALSE
> > > > needed
> > >
> > > > var <- ifelse(test$operator == 'T14', 1, 0)
> > >
> > > The error must be in a place different from your test$operator
> > > comparison. Have you tried traceback() to get the call stack leading
> > > to the error? Or options(error = recover) to land in a debugger
> > > session the moment an uncaught error happens? (Use options(error =
> > > NULL) to go back to the default behaviour.)
> > >
> > > Unrelated: var <- test$operator == 'T14' will also give you an
> > > equivalent logical vector with a bit less work.
> > >
> > > --
> > > Best regards,
> > > Ivan
> > >
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > mailto:R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Thu Jan 27 17:12:53 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Thu, 27 Jan 2022 16:12:53 +0000
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <CAGxFJbRbyDqqMNq=+7a7_90Kd89+TWp_Br2Ra=uTZOPivTxDQw@mail.gmail.com>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
 <20220126165313.26db0d5b@Tarkus>
 <CAJhui+s9=zb+MwPF2A=tiJZBdYbvhQaeoG+gbVnW4hPTuem=6Q@mail.gmail.com>
 <0192053a80d24bd4857bb4353f9a7009@SRVEXCHCM1301.precheza.cz>
 <CAJhui+v-G+O+3fir67PqVz8m7q592KjOqaBo5J8QvtsJtrLBSA@mail.gmail.com>
 <992be822fbfd4d759dc1501dfd35018c@SRVEXCHCM1301.precheza.cz>
 <CAGxFJbRbyDqqMNq=+7a7_90Kd89+TWp_Br2Ra=uTZOPivTxDQw@mail.gmail.com>
Message-ID: <BN6PR2201MB155320F2B9CAD66DC5ED486CCF219@BN6PR2201MB1553.namprd22.prod.outlook.com>

One could use the microbenchmark package to compare which approach is faster, assuming the dataset is large enough that the outcome will make a measurable difference. 

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Bert Gunter
Sent: Thursday, January 27, 2022 10:44 AM
To: PIKAL Petr <petr.pikal at precheza.cz>
Cc: R-help <r-help at r-project.org>
Subject: Re: [R] Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed

[External Email]

This will not help solve the issue, but perhaps it is worth pointing out that the idiom, prot <- ifelse(test$operator == 'T13', 1, 0) is perhaps more simply coded as prot <- test$operator == 'T13'

This will give a logical, TRUE/FALSE, instead of 1/0, but I doubt that a numeric is needed anyway. However, as.numeric() would of course do such a conversion, in which case the original ifelse might as well be used.

Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Wed, Jan 26, 2022 at 11:39 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> Hi
>
> Actually you did not. Your original question was:
>
> > Error in if (fraction <= 1) { : missing value where TRUE/FALSE 
> > needed I used this:
> > var <- ifelse(test$operator == 'T14', 1, 0) operator has several 
> > values like T1, T3, T7, T15, T31, T37 For some values like T3, T7 it 
> > works fine but for majority of values it gives error.
> > When I use: is.na(ts$operator), it shows all false values so no NAs.
>
> Only now we could inspect your whole code and it was already pointed 
> that the error does not originate from ifelse.
>
> With the same data and ifelse code I did not get any error.
>
> test <- structure(list(DepthTree = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, <snip>
>
> > str(test)
> 'data.frame':   146 obs. of  15 variables:
>  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
>  <snip>
> $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
>  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 4 4 7 8 8 8 11 4 10 7
> ...
>  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2 
> 2 2 2 4
> 4 2 ...
>  $ numTestsCover: num  16 15 15 16 15 15 15 4 4 16 ...
>  $ mutantAssert : num  55 55 55 55 55 55 55 13 13 55 ...
>  $ classAssert  : num  3 3 3 3 3 3 3 3 3 3 ...
>  $ isKilled     : Factor w/ 2 levels "yes","no": 2 2 2 2 2 2 2 2 2 2 ...
> >
> prot <- ifelse(test$operator == 'T13', 1, 0)
>
> the most probable source of the error is
>
> fc= fairness_check(explainer,
>                           protected = prot,
>                    privileged = privileged)
>
> so you should check explainer and privileged
>
> Cheers
> Petr
>
> From: javed khan <javedbtk111 at gmail.com>
> Sent: Wednesday, January 26, 2022 3:45 PM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Cc: R-help <r-help at r-project.org>
> Subject: Re: [R] Error in if (fraction <= 1) { : missing value where 
> TRUE/FALSE needed
>
> Hi Pikal, why would I hide something? I provided just a code where error is.
>
> Full code is:
>
> index= sample(1:nrow(data), 0.7*nrow(data)) train= data[index,] test= 
> data[-index,]
>
>
> task = TaskClassif$new("data", backend = train, target = "isKilled")
>
> learner= lrn("classif.gbm", predict_type = "prob")
>
> model= learner$train(task )
>
> explainer = explain_mlr3(model,
>                          data = test[,-15],
>                          y = as.numeric(test$isKilled)-1,
>                          label="GBM")
>
> prot <- ifelse(test$operator == 'T13', 1, 0) privileged <- '1'
>
> fc= fairness_check(explainer,
>                           protected = prot,
>                    privileged = privileged)
> plot(fc)
>
>
> And my data is the following:
>
> str(test)
> 'data.frame': 146 obs. of  15 variables:
>  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
>  $ NumSubclass  : num  0 0 0 0 0 0 0 0 0 0 ...
>  $ McCabe       : num  1 3 3 3 3 3 3 1 1 2 ...
>  $ LOC          : num  3 10 10 10 10 10 10 4 4 5 ...
>  $ DepthNested  : num  1 2 2 2 2 2 2 1 1 2 ...
>  $ CA           : num  1 1 1 1 1 1 1 1 1 1 ...
>  $ CE           : num  2 2 2 2 2 2 2 2 2 2 ...
>  $ Instability  : num  0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 
> 0.667
> 0.667 ...
>  $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
>  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 4 4 7 8 8 8 11 4 10 7
> ...
>  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2 
> 2 2 2 4
> 4 2 ...
>  $ numTestsCover: num  16 15 15 16 15 15 15 4 4 16 ...
>  $ mutantAssert : num  55 55 55 55 55 55 55 13 13 55 ...
>  $ classAssert  : num  3 3 3 3 3 3 3 3 3 3 ...
>  $ isKilled     : Factor w/ 2 levels "yes","no": 2 2 2 2 2 2 2 2 2 2 ...
> > dput(test)
> structure(list(DepthTree = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 1, 2, 1, 1, 1), NumSubclass = c(0, 
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> 0, 0, 0, 0, 0, 0, 2), McCabe = c(1, 3, 3, 3, 3, 3, 3, 1, 1, 2, 3, 3, 
> 3, 3, 3, 3, 3, 3, 2, 2, 1, 1, 1, 2, 2, 2, 1, 4, 4, 4, 4, 4, 4, 4, 4, 
> 4, 4, 5, 5, 5, 5, 5, 5, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 5, 5, 5, 
> 5, 5, 5, 5, 5, 2, 2, 2, 2, 5, 5, 5, 5, 5, 5, 1, 5, 5, 5, 5, 5, 5, 5, 
> 5, 5, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 1, 1, 1, 1, 1, 
> 1, 1, 1, 1, 2, 2, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 4, 1, 1, 1, 1, 
> 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1), LOC = c(3, 
> 10, 10, 10, 10, 10, 10, 4, 4, 5, 22, 22, 22, 22, 22, 22, 22, 22, 3, 3, 
> 3, 3, 3, 8, 8, 8, 4, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 16, 16, 
> 16, 16, 16, 16, 8, 8, 8, 8, 8, 8, 16, 16, 16, 16, 16, 16, 20, 20, 20, 
> 20, 20, 20, 20, 20, 7, 7, 7, 7, 18, 18, 18, 18, 18, 18, 3, 15, 15, 15, 
> 15, 15, 15, 15, 15, 15, 6, 15, 15, 15, 15, 15, 15, 15, 15, 15, 9, 9, 
> 9, 9, 9, 9, 4, 4, 3, 3, 3, 3, 3, 4, 4, 6, 6, 5, 5, 5, 8, 8, 8, 3, 3, 
> 3, 3, 3, 3, 7, 3, 3, 3, 3, 15, 15, 15, 15, 15, 15, 15, 15, 3, 3, 3, 3, 
> 4, 4, 8, 4, 4, 4, 3), DepthNested = c(1, 2, 2, 2, 2, 2, 2, 1, 1, 2, 4, 
> 4, 4, 4, 4, 4, 4, 4, 1, 1, 1, 1, 1, 2, 2, 2, 1, 3, 3, 3, 3, 3, 3, 3, 
> 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 
> 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 3, 3, 3, 3, 3, 3, 
> 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 
> 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 
> 1, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1), CA = c(1, 
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 
> 1, 1, 2, 1, 2, 2, 1), CE = c(2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 
> 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 0, 2, 0, 0, 2), Instability = 
> c(0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 
> 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 
> 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 
> 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 
> 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 
> 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.667, 0.667, 
> 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 
> 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0, 0, 0, 0, 0, 0, 0, 
> 0, 0, 0, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0, 0.667, 0, 0, 
> 0.667), numCovered = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 150, 54, 54, 123, 54, 
> 54, 123, 54, 189, 189, 189, 138, 33, 18, 27, 27, 18, 27, 15, 54, 54, 
> 150, 150, 54, 150, 150, 54, 150, 66, 60, 12, 60, 15, 45, 72, 12, 12, 
> 45, 255, 255, 255, 255, 129, 129, 0, 0, 6, 6, 6, 6, 303, 0, 0, 0, 0, 
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 21, 12, 12, 12, 12, 
> 12, 12, 12, 12, 48, 1557, 9, 12, 0, 0, 141, 0, 21, 21, 21), operator = 
> structure(c(4L, 4L, 7L, 8L, 8L, 8L, 11L, 4L, 10L, 7L, 4L, 7L, 8L, 8L, 
> 8L, 9L, 9L, 11L, 7L, 8L, 2L, 8L, 8L, 7L, 8L, 10L, 11L, 1L, 2L, 2L, 4L, 
> 8L, 8L, 8L, 8L, 10L, 12L, 4L, 6L, 6L, 8L, 8L, 8L, 7L, 7L, 8L, 8L, 9L, 
> 9L, 1L, 4L, 6L, 8L, 8L, 8L, 1L, 1L, 7L, 7L, 7L, 8L, 8L, 13L, 7L, 8L, 
> 9L, 9L, 1L, 1L, 2L, 7L, 8L, 10L, 10L, 4L, 7L, 7L, 7L, 8L, 8L, 8L, 9L, 
> 9L, 10L, 1L, 8L, 8L, 8L, 8L, 10L, 11L, 11L, 11L, 6L, 7L, 8L, 9L, 9L, 
> 10L, 6L, 10L, 1L, 4L, 7L, 10L, 6L, 7L, 13L, 7L, 13L, 7L, 8L, 9L, 4L, 
> 6L, 9L, 8L, 10L, 8L, 10L, 8L, 10L, 9L, 8L, 10L, 13L, 10L, 2L, 7L, 7L, 
> 8L, 8L, 9L, 11L, 11L, 10L, 10L, 13L, 13L, 8L, 8L, 9L, 4L, 6L, 10L, 
> 10L), .Label = c("T0", "T1", "T2", "T3", "T4", "T5", "T6", "T7", "T8", 
> "T9", "T10", "T11", "T12", "T13", "T14", "T15"), class = "factor"), 
> methodReturn = structure(c(2L, 2L, 2L, 2L, 2L, 2L, 2L, 4L, 4L, 2L, 2L, 
> 2L, 2L, 2L, 2L, 2L, 2L, 2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
> 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
> 2L, 2L, 2L, 2L, 4L, 4L, 4L, 4L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
> 2L, 2L, 2L, 2L, 2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 1L, 1L, 1L, 
> 1L, 1L, 1L, 1L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 1L, 
> 1L, 3L, 3L, 1L, 1L, 3L, 3L, 3L, 3L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
> 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 2L, 4L, 4L, 4L, 4L, 
> 4L, 4L, 4L, 4L, 4L, 3L, 3L, 2L, 2L, 4L, 4L, 1L, 3L, 1L, 1L, 4L), 
> .Label = c("I", "V", "Z", "method", "D", "[D", "[[D", "J", "[I", "C", 
> "[J", "[C", "[S", "F", "[F", "[B", "S", "B", "[Z", "[[S", "[[B", 
> "[[Z"), class = "factor"), numTestsCover = c(16, 15, 15, 16, 15, 15, 
> 15, 4, 4, 16, 16, 16, 15, 15, 15, 16, 16, 15, 3, 3, 2, 2, 2, 16, 11, 
> 16, 4, 16, 16, 3, 16, 16, 4, 16, 16, 16, 16, 2, 3, 2, 1, 4, 1, 16, 15, 
> 16, 15, 16, 16, 2, 2, 2, 3, 2, 2, 4, 5, 5, 4, 5, 5, 4, 5, 4, 4, 4, 4, 
> 4, 3, 4, 4, 3, 4, 4, 5, 5, 4, 4, 5, 4, 4, 5, 4, 4, 4, 3, 4, 4, 4, 4, 
> 3, 3, 4, 4, 4, 4, 4, 6, 6, 0, 0, 2, 2, 2, 2, 7, 17, 17, 15, 15, 15, 
> 15, 15, 16, 16, 16, 16, 15, 16, 16, 15, 17, 17, 16, 16, 5, 4, 4, 4, 4, 
> 4, 4, 4, 4, 4, 16, 16, 3, 4, 0, 0, 5, 0, 4, 4, 1), mutantAssert = 
> c(55, 55, 55, 55, 55, 55, 55, 13, 13, 55, 55, 55, 55, 55, 55, 55, 55, 
> 55, 9, 9, 9, 9, 9, 55, 41, 55, 13, 55, 55, 5, 55, 55, 13, 55, 55, 55, 
> 55, 8, 13, 8, 4, 13, 4, 55, 55, 55, 55, 55, 55, 9, 9, 9, 9, 9, 8, 9, 
> 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 6, 9, 9, 6, 9, 9, 9, 9, 9, 9, 9, 
> 9, 9, 9, 9, 9, 9, 6, 9, 9, 9, 9, 6, 6, 9, 9, 9, 9, 9, 14, 14, 0, 0, 2, 
> 2, 2, 2, 15, 58, 58, 55, 55, 55, 55, 55, 58, 58, 58, 55, 55, 55, 55, 
> 55, 58, 58, 58, 58, 9, 9, 6, 6, 6, 6, 6, 6, 6, 6, 55, 55, 5, 13, 0, 0, 
> 11, 0, 9, 9, 8),
>     classAssert = c(3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
>     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
>     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
>     3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>     0, 0, 0, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,
>     10, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
>     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 0, 0, 0, 0, 1, 1, 3, 0,
>     3, 3, 0), isKilled = structure(c(2L, 2L, 2L, 2L, 2L, 2L,
>     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>     2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L,
>     1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L,
>     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 1L,
>     1L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L,
>     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L,
>     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L,
>     1L, 2L, 1L, 1L, 1L), .Label = c("yes", "no"), class = "factor")), 
> row.names = c(3L, 9L, 12L, 13L, 14L, 15L, 19L, 21L, 22L, 24L, 28L, 
> 29L, 39L, 44L, 46L, 51L, 52L, 57L, 62L, 63L, 68L, 71L, 73L, 75L, 77L, 
> 80L, 83L, 84L, 85L, 86L, 90L, 95L, 100L, 102L, 103L, 108L, 112L, 120L, 
> 122L, 123L, 142L, 143L, 146L, 158L, 159L, 160L, 163L, 167L, 168L, 
> 170L, 174L, 176L, 183L, 186L, 192L, 196L, 199L, 203L, 205L, 206L, 
> 208L, 214L, 221L, 226L, 229L, 233L, 234L, 235L, 236L, 237L, 238L, 
> 249L, 252L, 255L, 260L, 267L, 270L, 271L, 273L, 275L, 276L, 277L, 
> 278L, 286L, 288L, 293L, 295L, 297L, 298L, 300L, 301L, 302L, 306L, 
> 312L, 313L, 316L, 317L, 331L, 333L, 338L, 341L, 342L, 344L, 346L, 
> 348L, 359L, 370L, 375L, 378L, 381L, 382L, 383L, 386L, 389L, 390L, 
> 394L, 397L, 400L, 402L, 403L, 404L, 408L, 415L, 418L, 419L, 423L, 
> 425L, 426L, 429L, 431L, 432L, 433L, 444L, 446L, 447L, 448L, 449L, 
> 451L, 452L, 457L, 458L, 470L, 474L, 476L, 479L, 484L), class = 
> "data.frame")
>
>
>
>
> On Wed, Jan 26, 2022 at 3:29 PM PIKAL Petr 
> <mailto:petr.pikal at precheza.cz>
> wrote:
> Hi
>
> It seems that you are hiding what you really do.
>
> This
> > options(error = NULL)
> works fine without any error. So please If you want some reasonable 
> answer post question with data and code which is causing the error.
>
> My wild guess is that you have some objects in your environment and 
> you do not know that they are used in you commands. Try to start fresh 
> R session and try to inspect your environment with
>
> ls()
>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: R-help <mailto:r-help-bounces at r-project.org> On Behalf Of 
> > javed khan
> > Sent: Wednesday, January 26, 2022 3:05 PM
> > To: Ivan Krylov <mailto:krylov.r00t at gmail.com>
> > Cc: R-help <mailto:r-help at r-project.org>
> > Subject: Re: [R] Error in if (fraction <= 1) { : missing value where
> TRUE/FALSE
> > needed
> >
> > Ivan, thanks
> >
> > When I use options(error = NULL)
> >
> > it says: Error during wrapup: missing value where TRUE/FALSE needed
> > Error: no more error handlers available (recursive errors?); 
> > invoking
> 'abort'
> > restart
> >
> > With traceback(), I get
> >
> > 4: readable_number(max_value - min_value, FALSE)
> > 3: get_nice_ticks(lower_bound, upper_bound)
> >
> > On Wed, Jan 26, 2022 at 2:53 PM Ivan Krylov 
> > <mailto:krylov.r00t at gmail.com>
> > wrote:
> >
> > > On Wed, 26 Jan 2022 14:47:16 +0100 javed khan 
> > > <mailto:javedbtk111 at gmail.com> wrote:
> > >
> > > > Error in if (fraction <= 1) { : missing value where TRUE/FALSE 
> > > > needed
> > >
> > > > var <- ifelse(test$operator == 'T14', 1, 0)
> > >
> > > The error must be in a place different from your test$operator 
> > > comparison. Have you tried traceback() to get the call stack 
> > > leading to the error? Or options(error = recover) to land in a 
> > > debugger session the moment an uncaught error happens? (Use 
> > > options(error =
> > > NULL) to go back to the default behaviour.)
> > >
> > > Unrelated: var <- test$operator == 'T14' will also give you an 
> > > equivalent logical vector with a bit less work.
> > >
> > > --
> > > Best regards,
> > > Ivan
> > >
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > mailto:R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, 
> > see 
> > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_ma
> > ilman_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2k
> > VeAsRzsn7AkP-g&m=eLthULmcsbsauwFtFwUELWbEcCm6j9dDsFTJTMNM9azTjEAhJ1-
> > qp1QpqM4aMJUU&s=nKOUnbWqTVHBJ8_18UPI_0txX86s35CP6VAqBc-Q6_k&e=
> > PLEASE do read the posting guide
> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.or
> g_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeA
> sRzsn7AkP-g&m=eLthULmcsbsauwFtFwUELWbEcCm6j9dDsFTJTMNM9azTjEAhJ1-qp1Qp
> qM4aMJUU&s=eZti_glRZlkKsUposffe3dMBirNV2J-goX3ARZowxLs&e=
> > and provide commented, minimal, self-contained, reproducible code.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mail
> man_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAs
> Rzsn7AkP-g&m=eLthULmcsbsauwFtFwUELWbEcCm6j9dDsFTJTMNM9azTjEAhJ1-qp1Qpq
> M4aMJUU&s=nKOUnbWqTVHBJ8_18UPI_0txX86s35CP6VAqBc-Q6_k&e=
> PLEASE do read the posting guide 
> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.or
> g_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeA
> sRzsn7AkP-g&m=eLthULmcsbsauwFtFwUELWbEcCm6j9dDsFTJTMNM9azTjEAhJ1-qp1Qp
> qM4aMJUU&s=eZti_glRZlkKsUposffe3dMBirNV2J-goX3ARZowxLs&e=
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=eLthULmcsbsauwFtFwUELWbEcCm6j9dDsFTJTMNM9azTjEAhJ1-qp1QpqM4aMJUU&s=nKOUnbWqTVHBJ8_18UPI_0txX86s35CP6VAqBc-Q6_k&e=
PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=eLthULmcsbsauwFtFwUELWbEcCm6j9dDsFTJTMNM9azTjEAhJ1-qp1QpqM4aMJUU&s=eZti_glRZlkKsUposffe3dMBirNV2J-goX3ARZowxLs&e=
and provide commented, minimal, self-contained, reproducible code.


From j@vedbtk111 @end|ng |rom gm@||@com  Thu Jan 27 19:15:05 2022
From: j@vedbtk111 @end|ng |rom gm@||@com (javed khan)
Date: Thu, 27 Jan 2022 19:15:05 +0100
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <CAGxFJbRbyDqqMNq=+7a7_90Kd89+TWp_Br2Ra=uTZOPivTxDQw@mail.gmail.com>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
 <20220126165313.26db0d5b@Tarkus>
 <CAJhui+s9=zb+MwPF2A=tiJZBdYbvhQaeoG+gbVnW4hPTuem=6Q@mail.gmail.com>
 <0192053a80d24bd4857bb4353f9a7009@SRVEXCHCM1301.precheza.cz>
 <CAJhui+v-G+O+3fir67PqVz8m7q592KjOqaBo5J8QvtsJtrLBSA@mail.gmail.com>
 <992be822fbfd4d759dc1501dfd35018c@SRVEXCHCM1301.precheza.cz>
 <CAGxFJbRbyDqqMNq=+7a7_90Kd89+TWp_Br2Ra=uTZOPivTxDQw@mail.gmail.com>
Message-ID: <CAJhui+s_iCRia-aoHmZPvF8zycnxrx7vqhfZzvRXHqyvQUxjUg@mail.gmail.com>

Thank you Bert Gunter

Do you mean I should do something like this:

prot <- (as.numeric(ifelse(test$operator == 'T13', 1, 0))




On Thu, Jan 27, 2022 at 4:44 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> This will not help solve the issue, but perhaps it is worth pointing
> out that the idiom,
> prot <- ifelse(test$operator == 'T13', 1, 0)
> is perhaps more simply coded as
> prot <- test$operator == 'T13'
>
> This will give a logical, TRUE/FALSE, instead of 1/0, but I doubt that
> a numeric is needed anyway. However, as.numeric() would of course do
> such a conversion, in which case the original ifelse might as well be
> used.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
> On Wed, Jan 26, 2022 at 11:39 PM PIKAL Petr <petr.pikal at precheza.cz>
> wrote:
> >
> > Hi
> >
> > Actually you did not. Your original question was:
> >
> > > Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed
> > > I used this:
> > > var <- ifelse(test$operator == 'T14', 1, 0)
> > > operator has several values like T1, T3, T7, T15, T31, T37
> > > For some values like T3, T7 it works fine but for majority of values
> > > it gives error.
> > > When I use: is.na(ts$operator), it shows all false values so no NAs.
> >
> > Only now we could inspect your whole code and it was already pointed
> that the
> > error does not originate from ifelse.
> >
> > With the same data and ifelse code I did not get any error.
> >
> > test <- structure(list(DepthTree = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > <snip>
> >
> > > str(test)
> > 'data.frame':   146 obs. of  15 variables:
> >  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
> >  <snip>
> > $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
> >  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 4 4 7 8 8 8 11
> 4 10 7
> > ...
> >  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2 2
> 2 2 4
> > 4 2 ...
> >  $ numTestsCover: num  16 15 15 16 15 15 15 4 4 16 ...
> >  $ mutantAssert : num  55 55 55 55 55 55 55 13 13 55 ...
> >  $ classAssert  : num  3 3 3 3 3 3 3 3 3 3 ...
> >  $ isKilled     : Factor w/ 2 levels "yes","no": 2 2 2 2 2 2 2 2 2 2 ...
> > >
> > prot <- ifelse(test$operator == 'T13', 1, 0)
> >
> > the most probable source of the error is
> >
> > fc= fairness_check(explainer,
> >                           protected = prot,
> >                    privileged = privileged)
> >
> > so you should check explainer and privileged
> >
> > Cheers
> > Petr
> >
> > From: javed khan <javedbtk111 at gmail.com>
> > Sent: Wednesday, January 26, 2022 3:45 PM
> > To: PIKAL Petr <petr.pikal at precheza.cz>
> > Cc: R-help <r-help at r-project.org>
> > Subject: Re: [R] Error in if (fraction <= 1) { : missing value where
> > TRUE/FALSE needed
> >
> > Hi Pikal, why would I hide something? I provided just a code where error
> is.
> >
> > Full code is:
> >
> > index= sample(1:nrow(data), 0.7*nrow(data))
> > train= data[index,]
> > test= data[-index,]
> >
> >
> > task = TaskClassif$new("data", backend = train, target = "isKilled")
> >
> > learner= lrn("classif.gbm", predict_type = "prob")
> >
> > model= learner$train(task )
> >
> > explainer = explain_mlr3(model,
> >                          data = test[,-15],
> >                          y = as.numeric(test$isKilled)-1,
> >                          label="GBM")
> >
> > prot <- ifelse(test$operator == 'T13', 1, 0)
> > privileged <- '1'
> >
> > fc= fairness_check(explainer,
> >                           protected = prot,
> >                    privileged = privileged)
> > plot(fc)
> >
> >
> > And my data is the following:
> >
> > str(test)
> > 'data.frame': 146 obs. of  15 variables:
> >  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
> >  $ NumSubclass  : num  0 0 0 0 0 0 0 0 0 0 ...
> >  $ McCabe       : num  1 3 3 3 3 3 3 1 1 2 ...
> >  $ LOC          : num  3 10 10 10 10 10 10 4 4 5 ...
> >  $ DepthNested  : num  1 2 2 2 2 2 2 1 1 2 ...
> >  $ CA           : num  1 1 1 1 1 1 1 1 1 1 ...
> >  $ CE           : num  2 2 2 2 2 2 2 2 2 2 ...
> >  $ Instability  : num  0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667
> 0.667
> > 0.667 ...
> >  $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
> >  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 4 4 7 8 8 8 11
> 4 10 7
> > ...
> >  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2 2
> 2 2 4
> > 4 2 ...
> >  $ numTestsCover: num  16 15 15 16 15 15 15 4 4 16 ...
> >  $ mutantAssert : num  55 55 55 55 55 55 55 13 13 55 ...
> >  $ classAssert  : num  3 3 3 3 3 3 3 3 3 3 ...
> >  $ isKilled     : Factor w/ 2 levels "yes","no": 2 2 2 2 2 2 2 2 2 2 ...
> > > dput(test)
> > structure(list(DepthTree = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 2, 2, 1, 2, 1, 1, 1), NumSubclass = c(0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2), McCabe = c(1, 3, 3,
> > 3, 3, 3, 3, 1, 1, 2, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 1, 1, 1, 2,
> > 2, 2, 1, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 3, 3,
> > 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 5, 5, 5, 5, 5, 5, 5, 5, 2, 2, 2,
> > 2, 5, 5, 5, 5, 5, 5, 1, 5, 5, 5, 5, 5, 5, 5, 5, 5, 2, 3, 3, 3,
> > 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 2, 2, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 4, 1, 1, 1, 1, 2, 2,
> > 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1), LOC = c(3,
> > 10, 10, 10, 10, 10, 10, 4, 4, 5, 22, 22, 22, 22, 22, 22, 22,
> > 22, 3, 3, 3, 3, 3, 8, 8, 8, 4, 23, 23, 23, 23, 23, 23, 23, 23,
> > 23, 23, 16, 16, 16, 16, 16, 16, 8, 8, 8, 8, 8, 8, 16, 16, 16,
> > 16, 16, 16, 20, 20, 20, 20, 20, 20, 20, 20, 7, 7, 7, 7, 18, 18,
> > 18, 18, 18, 18, 3, 15, 15, 15, 15, 15, 15, 15, 15, 15, 6, 15,
> > 15, 15, 15, 15, 15, 15, 15, 15, 9, 9, 9, 9, 9, 9, 4, 4, 3, 3,
> > 3, 3, 3, 4, 4, 6, 6, 5, 5, 5, 8, 8, 8, 3, 3, 3, 3, 3, 3, 7, 3,
> > 3, 3, 3, 15, 15, 15, 15, 15, 15, 15, 15, 3, 3, 3, 3, 4, 4, 8,
> > 4, 4, 4, 3), DepthNested = c(1, 2, 2, 2, 2, 2, 2, 1, 1, 2, 4,
> > 4, 4, 4, 4, 4, 4, 4, 1, 1, 1, 1, 1, 2, 2, 2, 1, 3, 3, 3, 3, 3,
> > 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
> > 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1,
> > 3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> > 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2,
> > 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1,
> > 1, 1, 1, 1, 2, 1, 1, 1, 1), CA = c(1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> > 1, 1, 1, 1, 1, 1, 2, 1, 2, 2, 1), CE = c(2, 2, 2, 2, 2, 2, 2,
> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> > 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 2,
> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 2, 2, 2, 2, 2, 2, 0, 2, 0, 0, 2), Instability = c(0.667,
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.667, 0.667, 0.667, 0.667, 0.667,
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0, 0.667, 0, 0,
> > 0.667), numCovered = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 150, 54, 54, 123, 54, 54, 123, 54, 189, 189, 189, 138, 33, 18,
> > 27, 27, 18, 27, 15, 54, 54, 150, 150, 54, 150, 150, 54, 150,
> > 66, 60, 12, 60, 15, 45, 72, 12, 12, 45, 255, 255, 255, 255, 129,
> > 129, 0, 0, 6, 6, 6, 6, 303, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 15, 21, 12, 12, 12, 12, 12, 12, 12, 12,
> > 48, 1557, 9, 12, 0, 0, 141, 0, 21, 21, 21), operator = structure(c(4L,
> > 4L, 7L, 8L, 8L, 8L, 11L, 4L, 10L, 7L, 4L, 7L, 8L, 8L, 8L, 9L,
> > 9L, 11L, 7L, 8L, 2L, 8L, 8L, 7L, 8L, 10L, 11L, 1L, 2L, 2L, 4L,
> > 8L, 8L, 8L, 8L, 10L, 12L, 4L, 6L, 6L, 8L, 8L, 8L, 7L, 7L, 8L,
> > 8L, 9L, 9L, 1L, 4L, 6L, 8L, 8L, 8L, 1L, 1L, 7L, 7L, 7L, 8L, 8L,
> > 13L, 7L, 8L, 9L, 9L, 1L, 1L, 2L, 7L, 8L, 10L, 10L, 4L, 7L, 7L,
> > 7L, 8L, 8L, 8L, 9L, 9L, 10L, 1L, 8L, 8L, 8L, 8L, 10L, 11L, 11L,
> > 11L, 6L, 7L, 8L, 9L, 9L, 10L, 6L, 10L, 1L, 4L, 7L, 10L, 6L, 7L,
> > 13L, 7L, 13L, 7L, 8L, 9L, 4L, 6L, 9L, 8L, 10L, 8L, 10L, 8L, 10L,
> > 9L, 8L, 10L, 13L, 10L, 2L, 7L, 7L, 8L, 8L, 9L, 11L, 11L, 10L,
> > 10L, 13L, 13L, 8L, 8L, 9L, 4L, 6L, 10L, 10L), .Label = c("T0",
> > "T1", "T2", "T3", "T4", "T5", "T6", "T7", "T8", "T9", "T10",
> > "T11", "T12", "T13", "T14", "T15"), class = "factor"), methodReturn =
> > structure(c(2L,
> > 2L, 2L, 2L, 2L, 2L, 2L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> > 2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L,
> > 4L, 4L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> > 4L, 4L, 4L, 4L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> > 2L, 2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> > 1L, 1L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 1L, 1L,
> > 3L, 3L, 1L, 1L, 3L, 3L, 3L, 3L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> > 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 2L, 4L, 4L, 4L,
> > 4L, 4L, 4L, 4L, 4L, 4L, 3L, 3L, 2L, 2L, 4L, 4L, 1L, 3L, 1L, 1L,
> > 4L), .Label = c("I", "V", "Z", "method", "D", "[D", "[[D", "J",
> > "[I", "C", "[J", "[C", "[S", "F", "[F", "[B", "S", "B", "[Z",
> > "[[S", "[[B", "[[Z"), class = "factor"), numTestsCover = c(16,
> > 15, 15, 16, 15, 15, 15, 4, 4, 16, 16, 16, 15, 15, 15, 16, 16,
> > 15, 3, 3, 2, 2, 2, 16, 11, 16, 4, 16, 16, 3, 16, 16, 4, 16, 16,
> > 16, 16, 2, 3, 2, 1, 4, 1, 16, 15, 16, 15, 16, 16, 2, 2, 2, 3,
> > 2, 2, 4, 5, 5, 4, 5, 5, 4, 5, 4, 4, 4, 4, 4, 3, 4, 4, 3, 4, 4,
> > 5, 5, 4, 4, 5, 4, 4, 5, 4, 4, 4, 3, 4, 4, 4, 4, 3, 3, 4, 4, 4,
> > 4, 4, 6, 6, 0, 0, 2, 2, 2, 2, 7, 17, 17, 15, 15, 15, 15, 15,
> > 16, 16, 16, 16, 15, 16, 16, 15, 17, 17, 16, 16, 5, 4, 4, 4, 4,
> > 4, 4, 4, 4, 4, 16, 16, 3, 4, 0, 0, 5, 0, 4, 4, 1), mutantAssert = c(55,
> > 55, 55, 55, 55, 55, 55, 13, 13, 55, 55, 55, 55, 55, 55, 55, 55,
> > 55, 9, 9, 9, 9, 9, 55, 41, 55, 13, 55, 55, 5, 55, 55, 13, 55,
> > 55, 55, 55, 8, 13, 8, 4, 13, 4, 55, 55, 55, 55, 55, 55, 9, 9,
> > 9, 9, 9, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 6, 9, 9, 6,
> > 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 6, 9, 9, 9, 9, 6, 6, 9,
> > 9, 9, 9, 9, 14, 14, 0, 0, 2, 2, 2, 2, 15, 58, 58, 55, 55, 55,
> > 55, 55, 58, 58, 58, 55, 55, 55, 55, 55, 58, 58, 58, 58, 9, 9,
> > 6, 6, 6, 6, 6, 6, 6, 6, 55, 55, 5, 13, 0, 0, 11, 0, 9, 9, 8),
> >     classAssert = c(3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
> >     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
> >     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
> >     3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >     0, 0, 0, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,
> >     10, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
> >     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 0, 0, 0, 0, 1, 1, 3, 0,
> >     3, 3, 0), isKilled = structure(c(2L, 2L, 2L, 2L, 2L, 2L,
> >     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> >     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> >     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> >     2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L,
> >     1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L,
> >     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 1L,
> >     1L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L,
> >     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L,
> >     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L,
> >     1L, 2L, 1L, 1L, 1L), .Label = c("yes", "no"), class = "factor")),
> > row.names = c(3L,
> > 9L, 12L, 13L, 14L, 15L, 19L, 21L, 22L, 24L, 28L, 29L, 39L, 44L,
> > 46L, 51L, 52L, 57L, 62L, 63L, 68L, 71L, 73L, 75L, 77L, 80L, 83L,
> > 84L, 85L, 86L, 90L, 95L, 100L, 102L, 103L, 108L, 112L, 120L,
> > 122L, 123L, 142L, 143L, 146L, 158L, 159L, 160L, 163L, 167L, 168L,
> > 170L, 174L, 176L, 183L, 186L, 192L, 196L, 199L, 203L, 205L, 206L,
> > 208L, 214L, 221L, 226L, 229L, 233L, 234L, 235L, 236L, 237L, 238L,
> > 249L, 252L, 255L, 260L, 267L, 270L, 271L, 273L, 275L, 276L, 277L,
> > 278L, 286L, 288L, 293L, 295L, 297L, 298L, 300L, 301L, 302L, 306L,
> > 312L, 313L, 316L, 317L, 331L, 333L, 338L, 341L, 342L, 344L, 346L,
> > 348L, 359L, 370L, 375L, 378L, 381L, 382L, 383L, 386L, 389L, 390L,
> > 394L, 397L, 400L, 402L, 403L, 404L, 408L, 415L, 418L, 419L, 423L,
> > 425L, 426L, 429L, 431L, 432L, 433L, 444L, 446L, 447L, 448L, 449L,
> > 451L, 452L, 457L, 458L, 470L, 474L, 476L, 479L, 484L), class =
> "data.frame")
> >
> >
> >
> >
> > On Wed, Jan 26, 2022 at 3:29 PM PIKAL Petr <mailto:
> petr.pikal at precheza.cz>
> > wrote:
> > Hi
> >
> > It seems that you are hiding what you really do.
> >
> > This
> > > options(error = NULL)
> > works fine without any error. So please If you want some reasonable
> answer
> > post question with data and code which is causing the error.
> >
> > My wild guess is that you have some objects in your environment and you
> do
> > not know that they are used in you commands. Try to start fresh R session
> > and try to inspect your environment with
> >
> > ls()
> >
> > Cheers
> > Petr
> >
> > > -----Original Message-----
> > > From: R-help <mailto:r-help-bounces at r-project.org> On Behalf Of javed
> khan
> > > Sent: Wednesday, January 26, 2022 3:05 PM
> > > To: Ivan Krylov <mailto:krylov.r00t at gmail.com>
> > > Cc: R-help <mailto:r-help at r-project.org>
> > > Subject: Re: [R] Error in if (fraction <= 1) { : missing value where
> > TRUE/FALSE
> > > needed
> > >
> > > Ivan, thanks
> > >
> > > When I use options(error = NULL)
> > >
> > > it says: Error during wrapup: missing value where TRUE/FALSE needed
> > > Error: no more error handlers available (recursive errors?); invoking
> > 'abort'
> > > restart
> > >
> > > With traceback(), I get
> > >
> > > 4: readable_number(max_value - min_value, FALSE)
> > > 3: get_nice_ticks(lower_bound, upper_bound)
> > >
> > > On Wed, Jan 26, 2022 at 2:53 PM Ivan Krylov <mailto:
> krylov.r00t at gmail.com>
> > > wrote:
> > >
> > > > On Wed, 26 Jan 2022 14:47:16 +0100
> > > > javed khan <mailto:javedbtk111 at gmail.com> wrote:
> > > >
> > > > > Error in if (fraction <= 1) { : missing value where TRUE/FALSE
> > > > > needed
> > > >
> > > > > var <- ifelse(test$operator == 'T14', 1, 0)
> > > >
> > > > The error must be in a place different from your test$operator
> > > > comparison. Have you tried traceback() to get the call stack leading
> > > > to the error? Or options(error = recover) to land in a debugger
> > > > session the moment an uncaught error happens? (Use options(error =
> > > > NULL) to go back to the default behaviour.)
> > > >
> > > > Unrelated: var <- test$operator == 'T14' will also give you an
> > > > equivalent logical vector with a bit less work.
> > > >
> > > > --
> > > > Best regards,
> > > > Ivan
> > > >
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > mailto:R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Thu Jan 27 19:16:57 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 27 Jan 2022 10:16:57 -0800
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <BN6PR2201MB155320F2B9CAD66DC5ED486CCF219@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
 <20220126165313.26db0d5b@Tarkus>
 <CAJhui+s9=zb+MwPF2A=tiJZBdYbvhQaeoG+gbVnW4hPTuem=6Q@mail.gmail.com>
 <0192053a80d24bd4857bb4353f9a7009@SRVEXCHCM1301.precheza.cz>
 <CAJhui+v-G+O+3fir67PqVz8m7q592KjOqaBo5J8QvtsJtrLBSA@mail.gmail.com>
 <992be822fbfd4d759dc1501dfd35018c@SRVEXCHCM1301.precheza.cz>
 <CAGxFJbRbyDqqMNq=+7a7_90Kd89+TWp_Br2Ra=uTZOPivTxDQw@mail.gmail.com>
 <BN6PR2201MB155320F2B9CAD66DC5ED486CCF219@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <CAGxFJbTRqzUSypm-uH-8AuMmn69wkef=dQyJNq5nLmBXran2Hw@mail.gmail.com>

I did not claim it is faster -- and in fact I doubt that it makes any
real difference. Just simpler, imo. I also think that the logical
vector would serve equally in any situation in most cases where
arithmetic 0/1 coding is used -- even arithmetic ops and comparisons:
> TRUE + 2
[1] 3
> TRUE > .5
[1] TRUE
(?'+' has details)
I would appreciate someone responding with a nontrivial counterexample
to this claim if they have one, other than the sort of thing shown in
the ?logical example involving conversion to character:

## logical interpretation of particular strings
charvec <- c("FALSE", "F", "False", "false",    "fAlse", "0",
             "TRUE",  "T", "True",  "true",     "tRue",  "1")
as.logical(charvec)

## factors are converted via their levels, so string conversion is used
as.logical(factor(charvec))
as.logical(factor(c(0,1)))  # "0" and "1" give NA

(I mean of course purely internal R code, not export of data to an
external application).


Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
On Thu, Jan 27, 2022 at 8:12 AM Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
>
> One could use the microbenchmark package to compare which approach is faster, assuming the dataset is large enough that the outcome will make a measurable difference.
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Bert Gunter
> Sent: Thursday, January 27, 2022 10:44 AM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Cc: R-help <r-help at r-project.org>
> Subject: Re: [R] Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed
>
> [External Email]
>
> This will not help solve the issue, but perhaps it is worth pointing out that the idiom, prot <- ifelse(test$operator == 'T13', 1, 0) is perhaps more simply coded as prot <- test$operator == 'T13'
>
> This will give a logical, TRUE/FALSE, instead of 1/0, but I doubt that a numeric is needed anyway. However, as.numeric() would of course do such a conversion, in which case the original ifelse might as well be used.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
> On Wed, Jan 26, 2022 at 11:39 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
> >
> > Hi
> >
> > Actually you did not. Your original question was:
> >
> > > Error in if (fraction <= 1) { : missing value where TRUE/FALSE
> > > needed I used this:
> > > var <- ifelse(test$operator == 'T14', 1, 0) operator has several
> > > values like T1, T3, T7, T15, T31, T37 For some values like T3, T7 it
> > > works fine but for majority of values it gives error.
> > > When I use: is.na(ts$operator), it shows all false values so no NAs.
> >
> > Only now we could inspect your whole code and it was already pointed
> > that the error does not originate from ifelse.
> >
> > With the same data and ifelse code I did not get any error.
> >
> > test <- structure(list(DepthTree = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, <snip>
> >
> > > str(test)
> > 'data.frame':   146 obs. of  15 variables:
> >  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
> >  <snip>
> > $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
> >  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 4 4 7 8 8 8 11 4 10 7
> > ...
> >  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2
> > 2 2 2 4
> > 4 2 ...
> >  $ numTestsCover: num  16 15 15 16 15 15 15 4 4 16 ...
> >  $ mutantAssert : num  55 55 55 55 55 55 55 13 13 55 ...
> >  $ classAssert  : num  3 3 3 3 3 3 3 3 3 3 ...
> >  $ isKilled     : Factor w/ 2 levels "yes","no": 2 2 2 2 2 2 2 2 2 2 ...
> > >
> > prot <- ifelse(test$operator == 'T13', 1, 0)
> >
> > the most probable source of the error is
> >
> > fc= fairness_check(explainer,
> >                           protected = prot,
> >                    privileged = privileged)
> >
> > so you should check explainer and privileged
> >
> > Cheers
> > Petr
> >
> > From: javed khan <javedbtk111 at gmail.com>
> > Sent: Wednesday, January 26, 2022 3:45 PM
> > To: PIKAL Petr <petr.pikal at precheza.cz>
> > Cc: R-help <r-help at r-project.org>
> > Subject: Re: [R] Error in if (fraction <= 1) { : missing value where
> > TRUE/FALSE needed
> >
> > Hi Pikal, why would I hide something? I provided just a code where error is.
> >
> > Full code is:
> >
> > index= sample(1:nrow(data), 0.7*nrow(data)) train= data[index,] test=
> > data[-index,]
> >
> >
> > task = TaskClassif$new("data", backend = train, target = "isKilled")
> >
> > learner= lrn("classif.gbm", predict_type = "prob")
> >
> > model= learner$train(task )
> >
> > explainer = explain_mlr3(model,
> >                          data = test[,-15],
> >                          y = as.numeric(test$isKilled)-1,
> >                          label="GBM")
> >
> > prot <- ifelse(test$operator == 'T13', 1, 0) privileged <- '1'
> >
> > fc= fairness_check(explainer,
> >                           protected = prot,
> >                    privileged = privileged)
> > plot(fc)
> >
> >
> > And my data is the following:
> >
> > str(test)
> > 'data.frame': 146 obs. of  15 variables:
> >  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
> >  $ NumSubclass  : num  0 0 0 0 0 0 0 0 0 0 ...
> >  $ McCabe       : num  1 3 3 3 3 3 3 1 1 2 ...
> >  $ LOC          : num  3 10 10 10 10 10 10 4 4 5 ...
> >  $ DepthNested  : num  1 2 2 2 2 2 2 1 1 2 ...
> >  $ CA           : num  1 1 1 1 1 1 1 1 1 1 ...
> >  $ CE           : num  2 2 2 2 2 2 2 2 2 2 ...
> >  $ Instability  : num  0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667
> > 0.667
> > 0.667 ...
> >  $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
> >  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 4 4 7 8 8 8 11 4 10 7
> > ...
> >  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2
> > 2 2 2 4
> > 4 2 ...
> >  $ numTestsCover: num  16 15 15 16 15 15 15 4 4 16 ...
> >  $ mutantAssert : num  55 55 55 55 55 55 55 13 13 55 ...
> >  $ classAssert  : num  3 3 3 3 3 3 3 3 3 3 ...
> >  $ isKilled     : Factor w/ 2 levels "yes","no": 2 2 2 2 2 2 2 2 2 2 ...
> > > dput(test)
> > structure(list(DepthTree = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 1, 2, 1, 1, 1), NumSubclass = c(0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 2), McCabe = c(1, 3, 3, 3, 3, 3, 3, 1, 1, 2, 3, 3,
> > 3, 3, 3, 3, 3, 3, 2, 2, 1, 1, 1, 2, 2, 2, 1, 4, 4, 4, 4, 4, 4, 4, 4,
> > 4, 4, 5, 5, 5, 5, 5, 5, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 5, 5, 5,
> > 5, 5, 5, 5, 5, 2, 2, 2, 2, 5, 5, 5, 5, 5, 5, 1, 5, 5, 5, 5, 5, 5, 5,
> > 5, 5, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 2, 2, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 4, 1, 1, 1, 1,
> > 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1), LOC = c(3,
> > 10, 10, 10, 10, 10, 10, 4, 4, 5, 22, 22, 22, 22, 22, 22, 22, 22, 3, 3,
> > 3, 3, 3, 8, 8, 8, 4, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 16, 16,
> > 16, 16, 16, 16, 8, 8, 8, 8, 8, 8, 16, 16, 16, 16, 16, 16, 20, 20, 20,
> > 20, 20, 20, 20, 20, 7, 7, 7, 7, 18, 18, 18, 18, 18, 18, 3, 15, 15, 15,
> > 15, 15, 15, 15, 15, 15, 6, 15, 15, 15, 15, 15, 15, 15, 15, 15, 9, 9,
> > 9, 9, 9, 9, 4, 4, 3, 3, 3, 3, 3, 4, 4, 6, 6, 5, 5, 5, 8, 8, 8, 3, 3,
> > 3, 3, 3, 3, 7, 3, 3, 3, 3, 15, 15, 15, 15, 15, 15, 15, 15, 3, 3, 3, 3,
> > 4, 4, 8, 4, 4, 4, 3), DepthNested = c(1, 2, 2, 2, 2, 2, 2, 1, 1, 2, 4,
> > 4, 4, 4, 4, 4, 4, 4, 1, 1, 1, 1, 1, 2, 2, 2, 1, 3, 3, 3, 3, 3, 3, 3,
> > 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
> > 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 3, 3, 3, 3, 3, 3,
> > 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1,
> > 1, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1), CA = c(1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1,
> > 1, 1, 2, 1, 2, 2, 1), CE = c(2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 0, 2, 0, 0, 2), Instability =
> > c(0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.667, 0.667,
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0, 0.667, 0, 0,
> > 0.667), numCovered = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 150, 54, 54, 123, 54,
> > 54, 123, 54, 189, 189, 189, 138, 33, 18, 27, 27, 18, 27, 15, 54, 54,
> > 150, 150, 54, 150, 150, 54, 150, 66, 60, 12, 60, 15, 45, 72, 12, 12,
> > 45, 255, 255, 255, 255, 129, 129, 0, 0, 6, 6, 6, 6, 303, 0, 0, 0, 0,
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 21, 12, 12, 12, 12,
> > 12, 12, 12, 12, 48, 1557, 9, 12, 0, 0, 141, 0, 21, 21, 21), operator =
> > structure(c(4L, 4L, 7L, 8L, 8L, 8L, 11L, 4L, 10L, 7L, 4L, 7L, 8L, 8L,
> > 8L, 9L, 9L, 11L, 7L, 8L, 2L, 8L, 8L, 7L, 8L, 10L, 11L, 1L, 2L, 2L, 4L,
> > 8L, 8L, 8L, 8L, 10L, 12L, 4L, 6L, 6L, 8L, 8L, 8L, 7L, 7L, 8L, 8L, 9L,
> > 9L, 1L, 4L, 6L, 8L, 8L, 8L, 1L, 1L, 7L, 7L, 7L, 8L, 8L, 13L, 7L, 8L,
> > 9L, 9L, 1L, 1L, 2L, 7L, 8L, 10L, 10L, 4L, 7L, 7L, 7L, 8L, 8L, 8L, 9L,
> > 9L, 10L, 1L, 8L, 8L, 8L, 8L, 10L, 11L, 11L, 11L, 6L, 7L, 8L, 9L, 9L,
> > 10L, 6L, 10L, 1L, 4L, 7L, 10L, 6L, 7L, 13L, 7L, 13L, 7L, 8L, 9L, 4L,
> > 6L, 9L, 8L, 10L, 8L, 10L, 8L, 10L, 9L, 8L, 10L, 13L, 10L, 2L, 7L, 7L,
> > 8L, 8L, 9L, 11L, 11L, 10L, 10L, 13L, 13L, 8L, 8L, 9L, 4L, 6L, 10L,
> > 10L), .Label = c("T0", "T1", "T2", "T3", "T4", "T5", "T6", "T7", "T8",
> > "T9", "T10", "T11", "T12", "T13", "T14", "T15"), class = "factor"),
> > methodReturn = structure(c(2L, 2L, 2L, 2L, 2L, 2L, 2L, 4L, 4L, 2L, 2L,
> > 2L, 2L, 2L, 2L, 2L, 2L, 2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L,
> > 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> > 2L, 2L, 2L, 2L, 4L, 4L, 4L, 4L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> > 2L, 2L, 2L, 2L, 2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 1L, 1L, 1L,
> > 1L, 1L, 1L, 1L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 1L,
> > 1L, 3L, 3L, 1L, 1L, 3L, 3L, 3L, 3L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> > 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 2L, 4L, 4L, 4L, 4L,
> > 4L, 4L, 4L, 4L, 4L, 3L, 3L, 2L, 2L, 4L, 4L, 1L, 3L, 1L, 1L, 4L),
> > .Label = c("I", "V", "Z", "method", "D", "[D", "[[D", "J", "[I", "C",
> > "[J", "[C", "[S", "F", "[F", "[B", "S", "B", "[Z", "[[S", "[[B",
> > "[[Z"), class = "factor"), numTestsCover = c(16, 15, 15, 16, 15, 15,
> > 15, 4, 4, 16, 16, 16, 15, 15, 15, 16, 16, 15, 3, 3, 2, 2, 2, 16, 11,
> > 16, 4, 16, 16, 3, 16, 16, 4, 16, 16, 16, 16, 2, 3, 2, 1, 4, 1, 16, 15,
> > 16, 15, 16, 16, 2, 2, 2, 3, 2, 2, 4, 5, 5, 4, 5, 5, 4, 5, 4, 4, 4, 4,
> > 4, 3, 4, 4, 3, 4, 4, 5, 5, 4, 4, 5, 4, 4, 5, 4, 4, 4, 3, 4, 4, 4, 4,
> > 3, 3, 4, 4, 4, 4, 4, 6, 6, 0, 0, 2, 2, 2, 2, 7, 17, 17, 15, 15, 15,
> > 15, 15, 16, 16, 16, 16, 15, 16, 16, 15, 17, 17, 16, 16, 5, 4, 4, 4, 4,
> > 4, 4, 4, 4, 4, 16, 16, 3, 4, 0, 0, 5, 0, 4, 4, 1), mutantAssert =
> > c(55, 55, 55, 55, 55, 55, 55, 13, 13, 55, 55, 55, 55, 55, 55, 55, 55,
> > 55, 9, 9, 9, 9, 9, 55, 41, 55, 13, 55, 55, 5, 55, 55, 13, 55, 55, 55,
> > 55, 8, 13, 8, 4, 13, 4, 55, 55, 55, 55, 55, 55, 9, 9, 9, 9, 9, 8, 9,
> > 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 6, 9, 9, 6, 9, 9, 9, 9, 9, 9, 9,
> > 9, 9, 9, 9, 9, 9, 6, 9, 9, 9, 9, 6, 6, 9, 9, 9, 9, 9, 14, 14, 0, 0, 2,
> > 2, 2, 2, 15, 58, 58, 55, 55, 55, 55, 55, 58, 58, 58, 55, 55, 55, 55,
> > 55, 58, 58, 58, 58, 9, 9, 6, 6, 6, 6, 6, 6, 6, 6, 55, 55, 5, 13, 0, 0,
> > 11, 0, 9, 9, 8),
> >     classAssert = c(3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
> >     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
> >     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
> >     3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >     0, 0, 0, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,
> >     10, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
> >     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 0, 0, 0, 0, 1, 1, 3, 0,
> >     3, 3, 0), isKilled = structure(c(2L, 2L, 2L, 2L, 2L, 2L,
> >     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> >     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> >     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> >     2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L,
> >     1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L,
> >     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 1L,
> >     1L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L,
> >     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L,
> >     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L,
> >     1L, 2L, 1L, 1L, 1L), .Label = c("yes", "no"), class = "factor")),
> > row.names = c(3L, 9L, 12L, 13L, 14L, 15L, 19L, 21L, 22L, 24L, 28L,
> > 29L, 39L, 44L, 46L, 51L, 52L, 57L, 62L, 63L, 68L, 71L, 73L, 75L, 77L,
> > 80L, 83L, 84L, 85L, 86L, 90L, 95L, 100L, 102L, 103L, 108L, 112L, 120L,
> > 122L, 123L, 142L, 143L, 146L, 158L, 159L, 160L, 163L, 167L, 168L,
> > 170L, 174L, 176L, 183L, 186L, 192L, 196L, 199L, 203L, 205L, 206L,
> > 208L, 214L, 221L, 226L, 229L, 233L, 234L, 235L, 236L, 237L, 238L,
> > 249L, 252L, 255L, 260L, 267L, 270L, 271L, 273L, 275L, 276L, 277L,
> > 278L, 286L, 288L, 293L, 295L, 297L, 298L, 300L, 301L, 302L, 306L,
> > 312L, 313L, 316L, 317L, 331L, 333L, 338L, 341L, 342L, 344L, 346L,
> > 348L, 359L, 370L, 375L, 378L, 381L, 382L, 383L, 386L, 389L, 390L,
> > 394L, 397L, 400L, 402L, 403L, 404L, 408L, 415L, 418L, 419L, 423L,
> > 425L, 426L, 429L, 431L, 432L, 433L, 444L, 446L, 447L, 448L, 449L,
> > 451L, 452L, 457L, 458L, 470L, 474L, 476L, 479L, 484L), class =
> > "data.frame")
> >
> >
> >
> >
> > On Wed, Jan 26, 2022 at 3:29 PM PIKAL Petr
> > <mailto:petr.pikal at precheza.cz>
> > wrote:
> > Hi
> >
> > It seems that you are hiding what you really do.
> >
> > This
> > > options(error = NULL)
> > works fine without any error. So please If you want some reasonable
> > answer post question with data and code which is causing the error.
> >
> > My wild guess is that you have some objects in your environment and
> > you do not know that they are used in you commands. Try to start fresh
> > R session and try to inspect your environment with
> >
> > ls()
> >
> > Cheers
> > Petr
> >
> > > -----Original Message-----
> > > From: R-help <mailto:r-help-bounces at r-project.org> On Behalf Of
> > > javed khan
> > > Sent: Wednesday, January 26, 2022 3:05 PM
> > > To: Ivan Krylov <mailto:krylov.r00t at gmail.com>
> > > Cc: R-help <mailto:r-help at r-project.org>
> > > Subject: Re: [R] Error in if (fraction <= 1) { : missing value where
> > TRUE/FALSE
> > > needed
> > >
> > > Ivan, thanks
> > >
> > > When I use options(error = NULL)
> > >
> > > it says: Error during wrapup: missing value where TRUE/FALSE needed
> > > Error: no more error handlers available (recursive errors?);
> > > invoking
> > 'abort'
> > > restart
> > >
> > > With traceback(), I get
> > >
> > > 4: readable_number(max_value - min_value, FALSE)
> > > 3: get_nice_ticks(lower_bound, upper_bound)
> > >
> > > On Wed, Jan 26, 2022 at 2:53 PM Ivan Krylov
> > > <mailto:krylov.r00t at gmail.com>
> > > wrote:
> > >
> > > > On Wed, 26 Jan 2022 14:47:16 +0100 javed khan
> > > > <mailto:javedbtk111 at gmail.com> wrote:
> > > >
> > > > > Error in if (fraction <= 1) { : missing value where TRUE/FALSE
> > > > > needed
> > > >
> > > > > var <- ifelse(test$operator == 'T14', 1, 0)
> > > >
> > > > The error must be in a place different from your test$operator
> > > > comparison. Have you tried traceback() to get the call stack
> > > > leading to the error? Or options(error = recover) to land in a
> > > > debugger session the moment an uncaught error happens? (Use
> > > > options(error =
> > > > NULL) to go back to the default behaviour.)
> > > >
> > > > Unrelated: var <- test$operator == 'T14' will also give you an
> > > > equivalent logical vector with a bit less work.
> > > >
> > > > --
> > > > Best regards,
> > > > Ivan
> > > >
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > mailto:R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> > > see
> > > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_ma
> > > ilman_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2k
> > > VeAsRzsn7AkP-g&m=eLthULmcsbsauwFtFwUELWbEcCm6j9dDsFTJTMNM9azTjEAhJ1-
> > > qp1QpqM4aMJUU&s=nKOUnbWqTVHBJ8_18UPI_0txX86s35CP6VAqBc-Q6_k&e=
> > > PLEASE do read the posting guide
> > https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.or
> > g_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeA
> > sRzsn7AkP-g&m=eLthULmcsbsauwFtFwUELWbEcCm6j9dDsFTJTMNM9azTjEAhJ1-qp1Qp
> > qM4aMJUU&s=eZti_glRZlkKsUposffe3dMBirNV2J-goX3ARZowxLs&e=
> > > and provide commented, minimal, self-contained, reproducible code.
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mail
> > man_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAs
> > Rzsn7AkP-g&m=eLthULmcsbsauwFtFwUELWbEcCm6j9dDsFTJTMNM9azTjEAhJ1-qp1Qpq
> > M4aMJUU&s=nKOUnbWqTVHBJ8_18UPI_0txX86s35CP6VAqBc-Q6_k&e=
> > PLEASE do read the posting guide
> > https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.or
> > g_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeA
> > sRzsn7AkP-g&m=eLthULmcsbsauwFtFwUELWbEcCm6j9dDsFTJTMNM9azTjEAhJ1-qp1Qp
> > qM4aMJUU&s=eZti_glRZlkKsUposffe3dMBirNV2J-goX3ARZowxLs&e=
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=eLthULmcsbsauwFtFwUELWbEcCm6j9dDsFTJTMNM9azTjEAhJ1-qp1QpqM4aMJUU&s=nKOUnbWqTVHBJ8_18UPI_0txX86s35CP6VAqBc-Q6_k&e=
> PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=eLthULmcsbsauwFtFwUELWbEcCm6j9dDsFTJTMNM9azTjEAhJ1-qp1QpqM4aMJUU&s=eZti_glRZlkKsUposffe3dMBirNV2J-goX3ARZowxLs&e=
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Thu Jan 27 19:24:13 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 27 Jan 2022 10:24:13 -0800
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <CAJhui+s_iCRia-aoHmZPvF8zycnxrx7vqhfZzvRXHqyvQUxjUg@mail.gmail.com>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
 <20220126165313.26db0d5b@Tarkus>
 <CAJhui+s9=zb+MwPF2A=tiJZBdYbvhQaeoG+gbVnW4hPTuem=6Q@mail.gmail.com>
 <0192053a80d24bd4857bb4353f9a7009@SRVEXCHCM1301.precheza.cz>
 <CAJhui+v-G+O+3fir67PqVz8m7q592KjOqaBo5J8QvtsJtrLBSA@mail.gmail.com>
 <992be822fbfd4d759dc1501dfd35018c@SRVEXCHCM1301.precheza.cz>
 <CAGxFJbRbyDqqMNq=+7a7_90Kd89+TWp_Br2Ra=uTZOPivTxDQw@mail.gmail.com>
 <CAJhui+s_iCRia-aoHmZPvF8zycnxrx7vqhfZzvRXHqyvQUxjUg@mail.gmail.com>
Message-ID: <CAGxFJbRU5RFbqO+Ct--eUbSwm2LxmzFvKvfWcH5+wX=3N9QvqQ@mail.gmail.com>

No no! As Petr said, your original ifelse() is fine. I was just
pointing out that using just the logical vector
test$operator == 'T13'
instead of the numeric ifelse() would serve just as well in any
reasonable example I could think of. If you don't understand this,
just **ignore** my comment.

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Thu, Jan 27, 2022 at 10:15 AM javed khan <javedbtk111 at gmail.com> wrote:
>
> Thank you Bert Gunter
>
> Do you mean I should do something like this:
>
> prot <- (as.numeric(ifelse(test$operator == 'T13', 1, 0))
>
>
>
>
> On Thu, Jan 27, 2022 at 4:44 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>
>> This will not help solve the issue, but perhaps it is worth pointing
>> out that the idiom,
>> prot <- ifelse(test$operator == 'T13', 1, 0)
>> is perhaps more simply coded as
>> prot <- test$operator == 'T13'
>>
>> This will give a logical, TRUE/FALSE, instead of 1/0, but I doubt that
>> a numeric is needed anyway. However, as.numeric() would of course do
>> such a conversion, in which case the original ifelse might as well be
>> used.
>>
>> Bert Gunter
>>
>> "The trouble with having an open mind is that people keep coming along
>> and sticking things into it."
>> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>>
>> On Wed, Jan 26, 2022 at 11:39 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
>> >
>> > Hi
>> >
>> > Actually you did not. Your original question was:
>> >
>> > > Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed
>> > > I used this:
>> > > var <- ifelse(test$operator == 'T14', 1, 0)
>> > > operator has several values like T1, T3, T7, T15, T31, T37
>> > > For some values like T3, T7 it works fine but for majority of values
>> > > it gives error.
>> > > When I use: is.na(ts$operator), it shows all false values so no NAs.
>> >
>> > Only now we could inspect your whole code and it was already pointed that the
>> > error does not originate from ifelse.
>> >
>> > With the same data and ifelse code I did not get any error.
>> >
>> > test <- structure(list(DepthTree = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
>> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
>> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
>> > <snip>
>> >
>> > > str(test)
>> > 'data.frame':   146 obs. of  15 variables:
>> >  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
>> >  <snip>
>> > $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
>> >  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 4 4 7 8 8 8 11 4 10 7
>> > ...
>> >  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2 2 2 2 4
>> > 4 2 ...
>> >  $ numTestsCover: num  16 15 15 16 15 15 15 4 4 16 ...
>> >  $ mutantAssert : num  55 55 55 55 55 55 55 13 13 55 ...
>> >  $ classAssert  : num  3 3 3 3 3 3 3 3 3 3 ...
>> >  $ isKilled     : Factor w/ 2 levels "yes","no": 2 2 2 2 2 2 2 2 2 2 ...
>> > >
>> > prot <- ifelse(test$operator == 'T13', 1, 0)
>> >
>> > the most probable source of the error is
>> >
>> > fc= fairness_check(explainer,
>> >                           protected = prot,
>> >                    privileged = privileged)
>> >
>> > so you should check explainer and privileged
>> >
>> > Cheers
>> > Petr
>> >
>> > From: javed khan <javedbtk111 at gmail.com>
>> > Sent: Wednesday, January 26, 2022 3:45 PM
>> > To: PIKAL Petr <petr.pikal at precheza.cz>
>> > Cc: R-help <r-help at r-project.org>
>> > Subject: Re: [R] Error in if (fraction <= 1) { : missing value where
>> > TRUE/FALSE needed
>> >
>> > Hi Pikal, why would I hide something? I provided just a code where error is.
>> >
>> > Full code is:
>> >
>> > index= sample(1:nrow(data), 0.7*nrow(data))
>> > train= data[index,]
>> > test= data[-index,]
>> >
>> >
>> > task = TaskClassif$new("data", backend = train, target = "isKilled")
>> >
>> > learner= lrn("classif.gbm", predict_type = "prob")
>> >
>> > model= learner$train(task )
>> >
>> > explainer = explain_mlr3(model,
>> >                          data = test[,-15],
>> >                          y = as.numeric(test$isKilled)-1,
>> >                          label="GBM")
>> >
>> > prot <- ifelse(test$operator == 'T13', 1, 0)
>> > privileged <- '1'
>> >
>> > fc= fairness_check(explainer,
>> >                           protected = prot,
>> >                    privileged = privileged)
>> > plot(fc)
>> >
>> >
>> > And my data is the following:
>> >
>> > str(test)
>> > 'data.frame': 146 obs. of  15 variables:
>> >  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
>> >  $ NumSubclass  : num  0 0 0 0 0 0 0 0 0 0 ...
>> >  $ McCabe       : num  1 3 3 3 3 3 3 1 1 2 ...
>> >  $ LOC          : num  3 10 10 10 10 10 10 4 4 5 ...
>> >  $ DepthNested  : num  1 2 2 2 2 2 2 1 1 2 ...
>> >  $ CA           : num  1 1 1 1 1 1 1 1 1 1 ...
>> >  $ CE           : num  2 2 2 2 2 2 2 2 2 2 ...
>> >  $ Instability  : num  0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667
>> > 0.667 ...
>> >  $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
>> >  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 4 4 7 8 8 8 11 4 10 7
>> > ...
>> >  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2 2 2 2 4
>> > 4 2 ...
>> >  $ numTestsCover: num  16 15 15 16 15 15 15 4 4 16 ...
>> >  $ mutantAssert : num  55 55 55 55 55 55 55 13 13 55 ...
>> >  $ classAssert  : num  3 3 3 3 3 3 3 3 3 3 ...
>> >  $ isKilled     : Factor w/ 2 levels "yes","no": 2 2 2 2 2 2 2 2 2 2 ...
>> > > dput(test)
>> > structure(list(DepthTree = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
>> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
>> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
>> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
>> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
>> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
>> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
>> > 1, 1, 2, 2, 1, 2, 1, 1, 1), NumSubclass = c(0, 0, 0, 0, 0, 0,
>> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>> > 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0,
>> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2), McCabe = c(1, 3, 3,
>> > 3, 3, 3, 3, 1, 1, 2, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 1, 1, 1, 2,
>> > 2, 2, 1, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 3, 3,
>> > 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 5, 5, 5, 5, 5, 5, 5, 5, 2, 2, 2,
>> > 2, 5, 5, 5, 5, 5, 5, 1, 5, 5, 5, 5, 5, 5, 5, 5, 5, 2, 3, 3, 3,
>> > 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1,
>> > 2, 2, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 4, 1, 1, 1, 1, 2, 2,
>> > 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1), LOC = c(3,
>> > 10, 10, 10, 10, 10, 10, 4, 4, 5, 22, 22, 22, 22, 22, 22, 22,
>> > 22, 3, 3, 3, 3, 3, 8, 8, 8, 4, 23, 23, 23, 23, 23, 23, 23, 23,
>> > 23, 23, 16, 16, 16, 16, 16, 16, 8, 8, 8, 8, 8, 8, 16, 16, 16,
>> > 16, 16, 16, 20, 20, 20, 20, 20, 20, 20, 20, 7, 7, 7, 7, 18, 18,
>> > 18, 18, 18, 18, 3, 15, 15, 15, 15, 15, 15, 15, 15, 15, 6, 15,
>> > 15, 15, 15, 15, 15, 15, 15, 15, 9, 9, 9, 9, 9, 9, 4, 4, 3, 3,
>> > 3, 3, 3, 4, 4, 6, 6, 5, 5, 5, 8, 8, 8, 3, 3, 3, 3, 3, 3, 7, 3,
>> > 3, 3, 3, 15, 15, 15, 15, 15, 15, 15, 15, 3, 3, 3, 3, 4, 4, 8,
>> > 4, 4, 4, 3), DepthNested = c(1, 2, 2, 2, 2, 2, 2, 1, 1, 2, 4,
>> > 4, 4, 4, 4, 4, 4, 4, 1, 1, 1, 1, 1, 2, 2, 2, 1, 3, 3, 3, 3, 3,
>> > 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
>> > 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1,
>> > 3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
>> > 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2,
>> > 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1,
>> > 1, 1, 1, 1, 2, 1, 1, 1, 1), CA = c(1, 1, 1, 1, 1, 1, 1, 1, 1,
>> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
>> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
>> > 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
>> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
>> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1,
>> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
>> > 1, 1, 1, 1, 1, 1, 2, 1, 2, 2, 1), CE = c(2, 2, 2, 2, 2, 2, 2,
>> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
>> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
>> > 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 2,
>> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0,
>> > 0, 0, 2, 2, 2, 2, 2, 2, 0, 2, 0, 0, 2), Instability = c(0.667,
>> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
>> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
>> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
>> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
>> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
>> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
>> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.667, 0.667, 0.667, 0.667, 0.667,
>> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
>> > 0.667, 0.667, 0.667, 0.667, 0.667, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>> > 0, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0, 0.667, 0, 0,
>> > 0.667), numCovered = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>> > 150, 54, 54, 123, 54, 54, 123, 54, 189, 189, 189, 138, 33, 18,
>> > 27, 27, 18, 27, 15, 54, 54, 150, 150, 54, 150, 150, 54, 150,
>> > 66, 60, 12, 60, 15, 45, 72, 12, 12, 45, 255, 255, 255, 255, 129,
>> > 129, 0, 0, 6, 6, 6, 6, 303, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>> > 0, 0, 0, 0, 0, 0, 0, 0, 15, 21, 12, 12, 12, 12, 12, 12, 12, 12,
>> > 48, 1557, 9, 12, 0, 0, 141, 0, 21, 21, 21), operator = structure(c(4L,
>> > 4L, 7L, 8L, 8L, 8L, 11L, 4L, 10L, 7L, 4L, 7L, 8L, 8L, 8L, 9L,
>> > 9L, 11L, 7L, 8L, 2L, 8L, 8L, 7L, 8L, 10L, 11L, 1L, 2L, 2L, 4L,
>> > 8L, 8L, 8L, 8L, 10L, 12L, 4L, 6L, 6L, 8L, 8L, 8L, 7L, 7L, 8L,
>> > 8L, 9L, 9L, 1L, 4L, 6L, 8L, 8L, 8L, 1L, 1L, 7L, 7L, 7L, 8L, 8L,
>> > 13L, 7L, 8L, 9L, 9L, 1L, 1L, 2L, 7L, 8L, 10L, 10L, 4L, 7L, 7L,
>> > 7L, 8L, 8L, 8L, 9L, 9L, 10L, 1L, 8L, 8L, 8L, 8L, 10L, 11L, 11L,
>> > 11L, 6L, 7L, 8L, 9L, 9L, 10L, 6L, 10L, 1L, 4L, 7L, 10L, 6L, 7L,
>> > 13L, 7L, 13L, 7L, 8L, 9L, 4L, 6L, 9L, 8L, 10L, 8L, 10L, 8L, 10L,
>> > 9L, 8L, 10L, 13L, 10L, 2L, 7L, 7L, 8L, 8L, 9L, 11L, 11L, 10L,
>> > 10L, 13L, 13L, 8L, 8L, 9L, 4L, 6L, 10L, 10L), .Label = c("T0",
>> > "T1", "T2", "T3", "T4", "T5", "T6", "T7", "T8", "T9", "T10",
>> > "T11", "T12", "T13", "T14", "T15"), class = "factor"), methodReturn =
>> > structure(c(2L,
>> > 2L, 2L, 2L, 2L, 2L, 2L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>> > 2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L,
>> > 4L, 4L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>> > 4L, 4L, 4L, 4L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>> > 2L, 2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
>> > 1L, 1L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 1L, 1L,
>> > 3L, 3L, 1L, 1L, 3L, 3L, 3L, 3L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>> > 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 2L, 4L, 4L, 4L,
>> > 4L, 4L, 4L, 4L, 4L, 4L, 3L, 3L, 2L, 2L, 4L, 4L, 1L, 3L, 1L, 1L,
>> > 4L), .Label = c("I", "V", "Z", "method", "D", "[D", "[[D", "J",
>> > "[I", "C", "[J", "[C", "[S", "F", "[F", "[B", "S", "B", "[Z",
>> > "[[S", "[[B", "[[Z"), class = "factor"), numTestsCover = c(16,
>> > 15, 15, 16, 15, 15, 15, 4, 4, 16, 16, 16, 15, 15, 15, 16, 16,
>> > 15, 3, 3, 2, 2, 2, 16, 11, 16, 4, 16, 16, 3, 16, 16, 4, 16, 16,
>> > 16, 16, 2, 3, 2, 1, 4, 1, 16, 15, 16, 15, 16, 16, 2, 2, 2, 3,
>> > 2, 2, 4, 5, 5, 4, 5, 5, 4, 5, 4, 4, 4, 4, 4, 3, 4, 4, 3, 4, 4,
>> > 5, 5, 4, 4, 5, 4, 4, 5, 4, 4, 4, 3, 4, 4, 4, 4, 3, 3, 4, 4, 4,
>> > 4, 4, 6, 6, 0, 0, 2, 2, 2, 2, 7, 17, 17, 15, 15, 15, 15, 15,
>> > 16, 16, 16, 16, 15, 16, 16, 15, 17, 17, 16, 16, 5, 4, 4, 4, 4,
>> > 4, 4, 4, 4, 4, 16, 16, 3, 4, 0, 0, 5, 0, 4, 4, 1), mutantAssert = c(55,
>> > 55, 55, 55, 55, 55, 55, 13, 13, 55, 55, 55, 55, 55, 55, 55, 55,
>> > 55, 9, 9, 9, 9, 9, 55, 41, 55, 13, 55, 55, 5, 55, 55, 13, 55,
>> > 55, 55, 55, 8, 13, 8, 4, 13, 4, 55, 55, 55, 55, 55, 55, 9, 9,
>> > 9, 9, 9, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 6, 9, 9, 6,
>> > 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 6, 9, 9, 9, 9, 6, 6, 9,
>> > 9, 9, 9, 9, 14, 14, 0, 0, 2, 2, 2, 2, 15, 58, 58, 55, 55, 55,
>> > 55, 55, 58, 58, 58, 55, 55, 55, 55, 55, 58, 58, 58, 58, 9, 9,
>> > 6, 6, 6, 6, 6, 6, 6, 6, 55, 55, 5, 13, 0, 0, 11, 0, 9, 9, 8),
>> >     classAssert = c(3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
>> >     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
>> >     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
>> >     3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>> >     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
>> >     0, 0, 0, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,
>> >     10, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
>> >     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 0, 0, 0, 0, 1, 1, 3, 0,
>> >     3, 3, 0), isKilled = structure(c(2L, 2L, 2L, 2L, 2L, 2L,
>> >     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>> >     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>> >     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
>> >     2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L,
>> >     1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L,
>> >     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 1L,
>> >     1L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L,
>> >     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L,
>> >     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L,
>> >     1L, 2L, 1L, 1L, 1L), .Label = c("yes", "no"), class = "factor")),
>> > row.names = c(3L,
>> > 9L, 12L, 13L, 14L, 15L, 19L, 21L, 22L, 24L, 28L, 29L, 39L, 44L,
>> > 46L, 51L, 52L, 57L, 62L, 63L, 68L, 71L, 73L, 75L, 77L, 80L, 83L,
>> > 84L, 85L, 86L, 90L, 95L, 100L, 102L, 103L, 108L, 112L, 120L,
>> > 122L, 123L, 142L, 143L, 146L, 158L, 159L, 160L, 163L, 167L, 168L,
>> > 170L, 174L, 176L, 183L, 186L, 192L, 196L, 199L, 203L, 205L, 206L,
>> > 208L, 214L, 221L, 226L, 229L, 233L, 234L, 235L, 236L, 237L, 238L,
>> > 249L, 252L, 255L, 260L, 267L, 270L, 271L, 273L, 275L, 276L, 277L,
>> > 278L, 286L, 288L, 293L, 295L, 297L, 298L, 300L, 301L, 302L, 306L,
>> > 312L, 313L, 316L, 317L, 331L, 333L, 338L, 341L, 342L, 344L, 346L,
>> > 348L, 359L, 370L, 375L, 378L, 381L, 382L, 383L, 386L, 389L, 390L,
>> > 394L, 397L, 400L, 402L, 403L, 404L, 408L, 415L, 418L, 419L, 423L,
>> > 425L, 426L, 429L, 431L, 432L, 433L, 444L, 446L, 447L, 448L, 449L,
>> > 451L, 452L, 457L, 458L, 470L, 474L, 476L, 479L, 484L), class = "data.frame")
>> >
>> >
>> >
>> >
>> > On Wed, Jan 26, 2022 at 3:29 PM PIKAL Petr <mailto:petr.pikal at precheza.cz>
>> > wrote:
>> > Hi
>> >
>> > It seems that you are hiding what you really do.
>> >
>> > This
>> > > options(error = NULL)
>> > works fine without any error. So please If you want some reasonable answer
>> > post question with data and code which is causing the error.
>> >
>> > My wild guess is that you have some objects in your environment and you do
>> > not know that they are used in you commands. Try to start fresh R session
>> > and try to inspect your environment with
>> >
>> > ls()
>> >
>> > Cheers
>> > Petr
>> >
>> > > -----Original Message-----
>> > > From: R-help <mailto:r-help-bounces at r-project.org> On Behalf Of javed khan
>> > > Sent: Wednesday, January 26, 2022 3:05 PM
>> > > To: Ivan Krylov <mailto:krylov.r00t at gmail.com>
>> > > Cc: R-help <mailto:r-help at r-project.org>
>> > > Subject: Re: [R] Error in if (fraction <= 1) { : missing value where
>> > TRUE/FALSE
>> > > needed
>> > >
>> > > Ivan, thanks
>> > >
>> > > When I use options(error = NULL)
>> > >
>> > > it says: Error during wrapup: missing value where TRUE/FALSE needed
>> > > Error: no more error handlers available (recursive errors?); invoking
>> > 'abort'
>> > > restart
>> > >
>> > > With traceback(), I get
>> > >
>> > > 4: readable_number(max_value - min_value, FALSE)
>> > > 3: get_nice_ticks(lower_bound, upper_bound)
>> > >
>> > > On Wed, Jan 26, 2022 at 2:53 PM Ivan Krylov <mailto:krylov.r00t at gmail.com>
>> > > wrote:
>> > >
>> > > > On Wed, 26 Jan 2022 14:47:16 +0100
>> > > > javed khan <mailto:javedbtk111 at gmail.com> wrote:
>> > > >
>> > > > > Error in if (fraction <= 1) { : missing value where TRUE/FALSE
>> > > > > needed
>> > > >
>> > > > > var <- ifelse(test$operator == 'T14', 1, 0)
>> > > >
>> > > > The error must be in a place different from your test$operator
>> > > > comparison. Have you tried traceback() to get the call stack leading
>> > > > to the error? Or options(error = recover) to land in a debugger
>> > > > session the moment an uncaught error happens? (Use options(error =
>> > > > NULL) to go back to the default behaviour.)
>> > > >
>> > > > Unrelated: var <- test$operator == 'T14' will also give you an
>> > > > equivalent logical vector with a bit less work.
>> > > >
>> > > > --
>> > > > Best regards,
>> > > > Ivan
>> > > >
>> > >
>> > >       [[alternative HTML version deleted]]
>> > >
>> > > ______________________________________________
>> > > mailto:R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > > https://stat.ethz.ch/mailman/listinfo/r-help
>> > > PLEASE do read the posting guide
>> > http://www.R-project.org/posting-guide.html
>> > > and provide commented, minimal, self-contained, reproducible code.
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.


From j@vedbtk111 @end|ng |rom gm@||@com  Thu Jan 27 19:31:07 2022
From: j@vedbtk111 @end|ng |rom gm@||@com (javed khan)
Date: Thu, 27 Jan 2022 19:31:07 +0100
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <CAGxFJbRU5RFbqO+Ct--eUbSwm2LxmzFvKvfWcH5+wX=3N9QvqQ@mail.gmail.com>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
 <20220126165313.26db0d5b@Tarkus>
 <CAJhui+s9=zb+MwPF2A=tiJZBdYbvhQaeoG+gbVnW4hPTuem=6Q@mail.gmail.com>
 <0192053a80d24bd4857bb4353f9a7009@SRVEXCHCM1301.precheza.cz>
 <CAJhui+v-G+O+3fir67PqVz8m7q592KjOqaBo5J8QvtsJtrLBSA@mail.gmail.com>
 <992be822fbfd4d759dc1501dfd35018c@SRVEXCHCM1301.precheza.cz>
 <CAGxFJbRbyDqqMNq=+7a7_90Kd89+TWp_Br2Ra=uTZOPivTxDQw@mail.gmail.com>
 <CAJhui+s_iCRia-aoHmZPvF8zycnxrx7vqhfZzvRXHqyvQUxjUg@mail.gmail.com>
 <CAGxFJbRU5RFbqO+Ct--eUbSwm2LxmzFvKvfWcH5+wX=3N9QvqQ@mail.gmail.com>
Message-ID: <CAJhui+tcYQ6p31A+1tiFdU+tp1CLaMW3+v5-NY81U=KdMBjj4w@mail.gmail.com>

Ok thank you :)

On Thu, Jan 27, 2022 at 7:24 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> No no! As Petr said, your original ifelse() is fine. I was just
> pointing out that using just the logical vector
> test$operator == 'T13'
> instead of the numeric ifelse() would serve just as well in any
> reasonable example I could think of. If you don't understand this,
> just **ignore** my comment.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
> On Thu, Jan 27, 2022 at 10:15 AM javed khan <javedbtk111 at gmail.com> wrote:
> >
> > Thank you Bert Gunter
> >
> > Do you mean I should do something like this:
> >
> > prot <- (as.numeric(ifelse(test$operator == 'T13', 1, 0))
> >
> >
> >
> >
> > On Thu, Jan 27, 2022 at 4:44 PM Bert Gunter <bgunter.4567 at gmail.com>
> wrote:
> >>
> >> This will not help solve the issue, but perhaps it is worth pointing
> >> out that the idiom,
> >> prot <- ifelse(test$operator == 'T13', 1, 0)
> >> is perhaps more simply coded as
> >> prot <- test$operator == 'T13'
> >>
> >> This will give a logical, TRUE/FALSE, instead of 1/0, but I doubt that
> >> a numeric is needed anyway. However, as.numeric() would of course do
> >> such a conversion, in which case the original ifelse might as well be
> >> used.
> >>
> >> Bert Gunter
> >>
> >> "The trouble with having an open mind is that people keep coming along
> >> and sticking things into it."
> >> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
> >>
> >> On Wed, Jan 26, 2022 at 11:39 PM PIKAL Petr <petr.pikal at precheza.cz>
> wrote:
> >> >
> >> > Hi
> >> >
> >> > Actually you did not. Your original question was:
> >> >
> >> > > Error in if (fraction <= 1) { : missing value where TRUE/FALSE
> needed
> >> > > I used this:
> >> > > var <- ifelse(test$operator == 'T14', 1, 0)
> >> > > operator has several values like T1, T3, T7, T15, T31, T37
> >> > > For some values like T3, T7 it works fine but for majority of values
> >> > > it gives error.
> >> > > When I use: is.na(ts$operator), it shows all false values so no
> NAs.
> >> >
> >> > Only now we could inspect your whole code and it was already pointed
> that the
> >> > error does not originate from ifelse.
> >> >
> >> > With the same data and ifelse code I did not get any error.
> >> >
> >> > test <- structure(list(DepthTree = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> >> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> >> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> >> > <snip>
> >> >
> >> > > str(test)
> >> > 'data.frame':   146 obs. of  15 variables:
> >> >  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
> >> >  <snip>
> >> > $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
> >> >  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 4 4 7 8 8 8
> 11 4 10 7
> >> > ...
> >> >  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2
> 2 2 2 2 4
> >> > 4 2 ...
> >> >  $ numTestsCover: num  16 15 15 16 15 15 15 4 4 16 ...
> >> >  $ mutantAssert : num  55 55 55 55 55 55 55 13 13 55 ...
> >> >  $ classAssert  : num  3 3 3 3 3 3 3 3 3 3 ...
> >> >  $ isKilled     : Factor w/ 2 levels "yes","no": 2 2 2 2 2 2 2 2 2 2
> ...
> >> > >
> >> > prot <- ifelse(test$operator == 'T13', 1, 0)
> >> >
> >> > the most probable source of the error is
> >> >
> >> > fc= fairness_check(explainer,
> >> >                           protected = prot,
> >> >                    privileged = privileged)
> >> >
> >> > so you should check explainer and privileged
> >> >
> >> > Cheers
> >> > Petr
> >> >
> >> > From: javed khan <javedbtk111 at gmail.com>
> >> > Sent: Wednesday, January 26, 2022 3:45 PM
> >> > To: PIKAL Petr <petr.pikal at precheza.cz>
> >> > Cc: R-help <r-help at r-project.org>
> >> > Subject: Re: [R] Error in if (fraction <= 1) { : missing value where
> >> > TRUE/FALSE needed
> >> >
> >> > Hi Pikal, why would I hide something? I provided just a code where
> error is.
> >> >
> >> > Full code is:
> >> >
> >> > index= sample(1:nrow(data), 0.7*nrow(data))
> >> > train= data[index,]
> >> > test= data[-index,]
> >> >
> >> >
> >> > task = TaskClassif$new("data", backend = train, target = "isKilled")
> >> >
> >> > learner= lrn("classif.gbm", predict_type = "prob")
> >> >
> >> > model= learner$train(task )
> >> >
> >> > explainer = explain_mlr3(model,
> >> >                          data = test[,-15],
> >> >                          y = as.numeric(test$isKilled)-1,
> >> >                          label="GBM")
> >> >
> >> > prot <- ifelse(test$operator == 'T13', 1, 0)
> >> > privileged <- '1'
> >> >
> >> > fc= fairness_check(explainer,
> >> >                           protected = prot,
> >> >                    privileged = privileged)
> >> > plot(fc)
> >> >
> >> >
> >> > And my data is the following:
> >> >
> >> > str(test)
> >> > 'data.frame': 146 obs. of  15 variables:
> >> >  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
> >> >  $ NumSubclass  : num  0 0 0 0 0 0 0 0 0 0 ...
> >> >  $ McCabe       : num  1 3 3 3 3 3 3 1 1 2 ...
> >> >  $ LOC          : num  3 10 10 10 10 10 10 4 4 5 ...
> >> >  $ DepthNested  : num  1 2 2 2 2 2 2 1 1 2 ...
> >> >  $ CA           : num  1 1 1 1 1 1 1 1 1 1 ...
> >> >  $ CE           : num  2 2 2 2 2 2 2 2 2 2 ...
> >> >  $ Instability  : num  0.667 0.667 0.667 0.667 0.667 0.667 0.667
> 0.667 0.667
> >> > 0.667 ...
> >> >  $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
> >> >  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 4 4 7 8 8 8
> 11 4 10 7
> >> > ...
> >> >  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2
> 2 2 2 2 4
> >> > 4 2 ...
> >> >  $ numTestsCover: num  16 15 15 16 15 15 15 4 4 16 ...
> >> >  $ mutantAssert : num  55 55 55 55 55 55 55 13 13 55 ...
> >> >  $ classAssert  : num  3 3 3 3 3 3 3 3 3 3 ...
> >> >  $ isKilled     : Factor w/ 2 levels "yes","no": 2 2 2 2 2 2 2 2 2 2
> ...
> >> > > dput(test)
> >> > structure(list(DepthTree = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> >> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> >> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> >> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> >> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> >> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> >> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> >> > 1, 1, 2, 2, 1, 2, 1, 1, 1), NumSubclass = c(0, 0, 0, 0, 0, 0,
> >> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >> > 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0,
> >> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2), McCabe = c(1, 3, 3,
> >> > 3, 3, 3, 3, 1, 1, 2, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 1, 1, 1, 2,
> >> > 2, 2, 1, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 3, 3,
> >> > 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 5, 5, 5, 5, 5, 5, 5, 5, 2, 2, 2,
> >> > 2, 5, 5, 5, 5, 5, 5, 1, 5, 5, 5, 5, 5, 5, 5, 5, 5, 2, 3, 3, 3,
> >> > 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> >> > 2, 2, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 4, 1, 1, 1, 1, 2, 2,
> >> > 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1), LOC = c(3,
> >> > 10, 10, 10, 10, 10, 10, 4, 4, 5, 22, 22, 22, 22, 22, 22, 22,
> >> > 22, 3, 3, 3, 3, 3, 8, 8, 8, 4, 23, 23, 23, 23, 23, 23, 23, 23,
> >> > 23, 23, 16, 16, 16, 16, 16, 16, 8, 8, 8, 8, 8, 8, 16, 16, 16,
> >> > 16, 16, 16, 20, 20, 20, 20, 20, 20, 20, 20, 7, 7, 7, 7, 18, 18,
> >> > 18, 18, 18, 18, 3, 15, 15, 15, 15, 15, 15, 15, 15, 15, 6, 15,
> >> > 15, 15, 15, 15, 15, 15, 15, 15, 9, 9, 9, 9, 9, 9, 4, 4, 3, 3,
> >> > 3, 3, 3, 4, 4, 6, 6, 5, 5, 5, 8, 8, 8, 3, 3, 3, 3, 3, 3, 7, 3,
> >> > 3, 3, 3, 15, 15, 15, 15, 15, 15, 15, 15, 3, 3, 3, 3, 4, 4, 8,
> >> > 4, 4, 4, 3), DepthNested = c(1, 2, 2, 2, 2, 2, 2, 1, 1, 2, 4,
> >> > 4, 4, 4, 4, 4, 4, 4, 1, 1, 1, 1, 1, 2, 2, 2, 1, 3, 3, 3, 3, 3,
> >> > 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
> >> > 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1,
> >> > 3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> >> > 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2,
> >> > 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1,
> >> > 1, 1, 1, 1, 2, 1, 1, 1, 1), CA = c(1, 1, 1, 1, 1, 1, 1, 1, 1,
> >> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> >> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> >> > 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> >> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> >> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1,
> >> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> >> > 1, 1, 1, 1, 1, 1, 2, 1, 2, 2, 1), CE = c(2, 2, 2, 2, 2, 2, 2,
> >> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> >> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
> >> > 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 2,
> >> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0,
> >> > 0, 0, 2, 2, 2, 2, 2, 2, 0, 2, 0, 0, 2), Instability = c(0.667,
> >> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> >> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> >> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> >> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> >> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> >> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> >> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.667, 0.667, 0.667, 0.667, 0.667,
> >> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667,
> >> > 0.667, 0.667, 0.667, 0.667, 0.667, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >> > 0, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0, 0.667, 0, 0,
> >> > 0.667), numCovered = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >> > 150, 54, 54, 123, 54, 54, 123, 54, 189, 189, 189, 138, 33, 18,
> >> > 27, 27, 18, 27, 15, 54, 54, 150, 150, 54, 150, 150, 54, 150,
> >> > 66, 60, 12, 60, 15, 45, 72, 12, 12, 45, 255, 255, 255, 255, 129,
> >> > 129, 0, 0, 6, 6, 6, 6, 303, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >> > 0, 0, 0, 0, 0, 0, 0, 0, 15, 21, 12, 12, 12, 12, 12, 12, 12, 12,
> >> > 48, 1557, 9, 12, 0, 0, 141, 0, 21, 21, 21), operator = structure(c(4L,
> >> > 4L, 7L, 8L, 8L, 8L, 11L, 4L, 10L, 7L, 4L, 7L, 8L, 8L, 8L, 9L,
> >> > 9L, 11L, 7L, 8L, 2L, 8L, 8L, 7L, 8L, 10L, 11L, 1L, 2L, 2L, 4L,
> >> > 8L, 8L, 8L, 8L, 10L, 12L, 4L, 6L, 6L, 8L, 8L, 8L, 7L, 7L, 8L,
> >> > 8L, 9L, 9L, 1L, 4L, 6L, 8L, 8L, 8L, 1L, 1L, 7L, 7L, 7L, 8L, 8L,
> >> > 13L, 7L, 8L, 9L, 9L, 1L, 1L, 2L, 7L, 8L, 10L, 10L, 4L, 7L, 7L,
> >> > 7L, 8L, 8L, 8L, 9L, 9L, 10L, 1L, 8L, 8L, 8L, 8L, 10L, 11L, 11L,
> >> > 11L, 6L, 7L, 8L, 9L, 9L, 10L, 6L, 10L, 1L, 4L, 7L, 10L, 6L, 7L,
> >> > 13L, 7L, 13L, 7L, 8L, 9L, 4L, 6L, 9L, 8L, 10L, 8L, 10L, 8L, 10L,
> >> > 9L, 8L, 10L, 13L, 10L, 2L, 7L, 7L, 8L, 8L, 9L, 11L, 11L, 10L,
> >> > 10L, 13L, 13L, 8L, 8L, 9L, 4L, 6L, 10L, 10L), .Label = c("T0",
> >> > "T1", "T2", "T3", "T4", "T5", "T6", "T7", "T8", "T9", "T10",
> >> > "T11", "T12", "T13", "T14", "T15"), class = "factor"), methodReturn =
> >> > structure(c(2L,
> >> > 2L, 2L, 2L, 2L, 2L, 2L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> >> > 2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L,
> >> > 4L, 4L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> >> > 4L, 4L, 4L, 4L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> >> > 2L, 2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
> >> > 1L, 1L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 1L, 1L,
> >> > 3L, 3L, 1L, 1L, 3L, 3L, 3L, 3L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> >> > 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 2L, 4L, 4L, 4L,
> >> > 4L, 4L, 4L, 4L, 4L, 4L, 3L, 3L, 2L, 2L, 4L, 4L, 1L, 3L, 1L, 1L,
> >> > 4L), .Label = c("I", "V", "Z", "method", "D", "[D", "[[D", "J",
> >> > "[I", "C", "[J", "[C", "[S", "F", "[F", "[B", "S", "B", "[Z",
> >> > "[[S", "[[B", "[[Z"), class = "factor"), numTestsCover = c(16,
> >> > 15, 15, 16, 15, 15, 15, 4, 4, 16, 16, 16, 15, 15, 15, 16, 16,
> >> > 15, 3, 3, 2, 2, 2, 16, 11, 16, 4, 16, 16, 3, 16, 16, 4, 16, 16,
> >> > 16, 16, 2, 3, 2, 1, 4, 1, 16, 15, 16, 15, 16, 16, 2, 2, 2, 3,
> >> > 2, 2, 4, 5, 5, 4, 5, 5, 4, 5, 4, 4, 4, 4, 4, 3, 4, 4, 3, 4, 4,
> >> > 5, 5, 4, 4, 5, 4, 4, 5, 4, 4, 4, 3, 4, 4, 4, 4, 3, 3, 4, 4, 4,
> >> > 4, 4, 6, 6, 0, 0, 2, 2, 2, 2, 7, 17, 17, 15, 15, 15, 15, 15,
> >> > 16, 16, 16, 16, 15, 16, 16, 15, 17, 17, 16, 16, 5, 4, 4, 4, 4,
> >> > 4, 4, 4, 4, 4, 16, 16, 3, 4, 0, 0, 5, 0, 4, 4, 1), mutantAssert =
> c(55,
> >> > 55, 55, 55, 55, 55, 55, 13, 13, 55, 55, 55, 55, 55, 55, 55, 55,
> >> > 55, 9, 9, 9, 9, 9, 55, 41, 55, 13, 55, 55, 5, 55, 55, 13, 55,
> >> > 55, 55, 55, 8, 13, 8, 4, 13, 4, 55, 55, 55, 55, 55, 55, 9, 9,
> >> > 9, 9, 9, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 6, 9, 9, 6,
> >> > 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 6, 9, 9, 9, 9, 6, 6, 9,
> >> > 9, 9, 9, 9, 14, 14, 0, 0, 2, 2, 2, 2, 15, 58, 58, 55, 55, 55,
> >> > 55, 55, 58, 58, 58, 55, 55, 55, 55, 55, 58, 58, 58, 58, 9, 9,
> >> > 6, 6, 6, 6, 6, 6, 6, 6, 55, 55, 5, 13, 0, 0, 11, 0, 9, 9, 8),
> >> >     classAssert = c(3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
> >> >     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
> >> >     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
> >> >     3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >> >     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >> >     0, 0, 0, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,
> >> >     10, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
> >> >     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 0, 0, 0, 0, 1, 1, 3, 0,
> >> >     3, 3, 0), isKilled = structure(c(2L, 2L, 2L, 2L, 2L, 2L,
> >> >     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> >> >     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> >> >     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> >> >     2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L,
> >> >     1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L,
> >> >     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 1L,
> >> >     1L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L,
> >> >     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L,
> >> >     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L,
> >> >     1L, 2L, 1L, 1L, 1L), .Label = c("yes", "no"), class = "factor")),
> >> > row.names = c(3L,
> >> > 9L, 12L, 13L, 14L, 15L, 19L, 21L, 22L, 24L, 28L, 29L, 39L, 44L,
> >> > 46L, 51L, 52L, 57L, 62L, 63L, 68L, 71L, 73L, 75L, 77L, 80L, 83L,
> >> > 84L, 85L, 86L, 90L, 95L, 100L, 102L, 103L, 108L, 112L, 120L,
> >> > 122L, 123L, 142L, 143L, 146L, 158L, 159L, 160L, 163L, 167L, 168L,
> >> > 170L, 174L, 176L, 183L, 186L, 192L, 196L, 199L, 203L, 205L, 206L,
> >> > 208L, 214L, 221L, 226L, 229L, 233L, 234L, 235L, 236L, 237L, 238L,
> >> > 249L, 252L, 255L, 260L, 267L, 270L, 271L, 273L, 275L, 276L, 277L,
> >> > 278L, 286L, 288L, 293L, 295L, 297L, 298L, 300L, 301L, 302L, 306L,
> >> > 312L, 313L, 316L, 317L, 331L, 333L, 338L, 341L, 342L, 344L, 346L,
> >> > 348L, 359L, 370L, 375L, 378L, 381L, 382L, 383L, 386L, 389L, 390L,
> >> > 394L, 397L, 400L, 402L, 403L, 404L, 408L, 415L, 418L, 419L, 423L,
> >> > 425L, 426L, 429L, 431L, 432L, 433L, 444L, 446L, 447L, 448L, 449L,
> >> > 451L, 452L, 457L, 458L, 470L, 474L, 476L, 479L, 484L), class =
> "data.frame")
> >> >
> >> >
> >> >
> >> >
> >> > On Wed, Jan 26, 2022 at 3:29 PM PIKAL Petr <mailto:
> petr.pikal at precheza.cz>
> >> > wrote:
> >> > Hi
> >> >
> >> > It seems that you are hiding what you really do.
> >> >
> >> > This
> >> > > options(error = NULL)
> >> > works fine without any error. So please If you want some reasonable
> answer
> >> > post question with data and code which is causing the error.
> >> >
> >> > My wild guess is that you have some objects in your environment and
> you do
> >> > not know that they are used in you commands. Try to start fresh R
> session
> >> > and try to inspect your environment with
> >> >
> >> > ls()
> >> >
> >> > Cheers
> >> > Petr
> >> >
> >> > > -----Original Message-----
> >> > > From: R-help <mailto:r-help-bounces at r-project.org> On Behalf Of
> javed khan
> >> > > Sent: Wednesday, January 26, 2022 3:05 PM
> >> > > To: Ivan Krylov <mailto:krylov.r00t at gmail.com>
> >> > > Cc: R-help <mailto:r-help at r-project.org>
> >> > > Subject: Re: [R] Error in if (fraction <= 1) { : missing value where
> >> > TRUE/FALSE
> >> > > needed
> >> > >
> >> > > Ivan, thanks
> >> > >
> >> > > When I use options(error = NULL)
> >> > >
> >> > > it says: Error during wrapup: missing value where TRUE/FALSE needed
> >> > > Error: no more error handlers available (recursive errors?);
> invoking
> >> > 'abort'
> >> > > restart
> >> > >
> >> > > With traceback(), I get
> >> > >
> >> > > 4: readable_number(max_value - min_value, FALSE)
> >> > > 3: get_nice_ticks(lower_bound, upper_bound)
> >> > >
> >> > > On Wed, Jan 26, 2022 at 2:53 PM Ivan Krylov <mailto:
> krylov.r00t at gmail.com>
> >> > > wrote:
> >> > >
> >> > > > On Wed, 26 Jan 2022 14:47:16 +0100
> >> > > > javed khan <mailto:javedbtk111 at gmail.com> wrote:
> >> > > >
> >> > > > > Error in if (fraction <= 1) { : missing value where TRUE/FALSE
> >> > > > > needed
> >> > > >
> >> > > > > var <- ifelse(test$operator == 'T14', 1, 0)
> >> > > >
> >> > > > The error must be in a place different from your test$operator
> >> > > > comparison. Have you tried traceback() to get the call stack
> leading
> >> > > > to the error? Or options(error = recover) to land in a debugger
> >> > > > session the moment an uncaught error happens? (Use options(error =
> >> > > > NULL) to go back to the default behaviour.)
> >> > > >
> >> > > > Unrelated: var <- test$operator == 'T14' will also give you an
> >> > > > equivalent logical vector with a bit less work.
> >> > > >
> >> > > > --
> >> > > > Best regards,
> >> > > > Ivan
> >> > > >
> >> > >
> >> > >       [[alternative HTML version deleted]]
> >> > >
> >> > > ______________________________________________
> >> > > mailto:R-help at r-project.org mailing list -- To UNSUBSCRIBE and
> more, see
> >> > > https://stat.ethz.ch/mailman/listinfo/r-help
> >> > > PLEASE do read the posting guide
> >> > http://www.R-project.org/posting-guide.html
> >> > > and provide commented, minimal, self-contained, reproducible code.
> >> > ______________________________________________
> >> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> > https://stat.ethz.ch/mailman/listinfo/r-help
> >> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From tebert @end|ng |rom u||@edu  Thu Jan 27 20:27:01 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Thu, 27 Jan 2022 19:27:01 +0000
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <CAGxFJbTRqzUSypm-uH-8AuMmn69wkef=dQyJNq5nLmBXran2Hw@mail.gmail.com>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
 <20220126165313.26db0d5b@Tarkus>
 <CAJhui+s9=zb+MwPF2A=tiJZBdYbvhQaeoG+gbVnW4hPTuem=6Q@mail.gmail.com>
 <0192053a80d24bd4857bb4353f9a7009@SRVEXCHCM1301.precheza.cz>
 <CAJhui+v-G+O+3fir67PqVz8m7q592KjOqaBo5J8QvtsJtrLBSA@mail.gmail.com>
 <992be822fbfd4d759dc1501dfd35018c@SRVEXCHCM1301.precheza.cz>
 <CAGxFJbRbyDqqMNq=+7a7_90Kd89+TWp_Br2Ra=uTZOPivTxDQw@mail.gmail.com>
 <BN6PR2201MB155320F2B9CAD66DC5ED486CCF219@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <CAGxFJbTRqzUSypm-uH-8AuMmn69wkef=dQyJNq5nLmBXran2Hw@mail.gmail.com>
Message-ID: <BN6PR2201MB155335E0D395B87CEC3F8B6FCF219@BN6PR2201MB1553.namprd22.prod.outlook.com>

You did not claim it is faster, but if one is writing large programs or has huge quantities of data then thinking about execution time could be useful.

if(!require(microbenchmark)){install.packages("microbenchmark")}
library(microbenchmark)
a1<-c(1,1,0,1,0,0,0,1,1,0,0,0,0,1,1,1,0,1,1,1,1,0,0,0,1,0,1,0,1,0,0,0,1,1,0,0,1,0,0,0,0,1,1,0,0,1)
a2=as.logical(a1)

microbenchmark(
  {
    log(a1+0.01)
  },
  {
    log(a2+0.01)
  },
  times=100000
)

On my system running the code shows that there is an overhead cost if the logical has to be converted. In this simple code it was a sometimes significant but always a trivial 0.1 microsecond cost. I tried a few other bits of code and the mean and minimum values were always smaller performing numeric operations on a numeric variable. However, it looks like the range in values for a numeric operation on a numeric variable is greater. I don't understand why.

Tim

-----Original Message-----
From: Bert Gunter <bgunter.4567 at gmail.com> 
Sent: Thursday, January 27, 2022 1:17 PM
To: Ebert,Timothy Aaron <tebert at ufl.edu>
Cc: PIKAL Petr <petr.pikal at precheza.cz>; R-help <r-help at r-project.org>
Subject: Re: [R] Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed

[External Email]

I did not claim it is faster -- and in fact I doubt that it makes any real difference. Just simpler, imo. I also think that the logical vector would serve equally in any situation in most cases where arithmetic 0/1 coding is used -- even arithmetic ops and comparisons:
> TRUE + 2
[1] 3
> TRUE > .5
[1] TRUE
(?'+' has details)
I would appreciate someone responding with a nontrivial counterexample to this claim if they have one, other than the sort of thing shown in the ?logical example involving conversion to character:

## logical interpretation of particular strings
charvec <- c("FALSE", "F", "False", "false",    "fAlse", "0",
             "TRUE",  "T", "True",  "true",     "tRue",  "1")
as.logical(charvec)

## factors are converted via their levels, so string conversion is used
as.logical(factor(charvec))
as.logical(factor(c(0,1)))  # "0" and "1" give NA

(I mean of course purely internal R code, not export of data to an external application).


Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip ) On Thu, Jan 27, 2022 at 8:12 AM Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
>
> One could use the microbenchmark package to compare which approach is faster, assuming the dataset is large enough that the outcome will make a measurable difference.
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Bert Gunter
> Sent: Thursday, January 27, 2022 10:44 AM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Cc: R-help <r-help at r-project.org>
> Subject: Re: [R] Error in if (fraction <= 1) { : missing value where 
> TRUE/FALSE needed
>
> [External Email]
>
> This will not help solve the issue, but perhaps it is worth pointing out that the idiom, prot <- ifelse(test$operator == 'T13', 1, 0) is perhaps more simply coded as prot <- test$operator == 'T13'
>
> This will give a logical, TRUE/FALSE, instead of 1/0, but I doubt that a numeric is needed anyway. However, as.numeric() would of course do such a conversion, in which case the original ifelse might as well be used.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
> On Wed, Jan 26, 2022 at 11:39 PM PIKAL Petr <petr.pikal at precheza.cz> wrote:
> >
> > Hi
> >
> > Actually you did not. Your original question was:
> >
> > > Error in if (fraction <= 1) { : missing value where TRUE/FALSE 
> > > needed I used this:
> > > var <- ifelse(test$operator == 'T14', 1, 0) operator has several 
> > > values like T1, T3, T7, T15, T31, T37 For some values like T3, T7 
> > > it works fine but for majority of values it gives error.
> > > When I use: is.na(ts$operator), it shows all false values so no NAs.
> >
> > Only now we could inspect your whole code and it was already pointed 
> > that the error does not originate from ifelse.
> >
> > With the same data and ifelse code I did not get any error.
> >
> > test <- structure(list(DepthTree = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, <snip>
> >
> > > str(test)
> > 'data.frame':   146 obs. of  15 variables:
> >  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
> >  <snip>
> > $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
> >  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 4 4 7 8 8 8 11 4 10 7
> > ...
> >  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 
> > 2
> > 2 2 2 4
> > 4 2 ...
> >  $ numTestsCover: num  16 15 15 16 15 15 15 4 4 16 ...
> >  $ mutantAssert : num  55 55 55 55 55 55 55 13 13 55 ...
> >  $ classAssert  : num  3 3 3 3 3 3 3 3 3 3 ...
> >  $ isKilled     : Factor w/ 2 levels "yes","no": 2 2 2 2 2 2 2 2 2 2 ...
> > >
> > prot <- ifelse(test$operator == 'T13', 1, 0)
> >
> > the most probable source of the error is
> >
> > fc= fairness_check(explainer,
> >                           protected = prot,
> >                    privileged = privileged)
> >
> > so you should check explainer and privileged
> >
> > Cheers
> > Petr
> >
> > From: javed khan <javedbtk111 at gmail.com>
> > Sent: Wednesday, January 26, 2022 3:45 PM
> > To: PIKAL Petr <petr.pikal at precheza.cz>
> > Cc: R-help <r-help at r-project.org>
> > Subject: Re: [R] Error in if (fraction <= 1) { : missing value where 
> > TRUE/FALSE needed
> >
> > Hi Pikal, why would I hide something? I provided just a code where error is.
> >
> > Full code is:
> >
> > index= sample(1:nrow(data), 0.7*nrow(data)) train= data[index,] 
> > test= data[-index,]
> >
> >
> > task = TaskClassif$new("data", backend = train, target = "isKilled")
> >
> > learner= lrn("classif.gbm", predict_type = "prob")
> >
> > model= learner$train(task )
> >
> > explainer = explain_mlr3(model,
> >                          data = test[,-15],
> >                          y = as.numeric(test$isKilled)-1,
> >                          label="GBM")
> >
> > prot <- ifelse(test$operator == 'T13', 1, 0) privileged <- '1'
> >
> > fc= fairness_check(explainer,
> >                           protected = prot,
> >                    privileged = privileged)
> > plot(fc)
> >
> >
> > And my data is the following:
> >
> > str(test)
> > 'data.frame': 146 obs. of  15 variables:
> >  $ DepthTree    : num  1 1 1 1 1 1 1 1 1 1 ...
> >  $ NumSubclass  : num  0 0 0 0 0 0 0 0 0 0 ...
> >  $ McCabe       : num  1 3 3 3 3 3 3 1 1 2 ...
> >  $ LOC          : num  3 10 10 10 10 10 10 4 4 5 ...
> >  $ DepthNested  : num  1 2 2 2 2 2 2 1 1 2 ...
> >  $ CA           : num  1 1 1 1 1 1 1 1 1 1 ...
> >  $ CE           : num  2 2 2 2 2 2 2 2 2 2 ...
> >  $ Instability  : num  0.667 0.667 0.667 0.667 0.667 0.667 0.667 
> > 0.667
> > 0.667
> > 0.667 ...
> >  $ numCovered   : num  0 0 0 0 0 0 0 0 0 0 ...
> >  $ operator     : Factor w/ 16 levels "T0","T1","T2",..: 4 4 7 8 8 8 11 4 10 7
> > ...
> >  $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 
> > 2
> > 2 2 2 4
> > 4 2 ...
> >  $ numTestsCover: num  16 15 15 16 15 15 15 4 4 16 ...
> >  $ mutantAssert : num  55 55 55 55 55 55 55 13 13 55 ...
> >  $ classAssert  : num  3 3 3 3 3 3 3 3 3 3 ...
> >  $ isKilled     : Factor w/ 2 levels "yes","no": 2 2 2 2 2 2 2 2 2 2 ...
> > > dput(test)
> > structure(list(DepthTree = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 1, 2, 1, 1, 1), NumSubclass = 
> > c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> > 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> > 0, 0, 0, 0, 0, 0, 0, 0, 2), McCabe = c(1, 3, 3, 3, 3, 3, 3, 1, 1, 2, 
> > 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 1, 1, 1, 2, 2, 2, 1, 4, 4, 4, 4, 4, 4, 
> > 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 5, 
> > 5, 5, 5, 5, 5, 5, 5, 2, 2, 2, 2, 5, 5, 5, 5, 5, 5, 1, 5, 5, 5, 5, 5, 
> > 5, 5, 5, 5, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 1, 1, 1, 
> > 1, 1, 1, 1, 1, 1, 2, 2, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 4, 1, 1, 
> > 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1), LOC 
> > = c(3, 10, 10, 10, 10, 10, 10, 4, 4, 5, 22, 22, 22, 22, 22, 22, 22, 
> > 22, 3, 3, 3, 3, 3, 8, 8, 8, 4, 23, 23, 23, 23, 23, 23, 23, 23, 23, 
> > 23, 16, 16, 16, 16, 16, 16, 8, 8, 8, 8, 8, 8, 16, 16, 16, 16, 16, 
> > 16, 20, 20, 20, 20, 20, 20, 20, 20, 7, 7, 7, 7, 18, 18, 18, 18, 18, 
> > 18, 3, 15, 15, 15, 15, 15, 15, 15, 15, 15, 6, 15, 15, 15, 15, 15, 
> > 15, 15, 15, 15, 9, 9, 9, 9, 9, 9, 4, 4, 3, 3, 3, 3, 3, 4, 4, 6, 6, 
> > 5, 5, 5, 8, 8, 8, 3, 3, 3, 3, 3, 3, 7, 3, 3, 3, 3, 15, 15, 15, 15, 
> > 15, 15, 15, 15, 3, 3, 3, 3, 4, 4, 8, 4, 4, 4, 3), DepthNested = c(1, 
> > 2, 2, 2, 2, 2, 2, 1, 1, 2, 4, 4, 4, 4, 4, 4, 4, 4, 1, 1, 1, 1, 1, 2, 
> > 2, 2, 1, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 
> > 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 
> > 3, 3, 3, 1, 3, 3, 3, 3, 3, 3, 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
> > 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 
> > 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 
> > 1, 1, 2, 1, 1, 1, 1), CA = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 
> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
> > 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 
> > 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 2, 1, 2, 2, 1), CE = c(2, 2, 
> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
> > 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
> > 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 
> > 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 
> > 2, 0, 2, 0, 0, 2), Instability = c(0.667, 0.667, 0.667, 0.667, 
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.667, 
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 
> > 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0, 0, 
> > 0, 0, 0, 0, 0, 0, 0, 0, 0.667, 0.667, 0.667, 0.667, 0.667, 0.667, 0, 
> > 0.667, 0, 0, 0.667), numCovered = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
> > 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 150, 
> > 54, 54, 123, 54, 54, 123, 54, 189, 189, 189, 138, 33, 18, 27, 27, 
> > 18, 27, 15, 54, 54, 150, 150, 54, 150, 150, 54, 150, 66, 60, 12, 60, 
> > 15, 45, 72, 12, 12, 45, 255, 255, 255, 255, 129, 129, 0, 0, 6, 6, 6, 
> > 6, 303, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 
> > 21, 12, 12, 12, 12, 12, 12, 12, 12, 48, 1557, 9, 12, 0, 0, 141, 0, 
> > 21, 21, 21), operator = structure(c(4L, 4L, 7L, 8L, 8L, 8L, 11L, 4L, 
> > 10L, 7L, 4L, 7L, 8L, 8L, 8L, 9L, 9L, 11L, 7L, 8L, 2L, 8L, 8L, 7L, 
> > 8L, 10L, 11L, 1L, 2L, 2L, 4L, 8L, 8L, 8L, 8L, 10L, 12L, 4L, 6L, 6L, 
> > 8L, 8L, 8L, 7L, 7L, 8L, 8L, 9L, 9L, 1L, 4L, 6L, 8L, 8L, 8L, 1L, 1L, 
> > 7L, 7L, 7L, 8L, 8L, 13L, 7L, 8L, 9L, 9L, 1L, 1L, 2L, 7L, 8L, 10L, 
> > 10L, 4L, 7L, 7L, 7L, 8L, 8L, 8L, 9L, 9L, 10L, 1L, 8L, 8L, 8L, 8L, 
> > 10L, 11L, 11L, 11L, 6L, 7L, 8L, 9L, 9L, 10L, 6L, 10L, 1L, 4L, 7L, 
> > 10L, 6L, 7L, 13L, 7L, 13L, 7L, 8L, 9L, 4L, 6L, 9L, 8L, 10L, 8L, 10L, 
> > 8L, 10L, 9L, 8L, 10L, 13L, 10L, 2L, 7L, 7L, 8L, 8L, 9L, 11L, 11L, 
> > 10L, 10L, 13L, 13L, 8L, 8L, 9L, 4L, 6L, 10L, 10L), .Label = c("T0", 
> > "T1", "T2", "T3", "T4", "T5", "T6", "T7", "T8", "T9", "T10", "T11", 
> > "T12", "T13", "T14", "T15"), class = "factor"), methodReturn = 
> > structure(c(2L, 2L, 2L, 2L, 2L, 2L, 2L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 
> > 2L, 2L, 2L, 2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
> > 4L, 4L, 4L, 4L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
> > 2L, 4L, 4L, 4L, 4L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
> > 2L, 2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
> > 1L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 1L, 1L, 3L, 3L, 
> > 1L, 1L, 3L, 3L, 3L, 3L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 4L, 4L, 4L, 
> > 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
> > 4L, 4L, 3L, 3L, 2L, 2L, 4L, 4L, 1L, 3L, 1L, 1L, 4L), .Label = c("I", 
> > "V", "Z", "method", "D", "[D", "[[D", "J", "[I", "C", "[J", "[C", 
> > "[S", "F", "[F", "[B", "S", "B", "[Z", "[[S", "[[B", "[[Z"), class = 
> > "factor"), numTestsCover = c(16, 15, 15, 16, 15, 15, 15, 4, 4, 16, 
> > 16, 16, 15, 15, 15, 16, 16, 15, 3, 3, 2, 2, 2, 16, 11, 16, 4, 16, 
> > 16, 3, 16, 16, 4, 16, 16, 16, 16, 2, 3, 2, 1, 4, 1, 16, 15, 16, 15, 
> > 16, 16, 2, 2, 2, 3, 2, 2, 4, 5, 5, 4, 5, 5, 4, 5, 4, 4, 4, 4, 4, 3, 
> > 4, 4, 3, 4, 4, 5, 5, 4, 4, 5, 4, 4, 5, 4, 4, 4, 3, 4, 4, 4, 4, 3, 3, 
> > 4, 4, 4, 4, 4, 6, 6, 0, 0, 2, 2, 2, 2, 7, 17, 17, 15, 15, 15, 15, 
> > 15, 16, 16, 16, 16, 15, 16, 16, 15, 17, 17, 16, 16, 5, 4, 4, 4, 4, 
> > 4, 4, 4, 4, 4, 16, 16, 3, 4, 0, 0, 5, 0, 4, 4, 1), mutantAssert = 
> > c(55, 55, 55, 55, 55, 55, 55, 13, 13, 55, 55, 55, 55, 55, 55, 55, 
> > 55, 55, 9, 9, 9, 9, 9, 55, 41, 55, 13, 55, 55, 5, 55, 55, 13, 55, 
> > 55, 55, 55, 8, 13, 8, 4, 13, 4, 55, 55, 55, 55, 55, 55, 9, 9, 9, 9, 
> > 9, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 6, 9, 9, 6, 9, 9, 9, 9, 
> > 9, 9, 9, 9, 9, 9, 9, 9, 9, 6, 9, 9, 9, 9, 6, 6, 9, 9, 9, 9, 9, 14, 
> > 14, 0, 0, 2, 2, 2, 2, 15, 58, 58, 55, 55, 55, 55, 55, 58, 58, 58, 55, 55, 55, 55, 55, 58, 58, 58, 58, 9, 9, 6, 6, 6, 6, 6, 6, 6, 6, 55, 55, 5, 13, 0, 0, 11, 0, 9, 9, 8),
> >     classAssert = c(3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
> >     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
> >     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
> >     3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> >     0, 0, 0, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,
> >     10, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
> >     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 0, 0, 0, 0, 1, 1, 3, 0,
> >     3, 3, 0), isKilled = structure(c(2L, 2L, 2L, 2L, 2L, 2L,
> >     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> >     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> >     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
> >     2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L,
> >     1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L,
> >     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 1L,
> >     1L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L,
> >     2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L,
> >     1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L,
> >     1L, 2L, 1L, 1L, 1L), .Label = c("yes", "no"), class = 
> > "factor")), row.names = c(3L, 9L, 12L, 13L, 14L, 15L, 19L, 21L, 22L, 
> > 24L, 28L, 29L, 39L, 44L, 46L, 51L, 52L, 57L, 62L, 63L, 68L, 71L, 
> > 73L, 75L, 77L, 80L, 83L, 84L, 85L, 86L, 90L, 95L, 100L, 102L, 103L, 
> > 108L, 112L, 120L, 122L, 123L, 142L, 143L, 146L, 158L, 159L, 160L, 
> > 163L, 167L, 168L, 170L, 174L, 176L, 183L, 186L, 192L, 196L, 199L, 
> > 203L, 205L, 206L, 208L, 214L, 221L, 226L, 229L, 233L, 234L, 235L, 
> > 236L, 237L, 238L, 249L, 252L, 255L, 260L, 267L, 270L, 271L, 273L, 
> > 275L, 276L, 277L, 278L, 286L, 288L, 293L, 295L, 297L, 298L, 300L, 
> > 301L, 302L, 306L, 312L, 313L, 316L, 317L, 331L, 333L, 338L, 341L, 
> > 342L, 344L, 346L, 348L, 359L, 370L, 375L, 378L, 381L, 382L, 383L, 
> > 386L, 389L, 390L, 394L, 397L, 400L, 402L, 403L, 404L, 408L, 415L, 
> > 418L, 419L, 423L, 425L, 426L, 429L, 431L, 432L, 433L, 444L, 446L, 
> > 447L, 448L, 449L, 451L, 452L, 457L, 458L, 470L, 474L, 476L, 479L, 
> > 484L), class =
> > "data.frame")
> >
> >
> >
> >
> > On Wed, Jan 26, 2022 at 3:29 PM PIKAL Petr 
> > <mailto:petr.pikal at precheza.cz>
> > wrote:
> > Hi
> >
> > It seems that you are hiding what you really do.
> >
> > This
> > > options(error = NULL)
> > works fine without any error. So please If you want some reasonable 
> > answer post question with data and code which is causing the error.
> >
> > My wild guess is that you have some objects in your environment and 
> > you do not know that they are used in you commands. Try to start 
> > fresh R session and try to inspect your environment with
> >
> > ls()
> >
> > Cheers
> > Petr
> >
> > > -----Original Message-----
> > > From: R-help <mailto:r-help-bounces at r-project.org> On Behalf Of 
> > > javed khan
> > > Sent: Wednesday, January 26, 2022 3:05 PM
> > > To: Ivan Krylov <mailto:krylov.r00t at gmail.com>
> > > Cc: R-help <mailto:r-help at r-project.org>
> > > Subject: Re: [R] Error in if (fraction <= 1) { : missing value 
> > > where
> > TRUE/FALSE
> > > needed
> > >
> > > Ivan, thanks
> > >
> > > When I use options(error = NULL)
> > >
> > > it says: Error during wrapup: missing value where TRUE/FALSE 
> > > needed
> > > Error: no more error handlers available (recursive errors?); 
> > > invoking
> > 'abort'
> > > restart
> > >
> > > With traceback(), I get
> > >
> > > 4: readable_number(max_value - min_value, FALSE)
> > > 3: get_nice_ticks(lower_bound, upper_bound)
> > >
> > > On Wed, Jan 26, 2022 at 2:53 PM Ivan Krylov 
> > > <mailto:krylov.r00t at gmail.com>
> > > wrote:
> > >
> > > > On Wed, 26 Jan 2022 14:47:16 +0100 javed khan 
> > > > <mailto:javedbtk111 at gmail.com> wrote:
> > > >
> > > > > Error in if (fraction <= 1) { : missing value where TRUE/FALSE 
> > > > > needed
> > > >
> > > > > var <- ifelse(test$operator == 'T14', 1, 0)
> > > >
> > > > The error must be in a place different from your test$operator 
> > > > comparison. Have you tried traceback() to get the call stack 
> > > > leading to the error? Or options(error = recover) to land in a 
> > > > debugger session the moment an uncaught error happens? (Use 
> > > > options(error =
> > > > NULL) to go back to the default behaviour.)
> > > >
> > > > Unrelated: var <- test$operator == 'T14' will also give you an 
> > > > equivalent logical vector with a bit less work.
> > > >
> > > > --
> > > > Best regards,
> > > > Ivan
> > > >
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > mailto:R-help at r-project.org mailing list -- To UNSUBSCRIBE and 
> > > more, see 
> > > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_
> > > ma 
> > > ilman_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh
> > > 2k
> > > VeAsRzsn7AkP-g&m=eLthULmcsbsauwFtFwUELWbEcCm6j9dDsFTJTMNM9azTjEAhJ
> > > 1- qp1QpqM4aMJUU&s=nKOUnbWqTVHBJ8_18UPI_0txX86s35CP6VAqBc-Q6_k&e=
> > > PLEASE do read the posting guide
> > https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.
> > or 
> > g_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kV
> > eA 
> > sRzsn7AkP-g&m=eLthULmcsbsauwFtFwUELWbEcCm6j9dDsFTJTMNM9azTjEAhJ1-qp1
> > Qp qM4aMJUU&s=eZti_glRZlkKsUposffe3dMBirNV2J-goX3ARZowxLs&e=
> > > and provide commented, minimal, self-contained, reproducible code.
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_ma
> > il 
> > man_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVe
> > As 
> > Rzsn7AkP-g&m=eLthULmcsbsauwFtFwUELWbEcCm6j9dDsFTJTMNM9azTjEAhJ1-qp1Q
> > pq M4aMJUU&s=nKOUnbWqTVHBJ8_18UPI_0txX86s35CP6VAqBc-Q6_k&e=
> > PLEASE do read the posting guide
> > https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.
> > or 
> > g_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kV
> > eA 
> > sRzsn7AkP-g&m=eLthULmcsbsauwFtFwUELWbEcCm6j9dDsFTJTMNM9azTjEAhJ1-qp1
> > Qp qM4aMJUU&s=eZti_glRZlkKsUposffe3dMBirNV2J-goX3ARZowxLs&e=
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mail
> man_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAs
> Rzsn7AkP-g&m=eLthULmcsbsauwFtFwUELWbEcCm6j9dDsFTJTMNM9azTjEAhJ1-qp1Qpq
> M4aMJUU&s=nKOUnbWqTVHBJ8_18UPI_0txX86s35CP6VAqBc-Q6_k&e=
> PLEASE do read the posting guide 
> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.or
> g_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeA
> sRzsn7AkP-g&m=eLthULmcsbsauwFtFwUELWbEcCm6j9dDsFTJTMNM9azTjEAhJ1-qp1Qp
> qM4aMJUU&s=eZti_glRZlkKsUposffe3dMBirNV2J-goX3ARZowxLs&e=
> and provide commented, minimal, self-contained, reproducible code.

From @v|gro@@ @end|ng |rom ver|zon@net  Thu Jan 27 22:57:51 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Thu, 27 Jan 2022 21:57:51 +0000 (UTC)
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <CAJhui+s_iCRia-aoHmZPvF8zycnxrx7vqhfZzvRXHqyvQUxjUg@mail.gmail.com>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
 <20220126165313.26db0d5b@Tarkus>
 <CAJhui+s9=zb+MwPF2A=tiJZBdYbvhQaeoG+gbVnW4hPTuem=6Q@mail.gmail.com>
 <0192053a80d24bd4857bb4353f9a7009@SRVEXCHCM1301.precheza.cz>
 <CAJhui+v-G+O+3fir67PqVz8m7q592KjOqaBo5J8QvtsJtrLBSA@mail.gmail.com>
 <992be822fbfd4d759dc1501dfd35018c@SRVEXCHCM1301.precheza.cz>
 <CAGxFJbRbyDqqMNq=+7a7_90Kd89+TWp_Br2Ra=uTZOPivTxDQw@mail.gmail.com>
 <CAJhui+s_iCRia-aoHmZPvF8zycnxrx7vqhfZzvRXHqyvQUxjUg@mail.gmail.com>
Message-ID: <1878056848.1692524.1643320671590@mail.yahoo.com>


Javed,
You may misunderstand something here.
Forget ifelse() which does all kinds of things (which you can see by just typing "ifelse" and a carriage/return or ENTER.
Your initial goal should be kept in mind. You want to create a data structure, in this case a vector, that is the same length as another vector called test$operator in which you mark whether the corresponding element was exactly "T13" or not.
There is nothing fundamentally wrong with your approach albeit it is overkill in this case. As has been pointed out, SKIPPING ifelse() entirely, you can get a vector of Logicals (TRUE or FALSE) by a simple command like this:
? ? result <-?test$operator == 'T13'
For many purposes, that is all you need. TRUE and FALSE are also sometimes mapped into 1 and 0 for various purposes, so you can convert them into integers or general numerics is that is needed. Consider the following code that checks the integers from 1 to 7 to see if they are even (as in divisible by 2):

> result <- 1:7 %% 2 == 0> result[1] FALSE? TRUE FALSE? TRUE FALSE? TRUE FALSE> as.integer(result)[1] 0 1 0 1 0 1 0> as.numeric(result)[1] 0 1 0 1 0 1 0> result <- as.integer(1:7 %% 2 == 0)> result[1] 0 1 0 1 0 1 0

If for some reason the choice of 1 and 0 is the opposite of what you need, you can invert them several ways with the simplest being:

? ??as.integer(1:7 %% 2 != 0)
or? ??as.integer(!(1:7 %% 2 != 0))

The first negates the comparison and the second just flips every FALSE and TRUE to the other.
Why are we talking about this? For many more interesting cases, ifelse() is great as you can replace one or both of the choices with anything. A very common case is replacing one choice with itself and changing the other, or nesting the comparisons in a sort of simulated tree as in?
 ? ?ifelse(some_condition,? ? ? ?ifelse(second_condition, result1, result2),? ? ? ? ?ifelse(third_condition, result3, result4)))

But you seem to want the simplest return of two values that also happen to be the underlying equivalent of TRUE and FALSE in many languages. In Python, anything that evaluates to zero (or the Boolean value FALSE) tends?to be treated as FALSE, and anything else like a 1 or 666 is treated as TRUE, as shown below:

> if (TRUE) print("TRUE") else print("FALSE")[1] "TRUE"> if (1) print("TRUE") else print("FALSE")[1] "TRUE"> if (666) print("TRUE") else print("FALSE")[1] "TRUE"> if (FALSE) print("TRUE") else print("FALSE")[1] "FALSE"> if (0) print("TRUE") else print("FALSE")[1] "FALSE"

This is why you are being told that for many purposes, the Boolean vector may work fine. But if you really want or need zero and one, that is a trivial transformation as shown. Feel free to use ifelse() and then figure out what went wrong with your code, but also to try the simpler version and see if the problem goes away.
Avi
-----Original Message-----
From: javed khan <javedbtk111 at gmail.com>
To: Bert Gunter <bgunter.4567 at gmail.com>
Cc: R-help <r-help at r-project.org>
Sent: Thu, Jan 27, 2022 1:15 pm
Subject: Re: [R] Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed

Thank you Bert Gunter

Do you mean I should do something like this:

prot <- (as.numeric(ifelse(test$operator == 'T13', 1, 0))




On Thu, Jan 27, 2022 at 4:44 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> This will not help solve the issue, but perhaps it is worth pointing
> out that the idiom,
> prot <- ifelse(test$operator == 'T13', 1, 0)
> is perhaps more simply coded as
> prot <- test$operator == 'T13'
>
> This will give a logical, TRUE/FALSE, instead of 1/0, but I doubt that
> a numeric is needed anyway. However, as.numeric() would of course do
> such a conversion, in which case the original ifelse might as well be
> used.
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
> On Wed, Jan 26, 2022 at 11:39 PM PIKAL Petr <petr.pikal at precheza.cz>
> wrote:
> >
> > Hi
> >
> > Actually you did not. Your original question was:
> >
> > > Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed
> > > I used this:
> > > var <- ifelse(test$operator == 'T14', 1, 0)
> > > operator has several values like T1, T3, T7, T15, T31, T37
> > > For some values like T3, T7 it works fine but for majority of values
> > > it gives error.
> > > When I use: is.na(ts$operator), it shows all false values so no NAs.
> >
> > Only now we could inspect your whole code and it was already pointed
> that the
> > error does not originate from ifelse.
> >
> > With the same data and ifelse code I did not get any error.
> >
> > test <- structure(list(DepthTree = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
> > <snip>
> >
> > > str(test)
> > 'data.frame':? 146 obs. of? 15 variables:
> >? $ DepthTree? ? : num? 1 1 1 1 1 1 1 1 1 1 ...
> >? <snip>
> > $ numCovered? : num? 0 0 0 0 0 0 0 0 0 0 ...
> >? $ operator? ? : Factor w/ 16 levels "T0","T1","T2",..: 4 4 7 8 8 8 11
> 4 10 7
> > ...
> >? $ methodReturn : Factor w/ 22 levels "I","V","Z","method",..: 2 2 2 2 2
> 2 2 4
> > 4 2 ...
> >? $ numTestsCover: num? 16 15 15 16 15 15 15 4 4 16 ...
> >? $ mutantAssert : num? 55 55 55 55 55 55 55 13 13 55 ...
> >? $ classAssert? : num? 3 3 3 3 3 3 3 3 3 3 ...
> >? $ isKilled? ? : Factor w/ 2 levels "yes","no": 2 2 2 2 2 2 2 2 2 2 ...
> > >
> > prot <- ifelse(test$operator == 'T13', 1, 0)
> >
> > the most probable source of the error is
> >
> > fc= fairness_check(explainer,
> >? ? ? ? ? ? ? ? ? ? ? ? ? protected = prot,
> >? ? ? ? ? ? ? ? ? ? privileged = privileged)
> >
> > so you should check explainer and privileged
> >
> > Cheers
> > Petr






	[[alternative HTML version deleted]]


From @v|gro@@ @end|ng |rom ver|zon@net  Thu Jan 27 23:18:57 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Thu, 27 Jan 2022 22:18:57 +0000 (UTC)
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <BN6PR2201MB155335E0D395B87CEC3F8B6FCF219@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
 <20220126165313.26db0d5b@Tarkus>
 <CAJhui+s9=zb+MwPF2A=tiJZBdYbvhQaeoG+gbVnW4hPTuem=6Q@mail.gmail.com>
 <0192053a80d24bd4857bb4353f9a7009@SRVEXCHCM1301.precheza.cz>
 <CAJhui+v-G+O+3fir67PqVz8m7q592KjOqaBo5J8QvtsJtrLBSA@mail.gmail.com>
 <992be822fbfd4d759dc1501dfd35018c@SRVEXCHCM1301.precheza.cz>
 <CAGxFJbRbyDqqMNq=+7a7_90Kd89+TWp_Br2Ra=uTZOPivTxDQw@mail.gmail.com>
 <BN6PR2201MB155320F2B9CAD66DC5ED486CCF219@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <CAGxFJbTRqzUSypm-uH-8AuMmn69wkef=dQyJNq5nLmBXran2Hw@mail.gmail.com>
 <BN6PR2201MB155335E0D395B87CEC3F8B6FCF219@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <857826239.1688462.1643321937522@mail.yahoo.com>

Timothy,
In reply to what you wrote about a benchmark suggesting some storage formats may make the code run slower, it is not a surprise, given what you chose to benchmark.

You are using a test of a logical variable in a numeric context when you have code like:
? ??log(a2+0.01)
In order to do the calculation, depending on the internals, you need to convert a2 to at least an integer or perhaps a floating point value such as 1L or 1.0 before adding 0.01 to it.?

You are doing the equivalent of:
? ??log(as.integer(a2)+0.01)

or perhaps:
? ??? ??log(as.double(a2)+0.01)

The result is some extra work in THAT context. Note I am NOT saying R calls one of those primitive functions, just that the final code does such conversions perhaps at the assembler level or lower.
But consider the opposite context such as in a if(...) statement as in:
? ? if(a2) {do_this) else {do_that}

If a2 is already a logical data form, it happens rapidly. If a2 is something more complex that can be evaluated in steps into a logical, it takes those steps. As I showed earlier, if a2 was 1 or 666 it would be evaluated to be non-zero and thus converted to TRUE and then the statement would choose do_this, else it would evaluate to FALSE and do do_that.
So the right storage format depends on how you want to use it and how much storage space you are willing to use. On some machines and architectures, they may store a logical value in anything from a bit to a byte to multiple bytes, and on a lower level, it may be expanded as needed to fit into a fixed register on the CPU. In some cases, a natural storage format will be the one that can be used immediately with no boxing or unboxing. But as always, there are tradeoffs to be considered in terms of how many cycles are used (execution time) or other resources like memory in use. In a few cases, it may oddly pay to make two or more copies of a vector in different storage formats and then use the best one for subsequent calculations. Boolean might turn out to be a great choice for indexing into a list or vector or matrix or data.frame, while integer may be great if doing mathematics like multiplication into a structure that only contains integers, and a double version when interacting with such numbers and maybe even versions that are character or complex.
But from a novice perspective, performance is not usually a big concern and especially not for small amounts of data. The only reason this is being discussed is that the question about what went wrong might be hard to figure out without lots more info, while the simple wrok-around might either work fine or tell us more about what might be wrong.

-----Original Message-----
From: Ebert,Timothy Aaron <tebert at ufl.edu>
To: Bert Gunter <bgunter.4567 at gmail.com>
Cc: R-help <r-help at r-project.org>
Sent: Thu, Jan 27, 2022 2:27 pm
Subject: Re: [R] Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed

You did not claim it is faster, but if one is writing large programs or has huge quantities of data then thinking about execution time could be useful.

if(!require(microbenchmark)){install.packages("microbenchmark")}
library(microbenchmark)
a1<-c(1,1,0,1,0,0,0,1,1,0,0,0,0,1,1,1,0,1,1,1,1,0,0,0,1,0,1,0,1,0,0,0,1,1,0,0,1,0,0,0,0,1,1,0,0,1)
a2=as.logical(a1)

microbenchmark(
? {
? ? log(a1+0.01)
? },
? {
? ? log(a2+0.01)
? },
? times=100000
)

On my system running the code shows that there is an overhead cost if the logical has to be converted. In this simple code it was a sometimes significant but always a trivial 0.1 microsecond cost. I tried a few other bits of code and the mean and minimum values were always smaller performing numeric operations on a numeric variable. However, it looks like the range in values for a numeric operation on a numeric variable is greater. I don't understand why.

Tim

-----Original Message-----
From: Bert Gunter <bgunter.4567 at gmail.com> 
Sent: Thursday, January 27, 2022 1:17 PM
To: Ebert,Timothy Aaron <tebert at ufl.edu>
Cc: PIKAL Petr <petr.pikal at precheza.cz>; R-help <r-help at r-project.org>
Subject: Re: [R] Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed

[External Email]

I did not claim it is faster -- and in fact I doubt that it makes any real difference. Just simpler, imo. I also think that the logical vector would serve equally in any situation in most cases where arithmetic 0/1 coding is used -- even arithmetic ops and comparisons:
> TRUE + 2
[1] 3
> TRUE > .5
[1] TRUE
(?'+' has details)
I would appreciate someone responding with a nontrivial counterexample to this claim if they have one, other than the sort of thing shown in the ?logical example involving conversion to character:

## logical interpretation of particular strings
charvec <- c("FALSE", "F", "False", "false",? ? "fAlse", "0",
? ? ? ? ? ? "TRUE",? "T", "True",? "true",? ? "tRue",? "1")
as.logical(charvec)

## factors are converted via their levels, so string conversion is used
as.logical(factor(charvec))
as.logical(factor(c(0,1)))? # "0" and "1" give NA

(I mean of course purely internal R code, not export of data to an external application).


Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip ) On Thu, Jan 27, 2022 at 8:12 AM Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
>
> One could use the microbenchmark package to compare which approach is faster, assuming the dataset is large enough that the outcome will make a measurable difference.
>


	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Fri Jan 28 03:47:58 2022
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Fri, 28 Jan 2022 13:47:58 +1100
Subject: [R] 
 Need help with writing survey design for multilevel analysis
In-Reply-To: <CAOTqx+L+wSRmvcmB00DyE5B+nu2FLW8aoKO64DoAeouxujbRJg@mail.gmail.com>
References: <CAOTqx+L+wSRmvcmB00DyE5B+nu2FLW8aoKO64DoAeouxujbRJg@mail.gmail.com>
Message-ID: <CA+8X3fW=jnrFgUR5Z3dnH0wSX7A0H72p3J0F=9BCbJuNDv_+8A@mail.gmail.com>

Hi Love,
I'm not entirely on top of your question, but perhaps if you look at this:

https://cran.r-project.org/web/packages/pricesensitivitymeter/vignettes/using-weighted-data.html

it will get you started. Feel free to repost if this doesn't solve your problem.

Jim

On Wed, Jan 26, 2022 at 8:18 PM Love Umesi <yugohlav at gmail.com> wrote:
>
> Hello,
>
> I am new in using R, and I need to run a multilevel analysis (on two
> levels) using Cox frailty survival model on a survey data (Nigeria
> Demographic and Health Survey Data).
>
> My problem is how to write the design weight using the two weights needed
> and apply them to the analysis.
>
> I have identified the needed variables for the survey design, which are :
>
> psu/cluster=~v021
> individual-level weight=~wt1_1
> cluster-level weigh=~wt2_1
> strata/stratum=~v022
>
> Please can someone help me with the survey design (svydesign) code and how
> to include it and the weights in a model.
>
> I have tried to generate a minimum reproducible data
>
> To view the minimum reproducible data: datapasta::df_paste (head(rcom2018,
> 10)[, c('pid', 'study_time', 'died', 'v021', 'v022', 'wt2_1', 'wt1_1',
> 'v024', 'v025', 'mat_edu')])
>
>
> I understand I have to use svycoxph in the model. Please how do I include
> survey design and account for the 2 weights in the gamma frailty model
> below?
>
> Frailty1 <- coxph (Surv(study_time, died) ~ factor(v024) + factor(mat_edu)
> + v025 + frailty(v021,distribution="gamma"), data=rcom2018)
>
>
> Really looking forward to your help as my project is hanging on this.
>
> Many thanks.
>
> Love Umesi
>
> library(survey)#> Warning: package 'survey' was built under R version
> 4.0.5#> Loading required package: grid#> Loading required package:
> Matrix#> Loading required package: survival#> Warning: package
> 'survival' was built under R version 4.0.5#> #> Attaching package:
> 'survey'#> The following object is masked from 'package:graphics':#>
> #>     dotchart
> library(survival)
>
>
> rcom1 <- data.frame(
>                          pid = c(1,2,3,4,
>                                  5,6,7,8,9,10,11,12,13,14,15,16,17,
>                                  18,19,20,21,22,23,24,25,26,27,28,29,
>                                  30,31,32,33,34,35,36,37,38,39,40,
>                                  41,42,43,44,45,46,47,48,49,50),
>                   study_time = c(13,9,17,
>                                  31,39,22,24,0,23,12,9,35,18,20,60,
>                                  18,5,46,26,54,37,51,31,55,27,15,39,6,
>                                  29,0,9,40,23,12,35,56,14,40,57,42,
>                                  5,42,39,39,54,19,52,42,7,28),
>                         died = c(0,0,0,0,
>                                  0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,
>                                  0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,
>                                  0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),
>                         v021 = c(1,1,1,1,
>                                  1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,
>                                  2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,
>                                  3,3,3,3,3,3,3,3,3,3,3,3,3,4,4),
>                         v022 = c("1","1",
>                                  "1","1","1","1","1","1","1","1","1","1",
>                                  "1","1","1","1","1","1","1","1","1",
>                                  "1","1","1","1","1","1","1","1","1",
>                                  "1","1","1","1","1","1","1","1","1","1",
>                                  "1","1","1","1","1","1","1","1","1",
>                                  "1"),
>                         v012 = c(40,37,27,
>                                  27,24,32,35,35,34,20,28,28,26,24,24,
>                                  25,26,26,26,26,28,27,25,25,27,26,
>                                  26,21,21,31,36,36,27,23,32,32,33,33,
>                                  33,28,25,37,33,34,33,28,28,29,33,33),
>                        wt2_1 =
> c(401.200012207031,401.200012207031,401.200012207031,
>                                  401.200012207031,401.200012207031,
>
> 401.200012207031,401.200012207031,401.200012207031,
>
> 401.200012207031,401.200012207031,401.200012207031,
>                                  401.200012207031,401.200012207031,
>
> 401.200012207031,401.200012207031,401.200012207031,
>
> 401.200012207031,401.200012207031,401.200012207031,
>                                  401.200012207031,401.200012207031,
>
> 401.200012207031,401.200012207031,401.200012207031,
>                                  401.200012207031,401.200012207031,
>
> 401.200012207031,401.200012207031,401.200012207031,
>
> 401.200012207031,401.200012207031,401.200012207031,
>                                  401.200012207031,401.200012207031,
>
> 401.200012207031,401.200012207031,401.200012207031,
>                                  401.200012207031,401.200012207031,
>
> 401.200012207031,401.200012207031,401.200012207031,
>
> 401.200012207031,401.200012207031,401.200012207031,
>                                  401.200012207031,401.200012207031,
>
> 401.200012207031,401.200012207031,401.200012207031),
>                        wt1_1 =
> c(2.5074667930603,2.5074667930603,2.5074667930603,
>
> 2.5074667930603,2.5074667930603,2.5074667930603,
>
> 2.5074667930603,2.5074667930603,2.5074667930603,
>                                  2.5074667930603,2.5074667930603,
>
> 2.5074667930603,2.5074667930603,2.5074667930603,
>
> 2.5074667930603,5.1194109916687,5.1194109916687,
>
> 5.1194109916687,5.1194109916687,5.1194109916687,
>                                  5.1194109916687,5.1194109916687,
>
> 5.1194109916687,5.1194109916687,5.1194109916687,
>
> 5.1194109916687,5.1194109916687,5.1194109916687,
>
> 5.1194109916687,5.1194109916687,5.1194109916687,
>                                  5.1194109916687,5.1194109916687,
>
> 5.1194109916687,2.40910983085632,2.40910983085632,
>
> 2.40910983085632,2.40910983085632,2.40910983085632,
>                                  2.40910983085632,2.40910983085632,
>
> 2.40910983085632,2.40910983085632,2.40910983085632,
>
> 2.40910983085632,2.40910983085632,2.40910983085632,
>                                  2.40910983085632,1.06203985214233,
>                                  1.06203985214233),
>                         v024 = c("1","1",
>                                  "1","1","1","1","1","1","1","1","1","1",
>                                  "1","1","1","1","1","1","1","1","1",
>                                  "1","1","1","1","1","1","1","1","1",
>                                  "1","1","1","1","1","1","1","1","1","1",
>                                  "1","1","1","1","1","1","1","1","1",
>                                  "1"),
>                         v025 = c("1","1",
>                                  "1","1","1","1","1","1","1","1","1","1",
>                                  "1","1","1","1","1","1","1","1","1",
>                                  "1","1","1","1","1","1","1","1","1",
>                                  "1","1","1","1","1","1","1","1","1","1",
>                                  "1","1","1","1","1","1","1","1","1",
>                                  "1"),
>                      mat_edu = c("5","5",
>                                  "5","4","4","5","4","4","4","4","4","4",
>                                  "5","5","5","5","5","5","4","4","5",
>                                  "4","4","4","5","3","3","4","4","5",
>                                  "5","5","5","4","2","2","0","0","0","5",
>                                  "5","0","1","5","5","3","3","5","5",
>                                  "5")
>                 )
>
> Frailty1 <- coxph (Surv(study_time, died) ~ factor(v024) +
> factor(mat_edu) + v025 + frailty(v021,distribution="gamma"),
> data=rcom1)#> Error in `contrasts<-`(`*tmp*`, value = contr.funs[1 +
> isOF[nn]]): contrasts can be applied only to factors with 2 or more
> levels
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Fri Jan 28 15:39:16 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Fri, 28 Jan 2022 14:39:16 +0000
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <857826239.1688462.1643321937522@mail.yahoo.com>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
 <20220126165313.26db0d5b@Tarkus>
 <CAJhui+s9=zb+MwPF2A=tiJZBdYbvhQaeoG+gbVnW4hPTuem=6Q@mail.gmail.com>
 <0192053a80d24bd4857bb4353f9a7009@SRVEXCHCM1301.precheza.cz>
 <CAJhui+v-G+O+3fir67PqVz8m7q592KjOqaBo5J8QvtsJtrLBSA@mail.gmail.com>
 <992be822fbfd4d759dc1501dfd35018c@SRVEXCHCM1301.precheza.cz>
 <CAGxFJbRbyDqqMNq=+7a7_90Kd89+TWp_Br2Ra=uTZOPivTxDQw@mail.gmail.com>
 <BN6PR2201MB155320F2B9CAD66DC5ED486CCF219@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <CAGxFJbTRqzUSypm-uH-8AuMmn69wkef=dQyJNq5nLmBXran2Hw@mail.gmail.com>
 <BN6PR2201MB155335E0D395B87CEC3F8B6FCF219@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <857826239.1688462.1643321937522@mail.yahoo.com>
Message-ID: <BN6PR2201MB1553DA64D8486232F1B0A391CF229@BN6PR2201MB1553.namprd22.prod.outlook.com>

Thank you Avi and Bert for your comments. As Bert pointed out this is a bit off topic from the original question so I will let this thread die out. Comparing the internal conversion versus as.numeric(), as.integer(), and as.double() is informative in how the computer processes different data types. However, as you point out it is not a concern for small programs or small quantities of data. As you suggest I get a different answer if I compare ifelse(a2,?A?,?B?) versus something like ifelse(a2==TRUE,?A?,?B?) because a little time is lost in the explicit evaluation even when the data type is correct for the task. I had forgotten to consider memory size requirements for different data types (Bert?s comment), so that was a good reminder.

Timothy,

From: Avi Gross <avigross at verizon.net>
Sent: Thursday, January 27, 2022 5:19 PM
To: Ebert,Timothy Aaron <tebert at ufl.edu>; bgunter.4567 at gmail.com
Cc: r-help at r-project.org
Subject: Re: [R] Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed

[External Email]
Timothy,

In reply to what you wrote about a benchmark suggesting some storage formats may make the code run slower, it is not a surprise, given what you chose to benchmark.

You are using a test of a logical variable in a numeric context when you have code like:

    log(a2+0.01)

In order to do the calculation, depending on the internals, you need to convert a2 to at least an integer or perhaps a floating point value such as 1L or 1.0 before adding 0.01 to it.

You are doing the equivalent of:

    log(as.integer(a2)+0.01)

or perhaps:

        log(as.double(a2)+0.01)

The result is some extra work in THAT context. Note I am NOT saying R calls one of those primitive functions, just that the final code does such conversions perhaps at the assembler level or lower.

But consider the opposite context such as in a if(...) statement as in:

    if(a2) {do_this) else {do_that}

If a2 is already a logical data form, it happens rapidly. If a2 is something more complex that can be evaluated in steps into a logical, it takes those steps. As I showed earlier, if a2 was 1 or 666 it would be evaluated to be non-zero and thus converted to TRUE and then the statement would choose do_this, else it would evaluate to FALSE and do do_that.

So the right storage format depends on how you want to use it and how much storage space you are willing to use. On some machines and architectures, they may store a logical value in anything from a bit to a byte to multiple bytes, and on a lower level, it may be expanded as needed to fit into a fixed register on the CPU. In some cases, a natural storage format will be the one that can be used immediately with no boxing or unboxing. But as always, there are tradeoffs to be considered in terms of how many cycles are used (execution time) or other resources like memory in use. In a few cases, it may oddly pay to make two or more copies of a vector in different storage formats and then use the best one for subsequent calculations. Boolean might turn out to be a great choice for indexing into a list or vector or matrix or data.frame, while integer may be great if doing mathematics like multiplication into a structure that only contains integers, and a double version when interacting with such numbers and maybe even versions that are character or complex.

But from a novice perspective, performance is not usually a big concern and especially not for small amounts of data. The only reason this is being discussed is that the question about what went wrong might be hard to figure out without lots more info, while the simple wrok-around might either work fine or tell us more about what might be wrong.


-----Original Message-----
From: Ebert,Timothy Aaron <tebert at ufl.edu<mailto:tebert at ufl.edu>>
To: Bert Gunter <bgunter.4567 at gmail.com<mailto:bgunter.4567 at gmail.com>>
Cc: R-help <r-help at r-project.org<mailto:r-help at r-project.org>>
Sent: Thu, Jan 27, 2022 2:27 pm
Subject: Re: [R] Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed
You did not claim it is faster, but if one is writing large programs or has huge quantities of data then thinking about execution time could be useful.

if(!require(microbenchmark)){install.packages("microbenchmark")}
library(microbenchmark)
a1<-c(1,1,0,1,0,0,0,1,1,0,0,0,0,1,1,1,0,1,1,1,1,0,0,0,1,0,1,0,1,0,0,0,1,1,0,0,1,0,0,0,0,1,1,0,0,1)
a2=as.logical(a1)

microbenchmark(
  {
    log(a1+0.01)
  },
  {
    log(a2+0.01)
  },
  times=100000
)

On my system running the code shows that there is an overhead cost if the logical has to be converted. In this simple code it was a sometimes significant but always a trivial 0.1 microsecond cost. I tried a few other bits of code and the mean and minimum values were always smaller performing numeric operations on a numeric variable. However, it looks like the range in values for a numeric operation on a numeric variable is greater. I don't understand why.

Tim

-----Original Message-----
From: Bert Gunter <bgunter.4567 at gmail.com<mailto:bgunter.4567 at gmail.com>>
Sent: Thursday, January 27, 2022 1:17 PM
To: Ebert,Timothy Aaron <tebert at ufl.edu<mailto:tebert at ufl.edu>>
Cc: PIKAL Petr <petr.pikal at precheza.cz<mailto:petr.pikal at precheza.cz>>; R-help <r-help at r-project.org<mailto:r-help at r-project.org>>
Subject: Re: [R] Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed

[External Email]

I did not claim it is faster -- and in fact I doubt that it makes any real difference. Just simpler, imo. I also think that the logical vector would serve equally in any situation in most cases where arithmetic 0/1 coding is used -- even arithmetic ops and comparisons:
> TRUE + 2
[1] 3
> TRUE > .5
[1] TRUE
(?'+' has details)
I would appreciate someone responding with a nontrivial counterexample to this claim if they have one, other than the sort of thing shown in the ?logical example involving conversion to character:

## logical interpretation of particular strings
charvec <- c("FALSE", "F", "False", "false",    "fAlse", "0",
            "TRUE",  "T", "True",  "true",    "tRue",  "1")
as.logical(charvec)

## factors are converted via their levels, so string conversion is used
as.logical(factor(charvec))
as.logical(factor(c(0,1)))  # "0" and "1" give NA

(I mean of course purely internal R code, not export of data to an external application).


Bert Gunter

"The trouble with having an open mind is that people keep coming along and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip ) On Thu, Jan 27, 2022 at 8:12 AM Ebert,Timothy Aaron <tebert at ufl.edu<mailto:tebert at ufl.edu>> wrote:
>
> One could use the microbenchmark package to compare which approach is faster, assuming the dataset is large enough that the outcome will make a measurable difference.
>

	[[alternative HTML version deleted]]


From J@me@@Burn@ @end|ng |rom @pp|ebee@@com  Thu Jan 27 21:25:23 2022
From: J@me@@Burn@ @end|ng |rom @pp|ebee@@com (James Burns)
Date: Thu, 27 Jan 2022 20:25:23 +0000
Subject: [R] 4.1.2 and 4.1.2 Patched internet dll issues on Lenovo Laptop. 2
 out of 2 had issues Update 01/27 at 12:23PM PST
Message-ID: <DM6PR05MB41384E221289E8E18109F846EA219@DM6PR05MB4138.namprd05.prod.outlook.com>

Hi Team,

Following up. Two out of two Lenovos at my work have the same dll issue.  However, my Origin laptop had no issue with the dll and 4.1.2 is working just fine. So, is there something different in the updated dll which would affect certain manufacturers?

Thanks Again,
James Burns

From: James Burns
Sent: Friday, January 21, 2022 10:43 AM
To: r-help at R-project.org
Subject: 4.1.2 and 4.1.2 Patched internet dll issues on Lenovo Laptop Update 10AM PST

Hi Team,

It is definitely the dll issue. I copied the 4.1.1 x64 internet dll to the 4.1.2 patched location and R & RStudio were able to connect to Cran. Please repair the dll's in your download location.

Thank You,
James Burns
The contents of this e-mail message and any attachments are intended solely for the addressee(s) and may contain confidential and/or legally privileged information. If you are not the intended recipient of this message or if this message has been addressed to you in error, please immediately alert the sender by reply e-mail and then delete this message and any attachments. If you are not the intended recipient, you are notified that any use, dissemination, distribution, copying, or storage of this message or any attachment is strictly prohibited.

	[[alternative HTML version deleted]]


From @te|@no@me@ch|@r| @end|ng |rom gm@||@com  Thu Jan 27 23:45:54 2022
From: @te|@no@me@ch|@r| @end|ng |rom gm@||@com (Stefano Meschiari)
Date: Thu, 27 Jan 2022 14:45:54 -0800
Subject: [R] [R-pkgs] latex2exp 0.9.0: Use LaTeX Expressions in Plots
Message-ID: <CAMcXZtE84BN-Nbn_e6bm-w-UJUSjzVxC9Q7at4mkh72dzHUWDg@mail.gmail.com>

Dear R users,

latex2exp is an R package to use a subset of LaTeX to create formatted
text and mathematical formulas and symbols. It can be used for axis
labels, annotations, legends, titles, etc. throughout R?s plotting
system and ggplot2.

A call to TeX() such as `TeX(r"(\textbf{Euler's identity} is $e^{i\pi}
+ 1 = 0$.)")` will return an expression containing the formatted text
and equation, suitable for plotting. latex2exp works by parsing the
provided LaTeX string and converting it to R's plotmath expressions.

A new major version of latex2exp (0.9.0), containing a rewritten
parser, tens of new commands and symbols, and many bug fixes, is now
available on CRAN:
https://cran.r-project.org/package=latex2exp

A website for the package, with examples, vignettes, and a searchable
table of supported LaTeX commands, is available at:
https://stefano-meschiari.github.io/latex2exp

Finally, issues should be reported at:
https://github.com/stefano-meschiari/latex2exp/

Best regards,
Stefano
-- 
Stefano Meschiari
http://www.stefanom.io

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From c@r| @end|ng |rom w|ttho|t@com  Fri Jan 28 20:46:35 2022
From: c@r| @end|ng |rom w|ttho|t@com (Carl Witthoft)
Date: Fri, 28 Jan 2022 14:46:35 -0500
Subject: [R] R CMD BUILD converting data file format?
Message-ID: <acad7f0e-cf86-fcdc-aef2-44d16403b14d@witthoft.com>

When I run the shell command

R CMD BUILD mypackage

the builder converts *.R files to *.rda data files.  This seems to 
conflict with the information in R-Exts which says a package's  /data 
directory can contain  foo.R files which the function data() will call 
source() to execute.
In my case, I have a  foo.R file in the /data directory which contains 
the following (adapted for size and clarity:


# some comment text
dataA <- '3.1415'
# more comments
dataB <- '2.71828'

The builder converted foo.R to foo.rda, and when I use either data() or 
load() all I get is  a char vector containing the text

[1] 'dataA'
[2] 'dataB'

Where did I go wrong?

thanks

-- 
Carl Witthoft
carl at witthoft.com


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Jan 28 21:23:16 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 28 Jan 2022 12:23:16 -0800
Subject: [R] R CMD BUILD converting data file format?
In-Reply-To: <acad7f0e-cf86-fcdc-aef2-44d16403b14d@witthoft.com>
References: <acad7f0e-cf86-fcdc-aef2-44d16403b14d@witthoft.com>
Message-ID: <2B92AF28-0750-41E5-BB95-9E14EE865C61@dcn.davis.ca.us>

I am not aware of R files being converted to rda... I generate an rda file and put it into the data directory myself. However, like most of the participants on this list, I do not claim particular expertise in building packages... that topic is what the R-package-devel list mentioned in the Posting Guide is for (hint).

On January 28, 2022 11:46:35 AM PST, Carl Witthoft <carl at witthoft.com> wrote:
>When I run the shell command
>
>R CMD BUILD mypackage
>
>the builder converts *.R files to *.rda data files.  This seems to 
>conflict with the information in R-Exts which says a package's  /data 
>directory can contain  foo.R files which the function data() will call 
>source() to execute.
>In my case, I have a  foo.R file in the /data directory which contains 
>the following (adapted for size and clarity:
>
>
># some comment text
>dataA <- '3.1415'
># more comments
>dataB <- '2.71828'
>
>The builder converted foo.R to foo.rda, and when I use either data() or 
>load() all I get is  a char vector containing the text
>
>[1] 'dataA'
>[2] 'dataB'
>
>Where did I go wrong?
>
>thanks
>

-- 
Sent from my phone. Please excuse my brevity.


From r@turner @end|ng |rom @uck|@nd@@c@nz  Fri Jan 28 22:16:12 2022
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Sat, 29 Jan 2022 10:16:12 +1300
Subject: [R] unbalanced design in multifactor anova....
In-Reply-To: <PU4P216MB1568487413F5290B56E788AFC85C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156892BEAC0E50F88FB85CD2C8589@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <9EB64A60-A73B-4A0D-982D-6F202D915709@gmail.com>
 <PU4P216MB1568487413F5290B56E788AFC85C9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <20220129101612.30149a44@rolf-Latitude-E7470>


On Sat, 22 Jan 2022 11:56:14 +0000
akshay kulkarni <akshay_e4 at hotmail.com> wrote:

> dear members,
>                          Thanks Peter, Bert, Rolf and Terry. Regrets
> to reply this late.
> 
> iF you say that balancedness is not required for lm, I think there is
> some inconsistency. The coded vectors can still be correlated and
> unless lm handles it with some trick, aov and lm are essentially the
> same. I even came to know that aov calls lm internally! Moroevr, can
> you please give me  a reference that explains how exactly lm handles
> semipartial correlations (if at all it does).

It doesn't.  They don't need to be "handled".

> I am just curious.
> 
> Moroever, If I drop some elements to make my data balanced, will the
> results (from aov and lm) be reliable, i.e makes the correct
> inference about my sample?

Generally not a great idea.  Dropping data means that you are throwing
away information.  The conclusions from your analysis will of course, in
general, depend on what data you drop.

You are imagining/creating difficulties that do not actually exist.

(1) The predictors will indeed be correlated (non-orthogonal) if the
design is unbalanced.  So what?

(2) aov() produces output that relates to a sequence of hypothesis
tests.  If the design is unbalanced some of these tests are not
meaningful.  Actually some of them are not really meaningful (or at
least are confusing to interpret) even if the design *is* balanced.

(3) Decide what null hypothesis you wish to test, and what alternative
hypothesis you wish to test it against.  Fit the null (getting, say,
fit0) and the alternative model (getting, say, fit1), using lm().

Then do anova(fit0,fit1).  Simple as that.

The hard part is of course deciding on your hypotheses.  This requires
that you think!  And that you actually understand what problem you
are trying to solve.

Analysis of variance can be a subtle concept.  Some insight into the
subtleties might be obtained by reading Bill Venables' paper:

    http://www.stats.ox.ac.uk/pub/MASS3/Exegeses.pdf

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From c@r| @end|ng |rom w|ttho|t@com  Fri Jan 28 22:57:47 2022
From: c@r| @end|ng |rom w|ttho|t@com (Carl Witthoft)
Date: Fri, 28 Jan 2022 16:57:47 -0500
Subject: [R] R CMD BUILD converting data file format?
In-Reply-To: <2B92AF28-0750-41E5-BB95-9E14EE865C61@dcn.davis.ca.us>
References: <acad7f0e-cf86-fcdc-aef2-44d16403b14d@witthoft.com>
 <2B92AF28-0750-41E5-BB95-9E14EE865C61@dcn.davis.ca.us>
Message-ID: <300df8d3-254e-3d58-df1f-992ff00df8fa@witthoft.com>

Never mind; I had a brain cramp and confused the value returned from 
data() with the actions taken.  My data objects were properly loaded 
into my environment.

Apologies to this list.

Carl

On 1/28/22 3:23 PM, Jeff Newmiller wrote:
> I am not aware of R files being converted to rda... I generate an rda file and put it into the data directory myself. However, like most of the participants on this list, I do not claim particular expertise in building packages... that topic is what the R-package-devel list mentioned in the Posting Guide is for (hint).
> 
> On January 28, 2022 11:46:35 AM PST, Carl Witthoft <carl at witthoft.com> wrote:
>> When I run the shell command
>>
>> R CMD BUILD mypackage
>>
>> the builder converts *.R files to *.rda data files.  This seems to
>> conflict with the information in R-Exts which says a package's  /data
>> directory can contain  foo.R files which the function data() will call
>> source() to execute.
>> In my case, I have a  foo.R file in the /data directory which contains
>> the following (adapted for size and clarity:
>>
>>
>> # some comment text
>> dataA <- '3.1415'
>> # more comments
>> dataB <- '2.71828'
>>
>> The builder converted foo.R to foo.rda, and when I use either data() or
>> load() all I get is  a char vector containing the text
>>
>> [1] 'dataA'
>> [2] 'dataB'
>>
>> Where did I go wrong?
>>
>> thanks
>>
> 

-- 
Carl Witthoft
carl at witthoft.com
resume: https://app.box.com/file/498153801347


From @v|gro@@ @end|ng |rom ver|zon@net  Fri Jan 28 19:30:39 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Fri, 28 Jan 2022 18:30:39 +0000 (UTC)
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <CAJhui+u+WPCH9wdZVusNeRsxFhVvZBGY-KpL+VW-1VKbs0F2Jg@mail.gmail.com>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
 <20220126165313.26db0d5b@Tarkus>
 <CAJhui+s9=zb+MwPF2A=tiJZBdYbvhQaeoG+gbVnW4hPTuem=6Q@mail.gmail.com>
 <0192053a80d24bd4857bb4353f9a7009@SRVEXCHCM1301.precheza.cz>
 <CAJhui+v-G+O+3fir67PqVz8m7q592KjOqaBo5J8QvtsJtrLBSA@mail.gmail.com>
 <992be822fbfd4d759dc1501dfd35018c@SRVEXCHCM1301.precheza.cz>
 <CAGxFJbRbyDqqMNq=+7a7_90Kd89+TWp_Br2Ra=uTZOPivTxDQw@mail.gmail.com>
 <CAJhui+s_iCRia-aoHmZPvF8zycnxrx7vqhfZzvRXHqyvQUxjUg@mail.gmail.com>
 <1878056848.1692524.1643320671590@mail.yahoo.com>
 <CAJhui+u+WPCH9wdZVusNeRsxFhVvZBGY-KpL+VW-1VKbs0F2Jg@mail.gmail.com>
Message-ID: <491148109.1548194.1643394639680-4060@mail.yahoo.com>


Javed,
Your explanation allows many other ways to look at the problem.?

Some of them skip steps and get to the point faster. Of course, I do not know what exactly you mean by the "fairness object" other than guessing it does an evaluation of what you supply and lets you know if it is fair.

For something categorical like gender it used to be easy to use the table() function to show how many of each category you have. Of course, it now seems that old assumptions about two genders are being replaced by additional choices so it may literally be nonbinary.

Your code looked for 'T14' which gives no clue about purpose. Here is an example where I coded the words "male" and "female" in a small sample for illustration. You can leave the data as is and have it automatically count or take percentages and then extract whatever you want and use it to make decisions.

The darn HTML stripper this list uses makes showing code hard, so I have to disperse it with extra spacing.
Here is some data:
gender <- c("male", "female", "female", "male", "female", "female", "female")

I made it lopsided and you can see the counts easily enough with:

? ?tab.cnt <- table(gender)


The output is:
> tab.cnt
genderfemale? ?male?? ? ?5? ? ? 2?

You can of course get percentages using the table object:

? ?tab.prcnt <- prop.table(tab.cnt)

The output is:

> tab.prcnt
gender? ?female? ? ? male?0.7142857 0.2857143?
You can, of course, multiply the above by a hundred and use round() to trim it to fewer digits, but what you can do is extract the numbers to do things like a comparison:
Consider deciding that more than 60% females is too much:

if (tab.prcnt[["female"]] > 0.6)? print("too many women")

Your criteria may of course be more complicated, but the thing I am teaching is that there are built-in methods that may be used as you get to know not only the language but techniques that work well with it. Your need may work well with your technique of converting your data representation from one form to a numeric form. Realistically, many might simply use another built-in feature called factors. Converting my data to a factor does this:

> fact <- factor(gender)> fact[1] male? ?female female male? ?female female femaleLevels: female male> as.numeric(fact)[1] 2 1 1 2 1 1 1

The default is to use integers starting with 1 but you can change that in many ways, or in the above, simply subtract 1 to get what you want. To get the percentage of men in the above, can be something like this:

> mean(as.numeric(fact) - 1)[1] 0.2857143

You may get lots of advice on many methods and ways to do things but pick what fits your situation and sometimes you can try to change the situation. For some purposes, categorical data needs to be transformed for proper use in something like machine learning algorithms but sometimes it can be left alone as shown above and the statistics can be worked with.?
From: javed khan <javedbtk111 at gmail.com>
To: Avi Gross <avigross at verizon.net>
Cc: r-help at r-project.org <r-help at r-project.org>
Sent: Fri, Jan 28, 2022 8:34 am
Subject: Re: Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed

Avi Gross, thanks for your reply.?
I have no interest of using the zero and one in my code, I mean true false can also be ok because I don't have to do some arithmetic with it.?
I just want to pass a protected variable and one of its (privileged) value to the fairness object to see if the model has any bias towards the unprivileged values of the protected variable.?
You can consider my protected variable as Sex and it's values as male and female. I want the fairness object to see if there is any bias towards the female group which could be considered as an unprivileged group.?


Thanks

On Thursday, January 27, 2022, Avi Gross via R-help <r-help at r-project.org> wrote:


Javed,
You may misunderstand something here.
Forget ifelse() which does all kinds of things (which you can see by just typing "ifelse" and a carriage/return or ENTER.
Your initial goal should be kept in mind. You want to create a data structure, in this case a vector, that is the same length as another vector called test$operator in which you mark whether the corresponding element was exactly "T13" or not.
There is nothing fundamentally wrong with your approach albeit it is overkill in this case. As has been pointed out, SKIPPING ifelse() entirely, you can get a vector of Logicals (TRUE or FALSE) by a simple command like this:
? ? result <-?test$operator == 'T13'
For many purposes, that is all you need. TRUE and FALSE are also sometimes mapped into 1 and 0 for various purposes, so you can convert them into integers or general numerics is that is needed. Consider the following code that checks the integers from 1 to 7 to see if they are even (as in divisible by 2):

> result <- 1:7 %% 2 == 0> result[1] FALSE? TRUE FALSE? TRUE FALSE? TRUE FALSE> as.integer(result)[1] 0 1 0 1 0 1 0> as.numeric(result)[1] 0 1 0 1 0 1 0> result <- as.integer(1:7 %% 2 == 0)> result[1] 0 1 0 1 0 1 0

If for some reason the choice of 1 and 0 is the opposite of what you need, you can invert them several ways with the simplest being:

? ??as.integer(1:7 %% 2 != 0)
or? ??as.integer(!(1:7 %% 2 != 0))

The first negates the comparison and the second just flips every FALSE and TRUE to the other.
Why are we talking about this? For many more interesting cases, ifelse() is great as you can replace one or both of the choices with anything. A very common case is replacing one choice with itself and changing the other, or nesting the comparisons in a sort of simulated tree as in?
?? ?ifelse(some_condition,? ? ? ?ifelse(second_condition, result1, result2),? ? ? ? ?ifelse(third_condition, result3, result4)))

But you seem to want the simplest return of two values that also happen to be the underlying equivalent of TRUE and FALSE in many languages. In Python, anything that evaluates to zero (or the Boolean value FALSE) tends?to be treated as FALSE, and anything else like a 1 or 666 is treated as TRUE, as shown below:

> if (TRUE) print("TRUE") else print("FALSE")[1] "TRUE"> if (1) print("TRUE") else print("FALSE")[1] "TRUE"> if (666) print("TRUE") else print("FALSE")[1] "TRUE"> if (FALSE) print("TRUE") else print("FALSE")[1] "FALSE"> if (0) print("TRUE") else print("FALSE")[1] "FALSE"

This is why you are being told that for many purposes, the Boolean vector may work fine. But if you really want or need zero and one, that is a trivial transformation as shown. Feel free to use ifelse() and then figure out what went wrong with your code, but also to try the simpler version and see if the problem goes away.
Avi
-----Original Message-----
From: javed khan <javedbtk111 at gmail.com>
To: Bert Gunter <bgunter.4567 at gmail.com>
Cc: R-help <r-help at r-project.org>
Sent: Thu, Jan 27, 2022 1:15 pm
Subject: Re: [R] Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed

Thank you Bert Gunter

Do you mean I should do something like this:

prot <- (as.numeric(ifelse(test$ operator == 'T13', 1, 0))





	[[alternative HTML version deleted]]


From @v|gro@@ @end|ng |rom ver|zon@net  Fri Jan 28 19:30:39 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Fri, 28 Jan 2022 18:30:39 +0000 (UTC)
Subject: [R] 
 Error in if (fraction <= 1) { : missing value where TRUE/FALSE
 needed
In-Reply-To: <CAJhui+u+WPCH9wdZVusNeRsxFhVvZBGY-KpL+VW-1VKbs0F2Jg@mail.gmail.com>
References: <CAJhui+tgnDHRQuJ9L6UxpxwHG8KWMbMysZkQ3Ve3UdxyVtZx0A@mail.gmail.com>
 <20220126165313.26db0d5b@Tarkus>
 <CAJhui+s9=zb+MwPF2A=tiJZBdYbvhQaeoG+gbVnW4hPTuem=6Q@mail.gmail.com>
 <0192053a80d24bd4857bb4353f9a7009@SRVEXCHCM1301.precheza.cz>
 <CAJhui+v-G+O+3fir67PqVz8m7q592KjOqaBo5J8QvtsJtrLBSA@mail.gmail.com>
 <992be822fbfd4d759dc1501dfd35018c@SRVEXCHCM1301.precheza.cz>
 <CAGxFJbRbyDqqMNq=+7a7_90Kd89+TWp_Br2Ra=uTZOPivTxDQw@mail.gmail.com>
 <CAJhui+s_iCRia-aoHmZPvF8zycnxrx7vqhfZzvRXHqyvQUxjUg@mail.gmail.com>
 <1878056848.1692524.1643320671590@mail.yahoo.com>
 <CAJhui+u+WPCH9wdZVusNeRsxFhVvZBGY-KpL+VW-1VKbs0F2Jg@mail.gmail.com>
Message-ID: <491148109.1548194.1643394639680-7853@mail.yahoo.com>


Javed,
Your explanation allows many other ways to look at the problem.?

Some of them skip steps and get to the point faster. Of course, I do not know what exactly you mean by the "fairness object" other than guessing it does an evaluation of what you supply and lets you know if it is fair.

For something categorical like gender it used to be easy to use the table() function to show how many of each category you have. Of course, it now seems that old assumptions about two genders are being replaced by additional choices so it may literally be nonbinary.

Your code looked for 'T14' which gives no clue about purpose. Here is an example where I coded the words "male" and "female" in a small sample for illustration. You can leave the data as is and have it automatically count or take percentages and then extract whatever you want and use it to make decisions.

The darn HTML stripper this list uses makes showing code hard, so I have to disperse it with extra spacing.
Here is some data:
gender <- c("male", "female", "female", "male", "female", "female", "female")

I made it lopsided and you can see the counts easily enough with:

? ?tab.cnt <- table(gender)


The output is:
> tab.cnt
genderfemale? ?male?? ? ?5? ? ? 2?

You can of course get percentages using the table object:

? ?tab.prcnt <- prop.table(tab.cnt)

The output is:

> tab.prcnt
gender? ?female? ? ? male?0.7142857 0.2857143?
You can, of course, multiply the above by a hundred and use round() to trim it to fewer digits, but what you can do is extract the numbers to do things like a comparison:
Consider deciding that more than 60% females is too much:

if (tab.prcnt[["female"]] > 0.6)? print("too many women")

Your criteria may of course be more complicated, but the thing I am teaching is that there are built-in methods that may be used as you get to know not only the language but techniques that work well with it. Your need may work well with your technique of converting your data representation from one form to a numeric form. Realistically, many might simply use another built-in feature called factors. Converting my data to a factor does this:

> fact <- factor(gender)> fact[1] male? ?female female male? ?female female femaleLevels: female male> as.numeric(fact)[1] 2 1 1 2 1 1 1

The default is to use integers starting with 1 but you can change that in many ways, or in the above, simply subtract 1 to get what you want. To get the percentage of men in the above, can be something like this:

> mean(as.numeric(fact) - 1)[1] 0.2857143

You may get lots of advice on many methods and ways to do things but pick what fits your situation and sometimes you can try to change the situation. For some purposes, categorical data needs to be transformed for proper use in something like machine learning algorithms but sometimes it can be left alone as shown above and the statistics can be worked with.?
From: javed khan <javedbtk111 at gmail.com>
To: Avi Gross <avigross at verizon.net>
Cc: r-help at r-project.org <r-help at r-project.org>
Sent: Fri, Jan 28, 2022 8:34 am
Subject: Re: Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed

Avi Gross, thanks for your reply.?
I have no interest of using the zero and one in my code, I mean true false can also be ok because I don't have to do some arithmetic with it.?
I just want to pass a protected variable and one of its (privileged) value to the fairness object to see if the model has any bias towards the unprivileged values of the protected variable.?
You can consider my protected variable as Sex and it's values as male and female. I want the fairness object to see if there is any bias towards the female group which could be considered as an unprivileged group.?


Thanks

On Thursday, January 27, 2022, Avi Gross via R-help <r-help at r-project.org> wrote:


Javed,
You may misunderstand something here.
Forget ifelse() which does all kinds of things (which you can see by just typing "ifelse" and a carriage/return or ENTER.
Your initial goal should be kept in mind. You want to create a data structure, in this case a vector, that is the same length as another vector called test$operator in which you mark whether the corresponding element was exactly "T13" or not.
There is nothing fundamentally wrong with your approach albeit it is overkill in this case. As has been pointed out, SKIPPING ifelse() entirely, you can get a vector of Logicals (TRUE or FALSE) by a simple command like this:
? ? result <-?test$operator == 'T13'
For many purposes, that is all you need. TRUE and FALSE are also sometimes mapped into 1 and 0 for various purposes, so you can convert them into integers or general numerics is that is needed. Consider the following code that checks the integers from 1 to 7 to see if they are even (as in divisible by 2):

> result <- 1:7 %% 2 == 0> result[1] FALSE? TRUE FALSE? TRUE FALSE? TRUE FALSE> as.integer(result)[1] 0 1 0 1 0 1 0> as.numeric(result)[1] 0 1 0 1 0 1 0> result <- as.integer(1:7 %% 2 == 0)> result[1] 0 1 0 1 0 1 0

If for some reason the choice of 1 and 0 is the opposite of what you need, you can invert them several ways with the simplest being:

? ??as.integer(1:7 %% 2 != 0)
or? ??as.integer(!(1:7 %% 2 != 0))

The first negates the comparison and the second just flips every FALSE and TRUE to the other.
Why are we talking about this? For many more interesting cases, ifelse() is great as you can replace one or both of the choices with anything. A very common case is replacing one choice with itself and changing the other, or nesting the comparisons in a sort of simulated tree as in?
?? ?ifelse(some_condition,? ? ? ?ifelse(second_condition, result1, result2),? ? ? ? ?ifelse(third_condition, result3, result4)))

But you seem to want the simplest return of two values that also happen to be the underlying equivalent of TRUE and FALSE in many languages. In Python, anything that evaluates to zero (or the Boolean value FALSE) tends?to be treated as FALSE, and anything else like a 1 or 666 is treated as TRUE, as shown below:

> if (TRUE) print("TRUE") else print("FALSE")[1] "TRUE"> if (1) print("TRUE") else print("FALSE")[1] "TRUE"> if (666) print("TRUE") else print("FALSE")[1] "TRUE"> if (FALSE) print("TRUE") else print("FALSE")[1] "FALSE"> if (0) print("TRUE") else print("FALSE")[1] "FALSE"

This is why you are being told that for many purposes, the Boolean vector may work fine. But if you really want or need zero and one, that is a trivial transformation as shown. Feel free to use ifelse() and then figure out what went wrong with your code, but also to try the simpler version and see if the problem goes away.
Avi
-----Original Message-----
From: javed khan <javedbtk111 at gmail.com>
To: Bert Gunter <bgunter.4567 at gmail.com>
Cc: R-help <r-help at r-project.org>
Sent: Thu, Jan 27, 2022 1:15 pm
Subject: Re: [R] Error in if (fraction <= 1) { : missing value where TRUE/FALSE needed

Thank you Bert Gunter

Do you mean I should do something like this:

prot <- (as.numeric(ifelse(test$ operator == 'T13', 1, 0))





	[[alternative HTML version deleted]]


From v@|kremk @end|ng |rom gm@||@com  Sat Jan 29 04:08:11 2022
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Fri, 28 Jan 2022 21:08:11 -0600
Subject: [R] Row exclude
Message-ID: <CAJOiR6a7-foEUSQD9yGM2ym6jTA+f4maY=pcRjy_4J+Yq4TvxA@mail.gmail.com>

Hi All,

I want to remove rows that contain a character string in an integer
column or a digit in a character column.

Sample data

dat1 <-read.table(text="Name, Age, Weight
 Alex,  20,  13X
 Bob,   25,  142
 Carol, 24,  120
 John,  3BC,  175
 Katy,  35,  160
 Jack3, 34,  140",sep=",",header=TRUE,stringsAsFactors=F)

If the Age/Weight column contains any character(s) then remove
if the Name  column contains an digit then remove that row
Desired output

   Name   Age weight
1   Bob     25    142
2   Carol   24    120
3   Katy    35    160

Thank you,


From @v|gro@@ @end|ng |rom ver|zon@net  Sat Jan 29 04:25:09 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Sat, 29 Jan 2022 03:25:09 +0000 (UTC)
Subject: [R] Row exclude
In-Reply-To: <CAJOiR6a7-foEUSQD9yGM2ym6jTA+f4maY=pcRjy_4J+Yq4TvxA@mail.gmail.com>
References: <CAJOiR6a7-foEUSQD9yGM2ym6jTA+f4maY=pcRjy_4J+Yq4TvxA@mail.gmail.com>
Message-ID: <1201305743.1948200.1643426709428@mail.yahoo.com>

You may need a few more steps than that, Val.

I commend you for stating your need clearly and showing a reasonable set of test data and spelling out the expected result.


If your data is polluted the way you describe, then read.table() likely will treat those columns as character and not numeric. In your example you want to recognize "13X" as having an X. Similarly "3BC" has a B. Those two columns can be handled by the same technique and later made numeric. You seem to want any numerals in the first column to disqualify it too.

So consider what techniques you have learned and thus what you are allowed to do for such an assignment. Unless we know otherwise, we may assume this is homework of some sort.

We, reading this, have no idea what parts of basic R you can use and I hope nobody jumps in offering tidyverse packages.

So ask yourself how to create one of dozens of ways to make a copy of your data that includes only rows where column 1 follows the rule of containing no digits between 0 and 9. You can use things that say count characters of some kind and compare it to the length of the item, for example. You might use regular expressions. Whatever you do, should remove your sixth row in the example and nothing else.

Can you now take the result and shorten it by removing anything in column 2 using some new technique that shows if there are one or more letters? An example might be to try converting the value to an integer and back to character and seeing if they match. Again, lots of possibilities but you need only one that works.

Can you take that shorter version and repeat pretty much the same filter on column 3?

That should work and if ambitious, you can even find a way to create a compound filter that does all three columns at once.



-----Original Message-----
From: Val <valkremk at gmail.com>
To: r-help at R-project.org (r-help at r-project.org) <r-help at r-project.org>
Sent: Fri, Jan 28, 2022 10:08 pm
Subject: [R] Row exclude

Hi All,

I want to remove rows that contain a character string in an integer
column or a digit in a character column.

Sample data

dat1 <-read.table(text="Name, Age, Weight
 Alex,? 20,? 13X
 Bob,? 25,? 142
 Carol, 24,? 120
 John,? 3BC,? 175
 Katy,? 35,? 160
 Jack3, 34,? 140",sep=",",header=TRUE,stringsAsFactors=F)

If the Age/Weight column contains any character(s) then remove
if the Name? column contains an digit then remove that row
Desired output

? Name? Age weight
1? Bob? ? 25? ? 142
2? Carol? 24? ? 120
3? Katy? ? 35? ? 160

Thank you,

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jan 29 06:58:29 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 28 Jan 2022 21:58:29 -0800
Subject: [R] Row exclude
In-Reply-To: <CAJOiR6a7-foEUSQD9yGM2ym6jTA+f4maY=pcRjy_4J+Yq4TvxA@mail.gmail.com>
References: <CAJOiR6a7-foEUSQD9yGM2ym6jTA+f4maY=pcRjy_4J+Yq4TvxA@mail.gmail.com>
Message-ID: <CAGxFJbRQDfLf=UJPnFi-TRKvYfAHsr4YfriPh5=oEAOy4d=F2g@mail.gmail.com>

As character 'polluted' entries will cause a column to be read in (via
read.table and relatives) as factor or character data, this sounds like a
job for regular expressions. If you are not familiar with this subject,
time to learn. And, yes, some heavy lifting will be required.
See ?regexp for a start maybe? Or the stringr package?

Cheers,
Bert




On Fri, Jan 28, 2022, 7:08 PM Val <valkremk at gmail.com> wrote:

> Hi All,
>
> I want to remove rows that contain a character string in an integer
> column or a digit in a character column.
>
> Sample data
>
> dat1 <-read.table(text="Name, Age, Weight
>  Alex,  20,  13X
>  Bob,   25,  142
>  Carol, 24,  120
>  John,  3BC,  175
>  Katy,  35,  160
>  Jack3, 34,  140",sep=",",header=TRUE,stringsAsFactors=F)
>
> If the Age/Weight column contains any character(s) then remove
> if the Name  column contains an digit then remove that row
> Desired output
>
>    Name   Age weight
> 1   Bob     25    142
> 2   Carol   24    120
> 3   Katy    35    160
>
> Thank you,
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From dc@r|@on @end|ng |rom t@mu@edu  Sat Jan 29 07:30:42 2022
From: dc@r|@on @end|ng |rom t@mu@edu (David Carlson)
Date: Sat, 29 Jan 2022 00:30:42 -0600
Subject: [R] Row exclude
In-Reply-To: <CAGxFJbRQDfLf=UJPnFi-TRKvYfAHsr4YfriPh5=oEAOy4d=F2g@mail.gmail.com>
References: <CAJOiR6a7-foEUSQD9yGM2ym6jTA+f4maY=pcRjy_4J+Yq4TvxA@mail.gmail.com>
 <CAGxFJbRQDfLf=UJPnFi-TRKvYfAHsr4YfriPh5=oEAOy4d=F2g@mail.gmail.com>
Message-ID: <CAE-dL2rT5RO-KTQXY-jOvyOaqmuNviSHAS+5ZvPwvd8-e-uBJg@mail.gmail.com>

Given that you know which columns should be numeric and which should be
character, finding characters in numeric columns or numbers in character
columns is not difficult. Your data frame consists of three character
columns so you can use regular expressions as Bert mentioned. First you
should strip the whitespace out of your data:

dat1 <-read.table(text="Name, Age, Weight
  Alex,  20,  13X
  Bob,  25,  142
  Carol, 24,  120
  John,  3BC,  175
  Katy,  35,  160
  Jack3, 34,  140",sep=",", header=TRUE, stringsAsFactors=FALSE,
strip.white=TRUE)

Now check to see if all of the fields are character as expected.

sapply(dat1, typeof)
#        Name         Age      Weight
# "character" "character" "character"

Now identify character variables containing numbers and numeric variables
containing characters:

BadName <- which(grepl("[[:digit:]]", dat1$Name))
BadAge <- which(grepl("[[:alpha:]]", dat1$Age))
BadWeight <- which(grepl("[[:alpha:]]", dat1$Weight))

Next remove those rows:

(dat2 <- dat1[-unique(c(BadName, BadAge, BadWeight)), ])
#    Name Age Weight
#  2   Bob  25    142
#  3 Carol  24    120
#  5  Katy  35    160

You still need to convert Age and Weight to numeric, e.g. dat2$Age <-
as.numeric(dat2$Age).

David Carlson


On Fri, Jan 28, 2022 at 11:59 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> As character 'polluted' entries will cause a column to be read in (via
> read.table and relatives) as factor or character data, this sounds like a
> job for regular expressions. If you are not familiar with this subject,
> time to learn. And, yes, ZjQcmQRYFpfptBannerStart
> This Message Is From an External Sender
> This message came from outside your organization.
> ZjQcmQRYFpfptBannerEnd
>
> As character 'polluted' entries will cause a column to be read in (via
> read.table and relatives) as factor or character data, this sounds like a
> job for regular expressions. If you are not familiar with this subject,
> time to learn. And, yes, some heavy lifting will be required.
> See ?regexp for a start maybe? Or the stringr package?
>
> Cheers,
> Bert
>
>
>
>
> On Fri, Jan 28, 2022, 7:08 PM Val <valkremk at gmail.com> wrote:
>
> > Hi All,
> >
> > I want to remove rows that contain a character string in an integer
> > column or a digit in a character column.
> >
> > Sample data
> >
> > dat1 <-read.table(text="Name, Age, Weight
> >  Alex,  20,  13X
> >  Bob,   25,  142
> >  Carol, 24,  120
> >  John,  3BC,  175
> >  Katy,  35,  160
> >  Jack3, 34,  140",sep=",",header=TRUE,stringsAsFactors=F)
> >
> > If the Age/Weight column contains any character(s) then remove
> > if the Name  column contains an digit then remove that row
> > Desired output
> >
> >    Name   Age weight
> > 1   Bob     25    142
> > 2   Carol   24    120
> > 3   Katy    35    160
> >
> > Thank you,
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
> > PLEASE do read the posting guide
> > https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, seehttps://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$
> and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]


From @v|gro@@ @end|ng |rom ver|zon@net  Sat Jan 29 08:26:08 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Sat, 29 Jan 2022 07:26:08 +0000 (UTC)
Subject: [R] Row exclude
In-Reply-To: <CAE-dL2rT5RO-KTQXY-jOvyOaqmuNviSHAS+5ZvPwvd8-e-uBJg@mail.gmail.com>
References: <CAJOiR6a7-foEUSQD9yGM2ym6jTA+f4maY=pcRjy_4J+Yq4TvxA@mail.gmail.com>
 <CAGxFJbRQDfLf=UJPnFi-TRKvYfAHsr4YfriPh5=oEAOy4d=F2g@mail.gmail.com>
 <CAE-dL2rT5RO-KTQXY-jOvyOaqmuNviSHAS+5ZvPwvd8-e-uBJg@mail.gmail.com>
Message-ID: <283912795.1964467.1643441168736@mail.yahoo.com>

Looks like David decided to supply a detailed answer.
I came up with a very different solution that calculates which row indices to keep using three grep statements and intersecting those to use as an index into the original data.
To each their own


-----Original Message-----
From: David Carlson via R-help <r-help at r-project.org>
To: Bert Gunter <bgunter.4567 at gmail.com>
Cc: r-help at R-project.org (r-help at r-project.org) <r-help at r-project.org>
Sent: Sat, Jan 29, 2022 1:30 am
Subject: Re: [R] Row exclude

Given that you know which columns should be numeric and which should be
character, finding characters in numeric columns or numbers in character
columns is not difficult. Your data frame consists of three character
columns so you can use regular expressions as Bert mentioned. First you
should strip the whitespace out of your data:

dat1 <-read.table(text="Name, Age, Weight
? Alex,? 20,? 13X
? Bob,? 25,? 142
? Carol, 24,? 120
? John,? 3BC,? 175
? Katy,? 35,? 160
? Jack3, 34,? 140",sep=",", header=TRUE, stringsAsFactors=FALSE,
strip.white=TRUE)

Now check to see if all of the fields are character as expected.

sapply(dat1, typeof)
#? ? ? ? Name? ? ? ? Age? ? ? Weight
# "character" "character" "character"

Now identify character variables containing numbers and numeric variables
containing characters:

BadName <- which(grepl("[[:digit:]]", dat1$Name))
BadAge <- which(grepl("[[:alpha:]]", dat1$Age))
BadWeight <- which(grepl("[[:alpha:]]", dat1$Weight))

Next remove those rows:

(dat2 <- dat1[-unique(c(BadName, BadAge, BadWeight)), ])
#? ? Name Age Weight
#? 2? Bob? 25? ? 142
#? 3 Carol? 24? ? 120
#? 5? Katy? 35? ? 160

You still need to convert Age and Weight to numeric, e.g. dat2$Age <-
as.numeric(dat2$Age).

David Carlson


On Fri, Jan 28, 2022 at 11:59 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> As character 'polluted' entries will cause a column to be read in (via
> read.table and relatives) as factor or character data, this sounds like a
> job for regular expressions. If you are not familiar with this subject,
> time to learn. And, yes, ZjQcmQRYFpfptBannerStart
> This Message Is From an External Sender
> This message came from outside your organization.
> ZjQcmQRYFpfptBannerEnd
>
> As character 'polluted' entries will cause a column to be read in (via
> read.table and relatives) as factor or character data, this sounds like a
> job for regular expressions. If you are not familiar with this subject,
> time to learn. And, yes, some heavy lifting will be required.
> See ?regexp for a start maybe? Or the stringr package?
>
> Cheers,
> Bert
>
>
>
>
> On Fri, Jan 28, 2022, 7:08 PM Val <valkremk at gmail.com> wrote:
>
> > Hi All,
> >
> > I want to remove rows that contain a character string in an integer
> > column or a digit in a character column.
> >
> > Sample data
> >
> > dat1 <-read.table(text="Name, Age, Weight
> >? Alex,? 20,? 13X
> >? Bob,? 25,? 142
> >? Carol, 24,? 120
> >? John,? 3BC,? 175
> >? Katy,? 35,? 160
> >? Jack3, 34,? 140",sep=",",header=TRUE,stringsAsFactors=F)
> >
> > If the Age/Weight column contains any character(s) then remove
> > if the Name? column contains an digit then remove that row
> > Desired output
> >
> >? ? Name? Age weight
> > 1? Bob? ? 25? ? 142
> > 2? Carol? 24? ? 120
> > 3? Katy? ? 35? ? 160
> >
> > Thank you,
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
> > PLEASE do read the posting guide
> > https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
> ??? [[alternative HTML version deleted]]
>
> ______________________________________________R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, seehttps://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$
> and provide commented, minimal, self-contained, reproducible code.
>
>

??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Jan 29 09:46:33 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 29 Jan 2022 08:46:33 +0000
Subject: [R] Row exclude
In-Reply-To: <CAE-dL2rT5RO-KTQXY-jOvyOaqmuNviSHAS+5ZvPwvd8-e-uBJg@mail.gmail.com>
References: <CAJOiR6a7-foEUSQD9yGM2ym6jTA+f4maY=pcRjy_4J+Yq4TvxA@mail.gmail.com>
 <CAGxFJbRQDfLf=UJPnFi-TRKvYfAHsr4YfriPh5=oEAOy4d=F2g@mail.gmail.com>
 <CAE-dL2rT5RO-KTQXY-jOvyOaqmuNviSHAS+5ZvPwvd8-e-uBJg@mail.gmail.com>
Message-ID: <13b79865-b914-7e68-6984-eb5337a60d40@sapo.pt>

Hello,

Getting creative, here is another way with mapply.


regex <- list("[[:digit:]]", "[[:alpha:]]", "[[:alpha:]]")

i <- mapply(\(x, r) grepl(r, x), dat1, regex)
dat1[rowSums(i) == 0L, ]

#? Name Age Weight
#2?? Bob ? 25 ?? ?? 142
#3 Carol ? 24?? ? ? 120
#5? Katy?? 35?????? 160


Hope this helps,

Rui Barradas


?s 06:30 de 29/01/2022, David Carlson via R-help escreveu:
> Given that you know which columns should be numeric and which should be
> character, finding characters in numeric columns or numbers in character
> columns is not difficult. Your data frame consists of three character
> columns so you can use regular expressions as Bert mentioned. First you
> should strip the whitespace out of your data:
>
> dat1 <-read.table(text="Name, Age, Weight
>    Alex,  20,  13X
>    Bob,  25,  142
>    Carol, 24,  120
>    John,  3BC,  175
>    Katy,  35,  160
>    Jack3, 34,  140",sep=",", header=TRUE, stringsAsFactors=FALSE,
> strip.white=TRUE)
>
> Now check to see if all of the fields are character as expected.
>
> sapply(dat1, typeof)
> #        Name         Age      Weight
> # "character" "character" "character"
>
> Now identify character variables containing numbers and numeric variables
> containing characters:
>
> BadName <- which(grepl("[[:digit:]]", dat1$Name))
> BadAge <- which(grepl("[[:alpha:]]", dat1$Age))
> BadWeight <- which(grepl("[[:alpha:]]", dat1$Weight))
>
> Next remove those rows:
>
> (dat2 <- dat1[-unique(c(BadName, BadAge, BadWeight)), ])
> #    Name Age Weight
> #  2   Bob  25    142
> #  3 Carol  24    120
> #  5  Katy  35    160
>
> You still need to convert Age and Weight to numeric, e.g. dat2$Age <-
> as.numeric(dat2$Age).
>
> David Carlson
>
>
> On Fri, Jan 28, 2022 at 11:59 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
>> As character 'polluted' entries will cause a column to be read in (via
>> read.table and relatives) as factor or character data, this sounds like a
>> job for regular expressions. If you are not familiar with this subject,
>> time to learn. And, yes, ZjQcmQRYFpfptBannerStart
>> This Message Is From an External Sender
>> This message came from outside your organization.
>> ZjQcmQRYFpfptBannerEnd
>>
>> As character 'polluted' entries will cause a column to be read in (via
>> read.table and relatives) as factor or character data, this sounds like a
>> job for regular expressions. If you are not familiar with this subject,
>> time to learn. And, yes, some heavy lifting will be required.
>> See ?regexp for a start maybe? Or the stringr package?
>>
>> Cheers,
>> Bert
>>
>>
>>
>>
>> On Fri, Jan 28, 2022, 7:08 PM Val <valkremk at gmail.com> wrote:
>>
>>> Hi All,
>>>
>>> I want to remove rows that contain a character string in an integer
>>> column or a digit in a character column.
>>>
>>> Sample data
>>>
>>> dat1 <-read.table(text="Name, Age, Weight
>>>   Alex,  20,  13X
>>>   Bob,   25,  142
>>>   Carol, 24,  120
>>>   John,  3BC,  175
>>>   Katy,  35,  160
>>>   Jack3, 34,  140",sep=",",header=TRUE,stringsAsFactors=F)
>>>
>>> If the Age/Weight column contains any character(s) then remove
>>> if the Name  column contains an digit then remove that row
>>> Desired output
>>>
>>>     Name   Age weight
>>> 1   Bob     25    142
>>> 2   Carol   24    120
>>> 3   Katy    35    160
>>>
>>> Thank you,
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
>>> PLEASE do read the posting guide
>>> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, seehttps://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
>> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$
>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @erv|ce @end|ng |rom @hd@w@on@com  Sat Jan 29 12:09:57 2022
From: @erv|ce @end|ng |rom @hd@w@on@com (Stephen H. Dawson, DSL)
Date: Sat, 29 Jan 2022 06:09:57 -0500
Subject: [R] Row exclude
In-Reply-To: <CAE-dL2rT5RO-KTQXY-jOvyOaqmuNviSHAS+5ZvPwvd8-e-uBJg@mail.gmail.com>
References: <CAJOiR6a7-foEUSQD9yGM2ym6jTA+f4maY=pcRjy_4J+Yq4TvxA@mail.gmail.com>
 <CAGxFJbRQDfLf=UJPnFi-TRKvYfAHsr4YfriPh5=oEAOy4d=F2g@mail.gmail.com>
 <CAE-dL2rT5RO-KTQXY-jOvyOaqmuNviSHAS+5ZvPwvd8-e-uBJg@mail.gmail.com>
Message-ID: <df3d0510-849f-07a3-b795-ccc91cbf8e19@shdawson.com>

David, this is a nice presentation of the resolution.

Good job.


*Stephen Dawson, DSL*
/Executive Strategy Consultant/
Business & Technology
+1 (865) 804-3454
http://www.shdawson.com


On 1/29/22 01:30, David Carlson via R-help wrote:
> Given that you know which columns should be numeric and which should be
> character, finding characters in numeric columns or numbers in character
> columns is not difficult. Your data frame consists of three character
> columns so you can use regular expressions as Bert mentioned. First you
> should strip the whitespace out of your data:
>
> dat1 <-read.table(text="Name, Age, Weight
>    Alex,  20,  13X
>    Bob,  25,  142
>    Carol, 24,  120
>    John,  3BC,  175
>    Katy,  35,  160
>    Jack3, 34,  140",sep=",", header=TRUE, stringsAsFactors=FALSE,
> strip.white=TRUE)
>
> Now check to see if all of the fields are character as expected.
>
> sapply(dat1, typeof)
> #        Name         Age      Weight
> # "character" "character" "character"
>
> Now identify character variables containing numbers and numeric variables
> containing characters:
>
> BadName <- which(grepl("[[:digit:]]", dat1$Name))
> BadAge <- which(grepl("[[:alpha:]]", dat1$Age))
> BadWeight <- which(grepl("[[:alpha:]]", dat1$Weight))
>
> Next remove those rows:
>
> (dat2 <- dat1[-unique(c(BadName, BadAge, BadWeight)), ])
> #    Name Age Weight
> #  2   Bob  25    142
> #  3 Carol  24    120
> #  5  Katy  35    160
>
> You still need to convert Age and Weight to numeric, e.g. dat2$Age <-
> as.numeric(dat2$Age).
>
> David Carlson
>
>
> On Fri, Jan 28, 2022 at 11:59 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
>> As character 'polluted' entries will cause a column to be read in (via
>> read.table and relatives) as factor or character data, this sounds like a
>> job for regular expressions. If you are not familiar with this subject,
>> time to learn. And, yes, ZjQcmQRYFpfptBannerStart
>> This Message Is From an External Sender
>> This message came from outside your organization.
>> ZjQcmQRYFpfptBannerEnd
>>
>> As character 'polluted' entries will cause a column to be read in (via
>> read.table and relatives) as factor or character data, this sounds like a
>> job for regular expressions. If you are not familiar with this subject,
>> time to learn. And, yes, some heavy lifting will be required.
>> See ?regexp for a start maybe? Or the stringr package?
>>
>> Cheers,
>> Bert
>>
>>
>>
>>
>> On Fri, Jan 28, 2022, 7:08 PM Val <valkremk at gmail.com> wrote:
>>
>>> Hi All,
>>>
>>> I want to remove rows that contain a character string in an integer
>>> column or a digit in a character column.
>>>
>>> Sample data
>>>
>>> dat1 <-read.table(text="Name, Age, Weight
>>>   Alex,  20,  13X
>>>   Bob,   25,  142
>>>   Carol, 24,  120
>>>   John,  3BC,  175
>>>   Katy,  35,  160
>>>   Jack3, 34,  140",sep=",",header=TRUE,stringsAsFactors=F)
>>>
>>> If the Age/Weight column contains any character(s) then remove
>>> if the Name  column contains an digit then remove that row
>>> Desired output
>>>
>>>     Name   Age weight
>>> 1   Bob     25    142
>>> 2   Carol   24    120
>>> 3   Katy    35    160
>>>
>>> Thank you,
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
>>> PLEASE do read the posting guide
>>> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, seehttps://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
>> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$
>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From v@|kremk @end|ng |rom gm@||@com  Sat Jan 29 03:20:42 2022
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Fri, 28 Jan 2022 20:20:42 -0600
Subject: [R] Remove
Message-ID: <CAJOiR6aP=s1bDS_JUmLZhQH0MZ+boVMhf4uPpTbbqfdE5o6tAg@mail.gmail.com>

Hi All,

I want  remove row(s) that contains a character string in an integer column
or  a digit in a character column

Sample data
dat1 <-read.table(text="Name, Age, Weight
 Alex,  20,  13X
 Bob,   25,  142
 Carol, 24,  120
 John,  3BC,  175
 Katy,  35,  160
 Jack3, 34,  140",sep=",",header=TRUE,stringsAsFactors=F)

If the Age/Weight column contains any character(s) then remove
if the Name  column contains any  digit then remove that row

Desired output

   Name   Age weight
1   Bob     25    142
2   Carol   24    120
3   Katy    35    160

Thank you,

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Jan 29 14:17:24 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 29 Jan 2022 13:17:24 +0000
Subject: [R] Remove
In-Reply-To: <CAJOiR6aP=s1bDS_JUmLZhQH0MZ+boVMhf4uPpTbbqfdE5o6tAg@mail.gmail.com>
References: <CAJOiR6aP=s1bDS_JUmLZhQH0MZ+boVMhf4uPpTbbqfdE5o6tAg@mail.gmail.com>
Message-ID: <746637d2-9b2c-0b8c-893d-a6cb35986bd1@sapo.pt>

Hello,

This question is repeated [1].

[1] https://stat.ethz.ch/pipermail/r-help/2022-January/473663.html

Rui Barradas

?s 02:20 de 29/01/2022, Val escreveu:
> Hi All,
> 
> I want  remove row(s) that contains a character string in an integer column
> or  a digit in a character column
> 
> Sample data
> dat1 <-read.table(text="Name, Age, Weight
>   Alex,  20,  13X
>   Bob,   25,  142
>   Carol, 24,  120
>   John,  3BC,  175
>   Katy,  35,  160
>   Jack3, 34,  140",sep=",",header=TRUE,stringsAsFactors=F)
> 
> If the Age/Weight column contains any character(s) then remove
> if the Name  column contains any  digit then remove that row
> 
> Desired output
> 
>     Name   Age weight
> 1   Bob     25    142
> 2   Carol   24    120
> 3   Katy    35    160
> 
> Thank you,
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sat Jan 29 17:27:00 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sat, 29 Jan 2022 16:27:00 +0000
Subject: [R] progress of LDA algorithm...
Message-ID: <PU4P216MB1568F966958368EBBF11D034C8239@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

dear members,
                          I want to run LDA(latent Dirichlet allocation) on certain news articles. i have the following questions:


  1.  Is there any way to know the progress of the execution of the LDA algorithm?
  2.  I read in SO that if you have more memory, faster is the execution time of LDA. I am using AWS z1d instance with 48 cores and about 325 GB RAM. I have multiple categories of news, but one of them is much larger than others, containing about 25000 articles. Is it preferable to send those categories individually to different processors, and whether R frees up the memory after running on the smaller categories so that the largest category can run with more memory? Or is it preferable to first run the smaller sets, finish the job, and then run the largest category?

Thanking You,
Yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From @v|gro@@ @end|ng |rom ver|zon@net  Sat Jan 29 19:04:18 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Sat, 29 Jan 2022 18:04:18 +0000 (UTC)
Subject: [R] Row exclude
In-Reply-To: <13b79865-b914-7e68-6984-eb5337a60d40@sapo.pt>
References: <CAJOiR6a7-foEUSQD9yGM2ym6jTA+f4maY=pcRjy_4J+Yq4TvxA@mail.gmail.com>
 <CAGxFJbRQDfLf=UJPnFi-TRKvYfAHsr4YfriPh5=oEAOy4d=F2g@mail.gmail.com>
 <CAE-dL2rT5RO-KTQXY-jOvyOaqmuNviSHAS+5ZvPwvd8-e-uBJg@mail.gmail.com>
 <13b79865-b914-7e68-6984-eb5337a60d40@sapo.pt>
Message-ID: <850706846.2017300.1643479458169@mail.yahoo.com>

There are many creative ways to solve problems and some may get you in trouble if you present them in class while even in some work situations, they may be hard for most to understand, let alone maintain and make changes.
This group is amorphous enough that we have people who want "help" who are new to the language, but also people who know plenty and encounter a new kind of problem, and of course people who want to make use of what they see as free labor.
Rui presented a very interesting idea and I like some aspects. But if presented to most people, they might have to start looking up things.?
But I admit I liked some of the ideas he uses and am adding them to my bag of tricks. Some were overkill for this particular requirement but that also makes them more general and useful.
First, was the use of locale-independent regular expressions like [[:alpha:]] that match any combination of [:lower:] and [:upper:] and thus are not restricted to ASCII characters. Since I do lots of my activities in languages other than English and well might include names with characters not normally found in English, or not even using an overlapping? alphabet, I can easily encounter items in the Name column that might not match [A-Za-z] but will match with [:alpha:].
I don't know if using [:digit:] has benefits over [0-9] and I do note there was no requirement to match more complex numbers than integers so no need to allow periods or scientific notation and so on.
Then there is the use of mapply. The more general version of the problem presented would include a data.frame with any number of columns, where a subset of the columns might need to be checked for conditions that vary across the columns but may include some broad categories of conditions that might be re-used. If all the conditions are regular expression matches you can build, then you can extend the list Rui used to have more items and also include expressions that always match so that some columns are effectively ignored:

? ?regex <- list("[[:digit:]]", "[[:alpha:]]", "[[:alpha:]]", "[.*])


So this generalizes to N columns as long as you supply exactly N patterns in the list, albeit mapply does recycle arguments if needed as in the simplest case where you want all columns checked the same way.
Rui then uses an anonymous function to pass to mapply() and that is a newish feature added recently to R, I think. It was perhaps meant specifically to be used with the new pipe symbol, but can be used anywhere but perhaps not in older versions of R.

? ?\(x, r) grepl(r, x)


I note Rui also uses grepl() which returns a logical vector. I will show my first attempt at the end where I used grep() to return index numbers of matches instead. For this context, though, he made use of the fact that mapply in this case returns a matrix of type logical:
i <- mapply(\(x, r) grepl(r, x), dat1, regex)

> i
? ? ? Name? ?Age Weight[1,] FALSE FALSE? ?TRUE[2,] FALSE FALSE? FALSE[3,] FALSE FALSE? FALSE[4,] FALSE? TRUE? FALSE[5,] FALSE FALSE? FALSE[6,]? TRUE FALSE? FALSE
And since R treats TRUE as 1 and FALSE as 0, then summing the rows gives you a small integer between 0 and the number of columns, inclusive, and only rows with no TRUE in them are wanted for this purpose:

dat1[rowSums(i) == 0L, ]

All I all, nicely done, but not trivial to read without comments, LOL!
And, yes, it could be made even more obscure as a one-liner.
My first attempt was a bit more focused on the specific needs described. I am not sure how the HTML destroyer in this mailing list might wreck it, but I made it a two-statement version that is formatted on multiple lines. An explanation first.
I looked at using grep() on one column at a time to look for what should NOT be there and ask it to invert the answer so it effectively tells me which rows to keep. So it tests column 1 ($Name) to see if it has digits in it and returns FALSE if it finds them which later means toss this row. It returns TRUE if that entry, so far, makes the row valid. But note since I am not using grepl() it does not return TRUE/FALSE at all. Rather it returns index numbers of the ones that now inverted are TRUE. What goes in is a vector of individual items from a column of the data. What goes out is the indices of which ones I want to keep that can be used to index the entire data.frame. Based on the ample data, it returns 1:5 as row 6 has a digit in "Jack3".

? grep("[0-9]", dat1$Name, invert = TRUE)


Similarly, two other grep() statements test if the second and third columns contain any characters in?"[a-zA-Z]" and return a similar index vector if they are OK.
What I would then have are three numeric vectors, not a matrix. Each contains a subset of all the indices:

> grep("[0-9]", dat1$Name, invert = TRUE)[1] 1 2 3 4 5> grep("[a-zA-Z]", dat1$Age, invert = TRUE)[1] 1 2 3 5 6> grep("[a-zA-Z]", dat1$Weight, invert = TRUE)[1] 2 3 4 5 6
This set of data was designed to toss out one of each column so they all are of the same length but need not be. Like Rui, my condition for deciding which rows to keep is that all three of the index vectors have a particular entry. He summed them as logicals, but my choice has small integers so the way I combine them to exclude any not in all three is to use a sort of set intersect method. The one built-in to R only handles two at a time so I nested two calls to intersect but in a more general case, I would use some package (or build my own function) that handles intersecting any number of such items.
Here is the full code, minus the initialization.

rows.keep <-intersect(intersect(grep("[0-9]", dat1$Name, invert = TRUE),? ? ? ? ? ? ? ? ? ? grep("[a-zA-Z]", dat1$Age, invert = TRUE)),? ? ? ? ? grep("[a-zA-Z]", dat1$Weight, invert = TRUE))result <- dat1[rows.keep,]










-----Original Message-----
From: Rui Barradas <ruipbarradas at sapo.pt>
To: David Carlson <dcarlson at tamu.edu>; Bert Gunter <bgunter.4567 at gmail.com>
Cc: r-help at R-project.org (r-help at r-project.org) <r-help at r-project.org>
Sent: Sat, Jan 29, 2022 3:46 am
Subject: Re: [R] Row exclude

Hello,

Getting creative, here is another way with mapply.


regex <- list("[[:digit:]]", "[[:alpha:]]", "[[:alpha:]]")

i <- mapply(\(x, r) grepl(r, x), dat1, regex)
dat1[rowSums(i) == 0L, ]

#? Name Age Weight
#2?? Bob ? 25 ?? ?? 142
#3 Carol ? 24?? ? ? 120
#5? Katy?? 35?????? 160


Hope this helps,

Rui Barradas


?s 06:30 de 29/01/2022, David Carlson via R-help escreveu:
> Given that you know which columns should be numeric and which should be
> character, finding characters in numeric columns or numbers in character
> columns is not difficult. Your data frame consists of three character
> columns so you can use regular expressions as Bert mentioned. First you
> should strip the whitespace out of your data:
>
> dat1 <-read.table(text="Name, Age, Weight
>? ? Alex,? 20,? 13X
>? ? Bob,? 25,? 142
>? ? Carol, 24,? 120
>? ? John,? 3BC,? 175
>? ? Katy,? 35,? 160
>? ? Jack3, 34,? 140",sep=",", header=TRUE, stringsAsFactors=FALSE,
> strip.white=TRUE)
>
> Now check to see if all of the fields are character as expected.
>
> sapply(dat1, typeof)
> #? ? ? ? Name? ? ? ? Age? ? ? Weight
> # "character" "character" "character"
>
> Now identify character variables containing numbers and numeric variables
> containing characters:
>
> BadName <- which(grepl("[[:digit:]]", dat1$Name))
> BadAge <- which(grepl("[[:alpha:]]", dat1$Age))
> BadWeight <- which(grepl("[[:alpha:]]", dat1$Weight))
>
> Next remove those rows:
>
> (dat2 <- dat1[-unique(c(BadName, BadAge, BadWeight)), ])
> #? ? Name Age Weight
> #? 2? Bob? 25? ? 142
> #? 3 Carol? 24? ? 120
> #? 5? Katy? 35? ? 160
>
> You still need to convert Age and Weight to numeric, e.g. dat2$Age <-
> as.numeric(dat2$Age).
>
> David Carlson
>
>
> On Fri, Jan 28, 2022 at 11:59 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
>> As character 'polluted' entries will cause a column to be read in (via
>> read.table and relatives) as factor or character data, this sounds like a
>> job for regular expressions. If you are not familiar with this subject,
>> time to learn. And, yes, ZjQcmQRYFpfptBannerStart
>> This Message Is From an External Sender
>> This message came from outside your organization.
>> ZjQcmQRYFpfptBannerEnd
>>
>> As character 'polluted' entries will cause a column to be read in (via
>> read.table and relatives) as factor or character data, this sounds like a
>> job for regular expressions. If you are not familiar with this subject,
>> time to learn. And, yes, some heavy lifting will be required.
>> See ?regexp for a start maybe? Or the stringr package?
>>
>> Cheers,
>> Bert
>>
>>
>>
>>
>> On Fri, Jan 28, 2022, 7:08 PM Val <valkremk at gmail.com> wrote:
>>
>>> Hi All,
>>>
>>> I want to remove rows that contain a character string in an integer
>>> column or a digit in a character column.
>>>
>>> Sample data
>>>
>>> dat1 <-read.table(text="Name, Age, Weight
>>>? Alex,? 20,? 13X
>>>? Bob,? 25,? 142
>>>? Carol, 24,? 120
>>>? John,? 3BC,? 175
>>>? Katy,? 35,? 160
>>>? Jack3, 34,? 140",sep=",",header=TRUE,stringsAsFactors=F)
>>>
>>> If the Age/Weight column contains any character(s) then remove
>>> if the Name? column contains an digit then remove that row
>>> Desired output
>>>
>>>? ? Name? Age weight
>>> 1? Bob? ? 25? ? 142
>>> 2? Carol? 24? ? 120
>>> 3? Katy? ? 35? ? 160
>>>
>>> Thank you,
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
>>> PLEASE do read the posting guide
>>> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>> ??? [[alternative HTML version deleted]]
>>
>> ______________________________________________R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, seehttps://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
>> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$
>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
> ??? [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Jan 29 19:33:22 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 29 Jan 2022 18:33:22 +0000
Subject: [R] Row exclude
In-Reply-To: <850706846.2017300.1643479458169@mail.yahoo.com>
References: <CAJOiR6a7-foEUSQD9yGM2ym6jTA+f4maY=pcRjy_4J+Yq4TvxA@mail.gmail.com>
 <CAGxFJbRQDfLf=UJPnFi-TRKvYfAHsr4YfriPh5=oEAOy4d=F2g@mail.gmail.com>
 <CAE-dL2rT5RO-KTQXY-jOvyOaqmuNviSHAS+5ZvPwvd8-e-uBJg@mail.gmail.com>
 <13b79865-b914-7e68-6984-eb5337a60d40@sapo.pt>
 <850706846.2017300.1643479458169@mail.yahoo.com>
Message-ID: <943bba92-6045-ff0d-be3c-c5d272c3bb19@sapo.pt>

Hello,

Thanks for the comments, a few others inline.

?s 18:04 de 29/01/2022, Avi Gross escreveu:
> There are many creative ways to solve problems and some may get you in 
> trouble if you present them in class while even in some work situations, 
> they may be hard for most to understand, let alone maintain and make 
> changes.
> 
> This group is amorphous enough that we have people who want "help" who 
> are new to the language, but also people who know plenty and encounter a 
> new kind of problem, and of course people who want to make use of what 
> they see as free labor.
> 
> Rui presented a very interesting idea and I like some aspects. But if 
> presented to most people, they might have to start looking up things.
> 
> But I admit I liked some of the ideas he uses and am adding them to my 
> bag of tricks. Some were overkill for this particular requirement but 
> that also makes them more general and useful.
> 
> First, was the use of locale-independent regular expressions like 
> [[:alpha:]] that match any combination of [:lower:] and [:upper:] and 
> thus are not restricted to ASCII characters. Since I do lots of my 
> activities in languages other than English and well might include names 
> with characters not normally found in English, or not even using an 
> overlapping? alphabet, I can easily encounter items in the Name column 
> that might not match [A-Za-z] but will match with [:alpha:].
> 
> I don't know if using [:digit:] has benefits over [0-9] and I do note 
> there was no requirement to match more complex numbers than integers so 
> no need to allow periods or scientific notation and so on.

Yes, I used locale-independent regular expressions. It's a habit I 
aquired a while ago. It took some time to stop using character ranges 
but once gone I'm more comfortable with the use of classes like 
[:alpha:] and [:digit:].
[After all my native language, (Portuguese) has 
cedillas(ES)/cedilhas(PT) and accented letters].

> 
> Then there is the use of mapply. The more general version of the problem 
> presented would include a data.frame with any number of columns, where a 
> subset of the columns might need to be checked for conditions that vary 
> across the columns but may include some broad categories of conditions 
> that might be re-used. If all the conditions are regular expression 
> matches you can build, then you can extend the list Rui used to have 
> more items and also include expressions that always match so that some 
> columns are effectively ignored:
> 
> 
> regex <- list("[[:digit:]]", "[[:alpha:]]", "[[:alpha:]]", "[.*])
> 
> 
> So this generalizes to N columns as long as you supply exactly N 
> patterns in the list, albeit mapply does recycle arguments if needed as 
> in the simplest case where you want all columns checked the same way.
> 
> Rui then uses an anonymous function to pass to mapply() and that is a 
> newish feature added recently to R, I think. It was perhaps meant 
> specifically to be used with the new pipe symbol, but can be used 
> anywhere but perhaps not in older versions of R.
> 
> 
> \(x, r) grepl(r, x)
> 

No, the new anonymous function wasn't specifically meant to be used with 
the new pipe operator, it was meant to be a short-hand notation for 
anonymous functions and used interchangeably with the old notation.

mapply(\(x, r), etc)
mapply(function(x, r) etc)


> 
> I note Rui also uses grepl() which returns a logical vector. I will show 
> my first attempt at the end where I used grep() to return index numbers 
> of matches instead. For this context, though, he made use of the fact 
> that mapply in this case returns a matrix of type logical:
> 
> i <- mapply(\(x, r) grepl(r, x), dat1, regex)
> 
>> i
> 
>  ? ? ? Name? ?Age Weight
> [1,] FALSE FALSE? ?TRUE
> [2,] FALSE FALSE? FALSE
> [3,] FALSE FALSE? FALSE
> [4,] FALSE? TRUE? FALSE
> [5,] FALSE FALSE? FALSE
> [6,]? TRUE FALSE? FALSE
> 
> And since R treats TRUE as 1 and FALSE as 0, then summing the rows gives 
> you a small integer between 0 and the number of columns, inclusive, and 
> only rows with no TRUE in them are wanted for this purpose:

And rowSums is a fast function.
> 
> 
> dat1[rowSums(i) == 0L, ]
> 
> All I all, nicely done, but not trivial to read without comments, LOL!
> 
> And, yes, it could be made even more obscure as a one-liner.
> 
> My first attempt was a bit more focused on the specific needs described. 
> I am not sure how the HTML destroyer in this mailing list might wreck 
> it, but I made it a two-statement version that is formatted on multiple 
> lines. An explanation first.
> 
> I looked at using grep() on one column at a time to look for what should 
> NOT be there and ask it to invert the answer so it effectively tells me 
> which rows to keep. So it tests column 1 ($Name) to see if it has digits 
> in it and returns FALSE if it finds them which later means toss this 
> row. It returns TRUE if that entry, so far, makes the row valid. But 
> note since I am not using grepl() it does not return TRUE/FALSE at all. 
> Rather it returns index numbers of the ones that now inverted are TRUE. 
> What goes in is a vector of individual items from a column of the data. 
> What goes out is the indices of which ones I want to keep that can be 
> used to index the entire data.frame. Based on the ample data, it returns 
> 1:5 as row 6 has a digit in "Jack3".
> 
> 
>  ? grep("[0-9]", dat1$Name, invert = TRUE)
> 
> 
> Similarly, two other grep() statements test if the second and third 
> columns contain any characters in "[a-zA-Z]" and return a similar index 
> vector if they are OK.
> 
> What I would then have are three numeric vectors, not a matrix. Each 
> contains a subset of all the indices:
> 
> 
>> grep("[0-9]", dat1$Name, invert = TRUE)
> [1] 1 2 3 4 5
>> grep("[a-zA-Z]", dat1$Age, invert = TRUE)
> [1] 1 2 3 5 6
>> grep("[a-zA-Z]", dat1$Weight, invert = TRUE)
> [1] 2 3 4 5 6
> 
> This set of data was designed to toss out one of each column so they all 
> are of the same length but need not be. Like Rui, my condition for 
> deciding which rows to keep is that all three of the index vectors have 
> a particular entry. He summed them as logicals, but my choice has small 
> integers so the way I combine them to exclude any not in all three is to 
> use a sort of set intersect method. The one built-in to R only handles 
> two at a time so I nested two calls to intersect but in a more general 
> case, I would use some package (or build my own function) that handles 
> intersecting any number of such items.
> 
> Here is the full code, minus the initialization.
> 
> 
> rows.keep <-
> intersect(intersect(grep("[0-9]", dat1$Name, invert = TRUE),
>  ? ? ? ? ? ? ? ? ? ? grep("[a-zA-Z]", dat1$Age, invert = TRUE)),
>  ? ? ? ? ? grep("[a-zA-Z]", dat1$Weight, invert = TRUE))
> result <- dat1[rows.keep,]
> 
> 

Using the same idea, another two options, both with Reduce.

The 1st uses Avi's grep and regex's, the latter could be the character 
classes "[[:alpha:]]" and "[[:digit:]]" but this code is inspired in 
his. The results are put on a list and Reduce intersects the list 
members. Then subsetting is as usual.

The 2nd uses the fact that Mapis a wrapper for mapply that defaults to 
not simplifying its output. grep/invert will find the non-matches and 
Reduce intersects the result list, as above.
 From ?Map:

Map is a simple wrapper to mapply which does not attempt to simplify the 
result, similar to Common Lisp's mapcar (with arguments being recycled, 
however). Future versions may allow some control of the result type.

# 1st
grep_list <- list(
   grep("[0-9]", dat1$Name, invert = TRUE),
   grep("[a-zA-Z]", dat1$Age, invert = TRUE),
   grep("[a-zA-Z]", dat1$Weight, invert = TRUE)
)
keep1 <- Reduce(intersect, grep_list)
dat1[keep1,]

# 2nd
keep2 <- Map(\(x, r) grep(r, x, invert = TRUE), dat1, regex)
keep2 <- Reduce(intersect, keep2)

identical(keep1, keep2)
#[1] TRUE


Hope this helps,

Rui Barradas

> 
> 
> 
> 
> 
> 
> 
> 
> 
> -----Original Message-----
> From: Rui Barradas <ruipbarradas at sapo.pt>
> To: David Carlson <dcarlson at tamu.edu>; Bert Gunter <bgunter.4567 at gmail.com>
> Cc: r-help at R-project.org (r-help at r-project.org) <r-help at r-project.org>
> Sent: Sat, Jan 29, 2022 3:46 am
> Subject: Re: [R] Row exclude
> 
> Hello,
> 
> Getting creative, here is another way with mapply.
> 
> 
> regex <- list("[[:digit:]]", "[[:alpha:]]", "[[:alpha:]]")
> 
> i <- mapply(\(x, r) grepl(r, x), dat1, regex)
> dat1[rowSums(i) == 0L, ]
> 
> #? Name Age Weight
> #2?? Bob ? 25 ?? ?? 142
> #3 Carol ? 24?? ? ? 120
> #5? Katy?? 35?????? 160
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> 
> ?s 06:30 de 29/01/2022, David Carlson via R-help escreveu:
>  > Given that you know which columns should be numeric and which should be
>  > character, finding characters in numeric columns or numbers in character
>  > columns is not difficult. Your data frame consists of three character
>  > columns so you can use regular expressions as Bert mentioned. First you
>  > should strip the whitespace out of your data:
>  >
>  > dat1 <-read.table(text="Name, Age, Weight
>  >? ? Alex,? 20,? 13X
>  >? ? Bob,? 25,? 142
>  >? ? Carol, 24,? 120
>  >? ? John,? 3BC,? 175
>  >? ? Katy,? 35,? 160
>  >? ? Jack3, 34,? 140",sep=",", header=TRUE, stringsAsFactors=FALSE,
>  > strip.white=TRUE)
>  >
>  > Now check to see if all of the fields are character as expected.
>  >
>  > sapply(dat1, typeof)
>  > #? ? ? ? Name? ? ? ? Age? ? ? Weight
>  > # "character" "character" "character"
>  >
>  > Now identify character variables containing numbers and numeric variables
>  > containing characters:
>  >
>  > BadName <- which(grepl("[[:digit:]]", dat1$Name))
>  > BadAge <- which(grepl("[[:alpha:]]", dat1$Age))
>  > BadWeight <- which(grepl("[[:alpha:]]", dat1$Weight))
>  >
>  > Next remove those rows:
>  >
>  > (dat2 <- dat1[-unique(c(BadName, BadAge, BadWeight)), ])
>  > #? ? Name Age Weight
>  > #? 2? Bob? 25? ? 142
>  > #? 3 Carol? 24? ? 120
>  > #? 5? Katy? 35? ? 160
>  >
>  > You still need to convert Age and Weight to numeric, e.g. dat2$Age <-
>  > as.numeric(dat2$Age).
>  >
>  > David Carlson
>  >
>  >
>  > On Fri, Jan 28, 2022 at 11:59 PM Bert Gunter <bgunter.4567 at gmail.com 
> <mailto:bgunter.4567 at gmail.com>> wrote:
>  >
>  >> As character 'polluted' entries will cause a column to be read in (via
>  >> read.table and relatives) as factor or character data, this sounds 
> like a
>  >> job for regular expressions. If you are not familiar with this subject,
>  >> time to learn. And, yes, ZjQcmQRYFpfptBannerStart
>  >> This Message Is From an External Sender
>  >> This message came from outside your organization.
>  >> ZjQcmQRYFpfptBannerEnd
>  >>
>  >> As character 'polluted' entries will cause a column to be read in (via
>  >> read.table and relatives) as factor or character data, this sounds 
> like a
>  >> job for regular expressions. If you are not familiar with this subject,
>  >> time to learn. And, yes, some heavy lifting will be required.
>  >> See ?regexp for a start maybe? Or the stringr package?
>  >>
>  >> Cheers,
>  >> Bert
>  >>
>  >>
>  >>
>  >>
>  >> On Fri, Jan 28, 2022, 7:08 PM Val <valkremk at gmail.com 
> <mailto:valkremk at gmail.com>> wrote:
>  >>
>  >>> Hi All,
>  >>>
>  >>> I want to remove rows that contain a character string in an integer
>  >>> column or a digit in a character column.
>  >>>
>  >>> Sample data
>  >>>
>  >>> dat1 <-read.table(text="Name, Age, Weight
>  >>>? Alex,? 20,? 13X
>  >>>? Bob,? 25,? 142
>  >>>? Carol, 24,? 120
>  >>>? John,? 3BC,? 175
>  >>>? Katy,? 35,? 160
>  >>>? Jack3, 34,? 140",sep=",",header=TRUE,stringsAsFactors=F)
>  >>>
>  >>> If the Age/Weight column contains any character(s) then remove
>  >>> if the Name? column contains an digit then remove that row
>  >>> Desired output
>  >>>
>  >>>? ? Name? Age weight
>  >>> 1? Bob? ? 25? ? 142
>  >>> 2? Carol? 24? ? 120
>  >>> 3? Katy? ? 35? ? 160
>  >>>
>  >>> Thank you,
>  >>>
>  >>> ______________________________________________
>  >>> R-help at r-project.org <mailto:R-help at r-project.org> mailing list -- 
> To UNSUBSCRIBE and more, see
>  >>> 
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$ 
> <https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$>
>  >>> PLEASE do read the posting guide
>  >>> 
> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$ 
> <https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$>
>  >>> and provide commented, minimal, self-contained, reproducible code.
>  >>>
>  >> ??? [[alternative HTML version deleted]]
> 
>  >>
>  >> ______________________________________________R-help at r-project.org 
> <mailto:______________________________________________R-help at r-project.org> 
> mailing list -- To UNSUBSCRIBE and more, 
> seehttps://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
>  >> PLEASE do read the posting guide 
> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$ 
> <https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$>
>  >> and provide commented, minimal, self-contained, reproducible code.
>  >>
>  >>
>  > ??? [[alternative HTML version deleted]]
>  >
>  > ______________________________________________
>  > R-help at r-project.org <mailto:R-help at r-project.org> mailing list -- To 
> UNSUBSCRIBE and more, see
>  > https://stat.ethz.ch/mailman/listinfo/r-help 
> <https://stat.ethz.ch/mailman/listinfo/r-help>
>  > PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html 
> <http://www.r-project.org/posting-guide.html>
>  > and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org> mailing list -- To 
> UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help 
> <https://stat.ethz.ch/mailman/listinfo/r-help>
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html 
> <http://www.r-project.org/posting-guide.html>
> and provide commented, minimal, self-contained, reproducible code.


From @v|gro@@ @end|ng |rom ver|zon@net  Sat Jan 29 19:40:46 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Sat, 29 Jan 2022 18:40:46 +0000 (UTC)
Subject: [R] Row exclude
In-Reply-To: <850706846.2017300.1643479458169@mail.yahoo.com>
References: <CAJOiR6a7-foEUSQD9yGM2ym6jTA+f4maY=pcRjy_4J+Yq4TvxA@mail.gmail.com>
 <CAGxFJbRQDfLf=UJPnFi-TRKvYfAHsr4YfriPh5=oEAOy4d=F2g@mail.gmail.com>
 <CAE-dL2rT5RO-KTQXY-jOvyOaqmuNviSHAS+5ZvPwvd8-e-uBJg@mail.gmail.com>
 <13b79865-b914-7e68-6984-eb5337a60d40@sapo.pt>
 <850706846.2017300.1643479458169@mail.yahoo.com>
Message-ID: <217959511.2017064.1643481646431@mail.yahoo.com>


[NOTE: This is a re-send. I see it mangled multiple lines of code in sequence and so I shifted my temporary email sender to not use any form of rich text. Below would be the message I intended to send including code looking normal. As many other messages I create benefit from HTML, I may have to flip back and forth.]

There are many creative ways to solve problems and some may get you in trouble if you present them in class while even in some work situations, they may be hard for most to understand, let alone maintain and make changes.

This group is amorphous enough that we have people who want "help" who are new to the language, but also people who know plenty and encounter a new kind of problem, and of course people who want to make use of what they see as free labor.

Rui presented a very interesting idea and I like some aspects. But if presented to most people, they might have to start looking up things. 

But I admit I liked some of the ideas he uses and am adding them to my bag of tricks. Some were overkill for this particular requirement but that also makes them more general and useful.

First, was the use of locale-independent regular expressions like [[:alpha:]] that match any combination of [:lower:] and [:upper:] and thus are not restricted to ASCII characters. Since I do lots of my activities in languages other than English and well might include names with characters not normally found in English, or not even using an overlapping  alphabet, I can easily encounter items in the Name column that might not match [A-Za-z] but will match with [:alpha:].

I don't know if using [:digit:] has benefits over [0-9] and I do note there was no requirement to match more complex numbers than integers so no need to allow periods or scientific notation and so on.

Then there is the use of mapply. The more general version of the problem presented would include a data.frame with any number of columns, where a subset of the columns might need to be checked for conditions that vary across the columns but may include some broad categories of conditions that might be re-used. If all the conditions are regular expression matches you can build, then you can extend the list Rui used to have more items and also include expressions that always match so that some columns are effectively ignored:


   regex <- list("[[:digit:]]", "[[:alpha:]]", "[[:alpha:]]", "[.*])


So this generalizes to N columns as long as you supply exactly N patterns in the list, albeit mapply does recycle arguments if needed as in the simplest case where you want all columns checked the same way.

Rui then uses an anonymous function to pass to mapply() and that is a newish feature added recently to R, I think. It was perhaps meant specifically to be used with the new pipe symbol, but can be used anywhere but perhaps not in older versions of R.


   \(x, r) grepl(r, x)


I note Rui also uses grepl() which returns a logical vector. I will show my first attempt at the end where I used grep() to return index numbers of matches instead. For this context, though, he made use of the fact that mapply in this case returns a matrix of type logical:

i <- mapply(\(x, r) grepl(r, x), dat1, regex)

> i

      Name   Age Weight
[1,] FALSE FALSE   TRUE
[2,] FALSE FALSE  FALSE
[3,] FALSE FALSE  FALSE
[4,] FALSE  TRUE  FALSE
[5,] FALSE FALSE  FALSE
[6,]  TRUE FALSE  FALSE

And since R treats TRUE as 1 and FALSE as 0, then summing the rows gives you a small integer between 0 and the number of columns, inclusive, and only rows with no TRUE in them are wanted for this purpose:


dat1[rowSums(i) == 0L, ]

All I all, nicely done, but not trivial to read without comments, LOL!

And, yes, it could be made even more obscure as a one-liner.

My first attempt was a bit more focused on the specific needs described. I am not sure how the HTML destroyer in this mailing list might wreck it, but I made it a two-statement version that is formatted on multiple lines. An explanation first.

I looked at using grep() on one column at a time to look for what should NOT be there and ask it to invert the answer so it effectively tells me which rows to keep. So it tests column 1 ($Name) to see if it has digits in it and returns FALSE if it finds them which later means toss this row. It returns TRUE if that entry, so far, makes the row valid. But note since I am not using grepl() it does not return TRUE/FALSE at all. Rather it returns index numbers of the ones that now inverted are TRUE. What goes in is a vector of individual items from a column of the data. What goes out is the indices of which ones I want to keep that can be used to index the entire data.frame. Based on the ample data, it returns 1:5 as row 6 has a digit in "Jack3".


  grep("[0-9]", dat1$Name, invert = TRUE)


Similarly, two other grep() statements test if the second and third columns contain any characters in "[a-zA-Z]" and return a similar index vector if they are OK.

What I would then have are three numeric vectors, not a matrix. Each contains a subset of all the indices:


> grep("[0-9]", dat1$Name, invert = TRUE)
[1] 1 2 3 4 5
> grep("[a-zA-Z]", dat1$Age, invert = TRUE)
[1] 1 2 3 5 6
> grep("[a-zA-Z]", dat1$Weight, invert = TRUE)
[1] 2 3 4 5 6

This set of data was designed to toss out one of each column so they all are of the same length but need not be. Like Rui, my condition for deciding which rows to keep is that all three of the index vectors have a particular entry. He summed them as logicals, but my choice has small integers so the way I combine them to exclude any not in all three is to use a sort of set intersect method. The one built-in to R only handles two at a time so I nested two calls to intersect but in a more general case, I would use some package (or build my own function) that handles intersecting any number of such items.

Here is the full code, minus the initialization.


rows.keep <-
intersect(intersect(grep("[0-9]", dat1$Name, invert = TRUE),
                    grep("[a-zA-Z]", dat1$Age, invert = TRUE)),
          grep("[a-zA-Z]", dat1$Weight, invert = TRUE))
result <- dat1[rows.keep,]




-----Original Message-----
From: Avi Gross via R-help <r-help at r-project.org>
To: ruipbarradas at sapo.pt <ruipbarradas at sapo.pt>; dcarlson at tamu.edu <dcarlson at tamu.edu>; bgunter.4567 at gmail.com <bgunter.4567 at gmail.com>
Cc: r-help at r-project.org <r-help at r-project.org>
Sent: Sat, Jan 29, 2022 1:04 pm
Subject: Re: [R] Row exclude

There are many creative ways to solve problems and some may get you in trouble if you present them in class while even in some work situations, they may be hard for most to understand, let alone maintain and make changes.
This group is amorphous enough that we have people who want "help" who are new to the language, but also people who know plenty and encounter a new kind of problem, and of course people who want to make use of what they see as free labor.
Rui presented a very interesting idea and I like some aspects. But if presented to most people, they might have to start looking up things.?
But I admit I liked some of the ideas he uses and am adding them to my bag of tricks. Some were overkill for this particular requirement but that also makes them more general and useful.
First, was the use of locale-independent regular expressions like [[:alpha:]] that match any combination of [:lower:] and [:upper:] and thus are not restricted to ASCII characters. Since I do lots of my activities in languages other than English and well might include names with characters not normally found in English, or not even using an overlapping? alphabet, I can easily encounter items in the Name column that might not match [A-Za-z] but will match with [:alpha:].
I don't know if using [:digit:] has benefits over [0-9] and I do note there was no requirement to match more complex numbers than integers so no need to allow periods or scientific notation and so on.
Then there is the use of mapply. The more general version of the problem presented would include a data.frame with any number of columns, where a subset of the columns might need to be checked for conditions that vary across the columns but may include some broad categories of conditions that might be re-used. If all the conditions are regular expression matches you can build, then you can extend the list Rui used to have more items and also include expressions that always match so that some columns are effectively ignored:

? ?regex <- list("[[:digit:]]", "[[:alpha:]]", "[[:alpha:]]", "[.*])


So this generalizes to N columns as long as you supply exactly N patterns in the list, albeit mapply does recycle arguments if needed as in the simplest case where you want all columns checked the same way.
Rui then uses an anonymous function to pass to mapply() and that is a newish feature added recently to R, I think. It was perhaps meant specifically to be used with the new pipe symbol, but can be used anywhere but perhaps not in older versions of R.

? ?\(x, r) grepl(r, x)


I note Rui also uses grepl() which returns a logical vector. I will show my first attempt at the end where I used grep() to return index numbers of matches instead. For this context, though, he made use of the fact that mapply in this case returns a matrix of type logical:
i <- mapply(\(x, r) grepl(r, x), dat1, regex)

> i
? ? ? Name? ?Age Weight[1,] FALSE FALSE? ?TRUE[2,] FALSE FALSE? FALSE[3,] FALSE FALSE? FALSE[4,] FALSE? TRUE? FALSE[5,] FALSE FALSE? FALSE[6,]? TRUE FALSE? FALSE
And since R treats TRUE as 1 and FALSE as 0, then summing the rows gives you a small integer between 0 and the number of columns, inclusive, and only rows with no TRUE in them are wanted for this purpose:

dat1[rowSums(i) == 0L, ]

All I all, nicely done, but not trivial to read without comments, LOL!
And, yes, it could be made even more obscure as a one-liner.
My first attempt was a bit more focused on the specific needs described. I am not sure how the HTML destroyer in this mailing list might wreck it, but I made it a two-statement version that is formatted on multiple lines. An explanation first.
I looked at using grep() on one column at a time to look for what should NOT be there and ask it to invert the answer so it effectively tells me which rows to keep. So it tests column 1 ($Name) to see if it has digits in it and returns FALSE if it finds them which later means toss this row. It returns TRUE if that entry, so far, makes the row valid. But note since I am not using grepl() it does not return TRUE/FALSE at all. Rather it returns index numbers of the ones that now inverted are TRUE. What goes in is a vector of individual items from a column of the data. What goes out is the indices of which ones I want to keep that can be used to index the entire data.frame. Based on the ample data, it returns 1:5 as row 6 has a digit in "Jack3".

? grep("[0-9]", dat1$Name, invert = TRUE)


Similarly, two other grep() statements test if the second and third columns contain any characters in?"[a-zA-Z]" and return a similar index vector if they are OK.
What I would then have are three numeric vectors, not a matrix. Each contains a subset of all the indices:

> grep("[0-9]", dat1$Name, invert = TRUE)[1] 1 2 3 4 5> grep("[a-zA-Z]", dat1$Age, invert = TRUE)[1] 1 2 3 5 6> grep("[a-zA-Z]", dat1$Weight, invert = TRUE)[1] 2 3 4 5 6
This set of data was designed to toss out one of each column so they all are of the same length but need not be. Like Rui, my condition for deciding which rows to keep is that all three of the index vectors have a particular entry. He summed them as logicals, but my choice has small integers so the way I combine them to exclude any not in all three is to use a sort of set intersect method. The one built-in to R only handles two at a time so I nested two calls to intersect but in a more general case, I would use some package (or build my own function) that handles intersecting any number of such items.
Here is the full code, minus the initialization.

rows.keep <-intersect(intersect(grep("[0-9]", dat1$Name, invert = TRUE),? ? ? ? ? ? ? ? ? ? grep("[a-zA-Z]", dat1$Age, invert = TRUE)),? ? ? ? ? grep("[a-zA-Z]", dat1$Weight, invert = TRUE))result <- dat1[rows.keep,]










-----Original Message-----
From: Rui Barradas <ruipbarradas at sapo.pt>
To: David Carlson <dcarlson at tamu.edu>; Bert Gunter <bgunter.4567 at gmail.com>
Cc: r-help at R-project.org (r-help at r-project.org) <r-help at r-project.org>
Sent: Sat, Jan 29, 2022 3:46 am
Subject: Re: [R] Row exclude

Hello,

Getting creative, here is another way with mapply.


regex <- list("[[:digit:]]", "[[:alpha:]]", "[[:alpha:]]")

i <- mapply(\(x, r) grepl(r, x), dat1, regex)
dat1[rowSums(i) == 0L, ]

#? Name Age Weight
#2?? Bob ? 25 ?? ?? 142
#3 Carol ? 24?? ? ? 120
#5? Katy?? 35?????? 160


Hope this helps,

Rui Barradas


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Sat Jan 29 20:32:10 2022
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Sat, 29 Jan 2022 19:32:10 +0000
Subject: [R] GGPLOT: Superscript text in body of plot
Message-ID: <MN2PR03MB5167653D9CD64B6158EFFB25E2239@MN2PR03MB5167.namprd03.prod.outlook.com>

Can you help me create text that has a superscript 2?

I am trying to add text within the body of a plot created with ggplot. I what the text to R-squared = 0.23. I want R-squared to be shown in standard notation, i.e. capital R followed by a super-script 2 and then =0.23 as standard (i.e. non-superscripted text). I have tried the follow, but it does not work:

jjdata <- data.frame(x=1:10,y=1:10)
jjdata
ggplot(jjdata, aes(x=x, y=y))+ 
  geom_point(size=2,shape=1)+
  geom_text(x=3, y=7.5, label='R^2=0.23')

The result I get follows the text of the label argument perfectly. The carrot (^) is included in the printed text; it is not interpreted as a command to set the 2 as a superscript. How do I make the 2 into a superscript?

Thank you,
Joh

From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Jan 29 20:58:19 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 29 Jan 2022 11:58:19 -0800
Subject: [R] GGPLOT: Superscript text in body of plot
In-Reply-To: <MN2PR03MB5167653D9CD64B6158EFFB25E2239@MN2PR03MB5167.namprd03.prod.outlook.com>
References: <MN2PR03MB5167653D9CD64B6158EFFB25E2239@MN2PR03MB5167.namprd03.prod.outlook.com>
Message-ID: <E486A5CA-DBB8-4989-B565-5F1A8E412598@dcn.davis.ca.us>

a) ?plotmath, e.g. expression( R^2 * "=0.23" )

b) "carrot" is a root vegetable. "carat" is a jewelers measure. "caret" is a ^.

On January 29, 2022 11:32:10 AM PST, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>Can you help me create text that has a superscript 2?
>
>I am trying to add text within the body of a plot created with ggplot. I what the text to R-squared = 0.23. I want R-squared to be shown in standard notation, i.e. capital R followed by a super-script 2 and then =0.23 as standard (i.e. non-superscripted text). I have tried the follow, but it does not work:
>
>jjdata <- data.frame(x=1:10,y=1:10)
>jjdata
>ggplot(jjdata, aes(x=x, y=y))+ 
>  geom_point(size=2,shape=1)+
>  geom_text(x=3, y=7.5, label='R^2=0.23')
>
>The result I get follows the text of the label argument perfectly. The carrot (^) is included in the printed text; it is not interpreted as a command to set the 2 as a superscript. How do I make the 2 into a superscript?
>
>Thank you,
>Joh
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Jan 29 21:04:20 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 29 Jan 2022 20:04:20 +0000
Subject: [R] GGPLOT: Superscript text in body of plot
In-Reply-To: <MN2PR03MB5167653D9CD64B6158EFFB25E2239@MN2PR03MB5167.namprd03.prod.outlook.com>
References: <MN2PR03MB5167653D9CD64B6158EFFB25E2239@MN2PR03MB5167.namprd03.prod.outlook.com>
Message-ID: <9a2e2af7-f85c-8b3f-8daf-533108d06071@sapo.pt>

Hello,

Here is a way.


ggplot(jjdata, aes(x=x, y=y))+
   geom_point(size=2,shape=1)+
   geom_text(x=3, y=7.5, label=expression(paste(R^2 == '0.23')))


Hope this helps,

Rui Barradas

?s 19:32 de 29/01/2022, Sorkin, John escreveu:
> Can you help me create text that has a superscript 2?
> 
> I am trying to add text within the body of a plot created with ggplot. I what the text to R-squared = 0.23. I want R-squared to be shown in standard notation, i.e. capital R followed by a super-script 2 and then =0.23 as standard (i.e. non-superscripted text). I have tried the follow, but it does not work:
> 
> jjdata <- data.frame(x=1:10,y=1:10)
> jjdata
> ggplot(jjdata, aes(x=x, y=y))+
>    geom_point(size=2,shape=1)+
>    geom_text(x=3, y=7.5, label='R^2=0.23')
> 
> The result I get follows the text of the label argument perfectly. The carrot (^) is included in the printed text; it is not interpreted as a command to set the 2 as a superscript. How do I make the 2 into a superscript?
> 
> Thank you,
> Joh
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Jan 29 21:13:41 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 29 Jan 2022 20:13:41 +0000
Subject: [R] GGPLOT: Superscript text in body of plot
In-Reply-To: <9a2e2af7-f85c-8b3f-8daf-533108d06071@sapo.pt>
References: <MN2PR03MB5167653D9CD64B6158EFFB25E2239@MN2PR03MB5167.namprd03.prod.outlook.com>
 <9a2e2af7-f85c-8b3f-8daf-533108d06071@sapo.pt>
Message-ID: <0ac00c9b-c236-78e1-0c85-dd2ce2c13e46@sapo.pt>

Hello,

And with annotate, the warning goes away.


ggplot(jjdata, aes(x=x, y=y))+
   geom_point(size=2,shape=1)+
   annotate(
     "text",
     x=3, y=7.5,
     label="R^{2} == 0.23",
     parse = TRUE
   )


Hope this helps,

Rui Barradas

?s 20:04 de 29/01/2022, Rui Barradas escreveu:
> Hello,
> 
> Here is a way.
> 
> 
> ggplot(jjdata, aes(x=x, y=y))+
>  ? geom_point(size=2,shape=1)+
>  ? geom_text(x=3, y=7.5, label=expression(paste(R^2 == '0.23')))
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ?s 19:32 de 29/01/2022, Sorkin, John escreveu:
>> Can you help me create text that has a superscript 2?
>>
>> I am trying to add text within the body of a plot created with ggplot. 
>> I what the text to R-squared = 0.23. I want R-squared to be shown in 
>> standard notation, i.e. capital R followed by a super-script 2 and 
>> then =0.23 as standard (i.e. non-superscripted text). I have tried the 
>> follow, but it does not work:
>>
>> jjdata <- data.frame(x=1:10,y=1:10)
>> jjdata
>> ggplot(jjdata, aes(x=x, y=y))+
>> ?? geom_point(size=2,shape=1)+
>> ?? geom_text(x=3, y=7.5, label='R^2=0.23')
>>
>> The result I get follows the text of the label argument perfectly. The 
>> carrot (^) is included in the printed text; it is not interpreted as a 
>> command to set the 2 as a superscript. How do I make the 2 into a 
>> superscript?
>>
>> Thank you,
>> Joh
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jan 29 21:24:15 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 29 Jan 2022 12:24:15 -0800
Subject: [R] Row exclude
In-Reply-To: <13b79865-b914-7e68-6984-eb5337a60d40@sapo.pt>
References: <CAJOiR6a7-foEUSQD9yGM2ym6jTA+f4maY=pcRjy_4J+Yq4TvxA@mail.gmail.com>
 <CAGxFJbRQDfLf=UJPnFi-TRKvYfAHsr4YfriPh5=oEAOy4d=F2g@mail.gmail.com>
 <CAE-dL2rT5RO-KTQXY-jOvyOaqmuNviSHAS+5ZvPwvd8-e-uBJg@mail.gmail.com>
 <13b79865-b914-7e68-6984-eb5337a60d40@sapo.pt>
Message-ID: <CAGxFJbTHTgfgoHzO12tsG9wVxdzgV6wvV1j0KX3L7-vQskgeLA@mail.gmail.com>

Rui:

You made my day! -- or at least considerably improved it. Your
solution was clever and clear. IMHO, it is also a terrific example of
why one should expend the effort to really learn the core features of
the language before plunging into packages with alternative paradigms.
(But lots of wise folks will disagree, so let's not debate that and
just consider me a luddite if you like).

A minor tweak would be to add punctuation characters to the regex's:

> dig <- '[[:digit:][:punct:]]' ; nondig <- '[[:alpha:][:punct:]]'
> mapply(\(r,x)grepl(r,x),list(dig, nondig, nondig), dat1)

This of course would need to be modified for numeric columns with '.'
or ',' as a decimal separator. Most examples I've seen were of
contamination by a particular character or two (like ',' )) for
numeric entries, which could be easily handled of course.

As usual, one of the virtues of a nice solution like yours is that it
can easily be generalized, say to the case of a data frame with 100's
of columns. One just has to be a bit careful about details.

A usual 'gotcha' will be to ensure that factor columns are read in or
converted to character.  Another is that you need to first remove any
non-character -- typically non-polluted numeric -- columns from the
data frame. This can be done by something like:
dat <- dat[, sapply(dat, is.character)]
Anyway, with those caveats and perhaps others that I either haven't
thought of or may be data-specific, here is an example that
illustrates how nicely your approach extends.

I'll start from the OP's dat1 example.

 dat1 <-read.table(text="Name, Age, Weight
 Alex,  20,  13X
 Bob,   25,  142
 Carol, 24,  120
 John,  3BC,  175
 Katy,  35,  160
 Jack3, 34,  140",sep=",",header=TRUE,stringsAsFactors=F)

## now enlarge the table and add a gender column which should contain
only upper or lower case 'm','f', 'o' ## but which I have corrupted
with some 'g's (typos)

 set.seed(9901)
 genderAbb <- c('M','F','O','m','f','o','g')
 gender <- sample(genderAbb, 24,dim rep = TRUE)
 dat1 <- cbind(dat1[rep(1:6,4),],
                    Gender = gender
               )
head(dat1, 8)

      Name   Age Weight Gender
1     Alex    20    13X      O
2      Bob    25    142      M
3    Carol    24    120      o
4     John   3BC    175      o
5     Katy    35    160      f
6    Jack3    34    140      g
1.1   Alex    20    13X      M
2.1    Bob    25    142      f

## Now create a list of the different target 'types' for columns.
## Note that these types are user-created categories, not R data types.
## So one can use whatever names one wants.
## Or could use numeric values -- but that obfuscates the meaning and
increases the risk of error, imo.
type <- c('char', 'int', 'gend') ## obvious

## Now, using your idea, determine the regex's that identify bad
entries for each type,
 badpat <- list(
             char = '[[:punct:][:digit:]]', ## added stray punctuation
             int = '[[:punct:][:alpha:]]', ## ditto
             gend = '[^MFOmfo]' )  ## the only gender abbreviations
that will be accepted.
                ## The initial '^' is the regex symbol for 'anything
*but* these in character classes


## Now identify what type of data each column should contain. This is
the part that could be tedious
## for many columns, but I see no way of avoiding it. A smarter UI
than I give would help!
target_type <- c('char','int','int','gend')

## and create the corresponding list of regex patterns to use for mapply()
target_pat <- badpat[target_type]

## Now do the Barradas trick
result <- mapply(\(pat,x)if(is.character(x))grepl(pat, x)
               else rep(FALSE, NROW(x)),
       target_pat,
       dat1)
head(result, 8) ## it's a matrix, not a data frame of course
## ... and then proceed as you showed.
Cheers,
Bert


On Sat, Jan 29, 2022 at 12:46 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
> Hello,
>
> Getting creative, here is another way with mapply.
>
>
> regex <- list("[[:digit:]]", "[[:alpha:]]", "[[:alpha:]]")
>
> i <- mapply(\(x, r) grepl(r, x), dat1, regex)
> dat1[rowSums(i) == 0L, ]
>
> #  Name Age Weight
> #2   Bob   25       142
> #3 Carol   24       120
> #5  Katy   35       160
>
>
> Hope this helps,
>
> Rui Barradas
>
>
> ?s 06:30 de 29/01/2022, David Carlson via R-help escreveu:
> > Given that you know which columns should be numeric and which should be
> > character, finding characters in numeric columns or numbers in character
> > columns is not difficult. Your data frame consists of three character
> > columns so you can use regular expressions as Bert mentioned. First you
> > should strip the whitespace out of your data:
> >
> > dat1 <-read.table(text="Name, Age, Weight
> >    Alex,  20,  13X
> >    Bob,  25,  142
> >    Carol, 24,  120
> >    John,  3BC,  175
> >    Katy,  35,  160
> >    Jack3, 34,  140",sep=",", header=TRUE, stringsAsFactors=FALSE,
> > strip.white=TRUE)
> >
> > Now check to see if all of the fields are character as expected.
> >
> > sapply(dat1, typeof)
> > #        Name         Age      Weight
> > # "character" "character" "character"
> >
> > Now identify character variables containing numbers and numeric variables
> > containing characters:
> >
> > BadName <- which(grepl("[[:digit:]]", dat1$Name))
> > BadAge <- which(grepl("[[:alpha:]]", dat1$Age))
> > BadWeight <- which(grepl("[[:alpha:]]", dat1$Weight))
> >
> > Next remove those rows:
> >
> > (dat2 <- dat1[-unique(c(BadName, BadAge, BadWeight)), ])
> > #    Name Age Weight
> > #  2   Bob  25    142
> > #  3 Carol  24    120
> > #  5  Katy  35    160
> >
> > You still need to convert Age and Weight to numeric, e.g. dat2$Age <-
> > as.numeric(dat2$Age).
> >
> > David Carlson
> >
> >
> > On Fri, Jan 28, 2022 at 11:59 PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >
> >> As character 'polluted' entries will cause a column to be read in (via
> >> read.table and relatives) as factor or character data, this sounds like a
> >> job for regular expressions. If you are not familiar with this subject,
> >> time to learn. And, yes, ZjQcmQRYFpfptBannerStart
> >> This Message Is From an External Sender
> >> This message came from outside your organization.
> >> ZjQcmQRYFpfptBannerEnd
> >>
> >> As character 'polluted' entries will cause a column to be read in (via
> >> read.table and relatives) as factor or character data, this sounds like a
> >> job for regular expressions. If you are not familiar with this subject,
> >> time to learn. And, yes, some heavy lifting will be required.
> >> See ?regexp for a start maybe? Or the stringr package?
> >>
> >> Cheers,
> >> Bert
> >>
> >>
> >>
> >>
> >> On Fri, Jan 28, 2022, 7:08 PM Val <valkremk at gmail.com> wrote:
> >>
> >>> Hi All,
> >>>
> >>> I want to remove rows that contain a character string in an integer
> >>> column or a digit in a character column.
> >>>
> >>> Sample data
> >>>
> >>> dat1 <-read.table(text="Name, Age, Weight
> >>>   Alex,  20,  13X
> >>>   Bob,   25,  142
> >>>   Carol, 24,  120
> >>>   John,  3BC,  175
> >>>   Katy,  35,  160
> >>>   Jack3, 34,  140",sep=",",header=TRUE,stringsAsFactors=F)
> >>>
> >>> If the Age/Weight column contains any character(s) then remove
> >>> if the Name  column contains an digit then remove that row
> >>> Desired output
> >>>
> >>>     Name   Age weight
> >>> 1   Bob     25    142
> >>> 2   Carol   24    120
> >>> 3   Katy    35    160
> >>>
> >>> Thank you,
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
> >>> PLEASE do read the posting guide
> >>> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>>
> >>      [[alternative HTML version deleted]]
> >>
> >> ______________________________________________R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, seehttps://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
> >> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >>
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jan 29 21:34:47 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 29 Jan 2022 12:34:47 -0800
Subject: [R] progress of LDA algorithm...
In-Reply-To: <PU4P216MB1568F966958368EBBF11D034C8239@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568F966958368EBBF11D034C8239@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbTwZSBmxuvOa30-7XXGBBc1KZ-L=410BJiJNum28P8nbA@mail.gmail.com>

I presume this is in some specialized package that you have not told
us about -- topicmodels maybe? It is therefore off topic here. In any
case, this is the sort of question for which you should contact the
package maintainer (?maintainer).

As your question may also intersect with high performance computing
considerations, you might want to post  it on the R-Sig-HPC list,
https://stat.ethz.ch/mailman/listinfo/r-sig-hpc

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Sat, Jan 29, 2022 at 8:27 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> dear members,
>                           I want to run LDA(latent Dirichlet allocation) on certain news articles. i have the following questions:
>
>
>   1.  Is there any way to know the progress of the execution of the LDA algorithm?
>   2.  I read in SO that if you have more memory, faster is the execution time of LDA. I am using AWS z1d instance with 48 cores and about 325 GB RAM. I have multiple categories of news, but one of them is much larger than others, containing about 25000 articles. Is it preferable to send those categories individually to different processors, and whether R frees up the memory after running on the smaller categories so that the largest category can run with more memory? Or is it preferable to first run the smaller sets, finish the job, and then run the largest category?
>
> Thanking You,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @v|gro@@ @end|ng |rom ver|zon@net  Sat Jan 29 22:34:51 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Sat, 29 Jan 2022 21:34:51 +0000 (UTC)
Subject: [R] Row exclude
In-Reply-To: <943bba92-6045-ff0d-be3c-c5d272c3bb19@sapo.pt>
References: <CAJOiR6a7-foEUSQD9yGM2ym6jTA+f4maY=pcRjy_4J+Yq4TvxA@mail.gmail.com>
 <CAGxFJbRQDfLf=UJPnFi-TRKvYfAHsr4YfriPh5=oEAOy4d=F2g@mail.gmail.com>
 <CAE-dL2rT5RO-KTQXY-jOvyOaqmuNviSHAS+5ZvPwvd8-e-uBJg@mail.gmail.com>
 <13b79865-b914-7e68-6984-eb5337a60d40@sapo.pt>
 <850706846.2017300.1643479458169@mail.yahoo.com>
 <943bba92-6045-ff0d-be3c-c5d272c3bb19@sapo.pt>
Message-ID: <1079226743.2042479.1643492091507@mail.yahoo.com>

Rui has indeed improved my first attempt in several ways so my comments are now focused on another level. There is seemingly endless discussion here about what is base R. Questions as well as Answers that go beyond base R are often challenged and I understand why, even if I personally don't worry about it.

As I see it, R has many levels, like many modern programming languages, and some are built-in by default, while others are add-ons of various kinds and some are now seen as more commonly used than others. Some here, and NOT ME, seem particularly annoyed by the concept of the tidyverse existing or the corporate nature of RSTUDIO. I say, the more the better as long as they are well-designed and robust and efficient enough.

There are many ways you can use R in simple mode to the point where you do not even use vectors as intended but use loops to say add corresponding entries in two vectors one item at a time using an index, as you might do with earlier languages. That is perfectly valid in R, albeit not using the language as intended as A+B in R does that for you fairly trivially, albeit hiding a kind of loop being done behind the scenes. But if the two vectors are not the same length, it can lead to subtle errors if it recycles or broadcasts the shorter one as needed UNLESS that was intended. 

Like many languages, R has additional modes of a sort. it is very loosely Object-Oriented and some solutions to problems may make use of that or other features not always found in other languages such as being able to attach attributes of arbitrary nature to things. But someone taking a beginner course in R, or just using it in simple ways, generally does not know or care and being given a possible solution like that may not be very helpful.

R is fully a functional programming language and experienced users, like Rui clearly is, can make serious use of many paradigms like map/reduce to create what often are quite abstract solutions that can be tailored to do all kinds of things by simply changing the functions invoked or in this case also the data invoked. I was tempted to use a variant of his solution using the pmap() function that I am familiar with but it is not base R, but part of the "purr" package which is in the not-appreciated-here package of packages called the tidyverse, LOL! 

Pmap can take an arbitrary data.frame and look at it one row at a time and apply a function that sees all the columns. That function can be written so it applies your logic to each column entry for that row that you wish and combines the calculations to return something like TRUE/FALSE. In this case, it could be code connecting use of a regular expression on each column entry combined by the usual logical connectives like AND and NOT (using R notation) to return a TRUE or FALSE that pmap then combines into a vector and you use that to index the data.frame to keep only valid rows. BUT, I reconsidered using it here as it is a tad advanced and not pure R. Nor do I claim it is better than what Rui and others could come up with. It is just not as simple as the case we are looking at. 

R has another facet that needs to be used carefully that significantly alters some approaches as compared to a language like Python which has a much nicer object-oriented set of tools but does not have some of the delayed evaluation R supports and that sometimes get in the way as some people expect them to be evaluated sooner, or at all. I see strengths and weaknesses and try to use a language suited for my needs that also uses it mostly as intended.

I also ask if we have met the needs of the person who asked this question. If they do not reply and merely REPOST the same question with a shorter subject-line, then I suggest we all wasted our time trying. Proper etiquette, I might think, is to reply to some work show by others IN PUBLIC and especially to explain anything being asked by us and to let us know what worked for them or met their needs or show a portion of what code they finally implemented. Some of that may yet happen, but can anyone blame me for being a tad suspicious this time?

I tend to be interested in deeper discussions and many are outside the scope of this forum. So I acknowledge that discussing alternate methods including more abstract ones using functional programming or other tricks, is a bit outside what is expected here.

I want though to add one more idea. Can we agree that the user may have a more general concept to be considered here. That is the concept of having a data.frame where each column is purely numeric consisting of just 0 through 9 with perhaps no spaces, periods or commas or anything extraneous, OR purely alphabetic with no numerals allowed, and alphabetic in the same sense as Rui uses. Mind you, I do not see any reason for always using the current locale for something like names of people that may well be written with characters from another locale. I would think any string with all non-numeric characters might be allowed for the purpose.

Can you write a function that accepts only pure cells that either have no numerals or no alphabeticals but not a mixture? The same function can initially be applied to all columns of a data.frame that only is supposed to contain columns of one kind or the other but not combinations. You might begin by reading in all data as character mode with perhaps extraneous white space stripped. You then apply the above function to identify any rows that contain a mixed alphanumeric item and eliminate all such rows. For consistency, you might examine the resulting data.frame and try to convert all columns to numeric. Any that fail conversion attempts  are left as character but may possibly have anomalies like one of more alphabetic items mixed into  an otherwise numeric set of entries. That might require another filter run per column to identify those and either remove more rows or replace the bad ones with NA or a default like 0 in what is then convertable to a numeric column.

But my thought was that it is more complex to design something (as Rui did) that takes a list of intended column types, or a function that knows how to deal with each, as compared to an all-purpose function that just insists on purity at a local level and is a simpler program to write.

Avious

-----Original Message-----
From: Rui Barradas <ruipbarradas at sapo.pt>
To: Avi Gross <avigross at verizon.net>; dcarlson at tamu.edu <dcarlson at tamu.edu>; bgunter.4567 at gmail.com <bgunter.4567 at gmail.com>
Cc: r-help at r-project.org <r-help at r-project.org>
Sent: Sat, Jan 29, 2022 1:33 pm
Subject: Re: [R] Row exclude


Hello,

Thanks for the comments, a few others inline.

?s 18:04 de 29/01/2022, Avi Gross escreveu:
> There are many creative ways to solve problems and some may get you in 
> trouble if you present them in class while even in some work situations, 
> they may be hard for most to understand, let alone maintain and make 
> changes.
> 
> This group is amorphous enough that we have people who want "help" who 
> are new to the language, but also people who know plenty and encounter a 
> new kind of problem, and of course people who want to make use of what 
> they see as free labor.
> 
> Rui presented a very interesting idea and I like some aspects. But if 
> presented to most people, they might have to start looking up things.
> 
> But I admit I liked some of the ideas he uses and am adding them to my 
> bag of tricks. Some were overkill for this particular requirement but 
> that also makes them more general and useful.
> 
> First, was the use of locale-independent regular expressions like 
> [[:alpha:]] that match any combination of [:lower:] and [:upper:] and 
> thus are not restricted to ASCII characters. Since I do lots of my 
> activities in languages other than English and well might include names 
> with characters not normally found in English, or not even using an 
> overlapping? alphabet, I can easily encounter items in the Name column 
> that might not match [A-Za-z] but will match with [:alpha:].
> 
> I don't know if using [:digit:] has benefits over [0-9] and I do note 
> there was no requirement to match more complex numbers than integers so 
> no need to allow periods or scientific notation and so on.

Yes, I used locale-independent regular expressions. It's a habit I 
aquired a while ago. It took some time to stop using character ranges 
but once gone I'm more comfortable with the use of classes like 
[:alpha:] and [:digit:].
[After all my native language, (Portuguese) has 
cedillas(ES)/cedilhas(PT) and accented letters].

> 
> Then there is the use of mapply. The more general version of the problem 
> presented would include a data.frame with any number of columns, where a 
> subset of the columns might need to be checked for conditions that vary 
> across the columns but may include some broad categories of conditions 
> that might be re-used. If all the conditions are regular expression 
> matches you can build, then you can extend the list Rui used to have 
> more items and also include expressions that always match so that some 
> columns are effectively ignored:
> 
> 
> regex <- list("[[:digit:]]", "[[:alpha:]]", "[[:alpha:]]", "[.*])
> 
> 
> So this generalizes to N columns as long as you supply exactly N 
> patterns in the list, albeit mapply does recycle arguments if needed as 
> in the simplest case where you want all columns checked the same way.
> 
> Rui then uses an anonymous function to pass to mapply() and that is a 
> newish feature added recently to R, I think. It was perhaps meant 
> specifically to be used with the new pipe symbol, but can be used 
> anywhere but perhaps not in older versions of R.
> 
> 
> \(x, r) grepl(r, x)
> 

No, the new anonymous function wasn't specifically meant to be used with 
the new pipe operator, it was meant to be a short-hand notation for 
anonymous functions and used interchangeably with the old notation.

mapply(\(x, r), etc)
mapply(function(x, r) etc)


> 
> I note Rui also uses grepl() which returns a logical vector. I will show 
> my first attempt at the end where I used grep() to return index numbers 
> of matches instead. For this context, though, he made use of the fact 
> that mapply in this case returns a matrix of type logical:
> 
> i <- mapply(\(x, r) grepl(r, x), dat1, regex)
> 
>> i
> 
>? ? ? ? Name? ?Age Weight
> [1,] FALSE FALSE? ?TRUE
> [2,] FALSE FALSE? FALSE
> [3,] FALSE FALSE? FALSE
> [4,] FALSE? TRUE? FALSE
> [5,] FALSE FALSE? FALSE
> [6,]? TRUE FALSE? FALSE
> 
> And since R treats TRUE as 1 and FALSE as 0, then summing the rows gives 
> you a small integer between 0 and the number of columns, inclusive, and 
> only rows with no TRUE in them are wanted for this purpose:

And rowSums is a fast function.
> 
> 
> dat1[rowSums(i) == 0L, ]
> 
> All I all, nicely done, but not trivial to read without comments, LOL!
> 
> And, yes, it could be made even more obscure as a one-liner.
> 
> My first attempt was a bit more focused on the specific needs described. 
> I am not sure how the HTML destroyer in this mailing list might wreck 
> it, but I made it a two-statement version that is formatted on multiple 
> lines. An explanation first.
> 
> I looked at using grep() on one column at a time to look for what should 
> NOT be there and ask it to invert the answer so it effectively tells me 
> which rows to keep. So it tests column 1 ($Name) to see if it has digits 
> in it and returns FALSE if it finds them which later means toss this 
> row. It returns TRUE if that entry, so far, makes the row valid. But 
> note since I am not using grepl() it does not return TRUE/FALSE at all. 
> Rather it returns index numbers of the ones that now inverted are TRUE. 
> What goes in is a vector of individual items from a column of the data. 
> What goes out is the indices of which ones I want to keep that can be 
> used to index the entire data.frame. Based on the ample data, it returns 
> 1:5 as row 6 has a digit in "Jack3".
> 
> 
>? ? grep("[0-9]", dat1$Name, invert = TRUE)
> 
> 
> Similarly, two other grep() statements test if the second and third 
> columns contain any characters in "[a-zA-Z]" and return a similar index 
> vector if they are OK.
> 
> What I would then have are three numeric vectors, not a matrix. Each 
> contains a subset of all the indices:
> 
> 
>> grep("[0-9]", dat1$Name, invert = TRUE)
> [1] 1 2 3 4 5
>> grep("[a-zA-Z]", dat1$Age, invert = TRUE)
> [1] 1 2 3 5 6
>> grep("[a-zA-Z]", dat1$Weight, invert = TRUE)
> [1] 2 3 4 5 6
> 
> This set of data was designed to toss out one of each column so they all 
> are of the same length but need not be. Like Rui, my condition for 
> deciding which rows to keep is that all three of the index vectors have 
> a particular entry. He summed them as logicals, but my choice has small 
> integers so the way I combine them to exclude any not in all three is to 
> use a sort of set intersect method. The one built-in to R only handles 
> two at a time so I nested two calls to intersect but in a more general 
> case, I would use some package (or build my own function) that handles 
> intersecting any number of such items.
> 
> Here is the full code, minus the initialization.
> 
> 
> rows.keep <-
> intersect(intersect(grep("[0-9]", dat1$Name, invert = TRUE),
>? ? ? ? ? ? ? ? ? ? ? grep("[a-zA-Z]", dat1$Age, invert = TRUE)),
>? ? ? ? ? ? grep("[a-zA-Z]", dat1$Weight, invert = TRUE))
> result <- dat1[rows.keep,]
> 
> 

Using the same idea, another two options, both with Reduce.

The 1st uses Avi's grep and regex's, the latter could be the character 
classes "[[:alpha:]]" and "[[:digit:]]" but this code is inspired in 
his. The results are put on a list and Reduce intersects the list 
members. Then subsetting is as usual.

The 2nd uses the fact that Mapis a wrapper for mapply that defaults to 
not simplifying its output. grep/invert will find the non-matches and 
Reduce intersects the result list, as above.
 From ?Map:

Map is a simple wrapper to mapply which does not attempt to simplify the 
result, similar to Common Lisp's mapcar (with arguments being recycled, 
however). Future versions may allow some control of the result type.

# 1st
grep_list <- list(
?  grep("[0-9]", dat1$Name, invert = TRUE),
?  grep("[a-zA-Z]", dat1$Age, invert = TRUE),
?  grep("[a-zA-Z]", dat1$Weight, invert = TRUE)
)
keep1 <- Reduce(intersect, grep_list)
dat1[keep1,]

# 2nd
keep2 <- Map(\(x, r) grep(r, x, invert = TRUE), dat1, regex)
keep2 <- Reduce(intersect, keep2)

identical(keep1, keep2)
#[1] TRUE


Hope this helps,

Rui Barradas

> 
> 
> 
> 
> 
> 
> 
> 
> 
> -----Original Message-----
> From: Rui Barradas <ruipbarradas at sapo.pt>
> To: David Carlson <dcarlson at tamu.edu>; Bert Gunter <bgunter.4567 at gmail.com>
> Cc: r-help at R-project.org (r-help at r-project.org) <r-help at r-project.org>
> Sent: Sat, Jan 29, 2022 3:46 am
> Subject: Re: [R] Row exclude
> 
> Hello,
> 
> Getting creative, here is another way with mapply.
> 
> 
> regex <- list("[[:digit:]]", "[[:alpha:]]", "[[:alpha:]]")
> 
> i <- mapply(\(x, r) grepl(r, x), dat1, regex)
> dat1[rowSums(i) == 0L, ]
> 
> #? Name Age Weight
> #2?? Bob ? 25 ?? ?? 142
> #3 Carol ? 24?? ? ? 120
> #5? Katy?? 35?????? 160
> 
> 
> Hope this helps,
> 
> Rui Barradas
      


From @v|gro@@ @end|ng |rom ver|zon@net  Sat Jan 29 22:55:44 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Sat, 29 Jan 2022 21:55:44 +0000 (UTC)
Subject: [R] Remove
In-Reply-To: <746637d2-9b2c-0b8c-893d-a6cb35986bd1@sapo.pt>
References: <CAJOiR6aP=s1bDS_JUmLZhQH0MZ+boVMhf4uPpTbbqfdE5o6tAg@mail.gmail.com>
 <746637d2-9b2c-0b8c-893d-a6cb35986bd1@sapo.pt>
Message-ID: <639852795.2041022.1643493344427@mail.yahoo.com>

Rui,

I have to wonder if valkremk at gmail.com is currently reading this thread. I am sending a copy of this email directly to them and requesting they look at what has been posted and let us know if their need is met and they have successfully written code that solves the problem so we can move on.

As noted, I think that people asking for free help show their appreciation by minimizing the work others do and letting others know that no further work is needed.

Sending a second request like this while not responding to others, suggests they may not be 'listening' or only to personal email replies. As far as I am concerned, we have shown an array of solutions way beyond the hints and teaching I originally intended and the matter is closed and future questions by this person will be viewed with suspicion by me as they are not responsive.

Maybe it is time for me to look for a job again, so I get paid for wasting my time.

Avi


-----Original Message-----
From: Rui Barradas <ruipbarradas at sapo.pt>
To: Val <valkremk at gmail.com>; r-help at R-project.org (r-help at r-project.org) <r-help at r-project.org>
Sent: Sat, Jan 29, 2022 8:17 am
Subject: Re: [R] Remove


Hello,

This question is repeated [1].

[1] https://stat.ethz.ch/pipermail/r-help/2022-January/473663.html

Rui Barradas

?s 02:20 de 29/01/2022, Val escreveu:
> Hi All,
> 
> I want? remove row(s) that contains a character string in an integer column
> or? a digit in a character column
> 
> Sample data
> dat1 <-read.table(text="Name, Age, Weight
>?  Alex,? 20,? 13X
>?  Bob,?  25,? 142
>?  Carol, 24,? 120
>?  John,? 3BC,? 175
>?  Katy,? 35,? 160
>?  Jack3, 34,? 140",sep=",",header=TRUE,stringsAsFactors=F)
> 
> If the Age/Weight column contains any character(s) then remove
> if the Name? column contains any? digit then remove that row
> 
> Desired output
> 
>? ?  Name?  Age weight
> 1?  Bob? ?  25? ? 142
> 2?  Carol?  24? ? 120
> 3?  Katy? ? 35? ? 160
> 
> Thank you,
> 
> ??? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From @v|gro@@ @end|ng |rom ver|zon@net  Sat Jan 29 23:45:16 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Sat, 29 Jan 2022 22:45:16 +0000 (UTC)
Subject: [R] progress of LDA algorithm...
In-Reply-To: <CAGxFJbTwZSBmxuvOa30-7XXGBBc1KZ-L=410BJiJNum28P8nbA@mail.gmail.com>
References: <PU4P216MB1568F966958368EBBF11D034C8239@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbTwZSBmxuvOa30-7XXGBBc1KZ-L=410BJiJNum28P8nbA@mail.gmail.com>
Message-ID: <352590855.2049481.1643496316378@mail.yahoo.com>

I agree with Bert that this is way off topic and one few here know (or care) about. 

Generally, if a package has functionality with manual pages, it may have abilities defined such as setting verbose=TRUE or to various levels of output that may satisfy the request or they may make a copy of code including their print or logging statements and so on.

If the request is more general such as how to run a program under some debugging method and set checkpoints at which some reporting is done, that too is a bit outside the normal uses of this forum.

The usual suggestion here is to contact the package maintainer, with no guarantee of getting any useful response, or find a forum way more specific than R HELP just because part of the package is in R. 

As it happens, the lda() function being discussed may (or may not) be in the MASS package. Looking at the documentation, I saw no obvious hook to show it as it makes progress. Of course Akshay can do some external testing using standard R timing mechanisms to see how long it takes to do just some of the news categories without going in to the details of the function called and that might partially answer his question. Asking how to do that might fit the parameters here.


-----Original Message-----
From: Bert Gunter <bgunter.4567 at gmail.com>
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Sent: Sat, Jan 29, 2022 3:34 pm
Subject: Re: [R] progress of LDA algorithm...


I presume this is in some specialized package that you have not told
us about -- topicmodels maybe? It is therefore off topic here. In any
case, this is the sort of question for which you should contact the
package maintainer (?maintainer).

As your question may also intersect with high performance computing
considerations, you might want to post? it on the R-Sig-HPC list,
https://stat.ethz.ch/mailman/listinfo/r-sig-hpc

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Sat, Jan 29, 2022 at 8:27 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> dear members,
>? ? ? ? ? ? ? ? ? ? ? ? ?  I want to run LDA(latent Dirichlet allocation) on certain news articles. i have the following questions:
>
>
>?  1.? Is there any way to know the progress of the execution of the LDA algorithm?
>?  2.? I read in SO that if you have more memory, faster is the execution time of LDA. I am using AWS z1d instance with 48 cores and about 325 GB RAM. I have multiple categories of news, but one of them is much larger than others, containing about 25000 articles. Is it preferable to send those categories individually to different processors, and whether R frees up the memory after running on the smaller categories so that the largest category can run with more memory? Or is it preferable to first run the smaller sets, finish the job, and then run the largest category?
>
> Thanking You,
> Yours sincerely,
> AKSHAY M KULKARNI
> 


From v@|kremk @end|ng |rom gm@||@com  Sun Jan 30 01:32:00 2022
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Sat, 29 Jan 2022 18:32:00 -0600
Subject: [R] Row exclude
In-Reply-To: <1079226743.2042479.1643492091507@mail.yahoo.com>
References: <CAJOiR6a7-foEUSQD9yGM2ym6jTA+f4maY=pcRjy_4J+Yq4TvxA@mail.gmail.com>
 <CAGxFJbRQDfLf=UJPnFi-TRKvYfAHsr4YfriPh5=oEAOy4d=F2g@mail.gmail.com>
 <CAE-dL2rT5RO-KTQXY-jOvyOaqmuNviSHAS+5ZvPwvd8-e-uBJg@mail.gmail.com>
 <13b79865-b914-7e68-6984-eb5337a60d40@sapo.pt>
 <850706846.2017300.1643479458169@mail.yahoo.com>
 <943bba92-6045-ff0d-be3c-c5d272c3bb19@sapo.pt>
 <1079226743.2042479.1643492091507@mail.yahoo.com>
Message-ID: <CAJOiR6Z-c7-9DdAWip5CrGfArurNGEQSF+xHUmo-NGXYH73PLw@mail.gmail.com>

Hi  all,
Thank you so much for the useful help and many options that you gave me.
Sorry for the delay response,  I was away for a while

On Sat, Jan 29, 2022 at 3:35 PM Avi Gross via R-help <r-help at r-project.org>
wrote:

> Rui has indeed improved my first attempt in several ways so my comments
> are now focused on another level. There is seemingly endless discussion
> here about what is base R. Questions as well as Answers that go beyond base
> R are often challenged and I understand why, even if I personally don't
> worry about it.
>
> As I see it, R has many levels, like many modern programming languages,
> and some are built-in by default, while others are add-ons of various kinds
> and some are now seen as more commonly used than others. Some here, and NOT
> ME, seem particularly annoyed by the concept of the tidyverse existing or
> the corporate nature of RSTUDIO. I say, the more the better as long as they
> are well-designed and robust and efficient enough.
>
> There are many ways you can use R in simple mode to the point where you do
> not even use vectors as intended but use loops to say add corresponding
> entries in two vectors one item at a time using an index, as you might do
> with earlier languages. That is perfectly valid in R, albeit not using the
> language as intended as A+B in R does that for you fairly trivially, albeit
> hiding a kind of loop being done behind the scenes. But if the two vectors
> are not the same length, it can lead to subtle errors if it recycles or
> broadcasts the shorter one as needed UNLESS that was intended.
>
> Like many languages, R has additional modes of a sort. it is very loosely
> Object-Oriented and some solutions to problems may make use of that or
> other features not always found in other languages such as being able to
> attach attributes of arbitrary nature to things. But someone taking a
> beginner course in R, or just using it in simple ways, generally does not
> know or care and being given a possible solution like that may not be very
> helpful.
>
> R is fully a functional programming language and experienced users, like
> Rui clearly is, can make serious use of many paradigms like map/reduce to
> create what often are quite abstract solutions that can be tailored to do
> all kinds of things by simply changing the functions invoked or in this
> case also the data invoked. I was tempted to use a variant of his solution
> using the pmap() function that I am familiar with but it is not base R, but
> part of the "purr" package which is in the not-appreciated-here package of
> packages called the tidyverse, LOL!
>
> Pmap can take an arbitrary data.frame and look at it one row at a time and
> apply a function that sees all the columns. That function can be written so
> it applies your logic to each column entry for that row that you wish and
> combines the calculations to return something like TRUE/FALSE. In this
> case, it could be code connecting use of a regular expression on each
> column entry combined by the usual logical connectives like AND and NOT
> (using R notation) to return a TRUE or FALSE that pmap then combines into a
> vector and you use that to index the data.frame to keep only valid rows.
> BUT, I reconsidered using it here as it is a tad advanced and not pure R.
> Nor do I claim it is better than what Rui and others could come up with. It
> is just not as simple as the case we are looking at.
>
> R has another facet that needs to be used carefully that significantly
> alters some approaches as compared to a language like Python which has a
> much nicer object-oriented set of tools but does not have some of the
> delayed evaluation R supports and that sometimes get in the way as some
> people expect them to be evaluated sooner, or at all. I see strengths and
> weaknesses and try to use a language suited for my needs that also uses it
> mostly as intended.
>
> I also ask if we have met the needs of the person who asked this question.
> If they do not reply and merely REPOST the same question with a shorter
> subject-line, then I suggest we all wasted our time trying. Proper
> etiquette, I might think, is to reply to some work show by others IN PUBLIC
> and especially to explain anything being asked by us and to let us know
> what worked for them or met their needs or show a portion of what code they
> finally implemented. Some of that may yet happen, but can anyone blame me
> for being a tad suspicious this time?
>
> I tend to be interested in deeper discussions and many are outside the
> scope of this forum. So I acknowledge that discussing alternate methods
> including more abstract ones using functional programming or other tricks,
> is a bit outside what is expected here.
>
> I want though to add one more idea. Can we agree that the user may have a
> more general concept to be considered here. That is the concept of having a
> data.frame where each column is purely numeric consisting of just 0 through
> 9 with perhaps no spaces, periods or commas or anything extraneous, OR
> purely alphabetic with no numerals allowed, and alphabetic in the same
> sense as Rui uses. Mind you, I do not see any reason for always using the
> current locale for something like names of people that may well be written
> with characters from another locale. I would think any string with all
> non-numeric characters might be allowed for the purpose.
>
> Can you write a function that accepts only pure cells that either have no
> numerals or no alphabeticals but not a mixture? The same function can
> initially be applied to all columns of a data.frame that only is supposed
> to contain columns of one kind or the other but not combinations. You might
> begin by reading in all data as character mode with perhaps extraneous
> white space stripped. You then apply the above function to identify any
> rows that contain a mixed alphanumeric item and eliminate all such rows.
> For consistency, you might examine the resulting data.frame and try to
> convert all columns to numeric. Any that fail conversion attempts  are left
> as character but may possibly have anomalies like one of more alphabetic
> items mixed into  an otherwise numeric set of entries. That might require
> another filter run per column to identify those and either remove more rows
> or replace the bad ones with NA or a default like 0 in what is then
> convertable to a numeric column.
>
> But my thought was that it is more complex to design something (as Rui
> did) that takes a list of intended column types, or a function that knows
> how to deal with each, as compared to an all-purpose function that just
> insists on purity at a local level and is a simpler program to write.
>
> Avious
>
> -----Original Message-----
> From: Rui Barradas <ruipbarradas at sapo.pt>
> To: Avi Gross <avigross at verizon.net>; dcarlson at tamu.edu <dcarlson at tamu.edu>;
> bgunter.4567 at gmail.com <bgunter.4567 at gmail.com>
> Cc: r-help at r-project.org <r-help at r-project.org>
> Sent: Sat, Jan 29, 2022 1:33 pm
> Subject: Re: [R] Row exclude
>
>
> Hello,
>
> Thanks for the comments, a few others inline.
>
> ?s 18:04 de 29/01/2022, Avi Gross escreveu:
> > There are many creative ways to solve problems and some may get you in
> > trouble if you present them in class while even in some work situations,
> > they may be hard for most to understand, let alone maintain and make
> > changes.
> >
> > This group is amorphous enough that we have people who want "help" who
> > are new to the language, but also people who know plenty and encounter a
> > new kind of problem, and of course people who want to make use of what
> > they see as free labor.
> >
> > Rui presented a very interesting idea and I like some aspects. But if
> > presented to most people, they might have to start looking up things.
> >
> > But I admit I liked some of the ideas he uses and am adding them to my
> > bag of tricks. Some were overkill for this particular requirement but
> > that also makes them more general and useful.
> >
> > First, was the use of locale-independent regular expressions like
> > [[:alpha:]] that match any combination of [:lower:] and [:upper:] and
> > thus are not restricted to ASCII characters. Since I do lots of my
> > activities in languages other than English and well might include names
> > with characters not normally found in English, or not even using an
> > overlapping  alphabet, I can easily encounter items in the Name column
> > that might not match [A-Za-z] but will match with [:alpha:].
> >
> > I don't know if using [:digit:] has benefits over [0-9] and I do note
> > there was no requirement to match more complex numbers than integers so
> > no need to allow periods or scientific notation and so on.
>
> Yes, I used locale-independent regular expressions. It's a habit I
> aquired a while ago. It took some time to stop using character ranges
> but once gone I'm more comfortable with the use of classes like
> [:alpha:] and [:digit:].
> [After all my native language, (Portuguese) has
> cedillas(ES)/cedilhas(PT) and accented letters].
>
> >
> > Then there is the use of mapply. The more general version of the problem
> > presented would include a data.frame with any number of columns, where a
> > subset of the columns might need to be checked for conditions that vary
> > across the columns but may include some broad categories of conditions
> > that might be re-used. If all the conditions are regular expression
> > matches you can build, then you can extend the list Rui used to have
> > more items and also include expressions that always match so that some
> > columns are effectively ignored:
> >
> >
> > regex <- list("[[:digit:]]", "[[:alpha:]]", "[[:alpha:]]", "[.*])
> >
> >
> > So this generalizes to N columns as long as you supply exactly N
> > patterns in the list, albeit mapply does recycle arguments if needed as
> > in the simplest case where you want all columns checked the same way.
> >
> > Rui then uses an anonymous function to pass to mapply() and that is a
> > newish feature added recently to R, I think. It was perhaps meant
> > specifically to be used with the new pipe symbol, but can be used
> > anywhere but perhaps not in older versions of R.
> >
> >
> > \(x, r) grepl(r, x)
> >
>
> No, the new anonymous function wasn't specifically meant to be used with
> the new pipe operator, it was meant to be a short-hand notation for
> anonymous functions and used interchangeably with the old notation.
>
> mapply(\(x, r), etc)
> mapply(function(x, r) etc)
>
>
> >
> > I note Rui also uses grepl() which returns a logical vector. I will show
> > my first attempt at the end where I used grep() to return index numbers
> > of matches instead. For this context, though, he made use of the fact
> > that mapply in this case returns a matrix of type logical:
> >
> > i <- mapply(\(x, r) grepl(r, x), dat1, regex)
> >
> >> i
> >
> >        Name   Age Weight
> > [1,] FALSE FALSE   TRUE
> > [2,] FALSE FALSE  FALSE
> > [3,] FALSE FALSE  FALSE
> > [4,] FALSE  TRUE  FALSE
> > [5,] FALSE FALSE  FALSE
> > [6,]  TRUE FALSE  FALSE
> >
> > And since R treats TRUE as 1 and FALSE as 0, then summing the rows gives
> > you a small integer between 0 and the number of columns, inclusive, and
> > only rows with no TRUE in them are wanted for this purpose:
>
> And rowSums is a fast function.
> >
> >
> > dat1[rowSums(i) == 0L, ]
> >
> > All I all, nicely done, but not trivial to read without comments, LOL!
> >
> > And, yes, it could be made even more obscure as a one-liner.
> >
> > My first attempt was a bit more focused on the specific needs described.
> > I am not sure how the HTML destroyer in this mailing list might wreck
> > it, but I made it a two-statement version that is formatted on multiple
> > lines. An explanation first.
> >
> > I looked at using grep() on one column at a time to look for what should
> > NOT be there and ask it to invert the answer so it effectively tells me
> > which rows to keep. So it tests column 1 ($Name) to see if it has digits
> > in it and returns FALSE if it finds them which later means toss this
> > row. It returns TRUE if that entry, so far, makes the row valid. But
> > note since I am not using grepl() it does not return TRUE/FALSE at all.
> > Rather it returns index numbers of the ones that now inverted are TRUE.
> > What goes in is a vector of individual items from a column of the data.
> > What goes out is the indices of which ones I want to keep that can be
> > used to index the entire data.frame. Based on the ample data, it returns
> > 1:5 as row 6 has a digit in "Jack3".
> >
> >
> >    grep("[0-9]", dat1$Name, invert = TRUE)
> >
> >
> > Similarly, two other grep() statements test if the second and third
> > columns contain any characters in "[a-zA-Z]" and return a similar index
> > vector if they are OK.
> >
> > What I would then have are three numeric vectors, not a matrix. Each
> > contains a subset of all the indices:
> >
> >
> >> grep("[0-9]", dat1$Name, invert = TRUE)
> > [1] 1 2 3 4 5
> >> grep("[a-zA-Z]", dat1$Age, invert = TRUE)
> > [1] 1 2 3 5 6
> >> grep("[a-zA-Z]", dat1$Weight, invert = TRUE)
> > [1] 2 3 4 5 6
> >
> > This set of data was designed to toss out one of each column so they all
> > are of the same length but need not be. Like Rui, my condition for
> > deciding which rows to keep is that all three of the index vectors have
> > a particular entry. He summed them as logicals, but my choice has small
> > integers so the way I combine them to exclude any not in all three is to
> > use a sort of set intersect method. The one built-in to R only handles
> > two at a time so I nested two calls to intersect but in a more general
> > case, I would use some package (or build my own function) that handles
> > intersecting any number of such items.
> >
> > Here is the full code, minus the initialization.
> >
> >
> > rows.keep <-
> > intersect(intersect(grep("[0-9]", dat1$Name, invert = TRUE),
> >                      grep("[a-zA-Z]", dat1$Age, invert = TRUE)),
> >            grep("[a-zA-Z]", dat1$Weight, invert = TRUE))
> > result <- dat1[rows.keep,]
> >
> >
>
> Using the same idea, another two options, both with Reduce.
>
> The 1st uses Avi's grep and regex's, the latter could be the character
> classes "[[:alpha:]]" and "[[:digit:]]" but this code is inspired in
> his. The results are put on a list and Reduce intersects the list
> members. Then subsetting is as usual.
>
> The 2nd uses the fact that Mapis a wrapper for mapply that defaults to
> not simplifying its output. grep/invert will find the non-matches and
> Reduce intersects the result list, as above.
>  From ?Map:
>
> Map is a simple wrapper to mapply which does not attempt to simplify the
> result, similar to Common Lisp's mapcar (with arguments being recycled,
> however). Future versions may allow some control of the result type.
>
> # 1st
> grep_list <- list(
>    grep("[0-9]", dat1$Name, invert = TRUE),
>    grep("[a-zA-Z]", dat1$Age, invert = TRUE),
>    grep("[a-zA-Z]", dat1$Weight, invert = TRUE)
> )
> keep1 <- Reduce(intersect, grep_list)
> dat1[keep1,]
>
> # 2nd
> keep2 <- Map(\(x, r) grep(r, x, invert = TRUE), dat1, regex)
> keep2 <- Reduce(intersect, keep2)
>
> identical(keep1, keep2)
> #[1] TRUE
>
>
> Hope this helps,
>
> Rui Barradas
>
> >
> >
> >
> >
> >
> >
> >
> >
> >
> > -----Original Message-----
> > From: Rui Barradas <ruipbarradas at sapo.pt>
> > To: David Carlson <dcarlson at tamu.edu>; Bert Gunter <
> bgunter.4567 at gmail.com>
> > Cc: r-help at R-project.org (r-help at r-project.org) <r-help at r-project.org>
> > Sent: Sat, Jan 29, 2022 3:46 am
> > Subject: Re: [R] Row exclude
> >
> > Hello,
> >
> > Getting creative, here is another way with mapply.
> >
> >
> > regex <- list("[[:digit:]]", "[[:alpha:]]", "[[:alpha:]]")
> >
> > i <- mapply(\(x, r) grepl(r, x), dat1, regex)
> > dat1[rowSums(i) == 0L, ]
> >
> > #  Name Age Weight
> > #2   Bob   25       142
> > #3 Carol   24       120
> > #5  Katy   35       160
> >
> >
> > Hope this helps,
> >
> > Rui Barradas
>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From v@|kremk @end|ng |rom gm@||@com  Sun Jan 30 03:32:28 2022
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Sat, 29 Jan 2022 20:32:28 -0600
Subject: [R] Row exclude
In-Reply-To: <CAE-dL2rT5RO-KTQXY-jOvyOaqmuNviSHAS+5ZvPwvd8-e-uBJg@mail.gmail.com>
References: <CAJOiR6a7-foEUSQD9yGM2ym6jTA+f4maY=pcRjy_4J+Yq4TvxA@mail.gmail.com>
 <CAGxFJbRQDfLf=UJPnFi-TRKvYfAHsr4YfriPh5=oEAOy4d=F2g@mail.gmail.com>
 <CAE-dL2rT5RO-KTQXY-jOvyOaqmuNviSHAS+5ZvPwvd8-e-uBJg@mail.gmail.com>
Message-ID: <CAJOiR6aKPdN-KTVdqqz2VDP0syXtn5vBOu_F4nSp_gX1kpDkQA@mail.gmail.com>

Thank you David for your help.

I just have one question on this. What is the purpose of  using the
"unique" function on this?
  (dat2 <- dat1[-unique(c(BadName, BadAge, BadWeight)), ])

I got the same result without using it.
       (dat2 <- dat1[-(c(BadName, BadAge, BadWeight)), ])

My concern is when I am applying this for the large data set the "unique"
function may consume resources(time  and memory).

Thank you.

On Sat, Jan 29, 2022 at 12:30 AM David Carlson <dcarlson at tamu.edu> wrote:

> Given that you know which columns should be numeric and which should be
> character, finding characters in numeric columns or numbers in character
> columns is not difficult. Your data frame consists of three character
> columns so you can use regular expressions as Bert mentioned. First you
> should strip the whitespace out of your data:
>
> dat1 <-read.table(text="Name, Age, Weight
>   Alex,  20,  13X
>   Bob,  25,  142
>   Carol, 24,  120
>   John,  3BC,  175
>   Katy,  35,  160
>   Jack3, 34,  140",sep=",", header=TRUE, stringsAsFactors=FALSE,
> strip.white=TRUE)
>
> Now check to see if all of the fields are character as expected.
>
> sapply(dat1, typeof)
> #        Name         Age      Weight
> # "character" "character" "character"
>
> Now identify character variables containing numbers and numeric variables
> containing characters:
>
> BadName <- which(grepl("[[:digit:]]", dat1$Name))
> BadAge <- which(grepl("[[:alpha:]]", dat1$Age))
> BadWeight <- which(grepl("[[:alpha:]]", dat1$Weight))
>
> Next remove those rows:
>
> (dat2 <- dat1[-unique(c(BadName, BadAge, BadWeight)), ])
> #    Name Age Weight
> #  2   Bob  25    142
> #  3 Carol  24    120
> #  5  Katy  35    160
>
> You still need to convert Age and Weight to numeric, e.g. dat2$Age <-
> as.numeric(dat2$Age).
>
> David Carlson
>
>
> On Fri, Jan 28, 2022 at 11:59 PM Bert Gunter <bgunter.4567 at gmail.com>
> wrote:
>
>> As character 'polluted' entries will cause a column to be read in (via
>> read.table and relatives) as factor or character data, this sounds like a
>> job for regular expressions. If you are not familiar with this subject,
>> time to learn. And, yes, ZjQcmQRYFpfptBannerStart
>> This Message Is From an External Sender
>> This message came from outside your organization.
>> ZjQcmQRYFpfptBannerEnd
>>
>> As character 'polluted' entries will cause a column to be read in (via
>> read.table and relatives) as factor or character data, this sounds like a
>> job for regular expressions. If you are not familiar with this subject,
>> time to learn. And, yes, some heavy lifting will be required.
>> See ?regexp for a start maybe? Or the stringr package?
>>
>> Cheers,
>> Bert
>>
>>
>>
>>
>> On Fri, Jan 28, 2022, 7:08 PM Val <valkremk at gmail.com> wrote:
>>
>> > Hi All,
>> >
>> > I want to remove rows that contain a character string in an integer
>> > column or a digit in a character column.
>> >
>> > Sample data
>> >
>> > dat1 <-read.table(text="Name, Age, Weight
>> >  Alex,  20,  13X
>> >  Bob,   25,  142
>> >  Carol, 24,  120
>> >  John,  3BC,  175
>> >  Katy,  35,  160
>> >  Jack3, 34,  140",sep=",",header=TRUE,stringsAsFactors=F)
>> >
>> > If the Age/Weight column contains any character(s) then remove
>> > if the Name  column contains an digit then remove that row
>> > Desired output
>> >
>> >    Name   Age weight
>> > 1   Bob     25    142
>> > 2   Carol   24    120
>> > 3   Katy    35    160
>> >
>> > Thank you,
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
>> > PLEASE do read the posting guide
>> > https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$
>> > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, seehttps://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
>> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$
>> and provide commented, minimal, self-contained, reproducible code.
>>
>>

	[[alternative HTML version deleted]]


From @v|gro@@ @end|ng |rom ver|zon@net  Sun Jan 30 04:56:46 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Sun, 30 Jan 2022 03:56:46 +0000 (UTC)
Subject: [R] Row exclude
In-Reply-To: <CAJOiR6aKPdN-KTVdqqz2VDP0syXtn5vBOu_F4nSp_gX1kpDkQA@mail.gmail.com>
References: <CAJOiR6a7-foEUSQD9yGM2ym6jTA+f4maY=pcRjy_4J+Yq4TvxA@mail.gmail.com>
 <CAGxFJbRQDfLf=UJPnFi-TRKvYfAHsr4YfriPh5=oEAOy4d=F2g@mail.gmail.com>
 <CAE-dL2rT5RO-KTQXY-jOvyOaqmuNviSHAS+5ZvPwvd8-e-uBJg@mail.gmail.com>
 <CAJOiR6aKPdN-KTVdqqz2VDP0syXtn5vBOu_F4nSp_gX1kpDkQA@mail.gmail.com>
Message-ID: <1559171194.2063821.1643515006658@mail.yahoo.com>

Val,

In this special case the unique() is extra overhead of sorts. 

in a normal positive scenario of dat[c(1,2,3,2,3,1)] you would get duplicate rows shown as many times as they are invoked. 

In the similar but different negative scenario,  dat[-c(1,2,3,2,3,1)] the functionality seems to be different as you can subtract a row once and then subtract it again and again with no further effect. It is sort of like creating a set and then subtracting from the set any values if they exist and doing nothing if they, don't.

Now in your 7 row case, there was one problem in each of three rows and there was no overlap but the following will remove only rows 2 and 3 no matter how often it comes up:

> dat1[-c(2,3,3,2,3,2,3,2,3,2),]
   Name   Age Weight
1  Alex    20    13X
4  John   3BC    175
5  Katy    35    160
6 Jack3    34    140

Order and even redundancies do not matter, so no unique is needed. I suspect the overhead of a few duplicates is minor. 

But having said that, I believe the implementation of unique does not use tons of resources as it returns the results in the same order it sees then and dos not do a sort:

> unique(c(6,2,3,3,2,3,2,3,2,3,2,6))
[1] 6 2 3

So in the positive case where you often want one copy of everything, it may make sense to use and even to sort it afterward. 

You were not clear about your need to handle large amounts of data so some suggested solutions may scale up better than others. You still have not shared if you plan on using more columns too or if any columns are meant to be ignored or dealt with yet another way in checking them. You also did not specify what if anything should be done if a column entry is NA or even possibly a few other things like Inf. 

Any suggestions you got are not offered as working well if you add additional requirements and constraints. As another example, in R you can enter some numbers, including as integers, several other ways:

mixed <- c(111, 222L, 0x29A, 1E3)
[1]  111  222  666 1000

I changed your dat1 to look like this:

dat1 <-read.table(text="Name, Age, Weight
Alex,  20,  13
Bob,  25,  222L
Carol, 24, 0x29A
John,  3BC, 1E3
Katy,  35,  160
Jack3, 34,  140",sep=",",header=TRUE,stringsAsFactors=F, strip.white=TRUE)

I also stripped whitespace and it looks like this:

> dat1
   Name Age Weight
1  Alex  20     13
2   Bob  25   222L
3 Carol  24  0x29A
4  John 3BC    1E3
5  Katy  35    160
6 Jack3  34    140

Now look at column 2, Weight. As it is all seen as character, it retained those constructs but will R be able to convert them if I ask for as.integer?

> as.integer(dat1$Weight)
[1]   13   NA  666 1000  160  140
Warning message:
NAs introduced by coercion 

It looks like adding an L fails but the hexadecimal notation works and so does the scientific notation.

So you have every right to insist the only thing to be entered in a numeric column are digits from 0 to 9. Realistically, any entering the forms above, as well as numbers like 3.14, would otherwise work fine and if converted to an integer, would survive, albeit the latter would be truncated. Writing a regular expression that matches these is not straightforward but can be done. But the suggestions people made assume you are restricting it to standard decimal notation and that is fine.

Now on to size. If you have a million rows in your data, the various algorithms proposed vary in what they do in between and some make all kinds of data structures that store integers or logicals in size up to or close to a million. But the nature of your requirement turns out to be amenable to working in smaller batches if that makes you happy. You could operate on something like a thousand rows at a time, and calculate which rows to keep and set them aside. Repeat for another thousand at a time till done and along the way merge what you are keeping. The memory used for each batch will be limited and reused regularly and garbage collection will deal with the rest. You do not even have to do the concatenation incrementally if you simply keep track of your offset at the start of each batch and add that back to the vector of indices of rows to keep and keep extending the vector of rows. At the end, you can use that to index all the data and shrink it.

There are many such variations if you want to consider efficiency of memory or CPU time, albeit you probably can handle amounts like a million rows, but not billions, on most machines. For much larger sets of data, you could read in lines (or all at once but process one row at a time) and then selectively write the good ones back to disk or to a database one at a time (or in small batches) and then you can delete all current uses of memory and read it in again, but this time asking read.table to read in certain columns as integers, or even smaller integers, and the text column as character. If lots of rows are being skipped, you now have a smaller memory footprint for additional operations that presumably follow. 

Good luck.



-----Original Message-----
From: Val <valkremk at gmail.com>
To: David Carlson <dcarlson at tamu.edu>
Cc: r-help at R-project.org (r-help at r-project.org) <r-help at r-project.org>
Sent: Sat, Jan 29, 2022 9:32 pm
Subject: Re: [R] Row exclude

Thank you David for your help.

I just have one question on this. What is the purpose of? using the
"unique" function on this?
? (dat2 <- dat1[-unique(c(BadName, BadAge, BadWeight)), ])

I got the same result without using it.
? ? ?  (dat2 <- dat1[-(c(BadName, BadAge, BadWeight)), ])

My concern is when I am applying this for the large data set the "unique"
function may consume resources(time? and memory).

Thank you.

de.html
and provide commented, minimal, self-contained, reproducible code.
 


From dc@r|@on @end|ng |rom t@mu@edu  Sun Jan 30 05:15:45 2022
From: dc@r|@on @end|ng |rom t@mu@edu (David Carlson)
Date: Sat, 29 Jan 2022 22:15:45 -0600
Subject: [R] Row exclude
In-Reply-To: <CAJOiR6aKPdN-KTVdqqz2VDP0syXtn5vBOu_F4nSp_gX1kpDkQA@mail.gmail.com>
References: <CAJOiR6a7-foEUSQD9yGM2ym6jTA+f4maY=pcRjy_4J+Yq4TvxA@mail.gmail.com>
 <CAGxFJbRQDfLf=UJPnFi-TRKvYfAHsr4YfriPh5=oEAOy4d=F2g@mail.gmail.com>
 <CAE-dL2rT5RO-KTQXY-jOvyOaqmuNviSHAS+5ZvPwvd8-e-uBJg@mail.gmail.com>
 <CAJOiR6aKPdN-KTVdqqz2VDP0syXtn5vBOu_F4nSp_gX1kpDkQA@mail.gmail.com>
Message-ID: <CAE-dL2rT+B_Hszjf0ewUJuj5=0=iiC4UbqbNgt1h_U2dXo3e5w@mail.gmail.com>

It is possible that there would be errors on the same row for different
columns. This does not happen in your example. If row 4 was "John6, 3BC,
175X" then row 4 would be included 3 times, but we only need to remove it
once. Removing the duplicates is not necessary since R would not get
confused, but length(unique(c(BadName, BadAge, BadWeight)) indicates how
many lines are being removed.

David

On Sat, Jan 29, 2022 at 8:32 PM Val <valkremk at gmail.com> wrote:

> Thank you David for your help. I just have one question on this. What is
> the purpose of  using the "unique" function on this?   (dat2 <-
> dat1[-unique(c(BadName, BadAge, BadWeight)), ])   I got the same result
> without using it. ZjQcmQRYFpfptBannerStart
> This Message Is From an External Sender
> This message came from outside your organization.
> ZjQcmQRYFpfptBannerEnd
> Thank you David for your help.
>
> I just have one question on this. What is the purpose of  using the
> "unique" function on this?
>   (dat2 <- dat1[-unique(c(BadName, BadAge, BadWeight)), ])
>
> I got the same result without using it.
>        (dat2 <- dat1[-(c(BadName, BadAge, BadWeight)), ])
>
> My concern is when I am applying this for the large data set the "unique"
> function may consume resources(time  and memory).
>
> Thank you.
>
> On Sat, Jan 29, 2022 at 12:30 AM David Carlson <dcarlson at tamu.edu> wrote:
>
>> Given that you know which columns should be numeric and which should be
>> character, finding characters in numeric columns or numbers in character
>> columns is not difficult. Your data frame consists of three character
>> columns so you can use regular expressions as Bert mentioned. First you
>> should strip the whitespace out of your data:
>>
>> dat1 <-read.table(text="Name, Age, Weight
>>   Alex,  20,  13X
>>   Bob,  25,  142
>>   Carol, 24,  120
>>   John,  3BC,  175
>>   Katy,  35,  160
>>   Jack3, 34,  140",sep=",", header=TRUE, stringsAsFactors=FALSE,
>> strip.white=TRUE)
>>
>> Now check to see if all of the fields are character as expected.
>>
>> sapply(dat1, typeof)
>> #        Name         Age      Weight
>> # "character" "character" "character"
>>
>> Now identify character variables containing numbers and numeric variables
>> containing characters:
>>
>> BadName <- which(grepl("[[:digit:]]", dat1$Name))
>> BadAge <- which(grepl("[[:alpha:]]", dat1$Age))
>> BadWeight <- which(grepl("[[:alpha:]]", dat1$Weight))
>>
>> Next remove those rows:
>>
>> (dat2 <- dat1[-unique(c(BadName, BadAge, BadWeight)), ])
>> #    Name Age Weight
>> #  2   Bob  25    142
>> #  3 Carol  24    120
>> #  5  Katy  35    160
>>
>> You still need to convert Age and Weight to numeric, e.g. dat2$Age <-
>> as.numeric(dat2$Age).
>>
>> David Carlson
>>
>>
>> On Fri, Jan 28, 2022 at 11:59 PM Bert Gunter <bgunter.4567 at gmail.com>
>> wrote:
>>
>>> As character 'polluted' entries will cause a column to be read in (via
>>> read.table and relatives) as factor or character data, this sounds like a
>>> job for regular expressions. If you are not familiar with this subject,
>>> time to learn. And, yes, ZjQcmQRYFpfptBannerStart
>>> This Message Is From an External Sender
>>> This message came from outside your organization.
>>> ZjQcmQRYFpfptBannerEnd
>>>
>>> As character 'polluted' entries will cause a column to be read in (via
>>> read.table and relatives) as factor or character data, this sounds like a
>>> job for regular expressions. If you are not familiar with this subject,
>>> time to learn. And, yes, some heavy lifting will be required.
>>> See ?regexp for a start maybe? Or the stringr package?
>>>
>>> Cheers,
>>> Bert
>>>
>>>
>>>
>>>
>>> On Fri, Jan 28, 2022, 7:08 PM Val <valkremk at gmail.com> wrote:
>>>
>>> > Hi All,
>>> >
>>> > I want to remove rows that contain a character string in an integer
>>> > column or a digit in a character column.
>>> >
>>> > Sample data
>>> >
>>> > dat1 <-read.table(text="Name, Age, Weight
>>> >  Alex,  20,  13X
>>> >  Bob,   25,  142
>>> >  Carol, 24,  120
>>> >  John,  3BC,  175
>>> >  Katy,  35,  160
>>> >  Jack3, 34,  140",sep=",",header=TRUE,stringsAsFactors=F)
>>> >
>>> > If the Age/Weight column contains any character(s) then remove
>>> > if the Name  column contains an digit then remove that row
>>> > Desired output
>>> >
>>> >    Name   Age weight
>>> > 1   Bob     25    142
>>> > 2   Carol   24    120
>>> > 3   Katy    35    160
>>> >
>>> > Thank you,
>>> >
>>> > ______________________________________________
>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
>>> > PLEASE do read the posting guide
>>> > https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$
>>> > and provide commented, minimal, self-contained, reproducible code.
>>> >
>>>
>>> 	[[alternative HTML version deleted]]
>>>
>>> ______________________________________________R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, seehttps://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
>>> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Jan 30 12:01:18 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 30 Jan 2022 11:01:18 +0000
Subject: [R] progress of LDA algorithm...
In-Reply-To: <352590855.2049481.1643496316378@mail.yahoo.com>
References: <PU4P216MB1568F966958368EBBF11D034C8239@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbTwZSBmxuvOa30-7XXGBBc1KZ-L=410BJiJNum28P8nbA@mail.gmail.com>
 <352590855.2049481.1643496316378@mail.yahoo.com>
Message-ID: <PU4P216MB1568A619F0D0EEB9B8276DB7C8249@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

dear Avi and Bert,
                              I think I got my answer. I will just run it with a small sample and check the execution time and extrapolate from that. By the way, LDA (I am using topicmodels package) cannot be parallelized, right?     Thanks in advance.

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Avi Gross via R-help <r-help at r-project.org>
Sent: Sunday, January 30, 2022 4:15 AM
Cc: r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] progress of LDA algorithm...

I agree with Bert that this is way off topic and one few here know (or care) about.

Generally, if a package has functionality with manual pages, it may have abilities defined such as setting verbose=TRUE or to various levels of output that may satisfy the request or they may make a copy of code including their print or logging statements and so on.

If the request is more general such as how to run a program under some debugging method and set checkpoints at which some reporting is done, that too is a bit outside the normal uses of this forum.

The usual suggestion here is to contact the package maintainer, with no guarantee of getting any useful response, or find a forum way more specific than R HELP just because part of the package is in R.

As it happens, the lda() function being discussed may (or may not) be in the MASS package. Looking at the documentation, I saw no obvious hook to show it as it makes progress. Of course Akshay can do some external testing using standard R timing mechanisms to see how long it takes to do just some of the news categories without going in to the details of the function called and that might partially answer his question. Asking how to do that might fit the parameters here.


-----Original Message-----
From: Bert Gunter <bgunter.4567 at gmail.com>
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Sent: Sat, Jan 29, 2022 3:34 pm
Subject: Re: [R] progress of LDA algorithm...


I presume this is in some specialized package that you have not told
us about -- topicmodels maybe? It is therefore off topic here. In any
case, this is the sort of question for which you should contact the
package maintainer (?maintainer).

As your question may also intersect with high performance computing
considerations, you might want to post  it on the R-Sig-HPC list,
https://stat.ethz.ch/mailman/listinfo/r-sig-hpc

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Sat, Jan 29, 2022 at 8:27 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> dear members,
>                           I want to run LDA(latent Dirichlet allocation) on certain news articles. i have the following questions:
>
>
>   1.  Is there any way to know the progress of the execution of the LDA algorithm?
>   2.  I read in SO that if you have more memory, faster is the execution time of LDA. I am using AWS z1d instance with 48 cores and about 325 GB RAM. I have multiple categories of news, but one of them is much larger than others, containing about 25000 articles. Is it preferable to send those categories individually to different processors, and whether R frees up the memory after running on the smaller categories so that the largest category can run with more memory? Or is it preferable to first run the smaller sets, finish the job, and then run the largest category?
>
> Thanking You,
> Yours sincerely,
> AKSHAY M KULKARNI
>

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Jan 30 12:05:52 2022
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 30 Jan 2022 11:05:52 +0000
Subject: [R] Fw:  progress of LDA algorithm...
In-Reply-To: <PU4P216MB1568A619F0D0EEB9B8276DB7C8249@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568F966958368EBBF11D034C8239@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbTwZSBmxuvOa30-7XXGBBc1KZ-L=410BJiJNum28P8nbA@mail.gmail.com>
 <352590855.2049481.1643496316378@mail.yahoo.com>
 <PU4P216MB1568A619F0D0EEB9B8276DB7C8249@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <PU4P216MB1568D0FD4F75394625FC66B0C8249@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

dear Avi and Bert,
                              I think, at least, parallelization is the bailiwick of base R. Therefore I think this question is worthy of your consideration.

Thanking You,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of akshay kulkarni <akshay_e4 at hotmail.com>
Sent: Sunday, January 30, 2022 4:31 PM
To: Avi Gross <avigross at verizon.net>
Cc: r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] progress of LDA algorithm...

dear Avi and Bert,
                              I think I got my answer. I will just run it with a small sample and check the execution time and extrapolate from that. By the way, LDA (I am using topicmodels package) cannot be parallelized, right?     Thanks in advance.

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Avi Gross via R-help <r-help at r-project.org>
Sent: Sunday, January 30, 2022 4:15 AM
Cc: r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] progress of LDA algorithm...

I agree with Bert that this is way off topic and one few here know (or care) about.

Generally, if a package has functionality with manual pages, it may have abilities defined such as setting verbose=TRUE or to various levels of output that may satisfy the request or they may make a copy of code including their print or logging statements and so on.

If the request is more general such as how to run a program under some debugging method and set checkpoints at which some reporting is done, that too is a bit outside the normal uses of this forum.

The usual suggestion here is to contact the package maintainer, with no guarantee of getting any useful response, or find a forum way more specific than R HELP just because part of the package is in R.

As it happens, the lda() function being discussed may (or may not) be in the MASS package. Looking at the documentation, I saw no obvious hook to show it as it makes progress. Of course Akshay can do some external testing using standard R timing mechanisms to see how long it takes to do just some of the news categories without going in to the details of the function called and that might partially answer his question. Asking how to do that might fit the parameters here.


-----Original Message-----
From: Bert Gunter <bgunter.4567 at gmail.com>
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Sent: Sat, Jan 29, 2022 3:34 pm
Subject: Re: [R] progress of LDA algorithm...


I presume this is in some specialized package that you have not told
us about -- topicmodels maybe? It is therefore off topic here. In any
case, this is the sort of question for which you should contact the
package maintainer (?maintainer).

As your question may also intersect with high performance computing
considerations, you might want to post  it on the R-Sig-HPC list,
https://stat.ethz.ch/mailman/listinfo/r-sig-hpc

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Sat, Jan 29, 2022 at 8:27 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> dear members,
>                           I want to run LDA(latent Dirichlet allocation) on certain news articles. i have the following questions:
>
>
>   1.  Is there any way to know the progress of the execution of the LDA algorithm?
>   2.  I read in SO that if you have more memory, faster is the execution time of LDA. I am using AWS z1d instance with 48 cores and about 325 GB RAM. I have multiple categories of news, but one of them is much larger than others, containing about 25000 articles. Is it preferable to send those categories individually to different processors, and whether R frees up the memory after running on the smaller categories so that the largest category can run with more memory? Or is it preferable to first run the smaller sets, finish the job, and then run the largest category?
>
> Thanking You,
> Yours sincerely,
> AKSHAY M KULKARNI
>

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sun Jan 30 17:36:59 2022
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 30 Jan 2022 08:36:59 -0800
Subject: [R] progress of LDA algorithm...
In-Reply-To: <PU4P216MB1568A619F0D0EEB9B8276DB7C8249@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568F966958368EBBF11D034C8239@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbTwZSBmxuvOa30-7XXGBBc1KZ-L=410BJiJNum28P8nbA@mail.gmail.com>
 <352590855.2049481.1643496316378@mail.yahoo.com>
 <PU4P216MB1568A619F0D0EEB9B8276DB7C8249@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbR5nnc=Ka2EuTE8QA_Pg-Pi7kCvtfY2An0f2C5H=sk97w@mail.gmail.com>

I am not an expert, but I believe your extrapolation idea is unsound.
Again, post on the HPC list to get expert feedback instead of trying
to reinvent your own wheel. I will not respond further.

Bert Gunter

"The trouble with having an open mind is that people keep coming along
and sticking things into it."
-- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )

On Sun, Jan 30, 2022 at 3:02 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> dear Avi and Bert,
>                               I think I got my answer. I will just run it with a small sample and check the execution time and extrapolate from that. By the way, LDA (I am using topicmodels package) cannot be parallelized, right?     Thanks in advance.
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> ________________________________
> From: R-help <r-help-bounces at r-project.org> on behalf of Avi Gross via R-help <r-help at r-project.org>
> Sent: Sunday, January 30, 2022 4:15 AM
> Cc: r-help at r-project.org <r-help at r-project.org>
> Subject: Re: [R] progress of LDA algorithm...
>
> I agree with Bert that this is way off topic and one few here know (or care) about.
>
> Generally, if a package has functionality with manual pages, it may have abilities defined such as setting verbose=TRUE or to various levels of output that may satisfy the request or they may make a copy of code including their print or logging statements and so on.
>
> If the request is more general such as how to run a program under some debugging method and set checkpoints at which some reporting is done, that too is a bit outside the normal uses of this forum.
>
> The usual suggestion here is to contact the package maintainer, with no guarantee of getting any useful response, or find a forum way more specific than R HELP just because part of the package is in R.
>
> As it happens, the lda() function being discussed may (or may not) be in the MASS package. Looking at the documentation, I saw no obvious hook to show it as it makes progress. Of course Akshay can do some external testing using standard R timing mechanisms to see how long it takes to do just some of the news categories without going in to the details of the function called and that might partially answer his question. Asking how to do that might fit the parameters here.
>
>
> -----Original Message-----
> From: Bert Gunter <bgunter.4567 at gmail.com>
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Sent: Sat, Jan 29, 2022 3:34 pm
> Subject: Re: [R] progress of LDA algorithm...
>
>
> I presume this is in some specialized package that you have not told
> us about -- topicmodels maybe? It is therefore off topic here. In any
> case, this is the sort of question for which you should contact the
> package maintainer (?maintainer).
>
> As your question may also intersect with high performance computing
> considerations, you might want to post  it on the R-Sig-HPC list,
> https://stat.ethz.ch/mailman/listinfo/r-sig-hpc
>
> Bert Gunter
>
> "The trouble with having an open mind is that people keep coming along
> and sticking things into it."
> -- Opus (aka Berkeley Breathed in his "Bloom County" comic strip )
>
> On Sat, Jan 29, 2022 at 8:27 AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
> >
> > dear members,
> >                           I want to run LDA(latent Dirichlet allocation) on certain news articles. i have the following questions:
> >
> >
> >   1.  Is there any way to know the progress of the execution of the LDA algorithm?
> >   2.  I read in SO that if you have more memory, faster is the execution time of LDA. I am using AWS z1d instance with 48 cores and about 325 GB RAM. I have multiple categories of news, but one of them is much larger than others, containing about 25000 articles. Is it preferable to send those categories individually to different processors, and whether R frees up the memory after running on the smaller categories so that the largest category can run with more memory? Or is it preferable to first run the smaller sets, finish the job, and then run the largest category?
> >
> > Thanking You,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From v@|kremk @end|ng |rom gm@||@com  Sun Jan 30 18:00:24 2022
From: v@|kremk @end|ng |rom gm@||@com (Val)
Date: Sun, 30 Jan 2022 11:00:24 -0600
Subject: [R] Row exclude
In-Reply-To: <CAE-dL2rT+B_Hszjf0ewUJuj5=0=iiC4UbqbNgt1h_U2dXo3e5w@mail.gmail.com>
References: <CAJOiR6a7-foEUSQD9yGM2ym6jTA+f4maY=pcRjy_4J+Yq4TvxA@mail.gmail.com>
 <CAGxFJbRQDfLf=UJPnFi-TRKvYfAHsr4YfriPh5=oEAOy4d=F2g@mail.gmail.com>
 <CAE-dL2rT5RO-KTQXY-jOvyOaqmuNviSHAS+5ZvPwvd8-e-uBJg@mail.gmail.com>
 <CAJOiR6aKPdN-KTVdqqz2VDP0syXtn5vBOu_F4nSp_gX1kpDkQA@mail.gmail.com>
 <CAE-dL2rT+B_Hszjf0ewUJuj5=0=iiC4UbqbNgt1h_U2dXo3e5w@mail.gmail.com>
Message-ID: <CAJOiR6ZGKbY--mR-i4fGH70v-hLz8fX6aaKAoo=Uo=K=7QO1pQ@mail.gmail.com>

Thank you David.

What about if I want to list the excluded rows?
I used this
    (dat3 <- dat1[unique(c(BadName, BadAge, BadWeight)), ])

It did not work.The desired output  is,
  Alex,  20,  13X
 John,  3BC, 175
 Jack3, 34,  140

Thank you,

On Sat, Jan 29, 2022 at 10:15 PM David Carlson <dcarlson at tamu.edu> wrote:

> It is possible that there would be errors on the same row for different
> columns. This does not happen in your example. If row 4 was "John6, 3BC,
> 175X" then row 4 would be included 3 times, but we only need to remove it
> once. Removing the duplicates is not necessary since R would not get
> confused, but length(unique(c(BadName, BadAge, BadWeight)) indicates how
> many lines are being removed.
>
> David
>
> On Sat, Jan 29, 2022 at 8:32 PM Val <valkremk at gmail.com> wrote:
>
>> Thank you David for your help. I just have one question on this. What is
>> the purpose of  using the "unique" function on this?   (dat2 <-
>> dat1[-unique(c(BadName, BadAge, BadWeight)), ])   I got the same result
>> without using it. ZjQcmQRYFpfptBannerStart
>> This Message Is From an External Sender
>> This message came from outside your organization.
>> ZjQcmQRYFpfptBannerEnd
>> Thank you David for your help.
>>
>> I just have one question on this. What is the purpose of  using the
>> "unique" function on this?
>>   (dat2 <- dat1[-unique(c(BadName, BadAge, BadWeight)), ])
>>
>> I got the same result without using it.
>>        (dat2 <- dat1[-(c(BadName, BadAge, BadWeight)), ])
>>
>> My concern is when I am applying this for the large data set the
>> "unique"  function may consume resources(time  and memory).
>>
>> Thank you.
>>
>> On Sat, Jan 29, 2022 at 12:30 AM David Carlson <dcarlson at tamu.edu> wrote:
>>
>>> Given that you know which columns should be numeric and which should be
>>> character, finding characters in numeric columns or numbers in character
>>> columns is not difficult. Your data frame consists of three character
>>> columns so you can use regular expressions as Bert mentioned. First you
>>> should strip the whitespace out of your data:
>>>
>>> dat1 <-read.table(text="Name, Age, Weight
>>>   Alex,  20,  13X
>>>   Bob,  25,  142
>>>   Carol, 24,  120
>>>   John,  3BC,  175
>>>   Katy,  35,  160
>>>   Jack3, 34,  140",sep=",", header=TRUE, stringsAsFactors=FALSE,
>>> strip.white=TRUE)
>>>
>>> Now check to see if all of the fields are character as expected.
>>>
>>> sapply(dat1, typeof)
>>> #        Name         Age      Weight
>>> # "character" "character" "character"
>>>
>>> Now identify character variables containing numbers and numeric
>>> variables containing characters:
>>>
>>> BadName <- which(grepl("[[:digit:]]", dat1$Name))
>>> BadAge <- which(grepl("[[:alpha:]]", dat1$Age))
>>> BadWeight <- which(grepl("[[:alpha:]]", dat1$Weight))
>>>
>>> Next remove those rows:
>>>
>>> (dat2 <- dat1[-unique(c(BadName, BadAge, BadWeight)), ])
>>> #    Name Age Weight
>>> #  2   Bob  25    142
>>> #  3 Carol  24    120
>>> #  5  Katy  35    160
>>>
>>> You still need to convert Age and Weight to numeric, e.g. dat2$Age <-
>>> as.numeric(dat2$Age).
>>>
>>> David Carlson
>>>
>>>
>>> On Fri, Jan 28, 2022 at 11:59 PM Bert Gunter <bgunter.4567 at gmail.com>
>>> wrote:
>>>
>>>> As character 'polluted' entries will cause a column to be read in (via
>>>> read.table and relatives) as factor or character data, this sounds like a
>>>> job for regular expressions. If you are not familiar with this subject,
>>>> time to learn. And, yes, ZjQcmQRYFpfptBannerStart
>>>> This Message Is From an External Sender
>>>> This message came from outside your organization.
>>>> ZjQcmQRYFpfptBannerEnd
>>>>
>>>> As character 'polluted' entries will cause a column to be read in (via
>>>> read.table and relatives) as factor or character data, this sounds like a
>>>> job for regular expressions. If you are not familiar with this subject,
>>>> time to learn. And, yes, some heavy lifting will be required.
>>>> See ?regexp for a start maybe? Or the stringr package?
>>>>
>>>> Cheers,
>>>> Bert
>>>>
>>>>
>>>>
>>>>
>>>> On Fri, Jan 28, 2022, 7:08 PM Val <valkremk at gmail.com> wrote:
>>>>
>>>> > Hi All,
>>>> >
>>>> > I want to remove rows that contain a character string in an integer
>>>> > column or a digit in a character column.
>>>> >
>>>> > Sample data
>>>> >
>>>> > dat1 <-read.table(text="Name, Age, Weight
>>>> >  Alex,  20,  13X
>>>> >  Bob,   25,  142
>>>> >  Carol, 24,  120
>>>> >  John,  3BC,  175
>>>> >  Katy,  35,  160
>>>> >  Jack3, 34,  140",sep=",",header=TRUE,stringsAsFactors=F)
>>>> >
>>>> > If the Age/Weight column contains any character(s) then remove
>>>> > if the Name  column contains an digit then remove that row
>>>> > Desired output
>>>> >
>>>> >    Name   Age weight
>>>> > 1   Bob     25    142
>>>> > 2   Carol   24    120
>>>> > 3   Katy    35    160
>>>> >
>>>> > Thank you,
>>>> >
>>>> > ______________________________________________
>>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
>>>> > PLEASE do read the posting guide
>>>> > https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$
>>>> > and provide commented, minimal, self-contained, reproducible code.
>>>> >
>>>>
>>>> 	[[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, seehttps://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
>>>> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>
>>>>

	[[alternative HTML version deleted]]


From @te|@n@b@||eck @end|ng |rom gm@||@com  Sun Jan 30 10:16:44 2022
From: @te|@n@b@||eck @end|ng |rom gm@||@com (Stefan Fleck)
Date: Sun, 30 Jan 2022 10:16:44 +0100
Subject: [R] Weird behaviour of order() when having multiple ties
Message-ID: <CAFVVV-gzoE2UDGMga_Pgbix=BmZj5WN2nA1wqY9s75_tcKQiWA@mail.gmail.com>

I am experiencing a weird behavior of `order()` for numeric vectors. I
tested on 3.6.2 and 4.1.2 for windows and R 4.0.2 on ubuntu. Can anyone
confirm?

order(
  c(
    0.6,
    0.5,
    0.3,
    0.2,
    0.1,
    0.1
  )
)
## Result [should be in order]
[1] 5 6 4 3 2 1

The sort order is obviously wrong. This only occurs if i have multiple
ties. The problem does _not_ occur for decreasing = TRUE.

	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Sun Jan 30 21:00:13 2022
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Sun, 30 Jan 2022 20:00:13 +0000
Subject: [R] 
 [External] Weird behaviour of order() when having multiple ties
In-Reply-To: <CAFVVV-gzoE2UDGMga_Pgbix=BmZj5WN2nA1wqY9s75_tcKQiWA@mail.gmail.com>
References: <CAFVVV-gzoE2UDGMga_Pgbix=BmZj5WN2nA1wqY9s75_tcKQiWA@mail.gmail.com>
Message-ID: <BL1PR11MB5239432B2669D24516983141D2249@BL1PR11MB5239.namprd11.prod.outlook.com>

when there are ties it doesn't matter which is first.
in a situation where it does matter, you will need a tiebreaker column.
________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Stefan Fleck <stefan.b.fleck at gmail.com>
Sent: Sunday, January 30, 2022 4:16:44 AM
To: r-help at r-project.org <r-help at r-project.org>
Subject: [External] [R] Weird behaviour of order() when having multiple ties

I am experiencing a weird behavior of `order()` for numeric vectors. I
tested on 3.6.2 and 4.1.2 for windows and R 4.0.2 on ubuntu. Can anyone
confirm?

order(
  c(
    0.6,
    0.5,
    0.3,
    0.2,
    0.1,
    0.1
  )
)
## Result [should be in order]
[1] 5 6 4 3 2 1

The sort order is obviously wrong. This only occurs if i have multiple
ties. The problem does _not_ occur for decreasing = TRUE.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7Crmh%40temple.edu%7Cbae20314c2314a5cc7cd08d9e429e33f%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637791692024451993%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=O6R%2FNM6IdPzP8RY3JIWfLgmkE%2B0KcVyYBxoRMo8v2dk%3D&amp;reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7Crmh%40temple.edu%7Cbae20314c2314a5cc7cd08d9e429e33f%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637791692024451993%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=6hlfMjZLzopVzGnFVWlGnoEqvZBQwXPlxMuZ2sglEUk%3D&amp;reserved=0
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Sun Jan 30 21:15:45 2022
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Sun, 30 Jan 2022 20:15:45 +0000
Subject: [R] 
 [External] Weird behaviour of order() when having multiple ties
In-Reply-To: <CAFVVV-i83ad8OWs-8veC3dpnFNmaOenuNLWHpksuEH1za=Gr3w@mail.gmail.com>
References: <CAFVVV-gzoE2UDGMga_Pgbix=BmZj5WN2nA1wqY9s75_tcKQiWA@mail.gmail.com>
 <BL1PR11MB5239432B2669D24516983141D2249@BL1PR11MB5239.namprd11.prod.outlook.com>
 <CAFVVV-i83ad8OWs-8veC3dpnFNmaOenuNLWHpksuEH1za=Gr3w@mail.gmail.com>
Message-ID: <1EB6A869-5076-4ACA-9205-9434E5606BA0@temple.edu>

> x <- c(2,3,4,1,1,1,1,1)
> o.x <- order(x)
> o.x
[1] 4 5 6 7 8 1 2 3
> x[o.x]
[1] 1 1 1 1 1 2 3 4
> sort(x)
[1] 1 1 1 1 1 2 3 4
> 


order() is behaving correctly.

See ?order for details.


> On Jan 30, 2022, at 15:07, Stefan Fleck <stefan.b.fleck at gmail.com> wrote:
> 
> order(c(2,3,4,1,1,1,1,1))


From @v|gro@@ @end|ng |rom ver|zon@net  Sun Jan 30 21:17:03 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Sun, 30 Jan 2022 20:17:03 +0000 (UTC)
Subject: [R] Weird behaviour of order() when having multiple ties
In-Reply-To: <CAFVVV-gzoE2UDGMga_Pgbix=BmZj5WN2nA1wqY9s75_tcKQiWA@mail.gmail.com>
References: <CAFVVV-gzoE2UDGMga_Pgbix=BmZj5WN2nA1wqY9s75_tcKQiWA@mail.gmail.com>
Message-ID: <323833082.2134270.1643573823504@mail.yahoo.com>

Stefan,

I did not replicate your results as it works fine and applying the order result in a sorted properly result:

c(0.6,
  0.5,
  0.3,
  0.2,
  0.1,
  0.1)[order(c(0.6,
               0.5,
               0.3,
               0.2,
               0.1,
               0.1))]

[1] 0.1 0.1 0.2 0.3 0.5 0.6

I am using a more recent version of R, but for something this basic, it should not matter as even older versions should do this fine. 

R version 4.1.2 (2021-11-01) -- "Bird Hippie"
Copyright (C) 2021 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)

Consider restarting your R cleanly with no variables in place before reporting an error. 

-----Original Message-----
From: Stefan Fleck <stefan.b.fleck at gmail.com>
To: r-help at r-project.org
Sent: Sun, Jan 30, 2022 4:16 am
Subject: [R] Weird behaviour of order() when having multiple ties

I am experiencing a weird behavior of `order()` for numeric vectors. I
tested on 3.6.2 and 4.1.2 for windows and R 4.0.2 on ubuntu. Can anyone
confirm?

order(
? c(
? ? 0.6,
? ? 0.5,
? ? 0.3,
? ? 0.2,
? ? 0.1,
? ? 0.1
? )
)
## Result [should be in order]
[1] 5 6 4 3 2 1

The sort order is obviously wrong. This only occurs if i have multiple
ties. The problem does _not_ occur for decreasing = TRUE.

??? [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Jan 30 21:31:09 2022
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 30 Jan 2022 20:31:09 +0000
Subject: [R] Weird behaviour of order() when having multiple ties
In-Reply-To: <CAFVVV-gzoE2UDGMga_Pgbix=BmZj5WN2nA1wqY9s75_tcKQiWA@mail.gmail.com>
References: <CAFVVV-gzoE2UDGMga_Pgbix=BmZj5WN2nA1wqY9s75_tcKQiWA@mail.gmail.com>
Message-ID: <00cdcd73-d039-e4f1-3776-2598e67bebf9@sapo.pt>

Hello,

I am not seeing an error, the order is right:

x <- c(
   0.6,
   0.5,
   0.3,
   0.2,
   0.1,
   0.1
)
(i <- order(x))
#> [1] 5 6 4 3 2 1
x[i]
#> [1] 0.1 0.1 0.2 0.3 0.5 0.6


Hope this helps,

Rui Barradas

?s 09:16 de 30/01/2022, Stefan Fleck escreveu:
> I am experiencing a weird behavior of `order()` for numeric vectors. I
> tested on 3.6.2 and 4.1.2 for windows and R 4.0.2 on ubuntu. Can anyone
> confirm?
> 
> order(
>    c(
>      0.6,
>      0.5,
>      0.3,
>      0.2,
>      0.1,
>      0.1
>    )
> )
> ## Result [should be in order]
> [1] 5 6 4 3 2 1
> 
> The sort order is obviously wrong. This only occurs if i have multiple
> ties. The problem does _not_ occur for decreasing = TRUE.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Jan 30 22:14:06 2022
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 30 Jan 2022 13:14:06 -0800
Subject: [R] Weird behaviour of order() when having multiple ties
In-Reply-To: <CAFVVV-gzoE2UDGMga_Pgbix=BmZj5WN2nA1wqY9s75_tcKQiWA@mail.gmail.com>
References: <CAFVVV-gzoE2UDGMga_Pgbix=BmZj5WN2nA1wqY9s75_tcKQiWA@mail.gmail.com>
Message-ID: <4A8D18F9-B370-4B3E-A17C-43981421C7BC@dcn.davis.ca.us>

Why should 6,5 be more correct than 5,6? How is R supposed to reach that conclusion based on comparing values?


On January 30, 2022 1:16:44 AM PST, Stefan Fleck <stefan.b.fleck at gmail.com> wrote:
>I am experiencing a weird behavior of `order()` for numeric vectors. I
>tested on 3.6.2 and 4.1.2 for windows and R 4.0.2 on ubuntu. Can anyone
>confirm?
>
>order(
>  c(
>    0.6,
>    0.5,
>    0.3,
>    0.2,
>    0.1,
>    0.1
>  )
>)
>## Result [should be in order]
>[1] 5 6 4 3 2 1
>
>The sort order is obviously wrong. This only occurs if i have multiple
>ties. The problem does _not_ occur for decreasing = TRUE.
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From dc@r|@on @end|ng |rom t@mu@edu  Mon Jan 31 01:27:05 2022
From: dc@r|@on @end|ng |rom t@mu@edu (David Carlson)
Date: Sun, 30 Jan 2022 18:27:05 -0600
Subject: [R] Row exclude
In-Reply-To: <CAJOiR6ZGKbY--mR-i4fGH70v-hLz8fX6aaKAoo=Uo=K=7QO1pQ@mail.gmail.com>
References: <CAJOiR6a7-foEUSQD9yGM2ym6jTA+f4maY=pcRjy_4J+Yq4TvxA@mail.gmail.com>
 <CAGxFJbRQDfLf=UJPnFi-TRKvYfAHsr4YfriPh5=oEAOy4d=F2g@mail.gmail.com>
 <CAE-dL2rT5RO-KTQXY-jOvyOaqmuNviSHAS+5ZvPwvd8-e-uBJg@mail.gmail.com>
 <CAJOiR6aKPdN-KTVdqqz2VDP0syXtn5vBOu_F4nSp_gX1kpDkQA@mail.gmail.com>
 <CAE-dL2rT+B_Hszjf0ewUJuj5=0=iiC4UbqbNgt1h_U2dXo3e5w@mail.gmail.com>
 <CAJOiR6ZGKbY--mR-i4fGH70v-hLz8fX6aaKAoo=Uo=K=7QO1pQ@mail.gmail.com>
Message-ID: <CAE-dL2qW3CnU9TBaYLmYmkVF6vq=aFwWuAJB=vtqut6e8NaPaw@mail.gmail.com>

You need to add "-": ` (dat3 <- dat1[-unique(c(BadName, BadAge,
BadWeight)), ])` which makes the command NOT).

David

On Sun, Jan 30, 2022 at 11:00 AM Val <valkremk at gmail.com> wrote:

> Thank you David. What about if I want to list the excluded rows? I used
> this     (dat3 <- dat1[unique(c(BadName, BadAge, BadWeight)), ]) It did not
> work.The desired output  is,   Alex,  20,  13X  John,  3BC, 175  Jack3, 34,
>  140 ? ? ? ? ? ? ? ? ZjQcmQRYFpfptBannerStart
> This Message Is From an External Sender
> This message came from outside your organization.
> ZjQcmQRYFpfptBannerEnd
> Thank you David.
>
> What about if I want to list the excluded rows?
> I used this
>     (dat3 <- dat1[unique(c(BadName, BadAge, BadWeight)), ])
>
> It did not work.The desired output  is,
>   Alex,  20,  13X
>  John,  3BC, 175
>  Jack3, 34,  140
>
> Thank you,
>
> On Sat, Jan 29, 2022 at 10:15 PM David Carlson <dcarlson at tamu.edu> wrote:
>
>> It is possible that there would be errors on the same row for different
>> columns. This does not happen in your example. If row 4 was "John6, 3BC,
>> 175X" then row 4 would be included 3 times, but we only need to remove it
>> once. Removing the duplicates is not necessary since R would not get
>> confused, but length(unique(c(BadName, BadAge, BadWeight)) indicates how
>> many lines are being removed.
>>
>> David
>>
>> On Sat, Jan 29, 2022 at 8:32 PM Val <valkremk at gmail.com> wrote:
>>
>>> Thank you David for your help. I just have one question on this. What is
>>> the purpose of  using the "unique" function on this?   (dat2 <-
>>> dat1[-unique(c(BadName, BadAge, BadWeight)), ])   I got the same result
>>> without using it. ZjQcmQRYFpfptBannerStart
>>> This Message Is From an External Sender
>>> This message came from outside your organization.
>>> ZjQcmQRYFpfptBannerEnd
>>> Thank you David for your help.
>>>
>>> I just have one question on this. What is the purpose of  using the
>>> "unique" function on this?
>>>   (dat2 <- dat1[-unique(c(BadName, BadAge, BadWeight)), ])
>>>
>>> I got the same result without using it.
>>>        (dat2 <- dat1[-(c(BadName, BadAge, BadWeight)), ])
>>>
>>> My concern is when I am applying this for the large data set the
>>> "unique"  function may consume resources(time  and memory).
>>>
>>> Thank you.
>>>
>>> On Sat, Jan 29, 2022 at 12:30 AM David Carlson <dcarlson at tamu.edu>
>>> wrote:
>>>
>>>> Given that you know which columns should be numeric and which should be
>>>> character, finding characters in numeric columns or numbers in character
>>>> columns is not difficult. Your data frame consists of three character
>>>> columns so you can use regular expressions as Bert mentioned. First
>>>> you should strip the whitespace out of your data:
>>>>
>>>> dat1 <-read.table(text="Name, Age, Weight
>>>>   Alex,  20,  13X
>>>>   Bob,  25,  142
>>>>   Carol, 24,  120
>>>>   John,  3BC,  175
>>>>   Katy,  35,  160
>>>>   Jack3, 34,  140",sep=",", header=TRUE, stringsAsFactors=FALSE,
>>>> strip.white=TRUE)
>>>>
>>>> Now check to see if all of the fields are character as expected.
>>>>
>>>> sapply(dat1, typeof)
>>>> #        Name         Age      Weight
>>>> # "character" "character" "character"
>>>>
>>>> Now identify character variables containing numbers and numeric
>>>> variables containing characters:
>>>>
>>>> BadName <- which(grepl("[[:digit:]]", dat1$Name))
>>>> BadAge <- which(grepl("[[:alpha:]]", dat1$Age))
>>>> BadWeight <- which(grepl("[[:alpha:]]", dat1$Weight))
>>>>
>>>> Next remove those rows:
>>>>
>>>> (dat2 <- dat1[-unique(c(BadName, BadAge, BadWeight)), ])
>>>> #    Name Age Weight
>>>> #  2   Bob  25    142
>>>> #  3 Carol  24    120
>>>> #  5  Katy  35    160
>>>>
>>>> You still need to convert Age and Weight to numeric, e.g. dat2$Age <-
>>>> as.numeric(dat2$Age).
>>>>
>>>> David Carlson
>>>>
>>>>
>>>> On Fri, Jan 28, 2022 at 11:59 PM Bert Gunter <bgunter.4567 at gmail.com>
>>>> wrote:
>>>>
>>>>> As character 'polluted' entries will cause a column to be read in (via
>>>>> read.table and relatives) as factor or character data, this sounds like a
>>>>> job for regular expressions. If you are not familiar with this subject,
>>>>> time to learn. And, yes, ZjQcmQRYFpfptBannerStart
>>>>> This Message Is From an External Sender
>>>>> This message came from outside your organization.
>>>>> ZjQcmQRYFpfptBannerEnd
>>>>>
>>>>> As character 'polluted' entries will cause a column to be read in (via
>>>>> read.table and relatives) as factor or character data, this sounds like a
>>>>> job for regular expressions. If you are not familiar with this subject,
>>>>> time to learn. And, yes, some heavy lifting will be required.
>>>>> See ?regexp for a start maybe? Or the stringr package?
>>>>>
>>>>> Cheers,
>>>>> Bert
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> On Fri, Jan 28, 2022, 7:08 PM Val <valkremk at gmail.com> wrote:
>>>>>
>>>>> > Hi All,
>>>>> >
>>>>> > I want to remove rows that contain a character string in an integer
>>>>> > column or a digit in a character column.
>>>>> >
>>>>> > Sample data
>>>>> >
>>>>> > dat1 <-read.table(text="Name, Age, Weight
>>>>> >  Alex,  20,  13X
>>>>> >  Bob,   25,  142
>>>>> >  Carol, 24,  120
>>>>> >  John,  3BC,  175
>>>>> >  Katy,  35,  160
>>>>> >  Jack3, 34,  140",sep=",",header=TRUE,stringsAsFactors=F)
>>>>> >
>>>>> > If the Age/Weight column contains any character(s) then remove
>>>>> > if the Name  column contains an digit then remove that row
>>>>> > Desired output
>>>>> >
>>>>> >    Name   Age weight
>>>>> > 1   Bob     25    142
>>>>> > 2   Carol   24    120
>>>>> > 3   Katy    35    160
>>>>> >
>>>>> > Thank you,
>>>>> >
>>>>> > ______________________________________________
>>>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> > https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
>>>>> > PLEASE do read the posting guide
>>>>> > https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$
>>>>> > and provide commented, minimal, self-contained, reproducible code.
>>>>> >
>>>>>
>>>>> 	[[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, seehttps://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVXhZB_0c$
>>>>> PLEASE do read the posting guide https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!KwNVnqRv!QW1WPKY5eSNT7sMW28dnAKV7IXWvIc4UwOwUHkJgJ8uuGUrIAXvRjZWVRmZSfcI$
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>>

	[[alternative HTML version deleted]]


From @te|@n@b@||eck @end|ng |rom gm@||@com  Sun Jan 30 21:07:19 2022
From: @te|@n@b@||eck @end|ng |rom gm@||@com (Stefan Fleck)
Date: Sun, 30 Jan 2022 21:07:19 +0100
Subject: [R] 
 [External] Weird behaviour of order() when having multiple ties
In-Reply-To: <BL1PR11MB5239432B2669D24516983141D2249@BL1PR11MB5239.namprd11.prod.outlook.com>
References: <CAFVVV-gzoE2UDGMga_Pgbix=BmZj5WN2nA1wqY9s75_tcKQiWA@mail.gmail.com>
 <BL1PR11MB5239432B2669D24516983141D2249@BL1PR11MB5239.namprd11.prod.outlook.com>
Message-ID: <CAFVVV-i83ad8OWs-8veC3dpnFNmaOenuNLWHpksuEH1za=Gr3w@mail.gmail.com>

it's not about the sort order of the ties, shouldn't all the 1s in
order(c(2,3,4,1,1,1,1,1)) come before 2,3,4? because that's not what
happening

On Sun, Jan 30, 2022 at 9:00 PM Richard M. Heiberger <rmh at temple.edu> wrote:

> when there are ties it doesn't matter which is first.
> in a situation where it does matter, you will need a tiebreaker column.
> ------------------------------
> *From:* R-help <r-help-bounces at r-project.org> on behalf of Stefan Fleck <
> stefan.b.fleck at gmail.com>
> *Sent:* Sunday, January 30, 2022 4:16:44 AM
> *To:* r-help at r-project.org <r-help at r-project.org>
> *Subject:* [External] [R] Weird behaviour of order() when having multiple
> ties
>
> I am experiencing a weird behavior of `order()` for numeric vectors. I
> tested on 3.6.2 and 4.1.2 for windows and R 4.0.2 on ubuntu. Can anyone
> confirm?
>
> order(
>   c(
>     0.6,
>     0.5,
>     0.3,
>     0.2,
>     0.1,
>     0.1
>   )
> )
> ## Result [should be in order]
> [1] 5 6 4 3 2 1
>
> The sort order is obviously wrong. This only occurs if i have multiple
> ties. The problem does _not_ occur for decreasing = TRUE.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7Crmh%40temple.edu%7Cbae20314c2314a5cc7cd08d9e429e33f%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637791692024451993%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=O6R%2FNM6IdPzP8RY3JIWfLgmkE%2B0KcVyYBxoRMo8v2dk%3D&amp;reserved=0
> PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7Crmh%40temple.edu%7Cbae20314c2314a5cc7cd08d9e429e33f%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637791692024451993%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=6hlfMjZLzopVzGnFVWlGnoEqvZBQwXPlxMuZ2sglEUk%3D&amp;reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @te|@n@b@||eck @end|ng |rom gm@||@com  Sun Jan 30 21:29:58 2022
From: @te|@n@b@||eck @end|ng |rom gm@||@com (Stefan Fleck)
Date: Sun, 30 Jan 2022 21:29:58 +0100
Subject: [R] Weird behaviour of order() when having multiple ties
In-Reply-To: <323833082.2134270.1643573823504@mail.yahoo.com>
References: <CAFVVV-gzoE2UDGMga_Pgbix=BmZj5WN2nA1wqY9s75_tcKQiWA@mail.gmail.com>
 <323833082.2134270.1643573823504@mail.yahoo.com>
Message-ID: <CAFVVV-hA3QK6PYQexUhyzYasLHvoK+ASsNWXH6XypA5zuPuQGQ@mail.gmail.com>

Thanks everyone, i guess i just had a too long and confusing coding
session. I tried it again and now everything seems to work. sorry for the
fuzz.

On Sun, Jan 30, 2022 at 9:17 PM Avi Gross <avigross at verizon.net> wrote:

> Stefan,
>
> I did not replicate your results as it works fine and applying the order
> result in a sorted properly result:
>
> c(0.6,
>   0.5,
>   0.3,
>   0.2,
>   0.1,
>   0.1)[order(c(0.6,
>                0.5,
>                0.3,
>                0.2,
>                0.1,
>                0.1))]
>
> [1] 0.1 0.1 0.2 0.3 0.5 0.6
>
> I am using a more recent version of R, but for something this basic, it
> should not matter as even older versions should do this fine.
>
> R version 4.1.2 (2021-11-01) -- "Bird Hippie"
> Copyright (C) 2021 The R Foundation for Statistical Computing
> Platform: x86_64-w64-mingw32/x64 (64-bit)
>
> Consider restarting your R cleanly with no variables in place before
> reporting an error.
>
> -----Original Message-----
> From: Stefan Fleck <stefan.b.fleck at gmail.com>
> To: r-help at r-project.org
> Sent: Sun, Jan 30, 2022 4:16 am
> Subject: [R] Weird behaviour of order() when having multiple ties
>
> I am experiencing a weird behavior of `order()` for numeric vectors. I
> tested on 3.6.2 and 4.1.2 for windows and R 4.0.2 on ubuntu. Can anyone
> confirm?
>
> order(
>   c(
>     0.6,
>     0.5,
>     0.3,
>     0.2,
>     0.1,
>     0.1
>   )
> )
> ## Result [should be in order]
> [1] 5 6 4 3 2 1
>
> The sort order is obviously wrong. This only occurs if i have multiple
> ties. The problem does _not_ occur for decreasing = TRUE.
>
>     [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Mon Jan 31 15:04:23 2022
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Mon, 31 Jan 2022 15:04:23 +0100
Subject: [R] 
 [External] Weird behaviour of order() when having multiple ties
In-Reply-To: <CAFVVV-i83ad8OWs-8veC3dpnFNmaOenuNLWHpksuEH1za=Gr3w@mail.gmail.com>
References: <CAFVVV-gzoE2UDGMga_Pgbix=BmZj5WN2nA1wqY9s75_tcKQiWA@mail.gmail.com>
 <BL1PR11MB5239432B2669D24516983141D2249@BL1PR11MB5239.namprd11.prod.outlook.com>
 <CAFVVV-i83ad8OWs-8veC3dpnFNmaOenuNLWHpksuEH1za=Gr3w@mail.gmail.com>
Message-ID: <25079.60519.512897.902383@stat.math.ethz.ch>

>>>>> Stefan Fleck 
>>>>>     on Sun, 30 Jan 2022 21:07:19 +0100 writes:

    > it's not about the sort order of the ties, shouldn't all the 1s in
    > order(c(2,3,4,1,1,1,1,1)) come before 2,3,4? because that's not what
    > happening

aaah.. now we are getting somewhere:
It looks you have always confused order() with sort() ...
have you ?


    > On Sun, Jan 30, 2022 at 9:00 PM Richard M. Heiberger <rmh at temple.edu> wrote:

    >> when there are ties it doesn't matter which is first.
    >> in a situation where it does matter, you will need a tiebreaker column.
    >> ------------------------------
    >> *From:* R-help <r-help-bounces at r-project.org> on behalf of Stefan Fleck <
    >> stefan.b.fleck at gmail.com>
    >> *Sent:* Sunday, January 30, 2022 4:16:44 AM
    >> *To:* r-help at r-project.org <r-help at r-project.org>
    >> *Subject:* [External] [R] Weird behaviour of order() when having multiple
    >> ties
    >> 
    >> I am experiencing a weird behavior of `order()` for numeric vectors. I
    >> tested on 3.6.2 and 4.1.2 for windows and R 4.0.2 on ubuntu. Can anyone
    >> confirm?
    >> 
    >> order(
    >> c(
    >> 0.6,
    >> 0.5,
    >> 0.3,
    >> 0.2,
    >> 0.1,
    >> 0.1
    >> )
    >> )
    >> ## Result [should be in order]
    >> [1] 5 6 4 3 2 1
    >> 
    >> The sort order is obviously wrong. This only occurs if i have multiple
    >> ties. The problem does _not_ occur for decreasing = TRUE.
    >> 
    >> [[alternative HTML version deleted]]
    >> 
    >> ______________________________________________
    >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    >> 
    >> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&amp;data=04%7C01%7Crmh%40temple.edu%7Cbae20314c2314a5cc7cd08d9e429e33f%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637791692024451993%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=O6R%2FNM6IdPzP8RY3JIWfLgmkE%2B0KcVyYBxoRMo8v2dk%3D&amp;reserved=0
    >> PLEASE do read the posting guide
    >> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&amp;data=04%7C01%7Crmh%40temple.edu%7Cbae20314c2314a5cc7cd08d9e429e33f%7C716e81efb52244738e3110bd02ccf6e5%7C0%7C0%7C637791692024451993%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=6hlfMjZLzopVzGnFVWlGnoEqvZBQwXPlxMuZ2sglEUk%3D&amp;reserved=0
    >> and provide commented, minimal, self-contained, reproducible code.
    >> 

    > [[alternative HTML version deleted]]

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    > https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    > and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Mon Jan 31 16:07:58 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Mon, 31 Jan 2022 15:07:58 +0000
Subject: [R] 
 [External] Weird behaviour of order() when having multiple ties
In-Reply-To: <25079.60519.512897.902383@stat.math.ethz.ch>
References: <CAFVVV-gzoE2UDGMga_Pgbix=BmZj5WN2nA1wqY9s75_tcKQiWA@mail.gmail.com>
 <BL1PR11MB5239432B2669D24516983141D2249@BL1PR11MB5239.namprd11.prod.outlook.com>
 <CAFVVV-i83ad8OWs-8veC3dpnFNmaOenuNLWHpksuEH1za=Gr3w@mail.gmail.com>
 <25079.60519.512897.902383@stat.math.ethz.ch>
Message-ID: <BN6PR2201MB1553A7948D7F554B3B76031ECF259@BN6PR2201MB1553.namprd22.prod.outlook.com>

Dat1 <- c(0.6, 0.5, 0.3, 0.2, 0.1, 0.1, 0.2)
print(order(Dat1))
print(sort(Dat1))

Compare output



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Martin Maechler
Sent: Monday, January 31, 2022 9:04 AM
To: Stefan Fleck <stefan.b.fleck at gmail.com>
Cc: r-help at r-project.org
Subject: Re: [R] [External] Weird behaviour of order() when having multiple ties

[External Email]

>>>>> Stefan Fleck
>>>>>     on Sun, 30 Jan 2022 21:07:19 +0100 writes:

    > it's not about the sort order of the ties, shouldn't all the 1s in
    > order(c(2,3,4,1,1,1,1,1)) come before 2,3,4? because that's not what
    > happening

aaah.. now we are getting somewhere:
It looks you have always confused order() with sort() ...
have you ?


    > On Sun, Jan 30, 2022 at 9:00 PM Richard M. Heiberger <rmh at temple.edu> wrote:

    >> when there are ties it doesn't matter which is first.
    >> in a situation where it does matter, you will need a tiebreaker column.
    >> ------------------------------
    >> *From:* R-help <r-help-bounces at r-project.org> on behalf of Stefan Fleck <
    >> stefan.b.fleck at gmail.com>
    >> *Sent:* Sunday, January 30, 2022 4:16:44 AM
    >> *To:* r-help at r-project.org <r-help at r-project.org>
    >> *Subject:* [External] [R] Weird behaviour of order() when having multiple
    >> ties
    >>
    >> I am experiencing a weird behavior of `order()` for numeric vectors. I
    >> tested on 3.6.2 and 4.1.2 for windows and R 4.0.2 on ubuntu. Can anyone
    >> confirm?
    >>
    >> order(
    >> c(
    >> 0.6,
    >> 0.5,
    >> 0.3,
    >> 0.2,
    >> 0.1,
    >> 0.1
    >> )
    >> )
    >> ## Result [should be in order]
    >> [1] 5 6 4 3 2 1
    >>
    >> The sort order is obviously wrong. This only occurs if i have multiple
    >> ties. The problem does _not_ occur for decreasing = TRUE.
    >>
    >> [[alternative HTML version deleted]]
    >>
    >> ______________________________________________
    >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    >>
    >> https://urldefense.proofpoint.com/v2/url?u=https-3A__nam10.safelinks.protection.outlook.com_-3Furl-3Dhttps-253A-252F-252Fstat.ethz.ch-252Fmailman-252Flistinfo-252Fr-2Dhelp-26amp-3Bdata-3D04-257C01-257Crmh-2540temple.edu-257Cbae20314c2314a5cc7cd08d9e429e33f-257C716e81efb52244738e3110bd02ccf6e5-257C0-257C0-257C637791692024451993-257CUnknown-257CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0-253D-257C3000-26amp-3Bsdata-3DO6R-252FNM6IdPzP8RY3JIWfLgmkE-252B0KcVyYBxoRMo8v2dk-253D-26amp-3Breserved-3D0&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=LETnyM_0QTFNEMNectANV0IJZgIOyofIv54iJDPBZF-atb3Xe9lGTZ7tN68hw3Te&s=kydE98W9Su8vCPoxYcigO1iYSHVO2pjdbYqF8z4CEwo&e=
    >> PLEASE do read the posting guide
    >> https://urldefense.proofpoint.com/v2/url?u=https-3A__nam10.safelinks.protection.outlook.com_-3Furl-3Dhttp-253A-252F-252Fwww.r-2Dproject.org-252Fposting-2Dguide.html-26amp-3Bdata-3D04-257C01-257Crmh-2540temple.edu-257Cbae20314c2314a5cc7cd08d9e429e33f-257C716e81efb52244738e3110bd02ccf6e5-257C0-257C0-257C637791692024451993-257CUnknown-257CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0-253D-257C3000-26amp-3Bsdata-3D6hlfMjZLzopVzGnFVWlGnoEqvZBQwXPlxMuZ2sglEUk-253D-26amp-3Breserved-3D0&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=LETnyM_0QTFNEMNectANV0IJZgIOyofIv54iJDPBZF-atb3Xe9lGTZ7tN68hw3Te&s=_xSJacXhmOM-JE0jBCZ62UPEgerWHVqFkW2aXuIekvY&e=
    >> and provide commented, minimal, self-contained, reproducible code.
    >>

    > [[alternative HTML version deleted]]

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=LETnyM_0QTFNEMNectANV0IJZgIOyofIv54iJDPBZF-atb3Xe9lGTZ7tN68hw3Te&s=eoBL8fgGe-j3eEYAo1fT5-oVM-5twH3nn5iTJ3Dh6vc&e=
    > PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=LETnyM_0QTFNEMNectANV0IJZgIOyofIv54iJDPBZF-atb3Xe9lGTZ7tN68hw3Te&s=6QEl5w7lJHJJELW6QwypJN8KK64mDcTZXg5yoLs9Wu4&e=
    > and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=LETnyM_0QTFNEMNectANV0IJZgIOyofIv54iJDPBZF-atb3Xe9lGTZ7tN68hw3Te&s=eoBL8fgGe-j3eEYAo1fT5-oVM-5twH3nn5iTJ3Dh6vc&e=
PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=LETnyM_0QTFNEMNectANV0IJZgIOyofIv54iJDPBZF-atb3Xe9lGTZ7tN68hw3Te&s=6QEl5w7lJHJJELW6QwypJN8KK64mDcTZXg5yoLs9Wu4&e=
and provide commented, minimal, self-contained, reproducible code.


From @v|gro@@ @end|ng |rom ver|zon@net  Mon Jan 31 18:32:47 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Mon, 31 Jan 2022 17:32:47 +0000 (UTC)
Subject: [R] 
 [External] Weird behaviour of order() when having multiple ties
In-Reply-To: <BN6PR2201MB1553A7948D7F554B3B76031ECF259@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <CAFVVV-gzoE2UDGMga_Pgbix=BmZj5WN2nA1wqY9s75_tcKQiWA@mail.gmail.com>
 <BL1PR11MB5239432B2669D24516983141D2249@BL1PR11MB5239.namprd11.prod.outlook.com>
 <CAFVVV-i83ad8OWs-8veC3dpnFNmaOenuNLWHpksuEH1za=Gr3w@mail.gmail.com>
 <25079.60519.512897.902383@stat.math.ethz.ch>
 <BN6PR2201MB1553A7948D7F554B3B76031ECF259@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <670242806.1913486.1643650367651@mail.yahoo.com>

Tim,
I thought I saw someone tell you that the order in which EQUAL items are presented is not deterministic in that any order, whether given by order() or sort() or anything else, is VALID.
Unless you supply additional constraints such as a second key to sort by, then the order becomes deterministic up to the point where both the keys are the same.
Here is a dumb suggestion. Place your Dat1 vector in a data.frame alongside another vector of 1:length(Dat1) and use some method that orders by Dat1 and then by the second vector, ascending. You have now forced it to take the first of a matching set before any others.?
Let me try another. Say I give you a problem that might have multiple answer such as a quadratic equation with solutions of 2 and 10. You ask me for AN answer and I say 10. Am I wrong? You ask me for all answers and I say [10,2] and someone else says [2,10] and you wonder which of us is right. Well we are both right. The proper way to test is not to ask if the lists or tuples or anything ordered is equivalent but to use something like a set and show that they are equivalent or something like one is a subset of the other both ways.?
Back to your topic, you are suggesting two independent developers should come up with algorithms to solve similar but different tasks the same way. Do you have any idea how many methods there are for sorting things? This site lists eleven and I am sure there are many more.
https://www.javatpoint.com/sorting-algorithms
What is considered more important is choosing an algorithm that works well on the kinds of data and some of those methods do not keep the data in the same order and produce results in the same order.
What you are pointing out is not an error but an inconsistency. The message to you is to not depend on a UNIQUE solution.


-----Original Message-----
From: Ebert,Timothy Aaron <tebert at ufl.edu>
To: Martin Maechler <maechler at stat.math.ethz.ch>; Stefan Fleck <stefan.b.fleck at gmail.com>
Cc: r-help at r-project.org <r-help at r-project.org>
Sent: Mon, Jan 31, 2022 10:07 am
Subject: Re: [R] [External] Weird behaviour of order() when having multiple ties

Dat1 <- c(0.6, 0.5, 0.3, 0.2, 0.1, 0.1, 0.2)
print(order(Dat1))
print(sort(Dat1))

Compare output



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Martin Maechler
Sent: Monday, January 31, 2022 9:04 AM
To: Stefan Fleck <stefan.b.fleck at gmail.com>
Cc: r-help at r-project.org
Subject: Re: [R] [External] Weird behaviour of order() when having multiple ties

[External Email]

>>>>> Stefan Fleck
>>>>>? ? on Sun, 30 Jan 2022 21:07:19 +0100 writes:

? ? > it's not about the sort order of the ties, shouldn't all the 1s in
? ? > order(c(2,3,4,1,1,1,1,1)) come before 2,3,4? because that's not what
? ? > happening

aaah.. now we are getting somewhere:
It looks you have always confused order() with sort() ...
have you ?


? ? > On Sun, Jan 30, 2022 at 9:00 PM Richard M. Heiberger <rmh at temple.edu> wrote:

? ? >> when there are ties it doesn't matter which is first.
? ? >> in a situation where it does matter, you will need a tiebreaker column.
? ? >> ------------------------------
? ? >> *From:* R-help <r-help-bounces at r-project.org> on behalf of Stefan Fleck <
? ? >> stefan.b.fleck at gmail.com>
? ? >> *Sent:* Sunday, January 30, 2022 4:16:44 AM
? ? >> *To:* r-help at r-project.org <r-help at r-project.org>
? ? >> *Subject:* [External] [R] Weird behaviour of order() when having multiple
? ? >> ties
? ? >>
? ? >> I am experiencing a weird behavior of `order()` for numeric vectors. I
? ? >> tested on 3.6.2 and 4.1.2 for windows and R 4.0.2 on ubuntu. Can anyone
? ? >> confirm?
? ? >>
? ? >> order(
? ? >> c(
? ? >> 0.6,
? ? >> 0.5,
? ? >> 0.3,
? ? >> 0.2,
? ? >> 0.1,
? ? >> 0.1
? ? >> )
? ? >> )
? ? >> ## Result [should be in order]
? ? >> [1] 5 6 4 3 2 1
? ? >>
? ? >> The sort order is obviously wrong. This only occurs if i have multiple
? ? >> ties. The problem does _not_ occur for decreasing = TRUE.
? ? >>
? ? >> [[alternative HTML version deleted]]
? ? >>
? ? >> ______________________________________________
? ? >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
? ? >>
? ? >> https://urldefense.proofpoint.com/v2/url?u=https-3A__nam10.safelinks.protection.outlook.com_-3Furl-3Dhttps-253A-252F-252Fstat.ethz.ch-252Fmailman-252Flistinfo-252Fr-2Dhelp-26amp-3Bdata-3D04-257C01-257Crmh-2540temple.edu-257Cbae20314c2314a5cc7cd08d9e429e33f-257C716e81efb52244738e3110bd02ccf6e5-257C0-257C0-257C637791692024451993-257CUnknown-257CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0-253D-257C3000-26amp-3Bsdata-3DO6R-252FNM6IdPzP8RY3JIWfLgmkE-252B0KcVyYBxoRMo8v2dk-253D-26amp-3Breserved-3D0&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=LETnyM_0QTFNEMNectANV0IJZgIOyofIv54iJDPBZF-atb3Xe9lGTZ7tN68hw3Te&s=kydE98W9Su8vCPoxYcigO1iYSHVO2pjdbYqF8z4CEwo&e=
? ? >> PLEASE do read the posting guide
? ? >> https://urldefense.proofpoint.com/v2/url?u=https-3A__nam10.safelinks.protection.outlook.com_-3Furl-3Dhttp-253A-252F-252Fwww.r-2Dproject.org-252Fposting-2Dguide.html-26amp-3Bdata-3D04-257C01-257Crmh-2540temple.edu-257Cbae20314c2314a5cc7cd08d9e429e33f-257C716e81efb52244738e3110bd02ccf6e5-257C0-257C0-257C637791692024451993-257CUnknown-257CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0-253D-257C3000-26amp-3Bsdata-3D6hlfMjZLzopVzGnFVWlGnoEqvZBQwXPlxMuZ2sglEUk-253D-26amp-3Breserved-3D0&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=LETnyM_0QTFNEMNectANV0IJZgIOyofIv54iJDPBZF-atb3Xe9lGTZ7tN68hw3Te&s=_xSJacXhmOM-JE0jBCZ62UPEgerWHVqFkW2aXuIekvY&e=
? ? >> and provide commented, minimal, self-contained, reproducible code.
? ? >>

? ? > [[alternative HTML version deleted]]

? ? > ______________________________________________
? ? > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
? ? > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=LETnyM_0QTFNEMNectANV0IJZgIOyofIv54iJDPBZF-atb3Xe9lGTZ7tN68hw3Te&s=eoBL8fgGe-j3eEYAo1fT5-oVM-5twH3nn5iTJ3Dh6vc&e=
? ? > PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=LETnyM_0QTFNEMNectANV0IJZgIOyofIv54iJDPBZF-atb3Xe9lGTZ7tN68hw3Te&s=6QEl5w7lJHJJELW6QwypJN8KK64mDcTZXg5yoLs9Wu4&e=
? ? > and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=LETnyM_0QTFNEMNectANV0IJZgIOyofIv54iJDPBZF-atb3Xe9lGTZ7tN68hw3Te&s=eoBL8fgGe-j3eEYAo1fT5-oVM-5twH3nn5iTJ3Dh6vc&e=
PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=LETnyM_0QTFNEMNectANV0IJZgIOyofIv54iJDPBZF-atb3Xe9lGTZ7tN68hw3Te&s=6QEl5w7lJHJJELW6QwypJN8KK64mDcTZXg5yoLs9Wu4&e=
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From tebert @end|ng |rom u||@edu  Mon Jan 31 21:36:19 2022
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Mon, 31 Jan 2022 20:36:19 +0000
Subject: [R] 
 [External] Weird behaviour of order() when having multiple ties
In-Reply-To: <670242806.1913486.1643650367651@mail.yahoo.com>
References: <CAFVVV-gzoE2UDGMga_Pgbix=BmZj5WN2nA1wqY9s75_tcKQiWA@mail.gmail.com>
 <BL1PR11MB5239432B2669D24516983141D2249@BL1PR11MB5239.namprd11.prod.outlook.com>
 <CAFVVV-i83ad8OWs-8veC3dpnFNmaOenuNLWHpksuEH1za=Gr3w@mail.gmail.com>
 <25079.60519.512897.902383@stat.math.ethz.ch>
 <BN6PR2201MB1553A7948D7F554B3B76031ECF259@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <670242806.1913486.1643650367651@mail.yahoo.com>
Message-ID: <BN6PR2201MB155376C3136FBD7181B080DFCF259@BN6PR2201MB1553.namprd22.prod.outlook.com>

Dear Avi,

  1.  I made no comment or question or statement about EQUAL items. That was elsewhere in posts by you and others in this thread.
  2.  My intent was only to show a simple example of Stefan?s post wherein the outcome of sort() and order() are different. Not why, or how, just they are different. If you type order() when you mean sort() things will not work as expected, as shown below.
  3.  Yes both right due to communicative law of multiplication. I don?t see the point.

I am suggesting nothing! I am simply observing the behavior of a function. If it satisfies my need then great. If not, I need to write my own or find a different function. It does help if I clearly understand the output of the function, and sometimes the documentation is not as helpful as hoped for given the range of readers from novice to expert. Here is the data in a different format where order=1 means it is the first observation in the data.
Dat1
Order
1
2
3
4
5
6
7
Data
0.6
0.5
0.3
0.2
0.1
0.1
0.2

print(order(Dat1))  returns [1] 5 6 4 7 3 2 1

So I sort the raw data by ?Data? so that the values of order remain with each observed data point.
Original
Order
5
6
4
7
3
2
1
Data
0.1
0.1
0.2
0.2
0.3
0.5
0.6

Now reading off the values in row named ?Order? I get the result of print(order(Dat1)).

Order does not return the sorted data, it returns the location of the sorted value in the original dataset. At least that is what it looks like. I assume that this is what the documentation means by ? ?order? returns a permutation which rearranges its first argument into ascending or descending order? but I am afraid that I still do not get that connection from the text provided: https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/order.

As far as I can tell there is no error or inconsistency.

I am not quite skilled enough in R to take DatSort  <- order(Dat1) and then return the sorted data, but I need to move to other tasks.

I am really sorry that my post makes you mad.

Regards,
Tim

From: Avi Gross <avigross at verizon.net>
Sent: Monday, January 31, 2022 12:33 PM
To: Ebert,Timothy Aaron <tebert at ufl.edu>; maechler at stat.math.ethz.ch; stefan.b.fleck at gmail.com
Cc: r-help at r-project.org
Subject: Re: [R] [External] Weird behaviour of order() when having multiple ties

[External Email]
Tim,

I thought I saw someone tell you that the order in which EQUAL items are presented is not deterministic in that any order, whether given by order() or sort() or anything else, is VALID.

Unless you supply additional constraints such as a second key to sort by, then the order becomes deterministic up to the point where both the keys are the same.

Here is a dumb suggestion. Place your Dat1 vector in a data.frame alongside another vector of 1:length(Dat1) and use some method that orders by Dat1 and then by the second vector, ascending. You have now forced it to take the first of a matching set before any others.

Let me try another. Say I give you a problem that might have multiple answer such as a quadratic equation with solutions of 2 and 10. You ask me for AN answer and I say 10. Am I wrong? You ask me for all answers and I say [10,2] and someone else says [2,10] and you wonder which of us is right. Well we are both right. The proper way to test is not to ask if the lists or tuples or anything ordered is equivalent but to use something like a set and show that they are equivalent or something like one is a subset of the other both ways.

Back to your topic, you are suggesting two independent developers should come up with algorithms to solve similar but different tasks the same way. Do you have any idea how many methods there are for sorting things? This site lists eleven and I am sure there are many more.

https://www.javatpoint.com/sorting-algorithms<https://urldefense.proofpoint.com/v2/url?u=https-3A__www.javatpoint.com_sorting-2Dalgorithms&d=DwQFaQ&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=MjF5JhlNdgX8jQTswjCkVq_ChikBGD8fV7RNUT4RTUDnoY7_r1NIlx_C6vqazTID&s=H9vveKI2Vjbmp69vjpKDu0tZ_xNIdFrIga2AtzsBUCQ&e=>

What is considered more important is choosing an algorithm that works well on the kinds of data and some of those methods do not keep the data in the same order and produce results in the same order.

What you are pointing out is not an error but an inconsistency. The message to you is to not depend on a UNIQUE solution.


-----Original Message-----
From: Ebert,Timothy Aaron <tebert at ufl.edu<mailto:tebert at ufl.edu>>
To: Martin Maechler <maechler at stat.math.ethz.ch<mailto:maechler at stat.math.ethz.ch>>; Stefan Fleck <stefan.b.fleck at gmail.com<mailto:stefan.b.fleck at gmail.com>>
Cc: r-help at r-project.org<mailto:r-help at r-project.org> <r-help at r-project.org<mailto:r-help at r-project.org>>
Sent: Mon, Jan 31, 2022 10:07 am
Subject: Re: [R] [External] Weird behaviour of order() when having multiple ties
Dat1 <- c(0.6, 0.5, 0.3, 0.2, 0.1, 0.1, 0.2)
print(order(Dat1))
print(sort(Dat1))

Compare output



-----Original Message-----
From: R-help <r-help-bounces at r-project.org<mailto:r-help-bounces at r-project.org>> On Behalf Of Martin Maechler
Sent: Monday, January 31, 2022 9:04 AM
To: Stefan Fleck <stefan.b.fleck at gmail.com<mailto:stefan.b.fleck at gmail.com>>
Cc: r-help at r-project.org<mailto:r-help at r-project.org>
Subject: Re: [R] [External] Weird behaviour of order() when having multiple ties

[External Email]

>>>>> Stefan Fleck
>>>>>    on Sun, 30 Jan 2022 21:07:19 +0100 writes:

    > it's not about the sort order of the ties, shouldn't all the 1s in
    > order(c(2,3,4,1,1,1,1,1)) come before 2,3,4? because that's not what
    > happening

aaah.. now we are getting somewhere:
It looks you have always confused order() with sort() ...
have you ?


    > On Sun, Jan 30, 2022 at 9:00 PM Richard M. Heiberger <rmh at temple.edu<mailto:rmh at temple.edu>> wrote:

    >> when there are ties it doesn't matter which is first.
    >> in a situation where it does matter, you will need a tiebreaker column.
    >> ------------------------------
    >> *From:* R-help <r-help-bounces at r-project.org<mailto:r-help-bounces at r-project.org>> on behalf of Stefan Fleck <
    >> stefan.b.fleck at gmail.com<mailto:stefan.b.fleck at gmail.com>>
    >> *Sent:* Sunday, January 30, 2022 4:16:44 AM
    >> *To:* r-help at r-project.org<mailto:r-help at r-project.org> <r-help at r-project.org<mailto:r-help at r-project.org>>
    >> *Subject:* [External] [R] Weird behaviour of order() when having multiple
    >> ties
    >>
    >> I am experiencing a weird behavior of `order()` for numeric vectors. I
    >> tested on 3.6.2 and 4.1.2 for windows and R 4.0.2 on ubuntu. Can anyone
    >> confirm?
    >>
    >> order(
    >> c(
    >> 0.6,
    >> 0.5,
    >> 0.3,
    >> 0.2,
    >> 0.1,
    >> 0.1
    >> )
    >> )
    >> ## Result [should be in order]
    >> [1] 5 6 4 3 2 1
    >>
    >> The sort order is obviously wrong. This only occurs if i have multiple
    >> ties. The problem does _not_ occur for decreasing = TRUE.
    >>
    >> [[alternative HTML version deleted]]
    >>
    >> ______________________________________________
    >> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
    >>
    >> https://urldefense.proofpoint.com/v2/url?u=https-3A__nam10.safelinks.protection.outlook.com_-3Furl-3Dhttps-253A-252F-252Fstat.ethz.ch-252Fmailman-252Flistinfo-252Fr-2Dhelp-26amp-3Bdata-3D04-257C01-257Crmh-2540temple.edu-257Cbae20314c2314a5cc7cd08d9e429e33f-257C716e81efb52244738e3110bd02ccf6e5-257C0-257C0-257C637791692024451993-257CUnknown-257CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0-253D-257C3000-26amp-3Bsdata-3DO6R-252FNM6IdPzP8RY3JIWfLgmkE-252B0KcVyYBxoRMo8v2dk-253D-26amp-3Breserved-3D0&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=LETnyM_0QTFNEMNectANV0IJZgIOyofIv54iJDPBZF-atb3Xe9lGTZ7tN68hw3Te&s=kydE98W9Su8vCPoxYcigO1iYSHVO2pjdbYqF8z4CEwo&e=
    >> PLEASE do read the posting guide
    >> https://urldefense.proofpoint.com/v2/url?u=https-3A__nam10.safelinks.protection.outlook.com_-3Furl-3Dhttp-253A-252F-252Fwww.r-2Dproject.org-252Fposting-2Dguide.html-26amp-3Bdata-3D04-257C01-257Crmh-2540temple.edu-257Cbae20314c2314a5cc7cd08d9e429e33f-257C716e81efb52244738e3110bd02ccf6e5-257C0-257C0-257C637791692024451993-257CUnknown-257CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0-253D-257C3000-26amp-3Bsdata-3D6hlfMjZLzopVzGnFVWlGnoEqvZBQwXPlxMuZ2sglEUk-253D-26amp-3Breserved-3D0&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=LETnyM_0QTFNEMNectANV0IJZgIOyofIv54iJDPBZF-atb3Xe9lGTZ7tN68hw3Te&s=_xSJacXhmOM-JE0jBCZ62UPEgerWHVqFkW2aXuIekvY&e=
    >> and provide commented, minimal, self-contained, reproducible code.
    >>

    > [[alternative HTML version deleted]]

    > ______________________________________________
    > R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
    > https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=LETnyM_0QTFNEMNectANV0IJZgIOyofIv54iJDPBZF-atb3Xe9lGTZ7tN68hw3Te&s=eoBL8fgGe-j3eEYAo1fT5-oVM-5twH3nn5iTJ3Dh6vc&e=
    > PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=LETnyM_0QTFNEMNectANV0IJZgIOyofIv54iJDPBZF-atb3Xe9lGTZ7tN68hw3Te&s=6QEl5w7lJHJJELW6QwypJN8KK64mDcTZXg5yoLs9Wu4&e=
    > and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=LETnyM_0QTFNEMNectANV0IJZgIOyofIv54iJDPBZF-atb3Xe9lGTZ7tN68hw3Te&s=eoBL8fgGe-j3eEYAo1fT5-oVM-5twH3nn5iTJ3Dh6vc&e=
PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwICAg&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=LETnyM_0QTFNEMNectANV0IJZgIOyofIv54iJDPBZF-atb3Xe9lGTZ7tN68hw3Te&s=6QEl5w7lJHJJELW6QwypJN8KK64mDcTZXg5yoLs9Wu4&e=

and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help<https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwMFaQ&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=MjF5JhlNdgX8jQTswjCkVq_ChikBGD8fV7RNUT4RTUDnoY7_r1NIlx_C6vqazTID&s=SF_ilzeKSVkTO6e49bpFFdcfanNKZkEY43BWf1s8AOA&e=>
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html<https://urldefense.proofpoint.com/v2/url?u=http-3A__www.r-2Dproject.org_posting-2Dguide.html&d=DwMFaQ&c=sJ6xIWYx-zLMB3EPkvcnVg&r=9PEhQh2kVeAsRzsn7AkP-g&m=MjF5JhlNdgX8jQTswjCkVq_ChikBGD8fV7RNUT4RTUDnoY7_r1NIlx_C6vqazTID&s=eeD3ujlK8Hh2OtJsJH4q84v5y3OriS1bq3KuLz1GYWs&e=>
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @v|gro@@ @end|ng |rom ver|zon@net  Mon Jan 31 23:38:21 2022
From: @v|gro@@ @end|ng |rom ver|zon@net (Avi Gross)
Date: Mon, 31 Jan 2022 22:38:21 +0000 (UTC)
Subject: [R] 
 [External] Weird behaviour of order() when having multiple ties
In-Reply-To: <BN6PR2201MB155376C3136FBD7181B080DFCF259@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <CAFVVV-gzoE2UDGMga_Pgbix=BmZj5WN2nA1wqY9s75_tcKQiWA@mail.gmail.com>
 <BL1PR11MB5239432B2669D24516983141D2249@BL1PR11MB5239.namprd11.prod.outlook.com>
 <CAFVVV-i83ad8OWs-8veC3dpnFNmaOenuNLWHpksuEH1za=Gr3w@mail.gmail.com>
 <25079.60519.512897.902383@stat.math.ethz.ch>
 <BN6PR2201MB1553A7948D7F554B3B76031ECF259@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <670242806.1913486.1643650367651@mail.yahoo.com>
 <BN6PR2201MB155376C3136FBD7181B080DFCF259@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <537054329.2390274.1643668701179@mail.yahoo.com>

Tim,

My comment were not directed at you but at any conception that R should honor any conditions it does not pledge to honor. You pointed out a clear example that it does not get identical results when you use two things that both look like sorting algorithms. Yes, Stefan asked the original question. You provided some additional ideas and observations.  

As I pointed out, there are many sorting algorithms commonly in use and they generally do not care about order in the sense expected by some when multiple items match. Neither do most algorithms of the sort. We discussed earlier the possibility of identifying if a data item was either all-numeric or all alphabetic or OTHER as in having both or neither or perhaps other characters not wanted like a comma. If the algorithm were to return a list of three lists, would you necessarily expect them in the right order of the way they were encountered, or sorted forward (or in reverse) alphabetically or using the current locale or numerically, or even randomly? 

I can well imagine a parallel algorithm that hands off one or a subset of data to a thread and also other subsets to other threads and then monitors some kind of communication where the threads send reply messages about one item at a time. The results may be interleaved many ways. What the result would be should be treated as an unordered thread and if you want it ordered, do it yourself after you get it.

I took a look at the R code for order() and the manual page. I note you can call it with "method=" followed by one of "radix", "shell" and "quick" but it is a bit complex to read through and the major work is done in an internal routine probably written in C or something. But this is written about it:

"The sort used is stable (except for method = "quick"), so any unresolved ties will be left in their original ordering."

That suggests that the default and some other cases will return it in the order specified when there is a tie but the method called "quick" may have a different order sometimes. However, my version did not allow me to use quick! If you look at the manual page for sort() it too allows you to specify a method but note amusingly that for the default method it calls order() for part of the job for some kinds of objects.

I made a suggestion to anyone wanting a result and simplify it here. Instead of calling order(Dat1) alone, add a second argument like order(Dat1, second) that can be 1:N where N is the length of Dat1, or the reverse, or anything you want to use that will break a tie. Here is some code showing  that:

# Initialize sample data where .1 is duplicated.
> Dat1 <- c(0.6, 0.5, 0.3, 0.2, 0.1, 0.1, 0.2)

# Default output from order:
> order(Dat1)
[1] 5 6 4 7 3 2 1

# Call order with a second vector of c(1,2,3,4,5,6,7)
> order(Dat1, seq_along(Dat1))
[1] 5 6 4 7 3 2 1

# Call order with a second vector of c(7,6,5,4,3,2,1) meaning reversed
> order(Dat1, length(Dat1):1)
[1] 6 5 7 4 3 2 1

I suspect one of these gives the requester the control to get what they want.

Again, I end by saying no insult intended. Some things in computer science can provide guarantees of working exactly a certain way and others do not. But often you can find ways, including some more complex and annoying ones. I am used to doing many things in the tidyverse where I would use the arrange() verb on a data.frame naturally to do a sort on multiple columns BUT this forum has people who discourage the tidyverse. 

library(tidyverse)

> arrange(data.frame("el?sz?r"=Dat1, "m?sodikat"=7:1))
  elosz?r m?sodikat
1     0.6         7
2     0.5         6
3     0.3         5
4     0.2         4
5     0.1         3
6     0.1         2
7     0.2         1
> arrange(data.frame("el?sz?r"=Dat1, "m?sodikat"=7:1))$`el?sz?r`
[1] 0.6 0.5 0.3 0.2 0.1 0.1 0.2
> arrange(data.frame("el?sz?r"=Dat1, "m?sodikat"=7:1))[1]
  elosz?r
1     0.6
2     0.5
3     0.3
4     0.2
5     0.1
6     0.1
7     0.2
> arrange(data.frame("el?sz?r"=Dat1, "m?sodikat"=7:1))[[1]]
[1] 0.6 0.5 0.3 0.2 0.1 0.1 0.2

Of course for this simple a need, definitely overkill and I would stick with base R. LOL!




-----Original Message-----
From: Ebert,Timothy Aaron <tebert at ufl.edu>
To: Avi Gross <avigross at verizon.net>; maechler at stat.math.ethz.ch <maechler at stat.math.ethz.ch>; stefan.b.fleck at gmail.com <stefan.b.fleck at gmail.com>
Cc: r-help at r-project.org <r-help at r-project.org>
Sent: Mon, Jan 31, 2022 3:36 pm
Subject: RE: [R]  [External] Weird behaviour of order() when having multiple ties



Dear Avi,
 
I made no comment or question or statement about EQUAL items. That was elsewhere in posts by you and others in this thread.
My intent was only to show a simple example of Stefan?s post wherein the outcome of sort() and order() are different. Not why, or how, just they are different. If you type order() when you mean sort() things will not work as expected, as shown below.
Yes both right due to communicative law of multiplication. I don?t see the point.
 
 ?
 
I am suggesting nothing! I am simply observing the behavior of a function. If it satisfies my need then great. If not, I need to write my own or find a different function. It does help if I clearly understand the output of the function, and sometimes the documentation is not as helpful as hoped for given the range of readers from novice to expert. Here is the data in a different format where order=1 means it is the first observation in the data.
 
Dat1
 
Order
 
1
 
2
 
3
 
4
 
5
 
6
 
7
 
Data
 
0.6
 
0.5
 
0.3
 
0.2
 
0.1
 
0.1
 
0.2
 
 ?
 
print(order(Dat1))? returns [1] 5 6 4 7 3 2 1 
 
 ?
 
So I sort the raw data by ?Data? so that the values of order remain with each observed data point.
 
Original
 
Order
 
5
 
6
 
4
 
7
 
3
 
2
 
1
 
Data
 
0.1
 
0.1
 
0.2
 
0.2
 
0.3
 
0.5
 
0.6
 
 ?
 
Now reading off the values in row named ?Order? I get the result of print(order(Dat1)).
 
 ?
 
Order does not return the sorted data, it returns the location of the sorted value in the original dataset. At least that is what it looks like. I assume that this is what the documentation means by ? ?order? returns a permutation which rearranges its first argument into ascending or descending order? but I am afraid that I still do not get that connection from the text provided:https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/order.
 
 ?
 
As far as I can tell there is no error or inconsistency.
 
 ?
 
I am not quite skilled enough in R to take DatSort ?<- order(Dat1) and then return the sorted data, but I need to move to other tasks.
 
 ?
 
I am really sorry that my post makes you mad.
 
 ?
 
Regards,
 
Tim
 
 ?
 

From: Avi Gross <avigross at verizon.net> 
Sent: Monday, January 31, 2022 12:33 PM
To: Ebert,Timothy Aaron <tebert at ufl.edu>; maechler at stat.math.ethz.ch; stefan.b.fleck at gmail.com
Cc: r-help at r-project.org
Subject: Re: [R] [External] Weird behaviour of order() when having multiple ties
 

 ?
 
[External Email]
 

Tim,
 
 ?
 

I thought I saw someone tell you that the order in which EQUAL items are presented is not deterministic in that any order, whether given by order() or sort() or anything else, is VALID.
 

 ?
 

Unless you supply additional constraints such as a second key to sort by, then the order becomes deterministic up to the point where both the keys are the same.
 

 ?
 

Here is a dumb suggestion. Place your Dat1 vector in a data.frame alongside another vector of 1:length(Dat1) and use some method that orders by Dat1 and then by the second vector, ascending. You have now forced it to take the first of a matching set before any others.?
 

 ?
 

Let me try another. Say I give you a problem that might have multiple answer such as a quadratic equation with solutions of 2 and 10. You ask me for AN answer and I say 10. Am I wrong? You ask me for all answers and I say [10,2] and someone else says [2,10] and you wonder which of us is right. Well we are both right. The proper way to test is not to ask if the lists or tuples or anything ordered is equivalent but to use something like a set and show that they are equivalent or something like one is a subset of the other both ways.?
 

 ?
 

Back to your topic, you are suggesting two independent developers should come up with algorithms to solve similar but different tasks the same way. Do you have any idea how many methods there are for sorting things? This site lists eleven and I am sure there are many more.
 

 ?
 

https://www.javatpoint.com/sorting-algorithms
 

 ?
 

What is considered more important is choosing an algorithm that works well on the kinds of data and some of those methods do not keep the data in the same order and produce results in the same order.
 

 ?
 

What you are pointing out is not an error but an inconsistency. The message to you is to not depend on a UNIQUE solution.
 




 
-----Original Message-----
From: Ebert,Timothy Aaron <tebert at ufl.edu>
To: Martin Maechler <maechler at stat.math.ethz.ch>; Stefan Fleck <stefan.b.fleck at gmail.com>
Cc: r-help at r-project.org <r-help at r-project.org>
Sent: Mon, Jan 31, 2022 10:07 am
Subject: Re: [R] [External] Weird behaviour of order() when having multiple ties
 
Dat1 <- c(0.6, 0.5, 0.3, 0.2, 0.1, 0.1, 0.2)
print(order(Dat1))
print(sort(Dat1))

Compare output



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Martin Maechler
Sent: Monday, January 31, 2022 9:04 AM
To: Stefan Fleck <stefan.b.fleck at gmail.com>
Cc: r-help at r-project.org
Subject: Re: [R] [External] Weird behaviour of order() when having multiple ties

[External Email]

>>>>> Stefan Fleck
>>>>>? ? on Sun, 30 Jan 2022 21:07:19 +0100 writes:

? ? > it's not about the sort order of the ties, shouldn't all the 1s in
? ? > order(c(2,3,4,1,1,1,1,1)) come before 2,3,4? because that's not what
? ? > happening

aaah.. now we are getting somewhere:
It looks you have always confused order() with sort() ...
have you ?


? ? > On Sun, Jan 30, 2022 at 9:00 PM Richard M. Heiberger <rmh at temple.edu> wrote:

? ? >> when there are ties it doesn't matter which is first.
? ? >> in a situation where it does matter, you will need a tiebreaker column.
? ? >> ------------------------------
? ? >> *From:* R-help <r-help-bounces at r-project.org> on behalf of Stefan Fleck <
? ? >> stefan.b.fleck at gmail.com>
? ? >> *Sent:* Sunday, January 30, 2022 4:16:44 AM
? ? >> *To:* r-help at r-project.org <r-help at r-project.org>
? ? >> *Subject:* [External] [R] Weird behaviour of order() when having multiple
? ? >> ties
? ? >>
? ? >> I am experiencing a weird behavior of `order()` for numeric vectors. I
? ? >> tested on 3.6.2 and 4.1.2 for windows and R 4.0.2 on ubuntu. Can anyone
? ? >> confirm?
? ? >>
? ? >> order(
? ? >> c(
? ? >> 0.6,
? ? >> 0.5,
? ? >> 0.3,
? ? >> 0.2,
? ? >> 0.1,
? ? >> 0.1
? ? >> )
? ? >> )
? ? >> ## Result [should be in order]
? ? >> [1] 5 6 4 3 2 1
? ? >>
? ? >> The sort order is obviously wrong. This only occurs if i have multiple
? ? >> ties. The problem does _not_ occur for decreasing = TRUE.
? ? > 


From J@me@@Burn@ @end|ng |rom @pp|ebee@@com  Sat Jan 29 18:33:26 2022
From: J@me@@Burn@ @end|ng |rom @pp|ebee@@com (James Burns)
Date: Sat, 29 Jan 2022 17:33:26 +0000
Subject: [R] 4.1.2 and 4.1.2 Patched internet dll issues on Lenovo Laptop.
 32 bit version works fine
Message-ID: <DM6PR05MB4138CFC167B59B695AF701FCEA239@DM6PR05MB4138.namprd05.prod.outlook.com>

Forgot to let you know that the 32 bit 4.1.2 internet dll works fine on the Lenovo hardware

From: James Burns
Sent: Thursday, January 27, 2022 12:25 PM
To: r-help at R-project.org
Subject: 4.1.2 and 4.1.2 Patched internet dll issues on Lenovo Laptop. 2 out of 2 had issues Update 01/27 at 12:23PM PST

Hi Team,

Following up. Two out of two Lenovos at my work have the same dll issue.  However, my Origin laptop had no issue with the dll and 4.1.2 is working just fine. So, is there something different in the updated dll which would affect certain manufacturers?

Thanks Again,
James Burns

From: James Burns
Sent: Friday, January 21, 2022 10:43 AM
To: r-help at R-project.org<mailto:r-help at R-project.org>
Subject: 4.1.2 and 4.1.2 Patched internet dll issues on Lenovo Laptop Update 10AM PST

Hi Team,

It is definitely the dll issue. I copied the 4.1.1 x64 internet dll to the 4.1.2 patched location and R & RStudio were able to connect to Cran. Please repair the dll's in your download location.

Thank You,
James Burns
The contents of this e-mail message and any attachments are intended solely for the addressee(s) and may contain confidential and/or legally privileged information. If you are not the intended recipient of this message or if this message has been addressed to you in error, please immediately alert the sender by reply e-mail and then delete this message and any attachments. If you are not the intended recipient, you are notified that any use, dissemination, distribution, copying, or storage of this message or any attachment is strictly prohibited.

	[[alternative HTML version deleted]]


From @|dot|@23 @end|ng |rom o@u@edu  Mon Jan 31 20:50:56 2022
From: @|dot|@23 @end|ng |rom o@u@edu (Sidoti, Salvatore)
Date: Mon, 31 Jan 2022 19:50:56 +0000
Subject: [R] Repeatability Analysis of Ordinal Data
Message-ID: <DM6PR01MB4314D3686B97D43F15DF3096EA259@DM6PR01MB4314.prod.exchangelabs.com>

Greetings, Colleagues:

I have several Likert-type ordinal data sets consisting of animal responses with repeated measures. I was able to implement a CLMM model easily enough with the package `ordinal`. However, the package does not support repeatability analyses.
 
Assuming that I subset my data according to treatment and/or sex, I am keen to try the `ordinalRR` package. According to the package documentation (https://cran.r-project.org/web/packages/ordinalRR/ordinalRR.pdf), performing `summary()` on the output from the function `ordinalRR()` returns the point estimates for each rater and for each pairwise combination of raters. However, is it possible to return an overall repeatability value and a 95% credible interval across all raters?

What follows is a stock procedure from the package reference document:

#-------------------------------------------------------------------------------
library(ordinalRR)

# load the dataset that comes with the package
data(followup)

# preprocess data to accommodate the package functions
followup.pre <- preprocess(followup)

# perform the analysis
followup.random <- ordinalRR(followup.pre)

summary(followup.random)

Call:
  ordinalRR(followup.pre)

Data: 30 parts, 3 operators, 2 repetitions with 4 ordinal categories.
Random-effects model MCMC chain: 1000 burn-in and 10000 retained.

Simple repeatability and model parameter estimates by rater:
  Rater j Repeatability  a_j d_{j,1} d_{j,2} d_{j,3}
1         0.900 12.0    -1.5    -0.1     0.6
2         0.900 10.9    -1.6    -0.3     0.5
3         0.933 12.7    -1.5    -0.2     0.5

Simple repeatability and reproducibility (R&R) point estimates for pairs of raters:
  Rater j Rater j' (R&R)_{j,j'}
1        2        0.808
1        3        0.900
2        3        0.850
#-------------------------------------------------------------------------------

Kind Regards,
Salvatore Sidoti
PhD Candidate
The Ohio State University
Columbus, Ohio USA


