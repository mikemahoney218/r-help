From m@rong|u@|u|g| @end|ng |rom gm@||@com  Sat Jul  1 20:20:53 2023
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Sat, 1 Jul 2023 20:20:53 +0200
Subject: [R] How to plot both lines and points by group on ggplot2
Message-ID: <CAMk+s2R96RiuV0fr16X4jBjPfM8X1mcRUO9kr3HTYdvP9gV_tg@mail.gmail.com>

Hello,
I have a dataframe with measurements stratified by the concentration
of a certain substance. I would like to plot the points of the
measures and connect the points within each series of concentrations.
When I launch ggplot2 I get the error
```
geom_path: Each group consists of only one observation. Do you need to
adjust the
group aesthetic?
```
and no lines are drawn.
Where am I going wrong?
Thank you
Luigi

```
df = data.frame(Conc = c(rep(1, 3), rep(2, 3), rep(5, 3)),
                Time = rep(1:3, 3),
                Value = c(0.91, 0.67, 0.71, 0.91, 0.65, 0.74, 0.95, 0.67, 0.67))
df$Time <- as.factor(df$Time)
levels(df$Time) = c(1, 4, 24)
df$Conc <- as.factor(df$Conc)
levels(df$Conc) = c(1, 2, 5)
library(ggplot2)
ggplot(df, aes(x=Time, y=Value, colour=Conc)) +
  geom_point(size=6) +
  geom_line(aes(x=Time, y=Value, colour=Conc)) +
  scale_colour_manual(values = c("darkslategray3", "darkslategray4",
                                 "deepskyblue4")) +
  ggtitle("Working example") +
  xlab(expression(bold("Time (h)"))) +
  ylab(expression(bold("Concentration (mM)")))
```
-- 
Best regards,
Luigi


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jul  1 20:43:14 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 1 Jul 2023 11:43:14 -0700
Subject: [R] How to plot both lines and points by group on ggplot2
In-Reply-To: <CAMk+s2R96RiuV0fr16X4jBjPfM8X1mcRUO9kr3HTYdvP9gV_tg@mail.gmail.com>
References: <CAMk+s2R96RiuV0fr16X4jBjPfM8X1mcRUO9kr3HTYdvP9gV_tg@mail.gmail.com>
Message-ID: <CAGxFJbRR=32BbB7=-8Wpcha2-dJnD-C8-O0wrwgG9=UYYeRTMw@mail.gmail.com>

Can your post a few lines of your data frame (e.g. via
dput(head(...))) to make it clearer. I found this statement confusing:
"... measurements stratified by the concentration
of a certain substance. I would like to plot the points of the
measures and connect the points within each series of concentrations."

This might or might not be the source of your problems, but I think
showing us (enough of) your data would help clarify things. I don't
use ggplot, but someone who does might have a better chance of
pinpointing the problem if you provide such data.

Cheers,
Bert

On Sat, Jul 1, 2023 at 11:21?AM Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>
> Hello,
> I have a dataframe with measurements stratified by the concentration
> of a certain substance. I would like to plot the points of the
> measures and connect the points within each series of concentrations.
> When I launch ggplot2 I get the error
> ```
> geom_path: Each group consists of only one observation. Do you need to
> adjust the
> group aesthetic?
> ```
> and no lines are drawn.
> Where am I going wrong?
> Thank you
> Luigi
>
> ```
> df = data.frame(Conc = c(rep(1, 3), rep(2, 3), rep(5, 3)),
>                 Time = rep(1:3, 3),
>                 Value = c(0.91, 0.67, 0.71, 0.91, 0.65, 0.74, 0.95, 0.67, 0.67))
> df$Time <- as.factor(df$Time)
> levels(df$Time) = c(1, 4, 24)
> df$Conc <- as.factor(df$Conc)
> levels(df$Conc) = c(1, 2, 5)
> library(ggplot2)
> ggplot(df, aes(x=Time, y=Value, colour=Conc)) +
>   geom_point(size=6) +
>   geom_line(aes(x=Time, y=Value, colour=Conc)) +
>   scale_colour_manual(values = c("darkslategray3", "darkslategray4",
>                                  "deepskyblue4")) +
>   ggtitle("Working example") +
>   xlab(expression(bold("Time (h)"))) +
>   ylab(expression(bold("Concentration (mM)")))
> ```
> --
> Best regards,
> Luigi
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From chr|@ho|d @end|ng |rom p@yctc@org  Sat Jul  1 20:48:49 2023
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Sat, 1 Jul 2023 19:48:49 +0100
Subject: [R] How to plot both lines and points by group on ggplot2
In-Reply-To: <CAMk+s2R96RiuV0fr16X4jBjPfM8X1mcRUO9kr3HTYdvP9gV_tg@mail.gmail.com>
References: <CAMk+s2R96RiuV0fr16X4jBjPfM8X1mcRUO9kr3HTYdvP9gV_tg@mail.gmail.com>
Message-ID: <d8140c35-9a98-dd45-12fb-883b434430fb@psyctc.org>

[Whoops, forgot that default reply-to is to the sender.]


On 01/07/2023 19:20, Luigi Marongiu wrote:
> Hello,
> I have a dataframe with measurements stratified by the concentration
> of a certain substance. I would like to plot the points of the
> measures and connect the points within each series of concentrations.
> When I launch ggplot2 I get the error
> ```
> geom_path: Each group consists of only one observation. Do you need to
> adjust the
> group aesthetic?
> ```
> and no lines are drawn.
> Where am I going wrong?
> Thank you
> Luigi
>
> ```
> df = data.frame(Conc = c(rep(1, 3), rep(2, 3), rep(5, 3)),
> Time = rep(1:3, 3),
> Value = c(0.91, 0.67, 0.71, 0.91, 0.65, 0.74, 0.95, 0.67, 0.67))
> df$Time <- as.factor(df$Time)
> levels(df$Time) = c(1, 4, 24)
> df$Conc <- as.factor(df$Conc)
> levels(df$Conc) = c(1, 2, 5)
> library(ggplot2)
> ggplot(df, aes(x=Time, y=Value, colour=Conc)) +
> geom_point(size=6) +
> geom_line(aes(x=Time, y=Value, colour=Conc)) +
> scale_colour_manual(values = c("darkslategray3", "darkslategray4",
> "deepskyblue4")) +
> ggtitle("Working example") +
> xlab(expression(bold("Time (h)"))) +
> ylab(expression(bold("Concentration (mM)")))
> ```

If I understand what you want then I think all you need is to add "group 
= Conc".? That's what that message is telling you.

df = data.frame(Conc = c(rep(1, 3), rep(2, 3), rep(5, 3)),
 ??????????????? Time = rep(1:3, 3),
 ??????????????? Value = c(0.91, 0.67, 0.71, 0.91, 0.65, 0.74, 0.95, 
0.67, 0.67))
df$Time <- as.factor(df$Time)
levels(df$Time) = c(1, 4, 24)
df$Conc <- as.factor(df$Conc)
levels(df$Conc) = c(1, 2, 5)
library(ggplot2)
ggplot(df, aes(x=Time, y=Value, colour=Conc, group = Conc)) +
 ? geom_point(size=6) +
 ? geom_line(aes(x=Time, y=Value, colour=Conc)) +
 ? scale_colour_manual(values = c("darkslategray3", "darkslategray4",
 ???????????????????????????????? "deepskyblue4")) +
 ? ggtitle("Working example") +
 ? xlab(expression(bold("Time (h)"))) +
 ? ylab(expression(bold("Concentration (mM)")))

Very? best,


Chris

-- 
Chris Evans (he/him)
Visiting Professor, UDLA, Quito, Ecuador & Honorary Professor, University of Roehampton, London, UK.
Work web site: https://www.psyctc.org/psyctc/
CORE site: http://www.coresystemtrust.org.uk/
Personal site: https://www.psyctc.org/pelerinage2016/
Emeetings (Thursdays): https://www.psyctc.org/psyctc/booking-meetings-with-me/
(Beware: French time, generally an hour ahead of UK)
<https://ombook.psyctc.org/book>


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jul  1 20:57:50 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 1 Jul 2023 11:57:50 -0700
Subject: [R] How to plot both lines and points by group on ggplot2
In-Reply-To: <d8140c35-9a98-dd45-12fb-883b434430fb@psyctc.org>
References: <CAMk+s2R96RiuV0fr16X4jBjPfM8X1mcRUO9kr3HTYdvP9gV_tg@mail.gmail.com>
 <d8140c35-9a98-dd45-12fb-883b434430fb@psyctc.org>
Message-ID: <CAGxFJbRCbiz7N=4O9CNZfe5pX7D2t3dj-KqFvWW4L=maYHiGzw@mail.gmail.com>

... and so ignore my previous missive, as you *did* provide data.
Sorry for the noise.

-- Bert


On Sat, Jul 1, 2023 at 11:53?AM Chris Evans via R-help
<r-help at r-project.org> wrote:
>
> [Whoops, forgot that default reply-to is to the sender.]
>
>
> On 01/07/2023 19:20, Luigi Marongiu wrote:
> > Hello,
> > I have a dataframe with measurements stratified by the concentration
> > of a certain substance. I would like to plot the points of the
> > measures and connect the points within each series of concentrations.
> > When I launch ggplot2 I get the error
> > ```
> > geom_path: Each group consists of only one observation. Do you need to
> > adjust the
> > group aesthetic?
> > ```
> > and no lines are drawn.
> > Where am I going wrong?
> > Thank you
> > Luigi
> >
> > ```
> > df = data.frame(Conc = c(rep(1, 3), rep(2, 3), rep(5, 3)),
> > Time = rep(1:3, 3),
> > Value = c(0.91, 0.67, 0.71, 0.91, 0.65, 0.74, 0.95, 0.67, 0.67))
> > df$Time <- as.factor(df$Time)
> > levels(df$Time) = c(1, 4, 24)
> > df$Conc <- as.factor(df$Conc)
> > levels(df$Conc) = c(1, 2, 5)
> > library(ggplot2)
> > ggplot(df, aes(x=Time, y=Value, colour=Conc)) +
> > geom_point(size=6) +
> > geom_line(aes(x=Time, y=Value, colour=Conc)) +
> > scale_colour_manual(values = c("darkslategray3", "darkslategray4",
> > "deepskyblue4")) +
> > ggtitle("Working example") +
> > xlab(expression(bold("Time (h)"))) +
> > ylab(expression(bold("Concentration (mM)")))
> > ```
>
> If I understand what you want then I think all you need is to add "group
> = Conc".  That's what that message is telling you.
>
> df = data.frame(Conc = c(rep(1, 3), rep(2, 3), rep(5, 3)),
>                  Time = rep(1:3, 3),
>                  Value = c(0.91, 0.67, 0.71, 0.91, 0.65, 0.74, 0.95,
> 0.67, 0.67))
> df$Time <- as.factor(df$Time)
> levels(df$Time) = c(1, 4, 24)
> df$Conc <- as.factor(df$Conc)
> levels(df$Conc) = c(1, 2, 5)
> library(ggplot2)
> ggplot(df, aes(x=Time, y=Value, colour=Conc, group = Conc)) +
>    geom_point(size=6) +
>    geom_line(aes(x=Time, y=Value, colour=Conc)) +
>    scale_colour_manual(values = c("darkslategray3", "darkslategray4",
>                                   "deepskyblue4")) +
>    ggtitle("Working example") +
>    xlab(expression(bold("Time (h)"))) +
>    ylab(expression(bold("Concentration (mM)")))
>
> Very  best,
>
>
> Chris
>
> --
> Chris Evans (he/him)
> Visiting Professor, UDLA, Quito, Ecuador & Honorary Professor, University of Roehampton, London, UK.
> Work web site: https://www.psyctc.org/psyctc/
> CORE site: http://www.coresystemtrust.org.uk/
> Personal site: https://www.psyctc.org/pelerinage2016/
> Emeetings (Thursdays): https://www.psyctc.org/psyctc/booking-meetings-with-me/
> (Beware: French time, generally an hour ahead of UK)
> <https://ombook.psyctc.org/book>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Jul  1 21:24:14 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 1 Jul 2023 20:24:14 +0100
Subject: [R] How to plot both lines and points by group on ggplot2
In-Reply-To: <CAMk+s2R96RiuV0fr16X4jBjPfM8X1mcRUO9kr3HTYdvP9gV_tg@mail.gmail.com>
References: <CAMk+s2R96RiuV0fr16X4jBjPfM8X1mcRUO9kr3HTYdvP9gV_tg@mail.gmail.com>
Message-ID: <0f792256-dfbf-bdf9-a0f6-35a8c4282177@sapo.pt>

?s 19:20 de 01/07/2023, Luigi Marongiu escreveu:
> Hello,
> I have a dataframe with measurements stratified by the concentration
> of a certain substance. I would like to plot the points of the
> measures and connect the points within each series of concentrations.
> When I launch ggplot2 I get the error
> ```
> geom_path: Each group consists of only one observation. Do you need to
> adjust the
> group aesthetic?
> ```
> and no lines are drawn.
> Where am I going wrong?
> Thank you
> Luigi
> 
> ```
> df = data.frame(Conc = c(rep(1, 3), rep(2, 3), rep(5, 3)),
>                  Time = rep(1:3, 3),
>                  Value = c(0.91, 0.67, 0.71, 0.91, 0.65, 0.74, 0.95, 0.67, 0.67))
> df$Time <- as.factor(df$Time)
> levels(df$Time) = c(1, 4, 24)
> df$Conc <- as.factor(df$Conc)
> levels(df$Conc) = c(1, 2, 5)
> library(ggplot2)
> ggplot(df, aes(x=Time, y=Value, colour=Conc)) +
>    geom_point(size=6) +
>    geom_line(aes(x=Time, y=Value, colour=Conc)) +
>    scale_colour_manual(values = c("darkslategray3", "darkslategray4",
>                                   "deepskyblue4")) +
>    ggtitle("Working example") +
>    xlab(expression(bold("Time (h)"))) +
>    ylab(expression(bold("Concentration (mM)")))
> ```
Hello,

Here are two solutions. I have removed the redundant aes() from 
geom_line in both plots.

1. If you do not coerce Time to factor, the x axis will be continuous.
    The plot will be as expected but you wi have to include a 
scale_x_continuous to have the wanted labels.



df = data.frame(Conc = c(rep(1, 3), rep(2, 3), rep(5, 3)),
                 Time = rep(1:3, 3),
                 Value = c(0.91, 0.67, 0.71, 0.91, 0.65, 0.74, 0.95, 
0.67, 0.67))

library(ggplot2)

df$Conc <- factor(df$Conc, levels = c(1, 2, 5))

ggplot(df, aes(x=Time, y=Value, colour=Conc)) +
   geom_point(size=6) +
   geom_line() +
   scale_colour_manual(values = c("darkslategray3", "darkslategray4", 
"deepskyblue4")) +
   scale_x_continuous(breaks = 1:3, labels = c(1, 2, 24)) +
   ggtitle("Working example") +
   xlab(expression(bold("Time (h)"))) +
   ylab(expression(bold("Concentration (mM)")))




2. Time is coerced to factor. Then, tell geom_line the data is grouped 
by Conc. This is probably the solution you should use.



df$Time <- factor(df$Time, labels = c(1, 4, 24))

ggplot(df, aes(x=Time, y=Value, colour=Conc)) +
   geom_point(size=6) +
   geom_line(aes(group = Conc)) +
   scale_colour_manual(values = c("darkslategray3", "darkslategray4", 
"deepskyblue4")) +
   ggtitle("Working example") +
   xlab(expression(bold("Time (h)"))) +
   ylab(expression(bold("Concentration (mM)")))



Hope this helps,

Rui Barradas


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Sun Jul  2 07:31:57 2023
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Sun, 2 Jul 2023 07:31:57 +0200
Subject: [R] How to plot both lines and points by group on ggplot2
In-Reply-To: <9bf6e614-0df4-fd45-a40c-50302a26d5a9@psyctc.org>
References: <CAMk+s2R96RiuV0fr16X4jBjPfM8X1mcRUO9kr3HTYdvP9gV_tg@mail.gmail.com>
 <9bf6e614-0df4-fd45-a40c-50302a26d5a9@psyctc.org>
Message-ID: <CAMk+s2QgD+q4x2nty=5mO7zjVG2Vr8fwqkoF0kjODFtUSLFP-w@mail.gmail.com>

Thank you that is exactly it!
The problem was to connect each point of the series 'Conc' with a line.
Best regards
Luigi

On Sat, Jul 1, 2023 at 8:33?PM Chris Evans <chrishold at psyctc.org> wrote:
>
>
> On 01/07/2023 19:20, Luigi Marongiu wrote:
> > Hello,
> > I have a dataframe with measurements stratified by the concentration
> > of a certain substance. I would like to plot the points of the
> > measures and connect the points within each series of concentrations.
> > When I launch ggplot2 I get the error
> > ```
> > geom_path: Each group consists of only one observation. Do you need to
> > adjust the
> > group aesthetic?
> > ```
> > and no lines are drawn.
> > Where am I going wrong?
> > Thank you
> > Luigi
> >
> > ```
> > df = data.frame(Conc = c(rep(1, 3), rep(2, 3), rep(5, 3)),
> >                  Time = rep(1:3, 3),
> >                  Value = c(0.91, 0.67, 0.71, 0.91, 0.65, 0.74, 0.95, 0.67, 0.67))
> > df$Time <- as.factor(df$Time)
> > levels(df$Time) = c(1, 4, 24)
> > df$Conc <- as.factor(df$Conc)
> > levels(df$Conc) = c(1, 2, 5)
> > library(ggplot2)
> > ggplot(df, aes(x=Time, y=Value, colour=Conc)) +
> >    geom_point(size=6) +
> >    geom_line(aes(x=Time, y=Value, colour=Conc)) +
> >    scale_colour_manual(values = c("darkslategray3", "darkslategray4",
> >                                   "deepskyblue4")) +
> >    ggtitle("Working example") +
> >    xlab(expression(bold("Time (h)"))) +
> >    ylab(expression(bold("Concentration (mM)")))
> > ```
>
> If I understand what you want then I think all you need is to add "group
> = Conc".  That's what that message is telling you.
>
> df = data.frame(Conc = c(rep(1, 3), rep(2, 3), rep(5, 3)),
>                  Time = rep(1:3, 3),
>                  Value = c(0.91, 0.67, 0.71, 0.91, 0.65, 0.74, 0.95,
> 0.67, 0.67))
> df$Time <- as.factor(df$Time)
> levels(df$Time) = c(1, 4, 24)
> df$Conc <- as.factor(df$Conc)
> levels(df$Conc) = c(1, 2, 5)
> library(ggplot2)
> ggplot(df, aes(x=Time, y=Value, colour=Conc, group = Conc)) +
>    geom_point(size=6) +
>    geom_line(aes(x=Time, y=Value, colour=Conc)) +
>    scale_colour_manual(values = c("darkslategray3", "darkslategray4",
>                                   "deepskyblue4")) +
>    ggtitle("Working example") +
>    xlab(expression(bold("Time (h)"))) +
>    ylab(expression(bold("Concentration (mM)")))
>
> Very  best,
>
>
> Chris
>
> --
> Chris Evans (he/him)
> Visiting Professor, UDLA, Quito, Ecuador & Honorary Professor,
> University of Roehampton, London, UK.
> Work web site: https://www.psyctc.org/psyctc/
> CORE site: http://www.coresystemtrust.org.uk/
> Personal site: https://www.psyctc.org/pelerinage2016/
> Emeetings (Thursdays):
> https://www.psyctc.org/psyctc/booking-meetings-with-me/
> (Beware: French time, generally an hour ahead of UK)
> <https://ombook.psyctc.org/book>



-- 
Best regards,
Luigi


From r@v|@v@r@dh@n @end|ng |rom jhu@edu  Sat Jul  1 19:15:48 2023
From: r@v|@v@r@dh@n @end|ng |rom jhu@edu (Ravi Varadhan)
Date: Sat, 1 Jul 2023 17:15:48 +0000
Subject: [R] Number of Cores limited to two in CRAN
Message-ID: <SJ0PR01MB6400F14976E2657491EF473CF22BA@SJ0PR01MB6400.prod.exchangelabs.com>

Hi,
I am developing a package where I would like to utilize multiple cores for parallel computing.  However, I get an error message when I run R CMD check --as-cran.

I read that CRAN limits the number of cores to 2.  Is this correct? Is there any way to overcome this limitation?

Thank you,
Ravi

	[[alternative HTML version deleted]]


From r@v|@v@r@dh@n @end|ng |rom jhu@edu  Sat Jul  1 19:46:43 2023
From: r@v|@v@r@dh@n @end|ng |rom jhu@edu (Ravi Varadhan)
Date: Sat, 1 Jul 2023 17:46:43 +0000
Subject: [R] Number of Cores limited to two in CRAN
In-Reply-To: <SJ0PR01MB6400F14976E2657491EF473CF22BA@SJ0PR01MB6400.prod.exchangelabs.com>
References: <SJ0PR01MB6400F14976E2657491EF473CF22BA@SJ0PR01MB6400.prod.exchangelabs.com>
Message-ID: <SJ0PR01MB6400A88A7DA6AFEE1C8DA7A0F22BA@SJ0PR01MB6400.prod.exchangelabs.com>

This is the specific error messsage from R CMD check --as-cran


Error in .check_ncores(length(names)) : 16 simultaneous processes spawned
  Calls: prepost -> makeCluster -> makePSOCKcluster -> .check_ncores
  Execution halted


Thanks,
Ravi

________________________________
From: Ravi Varadhan
Sent: Saturday, July 1, 2023 1:15 PM
To: R-Help <r-help at r-project.org>
Subject: Number of Cores limited to two in CRAN

Hi,
I am developing a package where I would like to utilize multiple cores for parallel computing.  However, I get an error message when I run R CMD check --as-cran.

I read that CRAN limits the number of cores to 2.  Is this correct? Is there any way to overcome this limitation?

Thank you,
Ravi

	[[alternative HTML version deleted]]


From henr|k@bengt@@on @end|ng |rom gm@||@com  Sun Jul  2 10:33:34 2023
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Sun, 2 Jul 2023 10:33:34 +0200
Subject: [R] Number of Cores limited to two in CRAN
In-Reply-To: <SJ0PR01MB6400A88A7DA6AFEE1C8DA7A0F22BA@SJ0PR01MB6400.prod.exchangelabs.com>
References: <SJ0PR01MB6400F14976E2657491EF473CF22BA@SJ0PR01MB6400.prod.exchangelabs.com>
 <SJ0PR01MB6400A88A7DA6AFEE1C8DA7A0F22BA@SJ0PR01MB6400.prod.exchangelabs.com>
Message-ID: <CAFDcVCQ2Ej825e4q=A8pLUqvD9D-DN_PkUTUJQt1svWzLO-nTA@mail.gmail.com>

Short answer: You don't want to override that limit in your R package.
Don't do it.

Long answer: You'll find the reason for this in the 'CRAN Repository
Policy' (https://cran.r-project.org/web/packages/policies.html).
Specifically, the following passage:

"Checking the package should take as little CPU time as possible, as
the CRAN check farm is a very limited resource and there are thousands
of packages. Long-running tests and vignette code can be made optional
for checking, but do ensure that the checks that are left do exercise
all the features of the package.

**If running a package uses multiple threads/cores it must never use
more than two simultaneously: the check farm is a shared resource and
will typically be running many checks simultaneously.**

Examples should run for no more than a few seconds each: they are
intended to exemplify to the would-be user how to use the functions in
the package."

Basically, you can use two cores to demonstrate or validate (e.g. in
package tests) that your code *can* run in parallel, but you must not
use more than that to demonstrate that your code can "run super fast".

Even-longer answer: See my blog post 'Please Avoid detectCores() in
your R Packages' (https://www.jottr.org/2022/12/05/avoid-detectcores/)
from 2022-12-05 for even more reasons.

/Henrik

On Sun, Jul 2, 2023 at 9:55?AM Ravi Varadhan via R-help
<r-help at r-project.org> wrote:
>
> This is the specific error messsage from R CMD check --as-cran
>
>
> Error in .check_ncores(length(names)) : 16 simultaneous processes spawned
>   Calls: prepost -> makeCluster -> makePSOCKcluster -> .check_ncores
>   Execution halted
>
>
> Thanks,
> Ravi
>
> ________________________________
> From: Ravi Varadhan
> Sent: Saturday, July 1, 2023 1:15 PM
> To: R-Help <r-help at r-project.org>
> Subject: Number of Cores limited to two in CRAN
>
> Hi,
> I am developing a package where I would like to utilize multiple cores for parallel computing.  However, I get an error message when I run R CMD check --as-cran.
>
> I read that CRAN limits the number of cores to 2.  Is this correct? Is there any way to overcome this limitation?
>
> Thank you,
> Ravi
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@v|@v@r@dh@n @end|ng |rom jhu@edu  Sun Jul  2 14:40:22 2023
From: r@v|@v@r@dh@n @end|ng |rom jhu@edu (Ravi Varadhan)
Date: Sun, 2 Jul 2023 12:40:22 +0000
Subject: [R] Number of Cores limited to two in CRAN
In-Reply-To: <CAFDcVCQ2Ej825e4q=A8pLUqvD9D-DN_PkUTUJQt1svWzLO-nTA@mail.gmail.com>
References: <SJ0PR01MB6400F14976E2657491EF473CF22BA@SJ0PR01MB6400.prod.exchangelabs.com>
 <SJ0PR01MB6400A88A7DA6AFEE1C8DA7A0F22BA@SJ0PR01MB6400.prod.exchangelabs.com>
 <CAFDcVCQ2Ej825e4q=A8pLUqvD9D-DN_PkUTUJQt1svWzLO-nTA@mail.gmail.com>
Message-ID: <SJ0PR01MB6400D508E3D324C426301023F228A@SJ0PR01MB6400.prod.exchangelabs.com>

Dear Henrik,
Thank you!  This is quite helpful, especially your longer blog post.

Best regards,
Ravi
________________________________
From: Henrik Bengtsson <henrik.bengtsson at gmail.com>
Sent: Sunday, July 2, 2023 4:33 AM
To: Ravi Varadhan <ravi.varadhan at jhu.edu>
Cc: R-Help <r-help at r-project.org>
Subject: Re: [R] Number of Cores limited to two in CRAN


      External Email - Use Caution



Short answer: You don't want to override that limit in your R package.
Don't do it.

Long answer: You'll find the reason for this in the 'CRAN Repository
Policy' (https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2Fpolicies.html&data=05%7C01%7Cravi.varadhan%40jhu.edu%7Cbf56c90173504853907408db7ad70f08%7C9fa4f438b1e6473b803f86f8aedf0dec%7C0%7C0%7C638238836311718317%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=KDB6%2BqMgn4KrKtVEgWezfRY9isT926wLwZGg5yuDKI4%3D&reserved=0<https://cran.r-project.org/web/packages/policies.html>).
Specifically, the following passage:

"Checking the package should take as little CPU time as possible, as
the CRAN check farm is a very limited resource and there are thousands
of packages. Long-running tests and vignette code can be made optional
for checking, but do ensure that the checks that are left do exercise
all the features of the package.

**If running a package uses multiple threads/cores it must never use
more than two simultaneously: the check farm is a shared resource and
will typically be running many checks simultaneously.**

Examples should run for no more than a few seconds each: they are
intended to exemplify to the would-be user how to use the functions in
the package."

Basically, you can use two cores to demonstrate or validate (e.g. in
package tests) that your code *can* run in parallel, but you must not
use more than that to demonstrate that your code can "run super fast".

Even-longer answer: See my blog post 'Please Avoid detectCores() in
your R Packages' (https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.jottr.org%2F2022%2F12%2F05%2Favoid-detectcores%2F&data=05%7C01%7Cravi.varadhan%40jhu.edu%7Cbf56c90173504853907408db7ad70f08%7C9fa4f438b1e6473b803f86f8aedf0dec%7C0%7C0%7C638238836311718317%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=xPkA6JCccHZcST76lWa6xFYWWKBOZYQCOezF5t4YVPM%3D&reserved=0<https://www.jottr.org/2022/12/05/avoid-detectcores/>)
from 2022-12-05 for even more reasons.

/Henrik

On Sun, Jul 2, 2023 at 9:55?AM Ravi Varadhan via R-help
<r-help at r-project.org> wrote:
>
> This is the specific error messsage from R CMD check --as-cran
>
>
> Error in .check_ncores(length(names)) : 16 simultaneous processes spawned
>   Calls: prepost -> makeCluster -> makePSOCKcluster -> .check_ncores
>   Execution halted
>
>
> Thanks,
> Ravi
>
> ________________________________
> From: Ravi Varadhan
> Sent: Saturday, July 1, 2023 1:15 PM
> To: R-Help <r-help at r-project.org>
> Subject: Number of Cores limited to two in CRAN
>
> Hi,
> I am developing a package where I would like to utilize multiple cores for parallel computing.  However, I get an error message when I run R CMD check --as-cran.
>
> I read that CRAN limits the number of cores to 2.  Is this correct? Is there any way to overcome this limitation?
>
> Thank you,
> Ravi
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Cravi.varadhan%40jhu.edu%7Cbf56c90173504853907408db7ad70f08%7C9fa4f438b1e6473b803f86f8aedf0dec%7C0%7C0%7C638238836311873942%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=KTNwXurNvbEhviVf15RF0la%2FvUVGBW60yuyVVy9Umxc%3D&reserved=0<https://stat.ethz.ch/mailman/listinfo/r-help>
> PLEASE do read the posting guide https://nam02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Cravi.varadhan%40jhu.edu%7Cbf56c90173504853907408db7ad70f08%7C9fa4f438b1e6473b803f86f8aedf0dec%7C0%7C0%7C638238836311873942%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=HvGb20UiUey9O3plynLiRmHQtqpjfrndk2iPfvleT3Q%3D&reserved=0<http://www.r-project.org/posting-guide.html>
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From |@go@g|ne @end|ng |rom @jd@e@  Mon Jul  3 08:36:27 2023
From: |@go@g|ne @end|ng |rom @jd@e@ (=?iso-8859-1?Q?Iago_Gin=E9_V=E1zquez?=)
Date: Mon, 3 Jul 2023 06:36:27 +0000
Subject: [R] Help/documentation on Rgui
Message-ID: <AM6PR02MB4423F1C4ED2FB19545C78FC09429A@AM6PR02MB4423.eurprd02.prod.outlook.com>

Hi all,

Where can I find a detailed document(ation) on the use of Rgui.exe. The most detailed I found is https://cran.r-project.org/doc/manuals/r-release/R-ints.html#GUI-consoles, where there is almost nothing.

Actually I want to know how to open Rgui.exe (let's say, from a terminal [mainly in Windows], even better, through the ViM plugin NVim-R) with a set of specific preferences, like a dark background or specific text colour and size, which I see I can modify once it is open.

Thank you for your help.

Iago


	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Jul  3 09:42:56 2023
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 3 Jul 2023 07:42:56 +0000
Subject: [R] Help/documentation on Rgui
In-Reply-To: <AM6PR02MB4423F1C4ED2FB19545C78FC09429A@AM6PR02MB4423.eurprd02.prod.outlook.com>
References: <AM6PR02MB4423F1C4ED2FB19545C78FC09429A@AM6PR02MB4423.eurprd02.prod.outlook.com>
Message-ID: <89e64ee67c91423cac3cb642c353ee1f@SRVEXCHCM1302.precheza.cz>

Hi

I am not sure about opening Rgui in terminal but for customising Rgui
appearance you can modify Rconsole and Rprofile or Rprofile.site which you
should find in etc folder of your R installation.

https://stat.ethz.ch/R-manual/R-devel/library/utils/html/Rconsole.html
https://rdrr.io/r/utils/Rconsole.html
and "Initialization at Start of an R Session" in R help
?Rprofile

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Iago Gin?
> V?zquez
> Sent: Monday, July 3, 2023 8:36 AM
> To: r-help at r-project.org
> Subject: [R] Help/documentation on Rgui
> 
> Hi all,
> 
> Where can I find a detailed document(ation) on the use of Rgui.exe. The
most
> detailed I found is https://cran.r-project.org/doc/manuals/r-release/R-
> ints.html#GUI-consoles, where there is almost nothing.
> 
> Actually I want to know how to open Rgui.exe (let's say, from a terminal
> [mainly in Windows], even better, through the ViM plugin NVim-R) with a
set
> of specific preferences, like a dark background or specific text colour
and size,
> which I see I can modify once it is open.
> 
> Thank you for your help.
> 
> Iago
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From |@go@g|ne @end|ng |rom @jd@e@  Mon Jul  3 09:47:52 2023
From: |@go@g|ne @end|ng |rom @jd@e@ (=?iso-8859-1?Q?Iago_Gin=E9_V=E1zquez?=)
Date: Mon, 3 Jul 2023 07:47:52 +0000
Subject: [R] Help/documentation on Rgui
Message-ID: <AM6PR02MB44235C1EA9517904E87741439429A@AM6PR02MB4423.eurprd02.prod.outlook.com>

Thank you Petr, great!

Best,
Iago

________________________________
De: PIKAL Petr
Enviat: Dilluns, 3-juliol 3e000 2023 9:42
Per a: Iago Gin? V?zquez; r-help at r-project.org
Assumpte: RE: Help/documentation on Rgui

Hi

I am not sure about opening Rgui in terminal but for customising Rgui
appearance you can modify Rconsole and Rprofile or Rprofile.site which you
should find in etc folder of your R installation.

https://stat.ethz.ch/R-manual/R-devel/library/utils/html/Rconsole.html
https://rdrr.io/r/utils/Rconsole.html
and "Initialization at Start of an R Session" in R help
?Rprofile

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Iago Gin?
> V?zquez
> Sent: Monday, July 3, 2023 8:36 AM
> To: r-help at r-project.org
> Subject: [R] Help/documentation on Rgui
>
> Hi all,
>
> Where can I find a detailed document(ation) on the use of Rgui.exe. The
most
> detailed I found is https://cran.r-project.org/doc/manuals/r-release/R-
> ints.html#GUI-consoles, where there is almost nothing.
>
> Actually I want to know how to open Rgui.exe (let's say, from a terminal
> [mainly in Windows], even better, through the ViM plugin NVim-R) with a
set
> of specific preferences, like a dark background or specific text colour
and size,
> which I see I can modify once it is open.
>
> Thank you for your help.
>
> Iago
>
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @nupty@g| @end|ng |rom gm@||@com  Mon Jul  3 11:08:17 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Mon, 3 Jul 2023 14:38:17 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CA+8X3fV8SxdDcaQ=Sd7rg6WmJ3xX0wgdjCSSf9wZ6zpaz9vDPQ@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CA+8X3fV8SxdDcaQ=Sd7rg6WmJ3xX0wgdjCSSf9wZ6zpaz9vDPQ@mail.gmail.com>
Message-ID: <CAFL9eunJR8sRQBtTpJD0PrZf3P7FXw+u+4FmXqmS+zv35HmbUg@mail.gmail.com>

Thanks Jim, thanks everyone. I was caught up with work and moving home, so
a delay in response. I tried running the code you provided and it is not
running well in my R-Studio setup. It is giving errors and not producing
plots. I don't yet understand all the code well yet, so I need to work on
it and then get back to you all. Sorry for not posting data from a R
dataframe. My data is still in Excel. I organized data in Excel almost
exactly (look wise) as the output from Stata log file (text) for a
"tabulate" command for a survey dataset. I don't yet understand a good way
to organize this data in R, so I cannot send it to you now. Let me do some
work on this, understand the R code you have given, and get back to you in
a few days. I have not been using R lately, but I think the graph I am
trying to make will be done better and easier in R than in Stata. Thank you
all for all your help. Let me do some work and get back to you.


On Fri, 30 Jun 2023 at 04:41, Jim Lemon <drjimlemon at gmail.com> wrote:

> Okay. Here is a modification that does four single line plots.
>
> at_df<-read.table(text=
>  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None Bank_Current
> Bank_Savings Bank_NA
>  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
>  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
>  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
>  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
>  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
>  No_Answer 9 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
>  header=TRUE,stringsAsFactors=FALSE)
> at_df<-at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA")]
> png("Income_pcts.png",height=700)
> par(mfrow=c(4,1))
> plot(at_df[,"Bank_Current"],
>  type="l",lwd=3,main="Bsnk_Current",
>  xlab="Income",ylab="%",xaxt="n")
> axis(1,at=1:5,labels=at_df$Income)
> plot(at_df[,"Bank_Savings"],
>  type="l",lwd=3,main="Bank_Sasvings",
>  xlab="Income",ylab="%",xaxt="n")
> axis(1,at=1:5,labels=at_df$Income)
> plot(at_df[,"MF_Equity"],
>  type="l",lwd=3,main="MF_Equity",
>  xlab="Income",ylab="%",xaxt="n")
> axis(1,at=1:5,labels=at_df$Income)
> plot(at_df[,"MF_Debt"],
>  type="l",lwd=3,main="MF_Debt",
>  xlab="Income",ylab="%",xaxt="n")
> axis(1,at=1:5,labels=at_df$Income)
> dev.off()
>
> Jim
>
> On Thu, Jun 29, 2023 at 1:49?PM Anupam Tyagi <anuptyagi at gmail.com> wrote:
> >
> > Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope you have
> > been well.
> >
> > Pikal, thanks. Your solution may be close to what I want. I did not know
> > that I was posting in HTML. I just copied the data from Excel and posted
> in
> > the email in Gmail. The data is still in Excel, because I have not yet
> > figured out what is a good way to organize it in R. I am posting it again
> > below as text. These are rows in Excel: 1,2,3,5,9 after MF are income
> > categories and No Answer category (9). Down the second column are
> > categories of MF and Bank AC. Rest of the columns are percentages.
> >
> > Jim, thanks for the graph. I am looking to plot only one line (category)
> > each in many small plots on the same page. I don't want to compare
> > different categories on the same graph as you do, but see how each
> category
> > varies by income, one category in each graph. Like Excel does with
> > Sparklines (Top menu: Insert, Sparklines, Lines). I have many categories
> > for many variables. I am only showing two MF and Bank AC.
> >
> > Income $10 $25 $40 $75 > $75 No Answer
> > MF 1 2 3 4 5 9
> > None 1 3.05 2.29 2.24 1.71 1.30 2.83
> > Equity 2 29.76 28.79 29.51 28.90 31.67 36.77
> > Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
> > Hybrid 4 36.00 36.27 33.94 33.74 29.44 27.25
> > Bank AC
> > None 1 46.54 54.01 59.1 62.17 67.67 60.87
> > Current 2 24.75 24.4 25 24.61 24.02 21.09
> > Savings 3 25.4 18.7 29 11.48 7.103 13.46
> > No Answer 9 3.307 2.891 13.4 1.746 1.208 4.577
> >
> >
> > On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com> wrote:
> >
> > > Hi Anupam,
> > > Haven't heard from you in a long time. Perhaps you want something like
> > > this:
> > >
> > > at_df<-read.table(text=
> > >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None Bank_Current
> > > Bank_Savings Bank_NA
> > >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> > >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> > >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> > >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> > >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
> > >  No_Answer 9 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> > >  header=TRUE,stringsAsFactors=FALSE)
> > > at_df<-at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA")]
> > > png("MF_Bank.png",height=600)
> > > par(mfrow=c(2,1))
> > > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
> > >  type="l",col=1:4,lty=1:4,lwd=3,
> > >  main="Percentages by Income and MF type",
> > >  xlab="Income",ylab="Percentage of group",xaxt="n")
> > > axis(1,at=1:5,labels=at_df$Income)
> > > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
> > >  lty=1:4,lwd=3,col=1:4)
> > > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
> > >  type="l",col=1:3,lty=1:4,lwd=3,
> > >  main="Percentages by Income and Bank type",
> > >  xlab="Income",ylab="Percentage of group",xaxt="n")
> > > axis(1,at=1:5,labels=at_df$Income)
> > > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
> > >  lty=1:4,lwd=3,col=1:3)
> > > dev.off()
> > >
> > > Jim
> > >
> > > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi <anuptyagi at gmail.com>
> wrote:
> > > >
> > > > Hello,
> > > >
> > > > I want to plot the following kind of data (percentage of respondents
> > > from a
> > > > survey) that varies by Income into many small *line* graphs in a
> panel of
> > > > graphs. I want to omit "No Answer" categories. I want to see how
> each one
> > > > of the categories (percentages), "None", " Equity", etc. varies by
> > > Income.
> > > > How can I do this? How to organize the data well and how to plot? I
> > > thought
> > > > Lattice may be a good package to plot this, but I don't know for
> sure. I
> > > > prefer to do this in Base-R if possible, but I am open to ggplot. Any
> > > ideas
> > > > will be helpful.
> > > >
> > > > Income
> > > > $10 $25 $40 $75 > $75 No Answer
> > > > MF 1 2 3 4 5 9
> > > > None 1 3.05 2.29 2.24 1.71 1.30 2.83
> > > > Equity 2 29.76 28.79 29.51 28.90 31.67 36.77
> > > > Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
> > > > Hybrid 4 36.00 36.27 33.94 33.74 29.44 27.25
> > > > Bank AC
> > > > None 1 46.54 54.01 59.1 62.17 67.67 60.87
> > > > Current 2 24.75 24.4 25 24.61 24.02 21.09
> > > > Savings 3 25.4 18.7 29 11.48 7.103 13.46
> > > > No Answer 9 3.307 2.891 13.4 1.746 1.208 4.577
> > > >
> > > > Thanks.
> > > > --
> > > > Anupam.
> > > >
> > > >         [[alternative HTML version deleted]]
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> >
> > --
> > Anupam.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>


-- 
Anupam.

	[[alternative HTML version deleted]]


From @nupty@g| @end|ng |rom gm@||@com  Mon Jul  3 11:53:31 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Mon, 3 Jul 2023 15:23:31 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CAFL9eumiW_+fa8RNk=yWEw8N7Uz0rK1mbbuaqXOT1FymEtRoVQ@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CA+8X3fV8SxdDcaQ=Sd7rg6WmJ3xX0wgdjCSSf9wZ6zpaz9vDPQ@mail.gmail.com>
 <CAFL9eunJR8sRQBtTpJD0PrZf3P7FXw+u+4FmXqmS+zv35HmbUg@mail.gmail.com>
 <CAFL9eumiW_+fa8RNk=yWEw8N7Uz0rK1mbbuaqXOT1FymEtRoVQ@mail.gmail.com>
Message-ID: <CAFL9eumct3yOEKkhsc4DPCgj=_0rRbNLNexH7tro35uT5=v8_A@mail.gmail.com>

Attached is another example plot, that is better than the earlier one.

On Mon, 3 Jul 2023 at 15:21, Anupam Tyagi <anuptyagi at gmail.com> wrote:

> I thought maybe I can share with you how the data looks in Excel, and an
> example plot I found on the web that looks similar to what I want to plot.
> These are attached to this email as *.png files. I am trying to see (plot)
> how each row of data (percentages) varies with income, making many small
> graphs in the same plot. For each row of data there will be one graph. I
> can manually delete the "No Answer" rows in Excel, if that is the best
> solution. I want the output to look like the sparklines in column "I" of
> attached Excel screenshot, with labelling of each graphs. This is similar
> to the attached "Example_plot". I thought this could be done with Lattice,
> or base-R, or ggplot easily, but this turning out to be more difficult than
> I had thought.
>
> On Mon, 3 Jul 2023 at 14:38, Anupam Tyagi <anuptyagi at gmail.com> wrote:
>
>> Thanks Jim, thanks everyone. I was caught up with work and moving home,
>> so a delay in response. I tried running the code you provided and it is not
>> running well in my R-Studio setup. It is giving errors and not producing
>> plots. I don't yet understand all the code well yet, so I need to work on
>> it and then get back to you all. Sorry for not posting data from a R
>> dataframe. My data is still in Excel. I organized data in Excel almost
>> exactly (look wise) as the output from Stata log file (text) for a
>> "tabulate" command for a survey dataset. I don't yet understand a good way
>> to organize this data in R, so I cannot send it to you now. Let me do some
>> work on this, understand the R code you have given, and get back to you in
>> a few days. I have not been using R lately, but I think the graph I am
>> trying to make will be done better and easier in R than in Stata. Thank you
>> all for all your help. Let me do some work and get back to you.
>>
>>
>> On Fri, 30 Jun 2023 at 04:41, Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>>> Okay. Here is a modification that does four single line plots.
>>>
>>> at_df<-read.table(text=
>>>  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None Bank_Current
>>> Bank_Savings Bank_NA
>>>  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
>>>  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
>>>  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
>>>  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
>>>  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
>>>  No_Answer 9 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
>>>  header=TRUE,stringsAsFactors=FALSE)
>>> at_df<-at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA")]
>>> png("Income_pcts.png",height=700)
>>> par(mfrow=c(4,1))
>>> plot(at_df[,"Bank_Current"],
>>>  type="l",lwd=3,main="Bsnk_Current",
>>>  xlab="Income",ylab="%",xaxt="n")
>>> axis(1,at=1:5,labels=at_df$Income)
>>> plot(at_df[,"Bank_Savings"],
>>>  type="l",lwd=3,main="Bank_Sasvings",
>>>  xlab="Income",ylab="%",xaxt="n")
>>> axis(1,at=1:5,labels=at_df$Income)
>>> plot(at_df[,"MF_Equity"],
>>>  type="l",lwd=3,main="MF_Equity",
>>>  xlab="Income",ylab="%",xaxt="n")
>>> axis(1,at=1:5,labels=at_df$Income)
>>> plot(at_df[,"MF_Debt"],
>>>  type="l",lwd=3,main="MF_Debt",
>>>  xlab="Income",ylab="%",xaxt="n")
>>> axis(1,at=1:5,labels=at_df$Income)
>>> dev.off()
>>>
>>> Jim
>>>
>>> On Thu, Jun 29, 2023 at 1:49?PM Anupam Tyagi <anuptyagi at gmail.com>
>>> wrote:
>>> >
>>> > Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope you
>>> have
>>> > been well.
>>> >
>>> > Pikal, thanks. Your solution may be close to what I want. I did not
>>> know
>>> > that I was posting in HTML. I just copied the data from Excel and
>>> posted in
>>> > the email in Gmail. The data is still in Excel, because I have not yet
>>> > figured out what is a good way to organize it in R. I am posting it
>>> again
>>> > below as text. These are rows in Excel: 1,2,3,5,9 after MF are income
>>> > categories and No Answer category (9). Down the second column are
>>> > categories of MF and Bank AC. Rest of the columns are percentages.
>>> >
>>> > Jim, thanks for the graph. I am looking to plot only one line
>>> (category)
>>> > each in many small plots on the same page. I don't want to compare
>>> > different categories on the same graph as you do, but see how each
>>> category
>>> > varies by income, one category in each graph. Like Excel does with
>>> > Sparklines (Top menu: Insert, Sparklines, Lines). I have many
>>> categories
>>> > for many variables. I am only showing two MF and Bank AC.
>>> >
>>> > Income $10 $25 $40 $75 > $75 No Answer
>>> > MF 1 2 3 4 5 9
>>> > None 1 3.05 2.29 2.24 1.71 1.30 2.83
>>> > Equity 2 29.76 28.79 29.51 28.90 31.67 36.77
>>> > Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
>>> > Hybrid 4 36.00 36.27 33.94 33.74 29.44 27.25
>>> > Bank AC
>>> > None 1 46.54 54.01 59.1 62.17 67.67 60.87
>>> > Current 2 24.75 24.4 25 24.61 24.02 21.09
>>> > Savings 3 25.4 18.7 29 11.48 7.103 13.46
>>> > No Answer 9 3.307 2.891 13.4 1.746 1.208 4.577
>>> >
>>> >
>>> > On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com> wrote:
>>> >
>>> > > Hi Anupam,
>>> > > Haven't heard from you in a long time. Perhaps you want something
>>> like
>>> > > this:
>>> > >
>>> > > at_df<-read.table(text=
>>> > >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None
>>> Bank_Current
>>> > > Bank_Savings Bank_NA
>>> > >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
>>> > >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
>>> > >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
>>> > >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
>>> > >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
>>> > >  No_Answer 9 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
>>> > >  header=TRUE,stringsAsFactors=FALSE)
>>> > >
>>> at_df<-at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA")]
>>> > > png("MF_Bank.png",height=600)
>>> > > par(mfrow=c(2,1))
>>> > > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
>>> > >  type="l",col=1:4,lty=1:4,lwd=3,
>>> > >  main="Percentages by Income and MF type",
>>> > >  xlab="Income",ylab="Percentage of group",xaxt="n")
>>> > > axis(1,at=1:5,labels=at_df$Income)
>>> > > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
>>> > >  lty=1:4,lwd=3,col=1:4)
>>> > > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
>>> > >  type="l",col=1:3,lty=1:4,lwd=3,
>>> > >  main="Percentages by Income and Bank type",
>>> > >  xlab="Income",ylab="Percentage of group",xaxt="n")
>>> > > axis(1,at=1:5,labels=at_df$Income)
>>> > > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
>>> > >  lty=1:4,lwd=3,col=1:3)
>>> > > dev.off()
>>> > >
>>> > > Jim
>>> > >
>>> > > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi <anuptyagi at gmail.com>
>>> wrote:
>>> > > >
>>> > > > Hello,
>>> > > >
>>> > > > I want to plot the following kind of data (percentage of
>>> respondents
>>> > > from a
>>> > > > survey) that varies by Income into many small *line* graphs in a
>>> panel of
>>> > > > graphs. I want to omit "No Answer" categories. I want to see how
>>> each one
>>> > > > of the categories (percentages), "None", " Equity", etc. varies by
>>> > > Income.
>>> > > > How can I do this? How to organize the data well and how to plot? I
>>> > > thought
>>> > > > Lattice may be a good package to plot this, but I don't know for
>>> sure. I
>>> > > > prefer to do this in Base-R if possible, but I am open to ggplot.
>>> Any
>>> > > ideas
>>> > > > will be helpful.
>>> > > >
>>> > > > Income
>>> > > > $10 $25 $40 $75 > $75 No Answer
>>> > > > MF 1 2 3 4 5 9
>>> > > > None 1 3.05 2.29 2.24 1.71 1.30 2.83
>>> > > > Equity 2 29.76 28.79 29.51 28.90 31.67 36.77
>>> > > > Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
>>> > > > Hybrid 4 36.00 36.27 33.94 33.74 29.44 27.25
>>> > > > Bank AC
>>> > > > None 1 46.54 54.01 59.1 62.17 67.67 60.87
>>> > > > Current 2 24.75 24.4 25 24.61 24.02 21.09
>>> > > > Savings 3 25.4 18.7 29 11.48 7.103 13.46
>>> > > > No Answer 9 3.307 2.891 13.4 1.746 1.208 4.577
>>> > > >
>>> > > > Thanks.
>>> > > > --
>>> > > > Anupam.
>>> > > >
>>> > > >         [[alternative HTML version deleted]]
>>> > > >
>>> > > > ______________________________________________
>>> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> > > > https://stat.ethz.ch/mailman/listinfo/r-help
>>> > > > PLEASE do read the posting guide
>>> > > http://www.R-project.org/posting-guide.html
>>> > > > and provide commented, minimal, self-contained, reproducible code.
>>> > >
>>> >
>>> >
>>> > --
>>> > Anupam.
>>> >
>>> >         [[alternative HTML version deleted]]
>>> >
>>> > ______________________________________________
>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> > https://stat.ethz.ch/mailman/listinfo/r-help
>>> > PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> > and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>
>> --
>> Anupam.
>>
>>
>
> --
> Anupam.
>
>

-- 
Anupam.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Example_plot2.png
Type: image/png
Size: 90776 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20230703/6c120593/attachment.png>

From petr@p|k@| @end|ng |rom prechez@@cz  Mon Jul  3 12:51:12 2023
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 3 Jul 2023 10:51:12 +0000
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CAFL9eumct3yOEKkhsc4DPCgj=_0rRbNLNexH7tro35uT5=v8_A@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CA+8X3fV8SxdDcaQ=Sd7rg6WmJ3xX0wgdjCSSf9wZ6zpaz9vDPQ@mail.gmail.com>
 <CAFL9eunJR8sRQBtTpJD0PrZf3P7FXw+u+4FmXqmS+zv35HmbUg@mail.gmail.com>
 <CAFL9eumiW_+fa8RNk=yWEw8N7Uz0rK1mbbuaqXOT1FymEtRoVQ@mail.gmail.com>
 <CAFL9eumct3yOEKkhsc4DPCgj=_0rRbNLNexH7tro35uT5=v8_A@mail.gmail.com>
Message-ID: <48cbfde02f2a443fbf1be583b968a0f5@SRVEXCHCM1302.precheza.cz>

Hi

I believe that facet_grid his is quite close to what you expect.  

p <- ggplot(mpg, aes(displ, cty)) + geom_point()+geom_line()
p + facet_grid(vars(drv), vars(cyl))

You can inspect how mpg data is organized by head(mpg)

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam Tyagi
> Sent: Monday, July 3, 2023 11:54 AM
> To: Jim Lemon <drjimlemon at gmail.com>
> Cc: r-help mailing list <r-help at r-project.org>
> Subject: Re: [R] Plotting factors in graph panel
> 
> Attached is another example plot, that is better than the earlier one.
> 
> On Mon, 3 Jul 2023 at 15:21, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> 
> > I thought maybe I can share with you how the data looks in Excel, and
> > an example plot I found on the web that looks similar to what I want to plot.
> > These are attached to this email as *.png files. I am trying to see
> > (plot) how each row of data (percentages) varies with income, making
> > many small graphs in the same plot. For each row of data there will be
> > one graph. I can manually delete the "No Answer" rows in Excel, if
> > that is the best solution. I want the output to look like the
> > sparklines in column "I" of attached Excel screenshot, with labelling
> > of each graphs. This is similar to the attached "Example_plot". I
> > thought this could be done with Lattice, or base-R, or ggplot easily,
> > but this turning out to be more difficult than I had thought.
> >
> > On Mon, 3 Jul 2023 at 14:38, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> >
> >> Thanks Jim, thanks everyone. I was caught up with work and moving
> >> home, so a delay in response. I tried running the code you provided
> >> and it is not running well in my R-Studio setup. It is giving errors
> >> and not producing plots. I don't yet understand all the code well
> >> yet, so I need to work on it and then get back to you all. Sorry for
> >> not posting data from a R dataframe. My data is still in Excel. I
> >> organized data in Excel almost exactly (look wise) as the output from
> >> Stata log file (text) for a "tabulate" command for a survey dataset.
> >> I don't yet understand a good way to organize this data in R, so I
> >> cannot send it to you now. Let me do some work on this, understand
> >> the R code you have given, and get back to you in a few days. I have
> >> not been using R lately, but I think the graph I am trying to make
> >> will be done better and easier in R than in Stata. Thank you all for all your
> help. Let me do some work and get back to you.
> >>
> >>
> >> On Fri, 30 Jun 2023 at 04:41, Jim Lemon <drjimlemon at gmail.com> wrote:
> >>
> >>> Okay. Here is a modification that does four single line plots.
> >>>
> >>> at_df<-read.table(text=
> >>>  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None
> >>> Bank_Current Bank_Savings Bank_NA
> >>>  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> >>>  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> >>>  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> >>>  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> >>>  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208  No_Answer 9
> >>> 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> >>>  header=TRUE,stringsAsFactors=FALSE)
> >>> at_df<-
> at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA"
> >>> )]
> >>> png("Income_pcts.png",height=700)
> >>> par(mfrow=c(4,1))
> >>> plot(at_df[,"Bank_Current"],
> >>>  type="l",lwd=3,main="Bsnk_Current",
> >>>  xlab="Income",ylab="%",xaxt="n")
> >>> axis(1,at=1:5,labels=at_df$Income)
> >>> plot(at_df[,"Bank_Savings"],
> >>>  type="l",lwd=3,main="Bank_Sasvings",
> >>>  xlab="Income",ylab="%",xaxt="n")
> >>> axis(1,at=1:5,labels=at_df$Income)
> >>> plot(at_df[,"MF_Equity"],
> >>>  type="l",lwd=3,main="MF_Equity",
> >>>  xlab="Income",ylab="%",xaxt="n")
> >>> axis(1,at=1:5,labels=at_df$Income)
> >>> plot(at_df[,"MF_Debt"],
> >>>  type="l",lwd=3,main="MF_Debt",
> >>>  xlab="Income",ylab="%",xaxt="n")
> >>> axis(1,at=1:5,labels=at_df$Income)
> >>> dev.off()
> >>>
> >>> Jim
> >>>
> >>> On Thu, Jun 29, 2023 at 1:49?PM Anupam Tyagi <anuptyagi at gmail.com>
> >>> wrote:
> >>> >
> >>> > Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope
> >>> > you
> >>> have
> >>> > been well.
> >>> >
> >>> > Pikal, thanks. Your solution may be close to what I want. I did
> >>> > not
> >>> know
> >>> > that I was posting in HTML. I just copied the data from Excel and
> >>> posted in
> >>> > the email in Gmail. The data is still in Excel, because I have not
> >>> > yet figured out what is a good way to organize it in R. I am
> >>> > posting it
> >>> again
> >>> > below as text. These are rows in Excel: 1,2,3,5,9 after MF are
> >>> > income categories and No Answer category (9). Down the second
> >>> > column are categories of MF and Bank AC. Rest of the columns are
> percentages.
> >>> >
> >>> > Jim, thanks for the graph. I am looking to plot only one line
> >>> (category)
> >>> > each in many small plots on the same page. I don't want to compare
> >>> > different categories on the same graph as you do, but see how each
> >>> category
> >>> > varies by income, one category in each graph. Like Excel does with
> >>> > Sparklines (Top menu: Insert, Sparklines, Lines). I have many
> >>> categories
> >>> > for many variables. I am only showing two MF and Bank AC.
> >>> >
> >>> > Income $10 $25 $40 $75 > $75 No Answer MF 1 2 3 4 5 9 None 1 3.05
> >>> > 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51 28.90 31.67
> >>> > 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15 Hybrid 4 36.00
> >>> > 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54 54.01 59.1
> >>> > 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02 21.09
> >>> > Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9 3.307 2.891
> >>> > 13.4 1.746 1.208 4.577
> >>> >
> >>> >
> >>> > On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com>
> wrote:
> >>> >
> >>> > > Hi Anupam,
> >>> > > Haven't heard from you in a long time. Perhaps you want
> >>> > > something
> >>> like
> >>> > > this:
> >>> > >
> >>> > > at_df<-read.table(text=
> >>> > >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None
> >>> Bank_Current
> >>> > > Bank_Savings Bank_NA
> >>> > >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> >>> > >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> >>> > >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> >>> > >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> >>> > >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
> >>> > > No_Answer 9 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> >>> > >  header=TRUE,stringsAsFactors=FALSE)
> >>> > >
> >>> at_df<-
> at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA"
> >>> )]
> >>> > > png("MF_Bank.png",height=600)
> >>> > > par(mfrow=c(2,1))
> >>> > > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
> >>> > >  type="l",col=1:4,lty=1:4,lwd=3,  main="Percentages by Income
> >>> > > and MF type",  xlab="Income",ylab="Percentage of
> >>> > > group",xaxt="n")
> >>> > > axis(1,at=1:5,labels=at_df$Income)
> >>> > > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
> >>> > >  lty=1:4,lwd=3,col=1:4)
> >>> > > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
> >>> > >  type="l",col=1:3,lty=1:4,lwd=3,  main="Percentages by Income
> >>> > > and Bank type",  xlab="Income",ylab="Percentage of
> >>> > > group",xaxt="n")
> >>> > > axis(1,at=1:5,labels=at_df$Income)
> >>> > > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
> >>> > >  lty=1:4,lwd=3,col=1:3)
> >>> > > dev.off()
> >>> > >
> >>> > > Jim
> >>> > >
> >>> > > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi
> >>> > > <anuptyagi at gmail.com>
> >>> wrote:
> >>> > > >
> >>> > > > Hello,
> >>> > > >
> >>> > > > I want to plot the following kind of data (percentage of
> >>> respondents
> >>> > > from a
> >>> > > > survey) that varies by Income into many small *line* graphs in
> >>> > > > a
> >>> panel of
> >>> > > > graphs. I want to omit "No Answer" categories. I want to see
> >>> > > > how
> >>> each one
> >>> > > > of the categories (percentages), "None", " Equity", etc.
> >>> > > > varies by
> >>> > > Income.
> >>> > > > How can I do this? How to organize the data well and how to
> >>> > > > plot? I
> >>> > > thought
> >>> > > > Lattice may be a good package to plot this, but I don't know
> >>> > > > for
> >>> sure. I
> >>> > > > prefer to do this in Base-R if possible, but I am open to ggplot.
> >>> Any
> >>> > > ideas
> >>> > > > will be helpful.
> >>> > > >
> >>> > > > Income
> >>> > > > $10 $25 $40 $75 > $75 No Answer MF 1 2 3 4 5 9 None 1 3.05
> >>> > > > 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51 28.90
> >>> > > > 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15 Hybrid
> >>> > > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54
> >>> > > > 54.01 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61
> >>> > > > 24.02 21.09 Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer
> >>> > > > 9 3.307 2.891 13.4 1.746 1.208 4.577
> >>> > > >
> >>> > > > Thanks.
> >>> > > > --
> >>> > > > Anupam.
> >>> > > >
> >>> > > >         [[alternative HTML version deleted]]
> >>> > > >
> >>> > > > ______________________________________________
> >>> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> >>> > > > see https://stat.ethz.ch/mailman/listinfo/r-help
> >>> > > > PLEASE do read the posting guide
> >>> > > http://www.R-project.org/posting-guide.html
> >>> > > > and provide commented, minimal, self-contained, reproducible
> code.
> >>> > >
> >>> >
> >>> >
> >>> > --
> >>> > Anupam.
> >>> >
> >>> >         [[alternative HTML version deleted]]
> >>> >
> >>> > ______________________________________________
> >>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> > https://stat.ethz.ch/mailman/listinfo/r-help
> >>> > PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> > and provide commented, minimal, self-contained, reproducible code.
> >>>
> >>
> >>
> >> --
> >> Anupam.
> >>
> >>
> >
> > --
> > Anupam.
> >
> >
> 
> --
> Anupam.

From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Mon Jul  3 20:00:32 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Mon, 3 Jul 2023 18:00:32 +0000
Subject: [R] Create matrix with column names wiht the same prefix xxxx and
 that end in 1, 2
Message-ID: <MW4PR03MB6363F53E2F260B10E5695BFCE229A@MW4PR03MB6363.namprd03.prod.outlook.com>

I am trying to create an array, myvalues, having 2 rows and 4 columns, where the column names are j,k,xxx1,xxx2. The code below fails, with the following error, "Error in dimnames(myvalues) <- list(NULL, zzz) : 
  length of 'dimnames' [2] not equal to array extent" 

Please help me get the code to work.

Thank you,
John

# create variable names xxx1 and xxx2.
string=""
for (j in 1:2){
  name <- paste("xxx",j,sep="")
  string <- paste(string,name)
  print(string)
}
# Creation of xxx1 and xxx2 works
string

# Create matrix
myvalues <- matrix(nrow=2,ncol=4)
head(myvalues,1)
# Add "j" and "k" to the string of column names
zzz <- paste("j","k",string)
zzz
# assign column names, j, k, xxx1, xxx2 to the matrix
# create column names, j, k, xxx1, xxx2.
dimnames(myvalues)<-list(NULL,zzz)



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Jul  3 20:11:03 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 03 Jul 2023 11:11:03 -0700
Subject: [R] 
 Create matrix with column names wiht the same prefix xxxx and
 that end in 1, 2
In-Reply-To: <MW4PR03MB6363F53E2F260B10E5695BFCE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB6363F53E2F260B10E5695BFCE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <CAF74814-8ADF-44F8-ABF0-FB8AA73A3D96@dcn.davis.ca.us>

?colnames

On July 3, 2023 11:00:32 AM PDT, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>I am trying to create an array, myvalues, having 2 rows and 4 columns, where the column names are j,k,xxx1,xxx2. The code below fails, with the following error, "Error in dimnames(myvalues) <- list(NULL, zzz) : 
>  length of 'dimnames' [2] not equal to array extent" 
>
>Please help me get the code to work.
>
>Thank you,
>John
>
># create variable names xxx1 and xxx2.
>string=""
>for (j in 1:2){
>  name <- paste("xxx",j,sep="")
>  string <- paste(string,name)
>  print(string)
>}
># Creation of xxx1 and xxx2 works
>string
>
># Create matrix
>myvalues <- matrix(nrow=2,ncol=4)
>head(myvalues,1)
># Add "j" and "k" to the string of column names
>zzz <- paste("j","k",string)
>zzz
># assign column names, j, k, xxx1, xxx2 to the matrix
># create column names, j, k, xxx1, xxx2.
>dimnames(myvalues)<-list(NULL,zzz)
>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Jul  3 20:34:44 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 3 Jul 2023 19:34:44 +0100
Subject: [R] 
 Create matrix with column names wiht the same prefix xxxx and
 that end in 1, 2
In-Reply-To: <MW4PR03MB6363F53E2F260B10E5695BFCE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB6363F53E2F260B10E5695BFCE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <1c17cec4-de83-e2e7-3ee6-c649f4eb1fd4@sapo.pt>

?s 19:00 de 03/07/2023, Sorkin, John escreveu:
> I am trying to create an array, myvalues, having 2 rows and 4 columns, where the column names are j,k,xxx1,xxx2. The code below fails, with the following error, "Error in dimnames(myvalues) <- list(NULL, zzz) :
>    length of 'dimnames' [2] not equal to array extent"
> 
> Please help me get the code to work.
> 
> Thank you,
> John
> 
> # create variable names xxx1 and xxx2.
> string=""
> for (j in 1:2){
>    name <- paste("xxx",j,sep="")
>    string <- paste(string,name)
>    print(string)
> }
> # Creation of xxx1 and xxx2 works
> string
> 
> # Create matrix
> myvalues <- matrix(nrow=2,ncol=4)
> head(myvalues,1)
> # Add "j" and "k" to the string of column names
> zzz <- paste("j","k",string)
> zzz
> # assign column names, j, k, xxx1, xxx2 to the matrix
> # create column names, j, k, xxx1, xxx2.
> dimnames(myvalues)<-list(NULL,zzz)
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

You don't need so many calls to paste, one is enough.
And you don't need the for loop at all, paste and paste0 are vectorized.



myvalues <- matrix(nrow=2,ncol=4)

cnames <- paste0("xxx", 1:2)
cnames
# [1] "xxx1" "xxx2"

colnames(myvalues) <- c("j", "k", cnames)



Hope this helps,

Rui Barradas


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Mon Jul  3 20:39:37 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Mon, 3 Jul 2023 18:39:37 +0000
Subject: [R] 
 Create matrix with column names wiht the same prefix xxxx and
 that end in 1, 2
In-Reply-To: <CAF74814-8ADF-44F8-ABF0-FB8AA73A3D96@dcn.davis.ca.us>
References: <MW4PR03MB6363F53E2F260B10E5695BFCE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <CAF74814-8ADF-44F8-ABF0-FB8AA73A3D96@dcn.davis.ca.us>
Message-ID: <2B3D5683-8BC6-4EFA-BACE-696F262D31A9@som.umaryland.edu>

Jeff,
Thank you for your reply.
I should have said with dim names not column names. I want the Mateix to have dim names, no row names, dim names j, k, xxx1, xxx2.

John

John David Sorkin M.D., Ph.D.
Professor of Medicine
Chief, Biostatistics and Informatics
University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
Baltimore VA Medical Center
10 North Greene Street<x-apple-data-detectors://12>
GRECC<x-apple-data-detectors://12> (BT/18/GR)
Baltimore, MD 21201-1524<x-apple-data-detectors://13/0>
(Phone) 410-605-711<tel:410-605-7119>9
(Fax) 410-605-7913<tel:410-605-7913> (Please call phone number above prior to faxing)

On Jul 3, 2023, at 2:11 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:

??colnames

On July 3, 2023 11:00:32 AM PDT, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
I am trying to create an array, myvalues, having 2 rows and 4 columns, where the column names are j,k,xxx1,xxx2. The code below fails, with the following error, "Error in dimnames(myvalues) <- list(NULL, zzz) :
length of 'dimnames' [2] not equal to array extent"

Please help me get the code to work.

Thank you,
John

# create variable names xxx1 and xxx2.
string=""
for (j in 1:2){
name <- paste("xxx",j,sep="")
string <- paste(string,name)
print(string)
}
# Creation of xxx1 and xxx2 works
string

# Create matrix
myvalues <- matrix(nrow=2,ncol=4)
head(myvalues,1)
# Add "j" and "k" to the string of column names
zzz <- paste("j","k",string)
zzz
# assign column names, j, k, xxx1, xxx2 to the matrix
# create column names, j, k, xxx1, xxx2.
dimnames(myvalues)<-list(NULL,zzz)


______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C4347c6a62c4b4956756708db7bf0ea2b%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638240046889096206%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=y8kLruSvrjxQLegbbPNMMl665EEApCgiSOq%2BEmhQfNE%3D&reserved=0
PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C4347c6a62c4b4956756708db7bf0ea2b%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638240046889096206%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=HBUMNAeG1KurerS2DAhKxxZVRs71TSF0YJSGjP%2FCixA%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C4347c6a62c4b4956756708db7bf0ea2b%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638240046889096206%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=y8kLruSvrjxQLegbbPNMMl665EEApCgiSOq%2BEmhQfNE%3D&reserved=0
PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C4347c6a62c4b4956756708db7bf0ea2b%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638240046889096206%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=HBUMNAeG1KurerS2DAhKxxZVRs71TSF0YJSGjP%2FCixA%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Jul  3 20:45:25 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 03 Jul 2023 11:45:25 -0700
Subject: [R] 
 Create matrix with column names wiht the same prefix xxxx and
 that end in 1, 2
In-Reply-To: <2B3D5683-8BC6-4EFA-BACE-696F262D31A9@som.umaryland.edu>
References: <MW4PR03MB6363F53E2F260B10E5695BFCE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <CAF74814-8ADF-44F8-ABF0-FB8AA73A3D96@dcn.davis.ca.us>
 <2B3D5683-8BC6-4EFA-BACE-696F262D31A9@som.umaryland.edu>
Message-ID: <92543D52-786A-487D-B39E-9635EF9D5200@dcn.davis.ca.us>

I really think you should read that help page.  colnames() accesses the second element of dimnames() directly.

On July 3, 2023 11:39:37 AM PDT, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>Jeff,
>Thank you for your reply.
>I should have said with dim names not column names. I want the Mateix to have dim names, no row names, dim names j, k, xxx1, xxx2.
>
>John
>
>John David Sorkin M.D., Ph.D.
>Professor of Medicine
>Chief, Biostatistics and Informatics
>University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
>Baltimore VA Medical Center
>10 North Greene Street<x-apple-data-detectors://12>
>GRECC<x-apple-data-detectors://12> (BT/18/GR)
>Baltimore, MD 21201-1524<x-apple-data-detectors://13/0>
>(Phone) 410-605-711<tel:410-605-7119>9
>(Fax) 410-605-7913<tel:410-605-7913> (Please call phone number above prior to faxing)
>
>On Jul 3, 2023, at 2:11 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
>??colnames
>
>On July 3, 2023 11:00:32 AM PDT, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>I am trying to create an array, myvalues, having 2 rows and 4 columns, where the column names are j,k,xxx1,xxx2. The code below fails, with the following error, "Error in dimnames(myvalues) <- list(NULL, zzz) :
>length of 'dimnames' [2] not equal to array extent"
>
>Please help me get the code to work.
>
>Thank you,
>John
>
># create variable names xxx1 and xxx2.
>string=""
>for (j in 1:2){
>name <- paste("xxx",j,sep="")
>string <- paste(string,name)
>print(string)
>}
># Creation of xxx1 and xxx2 works
>string
>
># Create matrix
>myvalues <- matrix(nrow=2,ncol=4)
>head(myvalues,1)
># Add "j" and "k" to the string of column names
>zzz <- paste("j","k",string)
>zzz
># assign column names, j, k, xxx1, xxx2 to the matrix
># create column names, j, k, xxx1, xxx2.
>dimnames(myvalues)<-list(NULL,zzz)
>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C4347c6a62c4b4956756708db7bf0ea2b%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638240046889096206%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=y8kLruSvrjxQLegbbPNMMl665EEApCgiSOq%2BEmhQfNE%3D&reserved=0
>PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C4347c6a62c4b4956756708db7bf0ea2b%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638240046889096206%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=HBUMNAeG1KurerS2DAhKxxZVRs71TSF0YJSGjP%2FCixA%3D&reserved=0
>and provide commented, minimal, self-contained, reproducible code.
>
>--
>Sent from my phone. Please excuse my brevity.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C4347c6a62c4b4956756708db7bf0ea2b%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638240046889096206%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=y8kLruSvrjxQLegbbPNMMl665EEApCgiSOq%2BEmhQfNE%3D&reserved=0
>PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C4347c6a62c4b4956756708db7bf0ea2b%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638240046889096206%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=HBUMNAeG1KurerS2DAhKxxZVRs71TSF0YJSGjP%2FCixA%3D&reserved=0
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Mon Jul  3 21:26:38 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Mon, 3 Jul 2023 19:26:38 +0000
Subject: [R] 
 Create matrix with column names wiht the same prefix xxxx and
 that end in 1, 2
In-Reply-To: <92543D52-786A-487D-B39E-9635EF9D5200@dcn.davis.ca.us>
References: <MW4PR03MB6363F53E2F260B10E5695BFCE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <CAF74814-8ADF-44F8-ABF0-FB8AA73A3D96@dcn.davis.ca.us>
 <2B3D5683-8BC6-4EFA-BACE-696F262D31A9@som.umaryland.edu>
 <92543D52-786A-487D-B39E-9635EF9D5200@dcn.davis.ca.us>
Message-ID: <MW4PR03MB6363C345F53BA12435A47AE8E229A@MW4PR03MB6363.namprd03.prod.outlook.com>

Jeff,
Again my thanks for your guidance.
I replaced dimnames(myvalues)<-list(NULL,c(zzz))
with
colnames(myvalues)<-zzz
and get the same error,
Error in dimnames(x) <- dn :
  length of 'dimnames' [2] not equal to array extent
It appears that I am creating the string zzz in a manner that is not compatable with either
dimnames(myvalues)<-list(NULL,c(zzz))
or
colnames(myvalues)<-zzz

I think I need to modify the way I create the string zzz.

# create variable names xxx1 and xxx2.
string=""
for (j in 1:2){
  name <- paste("xxx",j,sep="")
  string <- paste(string,name)
  print(string)
}
# Creation of xxx1 and xxx2 works
string

# Create matrix
myvalues <- matrix(nrow=2,ncol=4)
head(myvalues,1)
# Add "j" and "k" to the string of column names
zzz <- paste("j","k",string)
zzz
# assign column names, j, k, xxx1, xxx2 to the matrix
# create column names, j, k, xxx1, xxx2.
dimnames(myvalues)<-list(NULL,c(zzz))
colnames(myvalues)<-zzz
________________________________________
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Sent: Monday, July 3, 2023 2:45 PM
To: Sorkin, John
Cc: r-help at r-project.org
Subject: Re: [R]  Create matrix with column names wiht the same prefix xxxx and that end in 1, 2

I really think you should read that help page.  colnames() accesses the second element of dimnames() directly.

On July 3, 2023 11:39:37 AM PDT, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>Jeff,
>Thank you for your reply.
>I should have said with dim names not column names. I want the Mateix to have dim names, no row names, dim names j, k, xxx1, xxx2.
>
>John
>
>John David Sorkin M.D., Ph.D.
>Professor of Medicine
>Chief, Biostatistics and Informatics
>University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
>Baltimore VA Medical Center
>10 North Greene Street<x-apple-data-detectors://12>
>GRECC<x-apple-data-detectors://12> (BT/18/GR)
>Baltimore, MD 21201-1524<x-apple-data-detectors://13/0>
>(Phone) 410-605-711<tel:410-605-7119>9
>(Fax) 410-605-7913<tel:410-605-7913> (Please call phone number above prior to faxing)
>
>On Jul 3, 2023, at 2:11 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
>??colnames
>
>On July 3, 2023 11:00:32 AM PDT, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>I am trying to create an array, myvalues, having 2 rows and 4 columns, where the column names are j,k,xxx1,xxx2. The code below fails, with the following error, "Error in dimnames(myvalues) <- list(NULL, zzz) :
>length of 'dimnames' [2] not equal to array extent"
>
>Please help me get the code to work.
>
>Thank you,
>John
>
># create variable names xxx1 and xxx2.
>string=""
>for (j in 1:2){
>name <- paste("xxx",j,sep="")
>string <- paste(string,name)
>print(string)
>}
># Creation of xxx1 and xxx2 works
>string
>
># Create matrix
>myvalues <- matrix(nrow=2,ncol=4)
>head(myvalues,1)
># Add "j" and "k" to the string of column names
>zzz <- paste("j","k",string)
>zzz
># assign column names, j, k, xxx1, xxx2 to the matrix
># create column names, j, k, xxx1, xxx2.
>dimnames(myvalues)<-list(NULL,zzz)
>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.
>
>--
>Sent from my phone. Please excuse my brevity.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Jul  3 21:55:20 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 3 Jul 2023 20:55:20 +0100
Subject: [R] 
 Create matrix with column names wiht the same prefix xxxx and
 that end in 1, 2
In-Reply-To: <MW4PR03MB6363C345F53BA12435A47AE8E229A@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB6363F53E2F260B10E5695BFCE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <CAF74814-8ADF-44F8-ABF0-FB8AA73A3D96@dcn.davis.ca.us>
 <2B3D5683-8BC6-4EFA-BACE-696F262D31A9@som.umaryland.edu>
 <92543D52-786A-487D-B39E-9635EF9D5200@dcn.davis.ca.us>
 <MW4PR03MB6363C345F53BA12435A47AE8E229A@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <17f9849f-aabd-f714-2487-a6c31245ce62@sapo.pt>

?s 20:26 de 03/07/2023, Sorkin, John escreveu:
> Jeff,
> Again my thanks for your guidance.
> I replaced dimnames(myvalues)<-list(NULL,c(zzz))
> with
> colnames(myvalues)<-zzz
> and get the same error,
> Error in dimnames(x) <- dn :
>    length of 'dimnames' [2] not equal to array extent
> It appears that I am creating the string zzz in a manner that is not compatable with either
> dimnames(myvalues)<-list(NULL,c(zzz))
> or
> colnames(myvalues)<-zzz
> 
> I think I need to modify the way I create the string zzz.
> 
> # create variable names xxx1 and xxx2.
> string=""
> for (j in 1:2){
>    name <- paste("xxx",j,sep="")
>    string <- paste(string,name)
>    print(string)
> }
> # Creation of xxx1 and xxx2 works
> string
> 
> # Create matrix
> myvalues <- matrix(nrow=2,ncol=4)
> head(myvalues,1)
> # Add "j" and "k" to the string of column names
> zzz <- paste("j","k",string)
> zzz
> # assign column names, j, k, xxx1, xxx2 to the matrix
> # create column names, j, k, xxx1, xxx2.
> dimnames(myvalues)<-list(NULL,c(zzz))
> colnames(myvalues)<-zzz
> ________________________________________
> From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> Sent: Monday, July 3, 2023 2:45 PM
> To: Sorkin, John
> Cc: r-help at r-project.org
> Subject: Re: [R]  Create matrix with column names wiht the same prefix xxxx and that end in 1, 2
> 
> I really think you should read that help page.  colnames() accesses the second element of dimnames() directly.
> 
> On July 3, 2023 11:39:37 AM PDT, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>> Jeff,
>> Thank you for your reply.
>> I should have said with dim names not column names. I want the Mateix to have dim names, no row names, dim names j, k, xxx1, xxx2.
>>
>> John
>>
>> John David Sorkin M.D., Ph.D.
>> Professor of Medicine
>> Chief, Biostatistics and Informatics
>> University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
>> Baltimore VA Medical Center
>> 10 North Greene Street<x-apple-data-detectors://12>
>> GRECC<x-apple-data-detectors://12> (BT/18/GR)
>> Baltimore, MD 21201-1524<x-apple-data-detectors://13/0>
>> (Phone) 410-605-711<tel:410-605-7119>9
>> (Fax) 410-605-7913<tel:410-605-7913> (Please call phone number above prior to faxing)
>>
>> On Jul 3, 2023, at 2:11 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>>
>> ??colnames
>>
>> On July 3, 2023 11:00:32 AM PDT, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>> I am trying to create an array, myvalues, having 2 rows and 4 columns, where the column names are j,k,xxx1,xxx2. The code below fails, with the following error, "Error in dimnames(myvalues) <- list(NULL, zzz) :
>> length of 'dimnames' [2] not equal to array extent"
>>
>> Please help me get the code to work.
>>
>> Thank you,
>> John
>>
>> # create variable names xxx1 and xxx2.
>> string=""
>> for (j in 1:2){
>> name <- paste("xxx",j,sep="")
>> string <- paste(string,name)
>> print(string)
>> }
>> # Creation of xxx1 and xxx2 works
>> string
>>
>> # Create matrix
>> myvalues <- matrix(nrow=2,ncol=4)
>> head(myvalues,1)
>> # Add "j" and "k" to the string of column names
>> zzz <- paste("j","k",string)
>> zzz
>> # assign column names, j, k, xxx1, xxx2 to the matrix
>> # create column names, j, k, xxx1, xxx2.
>> dimnames(myvalues)<-list(NULL,zzz)
>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> --
> Sent from my phone. Please excuse my brevity.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

I should have pointed out in my answer that you are inded creating the 
names vector in a (very) wrong way. When in the loop you paste string 
and name you create one vector of length 1. When the loop ends, you have 
" xxx1 xxx2", not two names.


string=""
for (j in 1:2){
   name <- paste("xxx",j,sep="")
   string <- paste(string,name)
   print(string)
}
#> [1] " xxx1"
#> [1] " xxx1 xxx2"
# Creation of xxx1 and xxx2 works
string
#> [1] " xxx1 xxx2"



Quoting the comment above,

   Creation of xxx1 and xxx2 works

No, it does not!
And then you paste again, adding two extra letters to one string

zzz <- paste("j","k",string)


This zzz also is of length 1, check it.


With a loop the right way would be any of

# 1. concatenate the current name with string
string <- NULL   # or c(), perhaps more frequent
for (j in 1:2){
   name <- paste("xxx",j,sep="")
   string <- c(string, name)
   print(string)
}
#> [1] "xxx1"
#> [1] "xxx1" "xxx2"
# Now creation of xxx1 and xxx2 does work
string
#> [1] "xxx1" "xxx2"



# 2. create a vector of the appropriate length beforehand, my preferred
string <- character(2)
for (j in 1:2){
   string[j] <- paste0("xxx",j,sep="")
   print(string)
}
#> [1] "xxx1" ""
#> [1] "xxx1" "xxx2"
# Creation of xxx1 and xxx2 works
string
#> [1] "xxx1" "xxx2"



But the vectorized way is still the better one.

Hope this helps,

Rui Barradas


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Jul  3 22:02:26 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 3 Jul 2023 21:02:26 +0100
Subject: [R] 
 Create matrix with column names wiht the same prefix xxxx and
 that end in 1, 2
In-Reply-To: <17f9849f-aabd-f714-2487-a6c31245ce62@sapo.pt>
References: <MW4PR03MB6363F53E2F260B10E5695BFCE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <CAF74814-8ADF-44F8-ABF0-FB8AA73A3D96@dcn.davis.ca.us>
 <2B3D5683-8BC6-4EFA-BACE-696F262D31A9@som.umaryland.edu>
 <92543D52-786A-487D-B39E-9635EF9D5200@dcn.davis.ca.us>
 <MW4PR03MB6363C345F53BA12435A47AE8E229A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <17f9849f-aabd-f714-2487-a6c31245ce62@sapo.pt>
Message-ID: <64cb9bc7-f554-04cb-0a17-cf889b202c78@sapo.pt>

?s 20:55 de 03/07/2023, Rui Barradas escreveu:
> ?s 20:26 de 03/07/2023, Sorkin, John escreveu:
>> Jeff,
>> Again my thanks for your guidance.
>> I replaced dimnames(myvalues)<-list(NULL,c(zzz))
>> with
>> colnames(myvalues)<-zzz
>> and get the same error,
>> Error in dimnames(x) <- dn :
>> ?? length of 'dimnames' [2] not equal to array extent
>> It appears that I am creating the string zzz in a manner that is not 
>> compatable with either
>> dimnames(myvalues)<-list(NULL,c(zzz))
>> or
>> colnames(myvalues)<-zzz
>>
>> I think I need to modify the way I create the string zzz.
>>
>> # create variable names xxx1 and xxx2.
>> string=""
>> for (j in 1:2){
>> ?? name <- paste("xxx",j,sep="")
>> ?? string <- paste(string,name)
>> ?? print(string)
>> }
>> # Creation of xxx1 and xxx2 works
>> string
>>
>> # Create matrix
>> myvalues <- matrix(nrow=2,ncol=4)
>> head(myvalues,1)
>> # Add "j" and "k" to the string of column names
>> zzz <- paste("j","k",string)
>> zzz
>> # assign column names, j, k, xxx1, xxx2 to the matrix
>> # create column names, j, k, xxx1, xxx2.
>> dimnames(myvalues)<-list(NULL,c(zzz))
>> colnames(myvalues)<-zzz
>> ________________________________________
>> From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>> Sent: Monday, July 3, 2023 2:45 PM
>> To: Sorkin, John
>> Cc: r-help at r-project.org
>> Subject: Re: [R]? Create matrix with column names wiht the same prefix 
>> xxxx and that end in 1, 2
>>
>> I really think you should read that help page.? colnames() accesses 
>> the second element of dimnames() directly.
>>
>> On July 3, 2023 11:39:37 AM PDT, "Sorkin, John" 
>> <jsorkin at som.umaryland.edu> wrote:
>>> Jeff,
>>> Thank you for your reply.
>>> I should have said with dim names not column names. I want the Mateix 
>>> to have dim names, no row names, dim names j, k, xxx1, xxx2.
>>>
>>> John
>>>
>>> John David Sorkin M.D., Ph.D.
>>> Professor of Medicine
>>> Chief, Biostatistics and Informatics
>>> University of Maryland School of Medicine Division of Gerontology and 
>>> Geriatric Medicine
>>> Baltimore VA Medical Center
>>> 10 North Greene Street<x-apple-data-detectors://12>
>>> GRECC<x-apple-data-detectors://12> (BT/18/GR)
>>> Baltimore, MD 21201-1524<x-apple-data-detectors://13/0>
>>> (Phone) 410-605-711<tel:410-605-7119>9
>>> (Fax) 410-605-7913<tel:410-605-7913> (Please call phone number above 
>>> prior to faxing)
>>>
>>> On Jul 3, 2023, at 2:11 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> 
>>> wrote:
>>>
>>> ??colnames
>>>
>>> On July 3, 2023 11:00:32 AM PDT, "Sorkin, John" 
>>> <jsorkin at som.umaryland.edu> wrote:
>>> I am trying to create an array, myvalues, having 2 rows and 4 
>>> columns, where the column names are j,k,xxx1,xxx2. The code below 
>>> fails, with the following error, "Error in dimnames(myvalues) <- 
>>> list(NULL, zzz) :
>>> length of 'dimnames' [2] not equal to array extent"
>>>
>>> Please help me get the code to work.
>>>
>>> Thank you,
>>> John
>>>
>>> # create variable names xxx1 and xxx2.
>>> string=""
>>> for (j in 1:2){
>>> name <- paste("xxx",j,sep="")
>>> string <- paste(string,name)
>>> print(string)
>>> }
>>> # Creation of xxx1 and xxx2 works
>>> string
>>>
>>> # Create matrix
>>> myvalues <- matrix(nrow=2,ncol=4)
>>> head(myvalues,1)
>>> # Add "j" and "k" to the string of column names
>>> zzz <- paste("j","k",string)
>>> zzz
>>> # assign column names, j, k, xxx1, xxx2 to the matrix
>>> # create column names, j, k, xxx1, xxx2.
>>> dimnames(myvalues)<-list(NULL,zzz)
>>>
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.r-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> -- 
>>> Sent from my phone. Please excuse my brevity.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.r-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> -- 
>> Sent from my phone. Please excuse my brevity.
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> Hello,
> 
> I should have pointed out in my answer that you are inded creating the 
> names vector in a (very) wrong way. When in the loop you paste string 
> and name you create one vector of length 1. When the loop ends, you have 
> " xxx1 xxx2", not two names.
> 
> 
> string=""
> for (j in 1:2){
>  ? name <- paste("xxx",j,sep="")
>  ? string <- paste(string,name)
>  ? print(string)
> }
> #> [1] " xxx1"
> #> [1] " xxx1 xxx2"
> # Creation of xxx1 and xxx2 works
> string
> #> [1] " xxx1 xxx2"
> 
> 
> 
> Quoting the comment above,
> 
>  ? Creation of xxx1 and xxx2 works
> 
> No, it does not!
> And then you paste again, adding two extra letters to one string
> 
> zzz <- paste("j","k",string)
> 
> 
> This zzz also is of length 1, check it.
> 
> 
> With a loop the right way would be any of
> 
> # 1. concatenate the current name with string
> string <- NULL?? # or c(), perhaps more frequent
> for (j in 1:2){
>  ? name <- paste("xxx",j,sep="")
>  ? string <- c(string, name)
>  ? print(string)
> }
> #> [1] "xxx1"
> #> [1] "xxx1" "xxx2"
> # Now creation of xxx1 and xxx2 does work
> string
> #> [1] "xxx1" "xxx2"
> 
> 
> 
> # 2. create a vector of the appropriate length beforehand, my preferred
> string <- character(2)
> for (j in 1:2){
>  ? string[j] <- paste0("xxx",j,sep="")
>  ? print(string)
> }
> #> [1] "xxx1" ""
> #> [1] "xxx1" "xxx2"
> # Creation of xxx1 and xxx2 works
> string
> #> [1] "xxx1" "xxx2"
> 
> 
> 
> But the vectorized way is still the better one.
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

The notation in my first post doesn't follow the OP's, so here is a MWE 
corrected.


myvalues <- matrix(nrow=2,ncol=4)

string <- paste0("xxx", 1:2)
length(string)
#> [1] 2
string
#> [1] "xxx1" "xxx2"

zzz <- c("j", "k", string)
length(zzz)
#> [1] 4
zzz
#> [1] "j"    "k"    "xxx1" "xxx2"

# with colnames
colnames(myvalues) <- zzz

# with dimnames
dimnames(myvalues) <- list(NULL, zzz)

myvalues
#>       j  k xxx1 xxx2
#> [1,] NA NA   NA   NA
#> [2,] NA NA   NA   NA



Hope this helps,

Rui Barradas


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Mon Jul  3 22:08:06 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Mon, 3 Jul 2023 20:08:06 +0000
Subject: [R] Create a variable lenght string that can be used in a dimnames
 statement
Message-ID: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>

Colleagues,

I am sending this email again with a better description of my problem and the area where I need help.

I need help creating a string of variables that will be accepted by the dimnames function. The string needs to start with the dimnames j and k followed by a series of dimnames xxx1, . . . ., xxx2, . . ., xxxn. I create xxx1, xxx2 (not  going to xxxn to shorten the code below) as a string using a for loop and the paste function. I then use a paste function, zzz <- paste("j","k",string) to create the full set of dimnames, j, k, xxx1, xxx2 as string. I create the matrix myvalues in the usual way and attempt to assign dim names to the matrix using the following dimnames statement,
dimnames(myvalues)<-list(NULL,c(zzz))
The dimnames statement leads to the following error, 
 Error in dimnames(x) <- dn : 
  length of 'dimnames' [2] not equal to array extent
A colnames statement,
colnames(myvalues)<-as.character(zzz)
produces the same error. 

Can someone tell me how to create a sting that can be used in the dimnames statment?

Thank you (and please accept my apologies for double posting).

John

# create variable names xxx1 and xxx2.
string=""
for (j in 1:2){
  name <- paste("xxx",j,sep="")
  string <- paste(string,name)
  print(string)
}
# Creation of xxx1 and xxx2 works
string

# Create matrix
myvalues <- matrix(nrow=2,ncol=4)
head(myvalues,1)
# Add "j" and "k" to the string of column names
zzz <- paste("j","k",string)
zzz
# assign column names, j, k, xxx1, xxx2 to the matrix
# create column names, j, k, xxx1, xxx2.
dimnames(myvalues)<-list(NULL,c(zzz))
colnames(myvalues) <- string

From bgunter@4567 @end|ng |rom gm@||@com  Mon Jul  3 22:40:41 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 3 Jul 2023 13:40:41 -0700
Subject: [R] 
 Create a variable lenght string that can be used in a dimnames
 statement
In-Reply-To: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <CAGxFJbS-oNXzomZ+Ry_fRGF6zCU7rya07tLyNvqOSTNg_WNB-w@mail.gmail.com>

I am not going to try to sort out your confusion, as others have already
tried and failed. But I will point out that "string" of variables is pretty
much nonsense in R. A "character vector"/"vector of strings" is probably
what you mean and want to provide column names // names for the second
component of the dim list for a matrix. e.g.

> m <- matrix(1:6, nr=3)
> m
     [,1] [,2]
[1,]    1    4
[2,]    2    5
[3,]    3    6
> dimnames(m)
NULL
> dimnames(m) <- list(letters[1:3], c('foo','bar'))
> m
  foo bar
a   1   4
b   2   5
c   3   6

Cheers,
Bert

On Mon, Jul 3, 2023 at 1:10?PM Sorkin, John <jsorkin at som.umaryland.edu>
wrote:

> Colleagues,
>
> I am sending this email again with a better description of my problem and
> the area where I need help.
>
> I need help creating a string of variables that will be accepted by the
> dimnames function. The string needs to start with the dimnames j and k
> followed by a series of dimnames xxx1, . . . ., xxx2, . . ., xxxn. I create
> xxx1, xxx2 (not  going to xxxn to shorten the code below) as a string using
> a for loop and the paste function. I then use a paste function, zzz <-
> paste("j","k",string) to create the full set of dimnames, j, k, xxx1, xxx2
> as string. I create the matrix myvalues in the usual way and attempt to
> assign dim names to the matrix using the following dimnames statement,
> dimnames(myvalues)<-list(NULL,c(zzz))
> The dimnames statement leads to the following error,
>  Error in dimnames(x) <- dn :
>   length of 'dimnames' [2] not equal to array extent
> A colnames statement,
> colnames(myvalues)<-as.character(zzz)
> produces the same error.
>
> Can someone tell me how to create a sting that can be used in the dimnames
> statment?
>
> Thank you (and please accept my apologies for double posting).
>
> John
>
> # create variable names xxx1 and xxx2.
> string=""
> for (j in 1:2){
>   name <- paste("xxx",j,sep="")
>   string <- paste(string,name)
>   print(string)
> }
> # Creation of xxx1 and xxx2 works
> string
>
> # Create matrix
> myvalues <- matrix(nrow=2,ncol=4)
> head(myvalues,1)
> # Add "j" and "k" to the string of column names
> zzz <- paste("j","k",string)
> zzz
> # assign column names, j, k, xxx1, xxx2 to the matrix
> # create column names, j, k, xxx1, xxx2.
> dimnames(myvalues)<-list(NULL,c(zzz))
> colnames(myvalues) <- string
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ro||turner @end|ng |rom po@teo@net  Tue Jul  4 00:34:05 2023
From: ro||turner @end|ng |rom po@teo@net (Rolf Turner)
Date: Mon,  3 Jul 2023 22:34:05 +0000
Subject: [R] 
 Create a variable lenght string that can be used in a dimnames
 statement
In-Reply-To: <CAGxFJbS-oNXzomZ+Ry_fRGF6zCU7rya07tLyNvqOSTNg_WNB-w@mail.gmail.com>
References: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <CAGxFJbS-oNXzomZ+Ry_fRGF6zCU7rya07tLyNvqOSTNg_WNB-w@mail.gmail.com>
Message-ID: <20230704103405.385c8bb3@rolf-Latitude-E7470>


On Mon, 3 Jul 2023 13:40:41 -0700
Bert Gunter <bgunter.4567 at gmail.com> wrote:

> I am not going to try to sort out your confusion, as others have
> already tried and failed.

<SNIP>

Fortune nomination!!!

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Stats. Dep't. (secretaries) phone:
         +64-9-373-7599 ext. 89622
Home phone: +64-9-480-4619


From tebert @end|ng |rom u||@edu  Tue Jul  4 03:24:02 2023
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Tue, 4 Jul 2023 01:24:02 +0000
Subject: [R] 
 Create a variable lenght string that can be used in a dimnames
 statement
In-Reply-To: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <CH3PR22MB4514E47AF054F07F9D8BC6B5CF2EA@CH3PR22MB4514.namprd22.prod.outlook.com>

At least on my system string has a single value of " xxx1 xxx2" not "xxx1" and "xxx2".
The variable zzz has two values: "J K xxx1" and "J K xxx2"

What you want is "J", "K", "xxx1", "xxx2"
If I cheat everything works. So then the goal is to rewrite the program so cheating is not needed.

    # create variable names xxx1 and xxx2.
    string=""
    for (j in 1:2){
      name <- paste("xxx",j,sep="")
      string <- paste(string,name)
      print(string)
    }
    # Creation of xxx1 and xxx2 works
    string
    string = c("xxx1","xxx2") #Cheating
    # Create matrix
    myvalues <- matrix(nrow=2,ncol=4)
    head(myvalues,1)
    # Add "j" and "k" to the string of column names
    zzz <- paste("j","k",string) # assign column names, j, k, xxx1, xxx2 to the matrix # create column names, j, k, xxx1, xxx2.
    zzz<-c("J", "K", "xxx1", "xxx2") #Cheating again
    dimnames(myvalues)<-list(NULL,c(zzz))


Here is one version that runs without cheating
    # create variable names xxx1 and xxx2.
    string=""
    for (j in 1:2){
      string[j] <- paste("xxx",j,sep="")
      print(string)
    }
    # Creation of xxx1 and xxx2 works
    string

    # Create matrix
    myvalues <- matrix(nrow=2,ncol=4)
    zzz <- c("j","k",string) # assign column names, j, k, xxx1, xxx2 to the matrix # create column names, j, k, xxx1, xxx2.
    dimnames(myvalues)<-list(NULL,c(zzz))


Regards,
Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
Sent: Monday, July 3, 2023 4:08 PM
To: r-help at r-project.org (r-help at r-project.org) <r-help at r-project.org>
Subject: [R] Create a variable lenght string that can be used in a dimnames statement

[External Email]

Colleagues,

I am sending this email again with a better description of my problem and the area where I need help.

I need help creating a string of variables that will be accepted by the dimnames function. The string needs to start with the dimnames j and k followed by a series of dimnames xxx1, . . . ., xxx2, . . ., xxxn. I create xxx1, xxx2 (not  going to xxxn to shorten the code below) as a string using a for loop and the paste function. I then use a paste function, zzz <- paste("j","k",string) to create the full set of dimnames, j, k, xxx1, xxx2 as string. I create the matrix myvalues in the usual way and attempt to assign dim names to the matrix using the following dimnames statement,
dimnames(myvalues)<-list(NULL,c(zzz))
The dimnames statement leads to the following error,  Error in dimnames(x) <- dn :
  length of 'dimnames' [2] not equal to array extent A colnames statement,
colnames(myvalues)<-as.character(zzz)
produces the same error.

Can someone tell me how to create a sting that can be used in the dimnames statment?

Thank you (and please accept my apologies for double posting).

John

# create variable names xxx1 and xxx2.
string=""
for (j in 1:2){
  name <- paste("xxx",j,sep="")
  string <- paste(string,name)
  print(string)
}
# Creation of xxx1 and xxx2 works
string

# Create matrix
myvalues <- matrix(nrow=2,ncol=4)
head(myvalues,1)
# Add "j" and "k" to the string of column names zzz <- paste("j","k",string) zzz # assign column names, j, k, xxx1, xxx2 to the matrix # create column names, j, k, xxx1, xxx2.
dimnames(myvalues)<-list(NULL,c(zzz))
colnames(myvalues) <- string
______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Tue Jul  4 06:16:50 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Tue, 4 Jul 2023 04:16:50 +0000
Subject: [R] 
 Create a variable lenght string that can be used in a dimnames
 statement
In-Reply-To: <20230704103405.385c8bb3@rolf-Latitude-E7470>
References: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <CAGxFJbS-oNXzomZ+Ry_fRGF6zCU7rya07tLyNvqOSTNg_WNB-w@mail.gmail.com>
 <20230704103405.385c8bb3@rolf-Latitude-E7470>
Message-ID: <MW4PR03MB63632A747CBB1CB03996A55DE22EA@MW4PR03MB6363.namprd03.prod.outlook.com>

My life is complete.
I have inspired a fortune!
John

________________________________________
From: Rolf Turner <rolfturner at posteo.net>
Sent: Monday, July 3, 2023 6:34 PM
To: Bert Gunter
Cc: Sorkin, John; r-help at r-project.org (r-help at r-project.org); Achim Zeileis
Subject: Re: [R]  Create a variable lenght string that can be used in a dimnames statement


On Mon, 3 Jul 2023 13:40:41 -0700
Bert Gunter <bgunter.4567 at gmail.com> wrote:

> I am not going to try to sort out your confusion, as others have
> already tried and failed.

<SNIP>

Fortune nomination!!!

cheers,

Rolf Turner

--
Honorary Research Fellow
Department of Statistics
University of Auckland
Stats. Dep't. (secretaries) phone:
         +64-9-373-7599 ext. 89622
Home phone: +64-9-480-4619


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Jul  4 09:14:43 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 4 Jul 2023 10:14:43 +0300
Subject: [R] 
 Create a variable lenght string that can be used in a dimnames
 statement
In-Reply-To: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <20230704101443.207f8449@Tarkus>

On Mon, 3 Jul 2023 20:08:06 +0000
"Sorkin, John" <jsorkin at som.umaryland.edu> wrote:

> # create variable names xxx1 and xxx2.
> string=""
> for (j in 1:2){
>   name <- paste("xxx",j,sep="")
>   string <- paste(string,name)
>   print(string)
> }
> # Creation of xxx1 and xxx2 works
> string

You need to distinguish between a space separated string and a string
vector. A space separated string is a single object that R won't split
for you unless you tell it to. (Are you coming from a Unix background?
A command line shell will split a space-separated string into a list of
words unless you tell it not to do that, but that's because its main
job is to convert space separated command lines typed by the operator
into lists of command line arguments. R is not like that at all.)

What you're getting here is an individual string. You can confirm that
by typing:

  string[1]

and still seeing the whole string. You can also type:

  string[2]

and see an NA instead of the second word in the string.

Try replacing the _second_ paste() in the example above with a c().
Given individual strings, paste() concatenates its arguments into
a string. c() concatenates its arguments into a vector of separate
objects. You should still get a variable named `string`, but when you
print it whole, the results will look different (R will separate the
two strings inside that vector), and you should be able to type
string[1] and string[2] and get "xxx1" and "xxx2" respectively.

What about Rui's solution, the one that used paste() and got a vector,
contrary to what I wrote above? Rui gave a vector to paste(). paste()
runs a loop inside it and produces a string for every vector element of
it encounters, unless you tell it to collapse the result.

> zzz <- paste("j","k",string)

Same thing here. paste() adds spaces and returns a string. You need c()
to retain "j" and "k" separate from "xxx1" and "xxx2" as individual
elements of the vector.

It may *look* similar ([1] "j k xxx1 xxx2" vs. [1] "j" "k" "xxx1"
"xxx2"), but the resulting objects are different. When in doubt, use
str() on an object to see its structure.

-- 
Best regards,
Ivan


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Jul  4 09:32:53 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 4 Jul 2023 10:32:53 +0300
Subject: [R] 
 Create a variable lenght string that can be used in a dimnames
 statement
In-Reply-To: <20230704101443.207f8449@Tarkus>
References: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <20230704101443.207f8449@Tarkus>
Message-ID: <20230704103253.6409a7e8@Tarkus>

(Sorry for the double post.)

On Tue, 4 Jul 2023 10:14:43 +0300
Ivan Krylov <krylov.r00t at gmail.com> wrote:

> Try replacing the _second_ paste() in the example above with a c().

What I had forgotten to mention is that you also need to replace the
initial assignment

>  string=""

with the following:

   string = character()

(NULL and c(), as mentioned by Rui, are also valid options here.)

If you don't do that, the empty string remains an element in the
resulting vector c('', 'xxx1', 'xxx2'), which is not the desired
result. It's awkward to build data structures in an iterative manner,
which is why solutions like Rui's paste0("xxx", 1:2) are considered
more idiomatic.

-- 
Best regards,
Ivan


From j@nn|e@pretor|u@ @end|ng |rom up@@c@z@  Tue Jul  4 12:00:29 2023
From: j@nn|e@pretor|u@ @end|ng |rom up@@c@z@ (Jannie Pretorius)
Date: Tue, 4 Jul 2023 15:00:29 +0500
Subject: [R] 
 LINUX SuSE15.4 (GNU & Intel) compiler problem in "configure" file
In-Reply-To: <20230629174456.29f4b812@arachnoid>
References: <CAEeL5i57oZVLrijwqXKfjtftf5gYyCXsFXdcDqL4X7MvuZbqSg@mail.gmail.com>
 <20230629090131.7a4d3789@Tarkus>
 <CAEeL5i7xrZcu+EFtJ7TZaaBHqsL8E53n27mHh5SJ3PHtrACuEg@mail.gmail.com>
 <20230629174456.29f4b812@arachnoid>
Message-ID: <CAEeL5i46eZ1VJf+hX+BCrm6hho42Ct7uxQdPT5nBX=S1L0qyJg@mail.gmail.com>

 Dear Dr Krylov,

 From our side, a sincere appreciation for the pointers you gave me.

a)  Apologies from my end:
        Our: */bin/sh* is a symlink to:
*sh -> /usr/bin/sh *

b) I further found that the specific HEADER files under:
       /usr/src/*linux-5.14.21-150400.2*2/include/linux
    are important (specific for some of the internal R-CRAN Compilations)
    These of course relate to the specific LINUX kernel revision:
*5.14.21-150400.22*

c) SuSe SLES 15.3/15.4 has the default environment PATH statement
            (under <*su*> status) as:
         /usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
      This order must be retained and is important.

d) And the [configure] script ran just fine (attached here)

e) You were correct, the host declaration was not sufficient:
         Now points to: x86_64-pc-linux

f) In some cases found embedded characters disrupting code sequences.
   This is typical of preparing and developing code across a local area
network,
       in our case found not to adhere to proper protocol support (under
traffic load).
   In which case, I normally strip code sections into a spreadsheet
workpage
       (widen one column) and store it as: CSV (MS-DOS) (*.csv)  --> SAVE
and open it again.
   In several instances found the character: *?*  embedded (not visible
under any STD text editors)

Very best Wishes and many, many thanks
   Jan Pretorius (UPta)


On Thu, 29 Jun 2023 at 16:45, Ivan Krylov <krylov.r00t at gmail.com> wrote:

> ? Thu, 29 Jun 2023 16:17:50 +0500
> Jannie Pretorius <jannie.pretorius at up.ac.za> ?????:
>
> >    Our: */bin/sh* is a symlink to: ls -> /usr/bin/ls
>
> That sounds strange. Are you sure that /bin/sh (and not /bin/ls) points
> to /usr/bin/ls?
>
> >    The variables Rshlibpath_var and shlibparth_var are indeed empty.
>
> That's the reason why .../configure originally failed. It was asked to
> substitute a variable (which would normally look like
> ${LD_LIBRARY_PATH}), but with these variables empty the substitution
> looked like ${}, which is an error.
>
> >  The:  .../tools/config.guess file is attached
>
> Sorry, when I asked for tools/config.guess, I meant its output (what it
> prints on the console when run), not the contents.
>
> >  The:  ../config.log  file is attached
>
> config.log is indeed useful. It also must contain the output of
> tools/config.guess and tools/config.sub. I think that problem here is
> that for some reason it doesn't say "linux":
>
> > configure:4221: checking host system type
> > configure:4235: result: x86_64-pc-none
>
> Can you confirm that tools/config.guess prints x86_64-pc-linux-gnu but
> tools/config.sub $(tools/config.guess) prints x86_64-pc-none?
>
> When other people install other ./configure-based software on this
> computer, do they encounter similar problems?
>
> (It may be worth keeping the R-help mailing list in the Cc: header of
> your replies, because other people with more knowledge of GNU autotools
> may step in.)
>
> --
> Best regards,
> Ivan
>

-- 
This message and attachments are subject to a disclaimer.

Please refer to?
http://upnet.up.ac.za/services/it/documentation/docs/004167.pdf 
<http://upnet.up.ac.za/services/it/documentation/docs/004167.pdf>?for
full 
details.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: COMPILE-script R-4.3.1.pdf
Type: application/pdf
Size: 143049 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20230704/462709c0/attachment.pdf>

From @vi@e@gross m@iii@g oii gm@ii@com  Wed Jul  5 02:05:47 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Tue, 4 Jul 2023 20:05:47 -0400
Subject: [R] 
 Create a variable lenght string that can be used in a dimnames
 statement
In-Reply-To: <MW4PR03MB63632A747CBB1CB03996A55DE22EA@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <CAGxFJbS-oNXzomZ+Ry_fRGF6zCU7rya07tLyNvqOSTNg_WNB-w@mail.gmail.com>
 <20230704103405.385c8bb3@rolf-Latitude-E7470>
 <MW4PR03MB63632A747CBB1CB03996A55DE22EA@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <006d01d9aed4$73bb8830$5b329890$@gmail.com>

Interesting to read all the answers. Personally, I was a bit irked to see
that using a combination of assignments using rownames() and colnames() did
not work as one canceled what the other had done.

But it turns out if we listed to what John really wanted versus what he said
he wanted, then a fairly simple parameterized answer is to add the row and
column names when creating the matrix as in:

# Create a matrix of size M by N rows, initialiazed to NA
# and also add row names that look like row1, row2, ... rowM
# as well as column names that look like col1, col2, ... colN
# Set the parameters and the rest is a one-liner, wrapped a bit
# for legibility:
M <- 2
N <- 4
rowpref <- "row"
colpref <- "col"

myvalues <- matrix(data=NA, 
                   nrow=M, 
                   ncol=N, 
                   dimnames=list(rows=paste("row", seq(M), sep=""), 
                                 cols=paste("col", seq(N), sep="")))

The resulting value is:

> myvalues
      cols
rows   col1 col2 col3 col4
  row1   NA   NA   NA   NA
  row2   NA   NA   NA   NA



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
Sent: Tuesday, July 4, 2023 12:17 AM
To: Rolf Turner <rolfturner at posteo.net>; Bert Gunter
<bgunter.4567 at gmail.com>
Cc: r-help at r-project.org (r-help at r-project.org) <r-help at r-project.org>;
Achim Zeileis <Achim.Zeileis at uibk.ac.at>
Subject: Re: [R] Create a variable lenght string that can be used in a
dimnames statement

My life is complete.
I have inspired a fortune!
John

________________________________________
From: Rolf Turner <rolfturner at posteo.net>
Sent: Monday, July 3, 2023 6:34 PM
To: Bert Gunter
Cc: Sorkin, John; r-help at r-project.org (r-help at r-project.org); Achim Zeileis
Subject: Re: [R]  Create a variable lenght string that can be used in a
dimnames statement


On Mon, 3 Jul 2023 13:40:41 -0700
Bert Gunter <bgunter.4567 at gmail.com> wrote:

> I am not going to try to sort out your confusion, as others have
> already tried and failed.

<SNIP>

Fortune nomination!!!

cheers,

Rolf Turner

--
Honorary Research Fellow
Department of Statistics
University of Auckland
Stats. Dep't. (secretaries) phone:
         +64-9-373-7599 ext. 89622
Home phone: +64-9-480-4619

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From cec|||@@c@rmo @end|ng |rom u@@pt  Wed Jul  5 11:14:14 2023
From: cec|||@@c@rmo @end|ng |rom u@@pt (=?iso-8859-1?Q?Cec=EDlia_Carmo?=)
Date: Wed, 5 Jul 2023 09:14:14 +0000
Subject: [R] textual analysis - transforming several pdf to txt - naming the
 files
Message-ID: <0379a40c6de749b6b10709601cf074af@ua.pt>

I am taking my first steps in textual analysis with R.
I have pdf files consisting of company reports for several years (1 file corresponds to 1 company and 1 year).
My idea is to start by transforming all my pdf files into txt files for further treatment and analysis (this will allow me to group the files by company or by year, depending on the future analysis to be performed).
I do not have in-depth knowledge of programming in R. I just adapt codes that I find, to my needs. Here goes the first doubt in a code I'm adapting:

My pdf files are in one directory named "pdfs". The names of my files are, for example, SONAE2020FS.pdf, EDP2021GS.pdf
I want to convert them to txt and give the same names as in the pdf files: SOANE2020FS.txt, EDP2021GS.txt
I'm running the following scrip, but the names of txt files that I obtain are: pdftext1, pdftext2, pdftext3...
What do I need to change?
Thank you very much,

Cec?lia Carmo
Universidade de Aveiro - Portugal


dirpath <- ("/Users/ceciliacarmo/documents/RTextualAnalysis/data/pdfs")


library(pdftools)

library(dplyr)


convertpdf2txt <- function(dirpath){

  files <- list.files(dirpath, full.names = T)

  x <- sapply(files, function(x){

  x <- pdftools::pdf_text(x) %>%

  paste0(collapse = " ") %>%

  stringr::str_squish()

  return(x)

    })

}

# apply function

txts <- convertpdf2txt(here::here("data", "pdf/"))

# add names to txt files

names(txts) <- paste0(here::here("data","pdftext"), 1:length(txts), sep = "")




	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Jul  5 11:57:33 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 5 Jul 2023 10:57:33 +0100
Subject: [R] 
 textual analysis - transforming several pdf to txt - naming the
 files
In-Reply-To: <0379a40c6de749b6b10709601cf074af@ua.pt>
References: <0379a40c6de749b6b10709601cf074af@ua.pt>
Message-ID: <b639decc-d80f-d58e-f3ed-9e0c9751eec3@sapo.pt>

?s 10:14 de 05/07/2023, Cec?lia Carmo escreveu:
> I am taking my first steps in textual analysis with R.
> I have pdf files consisting of company reports for several years (1 file corresponds to 1 company and 1 year).
> My idea is to start by transforming all my pdf files into txt files for further treatment and analysis (this will allow me to group the files by company or by year, depending on the future analysis to be performed).
> I do not have in-depth knowledge of programming in R. I just adapt codes that I find, to my needs. Here goes the first doubt in a code I'm adapting:
> 
> My pdf files are in one directory named "pdfs". The names of my files are, for example, SONAE2020FS.pdf, EDP2021GS.pdf
> I want to convert them to txt and give the same names as in the pdf files: SOANE2020FS.txt, EDP2021GS.txt
> I'm running the following scrip, but the names of txt files that I obtain are: pdftext1, pdftext2, pdftext3...
> What do I need to change?
> Thank you very much,
> 
> Cec?lia Carmo
> Universidade de Aveiro - Portugal
> 
> 
> dirpath <- ("/Users/ceciliacarmo/documents/RTextualAnalysis/data/pdfs")
> 
> 
> library(pdftools)
> 
> library(dplyr)
> 
> 
> convertpdf2txt <- function(dirpath){
> 
>    files <- list.files(dirpath, full.names = T)
> 
>    x <- sapply(files, function(x){
> 
>    x <- pdftools::pdf_text(x) %>%
> 
>    paste0(collapse = " ") %>%
> 
>    stringr::str_squish()
> 
>    return(x)
> 
>      })
> 
> }
> 
> # apply function
> 
> txts <- convertpdf2txt(here::here("data", "pdf/"))
> 
> # add names to txt files
> 
> names(txts) <- paste0(here::here("data","pdftext"), 1:length(txts), sep = "")
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Try the following.
The corrected function convertpdf2txt assigns names based on the files 
variable.
It uses tools::file_path_sans_ext to keep the filename without extension 
and pastes the new extension to them. In the end there is no need to 
call here::here again, the list already is a named list.



convertpdf2txt <- function(dirpath){
   files <- list.files(dirpath, pattern = "Consoli.*\\.pdf$", full.names 
= TRUE)
   files <- chartr("\\", "/", files)

   x <- lapply(files, function(x){
     pdftools::pdf_text(x) %>%
       paste0(collapse = " ") %>%
       stringr::str_squish()
   })
   new_names <- tools::file_path_sans_ext(files)
   new_names <- paste(new_names, "txt", sep = ".")
   setNames(x, new_names)
}

# apply function
# note that my test files are in "~/Temp"
txts <- convertpdf2txt(here::here("~", "Temp"))
names(txts)



Hope this helps,

Rui Barradas


From cec|||@@c@rmo @end|ng |rom u@@pt  Wed Jul  5 12:12:12 2023
From: cec|||@@c@rmo @end|ng |rom u@@pt (=?iso-8859-1?Q?Cec=EDlia_Carmo?=)
Date: Wed, 5 Jul 2023 10:12:12 +0000
Subject: [R] 
 textual analysis - transforming several pdf to txt - naming the
 files
Message-ID: <07a94f758365464b97691564ab7be648@ua.pt>

convertpdf2txt <- function(dirpath){

   files <- list.files(dirpath, pattern = "Consoli.*\\.pdf$", full.names
= TRUE)
   files <- chartr("\\", "/", files)

   x <- lapply(files, function(x){
     pdftools::pdf_text(x) %>%
       paste0(collapse = " ") %>%
       stringr::str_squish()
   })
   new_names <- tools::file_path_sans_ext(files)
   new_names <- paste(new_names, "txt", sep = ".")
   setNames(x, new_names)
}

# apply function
# note that my test files are in "~/Temp"
txts <- convertpdf2txt(here::here("~", "Temp"))
names(txts)


Thank you very much, but the following error appeared:

Error: unexpected '}' in "}"




Cec?lia Carmo

Universidade de Aveiro

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Jul  5 17:43:19 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 5 Jul 2023 16:43:19 +0100
Subject: [R] 
 textual analysis - transforming several pdf to txt - naming the
 files
In-Reply-To: <07a94f758365464b97691564ab7be648@ua.pt>
References: <07a94f758365464b97691564ab7be648@ua.pt>
Message-ID: <70b01fdb-8adc-337f-8bc7-d2d7f0e050b3@sapo.pt>

?s 11:12 de 05/07/2023, Cec?lia Carmo escreveu:
> convertpdf2txt <- function(dirpath){
> 
>     files <- list.files(dirpath, pattern = "Consoli.*\\.pdf$", full.names
> = TRUE)
>     files <- chartr("\\", "/", files)
> 
>     x <- lapply(files, function(x){
>       pdftools::pdf_text(x) %>%
>         paste0(collapse = " ") %>%
>         stringr::str_squish()
>     })
>     new_names <- tools::file_path_sans_ext(files)
>     new_names <- paste(new_names, "txt", sep = ".")
>     setNames(x, new_names)
> }
> 
> # apply function
> # note that my test files are in "~/Temp"
> txts <- convertpdf2txt(here::here("~", "Temp"))
> names(txts)
> 
> 
> Thank you very much, but the following error appeared:
> 
> Error: unexpected '}' in "}"
> 
> 
> 
> 
> Cec?lia Carmo
> 
> Universidade de Aveiro
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

I had tested the code with a couple of PDF's and it ran with no errors 
or warnings.
That error is telling that a "}" is not balanced but in my code they all 
are, RStudio checks it automatically.

Can you try to check in an editor with syntax highlighting?


Hope this helps,

Rui Barradas


From @nupty@g| @end|ng |rom gm@||@com  Thu Jul  6 05:48:45 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Thu, 6 Jul 2023 09:18:45 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CA+8X3fV8SxdDcaQ=Sd7rg6WmJ3xX0wgdjCSSf9wZ6zpaz9vDPQ@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CA+8X3fV8SxdDcaQ=Sd7rg6WmJ3xX0wgdjCSSf9wZ6zpaz9vDPQ@mail.gmail.com>
Message-ID: <CAFL9eukTu4s+3rbAJYHE5GZyDETeNbd9Qgrr3ffrVEwn4rnbXQ@mail.gmail.com>

I am working with Jim's solution, but I am getting some errors. I organized
the data in Excel and read into R using the Import option in the menu of
R-Studio. For some reason it is telling me my data is a Tibble and not a
dataframe. Am I using Tidyverse unknowingly? I thought I was working in
base-R.


> head(TrialData)# A tibble: 5 ? 8
  Income `MF None` `MF Equity` `MF Debt` `MF Hybrid` Bank ?? Bank ?? Bank ??
  <chr>      <dbl>       <dbl>     <dbl>       <dbl>   <dbl>   <dbl>
<dbl>1 $10         3.05        29.8      31.2        36      46.5
24.8   25.4 2 $25         2.29        28.8      32.6        36.3
54.0    24.4   18.7 3 $40         2.24        29.5      34.3
33.9    59.1    25     29   4 $75         1.71        28.9      35.6
     33.7    62.2    24.6   11.5 5 > $75       1.30        31.7
37.6        29.4    67.7    24.0    7.10# ? with abbreviated variable
names ?`Bank None`, ?`Bank Current`,#   ?`Bank Savings`


> png("Income_pcts.png",height=700)> par(mfrow=c(4,1))> plot(TrialData[,"Bank Current"], type="o",lwd=3,main="Bank Current", xlab="Income",ylab="%",xaxt="n")Warning messages:
1: In plot.window(xlim, ylim, log, ...) :
  graphical parameter "type" is obsolete
2: In axis(side = side, at = at, labels = labels, ...) :
  graphical parameter "type" is obsolete
3: In title(xlab = xlab, ylab = ylab, ...) :
  graphical parameter "type" is obsolete


On Fri, 30 Jun 2023 at 04:41, Jim Lemon <drjimlemon at gmail.com> wrote:

> Okay. Here is a modification that does four single line plots.
>
> at_df<-read.table(text=
>  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None Bank_Current
> Bank_Savings Bank_NA
>  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
>  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
>  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
>  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
>  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
>  No_Answer 9 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
>  header=TRUE,stringsAsFactors=FALSE)
> at_df<-at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA")]
> png("Income_pcts.png",height=700)
> par(mfrow=c(4,1))
> plot(at_df[,"Bank_Current"],
>  type="l",lwd=3,main="Bsnk_Current",
>  xlab="Income",ylab="%",xaxt="n")
> axis(1,at=1:5,labels=at_df$Income)
> plot(at_df[,"Bank_Savings"],
>  type="l",lwd=3,main="Bank_Sasvings",
>  xlab="Income",ylab="%",xaxt="n")
> axis(1,at=1:5,labels=at_df$Income)
> plot(at_df[,"MF_Equity"],
>  type="l",lwd=3,main="MF_Equity",
>  xlab="Income",ylab="%",xaxt="n")
> axis(1,at=1:5,labels=at_df$Income)
> plot(at_df[,"MF_Debt"],
>  type="l",lwd=3,main="MF_Debt",
>  xlab="Income",ylab="%",xaxt="n")
> axis(1,at=1:5,labels=at_df$Income)
> dev.off()
>
> Jim
>
> On Thu, Jun 29, 2023 at 1:49?PM Anupam Tyagi <anuptyagi at gmail.com> wrote:
> >
> > Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope you have
> > been well.
> >
> > Pikal, thanks. Your solution may be close to what I want. I did not know
> > that I was posting in HTML. I just copied the data from Excel and posted
> in
> > the email in Gmail. The data is still in Excel, because I have not yet
> > figured out what is a good way to organize it in R. I am posting it again
> > below as text. These are rows in Excel: 1,2,3,5,9 after MF are income
> > categories and No Answer category (9). Down the second column are
> > categories of MF and Bank AC. Rest of the columns are percentages.
> >
> > Jim, thanks for the graph. I am looking to plot only one line (category)
> > each in many small plots on the same page. I don't want to compare
> > different categories on the same graph as you do, but see how each
> category
> > varies by income, one category in each graph. Like Excel does with
> > Sparklines (Top menu: Insert, Sparklines, Lines). I have many categories
> > for many variables. I am only showing two MF and Bank AC.
> >
> > Income $10 $25 $40 $75 > $75 No Answer
> > MF 1 2 3 4 5 9
> > None 1 3.05 2.29 2.24 1.71 1.30 2.83
> > Equity 2 29.76 28.79 29.51 28.90 31.67 36.77
> > Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
> > Hybrid 4 36.00 36.27 33.94 33.74 29.44 27.25
> > Bank AC
> > None 1 46.54 54.01 59.1 62.17 67.67 60.87
> > Current 2 24.75 24.4 25 24.61 24.02 21.09
> > Savings 3 25.4 18.7 29 11.48 7.103 13.46
> > No Answer 9 3.307 2.891 13.4 1.746 1.208 4.577
> >
> >
> > On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com> wrote:
> >
> > > Hi Anupam,
> > > Haven't heard from you in a long time. Perhaps you want something like
> > > this:
> > >
> > > at_df<-read.table(text=
> > >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None Bank_Current
> > > Bank_Savings Bank_NA
> > >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> > >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> > >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> > >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> > >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
> > >  No_Answer 9 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> > >  header=TRUE,stringsAsFactors=FALSE)
> > > at_df<-at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA")]
> > > png("MF_Bank.png",height=600)
> > > par(mfrow=c(2,1))
> > > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
> > >  type="l",col=1:4,lty=1:4,lwd=3,
> > >  main="Percentages by Income and MF type",
> > >  xlab="Income",ylab="Percentage of group",xaxt="n")
> > > axis(1,at=1:5,labels=at_df$Income)
> > > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
> > >  lty=1:4,lwd=3,col=1:4)
> > > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
> > >  type="l",col=1:3,lty=1:4,lwd=3,
> > >  main="Percentages by Income and Bank type",
> > >  xlab="Income",ylab="Percentage of group",xaxt="n")
> > > axis(1,at=1:5,labels=at_df$Income)
> > > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
> > >  lty=1:4,lwd=3,col=1:3)
> > > dev.off()
> > >
> > > Jim
> > >
> > > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi <anuptyagi at gmail.com>
> wrote:
> > > >
> > > > Hello,
> > > >
> > > > I want to plot the following kind of data (percentage of respondents
> > > from a
> > > > survey) that varies by Income into many small *line* graphs in a
> panel of
> > > > graphs. I want to omit "No Answer" categories. I want to see how
> each one
> > > > of the categories (percentages), "None", " Equity", etc. varies by
> > > Income.
> > > > How can I do this? How to organize the data well and how to plot? I
> > > thought
> > > > Lattice may be a good package to plot this, but I don't know for
> sure. I
> > > > prefer to do this in Base-R if possible, but I am open to ggplot. Any
> > > ideas
> > > > will be helpful.
> > > >
> > > > Income
> > > > $10 $25 $40 $75 > $75 No Answer
> > > > MF 1 2 3 4 5 9
> > > > None 1 3.05 2.29 2.24 1.71 1.30 2.83
> > > > Equity 2 29.76 28.79 29.51 28.90 31.67 36.77
> > > > Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
> > > > Hybrid 4 36.00 36.27 33.94 33.74 29.44 27.25
> > > > Bank AC
> > > > None 1 46.54 54.01 59.1 62.17 67.67 60.87
> > > > Current 2 24.75 24.4 25 24.61 24.02 21.09
> > > > Savings 3 25.4 18.7 29 11.48 7.103 13.46
> > > > No Answer 9 3.307 2.891 13.4 1.746 1.208 4.577
> > > >
> > > > Thanks.
> > > > --
> > > > Anupam.
> > > >
> > > >         [[alternative HTML version deleted]]
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> >
> > --
> > Anupam.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>


-- 
Anupam.

	[[alternative HTML version deleted]]


From j@rkko@to|vonen@19 @end|ng |rom gm@||@com  Thu Jul  6 09:12:16 2023
From: j@rkko@to|vonen@19 @end|ng |rom gm@||@com (Jarkko Toivonen)
Date: Thu, 6 Jul 2023 10:12:16 +0300
Subject: [R] Errors in "An introduction to R"
Message-ID: <4caaf4ba-0072-8040-5e0b-77a2f5725004@gmail.com>

Hi,

Thanks for the great manual! I noticed a few errors in Version 4.3.1 
(2023-06-16), though.

Early in the document a "working directory" refers to a file system 
directory, such as ~/work. It is also discussed whether
separate working directories should be used for separate analyses (page 
6). However, in sections 6.3.2 - 6.3.4, the term "working directory"
seems to refer to environment (or workspace). This is very confusing, 
especially in section 6.3.3, where it is written "to work with many 
different problems comfortably together in the same working directory". 
Maybe the word "environment" or "workspace" should be used instead of 
"working directory" in sections 6.3.2 - 6.3.4.

Footnote on page 30: space missing in "orawk".

Page 42, section 10.1: backslash between X and y is not shown in "Thus 
given a n by 1 vector y and an n by p matrix X then X y is defined as".

Jarkko


From @nupty@g| @end|ng |rom gm@||@com  Thu Jul  6 11:41:35 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Thu, 6 Jul 2023 15:11:35 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CH3PR22MB4514251DCFE77C2E74C285A8CF25A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
Message-ID: <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>

Hi John:

Thanks! Below is the data using your suggestion. I used "ggplot" to make a
graph. I am not too happy with it. I am looking for something simpler and
cleaner. Plot is attached.

I also tried "lattice" package, but nothing got plotted with "xyplot"
command, because it is looking for a numeric variable on x-axis.

ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) + geom_point() +
  geom_line() + facet_wrap(~Measure) + theme_classic()

> dput(TrialData4)structure(list(Income = c("$10", "$25", "$40", "$75", "> $75",
"$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
"> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
"$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
"$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
"$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
"$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
"> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
"$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
"$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
"$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
"$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
"> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
"$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
"$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
"$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75"
), Percent = c(3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79,
29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27,
33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75,
24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052,
2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51, 28.9, 31.67,
31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94, 33.74, 29.44,
46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4, 25, 24.61, 24.02,
25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244, 1.706, 1.297,
29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65,
37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17,
67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
7.103, 3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51,
28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94,
33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4,
25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103), Measure = c("MF None",
"MF None", "MF None", "MF None", "MF None", "MF Equity", "MF Equity",
"MF Equity", "MF Equity", "MF Equity", "MF Debt", "MF Debt",
"MF Debt", "MF Debt", "MF Debt", "MF Hybrid", "MF Hybrid", "MF Hybrid",
"MF Hybrid", "MF Hybrid", "Bank None", "Bank None", "Bank None",
"Bank None", "Bank None", "Bank Current", "Bank Current", "Bank Current",
"Bank Current", "Bank Current", "Bank Savings", "Bank Savings",
"Bank Savings", "Bank Savings", "Bank Savings", "MF None 1",
"MF None 1", "MF None 1", "MF None 1", "MF None 1", "MF Equity 1",
"MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Debt 1",
"MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Hybrid 1",
"MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "Bank None 1",
"Bank None 1", "Bank None 1", "Bank None 1", "Bank None 1", "Bank Current 1",
"Bank Current 1", "Bank Current 1", "Bank Current 1", "Bank Current 1",
"Bank Savings 1", "Bank Savings 1", "Bank Savings 1", "Bank Savings 1",
"Bank Savings 1", "MF None 2", "MF None 2", "MF None 2", "MF None 2",
"MF None 2", "MF Equity 2", "MF Equity 2", "MF Equity 2", "MF Equity 2",
"MF Equity 2", "MF Debt 2", "MF Debt 2", "MF Debt 2", "MF Debt 2",
"MF Debt 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2",
"MF Hybrid 2", "Bank None 2", "Bank None 2", "Bank None 2", "Bank None 2",
"Bank None 2", "Bank Current 2", "Bank Current 2", "Bank Current 2",
"Bank Current 2", "Bank Current 2", "Bank Savings 2", "Bank Savings 2",
"Bank Savings 2", "Bank Savings 2", "Bank Savings 2", "MF None 3",
"MF None 3", "MF None 3", "MF None 3", "MF None 3", "MF Equity 3",
"MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Debt 3",
"MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Hybrid 3",
"MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "Bank None 3",
"Bank None 3", "Bank None 3", "Bank None 3", "Bank None 3", "Bank Current 3",
"Bank Current 3", "Bank Current 3", "Bank Current 3", "Bank Current 3",
"Bank Savings 3", "Bank Savings 3", "Bank Savings 3", "Bank Savings 3",
"Bank Savings 3")), class = c("tbl_df", "tbl", "data.frame"), row.names = c(NA,
-140L))




On Thu, 29 Jun 2023 at 21:11, John Kane <jrkrideau at gmail.com> wrote:

> Anupa,
>
> I think your  best bet with your data would be to tidy it up in Excel,
> read it into  R using something like the readxl package and then supply
> some sample data is the dput() function.
>
> In the case of a large dataset something like dput(head(mydata, 100))
> should supply the data we need. Just do dput(mydata) where *mydata* is your
> data. Copy the output and paste it here.
>
> On Thu, 29 Jun 2023 at 08:37, Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
>
>> Reposting the data did not help. We do not like to guess, and doing so
>> takes a great deal of time that is likely wasted.
>> Rows are observations.
>> Columns are variables.
>> In Excel, the first row will be variable names and all subsequent rows
>> will be observations.
>>
>> Income is the first variable. It has seven states: $10, $25, $40, $75,
>> >$75, "No", "Answer"
>> MF is the second variable. It has six values: 1, 2, 3, 4, 5, 9
>> None is the third variable. It has seven values: 1, 3.05,  2.29, 2.24,
>> 1.71, 1.30, 2.83
>> Equity is the last variable with many states, both numeric and text. A
>> computer will read it all as text.
>>
>> As written the data cannot be analyzed.
>>
>> Equity looks like it should be numeric. However, it has text values:
>> "Debt", "Hybrid", Bank", "AC", "None", "Current", "Savings", "No", and
>> "Answer"
>>
>> In looking at the data I try to find some organization where every
>> variable has the same number of rows as every other variable. I fail with
>> these data.
>> I could combine "No" and "Answer" into one name "No Answer" to make it
>> agree with MF, but then it does not work for None.
>>
>>
>> Please rework the data in Excel so that we can properly interpret the
>> content. If it is badly organized in Excel, moving it to R will not help.
>> Below, I tried adding carriage returns and spaces to organize the data,
>> but I have a column of numbers that are not identified. The values below
>> $10 do not make much sense compared to other values.
>>
>> I am tired of guessing.
>>
>> Tim
>>
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam Tyagi
>> Sent: Wednesday, June 28, 2023 11:49 PM
>> To: r-help at r-project.org
>> Subject: Re: [R] Plotting factors in graph panel
>>
>> [External Email]
>>
>> Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope you have
>> been well.
>>
>> Pikal, thanks. Your solution may be close to what I want. I did not know
>> that I was posting in HTML. I just copied the data from Excel and posted in
>> the email in Gmail. The data is still in Excel, because I have not yet
>> figured out what is a good way to organize it in R. I am posting it again
>> below as text. These are rows in Excel: 1,2,3,5,9 after MF are income
>> categories and No Answer category (9). Down the second column are
>> categories of MF and Bank AC. Rest of the columns are percentages.
>>
>> Jim, thanks for the graph. I am looking to plot only one line (category)
>> each in many small plots on the same page. I don't want to compare
>> different categories on the same graph as you do, but see how each category
>> varies by income, one category in each graph. Like Excel does with
>> Sparklines (Top menu: Insert, Sparklines, Lines). I have many categories
>> for many variables. I am only showing two MF and Bank AC.
>>
>> Income        $10 $25     $40      $75   > $75    No Answer
>> MF                   1      2         3           4         5          9
>> None               1   3.05     2.29    2.24     1.71    1.30
>>    2.83
>> Equity             2    29.76  28.79  29.51 28.90   31.67            36.77
>>
>> Debt                3  31.18  32.64  34.31  35.65  37.59             33.15
>>
>> Hybrid              4 36.00 36.27 33.94 33.74 29.44 27.25
>>
>> Bank AC None 1 46.54 54.01 59.1 62.17 67.67 60.87
>>
>> Current            2 24.75 24.4 25 24.61 24.02 21.09
>>
>> Savings             3 25.4 18.7 29 11.48 7.103 13.46
>>
>> No Answer       9 3.307 2.891 13.4 1.746 1.208 4.577
>>
>>
>> On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>> > Hi Anupam,
>> > Haven't heard from you in a long time. Perhaps you want something like
>> > this:
>> >
>> > at_df<-read.table(text=
>> >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None Bank_Current
>> > Bank_Savings Bank_NA
>> >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
>> >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
>> >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
>> >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
>> >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208  No_Answer 9
>> > 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
>> >  header=TRUE,stringsAsFactors=FALSE)
>> > at_df<-at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA")]
>> > png("MF_Bank.png",height=600)
>> > par(mfrow=c(2,1))
>> > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
>> >  type="l",col=1:4,lty=1:4,lwd=3,
>> >  main="Percentages by Income and MF type",
>> > xlab="Income",ylab="Percentage of group",xaxt="n")
>> > axis(1,at=1:5,labels=at_df$Income)
>> > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
>> >  lty=1:4,lwd=3,col=1:4)
>> > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
>> >  type="l",col=1:3,lty=1:4,lwd=3,
>> >  main="Percentages by Income and Bank type",
>> > xlab="Income",ylab="Percentage of group",xaxt="n")
>> > axis(1,at=1:5,labels=at_df$Income)
>> > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
>> >  lty=1:4,lwd=3,col=1:3)
>> > dev.off()
>> >
>> > Jim
>> >
>> > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi <anuptyagi at gmail.com>
>> wrote:
>> > >
>> > > Hello,
>> > >
>> > > I want to plot the following kind of data (percentage of respondents
>> > from a
>> > > survey) that varies by Income into many small *line* graphs in a
>> > > panel of graphs. I want to omit "No Answer" categories. I want to
>> > > see how each one of the categories (percentages), "None", " Equity",
>> > > etc. varies by
>> > Income.
>> > > How can I do this? How to organize the data well and how to plot? I
>> > thought
>> > > Lattice may be a good package to plot this, but I don't know for
>> > > sure. I prefer to do this in Base-R if possible, but I am open to
>> > > ggplot. Any
>> > ideas
>> > > will be helpful.
>> > >
>> > > Income
>> > > $10 $25 $40 $75 > $75 No Answer
>> > > MF 1 2 3 4 5 9
>> > > None 1 3.05 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51
>> > > 28.90 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15 Hybrid
>> > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54 54.01
>> > > 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02 21.09
>> > > Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9 3.307 2.891
>> > > 13.4 1.746 1.208 4.577
>> > >
>> > > Thanks.
>> > > --
>> > > Anupam.
>> > >
>> > >         [[alternative HTML version deleted]]
>> > >
>> > > ______________________________________________
>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > > https://st/
>> > > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl
>> > > .edu%7C59874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a6233
>> > > 1e1b84%7C0%7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoi
>> > > MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C
>> > > %7C%7C&sdata=xoaDMG7ogY4tMtqe30pONZrBdk0eq2cW%2BgdwlDHneWY%3D&reserv
>> > > ed=0
>> > > PLEASE do read the posting guide
>> > http://www.r/
>> > -project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C59
>> > 874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
>> > 7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
>> > CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=H7
>> > 6XCa%2FULBGUn0Lok93l6mtHzo0snq5G0a%2BL4sEH8%2F8%3D&reserved=0
>> > > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>>
>> --
>> Anupam.
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.r-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>
> --
> John Kane
> Kingston ON Canada
>


-- 
Anupam.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: TrialData4.png
Type: image/png
Size: 9740 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20230706/7e56f392/attachment.png>

From @nupty@g| @end|ng |rom gm@||@com  Thu Jul  6 11:51:42 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Thu, 6 Jul 2023 15:21:42 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CH3PR22MB4514251DCFE77C2E74C285A8CF25A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
 <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>
Message-ID: <CAFL9eu=QJG8X9PDG0RNxP88TicefE_DAgnkK-nxWkD9oLt6Z0g@mail.gmail.com>

Btw, I think "lattice" graphics will provide a better solution than
"ggplot", because it puts appropriate (space saving) markers on the axes
and does axes labels well. However, I cannot figure out how to do it in
"lattice".


On Thu, 6 Jul 2023 at 15:11, Anupam Tyagi <anuptyagi at gmail.com> wrote:

> Hi John:
>
> Thanks! Below is the data using your suggestion. I used "ggplot" to make a
> graph. I am not too happy with it. I am looking for something simpler and
> cleaner. Plot is attached.
>
> I also tried "lattice" package, but nothing got plotted with "xyplot"
> command, because it is looking for a numeric variable on x-axis.
>
> ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) + geom_point()
> +
>   geom_line() + facet_wrap(~Measure) + theme_classic()
>
> > dput(TrialData4)structure(list(Income = c("$10", "$25", "$40", "$75", "> $75",
> "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
> "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
> "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
> "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75"
> ), Percent = c(3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79,
> 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27,
> 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75,
> 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052,
> 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51, 28.9, 31.67,
> 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94, 33.74, 29.44,
> 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4, 25, 24.61, 24.02,
> 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244, 1.706, 1.297,
> 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65,
> 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17,
> 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
> 7.103, 3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51,
> 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94,
> 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4,
> 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103), Measure = c("MF None",
> "MF None", "MF None", "MF None", "MF None", "MF Equity", "MF Equity",
> "MF Equity", "MF Equity", "MF Equity", "MF Debt", "MF Debt",
> "MF Debt", "MF Debt", "MF Debt", "MF Hybrid", "MF Hybrid", "MF Hybrid",
> "MF Hybrid", "MF Hybrid", "Bank None", "Bank None", "Bank None",
> "Bank None", "Bank None", "Bank Current", "Bank Current", "Bank Current",
> "Bank Current", "Bank Current", "Bank Savings", "Bank Savings",
> "Bank Savings", "Bank Savings", "Bank Savings", "MF None 1",
> "MF None 1", "MF None 1", "MF None 1", "MF None 1", "MF Equity 1",
> "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Debt 1",
> "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Hybrid 1",
> "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "Bank None 1",
> "Bank None 1", "Bank None 1", "Bank None 1", "Bank None 1", "Bank Current 1",
> "Bank Current 1", "Bank Current 1", "Bank Current 1", "Bank Current 1",
> "Bank Savings 1", "Bank Savings 1", "Bank Savings 1", "Bank Savings 1",
> "Bank Savings 1", "MF None 2", "MF None 2", "MF None 2", "MF None 2",
> "MF None 2", "MF Equity 2", "MF Equity 2", "MF Equity 2", "MF Equity 2",
> "MF Equity 2", "MF Debt 2", "MF Debt 2", "MF Debt 2", "MF Debt 2",
> "MF Debt 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2",
> "MF Hybrid 2", "Bank None 2", "Bank None 2", "Bank None 2", "Bank None 2",
> "Bank None 2", "Bank Current 2", "Bank Current 2", "Bank Current 2",
> "Bank Current 2", "Bank Current 2", "Bank Savings 2", "Bank Savings 2",
> "Bank Savings 2", "Bank Savings 2", "Bank Savings 2", "MF None 3",
> "MF None 3", "MF None 3", "MF None 3", "MF None 3", "MF Equity 3",
> "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Debt 3",
> "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Hybrid 3",
> "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "Bank None 3",
> "Bank None 3", "Bank None 3", "Bank None 3", "Bank None 3", "Bank Current 3",
> "Bank Current 3", "Bank Current 3", "Bank Current 3", "Bank Current 3",
> "Bank Savings 3", "Bank Savings 3", "Bank Savings 3", "Bank Savings 3",
> "Bank Savings 3")), class = c("tbl_df", "tbl", "data.frame"), row.names = c(NA,
> -140L))
>
>
>
>
> On Thu, 29 Jun 2023 at 21:11, John Kane <jrkrideau at gmail.com> wrote:
>
>> Anupa,
>>
>> I think your  best bet with your data would be to tidy it up in Excel,
>> read it into  R using something like the readxl package and then supply
>> some sample data is the dput() function.
>>
>> In the case of a large dataset something like dput(head(mydata, 100))
>> should supply the data we need. Just do dput(mydata) where *mydata* is your
>> data. Copy the output and paste it here.
>>
>> On Thu, 29 Jun 2023 at 08:37, Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
>>
>>> Reposting the data did not help. We do not like to guess, and doing so
>>> takes a great deal of time that is likely wasted.
>>> Rows are observations.
>>> Columns are variables.
>>> In Excel, the first row will be variable names and all subsequent rows
>>> will be observations.
>>>
>>> Income is the first variable. It has seven states: $10, $25, $40, $75,
>>> >$75, "No", "Answer"
>>> MF is the second variable. It has six values: 1, 2, 3, 4, 5, 9
>>> None is the third variable. It has seven values: 1, 3.05,  2.29, 2.24,
>>> 1.71, 1.30, 2.83
>>> Equity is the last variable with many states, both numeric and text. A
>>> computer will read it all as text.
>>>
>>> As written the data cannot be analyzed.
>>>
>>> Equity looks like it should be numeric. However, it has text values:
>>> "Debt", "Hybrid", Bank", "AC", "None", "Current", "Savings", "No", and
>>> "Answer"
>>>
>>> In looking at the data I try to find some organization where every
>>> variable has the same number of rows as every other variable. I fail with
>>> these data.
>>> I could combine "No" and "Answer" into one name "No Answer" to make it
>>> agree with MF, but then it does not work for None.
>>>
>>>
>>> Please rework the data in Excel so that we can properly interpret the
>>> content. If it is badly organized in Excel, moving it to R will not help.
>>> Below, I tried adding carriage returns and spaces to organize the data,
>>> but I have a column of numbers that are not identified. The values below
>>> $10 do not make much sense compared to other values.
>>>
>>> I am tired of guessing.
>>>
>>> Tim
>>>
>>> -----Original Message-----
>>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam Tyagi
>>> Sent: Wednesday, June 28, 2023 11:49 PM
>>> To: r-help at r-project.org
>>> Subject: Re: [R] Plotting factors in graph panel
>>>
>>> [External Email]
>>>
>>> Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope you have
>>> been well.
>>>
>>> Pikal, thanks. Your solution may be close to what I want. I did not know
>>> that I was posting in HTML. I just copied the data from Excel and posted in
>>> the email in Gmail. The data is still in Excel, because I have not yet
>>> figured out what is a good way to organize it in R. I am posting it again
>>> below as text. These are rows in Excel: 1,2,3,5,9 after MF are income
>>> categories and No Answer category (9). Down the second column are
>>> categories of MF and Bank AC. Rest of the columns are percentages.
>>>
>>> Jim, thanks for the graph. I am looking to plot only one line (category)
>>> each in many small plots on the same page. I don't want to compare
>>> different categories on the same graph as you do, but see how each category
>>> varies by income, one category in each graph. Like Excel does with
>>> Sparklines (Top menu: Insert, Sparklines, Lines). I have many categories
>>> for many variables. I am only showing two MF and Bank AC.
>>>
>>> Income        $10 $25     $40      $75   > $75    No Answer
>>> MF                   1      2         3           4         5          9
>>> None               1   3.05     2.29    2.24     1.71    1.30
>>>    2.83
>>> Equity             2    29.76  28.79  29.51 28.90   31.67
>>> 36.77
>>>
>>> Debt                3  31.18  32.64  34.31  35.65  37.59
>>>  33.15
>>>
>>> Hybrid              4 36.00 36.27 33.94 33.74 29.44 27.25
>>>
>>> Bank AC None 1 46.54 54.01 59.1 62.17 67.67 60.87
>>>
>>> Current            2 24.75 24.4 25 24.61 24.02 21.09
>>>
>>> Savings             3 25.4 18.7 29 11.48 7.103 13.46
>>>
>>> No Answer       9 3.307 2.891 13.4 1.746 1.208 4.577
>>>
>>>
>>> On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com> wrote:
>>>
>>> > Hi Anupam,
>>> > Haven't heard from you in a long time. Perhaps you want something like
>>> > this:
>>> >
>>> > at_df<-read.table(text=
>>> >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None Bank_Current
>>> > Bank_Savings Bank_NA
>>> >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
>>> >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
>>> >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
>>> >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
>>> >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208  No_Answer 9
>>> > 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
>>> >  header=TRUE,stringsAsFactors=FALSE)
>>> > at_df<-at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA")]
>>> > png("MF_Bank.png",height=600)
>>> > par(mfrow=c(2,1))
>>> > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
>>> >  type="l",col=1:4,lty=1:4,lwd=3,
>>> >  main="Percentages by Income and MF type",
>>> > xlab="Income",ylab="Percentage of group",xaxt="n")
>>> > axis(1,at=1:5,labels=at_df$Income)
>>> > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
>>> >  lty=1:4,lwd=3,col=1:4)
>>> > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
>>> >  type="l",col=1:3,lty=1:4,lwd=3,
>>> >  main="Percentages by Income and Bank type",
>>> > xlab="Income",ylab="Percentage of group",xaxt="n")
>>> > axis(1,at=1:5,labels=at_df$Income)
>>> > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
>>> >  lty=1:4,lwd=3,col=1:3)
>>> > dev.off()
>>> >
>>> > Jim
>>> >
>>> > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi <anuptyagi at gmail.com>
>>> wrote:
>>> > >
>>> > > Hello,
>>> > >
>>> > > I want to plot the following kind of data (percentage of respondents
>>> > from a
>>> > > survey) that varies by Income into many small *line* graphs in a
>>> > > panel of graphs. I want to omit "No Answer" categories. I want to
>>> > > see how each one of the categories (percentages), "None", " Equity",
>>> > > etc. varies by
>>> > Income.
>>> > > How can I do this? How to organize the data well and how to plot? I
>>> > thought
>>> > > Lattice may be a good package to plot this, but I don't know for
>>> > > sure. I prefer to do this in Base-R if possible, but I am open to
>>> > > ggplot. Any
>>> > ideas
>>> > > will be helpful.
>>> > >
>>> > > Income
>>> > > $10 $25 $40 $75 > $75 No Answer
>>> > > MF 1 2 3 4 5 9
>>> > > None 1 3.05 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51
>>> > > 28.90 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15 Hybrid
>>> > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54 54.01
>>> > > 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02 21.09
>>> > > Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9 3.307 2.891
>>> > > 13.4 1.746 1.208 4.577
>>> > >
>>> > > Thanks.
>>> > > --
>>> > > Anupam.
>>> > >
>>> > >         [[alternative HTML version deleted]]
>>> > >
>>> > > ______________________________________________
>>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> > > https://st/
>>> > > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl
>>> > > .edu%7C59874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a6233
>>> > > 1e1b84%7C0%7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoi
>>> > > MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C
>>> > > %7C%7C&sdata=xoaDMG7ogY4tMtqe30pONZrBdk0eq2cW%2BgdwlDHneWY%3D&reserv
>>> > > ed=0
>>> > > PLEASE do read the posting guide
>>> > http://www.r/
>>> > -project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C59
>>> > 874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
>>> > 7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
>>> > CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=H7
>>> > 6XCa%2FULBGUn0Lok93l6mtHzo0snq5G0a%2BL4sEH8%2F8%3D&reserved=0
>>> > > and provide commented, minimal, self-contained, reproducible code.
>>> >
>>>
>>>
>>> --
>>> Anupam.
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.r-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>
>> --
>> John Kane
>> Kingston ON Canada
>>
>
>
> --
> Anupam.
>
>

-- 
Anupam.

	[[alternative HTML version deleted]]


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Thu Jul  6 15:05:30 2023
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Thu, 6 Jul 2023 18:35:30 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CAFL9eu=QJG8X9PDG0RNxP88TicefE_DAgnkK-nxWkD9oLt6Z0g@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CH3PR22MB4514251DCFE77C2E74C285A8CF25A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
 <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>
 <CAFL9eu=QJG8X9PDG0RNxP88TicefE_DAgnkK-nxWkD9oLt6Z0g@mail.gmail.com>
Message-ID: <CADfFDC4hrX8huz2HnDMLM=WT+z5UttBfk8rQeOGwLj14CZN2Pw@mail.gmail.com>

On Thu, 6 Jul 2023 at 15:21, Anupam Tyagi <anuptyagi at gmail.com> wrote:
>
> Btw, I think "lattice" graphics will provide a better solution than
> "ggplot", because it puts appropriate (space saving) markers on the axes
> and does axes labels well. However, I cannot figure out how to do it in
> "lattice".

You will need to convert Income to a factor first. Alternatively, use
dotplot() instead of xyplot(), but that will sort the levels wrongly,
so better to make the factor first anyway.

TrialData4 <- within(TrialData4,
{
    Income <- factor(Income, levels = c("$10", "$25", "$40", "$75", "> $75"))
})

xyplot(Percent ~ Income | Measure, TrialData4,
       type = "o", pch = 16, as.table = TRUE, grid = TRUE)

or

dotplot(Percent ~ Income | Measure, TrialData4,
        type = "o", as.table = TRUE)

This is not really any different from the ggplot() version though.
Maybe you just don't like the effect of the '+ theme_classic()' part.

Best,
-Deepayan


> On Thu, 6 Jul 2023 at 15:11, Anupam Tyagi <anuptyagi at gmail.com> wrote:
>
> > Hi John:
> >
> > Thanks! Below is the data using your suggestion. I used "ggplot" to make a
> > graph. I am not too happy with it. I am looking for something simpler and
> > cleaner. Plot is attached.
> >
> > I also tried "lattice" package, but nothing got plotted with "xyplot"
> > command, because it is looking for a numeric variable on x-axis.
> >
> > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) + geom_point()
> > +
> >   geom_line() + facet_wrap(~Measure) + theme_classic()
> >
> > > dput(TrialData4)structure(list(Income = c("$10", "$25", "$40", "$75", "> $75",
> > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
> > "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
> > "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
> > "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75"
> > ), Percent = c(3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79,
> > 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27,
> > 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75,
> > 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052,
> > 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51, 28.9, 31.67,
> > 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94, 33.74, 29.44,
> > 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4, 25, 24.61, 24.02,
> > 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244, 1.706, 1.297,
> > 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65,
> > 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17,
> > 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
> > 7.103, 3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51,
> > 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94,
> > 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4,
> > 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103), Measure = c("MF None",
> > "MF None", "MF None", "MF None", "MF None", "MF Equity", "MF Equity",
> > "MF Equity", "MF Equity", "MF Equity", "MF Debt", "MF Debt",
> > "MF Debt", "MF Debt", "MF Debt", "MF Hybrid", "MF Hybrid", "MF Hybrid",
> > "MF Hybrid", "MF Hybrid", "Bank None", "Bank None", "Bank None",
> > "Bank None", "Bank None", "Bank Current", "Bank Current", "Bank Current",
> > "Bank Current", "Bank Current", "Bank Savings", "Bank Savings",
> > "Bank Savings", "Bank Savings", "Bank Savings", "MF None 1",
> > "MF None 1", "MF None 1", "MF None 1", "MF None 1", "MF Equity 1",
> > "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Debt 1",
> > "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Hybrid 1",
> > "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "Bank None 1",
> > "Bank None 1", "Bank None 1", "Bank None 1", "Bank None 1", "Bank Current 1",
> > "Bank Current 1", "Bank Current 1", "Bank Current 1", "Bank Current 1",
> > "Bank Savings 1", "Bank Savings 1", "Bank Savings 1", "Bank Savings 1",
> > "Bank Savings 1", "MF None 2", "MF None 2", "MF None 2", "MF None 2",
> > "MF None 2", "MF Equity 2", "MF Equity 2", "MF Equity 2", "MF Equity 2",
> > "MF Equity 2", "MF Debt 2", "MF Debt 2", "MF Debt 2", "MF Debt 2",
> > "MF Debt 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2",
> > "MF Hybrid 2", "Bank None 2", "Bank None 2", "Bank None 2", "Bank None 2",
> > "Bank None 2", "Bank Current 2", "Bank Current 2", "Bank Current 2",
> > "Bank Current 2", "Bank Current 2", "Bank Savings 2", "Bank Savings 2",
> > "Bank Savings 2", "Bank Savings 2", "Bank Savings 2", "MF None 3",
> > "MF None 3", "MF None 3", "MF None 3", "MF None 3", "MF Equity 3",
> > "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Debt 3",
> > "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Hybrid 3",
> > "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "Bank None 3",
> > "Bank None 3", "Bank None 3", "Bank None 3", "Bank None 3", "Bank Current 3",
> > "Bank Current 3", "Bank Current 3", "Bank Current 3", "Bank Current 3",
> > "Bank Savings 3", "Bank Savings 3", "Bank Savings 3", "Bank Savings 3",
> > "Bank Savings 3")), class = c("tbl_df", "tbl", "data.frame"), row.names = c(NA,
> > -140L))
> >
> >
> >
> >
> > On Thu, 29 Jun 2023 at 21:11, John Kane <jrkrideau at gmail.com> wrote:
> >
> >> Anupa,
> >>
> >> I think your  best bet with your data would be to tidy it up in Excel,
> >> read it into  R using something like the readxl package and then supply
> >> some sample data is the dput() function.
> >>
> >> In the case of a large dataset something like dput(head(mydata, 100))
> >> should supply the data we need. Just do dput(mydata) where *mydata* is your
> >> data. Copy the output and paste it here.
> >>
> >> On Thu, 29 Jun 2023 at 08:37, Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
> >>
> >>> Reposting the data did not help. We do not like to guess, and doing so
> >>> takes a great deal of time that is likely wasted.
> >>> Rows are observations.
> >>> Columns are variables.
> >>> In Excel, the first row will be variable names and all subsequent rows
> >>> will be observations.
> >>>
> >>> Income is the first variable. It has seven states: $10, $25, $40, $75,
> >>> >$75, "No", "Answer"
> >>> MF is the second variable. It has six values: 1, 2, 3, 4, 5, 9
> >>> None is the third variable. It has seven values: 1, 3.05,  2.29, 2.24,
> >>> 1.71, 1.30, 2.83
> >>> Equity is the last variable with many states, both numeric and text. A
> >>> computer will read it all as text.
> >>>
> >>> As written the data cannot be analyzed.
> >>>
> >>> Equity looks like it should be numeric. However, it has text values:
> >>> "Debt", "Hybrid", Bank", "AC", "None", "Current", "Savings", "No", and
> >>> "Answer"
> >>>
> >>> In looking at the data I try to find some organization where every
> >>> variable has the same number of rows as every other variable. I fail with
> >>> these data.
> >>> I could combine "No" and "Answer" into one name "No Answer" to make it
> >>> agree with MF, but then it does not work for None.
> >>>
> >>>
> >>> Please rework the data in Excel so that we can properly interpret the
> >>> content. If it is badly organized in Excel, moving it to R will not help.
> >>> Below, I tried adding carriage returns and spaces to organize the data,
> >>> but I have a column of numbers that are not identified. The values below
> >>> $10 do not make much sense compared to other values.
> >>>
> >>> I am tired of guessing.
> >>>
> >>> Tim
> >>>
> >>> -----Original Message-----
> >>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam Tyagi
> >>> Sent: Wednesday, June 28, 2023 11:49 PM
> >>> To: r-help at r-project.org
> >>> Subject: Re: [R] Plotting factors in graph panel
> >>>
> >>> [External Email]
> >>>
> >>> Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope you have
> >>> been well.
> >>>
> >>> Pikal, thanks. Your solution may be close to what I want. I did not know
> >>> that I was posting in HTML. I just copied the data from Excel and posted in
> >>> the email in Gmail. The data is still in Excel, because I have not yet
> >>> figured out what is a good way to organize it in R. I am posting it again
> >>> below as text. These are rows in Excel: 1,2,3,5,9 after MF are income
> >>> categories and No Answer category (9). Down the second column are
> >>> categories of MF and Bank AC. Rest of the columns are percentages.
> >>>
> >>> Jim, thanks for the graph. I am looking to plot only one line (category)
> >>> each in many small plots on the same page. I don't want to compare
> >>> different categories on the same graph as you do, but see how each category
> >>> varies by income, one category in each graph. Like Excel does with
> >>> Sparklines (Top menu: Insert, Sparklines, Lines). I have many categories
> >>> for many variables. I am only showing two MF and Bank AC.
> >>>
> >>> Income        $10 $25     $40      $75   > $75    No Answer
> >>> MF                   1      2         3           4         5          9
> >>> None               1   3.05     2.29    2.24     1.71    1.30
> >>>    2.83
> >>> Equity             2    29.76  28.79  29.51 28.90   31.67
> >>> 36.77
> >>>
> >>> Debt                3  31.18  32.64  34.31  35.65  37.59
> >>>  33.15
> >>>
> >>> Hybrid              4 36.00 36.27 33.94 33.74 29.44 27.25
> >>>
> >>> Bank AC None 1 46.54 54.01 59.1 62.17 67.67 60.87
> >>>
> >>> Current            2 24.75 24.4 25 24.61 24.02 21.09
> >>>
> >>> Savings             3 25.4 18.7 29 11.48 7.103 13.46
> >>>
> >>> No Answer       9 3.307 2.891 13.4 1.746 1.208 4.577
> >>>
> >>>
> >>> On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com> wrote:
> >>>
> >>> > Hi Anupam,
> >>> > Haven't heard from you in a long time. Perhaps you want something like
> >>> > this:
> >>> >
> >>> > at_df<-read.table(text=
> >>> >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None Bank_Current
> >>> > Bank_Savings Bank_NA
> >>> >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> >>> >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> >>> >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> >>> >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> >>> >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208  No_Answer 9
> >>> > 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> >>> >  header=TRUE,stringsAsFactors=FALSE)
> >>> > at_df<-at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA")]
> >>> > png("MF_Bank.png",height=600)
> >>> > par(mfrow=c(2,1))
> >>> > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
> >>> >  type="l",col=1:4,lty=1:4,lwd=3,
> >>> >  main="Percentages by Income and MF type",
> >>> > xlab="Income",ylab="Percentage of group",xaxt="n")
> >>> > axis(1,at=1:5,labels=at_df$Income)
> >>> > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
> >>> >  lty=1:4,lwd=3,col=1:4)
> >>> > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
> >>> >  type="l",col=1:3,lty=1:4,lwd=3,
> >>> >  main="Percentages by Income and Bank type",
> >>> > xlab="Income",ylab="Percentage of group",xaxt="n")
> >>> > axis(1,at=1:5,labels=at_df$Income)
> >>> > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
> >>> >  lty=1:4,lwd=3,col=1:3)
> >>> > dev.off()
> >>> >
> >>> > Jim
> >>> >
> >>> > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi <anuptyagi at gmail.com>
> >>> wrote:
> >>> > >
> >>> > > Hello,
> >>> > >
> >>> > > I want to plot the following kind of data (percentage of respondents
> >>> > from a
> >>> > > survey) that varies by Income into many small *line* graphs in a
> >>> > > panel of graphs. I want to omit "No Answer" categories. I want to
> >>> > > see how each one of the categories (percentages), "None", " Equity",
> >>> > > etc. varies by
> >>> > Income.
> >>> > > How can I do this? How to organize the data well and how to plot? I
> >>> > thought
> >>> > > Lattice may be a good package to plot this, but I don't know for
> >>> > > sure. I prefer to do this in Base-R if possible, but I am open to
> >>> > > ggplot. Any
> >>> > ideas
> >>> > > will be helpful.
> >>> > >
> >>> > > Income
> >>> > > $10 $25 $40 $75 > $75 No Answer
> >>> > > MF 1 2 3 4 5 9
> >>> > > None 1 3.05 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51
> >>> > > 28.90 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15 Hybrid
> >>> > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54 54.01
> >>> > > 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02 21.09
> >>> > > Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9 3.307 2.891
> >>> > > 13.4 1.746 1.208 4.577
> >>> > >
> >>> > > Thanks.
> >>> > > --
> >>> > > Anupam.
> >>> > >
> >>> > >         [[alternative HTML version deleted]]
> >>> > >
> >>> > > ______________________________________________
> >>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> > > https://st/
> >>> > > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl
> >>> > > .edu%7C59874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a6233
> >>> > > 1e1b84%7C0%7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoi
> >>> > > MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C
> >>> > > %7C%7C&sdata=xoaDMG7ogY4tMtqe30pONZrBdk0eq2cW%2BgdwlDHneWY%3D&reserv
> >>> > > ed=0
> >>> > > PLEASE do read the posting guide
> >>> > http://www.r/
> >>> > -project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C59
> >>> > 874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
> >>> > 7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
> >>> > CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=H7
> >>> > 6XCa%2FULBGUn0Lok93l6mtHzo0snq5G0a%2BL4sEH8%2F8%3D&reserved=0
> >>> > > and provide commented, minimal, self-contained, reproducible code.
> >>> >
> >>>
> >>>
> >>> --
> >>> Anupam.
> >>>
> >>>         [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.r-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>>
> >>
> >>
> >> --
> >> John Kane
> >> Kingston ON Canada
> >>
> >
> >
> > --
> > Anupam.
> >
> >
>
> --
> Anupam.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @hu|@|@cheung @end|ng |rom gm@||@com  Thu Jul  6 11:14:27 2023
From: @hu|@|@cheung @end|ng |rom gm@||@com (Shu Fai Cheung)
Date: Thu, 6 Jul 2023 17:14:27 +0800
Subject: [R] printCoefmat() and zap.ind
Message-ID: <CAPVJd2UBbr--JaN20EG65aFt+yMSeeQ_pT2SfPKD+CFPW+seeQ@mail.gmail.com>

Hi All,

I would like to ask two questions about printCoefmat().

First, I found a behavior of printCoefmat() that looks strange to me,
but I am not sure whether this is an intended behavior:

``` r
set.seed(5689417)
n <- 10000
x1 <- rnorm(n)
x2 <- rnorm(n)
y <- .5 * x1 + .6 * x2 + rnorm(n, -0.0002366, .2)
dat <- data.frame(x1, x2, y)
out <- lm(y ~ x1 + x2, dat)
out_summary <- summary(out)
printCoefmat(out_summary$coefficients)
#>               Estimate Std. Error t value Pr(>|t|)
#> (Intercept) 1.7228e-08 1.9908e-03    0.00        1
#> x1          5.0212e-01 1.9715e-03  254.70   <2e-16 ***
#> x2          6.0016e-01 1.9924e-03  301.23   <2e-16 ***
#> ---
#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
printCoefmat(out_summary$coefficients,
             zap.ind = 1,
             digits = 4)
#>             Estimate Std. Error t value Pr(>|t|)
#> (Intercept) 0.000000   0.001991     0.0        1
#> x1          0.502100   0.001971   254.7   <2e-16 ***
#> x2          0.600200   0.001992   301.2   <2e-16 ***
#> ---
#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
```

With zap.ind = 1, the values in "Estimate" were correctly
zapped using digits = 4. However, by default, "Estimate"
and "Std. Error" are formatted together. Because the
standard errors are small, with digits = 4, zero's were added
to values in "Estimate", resulting in "0.502100" and
"0.600200", which are misleading because, if rounded to
the 6th decimal place, the values to be displayed should
be "0.502122" and "0.600162".

Is this behavior of printCoefmat() intended/normal?

Second, how can I use zap without this behavior?
In cases like the one above, I need to use zap such that
the intercept will not be displayed in scientific notation.
Disabling scientific notation cannot achieve the desired
goal.

I tried adding cs.ind = 1:

```r
printCoefmat(out_summary$coefficients,
             zap.ind = 1,
             digits = 4,
             cs.ind = 1)
#>             Estimate Std. Error t value Pr(>|t|)
#> (Intercept)   0.0000   0.001991     0.0        1
#> x1            0.5021   0.001971   254.7   <2e-16 ***
#> x2            0.6002   0.001992   301.2   <2e-16 ***
#> ---
#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
```

However, this solution is not ideal because the numbers
of decimal places of "Estimate" and "Std. Error" are
different. How can I get the output like this one?

```r
#>             Estimate Std. Error t value Pr(>|t|)
#> (Intercept)   0.0000   0.0020     0.0        1
#> x1            0.5021   0.0020   254.7   <2e-16 ***
#> x2            0.6002   0.0020   301.2   <2e-16 ***
```

Thanks for your attention.

Regards,
Shu Fai Cheung


From petr@p|k@| @end|ng |rom prechez@@cz  Fri Jul  7 08:32:50 2023
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Fri, 7 Jul 2023 06:32:50 +0000
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CADfFDC4hrX8huz2HnDMLM=WT+z5UttBfk8rQeOGwLj14CZN2Pw@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CH3PR22MB4514251DCFE77C2E74C285A8CF25A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
 <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>
 <CAFL9eu=QJG8X9PDG0RNxP88TicefE_DAgnkK-nxWkD9oLt6Z0g@mail.gmail.com>
 <CADfFDC4hrX8huz2HnDMLM=WT+z5UttBfk8rQeOGwLj14CZN2Pw@mail.gmail.com>
Message-ID: <ac95f337b83240d5836169c02548d0d4@SRVEXCHCM1302.precheza.cz>

Hallo Anupam

I do not see much difference in ggplot or lattice, they seems to me provide almost identical results when removing theme part from ggplot.

library(ggplot2)
library(lattice)

ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) + geom_point() +
  geom_line() + facet_wrap(~Measure)

xyplot(Percent ~ Income | Measure, TrialData4,
       type = "o", pch = 16, as.table = TRUE, grid = TRUE)

So it is probably only matter of your preference which one do you choose.

Cheers
Petr


> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Deepayan Sarkar
> Sent: Thursday, July 6, 2023 3:06 PM
> To: Anupam Tyagi <anuptyagi at gmail.com>
> Cc: r-help at r-project.org
> Subject: Re: [R] Plotting factors in graph panel
> 
> On Thu, 6 Jul 2023 at 15:21, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> >
> > Btw, I think "lattice" graphics will provide a better solution than
> > "ggplot", because it puts appropriate (space saving) markers on the
> > axes and does axes labels well. However, I cannot figure out how to do
> > it in "lattice".
> 
> You will need to convert Income to a factor first. Alternatively, use
> dotplot() instead of xyplot(), but that will sort the levels wrongly, so better to
> make the factor first anyway.
> 
> TrialData4 <- within(TrialData4,
> {
>     Income <- factor(Income, levels = c("$10", "$25", "$40", "$75", "> $75"))
> })
> 
> xyplot(Percent ~ Income | Measure, TrialData4,
>        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
> 
> or
> 
> dotplot(Percent ~ Income | Measure, TrialData4,
>         type = "o", as.table = TRUE)
> 
> This is not really any different from the ggplot() version though.
> Maybe you just don't like the effect of the '+ theme_classic()' part.
> 
> Best,
> -Deepayan
> 
> 
> > On Thu, 6 Jul 2023 at 15:11, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> >
> > > Hi John:
> > >
> > > Thanks! Below is the data using your suggestion. I used "ggplot" to
> > > make a graph. I am not too happy with it. I am looking for something
> > > simpler and cleaner. Plot is attached.
> > >
> > > I also tried "lattice" package, but nothing got plotted with "xyplot"
> > > command, because it is looking for a numeric variable on x-axis.
> > >
> > > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
> > > geom_point()
> > > +
> > >   geom_line() + facet_wrap(~Measure) + theme_classic()
> > >
> > > > dput(TrialData4)structure(list(Income = c("$10", "$25", "$40",
> > > > "$75", "> $75",
> > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75"
> > > ), Percent = c(3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79,
> > > 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27,
> > > 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4,
> > > 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244,
> > > 1.706, 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31,
> > > 35.65, 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1,
> > > 62.17, 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
> > > 7.103, 3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51, 28.9,
> > > 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94, 33.74,
> > > 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4, 25, 24.61,
> > > 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244, 1.706,
> > > 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65,
> > > 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17,
> > > 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103),
> > > Measure = c("MF None", "MF None", "MF None", "MF None", "MF None",
> > > "MF Equity", "MF Equity", "MF Equity", "MF Equity", "MF Equity", "MF
> > > Debt", "MF Debt", "MF Debt", "MF Debt", "MF Debt", "MF Hybrid", "MF
> > > Hybrid", "MF Hybrid", "MF Hybrid", "MF Hybrid", "Bank None", "Bank
> > > None", "Bank None", "Bank None", "Bank None", "Bank Current", "Bank
> > > Current", "Bank Current", "Bank Current", "Bank Current", "Bank
> > > Savings", "Bank Savings", "Bank Savings", "Bank Savings", "Bank
> > > Savings", "MF None 1", "MF None 1", "MF None 1", "MF None 1", "MF
> > > None 1", "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Equity 1",
> > > "MF Equity 1", "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Debt 1",
> > > "MF Debt 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid
> > > 1", "MF Hybrid 1", "Bank None 1", "Bank None 1", "Bank None 1",
> > > "Bank None 1", "Bank None 1", "Bank Current 1", "Bank Current 1",
> > > "Bank Current 1", "Bank Current 1", "Bank Current 1", "Bank Savings
> > > 1", "Bank Savings 1", "Bank Savings 1", "Bank Savings 1", "Bank
> > > Savings 1", "MF None 2", "MF None 2", "MF None 2", "MF None 2", "MF
> > > None 2", "MF Equity 2", "MF Equity 2", "MF Equity 2", "MF Equity 2",
> > > "MF Equity 2", "MF Debt 2", "MF Debt 2", "MF Debt 2", "MF Debt 2",
> > > "MF Debt 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid
> > > 2", "MF Hybrid 2", "Bank None 2", "Bank None 2", "Bank None 2",
> > > "Bank None 2", "Bank None 2", "Bank Current 2", "Bank Current 2",
> > > "Bank Current 2", "Bank Current 2", "Bank Current 2", "Bank Savings
> > > 2", "Bank Savings 2", "Bank Savings 2", "Bank Savings 2", "Bank
> > > Savings 2", "MF None 3", "MF None 3", "MF None 3", "MF None 3", "MF
> > > None 3", "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Equity 3",
> > > "MF Equity 3", "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Debt 3",
> > > "MF Debt 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid
> > > 3", "MF Hybrid 3", "Bank None 3", "Bank None 3", "Bank None 3",
> > > "Bank None 3", "Bank None 3", "Bank Current 3", "Bank Current 3",
> > > "Bank Current 3", "Bank Current 3", "Bank Current 3", "Bank Savings
> > > 3", "Bank Savings 3", "Bank Savings 3", "Bank Savings 3", "Bank
> > > Savings 3")), class = c("tbl_df", "tbl", "data.frame"), row.names =
> > > c(NA,
> > > -140L))
> > >
> > >
> > >
> > >
> > > On Thu, 29 Jun 2023 at 21:11, John Kane <jrkrideau at gmail.com> wrote:
> > >
> > >> Anupa,
> > >>
> > >> I think your  best bet with your data would be to tidy it up in
> > >> Excel, read it into  R using something like the readxl package and
> > >> then supply some sample data is the dput() function.
> > >>
> > >> In the case of a large dataset something like dput(head(mydata,
> > >> 100)) should supply the data we need. Just do dput(mydata) where
> > >> *mydata* is your data. Copy the output and paste it here.
> > >>
> > >> On Thu, 29 Jun 2023 at 08:37, Ebert,Timothy Aaron <tebert at ufl.edu>
> wrote:
> > >>
> > >>> Reposting the data did not help. We do not like to guess, and
> > >>> doing so takes a great deal of time that is likely wasted.
> > >>> Rows are observations.
> > >>> Columns are variables.
> > >>> In Excel, the first row will be variable names and all subsequent
> > >>> rows will be observations.
> > >>>
> > >>> Income is the first variable. It has seven states: $10, $25, $40,
> > >>> $75,
> > >>> >$75, "No", "Answer"
> > >>> MF is the second variable. It has six values: 1, 2, 3, 4, 5, 9
> > >>> None is the third variable. It has seven values: 1, 3.05,  2.29,
> > >>> 2.24, 1.71, 1.30, 2.83 Equity is the last variable with many
> > >>> states, both numeric and text. A computer will read it all as
> > >>> text.
> > >>>
> > >>> As written the data cannot be analyzed.
> > >>>
> > >>> Equity looks like it should be numeric. However, it has text values:
> > >>> "Debt", "Hybrid", Bank", "AC", "None", "Current", "Savings", "No",
> > >>> and "Answer"
> > >>>
> > >>> In looking at the data I try to find some organization where every
> > >>> variable has the same number of rows as every other variable. I
> > >>> fail with these data.
> > >>> I could combine "No" and "Answer" into one name "No Answer" to
> > >>> make it agree with MF, but then it does not work for None.
> > >>>
> > >>>
> > >>> Please rework the data in Excel so that we can properly interpret
> > >>> the content. If it is badly organized in Excel, moving it to R will not help.
> > >>> Below, I tried adding carriage returns and spaces to organize the
> > >>> data, but I have a column of numbers that are not identified. The
> > >>> values below
> > >>> $10 do not make much sense compared to other values.
> > >>>
> > >>> I am tired of guessing.
> > >>>
> > >>> Tim
> > >>>
> > >>> -----Original Message-----
> > >>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam
> > >>> Tyagi
> > >>> Sent: Wednesday, June 28, 2023 11:49 PM
> > >>> To: r-help at r-project.org
> > >>> Subject: Re: [R] Plotting factors in graph panel
> > >>>
> > >>> [External Email]
> > >>>
> > >>> Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope
> > >>> you have been well.
> > >>>
> > >>> Pikal, thanks. Your solution may be close to what I want. I did
> > >>> not know that I was posting in HTML. I just copied the data from
> > >>> Excel and posted in the email in Gmail. The data is still in
> > >>> Excel, because I have not yet figured out what is a good way to
> > >>> organize it in R. I am posting it again below as text. These are
> > >>> rows in Excel: 1,2,3,5,9 after MF are income categories and No
> > >>> Answer category (9). Down the second column are categories of MF
> and Bank AC. Rest of the columns are percentages.
> > >>>
> > >>> Jim, thanks for the graph. I am looking to plot only one line
> > >>> (category) each in many small plots on the same page. I don't want
> > >>> to compare different categories on the same graph as you do, but
> > >>> see how each category varies by income, one category in each
> > >>> graph. Like Excel does with Sparklines (Top menu: Insert,
> > >>> Sparklines, Lines). I have many categories for many variables. I am only
> showing two MF and Bank AC.
> > >>>
> > >>> Income        $10 $25     $40      $75   > $75    No Answer
> > >>> MF                   1      2         3           4         5          9
> > >>> None               1   3.05     2.29    2.24     1.71    1.30
> > >>>    2.83
> > >>> Equity             2    29.76  28.79  29.51 28.90   31.67
> > >>> 36.77
> > >>>
> > >>> Debt                3  31.18  32.64  34.31  35.65  37.59
> > >>>  33.15
> > >>>
> > >>> Hybrid              4 36.00 36.27 33.94 33.74 29.44 27.25
> > >>>
> > >>> Bank AC None 1 46.54 54.01 59.1 62.17 67.67 60.87
> > >>>
> > >>> Current            2 24.75 24.4 25 24.61 24.02 21.09
> > >>>
> > >>> Savings             3 25.4 18.7 29 11.48 7.103 13.46
> > >>>
> > >>> No Answer       9 3.307 2.891 13.4 1.746 1.208 4.577
> > >>>
> > >>>
> > >>> On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com>
> wrote:
> > >>>
> > >>> > Hi Anupam,
> > >>> > Haven't heard from you in a long time. Perhaps you want
> > >>> > something like
> > >>> > this:
> > >>> >
> > >>> > at_df<-read.table(text=
> > >>> >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None
> > >>> > Bank_Current Bank_Savings Bank_NA
> > >>> >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> > >>> >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> > >>> >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> > >>> >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> > >>> >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
> > >>> > No_Answer 9
> > >>> > 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> > >>> >  header=TRUE,stringsAsFactors=FALSE)
> > >>> > at_df<-
> at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank
> > >>> > _NA")]
> > >>> > png("MF_Bank.png",height=600)
> > >>> > par(mfrow=c(2,1))
> > >>> > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
> > >>> >  type="l",col=1:4,lty=1:4,lwd=3,  main="Percentages by Income
> > >>> > and MF type", xlab="Income",ylab="Percentage of group",xaxt="n")
> > >>> > axis(1,at=1:5,labels=at_df$Income)
> > >>> > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
> > >>> >  lty=1:4,lwd=3,col=1:4)
> > >>> > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
> > >>> >  type="l",col=1:3,lty=1:4,lwd=3,  main="Percentages by Income
> > >>> > and Bank type", xlab="Income",ylab="Percentage of
> > >>> > group",xaxt="n")
> > >>> > axis(1,at=1:5,labels=at_df$Income)
> > >>> > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
> > >>> >  lty=1:4,lwd=3,col=1:3)
> > >>> > dev.off()
> > >>> >
> > >>> > Jim
> > >>> >
> > >>> > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi
> > >>> > <anuptyagi at gmail.com>
> > >>> wrote:
> > >>> > >
> > >>> > > Hello,
> > >>> > >
> > >>> > > I want to plot the following kind of data (percentage of
> > >>> > > respondents
> > >>> > from a
> > >>> > > survey) that varies by Income into many small *line* graphs in
> > >>> > > a panel of graphs. I want to omit "No Answer" categories. I
> > >>> > > want to see how each one of the categories (percentages),
> > >>> > > "None", " Equity", etc. varies by
> > >>> > Income.
> > >>> > > How can I do this? How to organize the data well and how to
> > >>> > > plot? I
> > >>> > thought
> > >>> > > Lattice may be a good package to plot this, but I don't know
> > >>> > > for sure. I prefer to do this in Base-R if possible, but I am
> > >>> > > open to ggplot. Any
> > >>> > ideas
> > >>> > > will be helpful.
> > >>> > >
> > >>> > > Income
> > >>> > > $10 $25 $40 $75 > $75 No Answer MF 1 2 3 4 5 9 None 1 3.05
> > >>> > > 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51
> > >>> > > 28.90 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
> > >>> > > Hybrid
> > >>> > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54
> > >>> > > 54.01
> > >>> > > 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02
> > >>> > > 21.09 Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9
> > >>> > > 3.307 2.891
> > >>> > > 13.4 1.746 1.208 4.577
> > >>> > >
> > >>> > > Thanks.
> > >>> > > --
> > >>> > > Anupam.
> > >>> > >
> > >>> > >         [[alternative HTML version deleted]]
> > >>> > >
> > >>> > > ______________________________________________
> > >>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> > >>> > > see https://st/
> > >>> > > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-
> help&data=05%7C01%7Ctebert
> > >>> > > %40ufl
> > >>> > >
> .edu%7C59874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace6
> > >>> > > 0a6233
> > >>> > >
> 1e1b84%7C0%7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d
> 8ey
> > >>> > > JWIjoi
> > >>> > >
> MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3
> > >>> > > 000%7C
> > >>> > >
> %7C%7C&sdata=xoaDMG7ogY4tMtqe30pONZrBdk0eq2cW%2BgdwlDHneWY
> %3D&
> > >>> > > reserv
> > >>> > > ed=0
> > >>> > > PLEASE do read the posting guide
> > >>> > http://www.r/
> > >>> > -project.org%2Fposting-
> guide.html&data=05%7C01%7Ctebert%40ufl.ed
> > >>> > u%7C59
> > >>> >
> 874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a62331e1b8
> > >>> > 4%7C0%
> > >>> >
> 7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4
> wLjA
> > >>> > wMDAiL
> > >>> >
> CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sd
> > >>> > ata=H7
> > >>> >
> 6XCa%2FULBGUn0Lok93l6mtHzo0snq5G0a%2BL4sEH8%2F8%3D&reserved=0
> > >>> > > and provide commented, minimal, self-contained, reproducible
> code.
> > >>> >
> > >>>
> > >>>
> > >>> --
> > >>> Anupam.
> > >>>
> > >>>         [[alternative HTML version deleted]]
> > >>>
> > >>> ______________________________________________
> > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > >>> PLEASE do read the posting guide
> > >>> http://www.r-project.org/posting-guide.html
> > >>> and provide commented, minimal, self-contained, reproducible code.
> > >>> ______________________________________________
> > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > >>> PLEASE do read the posting guide
> > >>> http://www.R-project.org/posting-guide.html
> > >>> and provide commented, minimal, self-contained, reproducible code.
> > >>>
> > >>
> > >>
> > >> --
> > >> John Kane
> > >> Kingston ON Canada
> > >>
> > >
> > >
> > > --
> > > Anupam.
> > >
> > >
> >
> > --
> > Anupam.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From @nupty@g| @end|ng |rom gm@||@com  Fri Jul  7 12:46:54 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Fri, 7 Jul 2023 16:16:54 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CADfFDC4hrX8huz2HnDMLM=WT+z5UttBfk8rQeOGwLj14CZN2Pw@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CH3PR22MB4514251DCFE77C2E74C285A8CF25A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
 <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>
 <CAFL9eu=QJG8X9PDG0RNxP88TicefE_DAgnkK-nxWkD9oLt6Z0g@mail.gmail.com>
 <CADfFDC4hrX8huz2HnDMLM=WT+z5UttBfk8rQeOGwLj14CZN2Pw@mail.gmail.com>
Message-ID: <CAFL9eumBZgqp7S76KE0jH+D-VX0rrqOfkzuX15bzoE7Webz7xw@mail.gmail.com>

Thanks!

Is there a way to reduce font-size of text of x-axis labels and titles of
sub-graphs? That will probably make graphs more readable.

I am realizing that since the y-axis scales are very different for some
graphs, I may have to figure out a way to build the sub-graphs one at a
time, manually, and then combine them together. It is going to be very
tedious. I have more than 100 sub-graphs to display, more than 50 varying
by income and more than 50 varying by education. I may need to combine them
in two or four panels of graphs. No journal is likely to want pages full of
sub-graphs.



On Thu, 6 Jul 2023 at 18:35, Deepayan Sarkar <deepayan.sarkar at gmail.com>
wrote:

> On Thu, 6 Jul 2023 at 15:21, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> >
> > Btw, I think "lattice" graphics will provide a better solution than
> > "ggplot", because it puts appropriate (space saving) markers on the axes
> > and does axes labels well. However, I cannot figure out how to do it in
> > "lattice".
>
> You will need to convert Income to a factor first. Alternatively, use
> dotplot() instead of xyplot(), but that will sort the levels wrongly,
> so better to make the factor first anyway.
>
> TrialData4 <- within(TrialData4,
> {
>     Income <- factor(Income, levels = c("$10", "$25", "$40", "$75", ">
> $75"))
> })
>
> xyplot(Percent ~ Income | Measure, TrialData4,
>        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
>
> or
>
> dotplot(Percent ~ Income | Measure, TrialData4,
>         type = "o", as.table = TRUE)
>
> This is not really any different from the ggplot() version though.
> Maybe you just don't like the effect of the '+ theme_classic()' part.
>
> Best,
> -Deepayan
>
>
> > On Thu, 6 Jul 2023 at 15:11, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> >
> > > Hi John:
> > >
> > > Thanks! Below is the data using your suggestion. I used "ggplot" to
> make a
> > > graph. I am not too happy with it. I am looking for something simpler
> and
> > > cleaner. Plot is attached.
> > >
> > > I also tried "lattice" package, but nothing got plotted with "xyplot"
> > > command, because it is looking for a numeric variable on x-axis.
> > >
> > > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
> geom_point()
> > > +
> > >   geom_line() + facet_wrap(~Measure) + theme_classic()
> > >
> > > > dput(TrialData4)structure(list(Income = c("$10", "$25", "$40",
> "$75", "> $75",
> > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
> > > "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
> > > "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
> > > "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75"
> > > ), Percent = c(3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79,
> > > 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27,
> > > 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75,
> > > 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052,
> > > 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51, 28.9, 31.67,
> > > 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94, 33.74, 29.44,
> > > 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4, 25, 24.61, 24.02,
> > > 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244, 1.706, 1.297,
> > > 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65,
> > > 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17,
> > > 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
> > > 7.103, 3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51,
> > > 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94,
> > > 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4,
> > > 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103), Measure = c("MF None",
> > > "MF None", "MF None", "MF None", "MF None", "MF Equity", "MF Equity",
> > > "MF Equity", "MF Equity", "MF Equity", "MF Debt", "MF Debt",
> > > "MF Debt", "MF Debt", "MF Debt", "MF Hybrid", "MF Hybrid", "MF Hybrid",
> > > "MF Hybrid", "MF Hybrid", "Bank None", "Bank None", "Bank None",
> > > "Bank None", "Bank None", "Bank Current", "Bank Current", "Bank
> Current",
> > > "Bank Current", "Bank Current", "Bank Savings", "Bank Savings",
> > > "Bank Savings", "Bank Savings", "Bank Savings", "MF None 1",
> > > "MF None 1", "MF None 1", "MF None 1", "MF None 1", "MF Equity 1",
> > > "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Debt
> 1",
> > > "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Hybrid 1",
> > > "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "Bank None
> 1",
> > > "Bank None 1", "Bank None 1", "Bank None 1", "Bank None 1", "Bank
> Current 1",
> > > "Bank Current 1", "Bank Current 1", "Bank Current 1", "Bank Current 1",
> > > "Bank Savings 1", "Bank Savings 1", "Bank Savings 1", "Bank Savings 1",
> > > "Bank Savings 1", "MF None 2", "MF None 2", "MF None 2", "MF None 2",
> > > "MF None 2", "MF Equity 2", "MF Equity 2", "MF Equity 2", "MF Equity
> 2",
> > > "MF Equity 2", "MF Debt 2", "MF Debt 2", "MF Debt 2", "MF Debt 2",
> > > "MF Debt 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid
> 2",
> > > "MF Hybrid 2", "Bank None 2", "Bank None 2", "Bank None 2", "Bank None
> 2",
> > > "Bank None 2", "Bank Current 2", "Bank Current 2", "Bank Current 2",
> > > "Bank Current 2", "Bank Current 2", "Bank Savings 2", "Bank Savings 2",
> > > "Bank Savings 2", "Bank Savings 2", "Bank Savings 2", "MF None 3",
> > > "MF None 3", "MF None 3", "MF None 3", "MF None 3", "MF Equity 3",
> > > "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Debt
> 3",
> > > "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Hybrid 3",
> > > "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "Bank None
> 3",
> > > "Bank None 3", "Bank None 3", "Bank None 3", "Bank None 3", "Bank
> Current 3",
> > > "Bank Current 3", "Bank Current 3", "Bank Current 3", "Bank Current 3",
> > > "Bank Savings 3", "Bank Savings 3", "Bank Savings 3", "Bank Savings 3",
> > > "Bank Savings 3")), class = c("tbl_df", "tbl", "data.frame"),
> row.names = c(NA,
> > > -140L))
> > >
> > >
> > >
> > >
> > > On Thu, 29 Jun 2023 at 21:11, John Kane <jrkrideau at gmail.com> wrote:
> > >
> > >> Anupa,
> > >>
> > >> I think your  best bet with your data would be to tidy it up in Excel,
> > >> read it into  R using something like the readxl package and then
> supply
> > >> some sample data is the dput() function.
> > >>
> > >> In the case of a large dataset something like dput(head(mydata, 100))
> > >> should supply the data we need. Just do dput(mydata) where *mydata*
> is your
> > >> data. Copy the output and paste it here.
> > >>
> > >> On Thu, 29 Jun 2023 at 08:37, Ebert,Timothy Aaron <tebert at ufl.edu>
> wrote:
> > >>
> > >>> Reposting the data did not help. We do not like to guess, and doing
> so
> > >>> takes a great deal of time that is likely wasted.
> > >>> Rows are observations.
> > >>> Columns are variables.
> > >>> In Excel, the first row will be variable names and all subsequent
> rows
> > >>> will be observations.
> > >>>
> > >>> Income is the first variable. It has seven states: $10, $25, $40,
> $75,
> > >>> >$75, "No", "Answer"
> > >>> MF is the second variable. It has six values: 1, 2, 3, 4, 5, 9
> > >>> None is the third variable. It has seven values: 1, 3.05,  2.29,
> 2.24,
> > >>> 1.71, 1.30, 2.83
> > >>> Equity is the last variable with many states, both numeric and text.
> A
> > >>> computer will read it all as text.
> > >>>
> > >>> As written the data cannot be analyzed.
> > >>>
> > >>> Equity looks like it should be numeric. However, it has text values:
> > >>> "Debt", "Hybrid", Bank", "AC", "None", "Current", "Savings", "No",
> and
> > >>> "Answer"
> > >>>
> > >>> In looking at the data I try to find some organization where every
> > >>> variable has the same number of rows as every other variable. I fail
> with
> > >>> these data.
> > >>> I could combine "No" and "Answer" into one name "No Answer" to make
> it
> > >>> agree with MF, but then it does not work for None.
> > >>>
> > >>>
> > >>> Please rework the data in Excel so that we can properly interpret the
> > >>> content. If it is badly organized in Excel, moving it to R will not
> help.
> > >>> Below, I tried adding carriage returns and spaces to organize the
> data,
> > >>> but I have a column of numbers that are not identified. The values
> below
> > >>> $10 do not make much sense compared to other values.
> > >>>
> > >>> I am tired of guessing.
> > >>>
> > >>> Tim
> > >>>
> > >>> -----Original Message-----
> > >>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam
> Tyagi
> > >>> Sent: Wednesday, June 28, 2023 11:49 PM
> > >>> To: r-help at r-project.org
> > >>> Subject: Re: [R] Plotting factors in graph panel
> > >>>
> > >>> [External Email]
> > >>>
> > >>> Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope you
> have
> > >>> been well.
> > >>>
> > >>> Pikal, thanks. Your solution may be close to what I want. I did not
> know
> > >>> that I was posting in HTML. I just copied the data from Excel and
> posted in
> > >>> the email in Gmail. The data is still in Excel, because I have not
> yet
> > >>> figured out what is a good way to organize it in R. I am posting it
> again
> > >>> below as text. These are rows in Excel: 1,2,3,5,9 after MF are income
> > >>> categories and No Answer category (9). Down the second column are
> > >>> categories of MF and Bank AC. Rest of the columns are percentages.
> > >>>
> > >>> Jim, thanks for the graph. I am looking to plot only one line
> (category)
> > >>> each in many small plots on the same page. I don't want to compare
> > >>> different categories on the same graph as you do, but see how each
> category
> > >>> varies by income, one category in each graph. Like Excel does with
> > >>> Sparklines (Top menu: Insert, Sparklines, Lines). I have many
> categories
> > >>> for many variables. I am only showing two MF and Bank AC.
> > >>>
> > >>> Income        $10 $25     $40      $75   > $75    No Answer
> > >>> MF                   1      2         3           4         5
>   9
> > >>> None               1   3.05     2.29    2.24     1.71    1.30
> > >>>    2.83
> > >>> Equity             2    29.76  28.79  29.51 28.90   31.67
> > >>> 36.77
> > >>>
> > >>> Debt                3  31.18  32.64  34.31  35.65  37.59
> > >>>  33.15
> > >>>
> > >>> Hybrid              4 36.00 36.27 33.94 33.74 29.44 27.25
> > >>>
> > >>> Bank AC None 1 46.54 54.01 59.1 62.17 67.67 60.87
> > >>>
> > >>> Current            2 24.75 24.4 25 24.61 24.02 21.09
> > >>>
> > >>> Savings             3 25.4 18.7 29 11.48 7.103 13.46
> > >>>
> > >>> No Answer       9 3.307 2.891 13.4 1.746 1.208 4.577
> > >>>
> > >>>
> > >>> On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com>
> wrote:
> > >>>
> > >>> > Hi Anupam,
> > >>> > Haven't heard from you in a long time. Perhaps you want something
> like
> > >>> > this:
> > >>> >
> > >>> > at_df<-read.table(text=
> > >>> >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None
> Bank_Current
> > >>> > Bank_Savings Bank_NA
> > >>> >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> > >>> >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> > >>> >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> > >>> >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> > >>> >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208  No_Answer 9
> > >>> > 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> > >>> >  header=TRUE,stringsAsFactors=FALSE)
> > >>> >
> at_df<-at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA")]
> > >>> > png("MF_Bank.png",height=600)
> > >>> > par(mfrow=c(2,1))
> > >>> > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
> > >>> >  type="l",col=1:4,lty=1:4,lwd=3,
> > >>> >  main="Percentages by Income and MF type",
> > >>> > xlab="Income",ylab="Percentage of group",xaxt="n")
> > >>> > axis(1,at=1:5,labels=at_df$Income)
> > >>> > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
> > >>> >  lty=1:4,lwd=3,col=1:4)
> > >>> > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
> > >>> >  type="l",col=1:3,lty=1:4,lwd=3,
> > >>> >  main="Percentages by Income and Bank type",
> > >>> > xlab="Income",ylab="Percentage of group",xaxt="n")
> > >>> > axis(1,at=1:5,labels=at_df$Income)
> > >>> > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
> > >>> >  lty=1:4,lwd=3,col=1:3)
> > >>> > dev.off()
> > >>> >
> > >>> > Jim
> > >>> >
> > >>> > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi <anuptyagi at gmail.com>
> > >>> wrote:
> > >>> > >
> > >>> > > Hello,
> > >>> > >
> > >>> > > I want to plot the following kind of data (percentage of
> respondents
> > >>> > from a
> > >>> > > survey) that varies by Income into many small *line* graphs in a
> > >>> > > panel of graphs. I want to omit "No Answer" categories. I want to
> > >>> > > see how each one of the categories (percentages), "None", "
> Equity",
> > >>> > > etc. varies by
> > >>> > Income.
> > >>> > > How can I do this? How to organize the data well and how to
> plot? I
> > >>> > thought
> > >>> > > Lattice may be a good package to plot this, but I don't know for
> > >>> > > sure. I prefer to do this in Base-R if possible, but I am open to
> > >>> > > ggplot. Any
> > >>> > ideas
> > >>> > > will be helpful.
> > >>> > >
> > >>> > > Income
> > >>> > > $10 $25 $40 $75 > $75 No Answer
> > >>> > > MF 1 2 3 4 5 9
> > >>> > > None 1 3.05 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51
> > >>> > > 28.90 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
> Hybrid
> > >>> > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54 54.01
> > >>> > > 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02 21.09
> > >>> > > Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9 3.307 2.891
> > >>> > > 13.4 1.746 1.208 4.577
> > >>> > >
> > >>> > > Thanks.
> > >>> > > --
> > >>> > > Anupam.
> > >>> > >
> > >>> > >         [[alternative HTML version deleted]]
> > >>> > >
> > >>> > > ______________________________________________
> > >>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> see
> > >>> > > https://st/
> > >>> > > at.ethz.ch
> %2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl
> > >>> > >
> .edu%7C59874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a6233
> > >>> > >
> 1e1b84%7C0%7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoi
> > >>> > >
> MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C
> > >>> > >
> %7C%7C&sdata=xoaDMG7ogY4tMtqe30pONZrBdk0eq2cW%2BgdwlDHneWY%3D&reserv
> > >>> > > ed=0
> > >>> > > PLEASE do read the posting guide
> > >>> > http://www.r/
> > >>> > -project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu
> %7C59
> > >>> >
> 874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
> > >>> >
> 7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
> > >>> >
> CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=H7
> > >>> > 6XCa%2FULBGUn0Lok93l6mtHzo0snq5G0a%2BL4sEH8%2F8%3D&reserved=0
> > >>> > > and provide commented, minimal, self-contained, reproducible
> code.
> > >>> >
> > >>>
> > >>>
> > >>> --
> > >>> Anupam.
> > >>>
> > >>>         [[alternative HTML version deleted]]
> > >>>
> > >>> ______________________________________________
> > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > >>> PLEASE do read the posting guide
> > >>> http://www.r-project.org/posting-guide.html
> > >>> and provide commented, minimal, self-contained, reproducible code.
> > >>> ______________________________________________
> > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > >>> PLEASE do read the posting guide
> > >>> http://www.R-project.org/posting-guide.html
> > >>> and provide commented, minimal, self-contained, reproducible code.
> > >>>
> > >>
> > >>
> > >> --
> > >> John Kane
> > >> Kingston ON Canada
> > >>
> > >
> > >
> > > --
> > > Anupam.
> > >
> > >
> >
> > --
> > Anupam.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>


-- 
Anupam.

	[[alternative HTML version deleted]]


From @nupty@g| @end|ng |rom gm@||@com  Fri Jul  7 12:48:14 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Fri, 7 Jul 2023 16:18:14 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <ac95f337b83240d5836169c02548d0d4@SRVEXCHCM1302.precheza.cz>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CH3PR22MB4514251DCFE77C2E74C285A8CF25A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
 <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>
 <CAFL9eu=QJG8X9PDG0RNxP88TicefE_DAgnkK-nxWkD9oLt6Z0g@mail.gmail.com>
 <CADfFDC4hrX8huz2HnDMLM=WT+z5UttBfk8rQeOGwLj14CZN2Pw@mail.gmail.com>
 <ac95f337b83240d5836169c02548d0d4@SRVEXCHCM1302.precheza.cz>
Message-ID: <CAFL9eunWEer8nXQ52jsrvicdvDokyZHfTWrOsstRyyW37hm+nQ@mail.gmail.com>

Thanks! You are correct, the graphs look very similar, except ggplot is
scaling the text font to make it more readable. Is there a way to scale
down the x-axis labels, so they are readable?

On Fri, 7 Jul 2023 at 12:02, PIKAL Petr <petr.pikal at precheza.cz> wrote:

> Hallo Anupam
>
> I do not see much difference in ggplot or lattice, they seems to me
> provide almost identical results when removing theme part from ggplot.
>
> library(ggplot2)
> library(lattice)
>
> ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) + geom_point()
> +
>   geom_line() + facet_wrap(~Measure)
>
> xyplot(Percent ~ Income | Measure, TrialData4,
>        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
>
> So it is probably only matter of your preference which one do you choose.
>
> Cheers
> Petr
>
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Deepayan Sarkar
> > Sent: Thursday, July 6, 2023 3:06 PM
> > To: Anupam Tyagi <anuptyagi at gmail.com>
> > Cc: r-help at r-project.org
> > Subject: Re: [R] Plotting factors in graph panel
> >
> > On Thu, 6 Jul 2023 at 15:21, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> > >
> > > Btw, I think "lattice" graphics will provide a better solution than
> > > "ggplot", because it puts appropriate (space saving) markers on the
> > > axes and does axes labels well. However, I cannot figure out how to do
> > > it in "lattice".
> >
> > You will need to convert Income to a factor first. Alternatively, use
> > dotplot() instead of xyplot(), but that will sort the levels wrongly, so
> better to
> > make the factor first anyway.
> >
> > TrialData4 <- within(TrialData4,
> > {
> >     Income <- factor(Income, levels = c("$10", "$25", "$40", "$75", ">
> $75"))
> > })
> >
> > xyplot(Percent ~ Income | Measure, TrialData4,
> >        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
> >
> > or
> >
> > dotplot(Percent ~ Income | Measure, TrialData4,
> >         type = "o", as.table = TRUE)
> >
> > This is not really any different from the ggplot() version though.
> > Maybe you just don't like the effect of the '+ theme_classic()' part.
> >
> > Best,
> > -Deepayan
> >
> >
> > > On Thu, 6 Jul 2023 at 15:11, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> > >
> > > > Hi John:
> > > >
> > > > Thanks! Below is the data using your suggestion. I used "ggplot" to
> > > > make a graph. I am not too happy with it. I am looking for something
> > > > simpler and cleaner. Plot is attached.
> > > >
> > > > I also tried "lattice" package, but nothing got plotted with "xyplot"
> > > > command, because it is looking for a numeric variable on x-axis.
> > > >
> > > > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
> > > > geom_point()
> > > > +
> > > >   geom_line() + facet_wrap(~Measure) + theme_classic()
> > > >
> > > > > dput(TrialData4)structure(list(Income = c("$10", "$25", "$40",
> > > > > "$75", "> $75",
> > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75"
> > > > ), Percent = c(3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79,
> > > > 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27,
> > > > 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4,
> > > > 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244,
> > > > 1.706, 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31,
> > > > 35.65, 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1,
> > > > 62.17, 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
> > > > 7.103, 3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51, 28.9,
> > > > 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94, 33.74,
> > > > 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4, 25, 24.61,
> > > > 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244, 1.706,
> > > > 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65,
> > > > 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17,
> > > > 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103),
> > > > Measure = c("MF None", "MF None", "MF None", "MF None", "MF None",
> > > > "MF Equity", "MF Equity", "MF Equity", "MF Equity", "MF Equity", "MF
> > > > Debt", "MF Debt", "MF Debt", "MF Debt", "MF Debt", "MF Hybrid", "MF
> > > > Hybrid", "MF Hybrid", "MF Hybrid", "MF Hybrid", "Bank None", "Bank
> > > > None", "Bank None", "Bank None", "Bank None", "Bank Current", "Bank
> > > > Current", "Bank Current", "Bank Current", "Bank Current", "Bank
> > > > Savings", "Bank Savings", "Bank Savings", "Bank Savings", "Bank
> > > > Savings", "MF None 1", "MF None 1", "MF None 1", "MF None 1", "MF
> > > > None 1", "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Equity 1",
> > > > "MF Equity 1", "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Debt 1",
> > > > "MF Debt 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid
> > > > 1", "MF Hybrid 1", "Bank None 1", "Bank None 1", "Bank None 1",
> > > > "Bank None 1", "Bank None 1", "Bank Current 1", "Bank Current 1",
> > > > "Bank Current 1", "Bank Current 1", "Bank Current 1", "Bank Savings
> > > > 1", "Bank Savings 1", "Bank Savings 1", "Bank Savings 1", "Bank
> > > > Savings 1", "MF None 2", "MF None 2", "MF None 2", "MF None 2", "MF
> > > > None 2", "MF Equity 2", "MF Equity 2", "MF Equity 2", "MF Equity 2",
> > > > "MF Equity 2", "MF Debt 2", "MF Debt 2", "MF Debt 2", "MF Debt 2",
> > > > "MF Debt 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid
> > > > 2", "MF Hybrid 2", "Bank None 2", "Bank None 2", "Bank None 2",
> > > > "Bank None 2", "Bank None 2", "Bank Current 2", "Bank Current 2",
> > > > "Bank Current 2", "Bank Current 2", "Bank Current 2", "Bank Savings
> > > > 2", "Bank Savings 2", "Bank Savings 2", "Bank Savings 2", "Bank
> > > > Savings 2", "MF None 3", "MF None 3", "MF None 3", "MF None 3", "MF
> > > > None 3", "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Equity 3",
> > > > "MF Equity 3", "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Debt 3",
> > > > "MF Debt 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid
> > > > 3", "MF Hybrid 3", "Bank None 3", "Bank None 3", "Bank None 3",
> > > > "Bank None 3", "Bank None 3", "Bank Current 3", "Bank Current 3",
> > > > "Bank Current 3", "Bank Current 3", "Bank Current 3", "Bank Savings
> > > > 3", "Bank Savings 3", "Bank Savings 3", "Bank Savings 3", "Bank
> > > > Savings 3")), class = c("tbl_df", "tbl", "data.frame"), row.names =
> > > > c(NA,
> > > > -140L))
> > > >
> > > >
> > > >
> > > >
> > > > On Thu, 29 Jun 2023 at 21:11, John Kane <jrkrideau at gmail.com> wrote:
> > > >
> > > >> Anupa,
> > > >>
> > > >> I think your  best bet with your data would be to tidy it up in
> > > >> Excel, read it into  R using something like the readxl package and
> > > >> then supply some sample data is the dput() function.
> > > >>
> > > >> In the case of a large dataset something like dput(head(mydata,
> > > >> 100)) should supply the data we need. Just do dput(mydata) where
> > > >> *mydata* is your data. Copy the output and paste it here.
> > > >>
> > > >> On Thu, 29 Jun 2023 at 08:37, Ebert,Timothy Aaron <tebert at ufl.edu>
> > wrote:
> > > >>
> > > >>> Reposting the data did not help. We do not like to guess, and
> > > >>> doing so takes a great deal of time that is likely wasted.
> > > >>> Rows are observations.
> > > >>> Columns are variables.
> > > >>> In Excel, the first row will be variable names and all subsequent
> > > >>> rows will be observations.
> > > >>>
> > > >>> Income is the first variable. It has seven states: $10, $25, $40,
> > > >>> $75,
> > > >>> >$75, "No", "Answer"
> > > >>> MF is the second variable. It has six values: 1, 2, 3, 4, 5, 9
> > > >>> None is the third variable. It has seven values: 1, 3.05,  2.29,
> > > >>> 2.24, 1.71, 1.30, 2.83 Equity is the last variable with many
> > > >>> states, both numeric and text. A computer will read it all as
> > > >>> text.
> > > >>>
> > > >>> As written the data cannot be analyzed.
> > > >>>
> > > >>> Equity looks like it should be numeric. However, it has text
> values:
> > > >>> "Debt", "Hybrid", Bank", "AC", "None", "Current", "Savings", "No",
> > > >>> and "Answer"
> > > >>>
> > > >>> In looking at the data I try to find some organization where every
> > > >>> variable has the same number of rows as every other variable. I
> > > >>> fail with these data.
> > > >>> I could combine "No" and "Answer" into one name "No Answer" to
> > > >>> make it agree with MF, but then it does not work for None.
> > > >>>
> > > >>>
> > > >>> Please rework the data in Excel so that we can properly interpret
> > > >>> the content. If it is badly organized in Excel, moving it to R
> will not help.
> > > >>> Below, I tried adding carriage returns and spaces to organize the
> > > >>> data, but I have a column of numbers that are not identified. The
> > > >>> values below
> > > >>> $10 do not make much sense compared to other values.
> > > >>>
> > > >>> I am tired of guessing.
> > > >>>
> > > >>> Tim
> > > >>>
> > > >>> -----Original Message-----
> > > >>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam
> > > >>> Tyagi
> > > >>> Sent: Wednesday, June 28, 2023 11:49 PM
> > > >>> To: r-help at r-project.org
> > > >>> Subject: Re: [R] Plotting factors in graph panel
> > > >>>
> > > >>> [External Email]
> > > >>>
> > > >>> Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope
> > > >>> you have been well.
> > > >>>
> > > >>> Pikal, thanks. Your solution may be close to what I want. I did
> > > >>> not know that I was posting in HTML. I just copied the data from
> > > >>> Excel and posted in the email in Gmail. The data is still in
> > > >>> Excel, because I have not yet figured out what is a good way to
> > > >>> organize it in R. I am posting it again below as text. These are
> > > >>> rows in Excel: 1,2,3,5,9 after MF are income categories and No
> > > >>> Answer category (9). Down the second column are categories of MF
> > and Bank AC. Rest of the columns are percentages.
> > > >>>
> > > >>> Jim, thanks for the graph. I am looking to plot only one line
> > > >>> (category) each in many small plots on the same page. I don't want
> > > >>> to compare different categories on the same graph as you do, but
> > > >>> see how each category varies by income, one category in each
> > > >>> graph. Like Excel does with Sparklines (Top menu: Insert,
> > > >>> Sparklines, Lines). I have many categories for many variables. I
> am only
> > showing two MF and Bank AC.
> > > >>>
> > > >>> Income        $10 $25     $40      $75   > $75    No Answer
> > > >>> MF                   1      2         3           4         5
>     9
> > > >>> None               1   3.05     2.29    2.24     1.71    1.30
> > > >>>    2.83
> > > >>> Equity             2    29.76  28.79  29.51 28.90   31.67
> > > >>> 36.77
> > > >>>
> > > >>> Debt                3  31.18  32.64  34.31  35.65  37.59
> > > >>>  33.15
> > > >>>
> > > >>> Hybrid              4 36.00 36.27 33.94 33.74 29.44 27.25
> > > >>>
> > > >>> Bank AC None 1 46.54 54.01 59.1 62.17 67.67 60.87
> > > >>>
> > > >>> Current            2 24.75 24.4 25 24.61 24.02 21.09
> > > >>>
> > > >>> Savings             3 25.4 18.7 29 11.48 7.103 13.46
> > > >>>
> > > >>> No Answer       9 3.307 2.891 13.4 1.746 1.208 4.577
> > > >>>
> > > >>>
> > > >>> On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com>
> > wrote:
> > > >>>
> > > >>> > Hi Anupam,
> > > >>> > Haven't heard from you in a long time. Perhaps you want
> > > >>> > something like
> > > >>> > this:
> > > >>> >
> > > >>> > at_df<-read.table(text=
> > > >>> >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None
> > > >>> > Bank_Current Bank_Savings Bank_NA
> > > >>> >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> > > >>> >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> > > >>> >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> > > >>> >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> > > >>> >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
> > > >>> > No_Answer 9
> > > >>> > 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> > > >>> >  header=TRUE,stringsAsFactors=FALSE)
> > > >>> > at_df<-
> > at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank
> > > >>> > _NA")]
> > > >>> > png("MF_Bank.png",height=600)
> > > >>> > par(mfrow=c(2,1))
> > > >>> > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
> > > >>> >  type="l",col=1:4,lty=1:4,lwd=3,  main="Percentages by Income
> > > >>> > and MF type", xlab="Income",ylab="Percentage of group",xaxt="n")
> > > >>> > axis(1,at=1:5,labels=at_df$Income)
> > > >>> > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
> > > >>> >  lty=1:4,lwd=3,col=1:4)
> > > >>> > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
> > > >>> >  type="l",col=1:3,lty=1:4,lwd=3,  main="Percentages by Income
> > > >>> > and Bank type", xlab="Income",ylab="Percentage of
> > > >>> > group",xaxt="n")
> > > >>> > axis(1,at=1:5,labels=at_df$Income)
> > > >>> > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
> > > >>> >  lty=1:4,lwd=3,col=1:3)
> > > >>> > dev.off()
> > > >>> >
> > > >>> > Jim
> > > >>> >
> > > >>> > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi
> > > >>> > <anuptyagi at gmail.com>
> > > >>> wrote:
> > > >>> > >
> > > >>> > > Hello,
> > > >>> > >
> > > >>> > > I want to plot the following kind of data (percentage of
> > > >>> > > respondents
> > > >>> > from a
> > > >>> > > survey) that varies by Income into many small *line* graphs in
> > > >>> > > a panel of graphs. I want to omit "No Answer" categories. I
> > > >>> > > want to see how each one of the categories (percentages),
> > > >>> > > "None", " Equity", etc. varies by
> > > >>> > Income.
> > > >>> > > How can I do this? How to organize the data well and how to
> > > >>> > > plot? I
> > > >>> > thought
> > > >>> > > Lattice may be a good package to plot this, but I don't know
> > > >>> > > for sure. I prefer to do this in Base-R if possible, but I am
> > > >>> > > open to ggplot. Any
> > > >>> > ideas
> > > >>> > > will be helpful.
> > > >>> > >
> > > >>> > > Income
> > > >>> > > $10 $25 $40 $75 > $75 No Answer MF 1 2 3 4 5 9 None 1 3.05
> > > >>> > > 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51
> > > >>> > > 28.90 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
> > > >>> > > Hybrid
> > > >>> > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54
> > > >>> > > 54.01
> > > >>> > > 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02
> > > >>> > > 21.09 Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9
> > > >>> > > 3.307 2.891
> > > >>> > > 13.4 1.746 1.208 4.577
> > > >>> > >
> > > >>> > > Thanks.
> > > >>> > > --
> > > >>> > > Anupam.
> > > >>> > >
> > > >>> > >         [[alternative HTML version deleted]]
> > > >>> > >
> > > >>> > > ______________________________________________
> > > >>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> > > >>> > > see https://st/
> > > >>> > > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-
> > help&data=05%7C01%7Ctebert
> > > >>> > > %40ufl
> > > >>> > >
> > .edu%7C59874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace6
> > > >>> > > 0a6233
> > > >>> > >
> > 1e1b84%7C0%7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d
> > 8ey
> > > >>> > > JWIjoi
> > > >>> > >
> > MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3
> > > >>> > > 000%7C
> > > >>> > >
> > %7C%7C&sdata=xoaDMG7ogY4tMtqe30pONZrBdk0eq2cW%2BgdwlDHneWY
> > %3D&
> > > >>> > > reserv
> > > >>> > > ed=0
> > > >>> > > PLEASE do read the posting guide
> > > >>> > http://www.r/
> > > >>> > -project.org%2Fposting-
> > guide.html&data=05%7C01%7Ctebert%40ufl.ed
> > > >>> > u%7C59
> > > >>> >
> > 874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a62331e1b8
> > > >>> > 4%7C0%
> > > >>> >
> > 7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4
> > wLjA
> > > >>> > wMDAiL
> > > >>> >
> > CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sd
> > > >>> > ata=H7
> > > >>> >
> > 6XCa%2FULBGUn0Lok93l6mtHzo0snq5G0a%2BL4sEH8%2F8%3D&reserved=0
> > > >>> > > and provide commented, minimal, self-contained, reproducible
> > code.
> > > >>> >
> > > >>>
> > > >>>
> > > >>> --
> > > >>> Anupam.
> > > >>>
> > > >>>         [[alternative HTML version deleted]]
> > > >>>
> > > >>> ______________________________________________
> > > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > > >>> PLEASE do read the posting guide
> > > >>> http://www.r-project.org/posting-guide.html
> > > >>> and provide commented, minimal, self-contained, reproducible code.
> > > >>> ______________________________________________
> > > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > > >>> PLEASE do read the posting guide
> > > >>> http://www.R-project.org/posting-guide.html
> > > >>> and provide commented, minimal, self-contained, reproducible code.
> > > >>>
> > > >>
> > > >>
> > > >> --
> > > >> John Kane
> > > >> Kingston ON Canada
> > > >>
> > > >
> > > >
> > > > --
> > > > Anupam.
> > > >
> > > >
> > >
> > > --
> > > Anupam.
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-
> > guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>


-- 
Anupam.

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Fri Jul  7 14:27:22 2023
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Fri, 7 Jul 2023 12:27:22 +0000
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CAFL9eunWEer8nXQ52jsrvicdvDokyZHfTWrOsstRyyW37hm+nQ@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CH3PR22MB4514251DCFE77C2E74C285A8CF25A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
 <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>
 <CAFL9eu=QJG8X9PDG0RNxP88TicefE_DAgnkK-nxWkD9oLt6Z0g@mail.gmail.com>
 <CADfFDC4hrX8huz2HnDMLM=WT+z5UttBfk8rQeOGwLj14CZN2Pw@mail.gmail.com>
 <ac95f337b83240d5836169c02548d0d4@SRVEXCHCM1302.precheza.cz>
 <CAFL9eunWEer8nXQ52jsrvicdvDokyZHfTWrOsstRyyW37hm+nQ@mail.gmail.com>
Message-ID: <2cdced6c2c8b492ea94099f51d482970@SRVEXCHCM1302.precheza.cz>

Hallo Anupam

With

ggplot change axis label size into Google

the first answer I got was

axis.text theme

r - Change size of axes title and labels in ggplot2 - Stack Overflow <https://stackoverflow.com/questions/14942681/change-size-of-axes-title-and-labels-in-ggplot2> 

 

so

 

ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) + geom_point() +
  geom_line() + facet_wrap(~Measure) + theme(axis.text=element_text(size=5))

 

Should do the trick.

 

S pozdravem | Best Regards

RNDr. Petr PIKAL
Vedouc? V?zkumu a v?voje | Research Manager

PRECHEZA a.s.
n?b?. Dr. Edvarda Bene?e 1170/24 | 750 02 P?erov | Czech Republic
Tel: +420 581 252 256 | GSM: +420 724 008 364
 <mailto:petr.pikal at precheza.cz> petr.pikal at precheza.cz |  <https://www.precheza.cz/> www.precheza.cz

Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na:  <https://www.precheza.cz/zasady-ochrany-osobnich-udaju/> https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website:  <https://www.precheza.cz/en/personal-data-protection-principles/> https://www.precheza.cz/en/personal-data-protection-principles/

D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti:  <https://www.precheza.cz/01-dovetek/> https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer:  <https://www.precheza.cz/en/01-disclaimer/> https://www.precheza.cz/en/01-disclaimer/

 

From: Anupam Tyagi <anuptyagi at gmail.com> 
Sent: Friday, July 7, 2023 12:48 PM
To: PIKAL Petr <petr.pikal at precheza.cz>
Cc: r-help at r-project.org
Subject: Re: [R] Plotting factors in graph panel

 

Thanks! You are correct, the graphs look very similar, except ggplot is scaling the text font to make it more readable. Is there a way to scale down the x-axis labels, so they are readable?

 

On Fri, 7 Jul 2023 at 12:02, PIKAL Petr <petr.pikal at precheza.cz <mailto:petr.pikal at precheza.cz> > wrote:

Hallo Anupam

I do not see much difference in ggplot or lattice, they seems to me provide almost identical results when removing theme part from ggplot.

library(ggplot2)
library(lattice)

ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) + geom_point() +
  geom_line() + facet_wrap(~Measure)

xyplot(Percent ~ Income | Measure, TrialData4,
       type = "o", pch = 16, as.table = TRUE, grid = TRUE)

So it is probably only matter of your preference which one do you choose.

Cheers
Petr


> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org <mailto:r-help-bounces at r-project.org> > On Behalf Of Deepayan Sarkar
> Sent: Thursday, July 6, 2023 3:06 PM
> To: Anupam Tyagi <anuptyagi at gmail.com <mailto:anuptyagi at gmail.com> >
> Cc: r-help at r-project.org <mailto:r-help at r-project.org> 
> Subject: Re: [R] Plotting factors in graph panel
> 
> On Thu, 6 Jul 2023 at 15:21, Anupam Tyagi <anuptyagi at gmail.com <mailto:anuptyagi at gmail.com> > wrote:
> >
> > Btw, I think "lattice" graphics will provide a better solution than
> > "ggplot", because it puts appropriate (space saving) markers on the
> > axes and does axes labels well. However, I cannot figure out how to do
> > it in "lattice".
> 
> You will need to convert Income to a factor first. Alternatively, use
> dotplot() instead of xyplot(), but that will sort the levels wrongly, so better to
> make the factor first anyway.
> 
> TrialData4 <- within(TrialData4,
> {
>     Income <- factor(Income, levels = c("$10", "$25", "$40", "$75", "> $75"))
> })
> 
> xyplot(Percent ~ Income | Measure, TrialData4,
>        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
> 
> or
> 
> dotplot(Percent ~ Income | Measure, TrialData4,
>         type = "o", as.table = TRUE)
> 
> This is not really any different from the ggplot() version though.
> Maybe you just don't like the effect of the '+ theme_classic()' part.
> 
> Best,
> -Deepayan
> 
> 
> > On Thu, 6 Jul 2023 at 15:11, Anupam Tyagi <anuptyagi at gmail.com <mailto:anuptyagi at gmail.com> > wrote:
> >
> > > Hi John:
> > >
> > > Thanks! Below is the data using your suggestion. I used "ggplot" to
> > > make a graph. I am not too happy with it. I am looking for something
> > > simpler and cleaner. Plot is attached.
> > >
> > > I also tried "lattice" package, but nothing got plotted with "xyplot"
> > > command, because it is looking for a numeric variable on x-axis.
> > >
> > > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
> > > geom_point()
> > > +
> > >   geom_line() + facet_wrap(~Measure) + theme_classic()
> > >
> > > > dput(TrialData4)structure(list(Income = c("$10", "$25", "$40",
> > > > "$75", "> $75",
> > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75"
> > > ), Percent = c(3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79,
> > > 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27,
> > > 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4,
> > > 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244,
> > > 1.706, 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31,
> > > 35.65, 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1,
> > > 62.17, 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
> > > 7.103, 3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51, 28.9,
> > > 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94, 33.74,
> > > 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4, 25, 24.61,
> > > 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244, 1.706,
> > > 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65,
> > > 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17,
> > > 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103),
> > > Measure = c("MF None", "MF None", "MF None", "MF None", "MF None",
> > > "MF Equity", "MF Equity", "MF Equity", "MF Equity", "MF Equity", "MF
> > > Debt", "MF Debt", "MF Debt", "MF Debt", "MF Debt", "MF Hybrid", "MF
> > > Hybrid", "MF Hybrid", "MF Hybrid", "MF Hybrid", "Bank None", "Bank
> > > None", "Bank None", "Bank None", "Bank None", "Bank Current", "Bank
> > > Current", "Bank Current", "Bank Current", "Bank Current", "Bank
> > > Savings", "Bank Savings", "Bank Savings", "Bank Savings", "Bank
> > > Savings", "MF None 1", "MF None 1", "MF None 1", "MF None 1", "MF
> > > None 1", "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Equity 1",
> > > "MF Equity 1", "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Debt 1",
> > > "MF Debt 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid
> > > 1", "MF Hybrid 1", "Bank None 1", "Bank None 1", "Bank None 1",
> > > "Bank None 1", "Bank None 1", "Bank Current 1", "Bank Current 1",
> > > "Bank Current 1", "Bank Current 1", "Bank Current 1", "Bank Savings
> > > 1", "Bank Savings 1", "Bank Savings 1", "Bank Savings 1", "Bank
> > > Savings 1", "MF None 2", "MF None 2", "MF None 2", "MF None 2", "MF
> > > None 2", "MF Equity 2", "MF Equity 2", "MF Equity 2", "MF Equity 2",
> > > "MF Equity 2", "MF Debt 2", "MF Debt 2", "MF Debt 2", "MF Debt 2",
> > > "MF Debt 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid
> > > 2", "MF Hybrid 2", "Bank None 2", "Bank None 2", "Bank None 2",
> > > "Bank None 2", "Bank None 2", "Bank Current 2", "Bank Current 2",
> > > "Bank Current 2", "Bank Current 2", "Bank Current 2", "Bank Savings
> > > 2", "Bank Savings 2", "Bank Savings 2", "Bank Savings 2", "Bank
> > > Savings 2", "MF None 3", "MF None 3", "MF None 3", "MF None 3", "MF
> > > None 3", "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Equity 3",
> > > "MF Equity 3", "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Debt 3",
> > > "MF Debt 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid
> > > 3", "MF Hybrid 3", "Bank None 3", "Bank None 3", "Bank None 3",
> > > "Bank None 3", "Bank None 3", "Bank Current 3", "Bank Current 3",
> > > "Bank Current 3", "Bank Current 3", "Bank Current 3", "Bank Savings
> > > 3", "Bank Savings 3", "Bank Savings 3", "Bank Savings 3", "Bank
> > > Savings 3")), class = c("tbl_df", "tbl", "data.frame"), row.names =
> > > c(NA,
> > > -140L))
> > >
> > >
> > >
> > >
> > > On Thu, 29 Jun 2023 at 21:11, John Kane <jrkrideau at gmail.com <mailto:jrkrideau at gmail.com> > wrote:
> > >
> > >> Anupa,
> > >>
> > >> I think your  best bet with your data would be to tidy it up in
> > >> Excel, read it into  R using something like the readxl package and
> > >> then supply some sample data is the dput() function.
> > >>
> > >> In the case of a large dataset something like dput(head(mydata,
> > >> 100)) should supply the data we need. Just do dput(mydata) where
> > >> *mydata* is your data. Copy the output and paste it here.
> > >>
> > >> On Thu, 29 Jun 2023 at 08:37, Ebert,Timothy Aaron <tebert at ufl.edu <mailto:tebert at ufl.edu> >
> wrote:
> > >>
> > >>> Reposting the data did not help. We do not like to guess, and
> > >>> doing so takes a great deal of time that is likely wasted.
> > >>> Rows are observations.
> > >>> Columns are variables.
> > >>> In Excel, the first row will be variable names and all subsequent
> > >>> rows will be observations.
> > >>>
> > >>> Income is the first variable. It has seven states: $10, $25, $40,
> > >>> $75,
> > >>> >$75, "No", "Answer"
> > >>> MF is the second variable. It has six values: 1, 2, 3, 4, 5, 9
> > >>> None is the third variable. It has seven values: 1, 3.05,  2.29,
> > >>> 2.24, 1.71, 1.30, 2.83 Equity is the last variable with many
> > >>> states, both numeric and text. A computer will read it all as
> > >>> text.
> > >>>
> > >>> As written the data cannot be analyzed.
> > >>>
> > >>> Equity looks like it should be numeric. However, it has text values:
> > >>> "Debt", "Hybrid", Bank", "AC", "None", "Current", "Savings", "No",
> > >>> and "Answer"
> > >>>
> > >>> In looking at the data I try to find some organization where every
> > >>> variable has the same number of rows as every other variable. I
> > >>> fail with these data.
> > >>> I could combine "No" and "Answer" into one name "No Answer" to
> > >>> make it agree with MF, but then it does not work for None.
> > >>>
> > >>>
> > >>> Please rework the data in Excel so that we can properly interpret
> > >>> the content. If it is badly organized in Excel, moving it to R will not help.
> > >>> Below, I tried adding carriage returns and spaces to organize the
> > >>> data, but I have a column of numbers that are not identified. The
> > >>> values below
> > >>> $10 do not make much sense compared to other values.
> > >>>
> > >>> I am tired of guessing.
> > >>>
> > >>> Tim
> > >>>
> > >>> -----Original Message-----
> > >>> From: R-help <r-help-bounces at r-project.org <mailto:r-help-bounces at r-project.org> > On Behalf Of Anupam
> > >>> Tyagi
> > >>> Sent: Wednesday, June 28, 2023 11:49 PM
> > >>> To: r-help at r-project.org <mailto:r-help at r-project.org> 
> > >>> Subject: Re: [R] Plotting factors in graph panel
> > >>>
> > >>> [External Email]
> > >>>
> > >>> Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope
> > >>> you have been well.
> > >>>
> > >>> Pikal, thanks. Your solution may be close to what I want. I did
> > >>> not know that I was posting in HTML. I just copied the data from
> > >>> Excel and posted in the email in Gmail. The data is still in
> > >>> Excel, because I have not yet figured out what is a good way to
> > >>> organize it in R. I am posting it again below as text. These are
> > >>> rows in Excel: 1,2,3,5,9 after MF are income categories and No
> > >>> Answer category (9). Down the second column are categories of MF
> and Bank AC. Rest of the columns are percentages.
> > >>>
> > >>> Jim, thanks for the graph. I am looking to plot only one line
> > >>> (category) each in many small plots on the same page. I don't want
> > >>> to compare different categories on the same graph as you do, but
> > >>> see how each category varies by income, one category in each
> > >>> graph. Like Excel does with Sparklines (Top menu: Insert,
> > >>> Sparklines, Lines). I have many categories for many variables. I am only
> showing two MF and Bank AC.
> > >>>
> > >>> Income        $10 $25     $40      $75   > $75    No Answer
> > >>> MF                   1      2         3           4         5          9
> > >>> None               1   3.05     2.29    2.24     1.71    1.30
> > >>>    2.83
> > >>> Equity             2    29.76  28.79  29.51 28.90   31.67
> > >>> 36.77
> > >>>
> > >>> Debt                3  31.18  32.64  34.31  35.65  37.59
> > >>>  33.15
> > >>>
> > >>> Hybrid              4 36.00 36.27 33.94 33.74 29.44 27.25
> > >>>
> > >>> Bank AC None 1 46.54 54.01 59.1 62.17 67.67 60.87
> > >>>
> > >>> Current            2 24.75 24.4 25 24.61 24.02 21.09
> > >>>
> > >>> Savings             3 25.4 18.7 29 11.48 7.103 13.46
> > >>>
> > >>> No Answer       9 3.307 2.891 13.4 1.746 1.208 4.577
> > >>>
> > >>>
> > >>> On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com <mailto:drjimlemon at gmail.com> >
> wrote:
> > >>>
> > >>> > Hi Anupam,
> > >>> > Haven't heard from you in a long time. Perhaps you want
> > >>> > something like
> > >>> > this:
> > >>> >
> > >>> > at_df<-read.table(text=
> > >>> >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None
> > >>> > Bank_Current Bank_Savings Bank_NA
> > >>> >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> > >>> >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> > >>> >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> > >>> >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> > >>> >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
> > >>> > No_Answer 9
> > >>> > 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> > >>> >  header=TRUE,stringsAsFactors=FALSE)
> > >>> > at_df<-
> at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank
> > >>> > _NA")]
> > >>> > png("MF_Bank.png",height=600)
> > >>> > par(mfrow=c(2,1))
> > >>> > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
> > >>> >  type="l",col=1:4,lty=1:4,lwd=3,  main="Percentages by Income
> > >>> > and MF type", xlab="Income",ylab="Percentage of group",xaxt="n")
> > >>> > axis(1,at=1:5,labels=at_df$Income)
> > >>> > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
> > >>> >  lty=1:4,lwd=3,col=1:4)
> > >>> > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
> > >>> >  type="l",col=1:3,lty=1:4,lwd=3,  main="Percentages by Income
> > >>> > and Bank type", xlab="Income",ylab="Percentage of
> > >>> > group",xaxt="n")
> > >>> > axis(1,at=1:5,labels=at_df$Income)
> > >>> > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
> > >>> >  lty=1:4,lwd=3,col=1:3)
> > >>> > dev.off()
> > >>> >
> > >>> > Jim
> > >>> >
> > >>> > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi
> > >>> > <anuptyagi at gmail.com <mailto:anuptyagi at gmail.com> >
> > >>> wrote:
> > >>> > >
> > >>> > > Hello,
> > >>> > >
> > >>> > > I want to plot the following kind of data (percentage of
> > >>> > > respondents
> > >>> > from a
> > >>> > > survey) that varies by Income into many small *line* graphs in
> > >>> > > a panel of graphs. I want to omit "No Answer" categories. I
> > >>> > > want to see how each one of the categories (percentages),
> > >>> > > "None", " Equity", etc. varies by
> > >>> > Income.
> > >>> > > How can I do this? How to organize the data well and how to
> > >>> > > plot? I
> > >>> > thought
> > >>> > > Lattice may be a good package to plot this, but I don't know
> > >>> > > for sure. I prefer to do this in Base-R if possible, but I am
> > >>> > > open to ggplot. Any
> > >>> > ideas
> > >>> > > will be helpful.
> > >>> > >
> > >>> > > Income
> > >>> > > $10 $25 $40 $75 > $75 No Answer MF 1 2 3 4 5 9 None 1 3.05
> > >>> > > 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51
> > >>> > > 28.90 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
> > >>> > > Hybrid
> > >>> > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54
> > >>> > > 54.01
> > >>> > > 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02
> > >>> > > 21.09 Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9
> > >>> > > 3.307 2.891
> > >>> > > 13.4 1.746 1.208 4.577
> > >>> > >
> > >>> > > Thanks.
> > >>> > > --
> > >>> > > Anupam.
> > >>> > >
> > >>> > >         [[alternative HTML version deleted]]
> > >>> > >
> > >>> > > ______________________________________________
> > >>> > > R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more,
> > >>> > > see https://st/
> > >>> > > at.ethz.ch <http://at.ethz.ch> %2Fmailman%2Flistinfo%2Fr-
> help&data=05%7C01%7Ctebert
> > >>> > > %40ufl
> > >>> > >
> .edu%7C59874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace6
> > >>> > > 0a6233
> > >>> > >
> 1e1b84%7C0%7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d
> 8ey
> > >>> > > JWIjoi
> > >>> > >
> MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3
> > >>> > > 000%7C
> > >>> > >
> %7C%7C&sdata=xoaDMG7ogY4tMtqe30pONZrBdk0eq2cW%2BgdwlDHneWY
> %3D&
> > >>> > > reserv
> > >>> > > ed=0
> > >>> > > PLEASE do read the posting guide
> > >>> > http://www.r/
> > >>> > -project.org <http://project.org> %2Fposting-
> guide.html&data=05%7C01%7Ctebert%40ufl.ed
> > >>> > u%7C59
> > >>> >
> 874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a62331e1b8
> > >>> > 4%7C0%
> > >>> >
> 7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4
> wLjA
> > >>> > wMDAiL
> > >>> >
> CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sd
> > >>> > ata=H7
> > >>> >
> 6XCa%2FULBGUn0Lok93l6mtHzo0snq5G0a%2BL4sEH8%2F8%3D&reserved=0
> > >>> > > and provide commented, minimal, self-contained, reproducible
> code.
> > >>> >
> > >>>
> > >>>
> > >>> --
> > >>> Anupam.
> > >>>
> > >>>         [[alternative HTML version deleted]]
> > >>>
> > >>> ______________________________________________
> > >>> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > >>> PLEASE do read the posting guide
> > >>> http://www.r-project.org/posting-guide.html
> > >>> and provide commented, minimal, self-contained, reproducible code.
> > >>> ______________________________________________
> > >>> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > >>> PLEASE do read the posting guide
> > >>> http://www.R-project.org/posting-guide.html
> > >>> and provide commented, minimal, self-contained, reproducible code.
> > >>>
> > >>
> > >>
> > >> --
> > >> John Kane
> > >> Kingston ON Canada
> > >>
> > >
> > >
> > > --
> > > Anupam.
> > >
> > >
> >
> > --
> > Anupam.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.




 

-- 

Anupam.


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Fri Jul  7 18:12:24 2023
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 7 Jul 2023 18:12:24 +0200
Subject: [R] printCoefmat() and zap.ind
In-Reply-To: <CAPVJd2UBbr--JaN20EG65aFt+yMSeeQ_pT2SfPKD+CFPW+seeQ@mail.gmail.com>
References: <CAPVJd2UBbr--JaN20EG65aFt+yMSeeQ_pT2SfPKD+CFPW+seeQ@mail.gmail.com>
Message-ID: <25768.14696.794296.3642@stat.math.ethz.ch>

>>>>> Shu Fai Cheung 
>>>>>     on Thu, 6 Jul 2023 17:14:27 +0800 writes:

    > Hi All,

    > I would like to ask two questions about printCoefmat().

Good... this function, originally named print.coefmat(),
is 25 years old (in R) now:

  --------------------------------------------------------------------
  r1902 | maechler | 1998-08-14 19:19:05 +0200 (Fri, 14 Aug 1998) |
  Changed paths:
     M R-0-62-patches/CHANGES
     M R-0-62-patches/src/library/base/R/anova.R
     M R-0-62-patches/src/library/base/R/glm.R
     M R-0-62-patches/src/library/base/R/lm.R
     M R-0-62-patches/src/library/base/R/print.R

  print.coefmat(.) about ok
  --------------------------------------------------------------------

  (yes, at the time, the 'stats' package did not exist yet ..)

so it may be a good time to look at it.


    > First, I found a behavior of printCoefmat() that looks strange to me,
    > but I am not sure whether this is an intended behavior:

    > ``` r
    > set.seed(5689417)
    > n <- 10000
    > x1 <- rnorm(n)
    > x2 <- rnorm(n)
    > y <- .5 * x1 + .6 * x2 + rnorm(n, -0.0002366, .2)
    > dat <- data.frame(x1, x2, y)
    > out <- lm(y ~ x1 + x2, dat)
    > out_summary <- summary(out)
    > printCoefmat(out_summary$coefficients)
    > #>               Estimate Std. Error t value Pr(>|t|)
    > #> (Intercept) 1.7228e-08 1.9908e-03    0.00        1
    > #> x1          5.0212e-01 1.9715e-03  254.70   <2e-16 ***
    > #> x2          6.0016e-01 1.9924e-03  301.23   <2e-16 ***
    > #> ---
    > #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

    > printCoefmat(out_summary$coefficients,
    > zap.ind = 1,
    > digits = 4)
    > #>             Estimate Std. Error t value Pr(>|t|)
    > #> (Intercept) 0.000000   0.001991     0.0        1
    > #> x1          0.502100   0.001971   254.7   <2e-16 ***
    > #> x2          0.600200   0.001992   301.2   <2e-16 ***
    > #> ---
    > #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
    > ```

    > With zap.ind = 1, the values in "Estimate" were correctly
    > zapped using digits = 4. However, by default, "Estimate"
    > and "Std. Error" are formatted together. Because the
    > standard errors are small, with digits = 4, zero's were added
    > to values in "Estimate", resulting in "0.502100" and
    > "0.600200", which are misleading because, if rounded to
    > the 6th decimal place, the values to be displayed should
    > be "0.502122" and "0.600162".

    > Is this behavior of printCoefmat() intended/normal?

Yes, this is "normal" in the sense that zapsmall() is used.
I'm not even sure anymore if I was always aware 1998 what exactly the
simple zapsmall() function is doing.
It does not do what you want here (and actually *typically* want
for formatting numbers for display, plotting, etc):
You "really want" here and in such situations

  zapOnlysmall <- function(x, dig) {
      x[abs(x) <= 10^-dig] <- 0
      x
  }

and I think I'd replace the use of zapsmall() inside
printCoefmat() with something like zapOnlysmall() above.

This will indeed nicely solve your problem.


    > Second, how can I use zap without this behavior?
    > In cases like the one above, I need to use zap such that
    > the intercept will not be displayed in scientific notation.
    > Disabling scientific notation cannot achieve the desired
    > goal.


    > I tried adding cs.ind = 1:

well, from the help page   ?printCoefmat  

cs.ind is really about the [ind]ices of [c]oefficient + [s]cale or [s]td.err
So, for lm() you should not have to set cs.ind but rather keep
it at it's smart default of cs.ind = 1:2 .


    > ```r
    > printCoefmat(out_summary$coefficients,
    > zap.ind = 1,
    > digits = 4,
    > cs.ind = 1)
    > #>             Estimate Std. Error t value Pr(>|t|)
    > #> (Intercept)   0.0000   0.001991     0.0        1
    > #> x1            0.5021   0.001971   254.7   <2e-16 ***
    > #> x2            0.6002   0.001992   301.2   <2e-16 ***
    > #> ---
    > #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
    > ```

    > However, this solution is not ideal because the numbers
    > of decimal places of "Estimate" and "Std. Error" are
    > different. How can I get the output like this one?


    > ```r
    > #>             Estimate Std. Error t value Pr(>|t|)
    > #> (Intercept)   0.0000   0.0020     0.0        1
    > #> x1            0.5021   0.0020   254.7   <2e-16 ***
    > #> x2            0.6002   0.0020   301.2   <2e-16 ***
    > ```

    > Thanks for your attention.

    > Regards,
    > Shu Fai Cheung

Thank you, Shu Fai,
for your careful and thoughtful report!

Best regards,
Martin


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Fri Jul  7 18:41:07 2023
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 7 Jul 2023 18:41:07 +0200
Subject: [R] printCoefmat() and zap.ind
In-Reply-To: <25768.14696.794296.3642@stat.math.ethz.ch>
References: <CAPVJd2UBbr--JaN20EG65aFt+yMSeeQ_pT2SfPKD+CFPW+seeQ@mail.gmail.com>
 <25768.14696.794296.3642@stat.math.ethz.ch>
Message-ID: <25768.16419.758276.323572@stat.math.ethz.ch>

>>>>> Martin Maechler 
>>>>>     on Fri, 7 Jul 2023 18:12:24 +0200 writes:

>>>>> Shu Fai Cheung 
>>>>>     on Thu, 6 Jul 2023 17:14:27 +0800 writes:

    >> Hi All,

    >> I would like to ask two questions about printCoefmat().

    > Good... this function, originally named print.coefmat(),
    > is 25 years old (in R) now:

    > --------------------------------------------------------------------
    > r1902 | maechler | 1998-08-14 19:19:05 +0200 (Fri, 14 Aug 1998) |
    > Changed paths:
    > M R-0-62-patches/CHANGES
    > M R-0-62-patches/src/library/base/R/anova.R
    > M R-0-62-patches/src/library/base/R/glm.R
    > M R-0-62-patches/src/library/base/R/lm.R
    > M R-0-62-patches/src/library/base/R/print.R

    > print.coefmat(.) about ok
    > --------------------------------------------------------------------

    > (yes, at the time, the 'stats' package did not exist yet ..)

    > so it may be a good time to look at it.


    >> First, I found a behavior of printCoefmat() that looks strange to me,
    >> but I am not sure whether this is an intended behavior:

    >> ``` r
    >> set.seed(5689417)
    >> n <- 10000
    >> x1 <- rnorm(n)
    >> x2 <- rnorm(n)
    >> y <- .5 * x1 + .6 * x2 + rnorm(n, -0.0002366, .2)
    >> dat <- data.frame(x1, x2, y)
    >> out <- lm(y ~ x1 + x2, dat)
    >> out_summary <- summary(out)
    >> printCoefmat(out_summary$coefficients)
    >> #>               Estimate Std. Error t value Pr(>|t|)
    >> #> (Intercept) 1.7228e-08 1.9908e-03    0.00        1
    >> #> x1          5.0212e-01 1.9715e-03  254.70   <2e-16 ***
    >> #> x2          6.0016e-01 1.9924e-03  301.23   <2e-16 ***
    >> #> ---
    >> #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

    >> printCoefmat(out_summary$coefficients,
    >> zap.ind = 1,
    >> digits = 4)
    >> #>             Estimate Std. Error t value Pr(>|t|)
    >> #> (Intercept) 0.000000   0.001991     0.0        1
    >> #> x1          0.502100   0.001971   254.7   <2e-16 ***
    >> #> x2          0.600200   0.001992   301.2   <2e-16 ***
    >> #> ---
    >> #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
    >> ```

    >> With zap.ind = 1, the values in "Estimate" were correctly
    >> zapped using digits = 4. However, by default, "Estimate"
    >> and "Std. Error" are formatted together. Because the
    >> standard errors are small, with digits = 4, zero's were added
    >> to values in "Estimate", resulting in "0.502100" and
    >> "0.600200", which are misleading because, if rounded to
    >> the 6th decimal place, the values to be displayed should
    >> be "0.502122" and "0.600162".

    >> Is this behavior of printCoefmat() intended/normal?

    > Yes, this is "normal" in the sense that zapsmall() is used.
    > I'm not even sure anymore if I was always aware 1998 what exactly the
    > simple zapsmall() function is doing.
    > It does not do what you want here (and actually *typically* want
    > for formatting numbers for display, plotting, etc):
    > You "really want" here and in such situations

    > zapOnlysmall <- function(x, dig) {
    >    x[abs(x) <= 10^-dig] <- 0
    >    x
    > }

    > and I think I'd replace the use of zapsmall() inside
    > printCoefmat() with something like zapOnlysmall() above.

    > This will indeed nicely solve your problem.

well..., now that I tried to change it "globally" in
printCoefmat() and I see how many of the lm() summary or anova()
outputs .. outputs that get slightly changed, and sometimes
quite unfavourably,

I think that the "hard" replacement of zapsmall() by
zapOnlysmall() {above}  is too drastic, ... even though it helps
in your case.

... back to the "drawing board" ...

Martin


    >> Second, how can I use zap without this behavior?
    >> In cases like the one above, I need to use zap such that
    >> the intercept will not be displayed in scientific notation.
    >> Disabling scientific notation cannot achieve the desired
    >> goal.


    >> I tried adding cs.ind = 1:

    > well, from the help page   ?printCoefmat  

    > cs.ind is really about the [ind]ices of [c]oefficient + [s]cale or [s]td.err
    > So, for lm() you should not have to set cs.ind but rather keep
    > it at it's smart default of cs.ind = 1:2 .


    >> ```r
    >> printCoefmat(out_summary$coefficients,
    >> zap.ind = 1,
    >> digits = 4,
    >> cs.ind = 1)
    >> #>             Estimate Std. Error t value Pr(>|t|)
    >> #> (Intercept)   0.0000   0.001991     0.0        1
    >> #> x1            0.5021   0.001971   254.7   <2e-16 ***
    >> #> x2            0.6002   0.001992   301.2   <2e-16 ***
    >> #> ---
    >> #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
    >> ```

    >> However, this solution is not ideal because the numbers
    >> of decimal places of "Estimate" and "Std. Error" are
    >> different. How can I get the output like this one?


    >> ```r
    >> #>             Estimate Std. Error t value Pr(>|t|)
    >> #> (Intercept)   0.0000   0.0020     0.0        1
    >> #> x1            0.5021   0.0020   254.7   <2e-16 ***
    >> #> x2            0.6002   0.0020   301.2   <2e-16 ***
    >> ```

    >> Thanks for your attention.

    >> Regards,
    >> Shu Fai Cheung

    > Thank you, Shu Fai,
    > for your careful and thoughtful report!

    > Best regards,
    > Martin

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    > https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    > and provide commented, minimal, self-contained, reproducible code.


From h|uc@@2 @end|ng |rom |@u@edu  Fri Jul  7 18:23:57 2023
From: h|uc@@2 @end|ng |rom |@u@edu (Heather Lucas)
Date: Fri, 7 Jul 2023 16:23:57 +0000
Subject: [R] depmixs4 standardError() issue
In-Reply-To: <20230625133640.7b6b073c@rolf-Latitude-E7470>
References: <BN0P221MB049361B6F118626AE9C0243BF84B9@BN0P221MB0493.NAMP221.PROD.OUTLOOK.COM>
 <20230625133640.7b6b073c@rolf-Latitude-E7470>
Message-ID: <BN0P221MB0493A41D64DDE97E14FFB90DF82DA@BN0P221MB0493.NAMP221.PROD.OUTLOOK.COM>

Hi Rolf,

Thank you so much for this very helpful response (and I apologize for the slow response to the response)!  I did have the opportunity to speak to Maarten Speekenbrink recently and he provided similar information, so I believe you are exactly right and your response helped provide some additional context.  Good to know that it is not just me but somewhat of an inherent difficulty with HMMs.

Thank you for letting me know about your eglhmm package!  I will keep in it in mind for any future projects in which there is only one predictor.

For now, I have switched from depmixS4 to a new package called hmmTBM.  Not so much because of the issue with the NaN CIs but because it allows random effects. This is extremely helpful for me since I am working with eye tracking data, which has fixations nested in trials and trials nested in participants.  While I am still learning, this package seems to be working well for me so far.

Thanks again for taking the time to respond to my question!

Best,
Heather


----------------------------------------------
Heather D. Lucas, PhD
(she/her pronouns)
Assistant Professor, Cognitive and Brain Sciences
Committee on Diversity and Outreach in Psychology, Member
Louisiana State University
210 Audubon Hall
Baton Rouge, LA 70803

From: Rolf Turner <rolfturner at posteo.net>
Date: Saturday, June 24, 2023 at 8:36 PM
To: Heather Lucas <hlucas2 at lsu.edu>
Cc: r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] depmixs4 standardError() issue
[You don't often get email from rolfturner at posteo.net. Learn why this is important at https://aka.ms/LearnAboutSenderIdentification ]

On Tue, 30 May 2023 17:43:31 +0000
Heather Lucas <hlucas2 at lsu.edu> wrote:

> Hello,
>
> I've been enjoying using the "Mixture and Hidden Markov Models in R"
> by Visser & Speekenbrink to learn how to apply these analyses to my
> own data using depmixS4.
>
> I currently have a fitted 4-state mixture model with three emissions
> variables and one binomial covariate (HS). I am trying to compute
> confidence intervals using the following code, where fmms4s is the
> model:
>
> fmms4Svov <- vcov(fmms4S)$vcov  #this line runs fine
> fmms4Sse <- standardError(fmms4S)  #this is where I get the error
> fmms4SCI <- confint(fmms4S)
>
> This worked fine before I added the covariate, but with the covariate
> I receive a warning message: In sqrt(diag(vc$vcov)) : NaNs produced.
> As a result, several of my parameters have NaNs as CIs.  In general,
> I get this error more frequently for more complex models (even when
> these models converge and show a better fit than simpler models) but
> I cannot find any information as to why this happens.  Getting rid of
> one of the emissions variables but leaving the covariate also seems
> to ?fix? the issue but it crops up quite often for me in general.
>
> Many thanks,

Greetings.  I hope, given the very belated nature of my response, that
you are still interested in this issue.  I have seen no answers to your
enquiry, so I am chipping in, despite my woeful lack of expertise.

Basically my guess would be that the NaNs result from  the covariance
matrix vc$vcov having negative diagonal entries --- negative variance
estimates.  I believe that vc$vcov would have been produced, at some
level, by inverting the negative of the Hessian matrix of the parameter
estimates.  In my experience, the Hessian matrices that arise in the
hidden Markov model context can be, shall we say, a bit delicate.
(Downright flaky, not to put too fine a point on it.) It may be the
case that the Hessian is not negative definite.

Theoretically the Hessian matrix will be negative definite at the
maximum (or at a local maximum) of the log likelihood of the model.
Convergence issues may be such that, even though the algorithm is judged
to have converged, the parameter estimates are sufficiently far from
the maximum point so that the Hessian will have some positive
eigenvalues (equivalently its negative will have some negative
eigenvalues) leading to the negative variance estimates.  If you could
look at it, you would probably find that the gradient vector (which
should theoretically be zero at the maximum) has some unacceptably
large entries.

The numerical analysis considerations that arise in maximising the log
likelihood of a hidden Markov model are fraught with difficulties and
subtleties.  The more complex the model, the more likely it is that
these difficulties will rear their ugly little heads.  When they do,
it seems to me, there is not much that an ordinary mortal can do about
it.

A couple of other comments.

(a) In the past I have communicated a bit with the maintainer of the
depmixS4 package (Ingmar Visser <i.visser at uva.nl>) and found him to be
reasonably helpful and responsive.  You might try contacting him
directly and see if he has any useful suggestions.  You would of course
have to make your data available to him, in order for him to get
anywhere.

(b) You might like to try experimenting with my package "eglhmm"
("extended generalised linear hidden Markov models").  This package has
considerable overlap with depmixS4, but has a very different syntax and
a different set of bells an whistles.  However I note that in your
enquiry you say that you have "three emission variables" so it appears
that you are dealing with a multivariate problem.  My package does not
do multivariate stuff, except in one restricted (and rather r?cherch?)
context so my package probably won't be of any real use to you.

Also my package does not do mixtures as such.

If you *should* be interested in trying my package, you can get it from
my web page (https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.stat.auckland.ac.nz%2F~rolf&data=05%7C01%7Chlucas2%40lsu.edu%7C992a7466238a4739cfef08db751ca58a%7C2d4dad3f50ae47d983a09ae2b1f466f8%7C0%7C0%7C638232538139907909%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=zkIxJHl75Xuw4p1wPBiDIrX94IX%2F1dASRxrU3l%2FiNOQ%3D&reserved=0; scroll to the
bottom and click on "Eglhmm").  The source package and a Windoze binary
are available.  I have not yet submitted my package to CRAN, although I
hope to do so in the fairly (???) near future.

My package may well have a fair few bugs lurking in its innards.  (But
then, don't they all?)  If you do experiment with eglhmm, please let me
know about any bugs that you encounter.

I hope this of some help and interest.

cheers,

Rolf Turner

--
Honorary Research Fellow
Department of Statistics
University of Auckland
Stats. Dep't. (secretaries) phone:
         +64-9-373-7599 ext. 89622
Home phone: +64-9-480-4619

	[[alternative HTML version deleted]]


From r@e@crump @end|ng |rom w@rw|ck@@c@uk  Sat Jul  8 13:28:31 2023
From: r@e@crump @end|ng |rom w@rw|ck@@c@uk (Ron Crump)
Date: Sat, 08 Jul 2023 12:28:31 +0100
Subject: [R] Getting an error calling MASS::boxcox in a function
Message-ID: <08FA83E2-1D1B-4D38-B506-7AF5CCA905EF@warwick.ac.uk>

Hi,

Firstly, apologies as I have posted this on community.rstudio.com too. 

I want to optimise a Box-Cox transformation on columns of a matrix (ie, a unique lambda for each column). So I wrote a function that includes the call to MASS::boxcox in order that it can be applied to each column easily. Except that I'm getting an error when calling the function. If I just extract a column of the matrix and run the code not in the function, it works. If I call the function either with an extracted column (ie dd1 in the reprex below) or in a call to apply I get an error (see the reprex below).

I'm sure I'm doing something silly, but I can't see what it is. Any help appreciated.

library(MASS)

# Find optimised Lambda for Boc-Cox transformation
BoxCoxLambda <- function(z){
    b <- boxcox(lm(z+1 ~ 1), lambda = seq(-5, 5, length.out = 61), plotit = FALSE)
    b$x[which.max(b$y)]    # best lambda
}

mrow <- 500
mcol <- 2
set.seed(12345)
dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol = mcol)

# Try it not using the BoxCoxLambda function:
dd1 <- dd[,1] # 1st column of dd
bb <- boxcox(lm(dd1+1 ~ 1), lambda = seq(-5, 5, length.out = 101), plotit = FALSE)
print(paste0("1st column's lambda is ", bb$x[which.max(bb$y)]))
#> [1] "1st column's lambda is 0.2"

# Calculate lambda for each column of dd
lambdas <- apply(dd, 2, BoxCoxLambda, simplify = TRUE)
#> Error in eval(predvars, data, env): object 'z' not found

Created on 2023-07-08 with reprex v2.0.2

Thanks for your time and help.

Ron
	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jul  8 17:28:21 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 8 Jul 2023 08:28:21 -0700
Subject: [R] Getting an error calling MASS::boxcox in a function
In-Reply-To: <08FA83E2-1D1B-4D38-B506-7AF5CCA905EF@warwick.ac.uk>
References: <08FA83E2-1D1B-4D38-B506-7AF5CCA905EF@warwick.ac.uk>
Message-ID: <CAGxFJbS+gdxL+2NDam6n9RXn6NaM-2ZOQLgbkzissmftOBiDqw@mail.gmail.com>

Try this for your function:

BoxCoxLambda <- function(z){
   y <- z
   b <- boxcox(y + 1 ~ 1,lambda = seq(-5, 5, length.out = 61), plotit =
FALSE)
   b$x[which.max(b$y)]    # best lambda
}

***I think*** (corrections and clarification strongly welcomed!) that `~`
(the formula function) is looking for 'z' in the GlobalEnv, the caller of
apply(), and not finding it. It finds 'y' here explicitly in the
BoxCoxLambda environment.

Cheers,
Bert



On Sat, Jul 8, 2023 at 4:28?AM Ron Crump via R-help <r-help at r-project.org>
wrote:

> Hi,
>
> Firstly, apologies as I have posted this on community.rstudio.com too.
>
> I want to optimise a Box-Cox transformation on columns of a matrix (ie, a
> unique lambda for each column). So I wrote a function that includes the
> call to MASS::boxcox in order that it can be applied to each column easily.
> Except that I'm getting an error when calling the function. If I just
> extract a column of the matrix and run the code not in the function, it
> works. If I call the function either with an extracted column (ie dd1 in
> the reprex below) or in a call to apply I get an error (see the reprex
> below).
>
> I'm sure I'm doing something silly, but I can't see what it is. Any help
> appreciated.
>
> library(MASS)
>
> # Find optimised Lambda for Boc-Cox transformation
> BoxCoxLambda <- function(z){
>     b <- boxcox(lm(z+1 ~ 1), lambda = seq(-5, 5, length.out = 61), plotit
> = FALSE)
>     b$x[which.max(b$y)]    # best lambda
> }
>
> mrow <- 500
> mcol <- 2
> set.seed(12345)
> dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol =
> mcol)
>
> # Try it not using the BoxCoxLambda function:
> dd1 <- dd[,1] # 1st column of dd
> bb <- boxcox(lm(dd1+1 ~ 1), lambda = seq(-5, 5, length.out = 101), plotit
> = FALSE)
> print(paste0("1st column's lambda is ", bb$x[which.max(bb$y)]))
> #> [1] "1st column's lambda is 0.2"
>
> # Calculate lambda for each column of dd
> lambdas <- apply(dd, 2, BoxCoxLambda, simplify = TRUE)
> #> Error in eval(predvars, data, env): object 'z' not found
>
> Created on 2023-07-08 with reprex v2.0.2
>
> Thanks for your time and help.
>
> Ron
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jul  8 18:47:12 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 8 Jul 2023 09:47:12 -0700
Subject: [R] Getting an error calling MASS::boxcox in a function
In-Reply-To: <CAGxFJbS+gdxL+2NDam6n9RXn6NaM-2ZOQLgbkzissmftOBiDqw@mail.gmail.com>
References: <08FA83E2-1D1B-4D38-B506-7AF5CCA905EF@warwick.ac.uk>
 <CAGxFJbS+gdxL+2NDam6n9RXn6NaM-2ZOQLgbkzissmftOBiDqw@mail.gmail.com>
Message-ID: <CAGxFJbRaC89whn011w68jOzxag2R26DRpVLBAJ7guOjTKVk4bg@mail.gmail.com>

No, I'm afraid I'm wrong. Something went wrong with my R session and gave
me incorrect answers. After restarting, I continued to get the same error
as you did with my supposed "fix." So just ignore what I said and sorry for
the noise.

-- Bert

On Sat, Jul 8, 2023 at 8:28?AM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> Try this for your function:
>
> BoxCoxLambda <- function(z){
>    y <- z
>    b <- boxcox(y + 1 ~ 1,lambda = seq(-5, 5, length.out = 61), plotit =
> FALSE)
>    b$x[which.max(b$y)]    # best lambda
> }
>
> ***I think*** (corrections and clarification strongly welcomed!) that `~`
> (the formula function) is looking for 'z' in the GlobalEnv, the caller of
> apply(), and not finding it. It finds 'y' here explicitly in the
> BoxCoxLambda environment.
>
> Cheers,
> Bert
>
>
>
> On Sat, Jul 8, 2023 at 4:28?AM Ron Crump via R-help <r-help at r-project.org>
> wrote:
>
>> Hi,
>>
>> Firstly, apologies as I have posted this on community.rstudio.com too.
>>
>> I want to optimise a Box-Cox transformation on columns of a matrix (ie, a
>> unique lambda for each column). So I wrote a function that includes the
>> call to MASS::boxcox in order that it can be applied to each column easily.
>> Except that I'm getting an error when calling the function. If I just
>> extract a column of the matrix and run the code not in the function, it
>> works. If I call the function either with an extracted column (ie dd1 in
>> the reprex below) or in a call to apply I get an error (see the reprex
>> below).
>>
>> I'm sure I'm doing something silly, but I can't see what it is. Any help
>> appreciated.
>>
>> library(MASS)
>>
>> # Find optimised Lambda for Boc-Cox transformation
>> BoxCoxLambda <- function(z){
>>     b <- boxcox(lm(z+1 ~ 1), lambda = seq(-5, 5, length.out = 61), plotit
>> = FALSE)
>>     b$x[which.max(b$y)]    # best lambda
>> }
>>
>> mrow <- 500
>> mcol <- 2
>> set.seed(12345)
>> dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol =
>> mcol)
>>
>> # Try it not using the BoxCoxLambda function:
>> dd1 <- dd[,1] # 1st column of dd
>> bb <- boxcox(lm(dd1+1 ~ 1), lambda = seq(-5, 5, length.out = 101), plotit
>> = FALSE)
>> print(paste0("1st column's lambda is ", bb$x[which.max(bb$y)]))
>> #> [1] "1st column's lambda is 0.2"
>>
>> # Calculate lambda for each column of dd
>> lambdas <- apply(dd, 2, BoxCoxLambda, simplify = TRUE)
>> #> Error in eval(predvars, data, env): object 'z' not found
>>
>> Created on 2023-07-08 with reprex v2.0.2
>>
>> Thanks for your time and help.
>>
>> Ron
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From j|ox @end|ng |rom mcm@@ter@c@  Sat Jul  8 20:25:49 2023
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Sat, 8 Jul 2023 14:25:49 -0400
Subject: [R] Getting an error calling MASS::boxcox in a function
In-Reply-To: <CAGxFJbRaC89whn011w68jOzxag2R26DRpVLBAJ7guOjTKVk4bg@mail.gmail.com>
References: <08FA83E2-1D1B-4D38-B506-7AF5CCA905EF@warwick.ac.uk>
 <CAGxFJbS+gdxL+2NDam6n9RXn6NaM-2ZOQLgbkzissmftOBiDqw@mail.gmail.com>
 <CAGxFJbRaC89whn011w68jOzxag2R26DRpVLBAJ7guOjTKVk4bg@mail.gmail.com>
Message-ID: <56188272-3d6a-205f-eeb3-ab38ea503b2c@mcmaster.ca>

Dear Ron and Bert,

First (and without considering why one would want to do this, e.g., 
adding a start of 1 to the data), the following works for me:

------ snip ------

 > library(MASS)

 > BoxCoxLambda <- function(z){
+   b <- boxcox(z + 1 ~ 1,
+               lambda = seq(-5, 5, length.out = 101),
+               plotit = FALSE)
+   b$x[which.max(b$y)]
+ }

 > mrow <- 500
 > mcol <- 2
 > set.seed(12345)
 > dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol =
+                mcol)

 > dd1 <- dd[, 1] # 1st column of dd
 > res <- boxcox(lm(dd1 + 1 ~ 1), lambda = seq(-5, 5, length.out = 101), 
plotit
+              = FALSE)
 > res$x[which.max(res$y)]
[1] 0.2

 > apply(dd, 2, BoxCoxLambda, simplify = TRUE)
[1] 0.2 0.2

------ snip ------

One could also use the powerTransform() function in the car package, 
which in this context transforms towards *multi*normality:

------ snip ------

 > library(car)
Loading required package: carData

 > powerTransform(dd + 1)
Estimated transformation parameters
        Y1        Y2
0.1740200 0.2089925

I hope this helps,
  John

-- 
John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
web: https://www.john-fox.ca/

On 2023-07-08 12:47 p.m., Bert Gunter wrote:
> Caution: This email may have originated from outside the organization. Please exercise additional caution with any links and attachments.
> 
> 
> No, I'm afraid I'm wrong. Something went wrong with my R session and gave
> me incorrect answers. After restarting, I continued to get the same error
> as you did with my supposed "fix." So just ignore what I said and sorry for
> the noise.
> 
> -- Bert
> 
> On Sat, Jul 8, 2023 at 8:28?AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
>> Try this for your function:
>>
>> BoxCoxLambda <- function(z){
>>     y <- z
>>     b <- boxcox(y + 1 ~ 1,lambda = seq(-5, 5, length.out = 61), plotit =
>> FALSE)
>>     b$x[which.max(b$y)]    # best lambda
>> }
>>
>> ***I think*** (corrections and clarification strongly welcomed!) that `~`
>> (the formula function) is looking for 'z' in the GlobalEnv, the caller of
>> apply(), and not finding it. It finds 'y' here explicitly in the
>> BoxCoxLambda environment.
>>
>> Cheers,
>> Bert
>>
>>
>>
>> On Sat, Jul 8, 2023 at 4:28?AM Ron Crump via R-help <r-help at r-project.org>
>> wrote:
>>
>>> Hi,
>>>
>>> Firstly, apologies as I have posted this on community.rstudio.com too.
>>>
>>> I want to optimise a Box-Cox transformation on columns of a matrix (ie, a
>>> unique lambda for each column). So I wrote a function that includes the
>>> call to MASS::boxcox in order that it can be applied to each column easily.
>>> Except that I'm getting an error when calling the function. If I just
>>> extract a column of the matrix and run the code not in the function, it
>>> works. If I call the function either with an extracted column (ie dd1 in
>>> the reprex below) or in a call to apply I get an error (see the reprex
>>> below).
>>>
>>> I'm sure I'm doing something silly, but I can't see what it is. Any help
>>> appreciated.
>>>
>>> library(MASS)
>>>
>>> # Find optimised Lambda for Boc-Cox transformation
>>> BoxCoxLambda <- function(z){
>>>      b <- boxcox(lm(z+1 ~ 1), lambda = seq(-5, 5, length.out = 61), plotit
>>> = FALSE)
>>>      b$x[which.max(b$y)]    # best lambda
>>> }
>>>
>>> mrow <- 500
>>> mcol <- 2
>>> set.seed(12345)
>>> dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol =
>>> mcol)
>>>
>>> # Try it not using the BoxCoxLambda function:
>>> dd1 <- dd[,1] # 1st column of dd
>>> bb <- boxcox(lm(dd1+1 ~ 1), lambda = seq(-5, 5, length.out = 101), plotit
>>> = FALSE)
>>> print(paste0("1st column's lambda is ", bb$x[which.max(bb$y)]))
>>> #> [1] "1st column's lambda is 0.2"
>>>
>>> # Calculate lambda for each column of dd
>>> lambdas <- apply(dd, 2, BoxCoxLambda, simplify = TRUE)
>>> #> Error in eval(predvars, data, env): object 'z' not found
>>>
>>> Created on 2023-07-08 with reprex v2.0.2
>>>
>>> Thanks for your time and help.
>>>
>>> Ron
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
> 
>          [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jul  8 21:42:05 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 8 Jul 2023 12:42:05 -0700
Subject: [R] Getting an error calling MASS::boxcox in a function
In-Reply-To: <56188272-3d6a-205f-eeb3-ab38ea503b2c@mcmaster.ca>
References: <08FA83E2-1D1B-4D38-B506-7AF5CCA905EF@warwick.ac.uk>
 <CAGxFJbS+gdxL+2NDam6n9RXn6NaM-2ZOQLgbkzissmftOBiDqw@mail.gmail.com>
 <CAGxFJbRaC89whn011w68jOzxag2R26DRpVLBAJ7guOjTKVk4bg@mail.gmail.com>
 <56188272-3d6a-205f-eeb3-ab38ea503b2c@mcmaster.ca>
Message-ID: <CAGxFJbReEb_f0+gzDOTfWOiRYgGizdVgzX5ZbKkguthE7iqR6g@mail.gmail.com>

Thanks John.

?boxcox says:

*************************
Arguments

object

a formula or fitted model object. Currently only lm and aov objects are handled.
*************************
I read that as saying that

boxcox(lm(z+1 ~ 1),...)

should run without error. But it didn't. And perhaps here's why:
BoxCoxLambda <- function(z){
   b <- MASS:::boxcox.lm(lm(z+1 ~ 1), lambda = seq(-5, 5, length.out =
61), plotit = FALSE)
   b$x[which.max(b$y)]    # best lambda
}

> lambdas <- apply(dd,2 , BoxCoxLambda)
Error in NextMethod() : 'NextMethod' called from an anonymous function

and, indeed, ?UseMethod says:
"NextMethod should not be called except in methods called by UseMethod
or from internal generics (see InternalGenerics). In particular it
will not work inside anonymous calling functions (e.g.,
get("print.ts")(AirPassengers))."

****BUT ****
BoxCoxLambda <- function(z){
  b <- MASS:::boxcox(z+1 ~ 1, lambda = seq(-5, 5, length.out = 61),
plotit = FALSE)
  b$x[which.max(b$y)]    # best lambda
}

> lambdas <- apply(dd,2 , BoxCoxLambda)
> lambdas
[1] 0.1666667 0.1666667

The identical lambdas do not seem right to me; nor do I understand why
boxcox.lm apparently throws the error while boxcox.formula does not
(it also calls NextMethod()) So I would welcome clarification to clear
my clogged (cerebral) sinuses. :-)


Best,
Bert


On Sat, Jul 8, 2023 at 11:25?AM John Fox <jfox at mcmaster.ca> wrote:
>
> Dear Ron and Bert,
>
> First (and without considering why one would want to do this, e.g.,
> adding a start of 1 to the data), the following works for me:
>
> ------ snip ------
>
>  > library(MASS)
>
>  > BoxCoxLambda <- function(z){
> +   b <- boxcox(z + 1 ~ 1,
> +               lambda = seq(-5, 5, length.out = 101),
> +               plotit = FALSE)
> +   b$x[which.max(b$y)]
> + }
>
>  > mrow <- 500
>  > mcol <- 2
>  > set.seed(12345)
>  > dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol =
> +                mcol)
>
>  > dd1 <- dd[, 1] # 1st column of dd
>  > res <- boxcox(lm(dd1 + 1 ~ 1), lambda = seq(-5, 5, length.out = 101),
> plotit
> +              = FALSE)
>  > res$x[which.max(res$y)]
> [1] 0.2
>
>  > apply(dd, 2, BoxCoxLambda, simplify = TRUE)
> [1] 0.2 0.2
>
> ------ snip ------
>
> One could also use the powerTransform() function in the car package,
> which in this context transforms towards *multi*normality:
>
> ------ snip ------
>
>  > library(car)
> Loading required package: carData
>
>  > powerTransform(dd + 1)
> Estimated transformation parameters
>         Y1        Y2
> 0.1740200 0.2089925
>
> I hope this helps,
>   John
>
> --
> John Fox, Professor Emeritus
> McMaster University
> Hamilton, Ontario, Canada
> web: https://www.john-fox.ca/
>
> On 2023-07-08 12:47 p.m., Bert Gunter wrote:
> > Caution: This email may have originated from outside the organization. Please exercise additional caution with any links and attachments.
> >
> >
> > No, I'm afraid I'm wrong. Something went wrong with my R session and gave
> > me incorrect answers. After restarting, I continued to get the same error
> > as you did with my supposed "fix." So just ignore what I said and sorry for
> > the noise.
> >
> > -- Bert
> >
> > On Sat, Jul 8, 2023 at 8:28?AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >
> >> Try this for your function:
> >>
> >> BoxCoxLambda <- function(z){
> >>     y <- z
> >>     b <- boxcox(y + 1 ~ 1,lambda = seq(-5, 5, length.out = 61), plotit =
> >> FALSE)
> >>     b$x[which.max(b$y)]    # best lambda
> >> }
> >>
> >> ***I think*** (corrections and clarification strongly welcomed!) that `~`
> >> (the formula function) is looking for 'z' in the GlobalEnv, the caller of
> >> apply(), and not finding it. It finds 'y' here explicitly in the
> >> BoxCoxLambda environment.
> >>
> >> Cheers,
> >> Bert
> >>
> >>
> >>
> >> On Sat, Jul 8, 2023 at 4:28?AM Ron Crump via R-help <r-help at r-project.org>
> >> wrote:
> >>
> >>> Hi,
> >>>
> >>> Firstly, apologies as I have posted this on community.rstudio.com too.
> >>>
> >>> I want to optimise a Box-Cox transformation on columns of a matrix (ie, a
> >>> unique lambda for each column). So I wrote a function that includes the
> >>> call to MASS::boxcox in order that it can be applied to each column easily.
> >>> Except that I'm getting an error when calling the function. If I just
> >>> extract a column of the matrix and run the code not in the function, it
> >>> works. If I call the function either with an extracted column (ie dd1 in
> >>> the reprex below) or in a call to apply I get an error (see the reprex
> >>> below).
> >>>
> >>> I'm sure I'm doing something silly, but I can't see what it is. Any help
> >>> appreciated.
> >>>
> >>> library(MASS)
> >>>
> >>> # Find optimised Lambda for Boc-Cox transformation
> >>> BoxCoxLambda <- function(z){
> >>>      b <- boxcox(lm(z+1 ~ 1), lambda = seq(-5, 5, length.out = 61), plotit
> >>> = FALSE)
> >>>      b$x[which.max(b$y)]    # best lambda
> >>> }
> >>>
> >>> mrow <- 500
> >>> mcol <- 2
> >>> set.seed(12345)
> >>> dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol =
> >>> mcol)
> >>>
> >>> # Try it not using the BoxCoxLambda function:
> >>> dd1 <- dd[,1] # 1st column of dd
> >>> bb <- boxcox(lm(dd1+1 ~ 1), lambda = seq(-5, 5, length.out = 101), plotit
> >>> = FALSE)
> >>> print(paste0("1st column's lambda is ", bb$x[which.max(bb$y)]))
> >>> #> [1] "1st column's lambda is 0.2"
> >>>
> >>> # Calculate lambda for each column of dd
> >>> lambdas <- apply(dd, 2, BoxCoxLambda, simplify = TRUE)
> >>> #> Error in eval(predvars, data, env): object 'z' not found
> >>>
> >>> Created on 2023-07-08 with reprex v2.0.2
> >>>
> >>> Thanks for your time and help.
> >>>
> >>> Ron
> >>>          [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>>
> >>
> >
> >          [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>


From j|ox @end|ng |rom mcm@@ter@c@  Sat Jul  8 23:01:27 2023
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Sat, 8 Jul 2023 17:01:27 -0400
Subject: [R] Getting an error calling MASS::boxcox in a function
In-Reply-To: <CAGxFJbReEb_f0+gzDOTfWOiRYgGizdVgzX5ZbKkguthE7iqR6g@mail.gmail.com>
References: <08FA83E2-1D1B-4D38-B506-7AF5CCA905EF@warwick.ac.uk>
 <CAGxFJbS+gdxL+2NDam6n9RXn6NaM-2ZOQLgbkzissmftOBiDqw@mail.gmail.com>
 <CAGxFJbRaC89whn011w68jOzxag2R26DRpVLBAJ7guOjTKVk4bg@mail.gmail.com>
 <56188272-3d6a-205f-eeb3-ab38ea503b2c@mcmaster.ca>
 <CAGxFJbReEb_f0+gzDOTfWOiRYgGizdVgzX5ZbKkguthE7iqR6g@mail.gmail.com>
Message-ID: <b1559643-c0cf-7b89-382a-cb184e567669@mcmaster.ca>

Hi Bert,

On 2023-07-08 3:42 p.m., Bert Gunter wrote:
> Caution: This email may have originated from outside the organization. Please exercise additional caution with any links and attachments.
> 
> 
> Thanks John.
> 
> ?boxcox says:
> 
> *************************
> Arguments
> 
> object
> 
> a formula or fitted model object. Currently only lm and aov objects are handled.
> *************************
> I read that as saying that
> 
> boxcox(lm(z+1 ~ 1),...)
> 
> should run without error. But it didn't. And perhaps here's why:
> BoxCoxLambda <- function(z){
>     b <- MASS:::boxcox.lm(lm(z+1 ~ 1), lambda = seq(-5, 5, length.out =
> 61), plotit = FALSE)
>     b$x[which.max(b$y)]    # best lambda
> }
> 
>> lambdas <- apply(dd,2 , BoxCoxLambda)
> Error in NextMethod() : 'NextMethod' called from an anonymous function
> 
> and, indeed, ?UseMethod says:
> "NextMethod should not be called except in methods called by UseMethod
> or from internal generics (see InternalGenerics). In particular it
> will not work inside anonymous calling functions (e.g.,
> get("print.ts")(AirPassengers))."
> 
> ****BUT ****
> BoxCoxLambda <- function(z){
>    b <- MASS:::boxcox(z+1 ~ 1, lambda = seq(-5, 5, length.out = 61),
> plotit = FALSE)
>    b$x[which.max(b$y)]    # best lambda
> }
> 
>> lambdas <- apply(dd,2 , BoxCoxLambda)
>> lambdas
> [1] 0.1666667 0.1666667

As it turns out, it's the update() step in boxcox.lm() that fails, and 
the update takes place because $y is missing from the lm object, so the 
following works:

BoxCoxLambda <- function(z){
     b <- boxcox(lm(z + 1 ~ 1, y=TRUE),
                 lambda = seq(-5, 5, length.out = 101),
                 plotit = FALSE)
     b$x[which.max(b$y)]
}

> 
> The identical lambdas do not seem right to me; 

I think that's just an accident of the example (using the BoxCoxLambda() 
above):

 > apply(dd, 2, BoxCoxLambda, simplify = TRUE)
[1] 0.2 0.2

 > dd[, 2]  <- dd[, 2]^3
 > apply(dd, 2, BoxCoxLambda, simplify = TRUE)
[1] 0.2 0.1

Best,
  John

> nor do I understand why
> boxcox.lm apparently throws the error while boxcox.formula does not
> (it also calls NextMethod()) So I would welcome clarification to clear
> my clogged (cerebral) sinuses. :-)
> 
> 
> Best,
> Bert
> 
> 
> On Sat, Jul 8, 2023 at 11:25?AM John Fox <jfox at mcmaster.ca> wrote:
>>
>> Dear Ron and Bert,
>>
>> First (and without considering why one would want to do this, e.g.,
>> adding a start of 1 to the data), the following works for me:
>>
>> ------ snip ------
>>
>>   > library(MASS)
>>
>>   > BoxCoxLambda <- function(z){
>> +   b <- boxcox(z + 1 ~ 1,
>> +               lambda = seq(-5, 5, length.out = 101),
>> +               plotit = FALSE)
>> +   b$x[which.max(b$y)]
>> + }
>>
>>   > mrow <- 500
>>   > mcol <- 2
>>   > set.seed(12345)
>>   > dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol =
>> +                mcol)
>>
>>   > dd1 <- dd[, 1] # 1st column of dd
>>   > res <- boxcox(lm(dd1 + 1 ~ 1), lambda = seq(-5, 5, length.out = 101),
>> plotit
>> +              = FALSE)
>>   > res$x[which.max(res$y)]
>> [1] 0.2
>>
>>   > apply(dd, 2, BoxCoxLambda, simplify = TRUE)
>> [1] 0.2 0.2
>>
>> ------ snip ------
>>
>> One could also use the powerTransform() function in the car package,
>> which in this context transforms towards *multi*normality:
>>
>> ------ snip ------
>>
>>   > library(car)
>> Loading required package: carData
>>
>>   > powerTransform(dd + 1)
>> Estimated transformation parameters
>>          Y1        Y2
>> 0.1740200 0.2089925
>>
>> I hope this helps,
>>    John
>>
>> --
>> John Fox, Professor Emeritus
>> McMaster University
>> Hamilton, Ontario, Canada
>> web: https://www.john-fox.ca/
>>
>> On 2023-07-08 12:47 p.m., Bert Gunter wrote:
>>> Caution: This email may have originated from outside the organization. Please exercise additional caution with any links and attachments.
>>>
>>>
>>> No, I'm afraid I'm wrong. Something went wrong with my R session and gave
>>> me incorrect answers. After restarting, I continued to get the same error
>>> as you did with my supposed "fix." So just ignore what I said and sorry for
>>> the noise.
>>>
>>> -- Bert
>>>
>>> On Sat, Jul 8, 2023 at 8:28?AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>>
>>>> Try this for your function:
>>>>
>>>> BoxCoxLambda <- function(z){
>>>>      y <- z
>>>>      b <- boxcox(y + 1 ~ 1,lambda = seq(-5, 5, length.out = 61), plotit =
>>>> FALSE)
>>>>      b$x[which.max(b$y)]    # best lambda
>>>> }
>>>>
>>>> ***I think*** (corrections and clarification strongly welcomed!) that `~`
>>>> (the formula function) is looking for 'z' in the GlobalEnv, the caller of
>>>> apply(), and not finding it. It finds 'y' here explicitly in the
>>>> BoxCoxLambda environment.
>>>>
>>>> Cheers,
>>>> Bert
>>>>
>>>>
>>>>
>>>> On Sat, Jul 8, 2023 at 4:28?AM Ron Crump via R-help <r-help at r-project.org>
>>>> wrote:
>>>>
>>>>> Hi,
>>>>>
>>>>> Firstly, apologies as I have posted this on community.rstudio.com too.
>>>>>
>>>>> I want to optimise a Box-Cox transformation on columns of a matrix (ie, a
>>>>> unique lambda for each column). So I wrote a function that includes the
>>>>> call to MASS::boxcox in order that it can be applied to each column easily.
>>>>> Except that I'm getting an error when calling the function. If I just
>>>>> extract a column of the matrix and run the code not in the function, it
>>>>> works. If I call the function either with an extracted column (ie dd1 in
>>>>> the reprex below) or in a call to apply I get an error (see the reprex
>>>>> below).
>>>>>
>>>>> I'm sure I'm doing something silly, but I can't see what it is. Any help
>>>>> appreciated.
>>>>>
>>>>> library(MASS)
>>>>>
>>>>> # Find optimised Lambda for Boc-Cox transformation
>>>>> BoxCoxLambda <- function(z){
>>>>>       b <- boxcox(lm(z+1 ~ 1), lambda = seq(-5, 5, length.out = 61), plotit
>>>>> = FALSE)
>>>>>       b$x[which.max(b$y)]    # best lambda
>>>>> }
>>>>>
>>>>> mrow <- 500
>>>>> mcol <- 2
>>>>> set.seed(12345)
>>>>> dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol =
>>>>> mcol)
>>>>>
>>>>> # Try it not using the BoxCoxLambda function:
>>>>> dd1 <- dd[,1] # 1st column of dd
>>>>> bb <- boxcox(lm(dd1+1 ~ 1), lambda = seq(-5, 5, length.out = 101), plotit
>>>>> = FALSE)
>>>>> print(paste0("1st column's lambda is ", bb$x[which.max(bb$y)]))
>>>>> #> [1] "1st column's lambda is 0.2"
>>>>>
>>>>> # Calculate lambda for each column of dd
>>>>> lambdas <- apply(dd, 2, BoxCoxLambda, simplify = TRUE)
>>>>> #> Error in eval(predvars, data, env): object 'z' not found
>>>>>
>>>>> Created on 2023-07-08 with reprex v2.0.2
>>>>>
>>>>> Thanks for your time and help.
>>>>>
>>>>> Ron
>>>>>           [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>
>>>
>>>           [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jul  8 23:08:07 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 8 Jul 2023 14:08:07 -0700
Subject: [R] Getting an error calling MASS::boxcox in a function
In-Reply-To: <b1559643-c0cf-7b89-382a-cb184e567669@mcmaster.ca>
References: <08FA83E2-1D1B-4D38-B506-7AF5CCA905EF@warwick.ac.uk>
 <CAGxFJbS+gdxL+2NDam6n9RXn6NaM-2ZOQLgbkzissmftOBiDqw@mail.gmail.com>
 <CAGxFJbRaC89whn011w68jOzxag2R26DRpVLBAJ7guOjTKVk4bg@mail.gmail.com>
 <56188272-3d6a-205f-eeb3-ab38ea503b2c@mcmaster.ca>
 <CAGxFJbReEb_f0+gzDOTfWOiRYgGizdVgzX5ZbKkguthE7iqR6g@mail.gmail.com>
 <b1559643-c0cf-7b89-382a-cb184e567669@mcmaster.ca>
Message-ID: <CAGxFJbRXL0KaUisgVD+BiLjhpOn3+MaV045kX1=XwG4WQm9Lxw@mail.gmail.com>

Aha. Many thanks, John. Never would have gotten there on my own.

-- Bert

On Sat, Jul 8, 2023 at 2:01?PM John Fox <jfox at mcmaster.ca> wrote:
>
> Hi Bert,
>
> On 2023-07-08 3:42 p.m., Bert Gunter wrote:
> > Caution: This email may have originated from outside the organization. Please exercise additional caution with any links and attachments.
> >
> >
> > Thanks John.
> >
> > ?boxcox says:
> >
> > *************************
> > Arguments
> >
> > object
> >
> > a formula or fitted model object. Currently only lm and aov objects are handled.
> > *************************
> > I read that as saying that
> >
> > boxcox(lm(z+1 ~ 1),...)
> >
> > should run without error. But it didn't. And perhaps here's why:
> > BoxCoxLambda <- function(z){
> >     b <- MASS:::boxcox.lm(lm(z+1 ~ 1), lambda = seq(-5, 5, length.out =
> > 61), plotit = FALSE)
> >     b$x[which.max(b$y)]    # best lambda
> > }
> >
> >> lambdas <- apply(dd,2 , BoxCoxLambda)
> > Error in NextMethod() : 'NextMethod' called from an anonymous function
> >
> > and, indeed, ?UseMethod says:
> > "NextMethod should not be called except in methods called by UseMethod
> > or from internal generics (see InternalGenerics). In particular it
> > will not work inside anonymous calling functions (e.g.,
> > get("print.ts")(AirPassengers))."
> >
> > ****BUT ****
> > BoxCoxLambda <- function(z){
> >    b <- MASS:::boxcox(z+1 ~ 1, lambda = seq(-5, 5, length.out = 61),
> > plotit = FALSE)
> >    b$x[which.max(b$y)]    # best lambda
> > }
> >
> >> lambdas <- apply(dd,2 , BoxCoxLambda)
> >> lambdas
> > [1] 0.1666667 0.1666667
>
> As it turns out, it's the update() step in boxcox.lm() that fails, and
> the update takes place because $y is missing from the lm object, so the
> following works:
>
> BoxCoxLambda <- function(z){
>      b <- boxcox(lm(z + 1 ~ 1, y=TRUE),
>                  lambda = seq(-5, 5, length.out = 101),
>                  plotit = FALSE)
>      b$x[which.max(b$y)]
> }
>
> >
> > The identical lambdas do not seem right to me;
>
> I think that's just an accident of the example (using the BoxCoxLambda()
> above):
>
>  > apply(dd, 2, BoxCoxLambda, simplify = TRUE)
> [1] 0.2 0.2
>
>  > dd[, 2]  <- dd[, 2]^3
>  > apply(dd, 2, BoxCoxLambda, simplify = TRUE)
> [1] 0.2 0.1
>
> Best,
>   John
>
> > nor do I understand why
> > boxcox.lm apparently throws the error while boxcox.formula does not
> > (it also calls NextMethod()) So I would welcome clarification to clear
> > my clogged (cerebral) sinuses. :-)
> >
> >
> > Best,
> > Bert
> >
> >
> > On Sat, Jul 8, 2023 at 11:25?AM John Fox <jfox at mcmaster.ca> wrote:
> >>
> >> Dear Ron and Bert,
> >>
> >> First (and without considering why one would want to do this, e.g.,
> >> adding a start of 1 to the data), the following works for me:
> >>
> >> ------ snip ------
> >>
> >>   > library(MASS)
> >>
> >>   > BoxCoxLambda <- function(z){
> >> +   b <- boxcox(z + 1 ~ 1,
> >> +               lambda = seq(-5, 5, length.out = 101),
> >> +               plotit = FALSE)
> >> +   b$x[which.max(b$y)]
> >> + }
> >>
> >>   > mrow <- 500
> >>   > mcol <- 2
> >>   > set.seed(12345)
> >>   > dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol =
> >> +                mcol)
> >>
> >>   > dd1 <- dd[, 1] # 1st column of dd
> >>   > res <- boxcox(lm(dd1 + 1 ~ 1), lambda = seq(-5, 5, length.out = 101),
> >> plotit
> >> +              = FALSE)
> >>   > res$x[which.max(res$y)]
> >> [1] 0.2
> >>
> >>   > apply(dd, 2, BoxCoxLambda, simplify = TRUE)
> >> [1] 0.2 0.2
> >>
> >> ------ snip ------
> >>
> >> One could also use the powerTransform() function in the car package,
> >> which in this context transforms towards *multi*normality:
> >>
> >> ------ snip ------
> >>
> >>   > library(car)
> >> Loading required package: carData
> >>
> >>   > powerTransform(dd + 1)
> >> Estimated transformation parameters
> >>          Y1        Y2
> >> 0.1740200 0.2089925
> >>
> >> I hope this helps,
> >>    John
> >>
> >> --
> >> John Fox, Professor Emeritus
> >> McMaster University
> >> Hamilton, Ontario, Canada
> >> web: https://www.john-fox.ca/
> >>
> >> On 2023-07-08 12:47 p.m., Bert Gunter wrote:
> >>> Caution: This email may have originated from outside the organization. Please exercise additional caution with any links and attachments.
> >>>
> >>>
> >>> No, I'm afraid I'm wrong. Something went wrong with my R session and gave
> >>> me incorrect answers. After restarting, I continued to get the same error
> >>> as you did with my supposed "fix." So just ignore what I said and sorry for
> >>> the noise.
> >>>
> >>> -- Bert
> >>>
> >>> On Sat, Jul 8, 2023 at 8:28?AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >>>
> >>>> Try this for your function:
> >>>>
> >>>> BoxCoxLambda <- function(z){
> >>>>      y <- z
> >>>>      b <- boxcox(y + 1 ~ 1,lambda = seq(-5, 5, length.out = 61), plotit =
> >>>> FALSE)
> >>>>      b$x[which.max(b$y)]    # best lambda
> >>>> }
> >>>>
> >>>> ***I think*** (corrections and clarification strongly welcomed!) that `~`
> >>>> (the formula function) is looking for 'z' in the GlobalEnv, the caller of
> >>>> apply(), and not finding it. It finds 'y' here explicitly in the
> >>>> BoxCoxLambda environment.
> >>>>
> >>>> Cheers,
> >>>> Bert
> >>>>
> >>>>
> >>>>
> >>>> On Sat, Jul 8, 2023 at 4:28?AM Ron Crump via R-help <r-help at r-project.org>
> >>>> wrote:
> >>>>
> >>>>> Hi,
> >>>>>
> >>>>> Firstly, apologies as I have posted this on community.rstudio.com too.
> >>>>>
> >>>>> I want to optimise a Box-Cox transformation on columns of a matrix (ie, a
> >>>>> unique lambda for each column). So I wrote a function that includes the
> >>>>> call to MASS::boxcox in order that it can be applied to each column easily.
> >>>>> Except that I'm getting an error when calling the function. If I just
> >>>>> extract a column of the matrix and run the code not in the function, it
> >>>>> works. If I call the function either with an extracted column (ie dd1 in
> >>>>> the reprex below) or in a call to apply I get an error (see the reprex
> >>>>> below).
> >>>>>
> >>>>> I'm sure I'm doing something silly, but I can't see what it is. Any help
> >>>>> appreciated.
> >>>>>
> >>>>> library(MASS)
> >>>>>
> >>>>> # Find optimised Lambda for Boc-Cox transformation
> >>>>> BoxCoxLambda <- function(z){
> >>>>>       b <- boxcox(lm(z+1 ~ 1), lambda = seq(-5, 5, length.out = 61), plotit
> >>>>> = FALSE)
> >>>>>       b$x[which.max(b$y)]    # best lambda
> >>>>> }
> >>>>>
> >>>>> mrow <- 500
> >>>>> mcol <- 2
> >>>>> set.seed(12345)
> >>>>> dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol =
> >>>>> mcol)
> >>>>>
> >>>>> # Try it not using the BoxCoxLambda function:
> >>>>> dd1 <- dd[,1] # 1st column of dd
> >>>>> bb <- boxcox(lm(dd1+1 ~ 1), lambda = seq(-5, 5, length.out = 101), plotit
> >>>>> = FALSE)
> >>>>> print(paste0("1st column's lambda is ", bb$x[which.max(bb$y)]))
> >>>>> #> [1] "1st column's lambda is 0.2"
> >>>>>
> >>>>> # Calculate lambda for each column of dd
> >>>>> lambdas <- apply(dd, 2, BoxCoxLambda, simplify = TRUE)
> >>>>> #> Error in eval(predvars, data, env): object 'z' not found
> >>>>>
> >>>>> Created on 2023-07-08 with reprex v2.0.2
> >>>>>
> >>>>> Thanks for your time and help.
> >>>>>
> >>>>> Ron
> >>>>>           [[alternative HTML version deleted]]
> >>>>>
> >>>>> ______________________________________________
> >>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>> PLEASE do read the posting guide
> >>>>> http://www.R-project.org/posting-guide.html
> >>>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>>
> >>>>
> >>>
> >>>           [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>


From @hu|@|@cheung @end|ng |rom gm@||@com  Sun Jul  9 03:25:03 2023
From: @hu|@|@cheung @end|ng |rom gm@||@com (Shu Fai Cheung)
Date: Sun, 9 Jul 2023 09:25:03 +0800
Subject: [R] printCoefmat() and zap.ind
In-Reply-To: <25768.16419.758276.323572@stat.math.ethz.ch>
References: <CAPVJd2UBbr--JaN20EG65aFt+yMSeeQ_pT2SfPKD+CFPW+seeQ@mail.gmail.com>
 <25768.14696.794296.3642@stat.math.ethz.ch>
 <25768.16419.758276.323572@stat.math.ethz.ch>
Message-ID: <CAPVJd2Xf0KHGY1T_ydivvqobq8AB=3cN8C8j7Y8bdubd98-27g@mail.gmail.com>

(Sorry for sending it twice. I forgot to reply
to the mailing list.)

Many many thanks for the comments and examples!

I could write my own function to achieve what
I want to do. However, I would like to find a method that
uses built-in functions only and prints the output in a format
identical to that of the default output of print.summary.lm(),
which uses printCoefmat() internally.

It seems that this cannot be done easily for now. This
is a workaround.

```r

set.seed(5689417)
n <- 10000
x1 <- rnorm(n)
x2 <- rnorm(n)
y <- .5 * x1 + .6 * x2 + rnorm(n, -0.0002366, .2)
dat <- data.frame(x1, x2, y)
out <- lm(y ~ x1 + x2, dat)
out_summary <- summary(out)
out_summary$coefficients[, "Estimate"] <-
  round(out_summary$coefficients[, "Estimate"], 4)
out_summary$coefficients[, "Std. Error"] <-
  round(out_summary$coefficients[, "Std. Error"], 4)

printCoefmat(out_summary$coefficients)
#>             Estimate Std. Error t value Pr(>|t|)
#> (Intercept)   0.0000     0.0020    0.00        1
#> x1            0.5021     0.0020  254.70   <2e-16 ***
#> x2            0.6002     0.0020  301.23   <2e-16 ***

#> ---
#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
```

I have to round the two columns first before calling
printCoefmat(). Not nice but works for now.

Regards,
Shu Fai Cheung

? 2023?7?8??? 00:41?Martin Maechler <maechler at stat.math.ethz.ch> ???

> >>>>> Martin Maechler
> >>>>>     on Fri, 7 Jul 2023 18:12:24 +0200 writes:
>
> >>>>> Shu Fai Cheung
> >>>>>     on Thu, 6 Jul 2023 17:14:27 +0800 writes:
>
>     >> Hi All,
>
>     >> I would like to ask two questions about printCoefmat().
>
>     > Good... this function, originally named print.coefmat(),
>     > is 25 years old (in R) now:
>
>     > --------------------------------------------------------------------
>     > r1902 | maechler | 1998-08-14 19:19:05 +0200 (Fri, 14 Aug 1998) |
>     > Changed paths:
>     > M R-0-62-patches/CHANGES
>     > M R-0-62-patches/src/library/base/R/anova.R
>     > M R-0-62-patches/src/library/base/R/glm.R
>     > M R-0-62-patches/src/library/base/R/lm.R
>     > M R-0-62-patches/src/library/base/R/print.R
>
>     > print.coefmat(.) about ok
>     > --------------------------------------------------------------------
>
>     > (yes, at the time, the 'stats' package did not exist yet ..)
>
>     > so it may be a good time to look at it.
>
>
>     >> First, I found a behavior of printCoefmat() that looks strange to
> me,
>     >> but I am not sure whether this is an intended behavior:
>
>     >> ``` r
>     >> set.seed(5689417)
>     >> n <- 10000
>     >> x1 <- rnorm(n)
>     >> x2 <- rnorm(n)
>     >> y <- .5 * x1 + .6 * x2 + rnorm(n, -0.0002366, .2)
>     >> dat <- data.frame(x1, x2, y)
>     >> out <- lm(y ~ x1 + x2, dat)
>     >> out_summary <- summary(out)
>     >> printCoefmat(out_summary$coefficients)
>     >> #>               Estimate Std. Error t value Pr(>|t|)
>     >> #> (Intercept) 1.7228e-08 1.9908e-03    0.00        1
>     >> #> x1          5.0212e-01 1.9715e-03  254.70   <2e-16 ***
>     >> #> x2          6.0016e-01 1.9924e-03  301.23   <2e-16 ***
>     >> #> ---
>     >> #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
>
>     >> printCoefmat(out_summary$coefficients,
>     >> zap.ind = 1,
>     >> digits = 4)
>     >> #>             Estimate Std. Error t value Pr(>|t|)
>     >> #> (Intercept) 0.000000   0.001991     0.0        1
>     >> #> x1          0.502100   0.001971   254.7   <2e-16 ***
>     >> #> x2          0.600200   0.001992   301.2   <2e-16 ***
>     >> #> ---
>     >> #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
>     >> ```
>
>     >> With zap.ind = 1, the values in "Estimate" were correctly
>     >> zapped using digits = 4. However, by default, "Estimate"
>     >> and "Std. Error" are formatted together. Because the
>     >> standard errors are small, with digits = 4, zero's were added
>     >> to values in "Estimate", resulting in "0.502100" and
>     >> "0.600200", which are misleading because, if rounded to
>     >> the 6th decimal place, the values to be displayed should
>     >> be "0.502122" and "0.600162".
>
>     >> Is this behavior of printCoefmat() intended/normal?
>
>     > Yes, this is "normal" in the sense that zapsmall() is used.
>     > I'm not even sure anymore if I was always aware 1998 what exactly the
>     > simple zapsmall() function is doing.
>     > It does not do what you want here (and actually *typically* want
>     > for formatting numbers for display, plotting, etc):
>     > You "really want" here and in such situations
>
>     > zapOnlysmall <- function(x, dig) {
>     >    x[abs(x) <= 10^-dig] <- 0
>     >    x
>     > }
>
>     > and I think I'd replace the use of zapsmall() inside
>     > printCoefmat() with something like zapOnlysmall() above.
>
>     > This will indeed nicely solve your problem.
>
> well..., now that I tried to change it "globally" in
> printCoefmat() and I see how many of the lm() summary or anova()
> outputs .. outputs that get slightly changed, and sometimes
> quite unfavourably,
>
> I think that the "hard" replacement of zapsmall() by
> zapOnlysmall() {above}  is too drastic, ... even though it helps
> in your case.
>
> ... back to the "drawing board" ...
>
> Martin
>
>
>     >> Second, how can I use zap without this behavior?
>     >> In cases like the one above, I need to use zap such that
>     >> the intercept will not be displayed in scientific notation.
>     >> Disabling scientific notation cannot achieve the desired
>     >> goal.
>
>
>     >> I tried adding cs.ind = 1:
>
>     > well, from the help page   ?printCoefmat
>
>     > cs.ind is really about the [ind]ices of [c]oefficient + [s]cale or
> [s]td.err
>     > So, for lm() you should not have to set cs.ind but rather keep
>     > it at it's smart default of cs.ind = 1:2 .
>
>
>     >> ```r
>     >> printCoefmat(out_summary$coefficients,
>     >> zap.ind = 1,
>     >> digits = 4,
>     >> cs.ind = 1)
>     >> #>             Estimate Std. Error t value Pr(>|t|)
>     >> #> (Intercept)   0.0000   0.001991     0.0        1
>     >> #> x1            0.5021   0.001971   254.7   <2e-16 ***
>     >> #> x2            0.6002   0.001992   301.2   <2e-16 ***
>     >> #> ---
>     >> #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
>     >> ```
>
>     >> However, this solution is not ideal because the numbers
>     >> of decimal places of "Estimate" and "Std. Error" are
>     >> different. How can I get the output like this one?
>
>
>     >> ```r
>     >> #>             Estimate Std. Error t value Pr(>|t|)
>     >> #> (Intercept)   0.0000   0.0020     0.0        1
>     >> #> x1            0.5021   0.0020   254.7   <2e-16 ***
>     >> #> x2            0.6002   0.0020   301.2   <2e-16 ***
>     >> ```
>
>     >> Thanks for your attention.
>
>     >> Regards,
>     >> Shu Fai Cheung
>
>     > Thank you, Shu Fai,
>     > for your careful and thoughtful report!
>
>     > Best regards,
>     > Martin
>
>     > ______________________________________________
>     > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     > https://stat.ethz.ch/mailman/listinfo/r-help
>     > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
>     > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @ndrewzh@ng20052005 @end|ng |rom gm@||@com  Sun Jul  9 08:29:54 2023
From: @ndrewzh@ng20052005 @end|ng |rom gm@||@com (Andrew Zhang)
Date: Sat, 8 Jul 2023 23:29:54 -0700
Subject: [R] caret package
Message-ID: <CAC7O5WLugCk9U3ur03F003AB65yPsY=t0ZYFW9f8KyPbiuBbJA@mail.gmail.com>

Dear all,

I am using caret package to analyze a microarray dataset with feature
selection using sbf(). My dataset is 3500 samples with 2200 genes, the
outcome Y variable is a factor of 12 levels. I used the following script to
run the feature selection:

library(caret)
ctrl <- sbfControl(functions=rfSBF, method='repeatedcv', repeats=5)

    ### x is a matrix of 3500x2200, y is a factor of 12 levels
obj <- sbf(x, y, sbfControl=ctrl)

But it has been more than 15 hours, the code is still running!

My computer has the following specifications:

Intel(R) Core(TM) i7-8550U CPU @ 1.80GHz   2.00 GHz, 8 cores
16.0 GB

Does anyone know if my script has any issues, or it is normal for sbf() to
run this long?

Thank you!

Andrew

> sessionInfo()
R version 4.3.1 (2023-06-16 ucrt)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 19045)

Matrix products: default


locale:
[1] LC_COLLATE=English_United States.utf8
[2] LC_CTYPE=English_United States.utf8
[3] LC_MONETARY=English_United States.utf8
[4] LC_NUMERIC=C
[5] LC_TIME=English_United States.utf8

time zone: America/Los_Angeles
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] caret_6.0-94   lattice_0.21-8 ggplot2_3.4.2

loaded via a namespace (and not attached):
 [1] utf8_1.2.3           future_1.33.0        generics_0.1.3
 [4] class_7.3-22         stringi_1.7.12       pROC_1.18.2
 [7] listenv_0.9.0        digest_0.6.32        magrittr_2.0.3
[10] grid_4.3.1           timechange_0.2.0     iterators_1.0.14
[13] foreach_1.5.2        plyr_1.8.8           Matrix_1.5-4.1
[16] ModelMetrics_1.2.2.2 nnet_7.3-19          survival_3.5-5
[19] purrr_1.0.1          fansi_1.0.4          scales_1.2.1
[22] codetools_0.2-19     lava_1.7.2.1         cli_3.6.1
[25] rlang_1.1.1          hardhat_1.3.0        parallelly_1.36.0
[28] future.apply_1.11.0  munsell_0.5.0        splines_4.3.1
[31] withr_2.5.0          prodlim_2023.03.31   tools_4.3.1
[34] parallel_4.3.1       reshape2_1.4.4       dplyr_1.1.2
[37] colorspace_2.1-0     recipes_1.0.6        globals_0.16.2
[40] vctrs_0.6.3          R6_2.5.1             rpart_4.1.19
[43] stats4_4.3.1         lifecycle_1.0.3      lubridate_1.9.2
[46] stringr_1.5.0        MASS_7.3-60          pkgconfig_2.0.3
[49] pillar_1.9.0         gtable_0.3.3         glue_1.6.2
[52] data.table_1.14.8    Rcpp_1.0.10          tibble_3.2.1
[55] tidyselect_1.2.0     nlme_3.1-162         ipred_0.9-14
[58] timeDate_4022.108    gower_1.0.1          compiler_4.3.1

	[[alternative HTML version deleted]]


From @@ch@ndh|@| @end|ng |rom bt|nternet@com  Tue Jul 11 11:14:31 2023
From: @@ch@ndh|@| @end|ng |rom bt|nternet@com (a.chandhial@btinternet.com a.chandhial@btinternet.com)
Date: Tue, 11 Jul 2023 10:14:31 +0100 (BST)
Subject: [R] Base R Stats Package - quantile function
Message-ID: <48936a4b.634b.189443b1a36.Webtop.118@btinternet.com>




Hi,


In Base R Stats Package, the quantile function has 9 Type's:

?quantile

I'd be very grateful if simple numerical examples (ideally from members 
of the R core team), for each of the 9 methods, both for EVEN and ODD 
numbered length's of series, be provided.


thanks,
Amarjit


	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jul 11 22:05:20 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 11 Jul 2023 13:05:20 -0700
Subject: [R] Base R Stats Package - quantile function
In-Reply-To: <48936a4b.634b.189443b1a36.Webtop.118@btinternet.com>
References: <48936a4b.634b.189443b1a36.Webtop.118@btinternet.com>
Message-ID: <CAGxFJbS-JMvGS69f68pGacvj9DKe889Xfhhgv-7uzPcs+-s32Q@mail.gmail.com>

1. I highly doubt that anyone from the "R Core team" would respond to such
a request. That is emphatically **not** their job.

2. More to the point, this is *exactly* the sort of task that *you*, as a
student/practitioner of statistics and data analysis are expected to do for
yourself. Indeed, examples already are included in ?quantile, and
references are provided for you to follow up on on your own if you wish to
learn more.

3. Finally, your request is largely off topic here. Please read and follow
the posting guide linked below for learning about/posting on matters that
are on topic.

Cheers,
Bert

On Tue, Jul 11, 2023 at 12:19?PM a.chandhial at btinternet.com a.chandhial---
via R-help <r-help at r-project.org> wrote:

>
>
>
> Hi,
>
>
> In Base R Stats Package, the quantile function has 9 Type's:
>
> ?quantile
>
> I'd be very grateful if simple numerical examples (ideally from members
> of the R core team), for each of the 9 methods, both for EVEN and ODD
> numbered length's of series, be provided.
>
>
> thanks,
> Amarjit
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @nupty@g| @end|ng |rom gm@||@com  Wed Jul 12 05:27:44 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Wed, 12 Jul 2023 08:57:44 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <2cdced6c2c8b492ea94099f51d482970@SRVEXCHCM1302.precheza.cz>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CH3PR22MB4514251DCFE77C2E74C285A8CF25A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
 <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>
 <CAFL9eu=QJG8X9PDG0RNxP88TicefE_DAgnkK-nxWkD9oLt6Z0g@mail.gmail.com>
 <CADfFDC4hrX8huz2HnDMLM=WT+z5UttBfk8rQeOGwLj14CZN2Pw@mail.gmail.com>
 <ac95f337b83240d5836169c02548d0d4@SRVEXCHCM1302.precheza.cz>
 <CAFL9eunWEer8nXQ52jsrvicdvDokyZHfTWrOsstRyyW37hm+nQ@mail.gmail.com>
 <2cdced6c2c8b492ea94099f51d482970@SRVEXCHCM1302.precheza.cz>
Message-ID: <CAFL9eunmj9+NvNmzM20YDXwDFxKZM25A0axUNk2_n-1+miSsBg@mail.gmail.com>

Thanks.
I made a graph in Stata that is close to what I want in R. Stata graph is
attached. The main differences between Stata and R graphs that I was able
to make, with ggplot or lattice, is that I have been able to scale y-axis
of each sub-graph independently in Stata, but not in R. Also, x-axis labels
are also complete in Stata but not in R. Is there a way to do this in R via
base-R, ggplot or lattice? I had initially thought that these types of
panel graphs are common and should be easy to do, but that is not how this
is turning out to be. Any help is welcome.

On Fri, 7 Jul 2023 at 17:57, PIKAL Petr <petr.pikal at precheza.cz> wrote:

> Hallo Anupam
>
> With
>
> ggplot change axis label size into Google
>
> the first answer I got was
>
> axis.text theme
>
> r - Change size of axes title and labels in ggplot2 - Stack Overflow
> <https://stackoverflow.com/questions/14942681/change-size-of-axes-title-and-labels-in-ggplot2>
>
>
>
> so
>
>
>
> ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) + geom_point()
> +
>   geom_line() + facet_wrap(~Measure) +
> theme(axis.text=element_text(size=5))
>
>
>
> Should do the trick.
>
>
>
> S pozdravem | Best Regards
>
>
> *RNDr. Petr PIKAL*Vedouc? V?zkumu a v?voje | Research Manager
>
>
> *PRECHEZA a.s.*n?b?. Dr. Edvarda Bene?e 1170/24 | 750 02 P?erov | Czech
> Republic
> Tel: +420 581 252 256 | GSM: +420 724 008 364
> petr.pikal at precheza.cz | *www.precheza.cz <https://www.precheza.cz/>*
>
> *Osobn? ?daje: *Informace o zpracov?n? a ochran? osobn?ch ?daj?
> obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: *https://www.precheza.cz/zasady-ochrany-osobnich-udaju/
> <https://www.precheza.cz/zasady-ochrany-osobnich-udaju/>* | Information
> about processing and protection of business partner?s personal data are
> available on website: *https://www.precheza.cz/en/personal-data-protection-principles/
> <https://www.precheza.cz/en/personal-data-protection-principles/>*
>
> *D?v?rnost: *Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
> d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
> odpov?dnosti: *https://www.precheza.cz/01-dovetek/
> <https://www.precheza.cz/01-dovetek/>* | This email and any documents
> attached to it may be confidential and are subject to the legally binding
> disclaimer: *https://www.precheza.cz/en/01-disclaimer/
> <https://www.precheza.cz/en/01-disclaimer/>*
>
>
>
> *From:* Anupam Tyagi <anuptyagi at gmail.com>
> *Sent:* Friday, July 7, 2023 12:48 PM
> *To:* PIKAL Petr <petr.pikal at precheza.cz>
> *Cc:* r-help at r-project.org
> *Subject:* Re: [R] Plotting factors in graph panel
>
>
>
> Thanks! You are correct, the graphs look very similar, except ggplot is
> scaling the text font to make it more readable. Is there a way to scale
> down the x-axis labels, so they are readable?
>
>
>
> On Fri, 7 Jul 2023 at 12:02, PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> Hallo Anupam
>
> I do not see much difference in ggplot or lattice, they seems to me
> provide almost identical results when removing theme part from ggplot.
>
> library(ggplot2)
> library(lattice)
>
> ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) + geom_point()
> +
>   geom_line() + facet_wrap(~Measure)
>
> xyplot(Percent ~ Income | Measure, TrialData4,
>        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
>
> So it is probably only matter of your preference which one do you choose.
>
> Cheers
> Petr
>
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Deepayan Sarkar
> > Sent: Thursday, July 6, 2023 3:06 PM
> > To: Anupam Tyagi <anuptyagi at gmail.com>
> > Cc: r-help at r-project.org
> > Subject: Re: [R] Plotting factors in graph panel
> >
> > On Thu, 6 Jul 2023 at 15:21, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> > >
> > > Btw, I think "lattice" graphics will provide a better solution than
> > > "ggplot", because it puts appropriate (space saving) markers on the
> > > axes and does axes labels well. However, I cannot figure out how to do
> > > it in "lattice".
> >
> > You will need to convert Income to a factor first. Alternatively, use
> > dotplot() instead of xyplot(), but that will sort the levels wrongly, so
> better to
> > make the factor first anyway.
> >
> > TrialData4 <- within(TrialData4,
> > {
> >     Income <- factor(Income, levels = c("$10", "$25", "$40", "$75", ">
> $75"))
> > })
> >
> > xyplot(Percent ~ Income | Measure, TrialData4,
> >        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
> >
> > or
> >
> > dotplot(Percent ~ Income | Measure, TrialData4,
> >         type = "o", as.table = TRUE)
> >
> > This is not really any different from the ggplot() version though.
> > Maybe you just don't like the effect of the '+ theme_classic()' part.
> >
> > Best,
> > -Deepayan
> >
> >
> > > On Thu, 6 Jul 2023 at 15:11, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> > >
> > > > Hi John:
> > > >
> > > > Thanks! Below is the data using your suggestion. I used "ggplot" to
> > > > make a graph. I am not too happy with it. I am looking for something
> > > > simpler and cleaner. Plot is attached.
> > > >
> > > > I also tried "lattice" package, but nothing got plotted with "xyplot"
> > > > command, because it is looking for a numeric variable on x-axis.
> > > >
> > > > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
> > > > geom_point()
> > > > +
> > > >   geom_line() + facet_wrap(~Measure) + theme_classic()
> > > >
> > > > > dput(TrialData4)structure(list(Income = c("$10", "$25", "$40",
> > > > > "$75", "> $75",
> > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75"
> > > > ), Percent = c(3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79,
> > > > 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27,
> > > > 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4,
> > > > 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244,
> > > > 1.706, 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31,
> > > > 35.65, 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1,
> > > > 62.17, 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
> > > > 7.103, 3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51, 28.9,
> > > > 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94, 33.74,
> > > > 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4, 25, 24.61,
> > > > 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244, 1.706,
> > > > 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65,
> > > > 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17,
> > > > 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103),
> > > > Measure = c("MF None", "MF None", "MF None", "MF None", "MF None",
> > > > "MF Equity", "MF Equity", "MF Equity", "MF Equity", "MF Equity", "MF
> > > > Debt", "MF Debt", "MF Debt", "MF Debt", "MF Debt", "MF Hybrid", "MF
> > > > Hybrid", "MF Hybrid", "MF Hybrid", "MF Hybrid", "Bank None", "Bank
> > > > None", "Bank None", "Bank None", "Bank None", "Bank Current", "Bank
> > > > Current", "Bank Current", "Bank Current", "Bank Current", "Bank
> > > > Savings", "Bank Savings", "Bank Savings", "Bank Savings", "Bank
> > > > Savings", "MF None 1", "MF None 1", "MF None 1", "MF None 1", "MF
> > > > None 1", "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Equity 1",
> > > > "MF Equity 1", "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Debt 1",
> > > > "MF Debt 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid
> > > > 1", "MF Hybrid 1", "Bank None 1", "Bank None 1", "Bank None 1",
> > > > "Bank None 1", "Bank None 1", "Bank Current 1", "Bank Current 1",
> > > > "Bank Current 1", "Bank Current 1", "Bank Current 1", "Bank Savings
> > > > 1", "Bank Savings 1", "Bank Savings 1", "Bank Savings 1", "Bank
> > > > Savings 1", "MF None 2", "MF None 2", "MF None 2", "MF None 2", "MF
> > > > None 2", "MF Equity 2", "MF Equity 2", "MF Equity 2", "MF Equity 2",
> > > > "MF Equity 2", "MF Debt 2", "MF Debt 2", "MF Debt 2", "MF Debt 2",
> > > > "MF Debt 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid
> > > > 2", "MF Hybrid 2", "Bank None 2", "Bank None 2", "Bank None 2",
> > > > "Bank None 2", "Bank None 2", "Bank Current 2", "Bank Current 2",
> > > > "Bank Current 2", "Bank Current 2", "Bank Current 2", "Bank Savings
> > > > 2", "Bank Savings 2", "Bank Savings 2", "Bank Savings 2", "Bank
> > > > Savings 2", "MF None 3", "MF None 3", "MF None 3", "MF None 3", "MF
> > > > None 3", "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Equity 3",
> > > > "MF Equity 3", "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Debt 3",
> > > > "MF Debt 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid
> > > > 3", "MF Hybrid 3", "Bank None 3", "Bank None 3", "Bank None 3",
> > > > "Bank None 3", "Bank None 3", "Bank Current 3", "Bank Current 3",
> > > > "Bank Current 3", "Bank Current 3", "Bank Current 3", "Bank Savings
> > > > 3", "Bank Savings 3", "Bank Savings 3", "Bank Savings 3", "Bank
> > > > Savings 3")), class = c("tbl_df", "tbl", "data.frame"), row.names =
> > > > c(NA,
> > > > -140L))
> > > >
> > > >
> > > >
> > > >
> > > > On Thu, 29 Jun 2023 at 21:11, John Kane <jrkrideau at gmail.com> wrote:
> > > >
> > > >> Anupa,
> > > >>
> > > >> I think your  best bet with your data would be to tidy it up in
> > > >> Excel, read it into  R using something like the readxl package and
> > > >> then supply some sample data is the dput() function.
> > > >>
> > > >> In the case of a large dataset something like dput(head(mydata,
> > > >> 100)) should supply the data we need. Just do dput(mydata) where
> > > >> *mydata* is your data. Copy the output and paste it here.
> > > >>
> > > >> On Thu, 29 Jun 2023 at 08:37, Ebert,Timothy Aaron <tebert at ufl.edu>
> > wrote:
> > > >>
> > > >>> Reposting the data did not help. We do not like to guess, and
> > > >>> doing so takes a great deal of time that is likely wasted.
> > > >>> Rows are observations.
> > > >>> Columns are variables.
> > > >>> In Excel, the first row will be variable names and all subsequent
> > > >>> rows will be observations.
> > > >>>
> > > >>> Income is the first variable. It has seven states: $10, $25, $40,
> > > >>> $75,
> > > >>> >$75, "No", "Answer"
> > > >>> MF is the second variable. It has six values: 1, 2, 3, 4, 5, 9
> > > >>> None is the third variable. It has seven values: 1, 3.05,  2.29,
> > > >>> 2.24, 1.71, 1.30, 2.83 Equity is the last variable with many
> > > >>> states, both numeric and text. A computer will read it all as
> > > >>> text.
> > > >>>
> > > >>> As written the data cannot be analyzed.
> > > >>>
> > > >>> Equity looks like it should be numeric. However, it has text
> values:
> > > >>> "Debt", "Hybrid", Bank", "AC", "None", "Current", "Savings", "No",
> > > >>> and "Answer"
> > > >>>
> > > >>> In looking at the data I try to find some organization where every
> > > >>> variable has the same number of rows as every other variable. I
> > > >>> fail with these data.
> > > >>> I could combine "No" and "Answer" into one name "No Answer" to
> > > >>> make it agree with MF, but then it does not work for None.
> > > >>>
> > > >>>
> > > >>> Please rework the data in Excel so that we can properly interpret
> > > >>> the content. If it is badly organized in Excel, moving it to R
> will not help.
> > > >>> Below, I tried adding carriage returns and spaces to organize the
> > > >>> data, but I have a column of numbers that are not identified. The
> > > >>> values below
> > > >>> $10 do not make much sense compared to other values.
> > > >>>
> > > >>> I am tired of guessing.
> > > >>>
> > > >>> Tim
> > > >>>
> > > >>> -----Original Message-----
> > > >>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam
> > > >>> Tyagi
> > > >>> Sent: Wednesday, June 28, 2023 11:49 PM
> > > >>> To: r-help at r-project.org
> > > >>> Subject: Re: [R] Plotting factors in graph panel
> > > >>>
> > > >>> [External Email]
> > > >>>
> > > >>> Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope
> > > >>> you have been well.
> > > >>>
> > > >>> Pikal, thanks. Your solution may be close to what I want. I did
> > > >>> not know that I was posting in HTML. I just copied the data from
> > > >>> Excel and posted in the email in Gmail. The data is still in
> > > >>> Excel, because I have not yet figured out what is a good way to
> > > >>> organize it in R. I am posting it again below as text. These are
> > > >>> rows in Excel: 1,2,3,5,9 after MF are income categories and No
> > > >>> Answer category (9). Down the second column are categories of MF
> > and Bank AC. Rest of the columns are percentages.
> > > >>>
> > > >>> Jim, thanks for the graph. I am looking to plot only one line
> > > >>> (category) each in many small plots on the same page. I don't want
> > > >>> to compare different categories on the same graph as you do, but
> > > >>> see how each category varies by income, one category in each
> > > >>> graph. Like Excel does with Sparklines (Top menu: Insert,
> > > >>> Sparklines, Lines). I have many categories for many variables. I
> am only
> > showing two MF and Bank AC.
> > > >>>
> > > >>> Income        $10 $25     $40      $75   > $75    No Answer
> > > >>> MF                   1      2         3           4         5
>     9
> > > >>> None               1   3.05     2.29    2.24     1.71    1.30
> > > >>>    2.83
> > > >>> Equity             2    29.76  28.79  29.51 28.90   31.67
> > > >>> 36.77
> > > >>>
> > > >>> Debt                3  31.18  32.64  34.31  35.65  37.59
> > > >>>  33.15
> > > >>>
> > > >>> Hybrid              4 36.00 36.27 33.94 33.74 29.44 27.25
> > > >>>
> > > >>> Bank AC None 1 46.54 54.01 59.1 62.17 67.67 60.87
> > > >>>
> > > >>> Current            2 24.75 24.4 25 24.61 24.02 21.09
> > > >>>
> > > >>> Savings             3 25.4 18.7 29 11.48 7.103 13.46
> > > >>>
> > > >>> No Answer       9 3.307 2.891 13.4 1.746 1.208 4.577
> > > >>>
> > > >>>
> > > >>> On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com>
> > wrote:
> > > >>>
> > > >>> > Hi Anupam,
> > > >>> > Haven't heard from you in a long time. Perhaps you want
> > > >>> > something like
> > > >>> > this:
> > > >>> >
> > > >>> > at_df<-read.table(text=
> > > >>> >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None
> > > >>> > Bank_Current Bank_Savings Bank_NA
> > > >>> >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> > > >>> >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> > > >>> >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> > > >>> >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> > > >>> >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
> > > >>> > No_Answer 9
> > > >>> > 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> > > >>> >  header=TRUE,stringsAsFactors=FALSE)
> > > >>> > at_df<-
> > at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank
> > > >>> > _NA")]
> > > >>> > png("MF_Bank.png",height=600)
> > > >>> > par(mfrow=c(2,1))
> > > >>> > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
> > > >>> >  type="l",col=1:4,lty=1:4,lwd=3,  main="Percentages by Income
> > > >>> > and MF type", xlab="Income",ylab="Percentage of group",xaxt="n")
> > > >>> > axis(1,at=1:5,labels=at_df$Income)
> > > >>> > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
> > > >>> >  lty=1:4,lwd=3,col=1:4)
> > > >>> > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
> > > >>> >  type="l",col=1:3,lty=1:4,lwd=3,  main="Percentages by Income
> > > >>> > and Bank type", xlab="Income",ylab="Percentage of
> > > >>> > group",xaxt="n")
> > > >>> > axis(1,at=1:5,labels=at_df$Income)
> > > >>> > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
> > > >>> >  lty=1:4,lwd=3,col=1:3)
> > > >>> > dev.off()
> > > >>> >
> > > >>> > Jim
> > > >>> >
> > > >>> > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi
> > > >>> > <anuptyagi at gmail.com>
> > > >>> wrote:
> > > >>> > >
> > > >>> > > Hello,
> > > >>> > >
> > > >>> > > I want to plot the following kind of data (percentage of
> > > >>> > > respondents
> > > >>> > from a
> > > >>> > > survey) that varies by Income into many small *line* graphs in
> > > >>> > > a panel of graphs. I want to omit "No Answer" categories. I
> > > >>> > > want to see how each one of the categories (percentages),
> > > >>> > > "None", " Equity", etc. varies by
> > > >>> > Income.
> > > >>> > > How can I do this? How to organize the data well and how to
> > > >>> > > plot? I
> > > >>> > thought
> > > >>> > > Lattice may be a good package to plot this, but I don't know
> > > >>> > > for sure. I prefer to do this in Base-R if possible, but I am
> > > >>> > > open to ggplot. Any
> > > >>> > ideas
> > > >>> > > will be helpful.
> > > >>> > >
> > > >>> > > Income
> > > >>> > > $10 $25 $40 $75 > $75 No Answer MF 1 2 3 4 5 9 None 1 3.05
> > > >>> > > 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51
> > > >>> > > 28.90 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
> > > >>> > > Hybrid
> > > >>> > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54
> > > >>> > > 54.01
> > > >>> > > 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02
> > > >>> > > 21.09 Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9
> > > >>> > > 3.307 2.891
> > > >>> > > 13.4 1.746 1.208 4.577
> > > >>> > >
> > > >>> > > Thanks.
> > > >>> > > --
> > > >>> > > Anupam.
> > > >>> > >
> > > >>> > >         [[alternative HTML version deleted]]
> > > >>> > >
> > > >>> > > ______________________________________________
> > > >>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> > > >>> > > see https://st/
> > > >>> > > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-
> > help&data=05%7C01%7Ctebert
> > > >>> > > %40ufl
> > > >>> > >
> > .edu%7C59874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace6
> > > >>> > > 0a6233
> > > >>> > >
> > 1e1b84%7C0%7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d
> > 8ey
> > > >>> > > JWIjoi
> > > >>> > >
> > MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3
> > > >>> > > 000%7C
> > > >>> > >
> > %7C%7C&sdata=xoaDMG7ogY4tMtqe30pONZrBdk0eq2cW%2BgdwlDHneWY
> > %3D&
> > > >>> > > reserv
> > > >>> > > ed=0
> > > >>> > > PLEASE do read the posting guide
> > > >>> > http://www.r/
> > > >>> > -project.org%2Fposting-
> > guide.html&data=05%7C01%7Ctebert%40ufl.ed
> > > >>> > u%7C59
> > > >>> >
> > 874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a62331e1b8
> > > >>> > 4%7C0%
> > > >>> >
> > 7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4
> > wLjA
> > > >>> > wMDAiL
> > > >>> >
> > CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sd
> > > >>> > ata=H7
> > > >>> >
> > 6XCa%2FULBGUn0Lok93l6mtHzo0snq5G0a%2BL4sEH8%2F8%3D&reserved=0
> > > >>> > > and provide commented, minimal, self-contained, reproducible
> > code.
> > > >>> >
> > > >>>
> > > >>>
> > > >>> --
> > > >>> Anupam.
> > > >>>
> > > >>>         [[alternative HTML version deleted]]
> > > >>>
> > > >>> ______________________________________________
> > > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > > >>> PLEASE do read the posting guide
> > > >>> http://www.r-project.org/posting-guide.html
> > > >>> and provide commented, minimal, self-contained, reproducible code.
> > > >>> ______________________________________________
> > > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > > >>> PLEASE do read the posting guide
> > > >>> http://www.R-project.org/posting-guide.html
> > > >>> and provide commented, minimal, self-contained, reproducible code.
> > > >>>
> > > >>
> > > >>
> > > >> --
> > > >> John Kane
> > > >> Kingston ON Canada
> > > >>
> > > >
> > > >
> > > > --
> > > > Anupam.
> > > >
> > > >
> > >
> > > --
> > > Anupam.
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-
> > guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>
>
>
> --
>
> Anupam.
>


-- 
Anupam.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: TrialData4Stata.png
Type: image/png
Size: 40141 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20230712/53b47ab1/attachment.png>

From @nupty@g| @end|ng |rom gm@||@com  Wed Jul 12 05:45:46 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Wed, 12 Jul 2023 09:15:46 +0530
Subject: [R] Alternative to rggobi
Message-ID: <CAFL9eum+nvSDHM2G-=5MQ89pG2ywUCs4eu86ixc_K_jOUoRnNA@mail.gmail.com>

Hello,

since rggobi is not available, is there an alternative to rggobi?

-- 
Anupam.

	[[alternative HTML version deleted]]


From @nupty@g| @end|ng |rom gm@||@com  Wed Jul 12 05:48:55 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Wed, 12 Jul 2023 09:18:55 +0530
Subject: [R] Variable and value labels
Message-ID: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>

Hello,

is there an easy way to do variable and value labels (for factor variables)
in base-R, without using a package. If not, what is an easy and good way to
do labels, using an add-on package.

-- 
Anupam.

	[[alternative HTML version deleted]]


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Wed Jul 12 05:50:54 2023
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Wed, 12 Jul 2023 09:20:54 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CAFL9eunmj9+NvNmzM20YDXwDFxKZM25A0axUNk2_n-1+miSsBg@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CH3PR22MB4514251DCFE77C2E74C285A8CF25A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
 <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>
 <CAFL9eu=QJG8X9PDG0RNxP88TicefE_DAgnkK-nxWkD9oLt6Z0g@mail.gmail.com>
 <CADfFDC4hrX8huz2HnDMLM=WT+z5UttBfk8rQeOGwLj14CZN2Pw@mail.gmail.com>
 <ac95f337b83240d5836169c02548d0d4@SRVEXCHCM1302.precheza.cz>
 <CAFL9eunWEer8nXQ52jsrvicdvDokyZHfTWrOsstRyyW37hm+nQ@mail.gmail.com>
 <2cdced6c2c8b492ea94099f51d482970@SRVEXCHCM1302.precheza.cz>
 <CAFL9eunmj9+NvNmzM20YDXwDFxKZM25A0axUNk2_n-1+miSsBg@mail.gmail.com>
Message-ID: <CADfFDC4UqC943PtmVsuEo4igKWuL8pveJsy5YQ0qa-0HDSBBdQ@mail.gmail.com>

On Wed, 12 Jul 2023 at 08:57, Anupam Tyagi <anuptyagi at gmail.com> wrote:

> Thanks.
> I made a graph in Stata that is close to what I want in R. Stata graph is
> attached. The main differences between Stata and R graphs that I was able
> to make, with ggplot or lattice, is that I have been able to scale y-axis
> of each sub-graph independently in Stata, but not in R. Also, x-axis labels
> are also complete in Stata but not in R. Is there a way to do this in R via
> base-R, ggplot or lattice?


Yes, of course. For lattice, add the argument

scales = list(y = "free")

For ggplot2, change

facet_wrap(~Measure)

to

facet_wrap(~Measure, scale = "free")

-Deepayan

I had initially thought that these types of
> panel graphs are common and should be easy to do, but that is not how this
> is turning out to be. Any help is welcome.
>

> On Fri, 7 Jul 2023 at 17:57, PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> > Hallo Anupam
> >
> > With
> >
> > ggplot change axis label size into Google
> >
> > the first answer I got was
> >
> > axis.text theme
> >
> > r - Change size of axes title and labels in ggplot2 - Stack Overflow
> > <
> https://stackoverflow.com/questions/14942681/change-size-of-axes-title-and-labels-in-ggplot2
> >
> >
> >
> >
> > so
> >
> >
> >
> > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
> geom_point()
> > +
> >   geom_line() + facet_wrap(~Measure) +
> > theme(axis.text=element_text(size=5))
> >
> >
> >
> > Should do the trick.
> >
> >
> >
> > S pozdravem | Best Regards
> >
> >
> > *RNDr. Petr PIKAL*Vedouc? V?zkumu a v?voje | Research Manager
> >
> >
> > *PRECHEZA a.s.*n?b?. Dr. Edvarda Bene?e 1170/24 | 750 02 P?erov | Czech
> > Republic
> > Tel: +420 581 252 256 | GSM: +420 724 008 364
> > petr.pikal at precheza.cz | *www.precheza.cz <https://www.precheza.cz/>*
> >
> > *Osobn? ?daje: *Informace o zpracov?n? a ochran? osobn?ch ?daj?
> > obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: *
> https://www.precheza.cz/zasady-ochrany-osobnich-udaju/
> > <https://www.precheza.cz/zasady-ochrany-osobnich-udaju/>* | Information
> > about processing and protection of business partner?s personal data are
> > available on website: *
> https://www.precheza.cz/en/personal-data-protection-principles/
> > <https://www.precheza.cz/en/personal-data-protection-principles/>*
> >
> > *D?v?rnost: *Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
> > d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
> > odpov?dnosti: *https://www.precheza.cz/01-dovetek/
> > <https://www.precheza.cz/01-dovetek/>* | This email and any documents
> > attached to it may be confidential and are subject to the legally binding
> > disclaimer: *https://www.precheza.cz/en/01-disclaimer/
> > <https://www.precheza.cz/en/01-disclaimer/>*
> >
> >
> >
> > *From:* Anupam Tyagi <anuptyagi at gmail.com>
> > *Sent:* Friday, July 7, 2023 12:48 PM
> > *To:* PIKAL Petr <petr.pikal at precheza.cz>
> > *Cc:* r-help at r-project.org
> > *Subject:* Re: [R] Plotting factors in graph panel
> >
> >
> >
> > Thanks! You are correct, the graphs look very similar, except ggplot is
> > scaling the text font to make it more readable. Is there a way to scale
> > down the x-axis labels, so they are readable?
> >
> >
> >
> > On Fri, 7 Jul 2023 at 12:02, PIKAL Petr <petr.pikal at precheza.cz> wrote:
> >
> > Hallo Anupam
> >
> > I do not see much difference in ggplot or lattice, they seems to me
> > provide almost identical results when removing theme part from ggplot.
> >
> > library(ggplot2)
> > library(lattice)
> >
> > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
> geom_point()
> > +
> >   geom_line() + facet_wrap(~Measure)
> >
> > xyplot(Percent ~ Income | Measure, TrialData4,
> >        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
> >
> > So it is probably only matter of your preference which one do you choose.
> >
> > Cheers
> > Petr
> >
> >
> > > -----Original Message-----
> > > From: R-help <r-help-bounces at r-project.org> On Behalf Of Deepayan
> Sarkar
> > > Sent: Thursday, July 6, 2023 3:06 PM
> > > To: Anupam Tyagi <anuptyagi at gmail.com>
> > > Cc: r-help at r-project.org
> > > Subject: Re: [R] Plotting factors in graph panel
> > >
> > > On Thu, 6 Jul 2023 at 15:21, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> > > >
> > > > Btw, I think "lattice" graphics will provide a better solution than
> > > > "ggplot", because it puts appropriate (space saving) markers on the
> > > > axes and does axes labels well. However, I cannot figure out how to
> do
> > > > it in "lattice".
> > >
> > > You will need to convert Income to a factor first. Alternatively, use
> > > dotplot() instead of xyplot(), but that will sort the levels wrongly,
> so
> > better to
> > > make the factor first anyway.
> > >
> > > TrialData4 <- within(TrialData4,
> > > {
> > >     Income <- factor(Income, levels = c("$10", "$25", "$40", "$75", ">
> > $75"))
> > > })
> > >
> > > xyplot(Percent ~ Income | Measure, TrialData4,
> > >        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
> > >
> > > or
> > >
> > > dotplot(Percent ~ Income | Measure, TrialData4,
> > >         type = "o", as.table = TRUE)
> > >
> > > This is not really any different from the ggplot() version though.
> > > Maybe you just don't like the effect of the '+ theme_classic()' part.
> > >
> > > Best,
> > > -Deepayan
> > >
> > >
> > > > On Thu, 6 Jul 2023 at 15:11, Anupam Tyagi <anuptyagi at gmail.com>
> wrote:
> > > >
> > > > > Hi John:
> > > > >
> > > > > Thanks! Below is the data using your suggestion. I used "ggplot" to
> > > > > make a graph. I am not too happy with it. I am looking for
> something
> > > > > simpler and cleaner. Plot is attached.
> > > > >
> > > > > I also tried "lattice" package, but nothing got plotted with
> "xyplot"
> > > > > command, because it is looking for a numeric variable on x-axis.
> > > > >
> > > > > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
> > > > > geom_point()
> > > > > +
> > > > >   geom_line() + facet_wrap(~Measure) + theme_classic()
> > > > >
> > > > > > dput(TrialData4)structure(list(Income = c("$10", "$25", "$40",
> > > > > > "$75", "> $75",
> > > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75"
> > > > > ), Percent = c(3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79,
> > > > > 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27,
> > > > > 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4,
> > > > > 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292,
> 2.244,
> > > > > 1.706, 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64,
> 34.31,
> > > > > 35.65, 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1,
> > > > > 62.17, 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
> > > > > 7.103, 3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51,
> 28.9,
> > > > > 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94, 33.74,
> > > > > 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4, 25, 24.61,
> > > > > 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244, 1.706,
> > > > > 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31,
> 35.65,
> > > > > 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17,
> > > > > 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
> 7.103),
> > > > > Measure = c("MF None", "MF None", "MF None", "MF None", "MF None",
> > > > > "MF Equity", "MF Equity", "MF Equity", "MF Equity", "MF Equity",
> "MF
> > > > > Debt", "MF Debt", "MF Debt", "MF Debt", "MF Debt", "MF Hybrid", "MF
> > > > > Hybrid", "MF Hybrid", "MF Hybrid", "MF Hybrid", "Bank None", "Bank
> > > > > None", "Bank None", "Bank None", "Bank None", "Bank Current", "Bank
> > > > > Current", "Bank Current", "Bank Current", "Bank Current", "Bank
> > > > > Savings", "Bank Savings", "Bank Savings", "Bank Savings", "Bank
> > > > > Savings", "MF None 1", "MF None 1", "MF None 1", "MF None 1", "MF
> > > > > None 1", "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Equity
> 1",
> > > > > "MF Equity 1", "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Debt 1",
> > > > > "MF Debt 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "MF
> Hybrid
> > > > > 1", "MF Hybrid 1", "Bank None 1", "Bank None 1", "Bank None 1",
> > > > > "Bank None 1", "Bank None 1", "Bank Current 1", "Bank Current 1",
> > > > > "Bank Current 1", "Bank Current 1", "Bank Current 1", "Bank Savings
> > > > > 1", "Bank Savings 1", "Bank Savings 1", "Bank Savings 1", "Bank
> > > > > Savings 1", "MF None 2", "MF None 2", "MF None 2", "MF None 2", "MF
> > > > > None 2", "MF Equity 2", "MF Equity 2", "MF Equity 2", "MF Equity
> 2",
> > > > > "MF Equity 2", "MF Debt 2", "MF Debt 2", "MF Debt 2", "MF Debt 2",
> > > > > "MF Debt 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2", "MF
> Hybrid
> > > > > 2", "MF Hybrid 2", "Bank None 2", "Bank None 2", "Bank None 2",
> > > > > "Bank None 2", "Bank None 2", "Bank Current 2", "Bank Current 2",
> > > > > "Bank Current 2", "Bank Current 2", "Bank Current 2", "Bank Savings
> > > > > 2", "Bank Savings 2", "Bank Savings 2", "Bank Savings 2", "Bank
> > > > > Savings 2", "MF None 3", "MF None 3", "MF None 3", "MF None 3", "MF
> > > > > None 3", "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Equity
> 3",
> > > > > "MF Equity 3", "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Debt 3",
> > > > > "MF Debt 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "MF
> Hybrid
> > > > > 3", "MF Hybrid 3", "Bank None 3", "Bank None 3", "Bank None 3",
> > > > > "Bank None 3", "Bank None 3", "Bank Current 3", "Bank Current 3",
> > > > > "Bank Current 3", "Bank Current 3", "Bank Current 3", "Bank Savings
> > > > > 3", "Bank Savings 3", "Bank Savings 3", "Bank Savings 3", "Bank
> > > > > Savings 3")), class = c("tbl_df", "tbl", "data.frame"), row.names =
> > > > > c(NA,
> > > > > -140L))
> > > > >
> > > > >
> > > > >
> > > > >
> > > > > On Thu, 29 Jun 2023 at 21:11, John Kane <jrkrideau at gmail.com>
> wrote:
> > > > >
> > > > >> Anupa,
> > > > >>
> > > > >> I think your  best bet with your data would be to tidy it up in
> > > > >> Excel, read it into  R using something like the readxl package and
> > > > >> then supply some sample data is the dput() function.
> > > > >>
> > > > >> In the case of a large dataset something like dput(head(mydata,
> > > > >> 100)) should supply the data we need. Just do dput(mydata) where
> > > > >> *mydata* is your data. Copy the output and paste it here.
> > > > >>
> > > > >> On Thu, 29 Jun 2023 at 08:37, Ebert,Timothy Aaron <tebert at ufl.edu
> >
> > > wrote:
> > > > >>
> > > > >>> Reposting the data did not help. We do not like to guess, and
> > > > >>> doing so takes a great deal of time that is likely wasted.
> > > > >>> Rows are observations.
> > > > >>> Columns are variables.
> > > > >>> In Excel, the first row will be variable names and all subsequent
> > > > >>> rows will be observations.
> > > > >>>
> > > > >>> Income is the first variable. It has seven states: $10, $25, $40,
> > > > >>> $75,
> > > > >>> >$75, "No", "Answer"
> > > > >>> MF is the second variable. It has six values: 1, 2, 3, 4, 5, 9
> > > > >>> None is the third variable. It has seven values: 1, 3.05,  2.29,
> > > > >>> 2.24, 1.71, 1.30, 2.83 Equity is the last variable with many
> > > > >>> states, both numeric and text. A computer will read it all as
> > > > >>> text.
> > > > >>>
> > > > >>> As written the data cannot be analyzed.
> > > > >>>
> > > > >>> Equity looks like it should be numeric. However, it has text
> > values:
> > > > >>> "Debt", "Hybrid", Bank", "AC", "None", "Current", "Savings",
> "No",
> > > > >>> and "Answer"
> > > > >>>
> > > > >>> In looking at the data I try to find some organization where
> every
> > > > >>> variable has the same number of rows as every other variable. I
> > > > >>> fail with these data.
> > > > >>> I could combine "No" and "Answer" into one name "No Answer" to
> > > > >>> make it agree with MF, but then it does not work for None.
> > > > >>>
> > > > >>>
> > > > >>> Please rework the data in Excel so that we can properly interpret
> > > > >>> the content. If it is badly organized in Excel, moving it to R
> > will not help.
> > > > >>> Below, I tried adding carriage returns and spaces to organize the
> > > > >>> data, but I have a column of numbers that are not identified. The
> > > > >>> values below
> > > > >>> $10 do not make much sense compared to other values.
> > > > >>>
> > > > >>> I am tired of guessing.
> > > > >>>
> > > > >>> Tim
> > > > >>>
> > > > >>> -----Original Message-----
> > > > >>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam
> > > > >>> Tyagi
> > > > >>> Sent: Wednesday, June 28, 2023 11:49 PM
> > > > >>> To: r-help at r-project.org
> > > > >>> Subject: Re: [R] Plotting factors in graph panel
> > > > >>>
> > > > >>> [External Email]
> > > > >>>
> > > > >>> Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope
> > > > >>> you have been well.
> > > > >>>
> > > > >>> Pikal, thanks. Your solution may be close to what I want. I did
> > > > >>> not know that I was posting in HTML. I just copied the data from
> > > > >>> Excel and posted in the email in Gmail. The data is still in
> > > > >>> Excel, because I have not yet figured out what is a good way to
> > > > >>> organize it in R. I am posting it again below as text. These are
> > > > >>> rows in Excel: 1,2,3,5,9 after MF are income categories and No
> > > > >>> Answer category (9). Down the second column are categories of MF
> > > and Bank AC. Rest of the columns are percentages.
> > > > >>>
> > > > >>> Jim, thanks for the graph. I am looking to plot only one line
> > > > >>> (category) each in many small plots on the same page. I don't
> want
> > > > >>> to compare different categories on the same graph as you do, but
> > > > >>> see how each category varies by income, one category in each
> > > > >>> graph. Like Excel does with Sparklines (Top menu: Insert,
> > > > >>> Sparklines, Lines). I have many categories for many variables. I
> > am only
> > > showing two MF and Bank AC.
> > > > >>>
> > > > >>> Income        $10 $25     $40      $75   > $75    No Answer
> > > > >>> MF                   1      2         3           4         5
> >     9
> > > > >>> None               1   3.05     2.29    2.24     1.71    1.30
> > > > >>>    2.83
> > > > >>> Equity             2    29.76  28.79  29.51 28.90   31.67
> > > > >>> 36.77
> > > > >>>
> > > > >>> Debt                3  31.18  32.64  34.31  35.65  37.59
> > > > >>>  33.15
> > > > >>>
> > > > >>> Hybrid              4 36.00 36.27 33.94 33.74 29.44 27.25
> > > > >>>
> > > > >>> Bank AC None 1 46.54 54.01 59.1 62.17 67.67 60.87
> > > > >>>
> > > > >>> Current            2 24.75 24.4 25 24.61 24.02 21.09
> > > > >>>
> > > > >>> Savings             3 25.4 18.7 29 11.48 7.103 13.46
> > > > >>>
> > > > >>> No Answer       9 3.307 2.891 13.4 1.746 1.208 4.577
> > > > >>>
> > > > >>>
> > > > >>> On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com>
> > > wrote:
> > > > >>>
> > > > >>> > Hi Anupam,
> > > > >>> > Haven't heard from you in a long time. Perhaps you want
> > > > >>> > something like
> > > > >>> > this:
> > > > >>> >
> > > > >>> > at_df<-read.table(text=
> > > > >>> >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None
> > > > >>> > Bank_Current Bank_Savings Bank_NA
> > > > >>> >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> > > > >>> >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> > > > >>> >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> > > > >>> >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> > > > >>> >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
> > > > >>> > No_Answer 9
> > > > >>> > 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> > > > >>> >  header=TRUE,stringsAsFactors=FALSE)
> > > > >>> > at_df<-
> > > at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank
> > > > >>> > _NA")]
> > > > >>> > png("MF_Bank.png",height=600)
> > > > >>> > par(mfrow=c(2,1))
> > > > >>> > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
> > > > >>> >  type="l",col=1:4,lty=1:4,lwd=3,  main="Percentages by Income
> > > > >>> > and MF type", xlab="Income",ylab="Percentage of
> group",xaxt="n")
> > > > >>> > axis(1,at=1:5,labels=at_df$Income)
> > > > >>> > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
> > > > >>> >  lty=1:4,lwd=3,col=1:4)
> > > > >>> > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
> > > > >>> >  type="l",col=1:3,lty=1:4,lwd=3,  main="Percentages by Income
> > > > >>> > and Bank type", xlab="Income",ylab="Percentage of
> > > > >>> > group",xaxt="n")
> > > > >>> > axis(1,at=1:5,labels=at_df$Income)
> > > > >>> > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
> > > > >>> >  lty=1:4,lwd=3,col=1:3)
> > > > >>> > dev.off()
> > > > >>> >
> > > > >>> > Jim
> > > > >>> >
> > > > >>> > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi
> > > > >>> > <anuptyagi at gmail.com>
> > > > >>> wrote:
> > > > >>> > >
> > > > >>> > > Hello,
> > > > >>> > >
> > > > >>> > > I want to plot the following kind of data (percentage of
> > > > >>> > > respondents
> > > > >>> > from a
> > > > >>> > > survey) that varies by Income into many small *line* graphs
> in
> > > > >>> > > a panel of graphs. I want to omit "No Answer" categories. I
> > > > >>> > > want to see how each one of the categories (percentages),
> > > > >>> > > "None", " Equity", etc. varies by
> > > > >>> > Income.
> > > > >>> > > How can I do this? How to organize the data well and how to
> > > > >>> > > plot? I
> > > > >>> > thought
> > > > >>> > > Lattice may be a good package to plot this, but I don't know
> > > > >>> > > for sure. I prefer to do this in Base-R if possible, but I am
> > > > >>> > > open to ggplot. Any
> > > > >>> > ideas
> > > > >>> > > will be helpful.
> > > > >>> > >
> > > > >>> > > Income
> > > > >>> > > $10 $25 $40 $75 > $75 No Answer MF 1 2 3 4 5 9 None 1 3.05
> > > > >>> > > 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51
> > > > >>> > > 28.90 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
> > > > >>> > > Hybrid
> > > > >>> > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54
> > > > >>> > > 54.01
> > > > >>> > > 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02
> > > > >>> > > 21.09 Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9
> > > > >>> > > 3.307 2.891
> > > > >>> > > 13.4 1.746 1.208 4.577
> > > > >>> > >
> > > > >>> > > Thanks.
> > > > >>> > > --
> > > > >>> > > Anupam.
> > > > >>> > >
> > > > >>> > >         [[alternative HTML version deleted]]
> > > > >>> > >
> > > > >>> > > ______________________________________________
> > > > >>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
> more,
> > > > >>> > > see https://st/
> > > > >>> > > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-
> > > help&data=05%7C01%7Ctebert
> > > > >>> > > %40ufl
> > > > >>> > >
> > > .edu%7C59874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace6
> > > > >>> > > 0a6233
> > > > >>> > >
> > > 1e1b84%7C0%7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d
> > > 8ey
> > > > >>> > > JWIjoi
> > > > >>> > >
> > > MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3
> > > > >>> > > 000%7C
> > > > >>> > >
> > > %7C%7C&sdata=xoaDMG7ogY4tMtqe30pONZrBdk0eq2cW%2BgdwlDHneWY
> > > %3D&
> > > > >>> > > reserv
> > > > >>> > > ed=0
> > > > >>> > > PLEASE do read the posting guide
> > > > >>> > http://www.r/
> > > > >>> > -project.org%2Fposting-
> > > guide.html&data=05%7C01%7Ctebert%40ufl.ed
> > > > >>> > u%7C59
> > > > >>> >
> > > 874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a62331e1b8
> > > > >>> > 4%7C0%
> > > > >>> >
> > > 7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4
> > > wLjA
> > > > >>> > wMDAiL
> > > > >>> >
> > > CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sd
> > > > >>> > ata=H7
> > > > >>> >
> > > 6XCa%2FULBGUn0Lok93l6mtHzo0snq5G0a%2BL4sEH8%2F8%3D&reserved=0
> > > > >>> > > and provide commented, minimal, self-contained, reproducible
> > > code.
> > > > >>> >
> > > > >>>
> > > > >>>
> > > > >>> --
> > > > >>> Anupam.
> > > > >>>
> > > > >>>         [[alternative HTML version deleted]]
> > > > >>>
> > > > >>> ______________________________________________
> > > > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> see
> > > > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > > > >>> PLEASE do read the posting guide
> > > > >>> http://www.r-project.org/posting-guide.html
> > > > >>> and provide commented, minimal, self-contained, reproducible
> code.
> > > > >>> ______________________________________________
> > > > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> see
> > > > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > > > >>> PLEASE do read the posting guide
> > > > >>> http://www.R-project.org/posting-guide.html
> > > > >>> and provide commented, minimal, self-contained, reproducible
> code.
> > > > >>>
> > > > >>
> > > > >>
> > > > >> --
> > > > >> John Kane
> > > > >> Kingston ON Canada
> > > > >>
> > > > >
> > > > >
> > > > > --
> > > > > Anupam.
> > > > >
> > > > >
> > > >
> > > > --
> > > > Anupam.
> > > >
> > > >         [[alternative HTML version deleted]]
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide
> > > > http://www.R-project.org/posting-guide.html
> > > > and provide commented, minimal, self-contained, reproducible code.
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-
> > > guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> >
> >
> >
> > --
> >
> > Anupam.
> >
>
>
> --
> Anupam.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @nupty@g| @end|ng |rom gm@||@com  Wed Jul 12 06:12:04 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Wed, 12 Jul 2023 09:42:04 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CADfFDC4UqC943PtmVsuEo4igKWuL8pveJsy5YQ0qa-0HDSBBdQ@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CH3PR22MB4514251DCFE77C2E74C285A8CF25A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
 <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>
 <CAFL9eu=QJG8X9PDG0RNxP88TicefE_DAgnkK-nxWkD9oLt6Z0g@mail.gmail.com>
 <CADfFDC4hrX8huz2HnDMLM=WT+z5UttBfk8rQeOGwLj14CZN2Pw@mail.gmail.com>
 <ac95f337b83240d5836169c02548d0d4@SRVEXCHCM1302.precheza.cz>
 <CAFL9eunWEer8nXQ52jsrvicdvDokyZHfTWrOsstRyyW37hm+nQ@mail.gmail.com>
 <2cdced6c2c8b492ea94099f51d482970@SRVEXCHCM1302.precheza.cz>
 <CAFL9eunmj9+NvNmzM20YDXwDFxKZM25A0axUNk2_n-1+miSsBg@mail.gmail.com>
 <CADfFDC4UqC943PtmVsuEo4igKWuL8pveJsy5YQ0qa-0HDSBBdQ@mail.gmail.com>
Message-ID: <CAFL9eu=xc62U-avWvrzKamBcpdntnLTO6L+REQjurxNaEwp0jQ@mail.gmail.com>

Wonderful! This is great news. Thanks, Deepayan.

On Wed, 12 Jul 2023 at 09:21, Deepayan Sarkar <deepayan.sarkar at gmail.com>
wrote:

>
>
> On Wed, 12 Jul 2023 at 08:57, Anupam Tyagi <anuptyagi at gmail.com> wrote:
>
>> Thanks.
>> I made a graph in Stata that is close to what I want in R. Stata graph is
>> attached. The main differences between Stata and R graphs that I was able
>> to make, with ggplot or lattice, is that I have been able to scale y-axis
>> of each sub-graph independently in Stata, but not in R. Also, x-axis
>> labels
>> are also complete in Stata but not in R. Is there a way to do this in R
>> via
>> base-R, ggplot or lattice?
>
>
> Yes, of course. For lattice, add the argument
>
> scales = list(y = "free")
>
> For ggplot2, change
>
> facet_wrap(~Measure)
>
> to
>
> facet_wrap(~Measure, scale = "free")
>
> -Deepayan
>
> I had initially thought that these types of
>> panel graphs are common and should be easy to do, but that is not how this
>> is turning out to be. Any help is welcome.
>>
>
>> On Fri, 7 Jul 2023 at 17:57, PIKAL Petr <petr.pikal at precheza.cz> wrote:
>>
>> > Hallo Anupam
>> >
>> > With
>> >
>> > ggplot change axis label size into Google
>> >
>> > the first answer I got was
>> >
>> > axis.text theme
>> >
>> > r - Change size of axes title and labels in ggplot2 - Stack Overflow
>> > <
>> https://stackoverflow.com/questions/14942681/change-size-of-axes-title-and-labels-in-ggplot2
>> >
>> >
>> >
>> >
>> > so
>> >
>> >
>> >
>> > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
>> geom_point()
>> > +
>> >   geom_line() + facet_wrap(~Measure) +
>> > theme(axis.text=element_text(size=5))
>> >
>> >
>> >
>> > Should do the trick.
>> >
>> >
>> >
>> > S pozdravem | Best Regards
>> >
>> >
>> > *RNDr. Petr PIKAL*Vedouc? V?zkumu a v?voje | Research Manager
>> >
>> >
>> > *PRECHEZA a.s.*n?b?. Dr. Edvarda Bene?e 1170/24 | 750 02 P?erov | Czech
>> > Republic
>> > Tel: +420 581 252 256 | GSM: +420 724 008 364
>> > petr.pikal at precheza.cz | *www.precheza.cz <https://www.precheza.cz/>*
>> >
>> > *Osobn? ?daje: *Informace o zpracov?n? a ochran? osobn?ch ?daj?
>> > obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: *
>> https://www.precheza.cz/zasady-ochrany-osobnich-udaju/
>> > <https://www.precheza.cz/zasady-ochrany-osobnich-udaju/>* | Information
>> > about processing and protection of business partner?s personal data are
>> > available on website: *
>> https://www.precheza.cz/en/personal-data-protection-principles/
>> > <https://www.precheza.cz/en/personal-data-protection-principles/>*
>> >
>> > *D?v?rnost: *Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
>> > d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
>> > odpov?dnosti: *https://www.precheza.cz/01-dovetek/
>> > <https://www.precheza.cz/01-dovetek/>* | This email and any documents
>> > attached to it may be confidential and are subject to the legally
>> binding
>> > disclaimer: *https://www.precheza.cz/en/01-disclaimer/
>> > <https://www.precheza.cz/en/01-disclaimer/>*
>> >
>> >
>> >
>> > *From:* Anupam Tyagi <anuptyagi at gmail.com>
>> > *Sent:* Friday, July 7, 2023 12:48 PM
>> > *To:* PIKAL Petr <petr.pikal at precheza.cz>
>> > *Cc:* r-help at r-project.org
>> > *Subject:* Re: [R] Plotting factors in graph panel
>> >
>> >
>> >
>> > Thanks! You are correct, the graphs look very similar, except ggplot is
>> > scaling the text font to make it more readable. Is there a way to scale
>> > down the x-axis labels, so they are readable?
>> >
>> >
>> >
>> > On Fri, 7 Jul 2023 at 12:02, PIKAL Petr <petr.pikal at precheza.cz> wrote:
>> >
>> > Hallo Anupam
>> >
>> > I do not see much difference in ggplot or lattice, they seems to me
>> > provide almost identical results when removing theme part from ggplot.
>> >
>> > library(ggplot2)
>> > library(lattice)
>> >
>> > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
>> geom_point()
>> > +
>> >   geom_line() + facet_wrap(~Measure)
>> >
>> > xyplot(Percent ~ Income | Measure, TrialData4,
>> >        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
>> >
>> > So it is probably only matter of your preference which one do you
>> choose.
>> >
>> > Cheers
>> > Petr
>> >
>> >
>> > > -----Original Message-----
>> > > From: R-help <r-help-bounces at r-project.org> On Behalf Of Deepayan
>> Sarkar
>> > > Sent: Thursday, July 6, 2023 3:06 PM
>> > > To: Anupam Tyagi <anuptyagi at gmail.com>
>> > > Cc: r-help at r-project.org
>> > > Subject: Re: [R] Plotting factors in graph panel
>> > >
>> > > On Thu, 6 Jul 2023 at 15:21, Anupam Tyagi <anuptyagi at gmail.com>
>> wrote:
>> > > >
>> > > > Btw, I think "lattice" graphics will provide a better solution than
>> > > > "ggplot", because it puts appropriate (space saving) markers on the
>> > > > axes and does axes labels well. However, I cannot figure out how to
>> do
>> > > > it in "lattice".
>> > >
>> > > You will need to convert Income to a factor first. Alternatively, use
>> > > dotplot() instead of xyplot(), but that will sort the levels wrongly,
>> so
>> > better to
>> > > make the factor first anyway.
>> > >
>> > > TrialData4 <- within(TrialData4,
>> > > {
>> > >     Income <- factor(Income, levels = c("$10", "$25", "$40", "$75", ">
>> > $75"))
>> > > })
>> > >
>> > > xyplot(Percent ~ Income | Measure, TrialData4,
>> > >        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
>> > >
>> > > or
>> > >
>> > > dotplot(Percent ~ Income | Measure, TrialData4,
>> > >         type = "o", as.table = TRUE)
>> > >
>> > > This is not really any different from the ggplot() version though.
>> > > Maybe you just don't like the effect of the '+ theme_classic()' part.
>> > >
>> > > Best,
>> > > -Deepayan
>> > >
>> > >
>> > > > On Thu, 6 Jul 2023 at 15:11, Anupam Tyagi <anuptyagi at gmail.com>
>> wrote:
>> > > >
>> > > > > Hi John:
>> > > > >
>> > > > > Thanks! Below is the data using your suggestion. I used "ggplot"
>> to
>> > > > > make a graph. I am not too happy with it. I am looking for
>> something
>> > > > > simpler and cleaner. Plot is attached.
>> > > > >
>> > > > > I also tried "lattice" package, but nothing got plotted with
>> "xyplot"
>> > > > > command, because it is looking for a numeric variable on x-axis.
>> > > > >
>> > > > > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
>> > > > > geom_point()
>> > > > > +
>> > > > >   geom_line() + facet_wrap(~Measure) + theme_classic()
>> > > > >
>> > > > > > dput(TrialData4)structure(list(Income = c("$10", "$25", "$40",
>> > > > > > "$75", "> $75",
>> > > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
>> ">
>> > > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
>> > > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
>> > > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
>> > > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
>> > > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
>> ">
>> > > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
>> > > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
>> > > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
>> > > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
>> > > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
>> ">
>> > > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
>> > > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
>> > > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
>> > > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75"
>> > > > > ), Percent = c(3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79,
>> > > > > 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27,
>> > > > > 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75,
>> 24.4,
>> > > > > 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292,
>> 2.244,
>> > > > > 1.706, 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64,
>> 34.31,
>> > > > > 35.65, 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1,
>> > > > > 62.17, 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29,
>> 11.48,
>> > > > > 7.103, 3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51,
>> 28.9,
>> > > > > 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94, 33.74,
>> > > > > 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4, 25, 24.61,
>> > > > > 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244, 1.706,
>> > > > > 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31,
>> 35.65,
>> > > > > 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17,
>> > > > > 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
>> 7.103),
>> > > > > Measure = c("MF None", "MF None", "MF None", "MF None", "MF None",
>> > > > > "MF Equity", "MF Equity", "MF Equity", "MF Equity", "MF Equity",
>> "MF
>> > > > > Debt", "MF Debt", "MF Debt", "MF Debt", "MF Debt", "MF Hybrid",
>> "MF
>> > > > > Hybrid", "MF Hybrid", "MF Hybrid", "MF Hybrid", "Bank None", "Bank
>> > > > > None", "Bank None", "Bank None", "Bank None", "Bank Current",
>> "Bank
>> > > > > Current", "Bank Current", "Bank Current", "Bank Current", "Bank
>> > > > > Savings", "Bank Savings", "Bank Savings", "Bank Savings", "Bank
>> > > > > Savings", "MF None 1", "MF None 1", "MF None 1", "MF None 1", "MF
>> > > > > None 1", "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Equity
>> 1",
>> > > > > "MF Equity 1", "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Debt 1",
>> > > > > "MF Debt 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "MF
>> Hybrid
>> > > > > 1", "MF Hybrid 1", "Bank None 1", "Bank None 1", "Bank None 1",
>> > > > > "Bank None 1", "Bank None 1", "Bank Current 1", "Bank Current 1",
>> > > > > "Bank Current 1", "Bank Current 1", "Bank Current 1", "Bank
>> Savings
>> > > > > 1", "Bank Savings 1", "Bank Savings 1", "Bank Savings 1", "Bank
>> > > > > Savings 1", "MF None 2", "MF None 2", "MF None 2", "MF None 2",
>> "MF
>> > > > > None 2", "MF Equity 2", "MF Equity 2", "MF Equity 2", "MF Equity
>> 2",
>> > > > > "MF Equity 2", "MF Debt 2", "MF Debt 2", "MF Debt 2", "MF Debt 2",
>> > > > > "MF Debt 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2", "MF
>> Hybrid
>> > > > > 2", "MF Hybrid 2", "Bank None 2", "Bank None 2", "Bank None 2",
>> > > > > "Bank None 2", "Bank None 2", "Bank Current 2", "Bank Current 2",
>> > > > > "Bank Current 2", "Bank Current 2", "Bank Current 2", "Bank
>> Savings
>> > > > > 2", "Bank Savings 2", "Bank Savings 2", "Bank Savings 2", "Bank
>> > > > > Savings 2", "MF None 3", "MF None 3", "MF None 3", "MF None 3",
>> "MF
>> > > > > None 3", "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Equity
>> 3",
>> > > > > "MF Equity 3", "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Debt 3",
>> > > > > "MF Debt 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "MF
>> Hybrid
>> > > > > 3", "MF Hybrid 3", "Bank None 3", "Bank None 3", "Bank None 3",
>> > > > > "Bank None 3", "Bank None 3", "Bank Current 3", "Bank Current 3",
>> > > > > "Bank Current 3", "Bank Current 3", "Bank Current 3", "Bank
>> Savings
>> > > > > 3", "Bank Savings 3", "Bank Savings 3", "Bank Savings 3", "Bank
>> > > > > Savings 3")), class = c("tbl_df", "tbl", "data.frame"), row.names
>> =
>> > > > > c(NA,
>> > > > > -140L))
>> > > > >
>> > > > >
>> > > > >
>> > > > >
>> > > > > On Thu, 29 Jun 2023 at 21:11, John Kane <jrkrideau at gmail.com>
>> wrote:
>> > > > >
>> > > > >> Anupa,
>> > > > >>
>> > > > >> I think your  best bet with your data would be to tidy it up in
>> > > > >> Excel, read it into  R using something like the readxl package
>> and
>> > > > >> then supply some sample data is the dput() function.
>> > > > >>
>> > > > >> In the case of a large dataset something like dput(head(mydata,
>> > > > >> 100)) should supply the data we need. Just do dput(mydata) where
>> > > > >> *mydata* is your data. Copy the output and paste it here.
>> > > > >>
>> > > > >> On Thu, 29 Jun 2023 at 08:37, Ebert,Timothy Aaron <
>> tebert at ufl.edu>
>> > > wrote:
>> > > > >>
>> > > > >>> Reposting the data did not help. We do not like to guess, and
>> > > > >>> doing so takes a great deal of time that is likely wasted.
>> > > > >>> Rows are observations.
>> > > > >>> Columns are variables.
>> > > > >>> In Excel, the first row will be variable names and all
>> subsequent
>> > > > >>> rows will be observations.
>> > > > >>>
>> > > > >>> Income is the first variable. It has seven states: $10, $25,
>> $40,
>> > > > >>> $75,
>> > > > >>> >$75, "No", "Answer"
>> > > > >>> MF is the second variable. It has six values: 1, 2, 3, 4, 5, 9
>> > > > >>> None is the third variable. It has seven values: 1, 3.05,  2.29,
>> > > > >>> 2.24, 1.71, 1.30, 2.83 Equity is the last variable with many
>> > > > >>> states, both numeric and text. A computer will read it all as
>> > > > >>> text.
>> > > > >>>
>> > > > >>> As written the data cannot be analyzed.
>> > > > >>>
>> > > > >>> Equity looks like it should be numeric. However, it has text
>> > values:
>> > > > >>> "Debt", "Hybrid", Bank", "AC", "None", "Current", "Savings",
>> "No",
>> > > > >>> and "Answer"
>> > > > >>>
>> > > > >>> In looking at the data I try to find some organization where
>> every
>> > > > >>> variable has the same number of rows as every other variable. I
>> > > > >>> fail with these data.
>> > > > >>> I could combine "No" and "Answer" into one name "No Answer" to
>> > > > >>> make it agree with MF, but then it does not work for None.
>> > > > >>>
>> > > > >>>
>> > > > >>> Please rework the data in Excel so that we can properly
>> interpret
>> > > > >>> the content. If it is badly organized in Excel, moving it to R
>> > will not help.
>> > > > >>> Below, I tried adding carriage returns and spaces to organize
>> the
>> > > > >>> data, but I have a column of numbers that are not identified.
>> The
>> > > > >>> values below
>> > > > >>> $10 do not make much sense compared to other values.
>> > > > >>>
>> > > > >>> I am tired of guessing.
>> > > > >>>
>> > > > >>> Tim
>> > > > >>>
>> > > > >>> -----Original Message-----
>> > > > >>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam
>> > > > >>> Tyagi
>> > > > >>> Sent: Wednesday, June 28, 2023 11:49 PM
>> > > > >>> To: r-help at r-project.org
>> > > > >>> Subject: Re: [R] Plotting factors in graph panel
>> > > > >>>
>> > > > >>> [External Email]
>> > > > >>>
>> > > > >>> Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope
>> > > > >>> you have been well.
>> > > > >>>
>> > > > >>> Pikal, thanks. Your solution may be close to what I want. I did
>> > > > >>> not know that I was posting in HTML. I just copied the data from
>> > > > >>> Excel and posted in the email in Gmail. The data is still in
>> > > > >>> Excel, because I have not yet figured out what is a good way to
>> > > > >>> organize it in R. I am posting it again below as text. These are
>> > > > >>> rows in Excel: 1,2,3,5,9 after MF are income categories and No
>> > > > >>> Answer category (9). Down the second column are categories of MF
>> > > and Bank AC. Rest of the columns are percentages.
>> > > > >>>
>> > > > >>> Jim, thanks for the graph. I am looking to plot only one line
>> > > > >>> (category) each in many small plots on the same page. I don't
>> want
>> > > > >>> to compare different categories on the same graph as you do, but
>> > > > >>> see how each category varies by income, one category in each
>> > > > >>> graph. Like Excel does with Sparklines (Top menu: Insert,
>> > > > >>> Sparklines, Lines). I have many categories for many variables. I
>> > am only
>> > > showing two MF and Bank AC.
>> > > > >>>
>> > > > >>> Income        $10 $25     $40      $75   > $75    No Answer
>> > > > >>> MF                   1      2         3           4         5
>> >     9
>> > > > >>> None               1   3.05     2.29    2.24     1.71    1.30
>> > > > >>>    2.83
>> > > > >>> Equity             2    29.76  28.79  29.51 28.90   31.67
>> > > > >>> 36.77
>> > > > >>>
>> > > > >>> Debt                3  31.18  32.64  34.31  35.65  37.59
>> > > > >>>  33.15
>> > > > >>>
>> > > > >>> Hybrid              4 36.00 36.27 33.94 33.74 29.44 27.25
>> > > > >>>
>> > > > >>> Bank AC None 1 46.54 54.01 59.1 62.17 67.67 60.87
>> > > > >>>
>> > > > >>> Current            2 24.75 24.4 25 24.61 24.02 21.09
>> > > > >>>
>> > > > >>> Savings             3 25.4 18.7 29 11.48 7.103 13.46
>> > > > >>>
>> > > > >>> No Answer       9 3.307 2.891 13.4 1.746 1.208 4.577
>> > > > >>>
>> > > > >>>
>> > > > >>> On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com>
>> > > wrote:
>> > > > >>>
>> > > > >>> > Hi Anupam,
>> > > > >>> > Haven't heard from you in a long time. Perhaps you want
>> > > > >>> > something like
>> > > > >>> > this:
>> > > > >>> >
>> > > > >>> > at_df<-read.table(text=
>> > > > >>> >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None
>> > > > >>> > Bank_Current Bank_Savings Bank_NA
>> > > > >>> >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
>> > > > >>> >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
>> > > > >>> >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
>> > > > >>> >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
>> > > > >>> >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
>> > > > >>> > No_Answer 9
>> > > > >>> > 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
>> > > > >>> >  header=TRUE,stringsAsFactors=FALSE)
>> > > > >>> > at_df<-
>> > > at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank
>> > > > >>> > _NA")]
>> > > > >>> > png("MF_Bank.png",height=600)
>> > > > >>> > par(mfrow=c(2,1))
>> > > > >>> >
>> matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
>> > > > >>> >  type="l",col=1:4,lty=1:4,lwd=3,  main="Percentages by Income
>> > > > >>> > and MF type", xlab="Income",ylab="Percentage of
>> group",xaxt="n")
>> > > > >>> > axis(1,at=1:5,labels=at_df$Income)
>> > > > >>> > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
>> > > > >>> >  lty=1:4,lwd=3,col=1:4)
>> > > > >>> > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
>> > > > >>> >  type="l",col=1:3,lty=1:4,lwd=3,  main="Percentages by Income
>> > > > >>> > and Bank type", xlab="Income",ylab="Percentage of
>> > > > >>> > group",xaxt="n")
>> > > > >>> > axis(1,at=1:5,labels=at_df$Income)
>> > > > >>> > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
>> > > > >>> >  lty=1:4,lwd=3,col=1:3)
>> > > > >>> > dev.off()
>> > > > >>> >
>> > > > >>> > Jim
>> > > > >>> >
>> > > > >>> > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi
>> > > > >>> > <anuptyagi at gmail.com>
>> > > > >>> wrote:
>> > > > >>> > >
>> > > > >>> > > Hello,
>> > > > >>> > >
>> > > > >>> > > I want to plot the following kind of data (percentage of
>> > > > >>> > > respondents
>> > > > >>> > from a
>> > > > >>> > > survey) that varies by Income into many small *line* graphs
>> in
>> > > > >>> > > a panel of graphs. I want to omit "No Answer" categories. I
>> > > > >>> > > want to see how each one of the categories (percentages),
>> > > > >>> > > "None", " Equity", etc. varies by
>> > > > >>> > Income.
>> > > > >>> > > How can I do this? How to organize the data well and how to
>> > > > >>> > > plot? I
>> > > > >>> > thought
>> > > > >>> > > Lattice may be a good package to plot this, but I don't know
>> > > > >>> > > for sure. I prefer to do this in Base-R if possible, but I
>> am
>> > > > >>> > > open to ggplot. Any
>> > > > >>> > ideas
>> > > > >>> > > will be helpful.
>> > > > >>> > >
>> > > > >>> > > Income
>> > > > >>> > > $10 $25 $40 $75 > $75 No Answer MF 1 2 3 4 5 9 None 1 3.05
>> > > > >>> > > 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51
>> > > > >>> > > 28.90 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
>> > > > >>> > > Hybrid
>> > > > >>> > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54
>> > > > >>> > > 54.01
>> > > > >>> > > 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02
>> > > > >>> > > 21.09 Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9
>> > > > >>> > > 3.307 2.891
>> > > > >>> > > 13.4 1.746 1.208 4.577
>> > > > >>> > >
>> > > > >>> > > Thanks.
>> > > > >>> > > --
>> > > > >>> > > Anupam.
>> > > > >>> > >
>> > > > >>> > >         [[alternative HTML version deleted]]
>> > > > >>> > >
>> > > > >>> > > ______________________________________________
>> > > > >>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>> more,
>> > > > >>> > > see https://st/
>> > > > >>> > > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-
>> > > help&data=05%7C01%7Ctebert
>> > > > >>> > > %40ufl
>> > > > >>> > >
>> > > .edu%7C59874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace6
>> > > > >>> > > 0a6233
>> > > > >>> > >
>> > > 1e1b84%7C0%7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d
>> > > 8ey
>> > > > >>> > > JWIjoi
>> > > > >>> > >
>> > > MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3
>> > > > >>> > > 000%7C
>> > > > >>> > >
>> > > %7C%7C&sdata=xoaDMG7ogY4tMtqe30pONZrBdk0eq2cW%2BgdwlDHneWY
>> > > %3D&
>> > > > >>> > > reserv
>> > > > >>> > > ed=0
>> > > > >>> > > PLEASE do read the posting guide
>> > > > >>> > http://www.r/
>> > > > >>> > -project.org%2Fposting-
>> > > guide.html&data=05%7C01%7Ctebert%40ufl.ed
>> > > > >>> > u%7C59
>> > > > >>> >
>> > > 874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a62331e1b8
>> > > > >>> > 4%7C0%
>> > > > >>> >
>> > > 7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4
>> > > wLjA
>> > > > >>> > wMDAiL
>> > > > >>> >
>> > > CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sd
>> > > > >>> > ata=H7
>> > > > >>> >
>> > > 6XCa%2FULBGUn0Lok93l6mtHzo0snq5G0a%2BL4sEH8%2F8%3D&reserved=0
>> > > > >>> > > and provide commented, minimal, self-contained, reproducible
>> > > code.
>> > > > >>> >
>> > > > >>>
>> > > > >>>
>> > > > >>> --
>> > > > >>> Anupam.
>> > > > >>>
>> > > > >>>         [[alternative HTML version deleted]]
>> > > > >>>
>> > > > >>> ______________________________________________
>> > > > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
>> see
>> > > > >>> https://stat.ethz.ch/mailman/listinfo/r-help
>> > > > >>> PLEASE do read the posting guide
>> > > > >>> http://www.r-project.org/posting-guide.html
>> > > > >>> and provide commented, minimal, self-contained, reproducible
>> code.
>> > > > >>> ______________________________________________
>> > > > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
>> see
>> > > > >>> https://stat.ethz.ch/mailman/listinfo/r-help
>> > > > >>> PLEASE do read the posting guide
>> > > > >>> http://www.R-project.org/posting-guide.html
>> > > > >>> and provide commented, minimal, self-contained, reproducible
>> code.
>> > > > >>>
>> > > > >>
>> > > > >>
>> > > > >> --
>> > > > >> John Kane
>> > > > >> Kingston ON Canada
>> > > > >>
>> > > > >
>> > > > >
>> > > > > --
>> > > > > Anupam.
>> > > > >
>> > > > >
>> > > >
>> > > > --
>> > > > Anupam.
>> > > >
>> > > >         [[alternative HTML version deleted]]
>> > > >
>> > > > ______________________________________________
>> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > > > https://stat.ethz.ch/mailman/listinfo/r-help
>> > > > PLEASE do read the posting guide
>> > > > http://www.R-project.org/posting-guide.html
>> > > > and provide commented, minimal, self-contained, reproducible code.
>> > >
>> > > ______________________________________________
>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > > https://stat.ethz.ch/mailman/listinfo/r-help
>> > > PLEASE do read the posting guide http://www.R-project.org/posting-
>> > > guide.html
>> > > and provide commented, minimal, self-contained, reproducible code.
>> >
>> >
>> >
>> >
>> > --
>> >
>> > Anupam.
>> >
>>
>>
>> --
>> Anupam.
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

-- 
Anupam.

	[[alternative HTML version deleted]]


From tg@77m @end|ng |rom y@hoo@com  Wed Jul 12 07:37:30 2023
From: tg@77m @end|ng |rom y@hoo@com (Thomas Subia)
Date: Wed, 12 Jul 2023 05:37:30 +0000 (UTC)
Subject: [R] prop.test question
References: <583346509.2893700.1689140250616.ref@mail.yahoo.com>
Message-ID: <583346509.2893700.1689140250616@mail.yahoo.com>

Colleagues
Consider:smokers? <- c( 83, 90, 129, 70 )
patients <- c( 86, 93, 136, 82 )
prop.test(smokers, patients)
??? 4-sample test for equality of proportions
?? ?without continuity correction

data:? smokers out of patients
X-squared = 12.6, df = 3, p-value = 0.005585
alternative hypothesis: two.sided
sample estimates:
?? prop 1??? prop 2??????? prop 3??????? prop 4 
0.9651163 0.9677419 0.9485294 0.8536585 

Now:prop.trend.test(smokers, patients)??? Chi-squared Test for Trend in Proportions

data:? smokers out of patients ,
?using scores: 1 2 3 4
X-squared = 8.2249, df = 1, p-value = 0.004132
How can one determine the direction of the trend?
Thomas Subia




	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Wed Jul 12 10:03:27 2023
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Wed, 12 Jul 2023 10:03:27 +0200
Subject: [R] Variable and value labels
In-Reply-To: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
References: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
Message-ID: <25774.24143.211448.339245@stat.math.ethz.ch>

>>>>> Anupam Tyagi 
>>>>>     on Wed, 12 Jul 2023 09:18:55 +0530 writes:

    > Hello,

    > is there an easy way to do variable and value labels (for
    > factor variables) in base-R, without using a package. 

Yes, there are many.
How many help pages (in R , i.e. base-R)  did you consult?

Very general questions as the above are not very useful,
because typically the only concised answer can be yes/no.


    > If not, what is an easy and good way to do labels, using an
    > add-on package.


    > -- 
    > Anupam.

    > 	[[alternative HTML version deleted]]

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    > more, see https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide
    > http://www.R-project.org/posting-guide.html and provide
    > commented, minimal, self-contained, reproducible code.


From @nupty@g| @end|ng |rom gm@||@com  Wed Jul 12 14:10:56 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Wed, 12 Jul 2023 17:40:56 +0530
Subject: [R] Variable and value labels
In-Reply-To: <25774.24143.211448.339245@stat.math.ethz.ch>
References: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
 <25774.24143.211448.339245@stat.math.ethz.ch>
Message-ID: <CAFL9euk+etiLi37D+kAwavTBAY75Lb0LyRWFFiGdPorUibVm-Q@mail.gmail.com>

Thanks. Sorry, I have not consulted help pages, but did a web search. Web
search results are referring to some package or the other for doing labels.
Thanks for letting me know that this can be done in base-R. I will try to
find the relevant information in R documentation.

On Wed, 12 Jul, 2023, 1:33 pm Martin Maechler, <maechler at stat.math.ethz.ch>
wrote:

> >>>>> Anupam Tyagi
> >>>>>     on Wed, 12 Jul 2023 09:18:55 +0530 writes:
>
>     > Hello,
>
>     > is there an easy way to do variable and value labels (for
>     > factor variables) in base-R, without using a package.
>
> Yes, there are many.
> How many help pages (in R , i.e. base-R)  did you consult?
>
> Very general questions as the above are not very useful,
> because typically the only concised answer can be yes/no.
>
>
>     > If not, what is an easy and good way to do labels, using an
>     > add-on package.
>
>
>     > --
>     > Anupam.
>
>     >   [[alternative HTML version deleted]]
>
>     > ______________________________________________
>     > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>     > more, see https://stat.ethz.ch/mailman/listinfo/r-help
>     > PLEASE do read the posting guide
>     > http://www.R-project.org/posting-guide.html and provide
>     > commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Wed Jul 12 16:28:22 2023
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (NP))
Date: Wed, 12 Jul 2023 14:28:22 +0000
Subject: [R] Variable and value labels
In-Reply-To: <CAFL9euk+etiLi37D+kAwavTBAY75Lb0LyRWFFiGdPorUibVm-Q@mail.gmail.com>
References: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
 <25774.24143.211448.339245@stat.math.ethz.ch>
 <CAFL9euk+etiLi37D+kAwavTBAY75Lb0LyRWFFiGdPorUibVm-Q@mail.gmail.com>
Message-ID: <e1f860c1434048b298226d12f55bc2ab@maastrichtuniversity.nl>

For value labels, factor() provides the necessary machinery. For variable labels, one could make use of comment() (something that not too many people seem to know about). To illustrate:

# look at the mtcars dataset
mtcars

# turn 'am' into a factor and use labels for the two possible levels thereof
mtcars$am <- factor(mtcars$am, levels=c(0,1), labels=c("automatic","manual"))
mtcars

# add a variable label via comment()
comment(mtcars$am) <- "Type of transmission"

# extract all the variable labels
sapply(mtcars, comment)

Best,
Wolfgang

>-----Original Message-----
>From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Anupam Tyagi
>Sent: Wednesday, 12 July, 2023 14:11
>To: Martin Maechler
>Cc: r-help mailing list
>Subject: Re: [R] Variable and value labels
>
>Thanks. Sorry, I have not consulted help pages, but did a web search. Web
>search results are referring to some package or the other for doing labels.
>Thanks for letting me know that this can be done in base-R. I will try to
>find the relevant information in R documentation.
>
>On Wed, 12 Jul, 2023, 1:33 pm Martin Maechler, <maechler at stat.math.ethz.ch>
>wrote:
>
>> >>>>> Anupam Tyagi
>> >>>>>     on Wed, 12 Jul 2023 09:18:55 +0530 writes:
>>
>>     > Hello,
>>
>>     > is there an easy way to do variable and value labels (for
>>     > factor variables) in base-R, without using a package.
>>
>> Yes, there are many.
>> How many help pages (in R , i.e. base-R)  did you consult?
>>
>> Very general questions as the above are not very useful,
>> because typically the only concised answer can be yes/no.
>>
>>
>>     > If not, what is an easy and good way to do labels, using an
>>     > add-on package.
>>
>>
>>     > --
>>     > Anupam.


From @nupty@g| @end|ng |rom gm@||@com  Wed Jul 12 17:32:33 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Wed, 12 Jul 2023 21:02:33 +0530
Subject: [R] Variable and value labels
In-Reply-To: <e1f860c1434048b298226d12f55bc2ab@maastrichtuniversity.nl>
References: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
 <25774.24143.211448.339245@stat.math.ethz.ch>
 <CAFL9euk+etiLi37D+kAwavTBAY75Lb0LyRWFFiGdPorUibVm-Q@mail.gmail.com>
 <e1f860c1434048b298226d12f55bc2ab@maastrichtuniversity.nl>
Message-ID: <CAFL9eu=WWAA_kGEcVC_d3tb8RDaJhgfX+3EC8Yj5UxCE_uPELQ@mail.gmail.com>

Very interesting! Thanks!

On Wed, 12 Jul, 2023, 7:58 pm Viechtbauer, Wolfgang (NP), <
wolfgang.viechtbauer at maastrichtuniversity.nl> wrote:

> For value labels, factor() provides the necessary machinery. For variable
> labels, one could make use of comment() (something that not too many people
> seem to know about). To illustrate:
>
> # look at the mtcars dataset
> mtcars
>
> # turn 'am' into a factor and use labels for the two possible levels
> thereof
> mtcars$am <- factor(mtcars$am, levels=c(0,1),
> labels=c("automatic","manual"))
> mtcars
>
> # add a variable label via comment()
> comment(mtcars$am) <- "Type of transmission"
>
> # extract all the variable labels
> sapply(mtcars, comment)
>
> Best,
> Wolfgang
>
> >-----Original Message-----
> >From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Anupam
> Tyagi
> >Sent: Wednesday, 12 July, 2023 14:11
> >To: Martin Maechler
> >Cc: r-help mailing list
> >Subject: Re: [R] Variable and value labels
> >
> >Thanks. Sorry, I have not consulted help pages, but did a web search. Web
> >search results are referring to some package or the other for doing
> labels.
> >Thanks for letting me know that this can be done in base-R. I will try to
> >find the relevant information in R documentation.
> >
> >On Wed, 12 Jul, 2023, 1:33 pm Martin Maechler, <
> maechler at stat.math.ethz.ch>
> >wrote:
> >
> >> >>>>> Anupam Tyagi
> >> >>>>>     on Wed, 12 Jul 2023 09:18:55 +0530 writes:
> >>
> >>     > Hello,
> >>
> >>     > is there an easy way to do variable and value labels (for
> >>     > factor variables) in base-R, without using a package.
> >>
> >> Yes, there are many.
> >> How many help pages (in R , i.e. base-R)  did you consult?
> >>
> >> Very general questions as the above are not very useful,
> >> because typically the only concised answer can be yes/no.
> >>
> >>
> >>     > If not, what is an easy and good way to do labels, using an
> >>     > add-on package.
> >>
> >>
> >>     > --
> >>     > Anupam.
>

	[[alternative HTML version deleted]]


From @vi@e@gross m@iii@g oii gm@ii@com  Wed Jul 12 20:44:42 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Wed, 12 Jul 2023 14:44:42 -0400
Subject: [R] Variable and value labels
In-Reply-To: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
References: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
Message-ID: <005e01d9b4f0$ec59d040$c50d70c0$@gmail.com>

Anupam,

Your question, even after looking at other messages, remains a bit unclear.

What do you mean by "labels"? What you mean by variables and values and how
is that related to factors?

An example or two would be helpful so we can say more than PROBABLY.
Otherwise, you risk having many people here waste lots of time sending
answers to questions you did not ask.

And why an insistence on not using packages? If you are doing something for
a class, sure, you may need to use the basics you were supposedly taught in
class or a textbook. Otherwise, a good set of packages makes code much
easier to write and often more reliable. Realistically, quite a bit of what
some call base R is actually packages deemed useful enough to be included at
startup and that can change.

If you are new to R, note you can attach arbitrary attributes to a variable
and you can have things like named lists where some or all the items have
names as an attribute.

Factors are part of base R and are a completely different concept. You can
use base R to get or set the base levels of a factor and many other things
and there are advantages sometimes in using a vector in factor mode than
plain but also sometimes disadvantages. 

If you ask a more specific and properly explained question, maybe we can
help you.

Specifically, please tell us how you plan on using your labels. As an
example, if I make a named list like this:

mylist <- list(pi=3.14, e=2.7, 666)

then I can access all elements as in mylist[[2]] without a name but
mylist$pi lets me access that item by name and mylist[["e"]] and I can also
change the current values similarly. But without explaining what you want,
my explanation likely is not what you need.

But do note that even if you do not USE a package, you can sometimes use it
indirectly by examining the code for a function you like. If it is primarily
written in R, you may see how it does something and take a part of the code
and use it yourself.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam Tyagi
Sent: Tuesday, July 11, 2023 11:49 PM
To: r-help mailing list <r-help at r-project.org>
Subject: [R] Variable and value labels

Hello,

is there an easy way to do variable and value labels (for factor variables)
in base-R, without using a package. If not, what is an easy and good way to
do labels, using an add-on package.

-- 
Anupam.

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Thu Jul 13 03:17:12 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Thu, 13 Jul 2023 01:17:12 +0000
Subject: [R] ggplot: Can plot graphs with points,
 can't plot graph with points and line
Message-ID: <MW4PR03MB6363CE7C6DFD8C38798773F4E237A@MW4PR03MB6363.namprd03.prod.outlook.com>

I am trying to plot four points, and join the points with lines. I can plot the points, but I can't plot the points and the line.
I hope someone can help my with my ggplot code.

# load ggplot2
if(!require(ggplot2)){install.packages("ggplot2")}
library(ggplot2)

# Create data
Time       <- c("Age.25","Age.35","Age.45","Age.55")
Medians    <-c(128.25,148.75,158.5,168.75)
themedians <- matrix(data=cbind(Time,Medians),nrow=4,ncol=2)
dimnames(themedians) <- list(NULL,c("Time","Median"))
# Convert to dataframe the data format used by ggplot
themedians <- data.frame(themedians)
themedians

# This plot works
ggplot(themedians,aes(x=Time,y=Median))+
  geom_point()
# This plot does not work!
ggplot(themedians,aes(x=Time,y=Median))+
  geom_point()+
  geom_line()

Thank you,
John


From @vi@e@gross m@iii@g oii gm@ii@com  Thu Jul 13 05:20:35 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Wed, 12 Jul 2023 23:20:35 -0400
Subject: [R] Just to you
In-Reply-To: <MW4PR03MB6363CE7C6DFD8C38798773F4E237A@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB6363CE7C6DFD8C38798773F4E237A@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <005101d9b538$fd2b9c30$f782d490$@gmail.com>

John,

I am a tad puzzled at why your code does not work so I tried replicating it.

Let me say you are not plotting what you think. When you plot points using
characters, it LOOKS like it did something but not really. It labels four
equally apart lines (when your data is not linear) and you are getting
nosense. But when you try for lines, using otherwise valid code, it fails.

Based on your earlier post, I sort of understood what you did but find it
roundabout and not necessary. And you made all columns of type character!

You had two perfectly good vectors of type character and floating point. You
eventually wanted a data.frame or the like. I assume your code is an example
of something more complex because normally code like this works fine:

> temp <- data.frame(Time=Time, Median=Medians)
> temp
    Time Median
1 Age.25 128.25
2 Age.35 148.75
3 Age.45 158.50
4 Age.55 168.75

Alternatively, these two lines let you make a data.frame with default names
and rename it, skipping the matrix part as that nonsense makes all the
columns character and you need floating point for a graph!

> temp <- data.frame(Time, Medians)
> temp
    Time Medians
1 Age.25  128.25
2 Age.35  148.75
3 Age.45  158.50
4 Age.55  168.75
> colnames(temp) <- c("Newname1", "Newname2")
> temp
  Newname1 Newname2
1   Age.25   128.25
2   Age.35   148.75
3   Age.45   158.50
4   Age.55   168.75

Now in your code using ggplot, as stated above it only looks like it works.
Using my temp, the points are where they belong. Yes, it breaks when adding
lines because the code is trying to group things as one axis is categorical.
One solution is to tell it not to group:

This works for me:

ggplot(temp,aes(x=Time,y=Median))+
+     geom_point()+
+     geom_line(aes(group=NA))

I cannot attach a graph to messages on this forum but I suggest you modify
your code to include this. Either do not use the matrix intermediate and
keep your numbers as numbers, or convert the darn column back to numeric.

And for now, try my ungrouping.

Alternate suggestion, don't graph as above. Consider three columns and graph
numbers versus numbers adding a label wherever you want:

library(ggplot2)

Time <- c(25, 35, 45, 55)
Timelabels <- paste("age.", Time, sep="")
Medians    <-c(128.25,148.75,158.5,168.75)
mydata=data.frame(Time=Time, Median=Medians)
rownames(mydata) <- Timelabels

ggplot(data=mydata, aes(x=Time, y=Medians)) + geom_line() + geom_point()
+geom_text(label=rownames(mydata))

ggplot(data=mydata, aes(x=Time, y=Medians)) +
  geom_line() + 
  geom_point(size=3, color="red") +
  geom_label(label=rownames(mydata),alpha=0.4)

There are likely better ways but my point is it may be best to plot numbers
against numbers.













-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
Sent: Wednesday, July 12, 2023 9:17 PM
To: r-help at r-project.org (r-help at r-project.org) <r-help at r-project.org>
Subject: [R] ggplot: Can plot graphs with points, can't plot graph with
points and line

I am trying to plot four points, and join the points with lines. I can plot
the points, but I can't plot the points and the line.
I hope someone can help my with my ggplot code.

# load ggplot2
if(!require(ggplot2)){install.packages("ggplot2")}
library(ggplot2)

# Create data
Time       <- c("Age.25","Age.35","Age.45","Age.55")
Medians    <-c(128.25,148.75,158.5,168.75)
themedians <- matrix(data=cbind(Time,Medians),nrow=4,ncol=2)
dimnames(themedians) <- list(NULL,c("Time","Median"))
# Convert to dataframe the data format used by ggplot
themedians <- data.frame(themedians)
themedians

# This plot works
ggplot(themedians,aes(x=Time,y=Median))+
  geom_point()
# This plot does not work!
ggplot(themedians,aes(x=Time,y=Median))+
  geom_point()+
  geom_line()

Thank you,
John

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From drj|m|emon @end|ng |rom gm@||@com  Thu Jul 13 07:10:35 2023
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 13 Jul 2023 15:10:35 +1000
Subject: [R] ggplot: Can plot graphs with points,
 can't plot graph with points and line
In-Reply-To: <MW4PR03MB6363CE7C6DFD8C38798773F4E237A@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB6363CE7C6DFD8C38798773F4E237A@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <CA+8X3fVYLe3UcgNyPcVnW9-L1zZpkhok+ykFNvCyZaxrsAeSTg@mail.gmail.com>

Hi John,
I'm not sure how to do this with ggplot, but:

Time<- c("Age.25","Age.35","Age.45","Age.55")
Medians<-c(128.25,148.75,158.5,168.75)
> is.character(Time)
# [1] TRUE - thus it has no intrinsic numeric value to plot
> is.numeric(Medians)
# [1] TRUE
# coerce Medians to factor and then plot against Time, but can't do point/line
plot(as.factor(Time),Medians,type="p")
# let R determine the x values (1:4) and omit the x-axis
plot(Medians,type="b",xaxt="n")
# add the x-axis with the "Time" labels
axis(1,at=1:4,labels=Time)


On Thu, Jul 13, 2023 at 11:18?AM Sorkin, John <jsorkin at som.umaryland.edu> wrote:
>
> I am trying to plot four points, and join the points with lines. I can plot the points, but I can't plot the points and the line.
> I hope someone can help my with my ggplot code.
>
> # load ggplot2
> if(!require(ggplot2)){install.packages("ggplot2")}
> library(ggplot2)
>
> # Create data
> Time       <- c("Age.25","Age.35","Age.45","Age.55")
> Medians    <-c(128.25,148.75,158.5,168.75)
> themedians <- matrix(data=cbind(Time,Medians),nrow=4,ncol=2)
> dimnames(themedians) <- list(NULL,c("Time","Median"))
> # Convert to dataframe the data format used by ggplot
> themedians <- data.frame(themedians)
> themedians
>
> # This plot works
> ggplot(themedians,aes(x=Time,y=Median))+
>   geom_point()
> # This plot does not work!
> ggplot(themedians,aes(x=Time,y=Median))+
>   geom_point()+
>   geom_line()
>
> Thank you,
> John
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From du@@@@dr|@n @end|ng |rom un|buc@ro  Thu Jul 13 08:08:56 2023
From: du@@@@dr|@n @end|ng |rom un|buc@ro (=?UTF-8?B?QWRyaWFuIER1yJlh?=)
Date: Thu, 13 Jul 2023 09:08:56 +0300
Subject: [R] Variable and value labels
In-Reply-To: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
References: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
Message-ID: <CAJ=0CtA0fcStv-OV_GkviR=05cSY93MnCqH8Myo5tJ+ZX7qM9A@mail.gmail.com>

Anupam,

This is very general, and it also depends on the scientific domain.
Factors do solve the value labels, but they drop the (original) values.
They also lose the connection to the different types of missing values (an
important topic in the social sciences).

Base R provides as much as it can, but it cannot possibly cover all
applications out there, so an add-on package is a must.
A good way to do both variable and value labels, as well as different types
of missing values, is the package "declared".

I hope this helps,
Adrian

On Wed, Jul 12, 2023 at 6:55?AM Anupam Tyagi <anuptyagi at gmail.com> wrote:

> Hello,
>
> is there an easy way to do variable and value labels (for factor variables)
> in base-R, without using a package. If not, what is an easy and good way to
> do labels, using an add-on package.
>
> --
> Anupam.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
Adrian Dusa
University of Bucharest
Romanian Social Data Archive
Soseaua Panduri nr. 90-92
050663 Bucharest sector 5
Romania
https://adriandusa.eu

	[[alternative HTML version deleted]]


From @nupty@g| @end|ng |rom gm@||@com  Thu Jul 13 08:50:31 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Thu, 13 Jul 2023 12:20:31 +0530
Subject: [R] Variable and value labels
In-Reply-To: <005e01d9b4f0$ec59d040$c50d70c0$@gmail.com>
References: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
 <005e01d9b4f0$ec59d040$c50d70c0$@gmail.com>
Message-ID: <CAFL9euk-keAWbHNwvP06zhgQP5JpeixxpvurLnQ+3E_igAv+Jw@mail.gmail.com>

Thanks, Avi. By labels I mean human readable descriptions of variables and
values of factor variables. In a plot, I want labels to be used
for labelling axes on which a factor is plotted, and variable labels for
axes names/descriptions in a plot. I may have borrowed the terminology of
variable and value labels from Stata software, which I use.

I use a lot of packages. So, I have nothing against packages. But for
labelling, I sometimes worry that I may get tied to a package for something
as basic as assigning labels, and some function/packages may not pick up
the labels correctly/well when plotting or displaying results. Maybe I am
worried for nothing.

I have not used R much after 2003. In the past few months I have begun to
use R again with R Studio, mostly for plotting and visualization of data.
So, you can think of me as a new user.

On Thu, 13 Jul 2023 at 00:14, <avi.e.gross at gmail.com> wrote:

> Anupam,
>
> Your question, even after looking at other messages, remains a bit unclear.
>
> What do you mean by "labels"? What you mean by variables and values and how
> is that related to factors?
>
> An example or two would be helpful so we can say more than PROBABLY.
> Otherwise, you risk having many people here waste lots of time sending
> answers to questions you did not ask.
>
> And why an insistence on not using packages? If you are doing something for
> a class, sure, you may need to use the basics you were supposedly taught in
> class or a textbook. Otherwise, a good set of packages makes code much
> easier to write and often more reliable. Realistically, quite a bit of what
> some call base R is actually packages deemed useful enough to be included
> at
> startup and that can change.
>
> If you are new to R, note you can attach arbitrary attributes to a variable
> and you can have things like named lists where some or all the items have
> names as an attribute.
>
> Factors are part of base R and are a completely different concept. You can
> use base R to get or set the base levels of a factor and many other things
> and there are advantages sometimes in using a vector in factor mode than
> plain but also sometimes disadvantages.
>
> If you ask a more specific and properly explained question, maybe we can
> help you.
>
> Specifically, please tell us how you plan on using your labels. As an
> example, if I make a named list like this:
>
> mylist <- list(pi=3.14, e=2.7, 666)
>
> then I can access all elements as in mylist[[2]] without a name but
> mylist$pi lets me access that item by name and mylist[["e"]] and I can also
> change the current values similarly. But without explaining what you want,
> my explanation likely is not what you need.
>
> But do note that even if you do not USE a package, you can sometimes use it
> indirectly by examining the code for a function you like. If it is
> primarily
> written in R, you may see how it does something and take a part of the code
> and use it yourself.
>
>
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam Tyagi
> Sent: Tuesday, July 11, 2023 11:49 PM
> To: r-help mailing list <r-help at r-project.org>
> Subject: [R] Variable and value labels
>
> Hello,
>
> is there an easy way to do variable and value labels (for factor variables)
> in base-R, without using a package. If not, what is an easy and good way to
> do labels, using an add-on package.
>
> --
> Anupam.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>

-- 
Anupam.

	[[alternative HTML version deleted]]


From jrkr|de@u @end|ng |rom gm@||@com  Thu Jul 13 14:30:50 2023
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Thu, 13 Jul 2023 08:30:50 -0400
Subject: [R] ggplot: Can plot graphs with points,
 can't plot graph with points and line
In-Reply-To: <CA+8X3fVYLe3UcgNyPcVnW9-L1zZpkhok+ykFNvCyZaxrsAeSTg@mail.gmail.com>
References: <MW4PR03MB6363CE7C6DFD8C38798773F4E237A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <CA+8X3fVYLe3UcgNyPcVnW9-L1zZpkhok+ykFNvCyZaxrsAeSTg@mail.gmail.com>
Message-ID: <CAKZQJMBPHFagGCOT3HmNZcmqzmecf+LkFs2XLdu74tAuHHY7QQ@mail.gmail.com>

Hi John,

This should do what you want.  I've changed your data.frame name for my own
convenience to "dat1".

###===========================================
dat1  <- data.frame(
Time  = c("Age.25","Age.35","Age.45","Age.55"),
Medians = c(128.25,148.75,158.5,168.75)
)

# create segments data.frame

dat2  <- data.frame(x = dat1$Time[1:3], xend = dat1$Time[2:4],
                    y = dat1$Medians[1:3], yend = dat1$Medians[2:4])



p1  <- ggplot(dat1 ,aes(x = Time, y = Medians)) +
  geom_point()

p1 + geom_segment( x = "Age.25", y = 128.25, xend = "Age.35", yend =
148.75) +
  geom_segment( x = "Age.35", y = 148.75, xend = "Age.45", yend = 158.5) +
  geom_segment( x = "Age.45", y = 158.5, xend = "Age.55", yend = 168.55)


# This solution shamelessly stolen from
##
https://stackoverflow.com/questions/62536499/how-to-draw-multiple-line-segment-in-ggplot
p1 + geom_segment(
  data = dat2,
  mapping = aes(x=x, y=y, xend=xend, yend=yend),
  inherit.aes = FALSE
)


On Thu, 13 Jul 2023 at 01:11, Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi John,
> I'm not sure how to do this with ggplot, but:
>
> Time<- c("Age.25","Age.35","Age.45","Age.55")
> Medians<-c(128.25,148.75,158.5,168.75)
> > is.character(Time)
> # [1] TRUE - thus it has no intrinsic numeric value to plot
> > is.numeric(Medians)
> # [1] TRUE
> # coerce Medians to factor and then plot against Time, but can't do
> point/line
> plot(as.factor(Time),Medians,type="p")
> # let R determine the x values (1:4) and omit the x-axis
> plot(Medians,type="b",xaxt="n")
> # add the x-axis with the "Time" labels
> axis(1,at=1:4,labels=Time)
>
>
> On Thu, Jul 13, 2023 at 11:18?AM Sorkin, John <jsorkin at som.umaryland.edu>
> wrote:
> >
> > I am trying to plot four points, and join the points with lines. I can
> plot the points, but I can't plot the points and the line.
> > I hope someone can help my with my ggplot code.
> >
> > # load ggplot2
> > if(!require(ggplot2)){install.packages("ggplot2")}
> > library(ggplot2)
> >
> > # Create data
> > Time       <- c("Age.25","Age.35","Age.45","Age.55")
> > Medians    <-c(128.25,148.75,158.5,168.75)
> > themedians <- matrix(data=cbind(Time,Medians),nrow=4,ncol=2)
> > dimnames(themedians) <- list(NULL,c("Time","Median"))
> > # Convert to dataframe the data format used by ggplot
> > themedians <- data.frame(themedians)
> > themedians
> >
> > # This plot works
> > ggplot(themedians,aes(x=Time,y=Median))+
> >   geom_point()
> > # This plot does not work!
> > ggplot(themedians,aes(x=Time,y=Median))+
> >   geom_point()+
> >   geom_line()
> >
> > Thank you,
> > John
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From @vi@e@gross m@iii@g oii gm@ii@com  Thu Jul 13 17:21:42 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Thu, 13 Jul 2023 11:21:42 -0400
Subject: [R] Variable and value labels
In-Reply-To: <CAFL9euk-keAWbHNwvP06zhgQP5JpeixxpvurLnQ+3E_igAv+Jw@mail.gmail.com>
References: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
 <005e01d9b4f0$ec59d040$c50d70c0$@gmail.com>
 <CAFL9euk-keAWbHNwvP06zhgQP5JpeixxpvurLnQ+3E_igAv+Jw@mail.gmail.com>
Message-ID: <003601d9b59d$ba876a70$2f963f50$@gmail.com>

Anupam,
 
Thanks for explaining you are talking about factors.
 
I see my friend Adrian has pointed out reasons you may want to use a package he built called ?declared? but my answer will be within the regular R domain as you asked.
 
You should read up a bit on factors in a book, not just blindly searching. A factor, loosely speaking started off as a mixture of the original values as characters and a numbered vector referencing them. When you want the original labels, you can see them and when you want the integer indices you can see them.
 
> greek <- c("Alpha", "Beta", "Gamma", "Alphabeta", "Beta", "Alpha", "Alpha Male")
> greek
[1] "Alpha"      "Beta"       "Gamma"      "Alphabeta"  "Beta"       "Alpha"     
[7] "Alpha Male"
> 
> facgreek <- factor(greek)
> facgreek
[1] Alpha      Beta       Gamma      Alphabeta  Beta       Alpha      Alpha Male
Levels: Alpha Alpha Male Alphabeta Beta Gamma
> 
> levels(facgreek)
[1] "Alpha"      "Alpha Male" "Alphabeta"  "Beta"       "Gamma"     
> labels(facgreek)
[1] "1" "2" "3" "4" "5" "6" "7"
> str(facgreek)
Factor w/ 5 levels "Alpha","Alpha Male",..: 1 4 5 3 4 1 2
> as.numeric(facgreek)
[1] 1 4 5 3 4 1 2
 
You can play with all kinds of things in base R such as getting the nth item as a label, or finding all the items currently mapped to the key of 1 and so on.
 
> as.numeric(facgreek)
[1] 1 4 5 3 4 1 2
> facgreek[5]
[1] Beta
Levels: Alpha Alpha Male Alphabeta Beta Gamma
> facgreek[as.numeric(facgreek) == 1]
[1] Alpha Alpha
 
 
> as.character(facgreek)
[1] "Alpha"      "Beta"       "Gamma"      "Alphabeta"  "Beta"       "Alpha"     
[7] "Alpha Male"
> as.integer(facgreek)
[1] 1 4 5 3 4 1 2
 
 
Now when plotting, it depends on what you use. Base R comes with the usual plot functions as well as others like lattice and there are packages like ggplot2. Some of these may even convert a vector into a factor internally. In some cases, you may want to tell it to use a factor in a certain way, such as by re-ordering the order of the levels of a factor so the display is graphed in that order.
 
And as I answered another person, some graphing functions allow you to do other kinds of labeling on top of the plot that may meet your needs.
 
I may be the opposite of you as I did not use R much before 2003. ?
 
But seriously, we often are like new users even when we once knew a bit about something. The R from before 2003 (or was it S?) has evolved quite a bit. If, like me, you have used lots of other computer languages in between, then they often blend in your mind as they have overlapping paradigms and methods and of course quirks.
 
And, of course, I sympathize with adjusting from other environments designed for somewhat more specific purposes like Stata as R is more of a general purpose programming language. Often people start with those others and then come to R because they need to be able to do more or just fine-tune things or ?
 
 
 
From: Anupam Tyagi <anuptyagi at gmail.com> 
Sent: Thursday, July 13, 2023 2:51 AM
To: avi.e.gross at gmail.com
Cc: r-help at r-project.org
Subject: Re: [R] Variable and value labels
 
Thanks, Avi. By labels I mean human readable descriptions of variables and values of factor variables. In a plot, I want labels to be used for labelling axes on which a factor is plotted, and variable labels for axes names/descriptions in a plot. I may have borrowed the terminology of variable and value labels from Stata software, which I use.
 
I use a lot of packages. So, I have nothing against packages. But for labelling, I sometimes worry that I may get tied to a package for something as basic as assigning labels, and some function/packages may not pick up the labels correctly/well when plotting or displaying results. Maybe I am worried for nothing.
 
I have not used R much after 2003. In the past few months I have begun to use R again with R Studio, mostly for plotting and visualization of data. So, you can think of me as a new user.
 
On Thu, 13 Jul 2023 at 00:14, <avi.e.gross at gmail.com <mailto:avi.e.gross at gmail.com> > wrote:
Anupam,

Your question, even after looking at other messages, remains a bit unclear.

What do you mean by "labels"? What you mean by variables and values and how
is that related to factors?

An example or two would be helpful so we can say more than PROBABLY.
Otherwise, you risk having many people here waste lots of time sending
answers to questions you did not ask.

And why an insistence on not using packages? If you are doing something for
a class, sure, you may need to use the basics you were supposedly taught in
class or a textbook. Otherwise, a good set of packages makes code much
easier to write and often more reliable. Realistically, quite a bit of what
some call base R is actually packages deemed useful enough to be included at
startup and that can change.

If you are new to R, note you can attach arbitrary attributes to a variable
and you can have things like named lists where some or all the items have
names as an attribute.

Factors are part of base R and are a completely different concept. You can
use base R to get or set the base levels of a factor and many other things
and there are advantages sometimes in using a vector in factor mode than
plain but also sometimes disadvantages. 

If you ask a more specific and properly explained question, maybe we can
help you.

Specifically, please tell us how you plan on using your labels. As an
example, if I make a named list like this:

mylist <- list(pi=3.14, e=2.7, 666)

then I can access all elements as in mylist[[2]] without a name but
mylist$pi lets me access that item by name and mylist[["e"]] and I can also
change the current values similarly. But without explaining what you want,
my explanation likely is not what you need.

But do note that even if you do not USE a package, you can sometimes use it
indirectly by examining the code for a function you like. If it is primarily
written in R, you may see how it does something and take a part of the code
and use it yourself.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org <mailto:r-help-bounces at r-project.org> > On Behalf Of Anupam Tyagi
Sent: Tuesday, July 11, 2023 11:49 PM
To: r-help mailing list <r-help at r-project.org <mailto:r-help at r-project.org> >
Subject: [R] Variable and value labels

Hello,

is there an easy way to do variable and value labels (for factor variables)
in base-R, without using a package. If not, what is an easy and good way to
do labels, using an add-on package.

-- 
Anupam.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.



-- 
Anupam.

	[[alternative HTML version deleted]]


From @nupty@g| @end|ng |rom gm@||@com  Fri Jul 14 02:58:53 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Fri, 14 Jul 2023 06:28:53 +0530
Subject: [R] Variable and value labels
In-Reply-To: <003601d9b59d$ba876a70$2f963f50$@gmail.com>
References: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
 <005e01d9b4f0$ec59d040$c50d70c0$@gmail.com>
 <CAFL9euk-keAWbHNwvP06zhgQP5JpeixxpvurLnQ+3E_igAv+Jw@mail.gmail.com>
 <003601d9b59d$ba876a70$2f963f50$@gmail.com>
Message-ID: <CAFL9eumg3ESy+SERvEWv__44TuyVvNje466cjoBWG_nmTBzn5Q@mail.gmail.com>

Thanks again, Avi. I will read up more on factors.

On Thu, 13 Jul, 2023, 8:51 pm , <avi.e.gross at gmail.com> wrote:

> Anupam,
>
>
>
> Thanks for explaining you are talking about factors.
>
>
>
> I see my friend Adrian has pointed out reasons you may want to use a
> package he built called ?declared? but my answer will be within the regular
> R domain as you asked.
>
>
>
> You should read up a bit on factors in a book, not just blindly searching.
> A factor, loosely speaking started off as a mixture of the original values
> as characters and a numbered vector referencing them. When you want the
> original labels, you can see them and when you want the integer indices you
> can see them.
>
>
>
> > greek <- c("Alpha", "Beta", "Gamma", "Alphabeta", "Beta", "Alpha",
> "Alpha Male")
>
> > greek
>
> [1] "Alpha"      "Beta"       "Gamma"      "Alphabeta"  "Beta"
> "Alpha"
>
> [7] "Alpha Male"
>
> >
>
> > facgreek <- factor(greek)
>
> > facgreek
>
> [1] Alpha      Beta       Gamma      Alphabeta  Beta       Alpha
> Alpha Male
>
> Levels: Alpha Alpha Male Alphabeta Beta Gamma
>
> >
>
> > levels(facgreek)
>
> [1] "Alpha"      "Alpha Male" "Alphabeta"  "Beta"       "Gamma"
>
> > labels(facgreek)
>
> [1] "1" "2" "3" "4" "5" "6" "7"
>
> > str(facgreek)
>
> Factor w/ 5 levels "Alpha","Alpha Male",..: 1 4 5 3 4 1 2
>
> > as.numeric(facgreek)
>
> [1] 1 4 5 3 4 1 2
>
>
>
> You can play with all kinds of things in base R such as getting the nth
> item as a label, or finding all the items currently mapped to the key of 1
> and so on.
>
>
>
> > as.numeric(facgreek)
>
> [1] 1 4 5 3 4 1 2
>
> > facgreek[5]
>
> [1] Beta
>
> Levels: Alpha Alpha Male Alphabeta Beta Gamma
>
> > facgreek[as.numeric(facgreek) == 1]
>
> [1] Alpha Alpha
>
>
>
>
>
> > as.character(facgreek)
>
> [1] "Alpha"      "Beta"       "Gamma"      "Alphabeta"  "Beta"       "Alpha"
>
> [7] "Alpha Male"
>
> > as.integer(facgreek)
>
> [1] 1 4 5 3 4 1 2
>
>
>
>
>
> Now when plotting, it depends on what you use. Base R comes with the usual
> plot functions as well as others like lattice and there are packages like
> ggplot2. Some of these may even convert a vector into a factor internally.
> In some cases, you may want to tell it to use a factor in a certain way,
> such as by re-ordering the order of the levels of a factor so the display
> is graphed in that order.
>
>
>
> And as I answered another person, some graphing functions allow you to do
> other kinds of labeling on top of the plot that may meet your needs.
>
>
>
> I may be the opposite of you as I did not use R much before 2003. ?
>
>
>
> But seriously, we often are like new users even when we once knew a bit
> about something. The R from before 2003 (or was it S?) has evolved quite a
> bit. If, like me, you have used lots of other computer languages in
> between, then they often blend in your mind as they have overlapping
> paradigms and methods and of course quirks.
>
>
>
> And, of course, I sympathize with adjusting from other environments
> designed for somewhat more specific purposes like Stata as R is more of a
> general purpose programming language. Often people start with those others
> and then come to R because they need to be able to do more or just
> fine-tune things or ?
>
>
>
>
>
>
>
> *From:* Anupam Tyagi <anuptyagi at gmail.com>
> *Sent:* Thursday, July 13, 2023 2:51 AM
> *To:* avi.e.gross at gmail.com
> *Cc:* r-help at r-project.org
> *Subject:* Re: [R] Variable and value labels
>
>
>
> Thanks, Avi. By labels I mean human readable descriptions of variables and
> values of factor variables. In a plot, I want labels to be used
> for labelling axes on which a factor is plotted, and variable labels for
> axes names/descriptions in a plot. I may have borrowed the terminology of
> variable and value labels from Stata software, which I use.
>
>
>
> I use a lot of packages. So, I have nothing against packages. But for
> labelling, I sometimes worry that I may get tied to a package for something
> as basic as assigning labels, and some function/packages may not pick up
> the labels correctly/well when plotting or displaying results. Maybe I am
> worried for nothing.
>
>
>
> I have not used R much after 2003. In the past few months I have begun to
> use R again with R Studio, mostly for plotting and visualization of data.
> So, you can think of me as a new user.
>
>
>
> On Thu, 13 Jul 2023 at 00:14, <avi.e.gross at gmail.com> wrote:
>
> Anupam,
>
> Your question, even after looking at other messages, remains a bit unclear.
>
> What do you mean by "labels"? What you mean by variables and values and how
> is that related to factors?
>
> An example or two would be helpful so we can say more than PROBABLY.
> Otherwise, you risk having many people here waste lots of time sending
> answers to questions you did not ask.
>
> And why an insistence on not using packages? If you are doing something for
> a class, sure, you may need to use the basics you were supposedly taught in
> class or a textbook. Otherwise, a good set of packages makes code much
> easier to write and often more reliable. Realistically, quite a bit of what
> some call base R is actually packages deemed useful enough to be included
> at
> startup and that can change.
>
> If you are new to R, note you can attach arbitrary attributes to a variable
> and you can have things like named lists where some or all the items have
> names as an attribute.
>
> Factors are part of base R and are a completely different concept. You can
> use base R to get or set the base levels of a factor and many other things
> and there are advantages sometimes in using a vector in factor mode than
> plain but also sometimes disadvantages.
>
> If you ask a more specific and properly explained question, maybe we can
> help you.
>
> Specifically, please tell us how you plan on using your labels. As an
> example, if I make a named list like this:
>
> mylist <- list(pi=3.14, e=2.7, 666)
>
> then I can access all elements as in mylist[[2]] without a name but
> mylist$pi lets me access that item by name and mylist[["e"]] and I can also
> change the current values similarly. But without explaining what you want,
> my explanation likely is not what you need.
>
> But do note that even if you do not USE a package, you can sometimes use it
> indirectly by examining the code for a function you like. If it is
> primarily
> written in R, you may see how it does something and take a part of the code
> and use it yourself.
>
>
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam Tyagi
> Sent: Tuesday, July 11, 2023 11:49 PM
> To: r-help mailing list <r-help at r-project.org>
> Subject: [R] Variable and value labels
>
> Hello,
>
> is there an easy way to do variable and value labels (for factor variables)
> in base-R, without using a package. If not, what is an easy and good way to
> do labels, using an add-on package.
>
> --
> Anupam.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>
>
>
> --
>
> Anupam.
>

	[[alternative HTML version deleted]]


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Fri Jul 14 18:33:38 2023
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Fri, 14 Jul 2023 18:33:38 +0200
Subject: [R] How to add error bars to a line plot with ggplot2?
Message-ID: <CAMk+s2QzpBt3EF39_EAKMwRwv_fZ1RvFtNkaAfW=sku+kKbNNQ@mail.gmail.com>

Hello,
I am measuring a certain variable at given time intervals and
different concentrations of a reagent. I would like to make a scatter
plot of the values, joined by a line to highlight the temporal
measure.
I can plot this all right. Now, since I have more than one replicate,
I would like to add he error bars.
I prepared  a dataframe with the mean measures and a column with the
standard deviations, but when I run the code, I get the error:
```
Error in `check_aesthetics()`:
! Aesthetics must be either length 1 or the same as the data (20): colour
Run `rlang::last_trace()` to see where the error occurred.
```
I am missing something, but what?
Thank you


WORKING EXAMPLE
```
measTime    = c(1    ,2    ,4    ,24    ,48    ,1    ,2    ,4    ,24
 ,48    ,1    ,2    ,4    ,24    ,48    ,1    ,2    ,4    ,24    ,48)
conc    = c(0.25    ,0.25    ,0.25    ,0.25    ,0.25    ,1.12    ,1.12
   ,1.12    ,1.12    ,1.12    ,2.5    ,2.5    ,2.5    ,2.5    ,2.5
,25    ,25    ,25    ,25    ,25)
varbl    = c(0.0329999999999999    ,0.27    ,0.0785    ,0.1015
,-0.193    ,0.048    ,0.113    ,0.1695    ,-0.775    ,0.464    ,-0.257
   ,-0.154    ,-0.3835    ,-1.23    ,-0.513    ,1.3465    ,1.276
,1.128    ,-2.56    ,-1.813)
stdDev    =c(0.646632301492381    ,0    ,1.77997087991162
,0.247683265482349    ,0    ,0.282901631902917    ,0
,0.273086677326693    ,1.03807578400295    ,0    ,0.912213425319609
,0    ,1.64371621638287    ,2.23203614068709    ,0    ,0.2615396719429
   ,0    ,0.54039985196149    ,2.15236180353893    ,0)
df = data.frame(Time=measTime, mM=conc, ddC=varbl, SD=stdDev)
library(ggplot2)
COLS = c("green", "red", "blue", "yellow")
  ggplot(df,
         aes(x=Time, y=ddC, colour=mM, group=mM)) +
  geom_line(aes(x=Time, y=ddC, colour=mM, group=mM)) +
  geom_errorbar(aes(x=Time, ymin=ddC-SD, ymax=ddC+SD, colour=mM, group=mM),
                width=.1, colour=COLS) +
  geom_point(size=6) +
  scale_colour_manual(values = COLS) +
  ggtitle("Exposure") +
  xlab(expression(bold("Time (h)"))) +
  ylab(expression(bold("Value"))) +
  geom_hline(aes(yintercept=0)) +
  theme_classic()
  ```


From kry|ov@r00t @end|ng |rom gm@||@com  Fri Jul 14 18:47:29 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Fri, 14 Jul 2023 19:47:29 +0300
Subject: [R] How to add error bars to a line plot with ggplot2?
In-Reply-To: <CAMk+s2QzpBt3EF39_EAKMwRwv_fZ1RvFtNkaAfW=sku+kKbNNQ@mail.gmail.com>
References: <CAMk+s2QzpBt3EF39_EAKMwRwv_fZ1RvFtNkaAfW=sku+kKbNNQ@mail.gmail.com>
Message-ID: <20230714194729.038dcb11@arachnoid>

? Fri, 14 Jul 2023 18:33:38 +0200
Luigi Marongiu <marongiu.luigi at gmail.com> ?????:

> COLS = c("green", "red", "blue", "yellow")

>   geom_errorbar(aes(x=Time, ymin=ddC-SD, ymax=ddC+SD, colour=mM,
> group=mM), width=.1, colour=COLS) +

The last `colour` argument in the call above is a character vector of
length 4. You probably meant to use it with a scale_colour_... function
instead.

-- 
Best regards,
Ivan


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Jul 14 19:05:28 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 14 Jul 2023 18:05:28 +0100
Subject: [R] How to add error bars to a line plot with ggplot2?
In-Reply-To: <CAMk+s2QzpBt3EF39_EAKMwRwv_fZ1RvFtNkaAfW=sku+kKbNNQ@mail.gmail.com>
References: <CAMk+s2QzpBt3EF39_EAKMwRwv_fZ1RvFtNkaAfW=sku+kKbNNQ@mail.gmail.com>
Message-ID: <383db43b-1fbc-b96e-e346-3a4b4862b3b3@sapo.pt>

?s 17:33 de 14/07/2023, Luigi Marongiu escreveu:
> Hello,
> I am measuring a certain variable at given time intervals and
> different concentrations of a reagent. I would like to make a scatter
> plot of the values, joined by a line to highlight the temporal
> measure.
> I can plot this all right. Now, since I have more than one replicate,
> I would like to add he error bars.
> I prepared  a dataframe with the mean measures and a column with the
> standard deviations, but when I run the code, I get the error:
> ```
> Error in `check_aesthetics()`:
> ! Aesthetics must be either length 1 or the same as the data (20): colour
> Run `rlang::last_trace()` to see where the error occurred.
> ```
> I am missing something, but what?
> Thank you
> 
> 
> WORKING EXAMPLE
> ```
> measTime    = c(1    ,2    ,4    ,24    ,48    ,1    ,2    ,4    ,24
>   ,48    ,1    ,2    ,4    ,24    ,48    ,1    ,2    ,4    ,24    ,48)
> conc    = c(0.25    ,0.25    ,0.25    ,0.25    ,0.25    ,1.12    ,1.12
>     ,1.12    ,1.12    ,1.12    ,2.5    ,2.5    ,2.5    ,2.5    ,2.5
> ,25    ,25    ,25    ,25    ,25)
> varbl    = c(0.0329999999999999    ,0.27    ,0.0785    ,0.1015
> ,-0.193    ,0.048    ,0.113    ,0.1695    ,-0.775    ,0.464    ,-0.257
>     ,-0.154    ,-0.3835    ,-1.23    ,-0.513    ,1.3465    ,1.276
> ,1.128    ,-2.56    ,-1.813)
> stdDev    =c(0.646632301492381    ,0    ,1.77997087991162
> ,0.247683265482349    ,0    ,0.282901631902917    ,0
> ,0.273086677326693    ,1.03807578400295    ,0    ,0.912213425319609
> ,0    ,1.64371621638287    ,2.23203614068709    ,0    ,0.2615396719429
>     ,0    ,0.54039985196149    ,2.15236180353893    ,0)
> df = data.frame(Time=measTime, mM=conc, ddC=varbl, SD=stdDev)
> library(ggplot2)
> COLS = c("green", "red", "blue", "yellow")
>    ggplot(df,
>           aes(x=Time, y=ddC, colour=mM, group=mM)) +
>    geom_line(aes(x=Time, y=ddC, colour=mM, group=mM)) +
>    geom_errorbar(aes(x=Time, ymin=ddC-SD, ymax=ddC+SD, colour=mM, group=mM),
>                  width=.1, colour=COLS) +
>    geom_point(size=6) +
>    scale_colour_manual(values = COLS) +
>    ggtitle("Exposure") +
>    xlab(expression(bold("Time (h)"))) +
>    ylab(expression(bold("Value"))) +
>    geom_hline(aes(yintercept=0)) +
>    theme_classic()
>    ```
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Two notes:

1. If you want to use a discrete colours vector, your 'colour' aesthetic 
must be mapped to a discrete variabe. The most frequent cases are 
character or factor columns.

2. If you start the plot with certain aesthetics set you don't have to 
repeat them in subsequent layers, geom_line can be called with no aes() 
and gem_errorbar doesn't need x=measTime again.


As for the main error, the colors vector COLS should be removed from 
geom_errorbar.



df <- data.frame(Time = measTime,
                  mM = factor(conc),  # this must be a factor
                  ddC = varbl,
                  SD = stdDev)

library(ggplot2)

COLS = c("green", "red", "blue", "yellow")

ggplot(df, aes(x = Time, y = ddC, colour = mM, group = mM)) +
   geom_line() +
   geom_errorbar(aes(ymin = ddC - SD, ymax = ddC + SD), width = 0.1) +
   geom_point(size = 6) +
   geom_hline(aes(yintercept = 0)) +
   scale_colour_manual(values = COLS) +
   ggtitle("Exposure") +
   xlab(expression(bold("Time (h)"))) +
   ylab(expression(bold("Value"))) +
   theme_classic()


Hope this helps,

Rui Barradas


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Fri Jul 14 22:34:39 2023
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Fri, 14 Jul 2023 22:34:39 +0200
Subject: [R] How to add error bars to a line plot with ggplot2?
In-Reply-To: <383db43b-1fbc-b96e-e346-3a4b4862b3b3@sapo.pt>
References: <CAMk+s2QzpBt3EF39_EAKMwRwv_fZ1RvFtNkaAfW=sku+kKbNNQ@mail.gmail.com>
 <383db43b-1fbc-b96e-e346-3a4b4862b3b3@sapo.pt>
Message-ID: <CAMk+s2T9_r64kWhhPK=o2bzOVOpdJRehLQGnTW98NZ3BDZLu_w@mail.gmail.com>

Thank you, the problem was indeed about factors.
Case solved

On Fri, Jul 14, 2023 at 7:05?PM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>
> ?s 17:33 de 14/07/2023, Luigi Marongiu escreveu:
> > Hello,
> > I am measuring a certain variable at given time intervals and
> > different concentrations of a reagent. I would like to make a scatter
> > plot of the values, joined by a line to highlight the temporal
> > measure.
> > I can plot this all right. Now, since I have more than one replicate,
> > I would like to add he error bars.
> > I prepared  a dataframe with the mean measures and a column with the
> > standard deviations, but when I run the code, I get the error:
> > ```
> > Error in `check_aesthetics()`:
> > ! Aesthetics must be either length 1 or the same as the data (20): colour
> > Run `rlang::last_trace()` to see where the error occurred.
> > ```
> > I am missing something, but what?
> > Thank you
> >
> >
> > WORKING EXAMPLE
> > ```
> > measTime    = c(1    ,2    ,4    ,24    ,48    ,1    ,2    ,4    ,24
> >   ,48    ,1    ,2    ,4    ,24    ,48    ,1    ,2    ,4    ,24    ,48)
> > conc    = c(0.25    ,0.25    ,0.25    ,0.25    ,0.25    ,1.12    ,1.12
> >     ,1.12    ,1.12    ,1.12    ,2.5    ,2.5    ,2.5    ,2.5    ,2.5
> > ,25    ,25    ,25    ,25    ,25)
> > varbl    = c(0.0329999999999999    ,0.27    ,0.0785    ,0.1015
> > ,-0.193    ,0.048    ,0.113    ,0.1695    ,-0.775    ,0.464    ,-0.257
> >     ,-0.154    ,-0.3835    ,-1.23    ,-0.513    ,1.3465    ,1.276
> > ,1.128    ,-2.56    ,-1.813)
> > stdDev    =c(0.646632301492381    ,0    ,1.77997087991162
> > ,0.247683265482349    ,0    ,0.282901631902917    ,0
> > ,0.273086677326693    ,1.03807578400295    ,0    ,0.912213425319609
> > ,0    ,1.64371621638287    ,2.23203614068709    ,0    ,0.2615396719429
> >     ,0    ,0.54039985196149    ,2.15236180353893    ,0)
> > df = data.frame(Time=measTime, mM=conc, ddC=varbl, SD=stdDev)
> > library(ggplot2)
> > COLS = c("green", "red", "blue", "yellow")
> >    ggplot(df,
> >           aes(x=Time, y=ddC, colour=mM, group=mM)) +
> >    geom_line(aes(x=Time, y=ddC, colour=mM, group=mM)) +
> >    geom_errorbar(aes(x=Time, ymin=ddC-SD, ymax=ddC+SD, colour=mM, group=mM),
> >                  width=.1, colour=COLS) +
> >    geom_point(size=6) +
> >    scale_colour_manual(values = COLS) +
> >    ggtitle("Exposure") +
> >    xlab(expression(bold("Time (h)"))) +
> >    ylab(expression(bold("Value"))) +
> >    geom_hline(aes(yintercept=0)) +
> >    theme_classic()
> >    ```
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> Hello,
>
> Two notes:
>
> 1. If you want to use a discrete colours vector, your 'colour' aesthetic
> must be mapped to a discrete variabe. The most frequent cases are
> character or factor columns.
>
> 2. If you start the plot with certain aesthetics set you don't have to
> repeat them in subsequent layers, geom_line can be called with no aes()
> and gem_errorbar doesn't need x=measTime again.
>
>
> As for the main error, the colors vector COLS should be removed from
> geom_errorbar.
>
>
>
> df <- data.frame(Time = measTime,
>                   mM = factor(conc),  # this must be a factor
>                   ddC = varbl,
>                   SD = stdDev)
>
> library(ggplot2)
>
> COLS = c("green", "red", "blue", "yellow")
>
> ggplot(df, aes(x = Time, y = ddC, colour = mM, group = mM)) +
>    geom_line() +
>    geom_errorbar(aes(ymin = ddC - SD, ymax = ddC + SD), width = 0.1) +
>    geom_point(size = 6) +
>    geom_hline(aes(yintercept = 0)) +
>    scale_colour_manual(values = COLS) +
>    ggtitle("Exposure") +
>    xlab(expression(bold("Time (h)"))) +
>    ylab(expression(bold("Value"))) +
>    theme_classic()
>
>
> Hope this helps,
>
> Rui Barradas
>


-- 
Best regards,
Luigi


From tr|ng @end|ng |rom gvdnet@dk  Sun Jul 16 13:55:25 2023
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Sun, 16 Jul 2023 13:55:25 +0200
Subject: [R] nlmixr2 installation problems
Message-ID: <e86b918d-5e30-fd10-95b9-cc8ad6fc9a7b@gvdnet.dk>

Hi friends - Trying to install nlmixr2 caused problems. I'm on windows 
with R4.3.1 so made sure to have rtools 4.3 and also reinstalled R and then

ran

install.packages("nlmixr2",dependencies = TRUE)and got the 
responseInstalling package into 
?C:/Users/Admin/AppData/Local/R/win-library/4.3? (as ?lib? is 
unspecified) also installing the dependencies ?fs?, ?rappdirs?, ?bit?, 
?prettyunits?, ?rematch?, ?askpass?, ?sass?, ?commonmark?, ?proxy?, 
?bit64?, ?progress?, ?rootSolve?, ?lmom?, ?cellranger?, ?jsonlite?, 
?mime?, ?openssl?, ?htmlwidgets?, ?ellipsis?, ?bslib?, ?fontawesome?, 
?jquerylib?, ?tinytex?, ?curl?, ?markdown?, ?jpeg?, ?xml2?, ?fastmap?, 
?e1071?, ?generics?, ?tidyselect?, ?clipr?, ?hms?, ?vroom?, ?cpp11?, 
?tzdb?, ?stringi?, ?purrr?, ?mvtnorm?, ?expm?, ?rstudioapi?, ?Exact?, 
?gld?, ?readxl?, ?httr?, ?gridExtra?, ?htmlTable?, ?viridis?, 
?htmltools?, ?base64enc?, ?rmarkdown?, ?Formula?, ?bitops?, ?evaluate?, 
?highr?, ?xfun?, ?yaml?, ?numDeriv?, ?lazyeval?, ?optextras?, ?dparser?, 
?RcppEigen?, ?StanHeaders?, ?sitmo?, ?gridtext?, ?cachem?, 
?RcppParallel?, ?RApiSerialize?, ?stringfish?, ?classInt?, ?dplyr?, 
?readr?, ?stringr?, ?tidyr?, ?assertthat?, ?binom?, ?Deriv?, 
?DescTools?, ?Hmisc?, ?minpack.lm?, ?pander?, ?png?, ?RCurl?, 
?backports?, ?checkmate?, ?knitr?, ?lbfgsb3c?, ?minqa?, ?n1qn1?, ?Rcpp?, 
?rex?, ?Rvmmin?, ?symengine?, ?BH?, ?RcppArmadillo?, ?rxode2parse?, 
?rxode2random?, ?data.table?, ?digest?, ?ggtext?, ?PreciseSums?, 
?inline?, ?memoise?, ?sys?, ?rxode2ll?, ?rxode2et?, ?qs?, ?vpc?, ?xgxr?, 
?nlmixr2data?, ?nlmixr2est?, ?nlmixr2extra?, ?rxode2?, ?lotri?, 
?nlmixr2plot?, ?crayon? There are binary versions available but the 
source versions are later: binary source needs_compilation sass 0.4.6 
0.4.7 TRUE openssl 2.0.6 2.1.0 TRUE
- and nothing more happened But when trying to install sass and openssl 
individually the same announcement of later source versions appeared 
without making it possible to ask for recompilation. All best wishes Troels

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Jul 16 17:21:48 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 16 Jul 2023 16:21:48 +0100
Subject: [R] nlmixr2 installation problems
In-Reply-To: <e86b918d-5e30-fd10-95b9-cc8ad6fc9a7b@gvdnet.dk>
References: <e86b918d-5e30-fd10-95b9-cc8ad6fc9a7b@gvdnet.dk>
Message-ID: <9833170c-c2c3-2a20-9811-9347b838104c@sapo.pt>

?s 12:55 de 16/07/2023, Troels Ring escreveu:
> Hi friends - Trying to install nlmixr2 caused problems. I'm on windows
> with R4.3.1 so made sure to have rtools 4.3 and also reinstalled R and then
> 
> ran
> 
> install.packages("nlmixr2",dependencies = TRUE)and got the
> responseInstalling package into
> ?C:/Users/Admin/AppData/Local/R/win-library/4.3? (as ?lib? is
> unspecified) also installing the dependencies ?fs?, ?rappdirs?, ?bit?,
> ?prettyunits?, ?rematch?, ?askpass?, ?sass?, ?commonmark?, ?proxy?,
> ?bit64?, ?progress?, ?rootSolve?, ?lmom?, ?cellranger?, ?jsonlite?,
> ?mime?, ?openssl?, ?htmlwidgets?, ?ellipsis?, ?bslib?, ?fontawesome?,
> ?jquerylib?, ?tinytex?, ?curl?, ?markdown?, ?jpeg?, ?xml2?, ?fastmap?,
> ?e1071?, ?generics?, ?tidyselect?, ?clipr?, ?hms?, ?vroom?, ?cpp11?,
> ?tzdb?, ?stringi?, ?purrr?, ?mvtnorm?, ?expm?, ?rstudioapi?, ?Exact?,
> ?gld?, ?readxl?, ?httr?, ?gridExtra?, ?htmlTable?, ?viridis?,
> ?htmltools?, ?base64enc?, ?rmarkdown?, ?Formula?, ?bitops?, ?evaluate?,
> ?highr?, ?xfun?, ?yaml?, ?numDeriv?, ?lazyeval?, ?optextras?, ?dparser?,
> ?RcppEigen?, ?StanHeaders?, ?sitmo?, ?gridtext?, ?cachem?,
> ?RcppParallel?, ?RApiSerialize?, ?stringfish?, ?classInt?, ?dplyr?,
> ?readr?, ?stringr?, ?tidyr?, ?assertthat?, ?binom?, ?Deriv?,
> ?DescTools?, ?Hmisc?, ?minpack.lm?, ?pander?, ?png?, ?RCurl?,
> ?backports?, ?checkmate?, ?knitr?, ?lbfgsb3c?, ?minqa?, ?n1qn1?, ?Rcpp?,
> ?rex?, ?Rvmmin?, ?symengine?, ?BH?, ?RcppArmadillo?, ?rxode2parse?,
> ?rxode2random?, ?data.table?, ?digest?, ?ggtext?, ?PreciseSums?,
> ?inline?, ?memoise?, ?sys?, ?rxode2ll?, ?rxode2et?, ?qs?, ?vpc?, ?xgxr?,
> ?nlmixr2data?, ?nlmixr2est?, ?nlmixr2extra?, ?rxode2?, ?lotri?,
> ?nlmixr2plot?, ?crayon? There are binary versions available but the
> source versions are later: binary source needs_compilation sass 0.4.6
> 0.4.7 TRUE openssl 2.0.6 2.1.0 TRUE
> - and nothing more happened But when trying to install sass and openssl
> individually the same announcement of later source versions appeared
> without making it possible to ask for recompilation. All best wishes Troels
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Maybe this [1] is relevant.


[1] 
https://community.rstudio.com/t/meaning-of-common-message-when-install-a-package-there-are-binary-versions-available-but-the-source-versions-are-later/2431

Hope this helps,

Rui Barradas


From m|@thour| @end|ng |rom y@hoo@gr  Sun Jul 16 23:51:10 2023
From: m|@thour| @end|ng |rom y@hoo@gr (Maria Lathouri)
Date: Sun, 16 Jul 2023 21:51:10 +0000 (UTC)
Subject: [R] how to change the y-axis to logarithmic in a barplot ggplot
References: <722702190.1267536.1689544270997.ref@mail.yahoo.com>
Message-ID: <722702190.1267536.1689544270997@mail.yahoo.com>

Dear all,?


I am having the following dataset
fc<-
ID? ? values? ? databases
Al? ? 0.15? ? phreeqc
Al? ? 0.6? ? carbfix
Al? ? 0.47? ? actual
Ca? ? 7.2? ? phreeqc
Ca? ? 7.2? ? carbfix
Ca? ? 0.3? ? actual
Na? ? 14.4? ? phreeqc
Na? ? 84? ? carbfix
Na? ? 106? ? actual
Cl? ? 22? ? phreeqc
Cl? ? 21.9? ? carbfix
Cl? ? 72.1? ? actual
Fe? ? 0.05? ? phreeqc
Fe? ? 0.43? ? carbfix
Fe? ? 1.25? ? actual
Mg? ? 0.35? ? phreeqc
Mg? ? 0.17? ? carbfix
Mg? ? 0.08? ? actual
SO4? ? 0? ? phreeqc
SO4? ? 0? ? carbfix
SO4? ? 416? ? actual


As you can see, the values range from 0 to 400. I want it to plot it in bars; when I am plotting it as you can imagine the values near zero don't show at all. So I am trying to make the y axis logarithmic. I have created the following code but it doesn't work. I get the bars with zero above and the others on top.?


ggplot(fc, aes(x = Temp, y = mean, fill = Glass)) +?
geom_bar(stat = "identity", position = "dodge", aes(y=log(mean)))?
+ theme_bw() + theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank()) + theme(legend.position = c(0.45, 0.85), legend.title = element_blank())?
+ scale_fill_brewer(palette = "Dark2") + scale_color_brewer(palette = "Dark2")


I would very much appreciate your help. I am stuck.?


Kind regards,
Maria


From dw|n@em|u@ @end|ng |rom comc@@t@net  Mon Jul 17 00:21:33 2023
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sun, 16 Jul 2023 15:21:33 -0700
Subject: [R] how to change the y-axis to logarithmic in a barplot ggplot
In-Reply-To: <722702190.1267536.1689544270997@mail.yahoo.com>
References: <722702190.1267536.1689544270997.ref@mail.yahoo.com>
 <722702190.1267536.1689544270997@mail.yahoo.com>
Message-ID: <37a5b46d-88b1-daf6-d083-7c98ec1e8f94@comcast.net>


On 7/16/23 14:51, Maria Lathouri via R-help wrote:
> Dear all,
>
>
> I am having the following dataset
> fc<-
> ID? ? values? ? databases
> Al? ? 0.15? ? phreeqc
> Al? ? 0.6? ? carbfix
> Al? ? 0.47? ? actual
> Ca? ? 7.2? ? phreeqc
> Ca? ? 7.2? ? carbfix
> Ca? ? 0.3? ? actual
> Na? ? 14.4? ? phreeqc
> Na? ? 84? ? carbfix
> Na? ? 106? ? actual
> Cl? ? 22? ? phreeqc
> Cl? ? 21.9? ? carbfix
> Cl? ? 72.1? ? actual
> Fe? ? 0.05? ? phreeqc
> Fe? ? 0.43? ? carbfix
> Fe? ? 1.25? ? actual
> Mg? ? 0.35? ? phreeqc
> Mg? ? 0.17? ? carbfix
> Mg? ? 0.08? ? actual
> SO4? ? 0? ? phreeqc
> SO4? ? 0? ? carbfix
> SO4? ? 416? ? actual
>
>
> As you can see, the values range from 0 to 400. I want it to plot it in bars; when I am plotting it as you can imagine the values near zero don't show at all. So I am trying to make the y axis logarithmic. I have created the following code but it doesn't work. I get the bars with zero above and the others on top.
>
>
> ggplot(fc, aes(x = Temp, y = mean, fill = Glass)) +


None of those aes() names are in your data object. They should be one of

ID? ? values? ? databases


> geom_bar(stat = "identity", position = "dodge", aes(y=log(mean)))

What are you intending with `

aes(y=log(mean)

`
> + theme_bw() + theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank()) + theme(legend.position = c(0.45, 0.85), legend.title = element_blank())
> + scale_fill_brewer(palette = "Dark2") + scale_color_brewer(palette = "Dark2")

-- 

David.

>
> I would very much appreciate your help. I am stuck.
>
>
> Kind regards,
> Maria
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From po|c1410 @end|ng |rom gm@||@com  Mon Jul 17 00:22:22 2023
From: po|c1410 @end|ng |rom gm@||@com (CALUM POLWART)
Date: Sun, 16 Jul 2023 23:22:22 +0100
Subject: [R] how to change the y-axis to logarithmic in a barplot ggplot
In-Reply-To: <722702190.1267536.1689544270997@mail.yahoo.com>
References: <722702190.1267536.1689544270997.ref@mail.yahoo.com>
 <722702190.1267536.1689544270997@mail.yahoo.com>
Message-ID: <CA+etgPn4endsW-sfEvrs3ehzL2L=SPaG_Y8YK+Y-dagxn1Fh+g@mail.gmail.com>

Try adding

scale_y_log10()

This is a general R help list. It's not a ggplot list and you are likely to
be chased off to ggplot's package maintainers nominated support pages.

But really a Google search should surely have found this?



On Sun, 16 Jul 2023, 22:51 Maria Lathouri via R-help, <r-help at r-project.org>
wrote:

> Dear all,
>
> ggplot(fc, aes(x = Temp, y = mean, fill = Glass)) +
> geom_bar(stat = "identity", position = "dodge", aes(y=log(mean)))
> + theme_bw() + theme(panel.grid.major = element_blank(), panel.grid.minor
> = element_blank()) + theme(legend.position = c(0.45, 0.85), legend.title =
> element_blank())
> + scale_fill_brewer(palette = "Dark2") + scale_color_brewer(palette =
> "Dark2") +
>
scale_y_log10()

	[[alternative HTML version deleted]]


From m|@thour| @end|ng |rom y@hoo@gr  Mon Jul 17 00:57:45 2023
From: m|@thour| @end|ng |rom y@hoo@gr (Maria Lathouri)
Date: Sun, 16 Jul 2023 22:57:45 +0000 (UTC)
Subject: [R] how to change the y-axis to logarithmic in a barplot ggplot
In-Reply-To: <CA+etgPn4endsW-sfEvrs3ehzL2L=SPaG_Y8YK+Y-dagxn1Fh+g@mail.gmail.com>
References: <722702190.1267536.1689544270997.ref@mail.yahoo.com>
 <722702190.1267536.1689544270997@mail.yahoo.com>
 <CA+etgPn4endsW-sfEvrs3ehzL2L=SPaG_Y8YK+Y-dagxn1Fh+g@mail.gmail.com>
Message-ID: <2098572578.1283163.1689548265634@mail.yahoo.com>

I will find the ggplot help.?

But I have tried everything, including what you have suggested and nothing works.

Kind regards,
Maria






???? ??????? 16 ??????? 2023 ???? 11:22:36 ?.?. GMT+1, ? ??????? CALUM POLWART <polc1410 at gmail.com> ??????: 





Try adding

scale_y_log10()

This is a general R help list. It's not a ggplot list and you are likely to be chased off to ggplot's package maintainers nominated support pages.

But really a Google search should surely have found this?



On Sun, 16 Jul 2023, 22:51 Maria Lathouri via R-help, <r-help at r-project.org> wrote:
> Dear all,?
> 
> ggplot(fc, aes(x = Temp, y = mean, fill = Glass)) +?
> geom_bar(stat = "identity", position = "dodge", aes(y=log(mean)))?
> + theme_bw() + theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank()) + theme(legend.position = c(0.45, 0.85), legend.title = element_blank())?
> + scale_fill_brewer(palette = "Dark2") + scale_color_brewer(palette = "Dark2") +
> 
scale_y_log10()


From po|c1410 @end|ng |rom gm@||@com  Mon Jul 17 01:12:45 2023
From: po|c1410 @end|ng |rom gm@||@com (CALUM POLWART)
Date: Mon, 17 Jul 2023 00:12:45 +0100
Subject: [R] how to change the y-axis to logarithmic in a barplot ggplot
In-Reply-To: <2098572578.1283163.1689548265634@mail.yahoo.com>
References: <722702190.1267536.1689544270997.ref@mail.yahoo.com>
 <722702190.1267536.1689544270997@mail.yahoo.com>
 <CA+etgPn4endsW-sfEvrs3ehzL2L=SPaG_Y8YK+Y-dagxn1Fh+g@mail.gmail.com>
 <2098572578.1283163.1689548265634@mail.yahoo.com>
Message-ID: <CA+etgP=1thF7AUjoNtOM+=nCZqVC03=wsHn-LYBdDhO0725Dtg@mail.gmail.com>

The data snippet doesn't make sense for the code you provided

Using the snippet I'd be doing

ggplot2(fc,  aes(x = ID, y= value)) +
geom_col() +
scale_y_log10()

And adjusting...

Not sure if that's what you are trying to do?


On Sun, 16 Jul 2023, 23:57 Maria Lathouri, <mlathouri at yahoo.gr> wrote:

> I will find the ggplot help.
>
> But I have tried everything, including what you have suggested and nothing
> works.
>
> Kind regards,
> Maria
>
>
>
>
>
>
> ???? ??????? 16 ??????? 2023 ???? 11:22:36 ?.?. GMT+1, ? ??????? CALUM
> POLWART <polc1410 at gmail.com> ??????:
>
>
>
>
>
> Try adding
>
> scale_y_log10()
>
> This is a general R help list. It's not a ggplot list and you are likely
> to be chased off to ggplot's package maintainers nominated support pages.
>
> But really a Google search should surely have found this?
>
>
>
> On Sun, 16 Jul 2023, 22:51 Maria Lathouri via R-help, <
> r-help at r-project.org> wrote:
> > Dear all,
> >
> > ggplot(fc, aes(x = Temp, y = mean, fill = Glass)) +
> > geom_bar(stat = "identity", position = "dodge", aes(y=log(mean)))
> > + theme_bw() + theme(panel.grid.major = element_blank(),
> panel.grid.minor = element_blank()) + theme(legend.position = c(0.45,
> 0.85), legend.title = element_blank())
> > + scale_fill_brewer(palette = "Dark2") + scale_color_brewer(palette =
> "Dark2") +
> >
> scale_y_log10()
>
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon Jul 17 01:20:12 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 16 Jul 2023 16:20:12 -0700
Subject: [R] how to change the y-axis to logarithmic in a barplot ggplot
In-Reply-To: <2098572578.1283163.1689548265634@mail.yahoo.com>
References: <722702190.1267536.1689544270997.ref@mail.yahoo.com>
 <722702190.1267536.1689544270997@mail.yahoo.com>
 <CA+etgPn4endsW-sfEvrs3ehzL2L=SPaG_Y8YK+Y-dagxn1Fh+g@mail.gmail.com>
 <2098572578.1283163.1689548265634@mail.yahoo.com>
Message-ID: <CAGxFJbR9BhfK8QFr4nRc4Gu1VA8H66Rc9rKgrpCXp=gohqND4w@mail.gmail.com>

Maria,

ggplot is part of the Posit -- formerly RStudio -- assortment of
contributed packages. They have their own support site here
<https://posit.co/support/> , which you *may* find useful for such
questions, also. Though ggplot queries *are* frequently posted and answered
on R-Help.

Cheers,
Bert

On Sun, Jul 16, 2023 at 3:58?PM Maria Lathouri via R-help <
r-help at r-project.org> wrote:

> I will find the ggplot help.
>
> But I have tried everything, including what you have suggested and nothing
> works.
>
> Kind regards,
> Maria
>
>
>
>
>
>
> ???? ??????? 16 ??????? 2023 ???? 11:22:36 ?.?. GMT+1, ? ??????? CALUM
> POLWART <polc1410 at gmail.com> ??????:
>
>
>
>
>
> Try adding
>
> scale_y_log10()
>
> This is a general R help list. It's not a ggplot list and you are likely
> to be chased off to ggplot's package maintainers nominated support pages.
>
> But really a Google search should surely have found this?
>
>
>
> On Sun, 16 Jul 2023, 22:51 Maria Lathouri via R-help, <
> r-help at r-project.org> wrote:
> > Dear all,
> >
> > ggplot(fc, aes(x = Temp, y = mean, fill = Glass)) +
> > geom_bar(stat = "identity", position = "dodge", aes(y=log(mean)))
> > + theme_bw() + theme(panel.grid.major = element_blank(),
> panel.grid.minor = element_blank()) + theme(legend.position = c(0.45,
> 0.85), legend.title = element_blank())
> > + scale_fill_brewer(palette = "Dark2") + scale_color_brewer(palette =
> "Dark2") +
> >
> scale_y_log10()
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Jul 17 05:43:56 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 17 Jul 2023 06:43:56 +0300
Subject: [R] how to change the y-axis to logarithmic in a barplot ggplot
In-Reply-To: <722702190.1267536.1689544270997@mail.yahoo.com>
References: <722702190.1267536.1689544270997.ref@mail.yahoo.com>
 <722702190.1267536.1689544270997@mail.yahoo.com>
Message-ID: <20230717064356.2119599a@Tarkus>

On Sun, 16 Jul 2023 21:51:10 +0000 (UTC)
Maria Lathouri via R-help <r-help at r-project.org> wrote:

> As you can see, the values range from 0 to 400. I want it to plot it
> in bars; when I am plotting it as you can imagine the values near
> zero don't show at all.

A logarithmic scale won't work when the range of numbers to display
includes 0. It would have worked if it was some small non-zero
quantity, but an actual zero is infinitely far down; it won't fit.

There is a number of transformations described in
help(scale_y_continuous). You may find trans="pseudo_log" or
trans="sqrt" useful.

help(geom_bar) recommends geom_col() instead of geom_bar() to represent
values (not counts of occurrences).

We could help you more efficiently if you clarified the relationship
between your data (with columns `ID`, `values`, `databases`) and your
code (which mentions `Temp`, `mean`, `Glass`).

-- 
Best regards,
Ivan


From tr|ng @end|ng |rom gvdnet@dk  Mon Jul 17 07:54:43 2023
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Mon, 17 Jul 2023 07:54:43 +0200
Subject: [R] nlmixr2 installation problems
In-Reply-To: <9833170c-c2c3-2a20-9811-9347b838104c@sapo.pt>
References: <e86b918d-5e30-fd10-95b9-cc8ad6fc9a7b@gvdnet.dk>
 <9833170c-c2c3-2a20-9811-9347b838104c@sapo.pt>
Message-ID: <b0fae971-08ad-f403-fdab-267a5841c88f@gvdnet.dk>

Thanks a lot - I was not offered the opportunity to recompile - the 
system just stopped. Also, today trying

> install.packages("sass") Installing package into 
?C:/Users/Admin/AppData/Local/R/win-library/4.3? (as ?lib? is 
unspecified) also installing the dependencies ?digest?, ?base64enc?, 
?fastmap?, ?ellipsis?, ?fs?, ?htmltools?, ?rappdirs? There is a binary 
version available but the source version is later: binary source 
needs_compilation sass 0.4.6 0.4.7 TRUE - and nothing further - so 
definitely not a nlmixr2 issue, right? Best wishes Troels

Den 16-07-2023 kl. 17:21 skrev Rui Barradas:
> ?s 12:55 de 16/07/2023, Troels Ring escreveu:
>> Hi friends - Trying to install nlmixr2 caused problems. I'm on windows
>> with R4.3.1 so made sure to have rtools 4.3 and also reinstalled R 
>> and then
>>
>> ran
>>
>> install.packages("nlmixr2",dependencies = TRUE)and got the
>> responseInstalling package into
>> ?C:/Users/Admin/AppData/Local/R/win-library/4.3? (as ?lib? is
>> unspecified) also installing the dependencies ?fs?, ?rappdirs?, ?bit?,
>> ?prettyunits?, ?rematch?, ?askpass?, ?sass?, ?commonmark?, ?proxy?,
>> ?bit64?, ?progress?, ?rootSolve?, ?lmom?, ?cellranger?, ?jsonlite?,
>> ?mime?, ?openssl?, ?htmlwidgets?, ?ellipsis?, ?bslib?, ?fontawesome?,
>> ?jquerylib?, ?tinytex?, ?curl?, ?markdown?, ?jpeg?, ?xml2?, ?fastmap?,
>> ?e1071?, ?generics?, ?tidyselect?, ?clipr?, ?hms?, ?vroom?, ?cpp11?,
>> ?tzdb?, ?stringi?, ?purrr?, ?mvtnorm?, ?expm?, ?rstudioapi?, ?Exact?,
>> ?gld?, ?readxl?, ?httr?, ?gridExtra?, ?htmlTable?, ?viridis?,
>> ?htmltools?, ?base64enc?, ?rmarkdown?, ?Formula?, ?bitops?, ?evaluate?,
>> ?highr?, ?xfun?, ?yaml?, ?numDeriv?, ?lazyeval?, ?optextras?, ?dparser?,
>> ?RcppEigen?, ?StanHeaders?, ?sitmo?, ?gridtext?, ?cachem?,
>> ?RcppParallel?, ?RApiSerialize?, ?stringfish?, ?classInt?, ?dplyr?,
>> ?readr?, ?stringr?, ?tidyr?, ?assertthat?, ?binom?, ?Deriv?,
>> ?DescTools?, ?Hmisc?, ?minpack.lm?, ?pander?, ?png?, ?RCurl?,
>> ?backports?, ?checkmate?, ?knitr?, ?lbfgsb3c?, ?minqa?, ?n1qn1?, ?Rcpp?,
>> ?rex?, ?Rvmmin?, ?symengine?, ?BH?, ?RcppArmadillo?, ?rxode2parse?,
>> ?rxode2random?, ?data.table?, ?digest?, ?ggtext?, ?PreciseSums?,
>> ?inline?, ?memoise?, ?sys?, ?rxode2ll?, ?rxode2et?, ?qs?, ?vpc?, ?xgxr?,
>> ?nlmixr2data?, ?nlmixr2est?, ?nlmixr2extra?, ?rxode2?, ?lotri?,
>> ?nlmixr2plot?, ?crayon? There are binary versions available but the
>> source versions are later: binary source needs_compilation sass 0.4.6
>> 0.4.7 TRUE openssl 2.0.6 2.1.0 TRUE
>> - and nothing more happened But when trying to install sass and openssl
>> individually the same announcement of later source versions appeared
>> without making it possible to ask for recompilation. All best wishes 
>> Troels
>>
>> ????[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> Hello,
>
> Maybe this [1] is relevant.
>
>
> [1] 
> https://community.rstudio.com/t/meaning-of-common-message-when-install-a-package-there-are-binary-versions-available-but-the-source-versions-are-later/2431
>
> Hope this helps,
>
> Rui Barradas
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
	[[alternative HTML version deleted]]


From tr|ng @end|ng |rom gvdnet@dk  Mon Jul 17 08:23:19 2023
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Mon, 17 Jul 2023 08:23:19 +0200
Subject: [R] nlmixr2 installation problems
In-Reply-To: <b0fae971-08ad-f403-fdab-267a5841c88f@gvdnet.dk>
References: <e86b918d-5e30-fd10-95b9-cc8ad6fc9a7b@gvdnet.dk>
 <9833170c-c2c3-2a20-9811-9347b838104c@sapo.pt>
 <b0fae971-08ad-f403-fdab-267a5841c88f@gvdnet.dk>
Message-ID: <06aeaea4-04de-79e6-b945-bd5d694ce313@gvdnet.dk>

Problem solved, I think:

issuing

install.packages("openssl",dependencies=TRUE,type="source") and likewise 
for sass resulted in a lengthy compilation and installation process 
ending happily, however, after which

install.packages("nlmixr2",dependencies=TRUE)

appeared to do as expected

Strange only, that RStudio doesn't suggest the type="source" by itself

Best wishes

Troels

Den 17-07-2023 kl. 07:54 skrev Troels Ring:
> Thanks a lot - I was not offered the opportunity to recompile - the
> system just stopped. Also, today trying
>
>> install.packages("sass") Installing package into
> ?C:/Users/Admin/AppData/Local/R/win-library/4.3? (as ?lib? is
> unspecified) also installing the dependencies ?digest?, ?base64enc?,
> ?fastmap?, ?ellipsis?, ?fs?, ?htmltools?, ?rappdirs? There is a binary
> version available but the source version is later: binary source
> needs_compilation sass 0.4.6 0.4.7 TRUE - and nothing further - so
> definitely not a nlmixr2 issue, right? Best wishes Troels
>
> Den 16-07-2023 kl. 17:21 skrev Rui Barradas:
>> ?s 12:55 de 16/07/2023, Troels Ring escreveu:
>>> Hi friends - Trying to install nlmixr2 caused problems. I'm on windows
>>> with R4.3.1 so made sure to have rtools 4.3 and also reinstalled R
>>> and then
>>>
>>> ran
>>>
>>> install.packages("nlmixr2",dependencies = TRUE)and got the
>>> responseInstalling package into
>>> ?C:/Users/Admin/AppData/Local/R/win-library/4.3? (as ?lib? is
>>> unspecified) also installing the dependencies ?fs?, ?rappdirs?, ?bit?,
>>> ?prettyunits?, ?rematch?, ?askpass?, ?sass?, ?commonmark?, ?proxy?,
>>> ?bit64?, ?progress?, ?rootSolve?, ?lmom?, ?cellranger?, ?jsonlite?,
>>> ?mime?, ?openssl?, ?htmlwidgets?, ?ellipsis?, ?bslib?, ?fontawesome?,
>>> ?jquerylib?, ?tinytex?, ?curl?, ?markdown?, ?jpeg?, ?xml2?, ?fastmap?,
>>> ?e1071?, ?generics?, ?tidyselect?, ?clipr?, ?hms?, ?vroom?, ?cpp11?,
>>> ?tzdb?, ?stringi?, ?purrr?, ?mvtnorm?, ?expm?, ?rstudioapi?, ?Exact?,
>>> ?gld?, ?readxl?, ?httr?, ?gridExtra?, ?htmlTable?, ?viridis?,
>>> ?htmltools?, ?base64enc?, ?rmarkdown?, ?Formula?, ?bitops?, ?evaluate?,
>>> ?highr?, ?xfun?, ?yaml?, ?numDeriv?, ?lazyeval?, ?optextras?, ?dparser?,
>>> ?RcppEigen?, ?StanHeaders?, ?sitmo?, ?gridtext?, ?cachem?,
>>> ?RcppParallel?, ?RApiSerialize?, ?stringfish?, ?classInt?, ?dplyr?,
>>> ?readr?, ?stringr?, ?tidyr?, ?assertthat?, ?binom?, ?Deriv?,
>>> ?DescTools?, ?Hmisc?, ?minpack.lm?, ?pander?, ?png?, ?RCurl?,
>>> ?backports?, ?checkmate?, ?knitr?, ?lbfgsb3c?, ?minqa?, ?n1qn1?, ?Rcpp?,
>>> ?rex?, ?Rvmmin?, ?symengine?, ?BH?, ?RcppArmadillo?, ?rxode2parse?,
>>> ?rxode2random?, ?data.table?, ?digest?, ?ggtext?, ?PreciseSums?,
>>> ?inline?, ?memoise?, ?sys?, ?rxode2ll?, ?rxode2et?, ?qs?, ?vpc?, ?xgxr?,
>>> ?nlmixr2data?, ?nlmixr2est?, ?nlmixr2extra?, ?rxode2?, ?lotri?,
>>> ?nlmixr2plot?, ?crayon? There are binary versions available but the
>>> source versions are later: binary source needs_compilation sass 0.4.6
>>> 0.4.7 TRUE openssl 2.0.6 2.1.0 TRUE
>>> - and nothing more happened But when trying to install sass and openssl
>>> individually the same announcement of later source versions appeared
>>> without making it possible to ask for recompilation. All best wishes
>>> Troels
>>>
>>>  ????[[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> Hello,
>>
>> Maybe this [1] is relevant.
>>
>>
>> [1]
>> https://community.rstudio.com/t/meaning-of-common-message-when-install-a-package-there-are-binary-versions-available-but-the-source-versions-are-later/2431
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From kry|ov@r00t @end|ng |rom gm@||@com  Mon Jul 17 09:13:48 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Mon, 17 Jul 2023 10:13:48 +0300
Subject: [R] nlmixr2 installation problems
In-Reply-To: <06aeaea4-04de-79e6-b945-bd5d694ce313@gvdnet.dk>
References: <e86b918d-5e30-fd10-95b9-cc8ad6fc9a7b@gvdnet.dk>
 <9833170c-c2c3-2a20-9811-9347b838104c@sapo.pt>
 <b0fae971-08ad-f403-fdab-267a5841c88f@gvdnet.dk>
 <06aeaea4-04de-79e6-b945-bd5d694ce313@gvdnet.dk>
Message-ID: <20230717101348.7e1c9294@Tarkus>

On Mon, 17 Jul 2023 08:23:19 +0200
Troels Ring <tring at gvdnet.dk> wrote:

> install.packages("openssl",dependencies=TRUE,type="source") and
> likewise for sass resulted in a lengthy compilation and installation
> process ending happily, however, after which
> 
> install.packages("nlmixr2",dependencies=TRUE)
> 
> appeared to do as expected
> 
> Strange only, that RStudio doesn't suggest the type="source" by itself

It sounds like R was using utils::askYesNo() to confirm whether you'd
like to install newer source packages, but the pop-up window was lost
behind the RStudio window. Unfortunately, this doesn't seem to be
something that an R front-end could handle on its end.

Glad you solved the problem anyway.

-- 
Best regards,
Ivan


From k|mmo@e|o @end|ng |rom utu@||  Mon Jul 17 13:21:09 2023
From: k|mmo@e|o @end|ng |rom utu@|| (Kimmo Elo)
Date: Mon, 17 Jul 2023 11:21:09 +0000
Subject: [R] how to change the y-axis to logarithmic in a barplot ggplot
In-Reply-To: <2098572578.1283163.1689548265634@mail.yahoo.com>
References: <722702190.1267536.1689544270997.ref@mail.yahoo.com>
 <722702190.1267536.1689544270997@mail.yahoo.com>
 <CA+etgPn4endsW-sfEvrs3ehzL2L=SPaG_Y8YK+Y-dagxn1Fh+g@mail.gmail.com>
 <2098572578.1283163.1689548265634@mail.yahoo.com>
Message-ID: <21690040-62e3-4c08-81ed-5c4d7f769423@utu.fi>

Hi,

try:

scale_y_continuous(trans='log10')

HTH,

Kimmo
17. hein?k. 2023, 1.58, Maria Lathouri via R-help <r-help at r-project.org<mailto:r-help at r-project.org>> kirjoitti:

I will find the ggplot help.

But I have tried everything, including what you have suggested and nothing works.

Kind regards,
Maria






???? ??????? 16 ??????? 2023 ???? 11:22:36 ?.?. GMT+1, ? ??????? CALUM POLWART <polc1410 at gmail.com> ??????:





Try adding

scale_y_log10()

This is a general R help list. It's not a ggplot list and you are likely to be chased off to ggplot's package maintainers nominated support pages.

But really a Google search should surely have found this?



On Sun, 16 Jul 2023, 22:51 Maria Lathouri via R-help, <r-help at r-project.org> wrote:
 Dear all,

 ggplot(fc, aes(x = Temp, y = mean, fill = Glass)) +
 geom_bar(stat = "identity", position = "dodge", aes(y=log(mean)))
 + theme_bw() + theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank()) + theme(legend.position = c(0.45, 0.85), legend.title = element_blank())
 + scale_fill_brewer(palette = "Dark2") + scale_color_brewer(palette = "Dark2") +

scale_y_log10()

________________________________

R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From ht @end|ng |rom he@therturner@net  Mon Jul 17 17:33:54 2023
From: ht @end|ng |rom he@therturner@net (Heather Turner)
Date: Mon, 17 Jul 2023 16:33:54 +0100
Subject: [R] Dates and location for useR! 2024
Message-ID: <ee4534e8-261c-4070-ba6a-17c9f930d955@app.fastmail.com>

Dear All,

We are pleased to announce that useR! 2024 will be a hybrid conference, taking place 8-11 July in Salzburg, Austria.

The conference website is yet to be set up. In the meantime, you can keep up-to-date the following ways:

useR! LinkedIn Page: https://www.linkedin.com/company/user-conf
useR! Twitter: https://twitter.com/_useRconf
R Foundation Mastodon: https://fosstodon.org/@R_Foundation (we will likely set up a Mastodon account for useR! in due course)

Best wishes,

Heather
On behalf of the R Foundation Conference Committee

_______________________________________________
R-announce at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-announce


From p@u|bern@|07 @end|ng |rom gm@||@com  Mon Jul 17 19:24:51 2023
From: p@u|bern@|07 @end|ng |rom gm@||@com (Paul Bernal)
Date: Mon, 17 Jul 2023 12:24:51 -0500
Subject: [R] Obtaining R-squared from All Possible Combinations of Linear
 Models Fitted
Message-ID: <CAMOcQfOab8XpjCb05=mMuXZekbv=dQz6hvG3RQF90KuR4nN91w@mail.gmail.com>

Dear friends,

I need to automatically fit all possible linear regression models (with all
possible combinations of regressors), and found the MuMIn package, which
has the dredge function.

This is the dataset  I am working with:
> dput(final_frame)
structure(list(y = c(41.9, 44.5, 43.9, 30.9, 27.9, 38.9, 30.9,
28.9, 25.9, 31, 29.5, 35.9, 37.5, 37.9), x1 = c(6.6969, 8.7951,
9.0384, 5.9592, 4.5429, 8.3607, 5.898, 5.6039, 4.9176, 6.2712,
5.0208, 5.8282, 5.9894, 7.5422), x4 = c(1.488, 1.82, 1.5, 1.121,
1.175, 1.777, 1.24, 1.501, 0.998, 0.975, 1.5, 1.225, 1.256, 1.69
), x8 = c(22, 50, 23, 32, 40, 48, 51, 32, 42, 30, 62, 32, 40,
22), x2 = c(1.5, 1.5, 1, 1, 1, 1.5, 1, 1, 1, 1, 1, 1, 1, 1.5),
    x7 = c(3, 4, 3, 3, 3, 4, 3, 3, 4, 2, 4, 3, 3, 3)), class =
"data.frame", row.names = c(NA,
-14L))

I started with the all regressor model, which I called globalmodel as
follows:
#Fitting Regression model with all possible combinations of regressors
options(na.action = "na.fail") # change the default "na.omit" to prevent
models
globalmodel <- lm(y~., data=final_frame)

Then, the following code provides the different coefficients (for
regressors and the intercept) for each of the possible model combinations:
combinations <- dredge(globalmodel)
print(combinations)
 I would like to retrieve  the R-squared generated by each combination, but
have not been able to get it thus far.

Any guidance on how to retrieve the R-squared from all linear model
combinations would be greatly appreciated.

Kind regards,
Paul

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon Jul 17 20:46:15 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 17 Jul 2023 11:46:15 -0700
Subject: [R] Off-topic: ChatGPT Code Interpreter
Message-ID: <CAGxFJbSxR8XF5fXsz0tmAm+RM9Bb_KECcuqHrWCCo6Xa-WoKKw@mail.gmail.com>

This is an **off-topic** post about the subject line, that I thought
might be of interest to the R Community. I hope this does not offend
anyone.

The widely known ChatGPT software now offers what  is called a "Code
Interpreter," that, among other things, purports to do "data
analysis."  (Search for articles with details.) One quote, from the
(online) NY Times, is:

"Arvind Narayanan, a professor of computer science at Princeton
University, cautioned that people should not become overly reliant on
code interpreter for data analysis as A.I. still produces inaccurate
results and misinformation.

'Appropriate data analysis requires just a lot of critical thinking
about the data,? he said.' "

Amen. ... Maybe.

(As this is off-topic, if you wish to reply to me, probably better to
do so privately).

Cheers to all,
Bert


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Mon Jul 17 21:13:16 2023
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 17 Jul 2023 14:13:16 -0500
Subject: [R] Off-topic: ChatGPT Code Interpreter
In-Reply-To: <CAGxFJbSxR8XF5fXsz0tmAm+RM9Bb_KECcuqHrWCCo6Xa-WoKKw@mail.gmail.com>
References: <CAGxFJbSxR8XF5fXsz0tmAm+RM9Bb_KECcuqHrWCCo6Xa-WoKKw@mail.gmail.com>
Message-ID: <d2c401ae-d8a3-1101-30d1-50b1981c75b8@effectivedefense.org>

	  I don't know about ChatGPT, but Daniel Kahneman won the 2002 Nobel 
Memorial Prize in Economics,[1] even though he's not an economist, for 
his leadership in creating a new subfield in the intersection of human 
psychology and economics now called "behavioral economics".[2] Then in 
2009 Kahneman and Gary Klein published an article on, "Conditions for 
intuitive expertise: a failure to disagree", which concluded that expert 
intuition is learned from frequent, rapid, high-quality feedback. 
People you do not learn from frequent, rapid, high-quality feedback can 
be beaten by simple heuristics developed by intelligent lay people.[3] 
That includes most professions, which Kahneman Sibony and Sunstein call 
"respect-experts".


	  Kahneman Sibony and Sunstein further report that with a little data, 
a regression model can outperform a simple heuristic, and with massive 
amounts of data, artificial intelligence can outperform regression 
models.[4]


	  An extreme but real example of current reality was describe in an 
article on "Asylum roulette":  With asylum judges in the same 
jurisdiction with cases assigned at random, one judge approved 5 percent 
of cases while another approved 88 percent.[5] However, virtually all 
"respect-experts" are influenced in their judgements by time of day and 
whether their favorite sports team won or lost the previous day.  That 
level of noise can be reduced dramatically by use of appropriate 
artificial intelligence.


	  Comments?
	  Spencer Graves


[1]


https://en.wikipedia.org/wiki/Daniel_Kahneman


[2]


https://en.wikipedia.org/wiki/Behavioral_economics


[3]


https://www.researchgate.net/publication/26798603_Conditions_for_Intuitive_Expertise_A_Failure_to_Disagree


[4]


Daniel Kahneman; Olivier Sibony; Cass Sunstein (2021). Noise: A Flaw in 
Human Judgment (Little, Brown and Company).


[5]


https://en.wikipedia.org/wiki/Refugee_roulette


On 7/17/23 1:46 PM, Bert Gunter wrote:
> This is an **off-topic** post about the subject line, that I thought
> might be of interest to the R Community. I hope this does not offend
> anyone.
> 
> The widely known ChatGPT software now offers what  is called a "Code
> Interpreter," that, among other things, purports to do "data
> analysis."  (Search for articles with details.) One quote, from the
> (online) NY Times, is:
> 
> "Arvind Narayanan, a professor of computer science at Princeton
> University, cautioned that people should not become overly reliant on
> code interpreter for data analysis as A.I. still produces inaccurate
> results and misinformation.
> 
> 'Appropriate data analysis requires just a lot of critical thinking
> about the data,? he said.' "
> 
> Amen. ... Maybe.
> 
> (As this is off-topic, if you wish to reply to me, probably better to
> do so privately).
> 
> Cheers to all,
> Bert
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Mon Jul 17 21:16:31 2023
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Mon, 17 Jul 2023 19:16:31 +0000
Subject: [R] Off-topic: ChatGPT Code Interpreter
In-Reply-To: <CAGxFJbSxR8XF5fXsz0tmAm+RM9Bb_KECcuqHrWCCo6Xa-WoKKw@mail.gmail.com>
References: <CAGxFJbSxR8XF5fXsz0tmAm+RM9Bb_KECcuqHrWCCo6Xa-WoKKw@mail.gmail.com>
Message-ID: <LV8PR22MB4528C89FEF7C755404816B15CF3BA@LV8PR22MB4528.namprd22.prod.outlook.com>

This seems spot on, given that Paul Bernal just posted a request to fit all possible models and compare them using r-squared. The all models approach does not promote understanding about what your model is saying about the data and how the system works. Nor does it facilitate fitting the methods to best address the research goals.
Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Bert Gunter
Sent: Monday, July 17, 2023 2:46 PM
To: R-help <R-help at r-project.org>
Subject: [R] Off-topic: ChatGPT Code Interpreter

[External Email]

This is an **off-topic** post about the subject line, that I thought might be of interest to the R Community. I hope this does not offend anyone.

The widely known ChatGPT software now offers what  is called a "Code Interpreter," that, among other things, purports to do "data analysis."  (Search for articles with details.) One quote, from the
(online) NY Times, is:

"Arvind Narayanan, a professor of computer science at Princeton University, cautioned that people should not become overly reliant on code interpreter for data analysis as A.I. still produces inaccurate results and misinformation.

'Appropriate data analysis requires just a lot of critical thinking about the data," he said.' "

Amen. ... Maybe.

(As this is off-topic, if you wish to reply to me, probably better to do so privately).

Cheers to all,
Bert

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From |r@|nj @end|ng |rom gm@||@com  Mon Jul 17 21:25:59 2023
From: |r@|nj @end|ng |rom gm@||@com (John C Frain)
Date: Mon, 17 Jul 2023 20:25:59 +0100
Subject: [R] 
 Obtaining R-squared from All Possible Combinations of Linear
 Models Fitted
In-Reply-To: <CAMOcQfOab8XpjCb05=mMuXZekbv=dQz6hvG3RQF90KuR4nN91w@mail.gmail.com>
References: <CAMOcQfOab8XpjCb05=mMuXZekbv=dQz6hvG3RQF90KuR4nN91w@mail.gmail.com>
Message-ID: <CAHrK517u1FXP7XN35FmyLXYtdUg7zMQ+VyTgpdT4XTKBiyk9RQ@mail.gmail.com>

MuMln is a package designed to select optimum models mainly based on
information criteria.  R-squared is not a suitable criterion for this
purpose.   As far as I can see is not covered in this package.  (I presume
you already know that R-squared for the model with all possible regressors
is at least as great as R with any subset of the regressors).

If you want to calculate all these R-squared's it should be easy to write a
small routine to estimate them.  I am very curious as to why you wish to do
this.


John C Frain.
3 Aranleigh Park
Rathfarnham
Dublin 14
Ireland
www.tcd.ie/Economics/staff/frainj/home.html
https://jcfrain.wordpress.com/
https://jcfraincv19.wordpress.com/

mailto:frainj at tcd.ie
mailto:frainj at gmail.com


On Mon, 17 Jul 2023 at 18:25, Paul Bernal <paulbernal07 at gmail.com> wrote:

> Dear friends,
>
> I need to automatically fit all possible linear regression models (with all
> possible combinations of regressors), and found the MuMIn package, which
> has the dredge function.
>
> This is the dataset  I am working with:
> > dput(final_frame)
> structure(list(y = c(41.9, 44.5, 43.9, 30.9, 27.9, 38.9, 30.9,
> 28.9, 25.9, 31, 29.5, 35.9, 37.5, 37.9), x1 = c(6.6969, 8.7951,
> 9.0384, 5.9592, 4.5429, 8.3607, 5.898, 5.6039, 4.9176, 6.2712,
> 5.0208, 5.8282, 5.9894, 7.5422), x4 = c(1.488, 1.82, 1.5, 1.121,
> 1.175, 1.777, 1.24, 1.501, 0.998, 0.975, 1.5, 1.225, 1.256, 1.69
> ), x8 = c(22, 50, 23, 32, 40, 48, 51, 32, 42, 30, 62, 32, 40,
> 22), x2 = c(1.5, 1.5, 1, 1, 1, 1.5, 1, 1, 1, 1, 1, 1, 1, 1.5),
>     x7 = c(3, 4, 3, 3, 3, 4, 3, 3, 4, 2, 4, 3, 3, 3)), class =
> "data.frame", row.names = c(NA,
> -14L))
>
> I started with the all regressor model, which I called globalmodel as
> follows:
> #Fitting Regression model with all possible combinations of regressors
> options(na.action = "na.fail") # change the default "na.omit" to prevent
> models
> globalmodel <- lm(y~., data=final_frame)
>
> Then, the following code provides the different coefficients (for
> regressors and the intercept) for each of the possible model combinations:
> combinations <- dredge(globalmodel)
> print(combinations)
>  I would like to retrieve  the R-squared generated by each combination, but
> have not been able to get it thus far.
>
> Any guidance on how to retrieve the R-squared from all linear model
> combinations would be greatly appreciated.
>
> Kind regards,
> Paul
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m|@thour| @end|ng |rom y@hoo@gr  Mon Jul 17 21:29:01 2023
From: m|@thour| @end|ng |rom y@hoo@gr (Maria Lathouri)
Date: Mon, 17 Jul 2023 19:29:01 +0000 (UTC)
Subject: [R] how to change the y-axis to logarithmic in a barplot ggplot
In-Reply-To: <CAGxFJbR9BhfK8QFr4nRc4Gu1VA8H66Rc9rKgrpCXp=gohqND4w@mail.gmail.com>
References: <722702190.1267536.1689544270997.ref@mail.yahoo.com>
 <722702190.1267536.1689544270997@mail.yahoo.com>
 <CA+etgPn4endsW-sfEvrs3ehzL2L=SPaG_Y8YK+Y-dagxn1Fh+g@mail.gmail.com>
 <2098572578.1283163.1689548265634@mail.yahoo.com>
 <CAGxFJbR9BhfK8QFr4nRc4Gu1VA8H66Rc9rKgrpCXp=gohqND4w@mail.gmail.com>
Message-ID: <521504841.2003783.1689622141778@mail.yahoo.com>

Dear Bert,?

Thank you very much for the tip. The reason that I took the initiative to write here is because I receive here as well questions about ggplot. Next time I will use the ggplot help.?

Maria






???? ??????? 17 ??????? 2023 ???? 12:20:25 ?.?. GMT+1, ? ??????? Bert Gunter <bgunter.4567 at gmail.com> ??????: 





Maria,

ggplot is part of the Posit -- formerly RStudio -- assortment of contributed packages. They have their own support site here , which you *may* find useful for such questions, also. Though ggplot queries *are* frequently posted and answered on R-Help.

Cheers,
Bert

On Sun, Jul 16, 2023 at 3:58?PM Maria Lathouri via R-help <r-help at r-project.org> wrote:
> I will find the ggplot help.?
> 
> But I have tried everything, including what you have suggested and nothing works.
> 
> Kind regards,
> Maria
> 
> 
> 
> 
> 
> 
> ???? ??????? 16 ??????? 2023 ???? 11:22:36 ?.?. GMT+1, ? ??????? CALUM POLWART <polc1410 at gmail.com> ??????: 
> 
> 
> 
> 
> 
> Try adding
> 
> scale_y_log10()
> 
> This is a general R help list. It's not a ggplot list and you are likely to be chased off to ggplot's package maintainers nominated support pages.
> 
> But really a Google search should surely have found this?
> 
> 
> 
> On Sun, 16 Jul 2023, 22:51 Maria Lathouri via R-help, <r-help at r-project.org> wrote:
>> Dear all,?
>> 
>> ggplot(fc, aes(x = Temp, y = mean, fill = Glass)) +?
>> geom_bar(stat = "identity", position = "dodge", aes(y=log(mean)))?
>> + theme_bw() + theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank()) + theme(legend.position = c(0.45, 0.85), legend.title = element_blank())?
>> + scale_fill_brewer(palette = "Dark2") + scale_color_brewer(palette = "Dark2") +
>> 
> scale_y_log10()
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 


From m|@thour| @end|ng |rom y@hoo@gr  Mon Jul 17 22:01:57 2023
From: m|@thour| @end|ng |rom y@hoo@gr (Maria Lathouri)
Date: Mon, 17 Jul 2023 20:01:57 +0000 (UTC)
Subject: [R] how to change the y-axis to logarithmic in a barplot ggplot
In-Reply-To: <20230717064356.2119599a@Tarkus>
References: <722702190.1267536.1689544270997.ref@mail.yahoo.com>
 <722702190.1267536.1689544270997@mail.yahoo.com>
 <20230717064356.2119599a@Tarkus>
Message-ID: <593771802.2032128.1689624117263@mail.yahoo.com>

Hi Ivan,?

yes you are right. I have many values close to zero and if I use log, they are instantly transformed to negative values and then the bars show above. The sqrt trans worked ok but when I used the pseudo_log_trans, it did the work!

Many thanks.?

Kind regards,
Maria






???? ??????? 17 ??????? 2023 ???? 04:43:59 ?.?. GMT+1, ? ??????? Ivan Krylov <krylov.r00t at gmail.com> ??????: 





On Sun, 16 Jul 2023 21:51:10 +0000 (UTC)

Maria Lathouri via R-help <r-help at r-project.org> wrote:

> As you can see, the values range from 0 to 400. I want it to plot it
> in bars; when I am plotting it as you can imagine the values near
> zero don't show at all.


A logarithmic scale won't work when the range of numbers to display
includes 0. It would have worked if it was some small non-zero
quantity, but an actual zero is infinitely far down; it won't fit.

There is a number of transformations described in
help(scale_y_continuous). You may find trans="pseudo_log" or
trans="sqrt" useful.

help(geom_bar) recommends geom_col() instead of geom_bar() to represent
values (not counts of occurrences).

We could help you more efficiently if you clarified the relationship
between your data (with columns `ID`, `values`, `databases`) and your
code (which mentions `Temp`, `mean`, `Glass`).

-- 
Best regards,
Ivan


From drj|m|emon @end|ng |rom gm@||@com  Tue Jul 18 01:23:59 2023
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Tue, 18 Jul 2023 09:23:59 +1000
Subject: [R] Off-topic: ChatGPT Code Interpreter
In-Reply-To: <LV8PR22MB4528C89FEF7C755404816B15CF3BA@LV8PR22MB4528.namprd22.prod.outlook.com>
References: <CAGxFJbSxR8XF5fXsz0tmAm+RM9Bb_KECcuqHrWCCo6Xa-WoKKw@mail.gmail.com>
 <LV8PR22MB4528C89FEF7C755404816B15CF3BA@LV8PR22MB4528.namprd22.prod.outlook.com>
Message-ID: <CA+8X3fXkRFVWtSVRkk3wm6ZavNg6hmRU2d=FNdf7733kA5yDFg@mail.gmail.com>

I haven't really focused on the statistical capabilities of AI, that
marriage of massive memory and associative learning. I am impressed by
its ability to perform text-to-image conversion, something I have
recently needed. My artistic ability is that of the average three year
old, yet I can employ AI to translate my mental images into realistic
pictures. Perhaps we really are learning about how we think. As far as
I am aware, it just does what we tell it to do. Like other tools, it
is as good or bad as the user.

Jim


From k|mmo@e|o @end|ng |rom utu@||  Tue Jul 18 07:16:38 2023
From: k|mmo@e|o @end|ng |rom utu@|| (Kimmo Elo)
Date: Tue, 18 Jul 2023 05:16:38 +0000
Subject: [R] how to change the y-axis to logarithmic in a barplot ggplot
In-Reply-To: <593771802.2032128.1689624117263@mail.yahoo.com>
References: <722702190.1267536.1689544270997.ref@mail.yahoo.com>
 <722702190.1267536.1689544270997@mail.yahoo.com>
 <20230717064356.2119599a@Tarkus>,
 <593771802.2032128.1689624117263@mail.yahoo.com>
Message-ID: <ee5b3e7ea92d4ba9af266880e33dca63@utu.fi>

Hi,

Have you tried:

scale_y_continuous(trans='log10')

HTH,

Kimmo
________________________________________
L?hett?j?: Maria Lathouri via R-help <r-help at r-project.org>
L?hetetty: maanantai 17. hein?kuuta 2023 23.01.57
Vastaanottaja: Maria Lathouri via R-help; Ivan Krylov
Aihe: Re: [R] how to change the y-axis to logarithmic in a barplot ggplot

Hi Ivan,

yes you are right. I have many values close to zero and if I use log, they are instantly transformed to negative values and then the bars show above. The sqrt trans worked ok but when I used the pseudo_log_trans, it did the work!

Many thanks.

Kind regards,
Maria






???? ??????? 17 ??????? 2023 ???? 04:43:59 ?.?. GMT+1, ? ??????? Ivan Krylov <krylov.r00t at gmail.com> ??????:





On Sun, 16 Jul 2023 21:51:10 +0000 (UTC)

Maria Lathouri via R-help <r-help at r-project.org> wrote:

> As you can see, the values range from 0 to 400. I want it to plot it
> in bars; when I am plotting it as you can imagine the values near
> zero don't show at all.


A logarithmic scale won't work when the range of numbers to display
includes 0. It would have worked if it was some small non-zero
quantity, but an actual zero is infinitely far down; it won't fit.

There is a number of transformations described in
help(scale_y_continuous). You may find trans="pseudo_log" or
trans="sqrt" useful.

help(geom_bar) recommends geom_col() instead of geom_bar() to represent
values (not counts of occurrences).

We could help you more efficiently if you clarified the relationship
between your data (with columns `ID`, `values`, `databases`) and your
code (which mentions `Temp`, `mean`, `Glass`).

--
Best regards,
Ivan

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Jul 18 07:21:02 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 18 Jul 2023 06:21:02 +0100
Subject: [R] Off-topic: ChatGPT Code Interpreter
In-Reply-To: <CA+8X3fXkRFVWtSVRkk3wm6ZavNg6hmRU2d=FNdf7733kA5yDFg@mail.gmail.com>
References: <CAGxFJbSxR8XF5fXsz0tmAm+RM9Bb_KECcuqHrWCCo6Xa-WoKKw@mail.gmail.com>
 <LV8PR22MB4528C89FEF7C755404816B15CF3BA@LV8PR22MB4528.namprd22.prod.outlook.com>
 <CA+8X3fXkRFVWtSVRkk3wm6ZavNg6hmRU2d=FNdf7733kA5yDFg@mail.gmail.com>
Message-ID: <5d472e1d-3d33-f12f-3602-2bcc528c302a@sapo.pt>

?s 00:23 de 18/07/2023, Jim Lemon escreveu:
> I haven't really focused on the statistical capabilities of AI, that
> marriage of massive memory and associative learning. I am impressed by
> its ability to perform text-to-image conversion, something I have
> recently needed. My artistic ability is that of the average three year
> old, yet I can employ AI to translate my mental images into realistic
> pictures. Perhaps we really are learning about how we think. As far as
> I am aware, it just does what we tell it to do. Like other tools, it
> is as good or bad as the user.
> 
> Jim
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Also off-topic but the date is fun:


A system is not a head.
Furniture is not people.
All processes and all devices,
will be useless for organizations,
if the heads of the individuals who employ them,
are not properly organized.
And these heads will be organized,
if the same part of the boss's body that directs them
is properly organized.
Just like you can write nonsense
with a latest model typewriter,
nonsense can also be done
with the most perfect systems and devices
meant to help you not to.
Systems, processes, furniture, machines,
are purely auxiliary elements.
The real process is to think.
The fundamental machine is intelligence.

Fernando Pessoa, 1926

Revista de Com?rcio e Contabilidade, n? 4. Lisboa, 25-4-1926.
(Magazine of Commerce and Accounting, n? 4. Lisbon, 25-4-1926)


Rui Barradas


From rhe|p @end|ng |rom eoo@@dd@@n|  Tue Jul 18 13:49:15 2023
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Tue, 18 Jul 2023 13:49:15 +0200
Subject: [R] 
 Obtaining R-squared from All Possible Combinations of Linear
 Models Fitted
In-Reply-To: <CAMOcQfOab8XpjCb05=mMuXZekbv=dQz6hvG3RQF90KuR4nN91w@mail.gmail.com>
References: <CAMOcQfOab8XpjCb05=mMuXZekbv=dQz6hvG3RQF90KuR4nN91w@mail.gmail.com>
Message-ID: <fbce26cb-07f3-6fd7-d37d-a8111496f222@dds.nl>

The dredge function has a `extra` argument to get other statistics:

optional additional statistics to be included in the result, provided as 
functions, function names or a list of such (preferably named or 
quoted). As with the rank argument, each function must accept as an 
argument a fitted model object and return (a value coercible to) a 
numeric vector. This could be, for instance, additional information 
criteria or goodness-of-fit statistics. The character strings "R^2" and 
"adjR^2" are treated in a special way and add a likelihood-ratio based 
R? and modified-R? to the result, respectively (this is more efficient 
than using r.squaredLR directly).

HTH
Jan



On 17-07-2023 19:24, Paul Bernal wrote:
> Dear friends,
> 
> I need to automatically fit all possible linear regression models (with all
> possible combinations of regressors), and found the MuMIn package, which
> has the dredge function.
> 
> This is the dataset  I am working with:
>> dput(final_frame)
> structure(list(y = c(41.9, 44.5, 43.9, 30.9, 27.9, 38.9, 30.9,
> 28.9, 25.9, 31, 29.5, 35.9, 37.5, 37.9), x1 = c(6.6969, 8.7951,
> 9.0384, 5.9592, 4.5429, 8.3607, 5.898, 5.6039, 4.9176, 6.2712,
> 5.0208, 5.8282, 5.9894, 7.5422), x4 = c(1.488, 1.82, 1.5, 1.121,
> 1.175, 1.777, 1.24, 1.501, 0.998, 0.975, 1.5, 1.225, 1.256, 1.69
> ), x8 = c(22, 50, 23, 32, 40, 48, 51, 32, 42, 30, 62, 32, 40,
> 22), x2 = c(1.5, 1.5, 1, 1, 1, 1.5, 1, 1, 1, 1, 1, 1, 1, 1.5),
>      x7 = c(3, 4, 3, 3, 3, 4, 3, 3, 4, 2, 4, 3, 3, 3)), class =
> "data.frame", row.names = c(NA,
> -14L))
> 
> I started with the all regressor model, which I called globalmodel as
> follows:
> #Fitting Regression model with all possible combinations of regressors
> options(na.action = "na.fail") # change the default "na.omit" to prevent
> models
> globalmodel <- lm(y~., data=final_frame)
> 
> Then, the following code provides the different coefficients (for
> regressors and the intercept) for each of the possible model combinations:
> combinations <- dredge(globalmodel)
> print(combinations)
>   I would like to retrieve  the R-squared generated by each combination, but
> have not been able to get it thus far.
> 
> Any guidance on how to retrieve the R-squared from all linear model
> combinations would be greatly appreciated.
> 
> Kind regards,
> Paul
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From j||ucke48 @end|ng |rom gm@||@com  Tue Jul 18 14:57:12 2023
From: j||ucke48 @end|ng |rom gm@||@com (Joseph Lucke)
Date: Tue, 18 Jul 2023 08:57:12 -0400
Subject: [R] Off-topic: ChatGPT Code Interpreter
In-Reply-To: <5d472e1d-3d33-f12f-3602-2bcc528c302a@sapo.pt>
References: <CAGxFJbSxR8XF5fXsz0tmAm+RM9Bb_KECcuqHrWCCo6Xa-WoKKw@mail.gmail.com>
 <LV8PR22MB4528C89FEF7C755404816B15CF3BA@LV8PR22MB4528.namprd22.prod.outlook.com>
 <CA+8X3fXkRFVWtSVRkk3wm6ZavNg6hmRU2d=FNdf7733kA5yDFg@mail.gmail.com>
 <5d472e1d-3d33-f12f-3602-2bcc528c302a@sapo.pt>
Message-ID: <CAGqYBsb1yZxmGyrzgUmUkmrDaaSH7aM=YUOck5GCQcfs7J8kvg@mail.gmail.com>

The near year as Metropolis,  1927.

On Tue, Jul 18, 2023, 1:27 AM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> ?s 00:23 de 18/07/2023, Jim Lemon escreveu:
> > I haven't really focused on the statistical capabilities of AI, that
> > marriage of massive memory and associative learning. I am impressed by
> > its ability to perform text-to-image conversion, something I have
> > recently needed. My artistic ability is that of the average three year
> > old, yet I can employ AI to translate my mental images into realistic
> > pictures. Perhaps we really are learning about how we think. As far as
> > I am aware, it just does what we tell it to do. Like other tools, it
> > is as good or bad as the user.
> >
> > Jim
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> Hello,
>
> Also off-topic but the date is fun:
>
>
> A system is not a head.
> Furniture is not people.
> All processes and all devices,
> will be useless for organizations,
> if the heads of the individuals who employ them,
> are not properly organized.
> And these heads will be organized,
> if the same part of the boss's body that directs them
> is properly organized.
> Just like you can write nonsense
> with a latest model typewriter,
> nonsense can also be done
> with the most perfect systems and devices
> meant to help you not to.
> Systems, processes, furniture, machines,
> are purely auxiliary elements.
> The real process is to think.
> The fundamental machine is intelligence.
>
> Fernando Pessoa, 1926
>
> Revista de Com?rcio e Contabilidade, n? 4. Lisboa, 25-4-1926.
> (Magazine of Commerce and Accounting, n? 4. Lisbon, 25-4-1926)
>
>
> Rui Barradas
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From v|ncent @end|ng |rom th|nkr@|r  Tue Jul 18 12:32:44 2023
From: v|ncent @end|ng |rom th|nkr@|r (Prof Brian Ripley)
Date: Tue, 18 Jul 2023 10:32:44 -0000
Subject: [R] change language  at console
References: <1538493775.2899949.1427897669877.JavaMail.yahoo@mail.yahoo.com>
 <551C03D5.9030502@stats.ox.ac.uk>
Message-ID: <551C03D5.9030502@stats.ox.ac.uk>

On 01/04/2015 15:14, Alaios via R-help wrote: &gt; Hi all,I am a linux R user and my default R environemnt (after writing R in linux console) returns the error messages in German (I am [...]
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?













[R] change language at console









On 01/04/2015 15:14, Alaios via R-help wrote:
> Hi all,I am a linux R user and my default R environemnt (after writing R in linux console) returns the error messages in German (I am not the system adminitstrator and I can not change system settings). I know that the English package is also installed so I guess I need to set some environmental variable for this.Any idea how I am doing that?
> RegardsAlex
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Please do (and not send HTML). It is in the manual,
http://cran.r-project.org/doc/manuals/r-release/R-admin.html#Internationalization
and specifically
http://cran.r-project.org/doc/manuals/r-release/R-admin.html#Localization-of-messages
I would start by trying LANGUAGE=en , e.g.
LANGUAGE=en R
or
env LANGUAGE=en R
depending on your shell.
--
Brian D. Ripley,         ripley at stats.ox.ac.uk
Emeritus Professor of Applied Statistics, University of Oxford
1 South Parks Road, Oxford OX1 3TG, UK
______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.



ThinkR*

0185091403
|
odoo at thinkr.fr [1]
|
http://thinkr.fr [2]


Powered by Odoo [3]



[1] mailto:odoo at thinkr.fr
[2] http://thinkr.fr
[3] https://www.odoo.com?utm_source=db&utm_medium=email

	[[alternative HTML version deleted]]


From v|ncent @end|ng |rom th|nkr@|r  Tue Jul 18 12:32:51 2023
From: v|ncent @end|ng |rom th|nkr@|r (Rich Shepard)
Date: Tue, 18 Jul 2023 10:32:51 -0000
Subject: [R] change language  at console
References: <1538493775.2899949.1427897669877.JavaMail.yahoo@mail.yahoo.com>
 <alpine.LNX.2.11.1504010754190.26540@localhost>
Message-ID: <alpine.LNX.2.11.1504010754190.26540@localhost>

On Wed, 1 Apr 2015, Prof Brian Ripley wrote: &gt; I would start by trying LANGUAGE=en , e.g. More specifically, you can use en_US or en_GB. Rich [...]
? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?













[R] change language at console









On Wed, 1 Apr 2015, Prof Brian Ripley wrote:
> I would start by trying LANGUAGE=en , e.g.
More specifically, you can use en_US or en_GB.
Rich
______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.



ThinkR*

0185091403
|
odoo at thinkr.fr [1]
|
http://thinkr.fr [2]


Powered by Odoo [3]



[1] mailto:odoo at thinkr.fr
[2] http://thinkr.fr
[3] https://www.odoo.com?utm_source=db&utm_medium=email

	[[alternative HTML version deleted]]


From j||ucke48 @end|ng |rom gm@||@com  Tue Jul 18 15:28:30 2023
From: j||ucke48 @end|ng |rom gm@||@com (Joseph Lucke)
Date: Tue, 18 Jul 2023 09:28:30 -0400
Subject: [R] Error: promise already under evaluation
Message-ID: <CAGqYBsavx=9y00iJMpCishAuiM9pojBS7+AxCvZ9ermiNaKpcQ@mail.gmail.com>

A repost.
R gurus:
I have a 10 or so functions that use R?s qnbinom() function. Until now,
they have worked without any problems whatsoever.
I created a new function, which involved the integration, using R?s
integrate(), of a function that in turn uses the qnbinom() function.
The function failed because of my programming stupidity. It has been
deleted from my source file.
Now I cannot get any function using qnbinom() to work. I get the following
error.

Error in qnbinom(1 - tol, size = q, prob = r) :
  promise already under evaluation: recursive default argument reference or
earlier problems?
 An example function that that used to work splendidly but now fails is

#Distribution of R2: 0 to x
pRsq.Rhosq <- function(x, n, p, Rhosq,tol=tol){
  a <- p /2; b <- (n-p-1)/2; q <- (n-1)/2
  r <- 1-Rhosq
  k <- 0:qnbinom(1-tol,size=q,prob=r)
 sum(dnbinom(k,size=q,prob=r)*pbeta(x,a+k,b))
}

Tracebacks from more complicated functions, which have worked before,
always return to the above error.
When I re-source the source file without the offending function, I still
get the error.
How do I get rid of this error? What can I do to avoid it error in the
future?

TIA
Joe Lucke

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Jul 18 16:38:17 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 18 Jul 2023 17:38:17 +0300
Subject: [R] Error: promise already under evaluation
In-Reply-To: <CAGqYBsavx=9y00iJMpCishAuiM9pojBS7+AxCvZ9ermiNaKpcQ@mail.gmail.com>
References: <CAGqYBsavx=9y00iJMpCishAuiM9pojBS7+AxCvZ9ermiNaKpcQ@mail.gmail.com>
Message-ID: <20230718173817.100fd5db@arachnoid>

? Tue, 18 Jul 2023 09:28:30 -0400
Joseph Lucke <jflucke48 at gmail.com> ?????:

> Error in qnbinom(1 - tol, size = q, prob = r) :

> pRsq.Rhosq <- function(x, n, p, Rhosq,tol=tol){

It looks like you're not passing the `tol` parameter, and its default
value unfortunately refers to itself:

(function(x = x) x)()
# Error in (function(x = x) x)() :
#   promise already under evaluation: recursive default argument
#   reference or earlier problems?

-- 
Best regards,
Ivan


From @vi@e@gross m@iii@g oii gm@ii@com  Tue Jul 18 20:21:44 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Tue, 18 Jul 2023 14:21:44 -0400
Subject: [R] Off-topic: ChatGPT Code Interpreter
In-Reply-To: <d2c401ae-d8a3-1101-30d1-50b1981c75b8@effectivedefense.org>
References: <CAGxFJbSxR8XF5fXsz0tmAm+RM9Bb_KECcuqHrWCCo6Xa-WoKKw@mail.gmail.com>
 <d2c401ae-d8a3-1101-30d1-50b1981c75b8@effectivedefense.org>
Message-ID: <004101d9b9a4$b523fcf0$1f6bf6d0$@gmail.com>

Just to bring it back to R, I want to point out that what many R programmers do is not that different. If you develop some skills at analyzing some kinds of data and have a sort of toolchest based on past work, then a new project along similar lines may move very quickly.  After a while, you may put out a package that allows even novices to do a decent job as the code handles so many of the details or provides default options you can over-ride.

So if an AI has the ability to use the same tools you provided, and applies them properly, is there much difference?

I have seen EXPERTS do horribly when yanked just outside their field of expertise. They may use a tool outside the bounds it was designed for, as an example, or pick an unfamiliar model that is not applicable or optimal.

The problem with AI is compounded as some kinds of peer feedback may be missing while other things have not yet been programmed well that allow some selectivity and so on.

But if a simple regression often works well enough, why can't an AI use it too? 

I will say a lot of what people do in R is cleaning the data and getting it into the right form. Sometimes humans struggle to detect if say two names are the same and someone made a spelling mistake. And humans will still get things like that wrong unless they can go back and consult external resources to see if say the school has two teachers with similar names or whether all the students named should be combined under the same teacher for some purposes.

I will point out there is no good reason to think an Ai would necessarily use R or use base R rather than some of the functions in the tidyverse. I am studying Wolfram and an amazing amount of work can be done in one liners that rely on many thousands of built-in functionality. So why would you want an AI to write assembly code or do it in a language like C but rather pick a language well suited for whatever task.


-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Spencer Graves
Sent: Monday, July 17, 2023 3:13 PM
To: Bert Gunter <bgunter.4567 at gmail.com>; R-help <R-help at r-project.org>
Subject: Re: [R] Off-topic: ChatGPT Code Interpreter

	  I don't know about ChatGPT, but Daniel Kahneman won the 2002 Nobel 
Memorial Prize in Economics,[1] even though he's not an economist, for 
his leadership in creating a new subfield in the intersection of human 
psychology and economics now called "behavioral economics".[2] Then in 
2009 Kahneman and Gary Klein published an article on, "Conditions for 
intuitive expertise: a failure to disagree", which concluded that expert 
intuition is learned from frequent, rapid, high-quality feedback. 
People you do not learn from frequent, rapid, high-quality feedback can 
be beaten by simple heuristics developed by intelligent lay people.[3] 
That includes most professions, which Kahneman Sibony and Sunstein call 
"respect-experts".


	  Kahneman Sibony and Sunstein further report that with a little data, 
a regression model can outperform a simple heuristic, and with massive 
amounts of data, artificial intelligence can outperform regression 
models.[4]


	  An extreme but real example of current reality was describe in an 
article on "Asylum roulette":  With asylum judges in the same 
jurisdiction with cases assigned at random, one judge approved 5 percent 
of cases while another approved 88 percent.[5] However, virtually all 
"respect-experts" are influenced in their judgements by time of day and 
whether their favorite sports team won or lost the previous day.  That 
level of noise can be reduced dramatically by use of appropriate 
artificial intelligence.


	  Comments?
	  Spencer Graves


[1]


https://en.wikipedia.org/wiki/Daniel_Kahneman


[2]


https://en.wikipedia.org/wiki/Behavioral_economics


[3]


https://www.researchgate.net/publication/26798603_Conditions_for_Intuitive_Expertise_A_Failure_to_Disagree


[4]


Daniel Kahneman; Olivier Sibony; Cass Sunstein (2021). Noise: A Flaw in 
Human Judgment (Little, Brown and Company).


[5]


https://en.wikipedia.org/wiki/Refugee_roulette


On 7/17/23 1:46 PM, Bert Gunter wrote:
> This is an **off-topic** post about the subject line, that I thought
> might be of interest to the R Community. I hope this does not offend
> anyone.
> 
> The widely known ChatGPT software now offers what  is called a "Code
> Interpreter," that, among other things, purports to do "data
> analysis."  (Search for articles with details.) One quote, from the
> (online) NY Times, is:
> 
> "Arvind Narayanan, a professor of computer science at Princeton
> University, cautioned that people should not become overly reliant on
> code interpreter for data analysis as A.I. still produces inaccurate
> results and misinformation.
> 
> 'Appropriate data analysis requires just a lot of critical thinking
> about the data,? he said.' "
> 
> Amen. ... Maybe.
> 
> (As this is off-topic, if you wish to reply to me, probably better to
> do so privately).
> 
> Cheers to all,
> Bert
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From j||ucke48 @end|ng |rom gm@||@com  Tue Jul 18 20:23:57 2023
From: j||ucke48 @end|ng |rom gm@||@com (Joseph Lucke)
Date: Tue, 18 Jul 2023 14:23:57 -0400
Subject: [R] Error: promise already under evaluation
In-Reply-To: <20230718173817.100fd5db@arachnoid>
References: <CAGqYBsavx=9y00iJMpCishAuiM9pojBS7+AxCvZ9ermiNaKpcQ@mail.gmail.com>
 <20230718173817.100fd5db@arachnoid>
Message-ID: <CAGqYBsaqDnEf+bhhO=3v7_sdZdmdd0_i6gi=3OMaAjgfo6EwYw@mail.gmail.com>

Fixed!
I was not passing a tol value from the outer function to the inner
qnbinom() function. Because the scope of tol in qbinom() was confined to
the outer function, qnbinom was not accessing the globally defined tol
value. Furthermore, because the outer function itself was embedded in
integrate(), the standard nonstandard scoping didn't enable access to the
global value.
I hope this makes sense.
In any case, the problem has been solved.
Thanks.

On Tue, Jul 18, 2023, 10:38 AM Ivan Krylov <krylov.r00t at gmail.com> wrote:

> ? Tue, 18 Jul 2023 09:28:30 -0400
> Joseph Lucke <jflucke48 at gmail.com> ?????:
>
> > Error in qnbinom(1 - tol, size = q, prob = r) :
>
> > pRsq.Rhosq <- function(x, n, p, Rhosq,tol=tol){
>
> It looks like you're not passing the `tol` parameter, and its default
> value unfortunately refers to itself:
>
> (function(x = x) x)()
> # Error in (function(x = x) x)() :
> #   promise already under evaluation: recursive default argument
> #   reference or earlier problems?
>
> --
> Best regards,
> Ivan
>

	[[alternative HTML version deleted]]


From @vi@e@gross m@iii@g oii gm@ii@com  Tue Jul 18 20:33:37 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Tue, 18 Jul 2023 14:33:37 -0400
Subject: [R] Off-topic: ChatGPT Code Interpreter
In-Reply-To: <CA+8X3fXkRFVWtSVRkk3wm6ZavNg6hmRU2d=FNdf7733kA5yDFg@mail.gmail.com>
References: <CAGxFJbSxR8XF5fXsz0tmAm+RM9Bb_KECcuqHrWCCo6Xa-WoKKw@mail.gmail.com>
 <LV8PR22MB4528C89FEF7C755404816B15CF3BA@LV8PR22MB4528.namprd22.prod.outlook.com>
 <CA+8X3fXkRFVWtSVRkk3wm6ZavNg6hmRU2d=FNdf7733kA5yDFg@mail.gmail.com>
Message-ID: <004401d9b9a6$5e6f4340$1b4dc9c0$@gmail.com>

Jim,

I am not sure what your example means but text to image conversion can be
done quite easily in many programming environments and does not need an AI
unless you are using it to hunt for info.  I mean you can open up many Paint
or Photo programs and look at the menus and often one allows you to write
using whatever font/size/color/background you want to add a layer on the
image. There are plenty of free resources on-line that I sometimes use to
write something in a large fiery font or whatever and when I get the result
I want, I save it as graphics.

If you mean that you found something other than a human who would listen to
you and maybe ask a few questions and then do it for you, good for you.
Since most people are not programmers, there is plenty of room for that kind
of thing.

Although R is not particularly designed to do what you are saying, a quick
search indicates plenty of packages using R for this kind of thing.

What gets me is an AI can do one of several things. It may give you a result
and you take it or leave it. Or, it can look around at the internet and
knowledge bases and throw a program at you, perhaps in R, and you would then
need to validate if it makes sense given your knowledge about R. If it gave
you a program in a language you did not know, would you blindly try using
it?

To be fair, many years ago the barrier was higher. To figure out what a
function did, or even find such a function, often meant reading through
copious amounts of reference books, or lots of existing code looking for an
example of such use, or ask someone who might have to do the same. Often you
ended up writing code using other more primitive commands  that did what you
wanted. Obviously internet searches and other tools and the vast number of
people who are sharing this kind of info, make this easier. In some ways, an
AI can do much of the searching for you but with results that may be
surprising.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jim Lemon
Sent: Monday, July 17, 2023 7:24 PM
To: Ebert,Timothy Aaron <tebert at ufl.edu>
Cc: R-help <R-help at r-project.org>
Subject: Re: [R] Off-topic: ChatGPT Code Interpreter

I haven't really focused on the statistical capabilities of AI, that
marriage of massive memory and associative learning. I am impressed by
its ability to perform text-to-image conversion, something I have
recently needed. My artistic ability is that of the average three year
old, yet I can employ AI to translate my mental images into realistic
pictures. Perhaps we really are learning about how we think. As far as
I am aware, it just does what we tell it to do. Like other tools, it
is as good or bad as the user.

Jim

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Tue Jul 18 21:39:35 2023
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Tue, 18 Jul 2023 19:39:35 +0000
Subject: [R] Off-topic: ChatGPT Code Interpreter
In-Reply-To: <004401d9b9a6$5e6f4340$1b4dc9c0$@gmail.com>
References: <CAGxFJbSxR8XF5fXsz0tmAm+RM9Bb_KECcuqHrWCCo6Xa-WoKKw@mail.gmail.com>
 <LV8PR22MB4528C89FEF7C755404816B15CF3BA@LV8PR22MB4528.namprd22.prod.outlook.com>
 <CA+8X3fXkRFVWtSVRkk3wm6ZavNg6hmRU2d=FNdf7733kA5yDFg@mail.gmail.com>
 <004401d9b9a6$5e6f4340$1b4dc9c0$@gmail.com>
Message-ID: <CH3PR22MB4514CFB84180EFF208706720CF38A@CH3PR22MB4514.namprd22.prod.outlook.com>

I was thinking that text-to-image conversion was something like NightCafe (https://creator.nightcafe.studio/) which is very much AI and not something I know how to do with Paint or Photoshop.

-----Original Message-----
From: avi.e.gross at gmail.com <avi.e.gross at gmail.com>
Sent: Tuesday, July 18, 2023 2:34 PM
To: 'Jim Lemon' <drjimlemon at gmail.com>; Ebert,Timothy Aaron <tebert at ufl.edu>
Cc: 'R-help' <R-help at r-project.org>
Subject: RE: [R] Off-topic: ChatGPT Code Interpreter

[External Email]

Jim,

I am not sure what your example means but text to image conversion can be done quite easily in many programming environments and does not need an AI unless you are using it to hunt for info.  I mean you can open up many Paint or Photo programs and look at the menus and often one allows you to write using whatever font/size/color/background you want to add a layer on the image. There are plenty of free resources on-line that I sometimes use to write something in a large fiery font or whatever and when I get the result I want, I save it as graphics.

If you mean that you found something other than a human who would listen to you and maybe ask a few questions and then do it for you, good for you.
Since most people are not programmers, there is plenty of room for that kind of thing.

Although R is not particularly designed to do what you are saying, a quick search indicates plenty of packages using R for this kind of thing.

What gets me is an AI can do one of several things. It may give you a result and you take it or leave it. Or, it can look around at the internet and knowledge bases and throw a program at you, perhaps in R, and you would then need to validate if it makes sense given your knowledge about R. If it gave you a program in a language you did not know, would you blindly try using it?

To be fair, many years ago the barrier was higher. To figure out what a function did, or even find such a function, often meant reading through copious amounts of reference books, or lots of existing code looking for an example of such use, or ask someone who might have to do the same. Often you ended up writing code using other more primitive commands  that did what you wanted. Obviously internet searches and other tools and the vast number of people who are sharing this kind of info, make this easier. In some ways, an AI can do much of the searching for you but with results that may be surprising.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jim Lemon
Sent: Monday, July 17, 2023 7:24 PM
To: Ebert,Timothy Aaron <tebert at ufl.edu>
Cc: R-help <R-help at r-project.org>
Subject: Re: [R] Off-topic: ChatGPT Code Interpreter

I haven't really focused on the statistical capabilities of AI, that marriage of massive memory and associative learning. I am impressed by its ability to perform text-to-image conversion, something I have recently needed. My artistic ability is that of the average three year old, yet I can employ AI to translate my mental images into realistic pictures. Perhaps we really are learning about how we think. As far as I am aware, it just does what we tell it to do. Like other tools, it is as good or bad as the user.

Jim

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From h@w|ckh@m @end|ng |rom gm@||@com  Wed Jul 19 00:10:26 2023
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Tue, 18 Jul 2023 17:10:26 -0500
Subject: [R] Off-topic: ChatGPT Code Interpreter
In-Reply-To: <004401d9b9a6$5e6f4340$1b4dc9c0$@gmail.com>
References: <CAGxFJbSxR8XF5fXsz0tmAm+RM9Bb_KECcuqHrWCCo6Xa-WoKKw@mail.gmail.com>
 <LV8PR22MB4528C89FEF7C755404816B15CF3BA@LV8PR22MB4528.namprd22.prod.outlook.com>
 <CA+8X3fXkRFVWtSVRkk3wm6ZavNg6hmRU2d=FNdf7733kA5yDFg@mail.gmail.com>
 <004401d9b9a6$5e6f4340$1b4dc9c0$@gmail.com>
Message-ID: <CABdHhvH0V2PfCvg_KaZg99qcxnrUvAPYrSmuYfVhfVZBrD4kyw@mail.gmail.com>

> I am not sure what your example means but text to image conversion can be
> done quite easily in many programming environments and does not need an AI
> unless you are using it to hunt for info.  I mean you can open up many Paint
> or Photo programs and look at the menus and often one allows you to write
> using whatever font/size/color/background you want to add a layer on the
> image. There are plenty of free resources on-line that I sometimes use to
> write something in a large fiery font or whatever and when I get the result
> I want, I save it as graphics.

I would recommend you try out one of the many text-to-image AI
services like https://www.midjourney.com/ or
https://openai.com/dall-e-2. These services are much more
sophisticated than you might imagine.

Hadley

-- 
http://hadley.nz


From @vi@e@gross m@iii@g oii gm@ii@com  Wed Jul 19 01:13:24 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Tue, 18 Jul 2023 19:13:24 -0400
Subject: [R] Off-topic: ChatGPT Code Interpreter
In-Reply-To: <CABdHhvH0V2PfCvg_KaZg99qcxnrUvAPYrSmuYfVhfVZBrD4kyw@mail.gmail.com>
References: <CAGxFJbSxR8XF5fXsz0tmAm+RM9Bb_KECcuqHrWCCo6Xa-WoKKw@mail.gmail.com>
 <LV8PR22MB4528C89FEF7C755404816B15CF3BA@LV8PR22MB4528.namprd22.prod.outlook.com>
 <CA+8X3fXkRFVWtSVRkk3wm6ZavNg6hmRU2d=FNdf7733kA5yDFg@mail.gmail.com>
 <004401d9b9a6$5e6f4340$1b4dc9c0$@gmail.com>
 <CABdHhvH0V2PfCvg_KaZg99qcxnrUvAPYrSmuYfVhfVZBrD4kyw@mail.gmail.com>
Message-ID: <00cf01d9b9cd$73d31d70$5b795850$@gmail.com>

Hadley,

Thanks and I know many such things exist. I simply found it interesting that what was mentioned seemed simpler as just being a converter of text to make a bitmap type image. Now if I want a simulated image of a cat riding a motorcycle while holding an Esperanto Flag, sure, I would not easily do it directly or even in a standard programming language. 

Of course I may have misunderstood "text" to mean the actual text, as compared to a somewhat natural language description using text. R does not easily do that.

Then again, there are ways to connect your R program to the Wolfram Knowledge base to pass through natural language queries ...

Avi

-----Original Message-----
From: Hadley Wickham <h.wickham at gmail.com> 
Sent: Tuesday, July 18, 2023 6:10 PM
To: avi.e.gross at gmail.com
Cc: Jim Lemon <drjimlemon at gmail.com>; Ebert,Timothy Aaron <tebert at ufl.edu>; R-help <R-help at r-project.org>
Subject: Re: [R] Off-topic: ChatGPT Code Interpreter

> I am not sure what your example means but text to image conversion can be
> done quite easily in many programming environments and does not need an AI
> unless you are using it to hunt for info.  I mean you can open up many Paint
> or Photo programs and look at the menus and often one allows you to write
> using whatever font/size/color/background you want to add a layer on the
> image. There are plenty of free resources on-line that I sometimes use to
> write something in a large fiery font or whatever and when I get the result
> I want, I save it as graphics.

I would recommend you try out one of the many text-to-image AI
services like https://www.midjourney.com/ or
https://openai.com/dall-e-2. These services are much more
sophisticated than you might imagine.

Hadley

-- 
http://hadley.nz


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Wed Jul 19 09:52:46 2023
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Wed, 19 Jul 2023 09:52:46 +0200
Subject: [R] change language  at console
In-Reply-To: <alpine.LNX.2.11.1504010754190.26540@localhost>
References: <1538493775.2899949.1427897669877.JavaMail.yahoo@mail.yahoo.com>
 <alpine.LNX.2.11.1504010754190.26540@localhost>
Message-ID: <25783.38478.947724.935249@stat.math.ethz.ch>

>>>>> Rich Shepard via R-help 
>>>>>     on Tue, 18 Jul 2023 10:32:51 -0000 writes:

      > On Wed, 1 Apr 2015, Prof Brian Ripley wrote: 
      >  I would start by trying LANGUAGE=en , e.g. ? ? ? ? ? ? ? ? ? ? ? ? ? ?

  > More specifically, you can use en_US or en_GB.  Rich

"en_US" actually does not exist -- see below (but "en"
corresponds to it).

More relevantly, since R 4.2.0  we have

  Sys.setLanguage()

which does slightly more than setting LANGUAGE, notably
internally using  bindtextdomain() in a useful way, such that
the "translation cache" (of already translated messages) is flushed;
It was first considered in response to R's bugzilla issue PR#18055
  --> https://bugs.r-project.org/bugzilla/show_bug.cgi?id=18055

Note that help(Sys.setLanguage) 's examples
contain quite interesting R code , for example the following
(shown with R output here in R 4.3.1 with NLS (:=
Natural Language Support) enabled {as usual I think}, under
Linux (Fedora 36):


>  ## A show off of translations -- platform (font etc) dependent:
>  ## The translation languages available for "base" R in this version of R:

>      if(capabilities("NLS")) withAutoprint({
+        langs <- list.files(bindtextdomain("R"),
+                            pattern = "^[a-z]{2}(_[A-Z]{2}|@quot)?$")
+        langs
+        txts <- sapply(setNames(,langs),
+                       function(lang) { Sys.setLanguage(lang)
+                                       gettext("incompatible dimensions", domain="R-stats") })
+        cbind(txts)
+        (nTrans <- length(unique(txts)))
+        (not_translated <- names(txts[txts == txts[["en"]]]))
+      })
> langs <- list.files(bindtextdomain("R"), pattern = "^[a-z]{2}(_[A-Z]{2}|@quot)?$")
> langs
 [1] "da"      "de"      "en"      "en_GB"   "en at quot" "es"      "fa"      "fr"      "it"     
[10] "ja"      "ko"      "lt"      "nn"      "pl"      "pt_BR"   "ru"      "tr"      "zh_CN"  
[19] "zh_TW"  
> txts <- sapply(setNames(, langs), function(lang) {
+     Sys.setLanguage(lang)
+     gettext("incompatible dimensions", domain = "R-stats")
+ })
> cbind(txts)
        txts                            
da      "incompatible dimensions"       
de      "inkompatible Dimensionen"      
en      "incompatible dimensions"       
en_GB   "incompatible dimensions"       
en at quot "incompatible dimensions"       
es      "incompatible dimensions"       
fa      "incompatible dimensions"       
fr      "dimensions incompatibles"      
it      "dimensioni incompatibili"      
ja      " ???????? "            
ko      "incompatible dimensions"       
lt      "nesuderinami matavimo skai?iai"
nn      "incompatible dimensions"       
pl      "niezgodne wymiary"             
pt_BR   "dimens?es incompat?veis"       
ru      "????????????? ???????????"     
tr      "uyumsuz boyutlar"              
zh_CN   "?????"                    
zh_TW   "?????"                    
> (nTrans <- length(unique(txts)))
[1] 12
> (not_translated <- names(txts[txts == txts[["en"]]]))
[1] "da"      "en"      "en_GB"   "en at quot" "es"      "fa"      "ko"      "nn"     

---------------

In the original NEWS for R 4.2.0 ,
Sys.setLanguage() was labeled as "partly experimental"  but I
think in the mean time has shown some stability  and I'd
recommend its use {such that we find out if should be made even
more reliable}.

Martin

--
Martin Maechler
ETH Zurich  and  R Core team


From T||m@nn_F@u| @end|ng |rom t-on||ne@de  Thu Jul 20 12:58:18 2023
From: T||m@nn_F@u| @end|ng |rom t-on||ne@de (Tilmann Faul)
Date: Thu, 20 Jul 2023 12:58:18 +0200
Subject: [R] CIE Diagram with wavelengths tick marks
Message-ID: <3b22c4b9-5315-24be-6d38-4dd06b52070f@t-online.de>

Hy,

for plotting CIE Diagrams i found Package pavo with function cieplot. 
That works fine.
Now i want to have wavelength tick marks as well around the plotting area.
Is there a way to do so, also other ways/Pakages to plot are welcome.

My sample Code:
   library(pavo)

   coldat2 <- as.data.frame(matrix(rep(1/3, 3), nrow = 1, ncol = 3))

   # Make sure this dataset works with the cieplot() function
   attr(coldat2, "clrsp") <- "CIEXYZ"
   colnames(coldat2) <- c("x", "y", "z")

   cieplot(coldat2, col="white", main="CIE Test Plot")



Best regards
Tilmann

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From ken@knob|@uch @end|ng |rom |n@erm@|r  Thu Jul 20 14:42:54 2023
From: ken@knob|@uch @end|ng |rom |n@erm@|r (Kenneth Knoblauch)
Date: Thu, 20 Jul 2023 12:42:54 +0000
Subject: [R] CIE Diagram with wavelengths tick marks
Message-ID: <b11302e391fb463c8e1ebca809541ab0@inserm.fr>

Hi,

I'm assuming that by CIE Diagram, you mean the 1931 2 deg standard.  Tables of these (and other CIE standards) can be found at the site http://www.cvrl.org maintained by Andrew Stockman.  You can find and download these classic CIE data and more modern versions from there.  

Since you have plotted the spectrum locus of the chromaticity diagram (I'm supposing), you ought to be able to just pick off the wavelengths that you want and add a small point or a small line as a tick mark.  If you want it oriented, you'll have to do a little calculation to get the direction perpendicular to the spectrum locus at each wavelength, but that's not too complicated.

I recently needed a figure for a talk and downloaded the 2 deg 1931 data from the above website and used points to indicate specific wavelengths that interested me.  The code is below:

d <- read.csv("ciexyz31_1.csv", header = FALSE, stringsAsFactors = TRUE)
names(d) <- c("Wavelength", "X", "Y", "Z")
d$x <- with(d, X/(X + Y + Z))
d$y <-  with(d, Y/(X + Y + Z))

par(pty = "s")
plot(y ~ x, d, type = "l", axes = 'FALSE',
	xlim = c(0, 1), ylim = c(0, 1))
lines(y[c(1, nrow(d))]~ x[c(1, nrow(d))], d)
axis(1, seq(0, 1, 0.2))
axis(2, seq(0, 1, 0.2))
lines(c(0, 1), c(1, 0), col = "blue", lwd = 2, lty = 2)

points(d[d$Wavelength == 555, ]$x, d[d$Wavelength == 555, ]$y, pch = 16, col = "green")
points(d[d$Wavelength == 589, ]$x, d[d$Wavelength == 589, ]$y, pch = 16, col = "yellow")
points(d[d$Wavelength == 670, ]$x, d[d$Wavelength == 670, ]$y, pch = 16, col = "red")

Good luck.

best,

Ken


# Hy,

# for plotting CIE Diagrams i found Package pavo with function cieplot. 
# That works fine.
# Now i want to have wavelength tick marks as well around the plotting area.
# Is there a way to do so, also other ways/Pakages to plot are welcome.

# My sample Code:
   # library(pavo)

   # coldat2 <- as.data.frame(matrix(rep(1/3, 3), nrow = 1, ncol = 3))

   # # Make sure this dataset works with the cieplot() function
   # attr(coldat2, "clrsp") <- "CIEXYZ"
   # colnames(coldat2) <- c("x", "y", "z")

   # cieplot(coldat2, col="white", main="CIE Test Plot")



# Best regards
# Tilmann



     
  
 
  ___
  Kenneth Knoblauch
 Inserm U1208
 Stem-cell and Brain Research Institute
 18 avenue du Doyen L?pine
 69500 Bron
 France
 tel: +33 (0)4 72 91 34 77
 fax: +33 (0)4 72 91 34 61
 portable: +33 (0)6 84 10 64 10
 https://sbri.fr/public-profile/63/single-member/
    

From T||m@nn_F@u| @end|ng |rom t-on||ne@de  Thu Jul 20 21:46:03 2023
From: T||m@nn_F@u| @end|ng |rom t-on||ne@de (Tilmann Faul)
Date: Thu, 20 Jul 2023 21:46:03 +0200
Subject: [R] CIE Diagram with wavelengths tick marks
In-Reply-To: <b11302e391fb463c8e1ebca809541ab0@inserm.fr>
References: <b11302e391fb463c8e1ebca809541ab0@inserm.fr>
Message-ID: <c0852ea5-dad8-244b-c2db-3659606f1620@t-online.de>

Hy Ken,

Thanks for your answer.
Your assumptions are correct, i wan to plot a CIE 1931 2 deg standard.
I am aware of the possibility to calculate the tick marks and its 
orientation by some calculation.
But before that, i wanted to ask whether there is something ready out there.

Ans thanks for the Code, it helped me on another problem.

best

Tilmann


On 20.07.23 14:42, Kenneth Knoblauch wrote:
> Hi,
> 
> I'm assuming that by CIE Diagram, you mean the 1931 2 deg standard.  Tables of these (and other CIE standards) can be found at the site http://www.cvrl.org maintained by Andrew Stockman.  You can find and download these classic CIE data and more modern versions from there.
> 
> Since you have plotted the spectrum locus of the chromaticity diagram (I'm supposing), you ought to be able to just pick off the wavelengths that you want and add a small point or a small line as a tick mark.  If you want it oriented, you'll have to do a little calculation to get the direction perpendicular to the spectrum locus at each wavelength, but that's not too complicated.
> 
> I recently needed a figure for a talk and downloaded the 2 deg 1931 data from the above website and used points to indicate specific wavelengths that interested me.  The code is below:
> 
> d <- read.csv("ciexyz31_1.csv", header = FALSE, stringsAsFactors = TRUE)
> names(d) <- c("Wavelength", "X", "Y", "Z")
> d$x <- with(d, X/(X + Y + Z))
> d$y <-  with(d, Y/(X + Y + Z))
> 
> par(pty = "s")
> plot(y ~ x, d, type = "l", axes = 'FALSE',
> 	xlim = c(0, 1), ylim = c(0, 1))
> lines(y[c(1, nrow(d))]~ x[c(1, nrow(d))], d)
> axis(1, seq(0, 1, 0.2))
> axis(2, seq(0, 1, 0.2))
> lines(c(0, 1), c(1, 0), col = "blue", lwd = 2, lty = 2)
> 
> points(d[d$Wavelength == 555, ]$x, d[d$Wavelength == 555, ]$y, pch = 16, col = "green")
> points(d[d$Wavelength == 589, ]$x, d[d$Wavelength == 589, ]$y, pch = 16, col = "yellow")
> points(d[d$Wavelength == 670, ]$x, d[d$Wavelength == 670, ]$y, pch = 16, col = "red")
> 
> Good luck.
> 
> best,
> 
> Ken
> 
> 
> # Hy,
> 
> # for plotting CIE Diagrams i found Package pavo with function cieplot.
> # That works fine.
> # Now i want to have wavelength tick marks as well around the plotting area.
> # Is there a way to do so, also other ways/Pakages to plot are welcome.
> 
> # My sample Code:
>     # library(pavo)
> 
>     # coldat2 <- as.data.frame(matrix(rep(1/3, 3), nrow = 1, ncol = 3))
> 
>     # # Make sure this dataset works with the cieplot() function
>     # attr(coldat2, "clrsp") <- "CIEXYZ"
>     # colnames(coldat2) <- c("x", "y", "z")
> 
>     # cieplot(coldat2, col="white", main="CIE Test Plot")
> 
> 
> 
> # Best regards
> # Tilmann
> 
> 
> 
>       
>    
>   
>    ___
>    Kenneth Knoblauch
>   Inserm U1208
>   Stem-cell and Brain Research Institute
>   18 avenue du Doyen L?pine
>   69500 Bron
>   France
>   tel: +33 (0)4 72 91 34 77
>   fax: +33 (0)4 72 91 34 61
>   portable: +33 (0)6 84 10 64 10
>   https://sbri.fr/public-profile/63/single-member/
>      
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tg@77m @end|ng |rom y@hoo@com  Fri Jul 21 15:19:14 2023
From: tg@77m @end|ng |rom y@hoo@com (Thomas Subia)
Date: Fri, 21 Jul 2023 13:19:14 +0000 (UTC)
Subject: [R] plotly question
References: <879072287.3361001.1689945554065.ref@mail.yahoo.com>
Message-ID: <879072287.3361001.1689945554065@mail.yahoo.com>

Colleagues

Here is my reproducible code

plot_ly(
? domain = list(x = c(0, 1), y = c(0, 1)),
? value = 2874,
? title = list(text = "Generic"),
? type = "indicator",
? mode = "gauge+number+delta",
? delta = list(reference = 4800),
? gauge = list(
??? axis =list(range = list(NULL, 5000)),
??? steps = list(
??? list(range = c(0, 4800), color = "white"),
??? list(range = c(4800, 6000), color = "red")),
??? threshold = list(
??? line = list(color = "black", width = 6),
??? thickness = 0.75,
??? value = 4800)))

How can I change the indicator color from green to some other color?

How can I change the typeface and font size of the speedometer tick mark font size?

Thomas Subia

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Fri Jul 21 22:40:49 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 21 Jul 2023 13:40:49 -0700
Subject: [R] plotly question
In-Reply-To: <879072287.3361001.1689945554065@mail.yahoo.com>
References: <879072287.3361001.1689945554065.ref@mail.yahoo.com>
 <879072287.3361001.1689945554065@mail.yahoo.com>
Message-ID: <CAGxFJbQ3xQvMNUN_NHxSV0xoHatXAUUHJRECoScMjC42yhC=4Q@mail.gmail.com>

As you apparently haven't received any responses yet, I'll try to
suggest something useful. However, I have absolutely zero experience
with plotly, so this is just from general principles and reading the
plot_ly Help file, which says for the "..." arguments:

"Arguments (i.e., attributes) passed along to the trace type. See
schema() for a list of acceptable attributes for a given trace type
(by going to traces -> type -> attributes). Note that attributes
provided at this level may override other arguments (e.g. plot_ly(x =
1:10, y = 1:10, color = I("red"), marker = list(color = "blue")))."

So I would **guess** that you needs to go to ?schema to see if the
further attributes of your "gauge" type that you wish to change are
there.

Alternatively, plotly is a package from posit.co, formerly RStudio;
they have an extensive support site and community here:
https://posit.co/support/
So you may have success there.

Finally, I assume you have tried web searching appropriate search
queries, but if not, you should do so. It is sometimes surprising how
much you can find that way.

... and, again, apologies if my ignorance means my suggestions are useless.

Cheers,
Bert


On Fri, Jul 21, 2023 at 6:19?AM Thomas Subia via R-help
<r-help at r-project.org> wrote:
>
> Colleagues
>
> Here is my reproducible code
>
> plot_ly(
>   domain = list(x = c(0, 1), y = c(0, 1)),
>   value = 2874,
>   title = list(text = "Generic"),
>   type = "indicator",
>   mode = "gauge+number+delta",
>   delta = list(reference = 4800),
>   gauge = list(
>     axis =list(range = list(NULL, 5000)),
>     steps = list(
>     list(range = c(0, 4800), color = "white"),
>     list(range = c(4800, 6000), color = "red")),
>     threshold = list(
>     line = list(color = "black", width = 6),
>     thickness = 0.75,
>     value = 4800)))
>
> How can I change the indicator color from green to some other color?
>
> How can I change the typeface and font size of the speedometer tick mark font size?
>
> Thomas Subia
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Jul 21 23:43:21 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 21 Jul 2023 14:43:21 -0700
Subject: [R] plotly question
In-Reply-To: <CAGxFJbQ3xQvMNUN_NHxSV0xoHatXAUUHJRECoScMjC42yhC=4Q@mail.gmail.com>
References: <879072287.3361001.1689945554065.ref@mail.yahoo.com>
 <879072287.3361001.1689945554065@mail.yahoo.com>
 <CAGxFJbQ3xQvMNUN_NHxSV0xoHatXAUUHJRECoScMjC42yhC=4Q@mail.gmail.com>
Message-ID: <2D203311-A1C2-4C8F-BCAE-6A3A8C9A0C26@dcn.davis.ca.us>

plotly is _not_ associated with posit. I think you are unlikely to find expertise with plotly in their forums. You might find help at stackoverflow.com.

On July 21, 2023 1:40:49 PM PDT, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>As you apparently haven't received any responses yet, I'll try to
>suggest something useful. However, I have absolutely zero experience
>with plotly, so this is just from general principles and reading the
>plot_ly Help file, which says for the "..." arguments:
>
>"Arguments (i.e., attributes) passed along to the trace type. See
>schema() for a list of acceptable attributes for a given trace type
>(by going to traces -> type -> attributes). Note that attributes
>provided at this level may override other arguments (e.g. plot_ly(x =
>1:10, y = 1:10, color = I("red"), marker = list(color = "blue")))."
>
>So I would **guess** that you needs to go to ?schema to see if the
>further attributes of your "gauge" type that you wish to change are
>there.
>
>Alternatively, plotly is a package from posit.co, formerly RStudio;
>they have an extensive support site and community here:
>https://posit.co/support/
>So you may have success there.
>
>Finally, I assume you have tried web searching appropriate search
>queries, but if not, you should do so. It is sometimes surprising how
>much you can find that way.
>
>... and, again, apologies if my ignorance means my suggestions are useless.
>
>Cheers,
>Bert
>
>
>On Fri, Jul 21, 2023 at 6:19?AM Thomas Subia via R-help
><r-help at r-project.org> wrote:
>>
>> Colleagues
>>
>> Here is my reproducible code
>>
>> plot_ly(
>>   domain = list(x = c(0, 1), y = c(0, 1)),
>>   value = 2874,
>>   title = list(text = "Generic"),
>>   type = "indicator",
>>   mode = "gauge+number+delta",
>>   delta = list(reference = 4800),
>>   gauge = list(
>>     axis =list(range = list(NULL, 5000)),
>>     steps = list(
>>     list(range = c(0, 4800), color = "white"),
>>     list(range = c(4800, 6000), color = "red")),
>>     threshold = list(
>>     line = list(color = "black", width = 6),
>>     thickness = 0.75,
>>     value = 4800)))
>>
>> How can I change the indicator color from green to some other color?
>>
>> How can I change the typeface and font size of the speedometer tick mark font size?
>>
>> Thomas Subia
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From bor|@@@te|pe @end|ng |rom utoronto@c@  Sat Jul 22 00:04:15 2023
From: bor|@@@te|pe @end|ng |rom utoronto@c@ (Boris Steipe)
Date: Fri, 21 Jul 2023 22:04:15 +0000
Subject: [R] plotly question
In-Reply-To: <2D203311-A1C2-4C8F-BCAE-6A3A8C9A0C26@dcn.davis.ca.us>
References: <879072287.3361001.1689945554065.ref@mail.yahoo.com>
 <879072287.3361001.1689945554065@mail.yahoo.com>
 <CAGxFJbQ3xQvMNUN_NHxSV0xoHatXAUUHJRECoScMjC42yhC=4Q@mail.gmail.com>
 <2D203311-A1C2-4C8F-BCAE-6A3A8C9A0C26@dcn.davis.ca.us>
Message-ID: <CE2EFFC8-7EF7-487E-8857-028F01E4160C@utoronto.ca>

Since it is 2023, I asked that question to ChatGPT-4 and got the following response.

-------------------------

The `plotly` library in R uses the `gauge` argument inside the `plot_ly` function to specify the properties of the gauge plot. You can change the indicator color of the arc (also known as the bar) by setting the `bar` property inside `gauge`, and the `font` property for modifying the typeface and font size of the tick marks on the arc.

Below is an example that modifies your code to change the indicator color of the arc to blue and sets the font to Arial with a size of 20:

```R
plotly::plot_ly(
  domain = list(x = c(0, 1), y = c(0, 1)),
  value = 2874,
  title = list(text = "Generic"),
  type = "indicator",
  mode = "gauge+number+delta",
  delta = list(reference = 4800),
  gauge = list(
    axis = list(range = list(NULL, 5000), 
                tickfont = list(size = 20, family = "Arial")),
    bar = list(color = "blue"),
    steps = list(
      list(range = c(0, 4800), color = "white"),
      list(range = c(4800, 6000), color = "red")),
    threshold = list(
      line = list(color = "black", width = 6),
      thickness = 0.75,
      value = 4800)))
```

Please note that the colors are specified by strings that can either be a CSS-acceptable color name or a hexadecimal color code. You can adjust the `tickfont` size and family properties according to your preferences.

---------------

That seems to do what was requested - the bar is blue now, and changing "Arial" to "Times" in the code indeed has the expected effect.

Nice.




Boris





> On Jul 21, 2023, at 17:43, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
> 
> plotly is _not_ associated with posit. I think you are unlikely to find expertise with plotly in their forums. You might find help at stackoverflow.com.
> 
> On July 21, 2023 1:40:49 PM PDT, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>> As you apparently haven't received any responses yet, I'll try to
>> suggest something useful. However, I have absolutely zero experience
>> with plotly, so this is just from general principles and reading the
>> plot_ly Help file, which says for the "..." arguments:
>> 
>> "Arguments (i.e., attributes) passed along to the trace type. See
>> schema() for a list of acceptable attributes for a given trace type
>> (by going to traces -> type -> attributes). Note that attributes
>> provided at this level may override other arguments (e.g. plot_ly(x =
>> 1:10, y = 1:10, color = I("red"), marker = list(color = "blue")))."
>> 
>> So I would **guess** that you needs to go to ?schema to see if the
>> further attributes of your "gauge" type that you wish to change are
>> there.
>> 
>> Alternatively, plotly is a package from posit.co, formerly RStudio;
>> they have an extensive support site and community here:
>> https://posit.co/support/
>> So you may have success there.
>> 
>> Finally, I assume you have tried web searching appropriate search
>> queries, but if not, you should do so. It is sometimes surprising how
>> much you can find that way.
>> 
>> ... and, again, apologies if my ignorance means my suggestions are useless.
>> 
>> Cheers,
>> Bert
>> 
>> 
>> On Fri, Jul 21, 2023 at 6:19?AM Thomas Subia via R-help
>> <r-help at r-project.org> wrote:
>>> 
>>> Colleagues
>>> 
>>> Here is my reproducible code
>>> 
>>> plot_ly(
>>>  domain = list(x = c(0, 1), y = c(0, 1)),
>>>  value = 2874,
>>>  title = list(text = "Generic"),
>>>  type = "indicator",
>>>  mode = "gauge+number+delta",
>>>  delta = list(reference = 4800),
>>>  gauge = list(
>>>    axis =list(range = list(NULL, 5000)),
>>>    steps = list(
>>>    list(range = c(0, 4800), color = "white"),
>>>    list(range = c(4800, 6000), color = "red")),
>>>    threshold = list(
>>>    line = list(color = "black", width = 6),
>>>    thickness = 0.75,
>>>    value = 4800)))
>>> 
>>> How can I change the indicator color from green to some other color?
>>> 
>>> How can I change the typeface and font size of the speedometer tick mark font size?
>>> 
>>> Thomas Subia
>>> 
>>>        [[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> -- 
> Sent from my phone. Please excuse my brevity.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From po|c1410 @end|ng |rom gm@||@com  Sat Jul 22 11:36:28 2023
From: po|c1410 @end|ng |rom gm@||@com (CALUM POLWART)
Date: Sat, 22 Jul 2023 10:36:28 +0100
Subject: [R] plotly question
In-Reply-To: <2D203311-A1C2-4C8F-BCAE-6A3A8C9A0C26@dcn.davis.ca.us>
References: <879072287.3361001.1689945554065.ref@mail.yahoo.com>
 <879072287.3361001.1689945554065@mail.yahoo.com>
 <CAGxFJbQ3xQvMNUN_NHxSV0xoHatXAUUHJRECoScMjC42yhC=4Q@mail.gmail.com>
 <2D203311-A1C2-4C8F-BCAE-6A3A8C9A0C26@dcn.davis.ca.us>
Message-ID: <CA+etgP=obd_PkndocKgLMyk3gEic1w0go6YpNUA6G5fcwEXBVg@mail.gmail.com>

I was just replying to say which bit do you consider the indicator.

But I see Boris has provided a Chat GPT solution.

Running it hopefully shows you how to change colours on various parts.



On Fri, 21 Jul 2023, 22:43 Jeff Newmiller, <jdnewmil at dcn.davis.ca.us> wrote:

> plotly is _not_ associated with posit. I think you are unlikely to find
> expertise with plotly in their forums. You might find help at
> stackoverflow.com.
>
> On July 21, 2023 1:40:49 PM PDT, Bert Gunter <bgunter.4567 at gmail.com>
> wrote:
> >As you apparently haven't received any responses yet, I'll try to
> >suggest something useful. However, I have absolutely zero experience
> >with plotly, so this is just from general principles and reading the
> >plot_ly Help file, which says for the "..." arguments:
> >
> >"Arguments (i.e., attributes) passed along to the trace type. See
> >schema() for a list of acceptable attributes for a given trace type
> >(by going to traces -> type -> attributes). Note that attributes
> >provided at this level may override other arguments (e.g. plot_ly(x =
> >1:10, y = 1:10, color = I("red"), marker = list(color = "blue")))."
> >
> >So I would **guess** that you needs to go to ?schema to see if the
> >further attributes of your "gauge" type that you wish to change are
> >there.
> >
> >Alternatively, plotly is a package from posit.co, formerly RStudio;
> >they have an extensive support site and community here:
> >https://posit.co/support/
> >So you may have success there.
> >
> >Finally, I assume you have tried web searching appropriate search
> >queries, but if not, you should do so. It is sometimes surprising how
> >much you can find that way.
> >
> >... and, again, apologies if my ignorance means my suggestions are
> useless.
> >
> >Cheers,
> >Bert
> >
> >
> >On Fri, Jul 21, 2023 at 6:19?AM Thomas Subia via R-help
> ><r-help at r-project.org> wrote:
> >>
> >> Colleagues
> >>
> >> Here is my reproducible code
> >>
> >> plot_ly(
> >>   domain = list(x = c(0, 1), y = c(0, 1)),
> >>   value = 2874,
> >>   title = list(text = "Generic"),
> >>   type = "indicator",
> >>   mode = "gauge+number+delta",
> >>   delta = list(reference = 4800),
> >>   gauge = list(
> >>     axis =list(range = list(NULL, 5000)),
> >>     steps = list(
> >>     list(range = c(0, 4800), color = "white"),
> >>     list(range = c(4800, 6000), color = "red")),
> >>     threshold = list(
> >>     line = list(color = "black", width = 6),
> >>     thickness = 0.75,
> >>     value = 4800)))
> >>
> >> How can I change the indicator color from green to some other color?
> >>
> >> How can I change the typeface and font size of the speedometer tick
> mark font size?
> >>
> >> Thomas Subia
> >>
> >>         [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From tg@77m @end|ng |rom y@hoo@com  Sat Jul 22 16:40:51 2023
From: tg@77m @end|ng |rom y@hoo@com (Thomas Subia)
Date: Sat, 22 Jul 2023 14:40:51 +0000 (UTC)
Subject: [R] plotly
References: <334473962.3782650.1690036851873.ref@mail.yahoo.com>
Message-ID: <334473962.3782650.1690036851873@mail.yahoo.com>

Colleagues,
Thanks for the update.
My colleagues at work have run this script but the resulting graph output for value is rounded. How can one turn this annoying feature off?
I've googled this but to no avail.




	[[alternative HTML version deleted]]


From bor|@@@te|pe @end|ng |rom utoronto@c@  Sat Jul 22 16:43:23 2023
From: bor|@@@te|pe @end|ng |rom utoronto@c@ (Boris Steipe)
Date: Sat, 22 Jul 2023 14:43:23 +0000
Subject: [R] plotly
In-Reply-To: <334473962.3782650.1690036851873@mail.yahoo.com>
References: <334473962.3782650.1690036851873.ref@mail.yahoo.com>
 <334473962.3782650.1690036851873@mail.yahoo.com>
Message-ID: <86A0350E-5026-4102-AB43-FC90FB4E504E@utoronto.ca>

What do you mean "Rounded"?
What do you expect, what do you get instead?

?





> On Jul 22, 2023, at 10:40, Thomas Subia via R-help <r-help at r-project.org> wrote:
> 
> Colleagues,
> Thanks for the update.
> My colleagues at work have run this script but the resulting graph output for value is rounded. How can one turn this annoying feature off?
> I've googled this but to no avail.
> 
> 
> 
> 
> [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bor|@@@te|pe @end|ng |rom utoronto@c@  Sat Jul 22 17:10:49 2023
From: bor|@@@te|pe @end|ng |rom utoronto@c@ (Boris Steipe)
Date: Sat, 22 Jul 2023 15:10:49 +0000
Subject: [R] plotly
In-Reply-To: <86A0350E-5026-4102-AB43-FC90FB4E504E@utoronto.ca>
References: <334473962.3782650.1690036851873.ref@mail.yahoo.com>
 <334473962.3782650.1690036851873@mail.yahoo.com>
 <86A0350E-5026-4102-AB43-FC90FB4E504E@utoronto.ca>
Message-ID: <999778E3-D915-405E-9DE8-4D5B167B9968@utoronto.ca>

ChatGPT-4:

------ Query:  ----------------------------------

Thank you. The `value` in the code example is 2874. The plot shows a large number at the center and a smaller value computed as a delta relative to the `reference` of 4800. But the large value is given as 2870, and the smaller value is given as -1930 i.e. both values are rounded. Can I control the precision of these two numbers?


------ Response:  -------------------------------

In Plotly, you can control the precision of the numbers by specifying the `valueformat` and `delta.valueformat` parameters. These parameters accept a string in the format that is used by the C `printf` function. For example, `%.2f` specifies a number with two digits after the decimal point. Here is an example:

```R
plotly::plot_ly(
  domain = list(x = c(0, 1), y = c(0, 1)),
  value = 2874,
  title = list(text = "Generic"),
  type = "indicator",
  mode = "gauge+number+delta",
  number = list(valueformat = "%.2f"), 
  delta = list(reference = 4800, valueformat = "%.2f"),
  gauge = list(
    axis = list(range = list(NULL, 5000), 
                tickfont = list(size = 20, family = "Arial")),
    bar = list(color = "blue"),
    steps = list(
      list(range = c(0, 4800), color = "white"),
      list(range = c(4800, 6000), color = "red")),
    threshold = list(
      line = list(color = "black", width = 6),
      thickness = 0.75,
      value = 4800)))
```
In this example, both the main number and the delta value will be displayed with two decimal places. You can adjust these strings to display the numbers with the precision you prefer.

-------------------------------------------------

Here you go. I have no idea how it does this, and have a discussion on elements of "Sein und Zeit" and book 19 of the Odyssey, and tutor me in Italian conversation, and draft Mermaid mind-maps - but here we are.


:-)





> On Jul 22, 2023, at 10:50, Thomas Subia <tgs77m at yahoo.com> wrote:
> 
> \In this example, the value was 2324, the gauge displays 2320.
> I'm not sure why this occurs. Changing the statement to 56, results in the gauge reading 60. I'm not sure what needs to be changed in the script or the environment to stop rounding.




> On Jul 22, 2023, at 10:43, Boris Steipe <boris.steipe at utoronto.ca> wrote:
> 
> What do you mean "Rounded"?
> What do you expect, what do you get instead?
> 
> ?
> 
> 
> 
> 
> 
>> On Jul 22, 2023, at 10:40, Thomas Subia via R-help <r-help at r-project.org> wrote:
>> 
>> Colleagues,
>> Thanks for the update.
>> My colleagues at work have run this script but the resulting graph output for value is rounded. How can one turn this annoying feature off?
>> I've googled this but to no avail.
>> 
>> 
>> 
>> 
>> [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tg@77m @end|ng |rom y@hoo@com  Sat Jul 22 17:25:56 2023
From: tg@77m @end|ng |rom y@hoo@com (Thomas Subia)
Date: Sat, 22 Jul 2023 15:25:56 +0000 (UTC)
Subject: [R] plotly
In-Reply-To: <999778E3-D915-405E-9DE8-4D5B167B9968@utoronto.ca>
References: <334473962.3782650.1690036851873.ref@mail.yahoo.com>
 <334473962.3782650.1690036851873@mail.yahoo.com>
 <86A0350E-5026-4102-AB43-FC90FB4E504E@utoronto.ca>
 <999778E3-D915-405E-9DE8-4D5B167B9968@utoronto.ca>
Message-ID: <292011517.3797007.1690039556590@mail.yahoo.com>

 Many thanks for this!?This is an elegant solution!
After looking at my script, I still do not understand is how the rounding occurs. After reading the plotly documentation, unless I am missing something, this wasn't covered.


    On Saturday, July 22, 2023 at 08:10:52 AM PDT, Boris Steipe <boris.steipe at utoronto.ca> wrote:  
 
 ChatGPT-4:

------ Query:? ----------------------------------

Thank you. The `value` in the code example is 2874. The plot shows a large number at the center and a smaller value computed as a delta relative to the `reference` of 4800. But the large value is given as 2870, and the smaller value is given as -1930 i.e. both values are rounded. Can I control the precision of these two numbers?


------ Response:? -------------------------------

In Plotly, you can control the precision of the numbers by specifying the `valueformat` and `delta.valueformat` parameters. These parameters accept a string in the format that is used by the C `printf` function. For example, `%.2f` specifies a number with two digits after the decimal point. Here is an example:

```R
plotly::plot_ly(
? domain = list(x = c(0, 1), y = c(0, 1)),
? value = 2874,
? title = list(text = "Generic"),
? type = "indicator",
? mode = "gauge+number+delta",
? number = list(valueformat = "%.2f"), 
? delta = list(reference = 4800, valueformat = "%.2f"),
? gauge = list(
? ? axis = list(range = list(NULL, 5000), 
? ? ? ? ? ? ? ? tickfont = list(size = 20, family = "Arial")),
? ? bar = list(color = "blue"),
? ? steps = list(
? ? ? list(range = c(0, 4800), color = "white"),
? ? ? list(range = c(4800, 6000), color = "red")),
? ? threshold = list(
? ? ? line = list(color = "black", width = 6),
? ? ? thickness = 0.75,
? ? ? value = 4800)))
```
In this example, both the main number and the delta value will be displayed with two decimal places. You can adjust these strings to display the numbers with the precision you prefer.

-------------------------------------------------

Here you go. I have no idea how it does this, and have a discussion on elements of "Sein und Zeit" and book 19 of the Odyssey, and tutor me in Italian conversation, and draft Mermaid mind-maps - but here we are.


:-)






> 
> \In this example, the value was 2324, the gauge displays 2320.
> I'm not sure why this occurs. Changing the statement to 56, results in the gauge reading 60. I'm not sure what needs to be changed in the script or the environment to stop rounding.




> On Jul 22, 2023, at 10:43, Boris Steipe <boris.steipe at utoronto.ca> wrote:
> 
> What do you mean "Rounded"?
> What do you expect, what do you get instead?
> 
> ?
> 
> 
> 
> 
> 
>> On Jul 22, 2023, at 10:40, Thomas Subia via R-help <r-help at r-project.org> wrote:
>> 
>> Colleagues,
>> Thanks for the update.
>> My colleagues at work have run this script but the resulting graph output for value is rounded. How can one turn this annoying feature off?
>> I've googled this but to no avail.
>> 
>> 
>> 
>> 
>> [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

  
	[[alternative HTML version deleted]]


From po|c1410 @end|ng |rom gm@||@com  Sat Jul 22 22:51:11 2023
From: po|c1410 @end|ng |rom gm@||@com (CALUM POLWART)
Date: Sat, 22 Jul 2023 21:51:11 +0100
Subject: [R] Live data collection, analysis & update of slides ..
Message-ID: <CA+etgP=Om3R03pLLEv99qFzOcPjsnEgEk3rmwU9rnZ55R_hnHg@mail.gmail.com>

I'm looking for a way to do some live data analysis taking audience votes,
presenting their results, potentially posing some new questions to vote on,
and present those and vote.

I'm interested in any suggestions from the collective minds here about the
potential best approaches.

I can obviously provide a range of presentations (PowerPoint, html etc)
which could pose the initial questions.

I can use a third party audience feedback thing (poll everywhere etc) to
give a likert scale.

Most of those offer a histogram of results. But I want a couple of more
specifics - median (I can probably guess that from the histogram) and IQR
(not aware any of them offer that).  Obviously both would be EASY in R.

Anyone used an audience feedback service with an R accessible API?

Or I can use a survey tool to get the results but they don't pose questions
in time to the on-screen presenter...

>From that data I can have a pre-built quarto to present the results.

I'd also like to have a free text box to let people suggest alternative
versions of what they are voting on. Not come across anything in audience
feedback sessions... Anyone?

Then I want to be able to rerun the votes on the alternatives...

Does anyone have any thoughts on bits of R packages that might join this
all together and pull it off?

The alternative would be a shiny app but thG feels extreme for one
session...

	[[alternative HTML version deleted]]


From n|ckmwr@y @end|ng |rom gm@||@com  Sun Jul 23 20:15:57 2023
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Sun, 23 Jul 2023 19:15:57 +0100
Subject: [R] col2rgb() function
Message-ID: <CABxY9BNZtgYTHAk7KZytjfRh09DRT14i+4DJYNOM=pnxi58hFQ@mail.gmail.com>

Hello  I have a palette vector of colour blind colours (in hexadecimal)
which I?m using for plots, but they are not see-through, and as I wanted to
overlay some histograms I wanted to convert these colours to rgb, when you
can set the opacity.

I have found the function col2rgb(), which works in the sense that it gives
a vector of numbers but these don?t work directly in rgb because they are
too big.  If I divide through to make them all less than 1 I don?t get the
corresponding colour-blind hue, but something somewhat off.

Here is the colour-blind palette in a plot:


*cb8<- c("#000000", "#E69F00", "#56B4E9", "#009E73","#F0E442", "#0072B2",
"#D55E00", "#CC79A7")*

*plot(0,0,xlim=c(1,8),ylim=c(0,1))*

*points(1:8,rep(0.5,8),col=cb8,pch=19,cex=2)*



so if I try to convert the red dot ("#D55E00") (number 7) I get

*col2rgb("#D55E00"*

  [,1]

red    213

green   94

blue     0

*points(7,0.25,col=rgb(rgb(213,94,0)),pch=19,cex=2)*

gives me an error message and although if  I divide through

*points(7,0.25,col=rgb(213/307,94/307,0),pch=19,cex=2)*

gives me a reddish dot, but not the same as in the colour-blind palette



Somewhat mystified.  Can anyone help?? Thanks Nick Wray

	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Sun Jul 23 20:24:39 2023
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sun, 23 Jul 2023 14:24:39 -0400
Subject: [R] col2rgb() function
In-Reply-To: <CABxY9BNZtgYTHAk7KZytjfRh09DRT14i+4DJYNOM=pnxi58hFQ@mail.gmail.com>
References: <CABxY9BNZtgYTHAk7KZytjfRh09DRT14i+4DJYNOM=pnxi58hFQ@mail.gmail.com>
Message-ID: <8b1b5e51-d955-c7fb-6843-cc127f31c193@gmail.com>

   Does adjustcolor() help?

cb8<- c("#000000", "#E69F00", "#56B4E9", "#009E73","#F0E442", "#0072B2",
    "#D55E00", "#CC79A7")
plot(0,0,xlim=c(1,8),ylim=c(0,1))
points(1:8,rep(0.5,8),col=cb8,pch=19,cex=2)
points(1:8,rep(0.75,8),col=adjustcolor(cb8, alpha.f = 0.3), pch=19,cex=2)

On 2023-07-23 2:15 p.m., Nick Wray wrote:
> Hello  I have a palette vector of colour blind colours (in hexadecimal)
> which I?m using for plots, but they are not see-through, and as I wanted to
> overlay some histograms I wanted to convert these colours to rgb, when you
> can set the opacity.
> 
> I have found the function col2rgb(), which works in the sense that it gives
> a vector of numbers but these don?t work directly in rgb because they are
> too big.  If I divide through to make them all less than 1 I don?t get the
> corresponding colour-blind hue, but something somewhat off.
> 
> Here is the colour-blind palette in a plot:
> 
> 
> *cb8<- c("#000000", "#E69F00", "#56B4E9", "#009E73","#F0E442", "#0072B2",
> "#D55E00", "#CC79A7")*
> 
> *plot(0,0,xlim=c(1,8),ylim=c(0,1))*
> 
> *points(1:8,rep(0.5,8),col=cb8,pch=19,cex=2)*
> 
> 
> 
> so if I try to convert the red dot ("#D55E00") (number 7) I get
> 
> *col2rgb("#D55E00"*
> 
>    [,1]
> 
> red    213
> 
> green   94
> 
> blue     0
> 
> *points(7,0.25,col=rgb(rgb(213,94,0)),pch=19,cex=2)*
> 
> gives me an error message and although if  I divide through
> 
> *points(7,0.25,col=rgb(213/307,94/307,0),pch=19,cex=2)*
> 
> gives me a reddish dot, but not the same as in the colour-blind palette
> 
> 
> 
> Somewhat mystified.  Can anyone help?? Thanks Nick Wray
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jul 23 20:31:54 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 23 Jul 2023 14:31:54 -0400
Subject: [R] col2rgb() function
In-Reply-To: <CABxY9BNZtgYTHAk7KZytjfRh09DRT14i+4DJYNOM=pnxi58hFQ@mail.gmail.com>
References: <CABxY9BNZtgYTHAk7KZytjfRh09DRT14i+4DJYNOM=pnxi58hFQ@mail.gmail.com>
Message-ID: <7171cae3-f3f8-3145-5f70-d26b3f3b1e34@gmail.com>

On 23/07/2023 2:15 p.m., Nick Wray wrote:
> Hello  I have a palette vector of colour blind colours (in hexadecimal)
> which I?m using for plots, but they are not see-through, and as I wanted to
> overlay some histograms I wanted to convert these colours to rgb, when you
> can set the opacity.
> 
> I have found the function col2rgb(), which works in the sense that it gives
> a vector of numbers but these don?t work directly in rgb because they are
> too big.  If I divide through to make them all less than 1 I don?t get the
> corresponding colour-blind hue, but something somewhat off.
> 
> Here is the colour-blind palette in a plot:
> 
> 
> *cb8<- c("#000000", "#E69F00", "#56B4E9", "#009E73","#F0E442", "#0072B2",
> "#D55E00", "#CC79A7")*
> 
> *plot(0,0,xlim=c(1,8),ylim=c(0,1))*
> 
> *points(1:8,rep(0.5,8),col=cb8,pch=19,cex=2)*
> 
> 
> 
> so if I try to convert the red dot ("#D55E00") (number 7) I get
> 
> *col2rgb("#D55E00"*
> 
>    [,1]
> 
> red    213
> 
> green   94
> 
> blue     0
> 
> *points(7,0.25,col=rgb(rgb(213,94,0)),pch=19,cex=2)*
> 
> gives me an error message and although if  I divide through
> 
> *points(7,0.25,col=rgb(213/307,94/307,0),pch=19,cex=2)*
> 
> gives me a reddish dot, but not the same as in the colour-blind palette

Why are you dividing by 307?  You should divide by 255.

Duncan Murdoch


From n|ckmwr@y @end|ng |rom gm@||@com  Sun Jul 23 21:00:01 2023
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Sun, 23 Jul 2023 20:00:01 +0100
Subject: [R] col2rgb() function
In-Reply-To: <8b1b5e51-d955-c7fb-6843-cc127f31c193@gmail.com>
References: <CABxY9BNZtgYTHAk7KZytjfRh09DRT14i+4DJYNOM=pnxi58hFQ@mail.gmail.com>
 <8b1b5e51-d955-c7fb-6843-cc127f31c193@gmail.com>
Message-ID: <CABxY9BNMmYdR9bpo5zNo0N=OAgbG0nBae-qpC6HzpMXPdzjfVA@mail.gmail.com>

Thanks That works nicely  Nick

On Sun, 23 Jul 2023 at 19:26, Ben Bolker <bbolker at gmail.com> wrote:

>    Does adjustcolor() help?
>
> cb8<- c("#000000", "#E69F00", "#56B4E9", "#009E73","#F0E442", "#0072B2",
>     "#D55E00", "#CC79A7")
> plot(0,0,xlim=c(1,8),ylim=c(0,1))
> points(1:8,rep(0.5,8),col=cb8,pch=19,cex=2)
> points(1:8,rep(0.75,8),col=adjustcolor(cb8, alpha.f = 0.3), pch=19,cex=2)
>
> On 2023-07-23 2:15 p.m., Nick Wray wrote:
> > Hello  I have a palette vector of colour blind colours (in hexadecimal)
> > which I?m using for plots, but they are not see-through, and as I wanted
> to
> > overlay some histograms I wanted to convert these colours to rgb, when
> you
> > can set the opacity.
> >
> > I have found the function col2rgb(), which works in the sense that it
> gives
> > a vector of numbers but these don?t work directly in rgb because they are
> > too big.  If I divide through to make them all less than 1 I don?t get
> the
> > corresponding colour-blind hue, but something somewhat off.
> >
> > Here is the colour-blind palette in a plot:
> >
> >
> > *cb8<- c("#000000", "#E69F00", "#56B4E9", "#009E73","#F0E442", "#0072B2",
> > "#D55E00", "#CC79A7")*
> >
> > *plot(0,0,xlim=c(1,8),ylim=c(0,1))*
> >
> > *points(1:8,rep(0.5,8),col=cb8,pch=19,cex=2)*
> >
> >
> >
> > so if I try to convert the red dot ("#D55E00") (number 7) I get
> >
> > *col2rgb("#D55E00"*
> >
> >    [,1]
> >
> > red    213
> >
> > green   94
> >
> > blue     0
> >
> > *points(7,0.25,col=rgb(rgb(213,94,0)),pch=19,cex=2)*
> >
> > gives me an error message and although if  I divide through
> >
> > *points(7,0.25,col=rgb(213/307,94/307,0),pch=19,cex=2)*
> >
> > gives me a reddish dot, but not the same as in the colour-blind palette
> >
> >
> >
> > Somewhat mystified.  Can anyone help?? Thanks Nick Wray
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From Ach|m@Ze||e|@ @end|ng |rom u|bk@@c@@t  Sun Jul 23 22:13:23 2023
From: Ach|m@Ze||e|@ @end|ng |rom u|bk@@c@@t (Achim Zeileis)
Date: Sun, 23 Jul 2023 22:13:23 +0200 (CEST)
Subject: [R] col2rgb() function
In-Reply-To: <CABxY9BNMmYdR9bpo5zNo0N=OAgbG0nBae-qpC6HzpMXPdzjfVA@mail.gmail.com>
References: <CABxY9BNZtgYTHAk7KZytjfRh09DRT14i+4DJYNOM=pnxi58hFQ@mail.gmail.com>
 <8b1b5e51-d955-c7fb-6843-cc127f31c193@gmail.com>
 <CABxY9BNMmYdR9bpo5zNo0N=OAgbG0nBae-qpC6HzpMXPdzjfVA@mail.gmail.com>
Message-ID: <90de926e-2a70-d8a4-e300-5024c716be6f@uibk.ac.at>

Just one addition which may or may not be useful: The color palette you 
use is also known as "Okabe-Ito" and it is the default set of colors in 
the palette.colors() function. This function also has an optional alpha 
argument. So if you want to generate these colors with an alpha of 0.3 you 
can also do:

palette.colors(8, alpha = 0.3)

or more explicitly

palette.colors(8, palette = "Okabe-Ito", alpha = 0.3)

On Sun, 23 Jul 2023, Nick Wray wrote:

> Thanks That works nicely  Nick
>
> On Sun, 23 Jul 2023 at 19:26, Ben Bolker <bbolker at gmail.com> wrote:
>
>>    Does adjustcolor() help?
>>
>> cb8<- c("#000000", "#E69F00", "#56B4E9", "#009E73","#F0E442", "#0072B2",
>>     "#D55E00", "#CC79A7")
>> plot(0,0,xlim=c(1,8),ylim=c(0,1))
>> points(1:8,rep(0.5,8),col=cb8,pch=19,cex=2)
>> points(1:8,rep(0.75,8),col=adjustcolor(cb8, alpha.f = 0.3), pch=19,cex=2)
>>
>> On 2023-07-23 2:15 p.m., Nick Wray wrote:
>>> Hello  I have a palette vector of colour blind colours (in hexadecimal)
>>> which I?m using for plots, but they are not see-through, and as I wanted
>> to
>>> overlay some histograms I wanted to convert these colours to rgb, when
>> you
>>> can set the opacity.
>>>
>>> I have found the function col2rgb(), which works in the sense that it
>> gives
>>> a vector of numbers but these don?t work directly in rgb because they are
>>> too big.  If I divide through to make them all less than 1 I don?t get
>> the
>>> corresponding colour-blind hue, but something somewhat off.
>>>
>>> Here is the colour-blind palette in a plot:
>>>
>>>
>>> *cb8<- c("#000000", "#E69F00", "#56B4E9", "#009E73","#F0E442", "#0072B2",
>>> "#D55E00", "#CC79A7")*
>>>
>>> *plot(0,0,xlim=c(1,8),ylim=c(0,1))*
>>>
>>> *points(1:8,rep(0.5,8),col=cb8,pch=19,cex=2)*
>>>
>>>
>>>
>>> so if I try to convert the red dot ("#D55E00") (number 7) I get
>>>
>>> *col2rgb("#D55E00"*
>>>
>>>    [,1]
>>>
>>> red    213
>>>
>>> green   94
>>>
>>> blue     0
>>>
>>> *points(7,0.25,col=rgb(rgb(213,94,0)),pch=19,cex=2)*
>>>
>>> gives me an error message and although if  I divide through
>>>
>>> *points(7,0.25,col=rgb(213/307,94/307,0),pch=19,cex=2)*
>>>
>>> gives me a reddish dot, but not the same as in the colour-blind palette
>>>
>>>
>>>
>>> Somewhat mystified.  Can anyone help?? Thanks Nick Wray
>>>
>>>       [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

From n|ckmwr@y @end|ng |rom gm@||@com  Sun Jul 23 22:28:14 2023
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Sun, 23 Jul 2023 21:28:14 +0100
Subject: [R] col2rgb() function
In-Reply-To: <90de926e-2a70-d8a4-e300-5024c716be6f@uibk.ac.at>
References: <CABxY9BNZtgYTHAk7KZytjfRh09DRT14i+4DJYNOM=pnxi58hFQ@mail.gmail.com>
 <8b1b5e51-d955-c7fb-6843-cc127f31c193@gmail.com>
 <CABxY9BNMmYdR9bpo5zNo0N=OAgbG0nBae-qpC6HzpMXPdzjfVA@mail.gmail.com>
 <90de926e-2a70-d8a4-e300-5024c716be6f@uibk.ac.at>
Message-ID: <CABxY9BN5oosUoEt4MU+bu4ry954EKhQ0APAw=BZNfGWj4Hhu=w@mail.gmail.com>

Thanks v useful to know Nick

On Sun, 23 Jul 2023 at 21:13, Achim Zeileis <Achim.Zeileis at uibk.ac.at>
wrote:

> Just one addition which may or may not be useful: The color palette you
> use is also known as "Okabe-Ito" and it is the default set of colors in
> the palette.colors() function. This function also has an optional alpha
> argument. So if you want to generate these colors with an alpha of 0.3 you
> can also do:
>
> palette.colors(8, alpha = 0.3)
>
> or more explicitly
>
> palette.colors(8, palette = "Okabe-Ito", alpha = 0.3)
>
> On Sun, 23 Jul 2023, Nick Wray wrote:
>
> > Thanks That works nicely  Nick
> >
> > On Sun, 23 Jul 2023 at 19:26, Ben Bolker <bbolker at gmail.com> wrote:
> >
> >>    Does adjustcolor() help?
> >>
> >> cb8<- c("#000000", "#E69F00", "#56B4E9", "#009E73","#F0E442", "#0072B2",
> >>     "#D55E00", "#CC79A7")
> >> plot(0,0,xlim=c(1,8),ylim=c(0,1))
> >> points(1:8,rep(0.5,8),col=cb8,pch=19,cex=2)
> >> points(1:8,rep(0.75,8),col=adjustcolor(cb8, alpha.f = 0.3),
> pch=19,cex=2)
> >>
> >> On 2023-07-23 2:15 p.m., Nick Wray wrote:
> >>> Hello  I have a palette vector of colour blind colours (in hexadecimal)
> >>> which I?m using for plots, but they are not see-through, and as I
> wanted
> >> to
> >>> overlay some histograms I wanted to convert these colours to rgb, when
> >> you
> >>> can set the opacity.
> >>>
> >>> I have found the function col2rgb(), which works in the sense that it
> >> gives
> >>> a vector of numbers but these don?t work directly in rgb because they
> are
> >>> too big.  If I divide through to make them all less than 1 I don?t get
> >> the
> >>> corresponding colour-blind hue, but something somewhat off.
> >>>
> >>> Here is the colour-blind palette in a plot:
> >>>
> >>>
> >>> *cb8<- c("#000000", "#E69F00", "#56B4E9", "#009E73","#F0E442",
> "#0072B2",
> >>> "#D55E00", "#CC79A7")*
> >>>
> >>> *plot(0,0,xlim=c(1,8),ylim=c(0,1))*
> >>>
> >>> *points(1:8,rep(0.5,8),col=cb8,pch=19,cex=2)*
> >>>
> >>>
> >>>
> >>> so if I try to convert the red dot ("#D55E00") (number 7) I get
> >>>
> >>> *col2rgb("#D55E00"*
> >>>
> >>>    [,1]
> >>>
> >>> red    213
> >>>
> >>> green   94
> >>>
> >>> blue     0
> >>>
> >>> *points(7,0.25,col=rgb(rgb(213,94,0)),pch=19,cex=2)*
> >>>
> >>> gives me an error message and although if  I divide through
> >>>
> >>> *points(7,0.25,col=rgb(213/307,94/307,0),pch=19,cex=2)*
> >>>
> >>> gives me a reddish dot, but not the same as in the colour-blind palette
> >>>
> >>>
> >>>
> >>> Somewhat mystified.  Can anyone help?? Thanks Nick Wray
> >>>
> >>>       [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >

	[[alternative HTML version deleted]]


From d@v|d@@teven@ @end|ng |rom u@u@edu  Sun Jul 23 23:35:52 2023
From: d@v|d@@teven@ @end|ng |rom u@u@edu (David Stevens)
Date: Sun, 23 Jul 2023 21:35:52 +0000
Subject: [R] col2rgb() function
In-Reply-To: <CABxY9BNMmYdR9bpo5zNo0N=OAgbG0nBae-qpC6HzpMXPdzjfVA@mail.gmail.com>
References: <CABxY9BNZtgYTHAk7KZytjfRh09DRT14i+4DJYNOM=pnxi58hFQ@mail.gmail.com>
 <8b1b5e51-d955-c7fb-6843-cc127f31c193@gmail.com>
 <CABxY9BNMmYdR9bpo5zNo0N=OAgbG0nBae-qpC6HzpMXPdzjfVA@mail.gmail.com>
Message-ID: <4a9d48f7-1cbc-8b3d-369e-621324530279@usu.edu>

Nick,

I've also made colors transparent by pasting the hex equivalent of, say, 
0.3*256 = 76.9 to the hex color code. e.q. for black it might be 
"#0000004d" and the 4d is 77 in hex. That way you don't need to convert 
back and forth so much. If col is "#000000" the transparent version is

tcol <- paste0(col,"4d")

This would work in one step on a whole palette.

David

David K Stevens, PhD, PE, Professor
Civil and Environmental Engineering
Utah Water Research Laboratory
Utah State University
8200 Old Main Hill
Logan, UT 84322-8200
david.stevens at usu.edu
(435) 797-3229 (office)

On 7/23/2023 1:00 PM, Nick Wray wrote:
> Thanks That works nicely  Nick
>
> On Sun, 23 Jul 2023 at 19:26, Ben Bolker <bbolker at gmail.com> wrote:
>
>>     Does adjustcolor() help?
>>
>> cb8<- c("#000000", "#E69F00", "#56B4E9", "#009E73","#F0E442", "#0072B2",
>>      "#D55E00", "#CC79A7")
>> plot(0,0,xlim=c(1,8),ylim=c(0,1))
>> points(1:8,rep(0.5,8),col=cb8,pch=19,cex=2)
>> points(1:8,rep(0.75,8),col=adjustcolor(cb8, alpha.f = 0.3), pch=19,cex=2)
>>
>> On 2023-07-23 2:15 p.m., Nick Wray wrote:
>>> Hello  I have a palette vector of colour blind colours (in hexadecimal)
>>> which I?m using for plots, but they are not see-through, and as I wanted
>> to
>>> overlay some histograms I wanted to convert these colours to rgb, when
>> you
>>> can set the opacity.
>>>
>>> I have found the function col2rgb(), which works in the sense that it
>> gives
>>> a vector of numbers but these don?t work directly in rgb because they are
>>> too big.  If I divide through to make them all less than 1 I don?t get
>> the
>>> corresponding colour-blind hue, but something somewhat off.
>>>
>>> Here is the colour-blind palette in a plot:
>>>
>>>
>>> *cb8<- c("#000000", "#E69F00", "#56B4E9", "#009E73","#F0E442", "#0072B2",
>>> "#D55E00", "#CC79A7")*
>>>
>>> *plot(0,0,xlim=c(1,8),ylim=c(0,1))*
>>>
>>> *points(1:8,rep(0.5,8),col=cb8,pch=19,cex=2)*
>>>
>>>
>>>
>>> so if I try to convert the red dot ("#D55E00") (number 7) I get
>>>
>>> *col2rgb("#D55E00"*
>>>
>>>     [,1]
>>>
>>> red    213
>>>
>>> green   94
>>>
>>> blue     0
>>>
>>> *points(7,0.25,col=rgb(rgb(213,94,0)),pch=19,cex=2)*
>>>
>>> gives me an error message and although if  I divide through
>>>
>>> *points(7,0.25,col=rgb(213/307,94/307,0),pch=19,cex=2)*
>>>
>>> gives me a reddish dot, but not the same as in the colour-blind palette
>>>
>>>
>>>
>>> Somewhat mystified.  Can anyone help?? Thanks Nick Wray
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From bbo|ker @end|ng |rom gm@||@com  Mon Jul 24 00:18:16 2023
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sun, 23 Jul 2023 18:18:16 -0400
Subject: [R] col2rgb() function
In-Reply-To: <4a9d48f7-1cbc-8b3d-369e-621324530279@usu.edu>
References: <CABxY9BNZtgYTHAk7KZytjfRh09DRT14i+4DJYNOM=pnxi58hFQ@mail.gmail.com>
 <8b1b5e51-d955-c7fb-6843-cc127f31c193@gmail.com>
 <CABxY9BNMmYdR9bpo5zNo0N=OAgbG0nBae-qpC6HzpMXPdzjfVA@mail.gmail.com>
 <4a9d48f7-1cbc-8b3d-369e-621324530279@usu.edu>
Message-ID: <14ed1597-60df-ddac-df4b-1415e6e20f57@gmail.com>

   You could also adjustcolor for this approach (levels of red, green, 
blue, alpha can all be adjusted proportionally)

On 2023-07-23 5:35 p.m., David Stevens via R-help wrote:
> Nick,
> 
> I've also made colors transparent by pasting the hex equivalent of, say,
> 0.3*256 = 76.9 to the hex color code. e.q. for black it might be
> "#0000004d" and the 4d is 77 in hex. That way you don't need to convert
> back and forth so much. If col is "#000000" the transparent version is
> 
> tcol <- paste0(col,"4d")
> 
> This would work in one step on a whole palette.
> 
> David
> 
> David K Stevens, PhD, PE, Professor
> Civil and Environmental Engineering
> Utah Water Research Laboratory
> Utah State University
> 8200 Old Main Hill
> Logan, UT 84322-8200
> david.stevens at usu.edu
> (435) 797-3229 (office)
> 
> On 7/23/2023 1:00 PM, Nick Wray wrote:
>> Thanks That works nicely  Nick
>>
>> On Sun, 23 Jul 2023 at 19:26, Ben Bolker <bbolker at gmail.com> wrote:
>>
>>>      Does adjustcolor() help?
>>>
>>> cb8<- c("#000000", "#E69F00", "#56B4E9", "#009E73","#F0E442", "#0072B2",
>>>       "#D55E00", "#CC79A7")
>>> plot(0,0,xlim=c(1,8),ylim=c(0,1))
>>> points(1:8,rep(0.5,8),col=cb8,pch=19,cex=2)
>>> points(1:8,rep(0.75,8),col=adjustcolor(cb8, alpha.f = 0.3), pch=19,cex=2)
>>>
>>> On 2023-07-23 2:15 p.m., Nick Wray wrote:
>>>> Hello  I have a palette vector of colour blind colours (in hexadecimal)
>>>> which I?m using for plots, but they are not see-through, and as I wanted
>>> to
>>>> overlay some histograms I wanted to convert these colours to rgb, when
>>> you
>>>> can set the opacity.
>>>>
>>>> I have found the function col2rgb(), which works in the sense that it
>>> gives
>>>> a vector of numbers but these don?t work directly in rgb because they are
>>>> too big.  If I divide through to make them all less than 1 I don?t get
>>> the
>>>> corresponding colour-blind hue, but something somewhat off.
>>>>
>>>> Here is the colour-blind palette in a plot:
>>>>
>>>>
>>>> *cb8<- c("#000000", "#E69F00", "#56B4E9", "#009E73","#F0E442", "#0072B2",
>>>> "#D55E00", "#CC79A7")*
>>>>
>>>> *plot(0,0,xlim=c(1,8),ylim=c(0,1))*
>>>>
>>>> *points(1:8,rep(0.5,8),col=cb8,pch=19,cex=2)*
>>>>
>>>>
>>>>
>>>> so if I try to convert the red dot ("#D55E00") (number 7) I get
>>>>
>>>> *col2rgb("#D55E00"*
>>>>
>>>>      [,1]
>>>>
>>>> red    213
>>>>
>>>> green   94
>>>>
>>>> blue     0
>>>>
>>>> *points(7,0.25,col=rgb(rgb(213,94,0)),pch=19,cex=2)*
>>>>
>>>> gives me an error message and although if  I divide through
>>>>
>>>> *points(7,0.25,col=rgb(213/307,94/307,0),pch=19,cex=2)*
>>>>
>>>> gives me a reddish dot, but not the same as in the colour-blind palette
>>>>
>>>>
>>>>
>>>> Somewhat mystified.  Can anyone help?? Thanks Nick Wray
>>>>
>>>>         [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From kon@t@nt|no@@chr|@todou|ou1 @end|ng |rom gm@||@com  Tue Jul 25 13:29:25 2023
From: kon@t@nt|no@@chr|@todou|ou1 @end|ng |rom gm@||@com (konstantinos christodoulou)
Date: Tue, 25 Jul 2023 14:29:25 +0300
Subject: [R] Seeking Assistance: Plotting Sea Current Vectors in R
Message-ID: <CANVfANpA-A99PKpgobQxcdoWmHXvni-061Xeq4OCdynGRxGVSw@mail.gmail.com>

Dear Rcommunity,

I hope this email finds you well. I am writing to seek your assistance with
a data visualization problem I am facing while working with R.

Problem Description:

I have a dataframe named "df" containing the following columns:
"longitude", "latitude", "sea_currents_mag", and "sea_currents_direction".
The dataframe includes sea current estimations, with information about
magnitude (m/s) and direction (degrees) at various longitude and latitude
coordinates. The study domain covers the Eastern Mediterranean Sea (23E to
36W) and extends from 31S to 37N. It is important to note that the
longitude and latitude coordinates are not evenly spaced across the domain.

Objective: I am seeking guidance on how to create a plot that visualizes
the sea current vectors (arrows) at each coordinate. Additionally, if
possible, I would like the borders of the surrounding countries to be
included in the plot to provide geographic context.

Specific Requests:

   1. Help with plotting sea current vectors (arrows) based on
   "sea_currents_mag" and "sea_currents_direction" at each corresponding
   longitude and latitude coordinate.
   2. Assistance with including the borders of the surrounding countries in
   the plot to provide geographic context.

I would highly appreciate any advice, code examples, or packages that could
assist me in achieving this visualization goal.

Thank you very much for taking the time to read my email, and I look
forward to any assistance you can provide.

Best regards,
Kostas

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Tue Jul 25 14:56:57 2023
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Tue, 25 Jul 2023 12:56:57 +0000
Subject: [R] Seeking Assistance: Plotting Sea Current Vectors in R
In-Reply-To: <CANVfANpA-A99PKpgobQxcdoWmHXvni-061Xeq4OCdynGRxGVSw@mail.gmail.com>
References: <CANVfANpA-A99PKpgobQxcdoWmHXvni-061Xeq4OCdynGRxGVSw@mail.gmail.com>
Message-ID: <ac31511b4a6847a5a1e72a97df15fe6a@SRVEXCHCM1302.precheza.cz>

Not sure if correct but Chatgpt answer is:

Here are some popular R packages for sea current vectors:

oce: The "oce" package provides a wide range of functions for oceanographic data analysis, including handling sea current data. It allows you to work with current data in various formats and provides functions for visualization and basic analysis.

oceanmap: The "oceanmap" package is specifically designed for the analysis and visualization of oceanographic data. It includes functions for mapping oceanographic variables, including sea current vectors, using ggplot2-based plotting techniques.

rOceans: This package is part of the "rOpenSci" project and focuses on accessing various oceanographic datasets, including sea current data. It provides functions to download and work with sea current data from online sources.

marmap: While "marmap" is primarily designed for bathymetric data (depth measurements of the ocean), it can be useful for visualizing sea current vectors in the context of oceanographic maps.

ncdf4: The "ncdf4" package allows you to work with netCDF files, which are commonly used to store oceanographic data, including sea current data. It enables you to read, write, and manipulate netCDF files in R.

oceanoGrafia: The "oceanoGrafia" package provides tools for oceanographic data analysis, including sea current vectors. It supports various data formats and offers functions for data processing and visualization.

ocean: The "ocean" package is designed for oceanographic data analysis and visualization, including sea current data. It offers functions for data manipulation, transformation, and plotting.

Cheers Petr


-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of konstantinos christodoulou
Sent: Tuesday, July 25, 2023 1:29 PM
To: r-help mailing list <r-help at r-project.org>
Subject: [R] Seeking Assistance: Plotting Sea Current Vectors in R

Dear Rcommunity,

I hope this email finds you well. I am writing to seek your assistance with a data visualization problem I am facing while working with R.

Problem Description:

I have a dataframe named "df" containing the following columns:
"longitude", "latitude", "sea_currents_mag", and "sea_currents_direction".
The dataframe includes sea current estimations, with information about magnitude (m/s) and direction (degrees) at various longitude and latitude coordinates. The study domain covers the Eastern Mediterranean Sea (23E to
36W) and extends from 31S to 37N. It is important to note that the longitude and latitude coordinates are not evenly spaced across the domain.

Objective: I am seeking guidance on how to create a plot that visualizes the sea current vectors (arrows) at each coordinate. Additionally, if possible, I would like the borders of the surrounding countries to be included in the plot to provide geographic context.

Specific Requests:

   1. Help with plotting sea current vectors (arrows) based on
   "sea_currents_mag" and "sea_currents_direction" at each corresponding
   longitude and latitude coordinate.
   2. Assistance with including the borders of the surrounding countries in
   the plot to provide geographic context.

I would highly appreciate any advice, code examples, or packages that could assist me in achieving this visualization goal.

Thank you very much for taking the time to read my email, and I look forward to any assistance you can provide.

Best regards,
Kostas

[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.
Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website: https://www.precheza.cz/en/personal-data-protection-principles/
D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti: https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer: https://www.precheza.cz/en/01-disclaimer/


From bgreen @end|ng |rom dy@on@br|@net@org@@u  Wed Jul 26 00:06:07 2023
From: bgreen @end|ng |rom dy@on@br|@net@org@@u (Bob Green)
Date: Wed, 26 Jul 2023 08:06:07 +1000
Subject: [R] Downloading a directory of text files into R
Message-ID: <mailman.369786.0.1690323386.1357.r-help@r-project.org>

Hello,

I am seeking advice as to how I can download the 833 files from this 
site:"http://home.brisnet.org.au/~bgreen/Data/"

I want to be able to download them to perform a textual analysis.

If the 833 files, which are in a Directory with two subfolders were 
on my computer I could read them through readtext. Using readtext I 
get the error:

 > x = readtext("http://home.brisnet.org.au/~bgreen/Data/*")
Error in download_remote(file, ignore_missing, cache, verbosity) :
   Remote URL does not end in known extension. Please download the 
file manually.

 > x = readtext("http://home.brisnet.org.au/~bgreen/Data/Dir/()")
Error in download_remote(file, ignore_missing, cache, verbosity) :
   Remote URL does not end in known extension. Please download the 
file manually.

Any suggestions are appreciated.

Bob


From @pro @end|ng |rom un|me|b@edu@@u  Wed Jul 26 00:12:18 2023
From: @pro @end|ng |rom un|me|b@edu@@u (Andrew Robinson)
Date: Tue, 25 Jul 2023 22:12:18 +0000
Subject: [R] [EXT]  Downloading a directory of text files into R
In-Reply-To: <20230725220626.9AF0FF43@hypatia.math.ethz.ch>
References: <20230725220626.9AF0FF43@hypatia.math.ethz.ch>
Message-ID: <85338ead-1302-4526-adc6-24196c8442f7@Spark>

Hi Bob,

there may be more efficient ways to go about it but I would use R to scrape the contents of

http://home.brisnet.org.au/~bgreen/Data/Hanson1/
http://home.brisnet.org.au/~bgreen/Data/Hanson2/

in order to form the URLs of the files, and then loop over the URLs.

Cheers,

Andrew

--
Andrew Robinson
Chief Executive Officer, CEBRA and Professor of Biosecurity,
School/s of BioSciences and Mathematics & Statistics
University of Melbourne, VIC 3010 Australia
Tel: (+61) 0403 138 955
Email: apro at unimelb.edu.au
Website: https://researchers.ms.unimelb.edu.au/~apro at unimelb/

I acknowledge the Traditional Owners of the land I inhabit, and pay my respects to their Elders.
On 26 Jul 2023 at 8:07 AM +1000, Bob Green <bgreen at dyson.brisnet.org.au>, wrote:
External email: Please exercise caution

Hello,

I am seeking advice as to how I can download the 833 files from this
site:"http://home.brisnet.org.au/~bgreen/Data"

I want to be able to download them to perform a textual analysis.

If the 833 files, which are in a Directory with two subfolders were
on my computer I could read them through readtext. Using readtext I
get the error:

> x = readtext("http://home.brisnet.org.au/~bgreen/Data/*")
Error in download_remote(file, ignore_missing, cache, verbosity) :
Remote URL does not end in known extension. Please download the
file manually.

> x = readtext("http://home.brisnet.org.au/~bgreen/Data/Dir/()")
Error in download_remote(file, ignore_missing, cache, verbosity) :
Remote URL does not end in known extension. Please download the
file manually.

Any suggestions are appreciated.

Bob

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From bbo|ker @end|ng |rom gm@||@com  Wed Jul 26 00:13:02 2023
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Tue, 25 Jul 2023 18:13:02 -0400
Subject: [R] Downloading a directory of text files into R
In-Reply-To: <20230725220625.EC3EEDBE@hypatia.math.ethz.ch>
References: <20230725220625.EC3EEDBE@hypatia.math.ethz.ch>
Message-ID: <3205cb93-5050-2f0a-0764-eef78b004148@gmail.com>

  Where is readtext() from?

   Some combination of scraping

http://home.brisnet.org.au/~bgreen/Data/Hanson1/

and

http://home.brisnet.org.au/~bgreen/Data/Hanson2/


to recover the required file names:

library(rvest)
read_html("http://home.brisnet.org.au/~bgreen/Data/Hanson1/") |> 
html_element("body") |> html_element("table") |> html_table()

will get you most of the way there ...

then an lapply() or for loop to download all the bits ...?



On 2023-07-25 6:06 p.m., Bob Green wrote:
> Hello,
> 
> I am seeking advice as to how I can download the 833 files from this 
> site:"http://home.brisnet.org.au/~bgreen/Data/"
> 
> I want to be able to download them to perform a textual analysis.
> 
> If the 833 files, which are in a Directory with two subfolders were on 
> my computer I could read them through readtext. Using readtext I get the 
> error:
> 
>  > x = readtext("http://home.brisnet.org.au/~bgreen/Data/*")
> Error in download_remote(file, ignore_missing, cache, verbosity) :
>  ? Remote URL does not end in known extension. Please download the file 
> manually.
> 
>  > x = readtext("http://home.brisnet.org.au/~bgreen/Data/Dir/()")
> Error in download_remote(file, ignore_missing, cache, verbosity) :
>  ? Remote URL does not end in known extension. Please download the file 
> manually.
> 
> Any suggestions are appreciated.
> 
> Bob
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Dr. Benjamin Bolker
Professor, Mathematics & Statistics and Biology, McMaster University
Director, School of Computational Science and Engineering
(Acting) Graduate chair, Mathematics & Statistics
 > E-mail is sent at my convenience; I don't expect replies outside of 
working hours.


From drj|m|emon @end|ng |rom gm@||@com  Wed Jul 26 00:58:57 2023
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 26 Jul 2023 08:58:57 +1000
Subject: [R] Seeking Assistance: Plotting Sea Current Vectors in R
In-Reply-To: <CANVfANpA-A99PKpgobQxcdoWmHXvni-061Xeq4OCdynGRxGVSw@mail.gmail.com>
References: <CANVfANpA-A99PKpgobQxcdoWmHXvni-061Xeq4OCdynGRxGVSw@mail.gmail.com>
Message-ID: <CA+8X3fWXTXnsWEzK848pfffLciJY_g4qT6HxcRUpHq=H2kz7aw@mail.gmail.com>

Hi Kostas,
The function vectorField in the plotrix package may do what you want.
See the example.

Jim

On Tue, Jul 25, 2023 at 9:30?PM konstantinos christodoulou
<konstantinos.christodoulou1 at gmail.com> wrote:
>
> Dear Rcommunity,
>
> I hope this email finds you well. I am writing to seek your assistance with
> a data visualization problem I am facing while working with R.
>
> Problem Description:
>
> I have a dataframe named "df" containing the following columns:
> "longitude", "latitude", "sea_currents_mag", and "sea_currents_direction".
> The dataframe includes sea current estimations, with information about
> magnitude (m/s) and direction (degrees) at various longitude and latitude
> coordinates. The study domain covers the Eastern Mediterranean Sea (23E to
> 36W) and extends from 31S to 37N. It is important to note that the
> longitude and latitude coordinates are not evenly spaced across the domain.
>
> Objective: I am seeking guidance on how to create a plot that visualizes
> the sea current vectors (arrows) at each coordinate. Additionally, if
> possible, I would like the borders of the surrounding countries to be
> included in the plot to provide geographic context.
>
> Specific Requests:
>
>    1. Help with plotting sea current vectors (arrows) based on
>    "sea_currents_mag" and "sea_currents_direction" at each corresponding
>    longitude and latitude coordinate.
>    2. Assistance with including the borders of the surrounding countries in
>    the plot to provide geographic context.
>
> I would highly appreciate any advice, code examples, or packages that could
> assist me in achieving this visualization goal.
>
> Thank you very much for taking the time to read my email, and I look
> forward to any assistance you can provide.
>
> Best regards,
> Kostas
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jul 26 01:13:25 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 25 Jul 2023 16:13:25 -0700
Subject: [R] Downloading a directory of text files into R
In-Reply-To: <20230725220625.AA3824C@hypatia.math.ethz.ch>
References: <20230725220625.AA3824C@hypatia.math.ethz.ch>
Message-ID: <4F5E9E2C-01F9-49C2-B78B-BB56913D4663@dcn.davis.ca.us>

You cannot read files using name patterns. You can use list.files with patterns on your local filesystems, and you can use RCurl or httr contributed packages to parse out the web listing of files returned by the web server.  See the example in ?RCurl. Then you can download the individual files in an lapply or for loop.

On July 25, 2023 3:06:07 PM PDT, Bob Green <bgreen at dyson.brisnet.org.au> wrote:
>Hello,
>
>I am seeking advice as to how I can download the 833 files from this site:"http://home.brisnet.org.au/~bgreen/Data/"
>
>I want to be able to download them to perform a textual analysis.
>
>If the 833 files, which are in a Directory with two subfolders were on my computer I could read them through readtext. Using readtext I get the error:
>
>> x = readtext("http://home.brisnet.org.au/~bgreen/Data/*")
>Error in download_remote(file, ignore_missing, cache, verbosity) :
>  Remote URL does not end in known extension. Please download the file manually.
>
>> x = readtext("http://home.brisnet.org.au/~bgreen/Data/Dir/()")
>Error in download_remote(file, ignore_missing, cache, verbosity) :
>  Remote URL does not end in known extension. Please download the file manually.
>
>Any suggestions are appreciated.
>
>Bob
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From tg@77m @end|ng |rom y@hoo@com  Wed Jul 26 04:04:59 2023
From: tg@77m @end|ng |rom y@hoo@com (Thomas Subia)
Date: Wed, 26 Jul 2023 02:04:59 +0000 (UTC)
Subject: [R] plotly
In-Reply-To: <999778E3-D915-405E-9DE8-4D5B167B9968@utoronto.ca>
References: <334473962.3782650.1690036851873.ref@mail.yahoo.com>
 <334473962.3782650.1690036851873@mail.yahoo.com>
 <86A0350E-5026-4102-AB43-FC90FB4E504E@utoronto.ca>
 <999778E3-D915-405E-9DE8-4D5B167B9968@utoronto.ca>
Message-ID: <1303072128.5312344.1690337099695@mail.yahoo.com>

 Colleagues,
Here is my reproducible code.
library(plotly)

t <- list(
? family = "Arial",
? size = 12,
? color = "black",
? face="bold")


t3 <- list(
? family = "Arial",
? size = 12,
? color = "black",
? face="bold")

t5 <- list(
? family = "Arial",
? size = 12,
? color = "black",
? face="bold")

plot_ly(
? domain = list(x = c(0, .5), y = c(0,0.5)),
? value = 319,
? title = list(text = "Example\n4,800 Target",font=t),
? type = "indicator",
? mode = "gauge+number+delta",
? number = list(valueformat = "%.2f",font=t5), 
? delta = list(reference = 4800, valueformat = "%.2f",font=t3),
? gauge = list(
??? axis = list(range = list(NULL, 9600), 
??????????????? tickfont = list(size = 12, face="bold",family = "Arial")),
??? bar = list(color = "black"),
??? steps = list(
????? list(range = c(0, 4800), color = 'AAFF00'),
????? list(range = c(4800, 9600), color = 'ffb2b2')),
??? threshold = list(
????? line = list(color = "black", width = 8),
????? thickness = 0.75,
????? value = 4800)))
Question 1:How can I save the plotly graph with a specific graph size?Using ggsave, one can define the height, width and unit of measure, is there something similar in plotly?Since I am creating the same gauge plot but with different data, I'd like all the resulting graphs to have the same size. I've googled this but to no avail,
Question 2:How can I adjust the tick marks of the gauge? Ideally the tick marks should be set at seq(0,9600,1200)
Thanks everyone!
Thomas Subia

    On Saturday, July 22, 2023 at 08:10:52 AM PDT, Boris Steipe <boris.steipe at utoronto.ca> wrote:  
 
 ChatGPT-4:

------ Query:? ----------------------------------

Thank you. The `value` in the code example is 2874. The plot shows a large number at the center and a smaller value computed as a delta relative to the `reference` of 4800. But the large value is given as 2870, and the smaller value is given as -1930 i.e. both values are rounded. Can I control the precision of these two numbers?


------ Response:? -------------------------------

In Plotly, you can control the precision of the numbers by specifying the `valueformat` and `delta.valueformat` parameters. These parameters accept a string in the format that is used by the C `printf` function. For example, `%.2f` specifies a number with two digits after the decimal point. Here is an example:

```R
plotly::plot_ly(
? domain = list(x = c(0, 1), y = c(0, 1)),
? value = 2874,
? title = list(text = "Generic"),
? type = "indicator",
? mode = "gauge+number+delta",
? number = list(valueformat = "%.2f"), 
? delta = list(reference = 4800, valueformat = "%.2f"),
? gauge = list(
? ? axis = list(range = list(NULL, 5000), 
? ? ? ? ? ? ? ? tickfont = list(size = 20, family = "Arial")),
? ? bar = list(color = "blue"),
? ? steps = list(
? ? ? list(range = c(0, 4800), color = "white"),
? ? ? list(range = c(4800, 6000), color = "red")),
? ? threshold = list(
? ? ? line = list(color = "black", width = 6),
? ? ? thickness = 0.75,
? ? ? value = 4800)))
```
In this example, both the main number and the delta value will be displayed with two decimal places. You can adjust these strings to display the numbers with the precision you prefer.

-------------------------------------------------

Here you go. I have no idea how it does this, and have a discussion on elements of "Sein und Zeit" and book 19 of the Odyssey, and tutor me in Italian conversation, and draft Mermaid mind-maps - but here we are.


:-)






> 
> \In this example, the value was 2324, the gauge displays 2320.
> I'm not sure why this occurs. Changing the statement to 56, results in the gauge reading 60. I'm not sure what needs to be changed in the script or the environment to stop rounding.




> On Jul 22, 2023, at 10:43, Boris Steipe <boris.steipe at utoronto.ca> wrote:
> 
> What do you mean "Rounded"?
> What do you expect, what do you get instead?
> 
> ?
> 
> 
> 
> 
> 
>> On Jul 22, 2023, at 10:40, Thomas Subia via R-help <r-help at r-project.org> wrote:
>> 
>> Colleagues,
>> Thanks for the update.
>> My colleagues at work have run this script but the resulting graph output for value is rounded. How can one turn this annoying feature off?
>> I've googled this but to no avail.
>> 
>> 
>> 
>> 
>> [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

  
	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Jul 26 07:52:20 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 26 Jul 2023 06:52:20 +0100
Subject: [R] Downloading a directory of text files into R
In-Reply-To: <20230725220626.9AF0FF43@hypatia.math.ethz.ch>
References: <20230725220626.9AF0FF43@hypatia.math.ethz.ch>
Message-ID: <d795d4c9-0f52-1160-47c5-2a0a35fd4062@sapo.pt>

?s 23:06 de 25/07/2023, Bob Green escreveu:
> Hello,
> 
> I am seeking advice as to how I can download the 833 files from this 
> site:"http://home.brisnet.org.au/~bgreen/Data/"
> 
> I want to be able to download them to perform a textual analysis.
> 
> If the 833 files, which are in a Directory with two subfolders were on 
> my computer I could read them through readtext. Using readtext I get the 
> error:
> 
>  > x = readtext("http://home.brisnet.org.au/~bgreen/Data/*")
> Error in download_remote(file, ignore_missing, cache, verbosity) :
>  ? Remote URL does not end in known extension. Please download the file 
> manually.
> 
>  > x = readtext("http://home.brisnet.org.au/~bgreen/Data/Dir/()")
> Error in download_remote(file, ignore_missing, cache, verbosity) :
>  ? Remote URL does not end in known extension. Please download the file 
> manually.
> 
> Any suggestions are appreciated.
> 
> Bob
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

The following code downloads all files in the posted link.



suppressPackageStartupMessages({
   library(rvest)
})

# destination directory, change this at will
dest_dir <- "~/Temp"

# first get the two subfolders from the Data webpage
link <- "http://home.brisnet.org.au/~bgreen/Data/"
page <- read_html(link)
page %>%
   html_elements("a") %>%
   html_text() %>%
   grep("/$", ., value = TRUE) -> sub_folder

# create relevant disk sub-directories, if
# they do not exist yet
for(subf in sub_folder) {
   d <- file.path(dest_dir, subf)
   if(!dir.exists(d)) {
     success <- dir.create(d)
     msg <- paste("created directory", d, "-", success)
     message(msg)
   }
}

# prepare to download the files
dest_dir <- file.path(dest_dir, sub_folder)
source_url <- paste0(link, sub_folder)

success <- mapply(\(src, dest) {
   # read each Data subfolder
   # and get the file names therein
   # then lapply 'download.file' to each filename
   pg <- read_html(src)
   pg %>%
     html_elements("a") %>%
     html_text() %>%
     grep("\\.txt$", ., value = TRUE) %>%
     lapply(\(x) {
       s <- paste0(src, x)
       d <- file.path(dest, x)
       tryCatch(
         download.file(url = s, destfile = d),
         warning = function(w) w,
         error = function(e) e
       )
     })
}, source_url, dest_dir)

lengths(success)
# http://home.brisnet.org.au/~bgreen/Data/Hanson1/
#                                               84
# http://home.brisnet.org.au/~bgreen/Data/Hanson2/
#                                              749

# matches the question's number
sum(lengths(success))
# [1] 833



Hope this helps,

Rui Barradas


From bgreen @end|ng |rom dy@on@br|@net@org@@u  Wed Jul 26 08:12:03 2023
From: bgreen @end|ng |rom dy@on@br|@net@org@@u (Bob Green)
Date: Wed, 26 Jul 2023 16:12:03 +1000
Subject: [R] Downloading a directory of text files into R
In-Reply-To: <d795d4c9-0f52-1160-47c5-2a0a35fd4062@sapo.pt>
References: <20230725220626.9AF0FF43@hypatia.math.ethz.ch>
 <d795d4c9-0f52-1160-47c5-2a0a35fd4062@sapo.pt>
Message-ID: <mailman.369793.1.1690352539.1357.r-help@r-project.org>

Rui,

Many thanks for  your reply and coding, I was not 
expecting so much work was required. It worked perfectly.

The only thing I needed to do, was create a Temp file in the Documents folder.

Thanks again,


Bob

At 03:52 PM 7/26/2023, Rui Barradas wrote:
>??s 23:06 de 25/07/2023, Bob Green escreveu:
>>Hello,
>>I am seeking advice as to how I can download 
>>the 833 files from this site:"http://home.brisnet.org.au/~bgreen/Data/"
>>I want to be able to download them to perform a textual analysis.
>>If the 833 files, which are in a Directory with 
>>two subfolders were on my computer I could read 
>>them through readtext. Using readtext I get the error:
>>  > x = readtext("http://home.brisnet.org.au/~bgreen/Data/*")
>>Error in download_remote(file, ignore_missing, cache, verbosity) :
>>  ?  Remote URL does not end in known 
>> extension. Please download the file manually.
>>  > x = readtext("http://home.brisnet.org.au/~bgreen/Data/Dir/()")
>>Error in download_remote(file, ignore_missing, cache, verbosity) :
>>  ?  Remote URL does not end in known 
>> extension. Please download the file manually.
>>Any suggestions are appreciated.
>>Bob
>>______________________________________________
>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.
>Hello,
>
>The following code downloads all files in the posted link.
>
>
>
>suppressPackageStartupMessages({
>   library(rvest)
>})
>
># destination directory, change this at will
>dest_dir <- "~/Temp"
>
># first get the two subfolders from the Data webpage
>link <- "http://home.brisnet.org.au/~bgreen/Data/"
>page <- read_html(link)
>page %>%
>   html_elements("a") %>%
>   html_text() %>%
>   grep("/$", ., value = TRUE) -> sub_folder
>
># create relevant disk sub-directories, if
># they do not exist yet
>for(subf in sub_folder) {
>   d <- file.path(dest_dir, subf)
>   if(!dir.exists(d)) {
>     success <- dir.create(d)
>     msg <- paste("created directory", d, "-", success)
>     message(msg)
>   }
>}
>
># prepare to download the files
>dest_dir <- file.path(dest_dir, sub_folder)
>source_url <- paste0(link, sub_folder)
>
>success <- mapply(\(src, dest) {
>   # read each Data subfolder
>   # and get the file names therein
>   # then lapply 'download.file' to each filename
>   pg <- read_html(src)
>   pg %>%
>     html_elements("a") %>%
>     html_text() %>%
>     grep("\\.txt$", ., value = TRUE) %>%
>     lapply(\(x) {
>       s <- paste0(src, x)
>       d <- file.path(dest, x)
>       tryCatch(
>         download.file(url = s, destfile = d),
>         warning = function(w) w,
>         error = function(e) e
>       )
>     })
>}, source_url, dest_dir)
>
>lengths(success)
># http://home.brisnet.org.au/~bgreen/Data/Hanson1/
>#                                               84
># http://home.brisnet.org.au/~bgreen/Data/Hanson2/
>#                                              749
>
># matches the question's number
>sum(lengths(success))
># [1] 833
>
>
>
>Hope this helps,
>
>Rui Barradas


From k|mmo@e|o @end|ng |rom utu@||  Wed Jul 26 09:33:25 2023
From: k|mmo@e|o @end|ng |rom utu@|| (Kimmo Elo)
Date: Wed, 26 Jul 2023 07:33:25 +0000
Subject: [R] plotly
In-Reply-To: <1303072128.5312344.1690337099695@mail.yahoo.com>
References: <334473962.3782650.1690036851873.ref@mail.yahoo.com>
 <334473962.3782650.1690036851873@mail.yahoo.com>
 <86A0350E-5026-4102-AB43-FC90FB4E504E@utoronto.ca>
 <999778E3-D915-405E-9DE8-4D5B167B9968@utoronto.ca>
 <1303072128.5312344.1690337099695@mail.yahoo.com>
Message-ID: <9cca646d3d6499a0d1760e40a38977c370096ab4.camel@utu.fi>

Hi,

ke, 2023-07-26 kello 02:04 +0000, Thomas Subia via R-help kirjoitti:
> Question 1:How can I save the plotly graph with a specific graph
> size?Using ggsave, one can define the height, width and unit of
> measure, is there something similar in plotly?Since I am creating the
> same gauge plot but with different data, I'd like all the resulting
> graphs to have the same size. I've googled this but to no avail,

Maybe this: plotly_IMAGE

See ?plotly_IMAGE for details, especially 'height' and 'width' should
be of interest for you.

> Question 2:How can I adjust the tick marks of the gauge? Ideally the
> tick marks should be set at seq(0,9600,1200)

Try this (notice 'tickvals' in gauge/axis:

--- snip ---

plot_ly(
    domain = list(x = c(0, .5), y = c(0,0.5)),
    value = 319,
    title = list(text = "Example\n4,800 Target",font=t),
    type = "indicator",
    mode = "gauge+number+delta",
    number = list(valueformat = "%.2f",font=t5), 
    delta = list(reference = 4800, valueformat = "%.2f",font=t3),
    gauge = list(
        axis = list(range = list(NULL, 9600), 
                    tickformat = "%d",
                    tickvals = seq(0,9600,1200),
                    tickfont = list(size = 12, face="bold",family =
"Arial")),
        bar = list(color = "black"),
        steps = list(
            list(range = seq(0, 4800,1200), color = 'AAFF00'),
            list(range = seq(4800, 9600,1200), color = 'ffb2b2')),
        threshold = list(
            line = list(color = "black", width = 8),
            thickness = 0.75,
            value = 4800)))

--- snip ---

HTH,

Kimmo


From kon@t@nt|no@@chr|@todou|ou1 @end|ng |rom gm@||@com  Wed Jul 26 15:08:45 2023
From: kon@t@nt|no@@chr|@todou|ou1 @end|ng |rom gm@||@com (konstantinos christodoulou)
Date: Wed, 26 Jul 2023 16:08:45 +0300
Subject: [R] Seeking Assistance: Plotting Sea Current Vectors in R
In-Reply-To: <CA+8X3fWXTXnsWEzK848pfffLciJY_g4qT6HxcRUpHq=H2kz7aw@mail.gmail.com>
References: <CANVfANpA-A99PKpgobQxcdoWmHXvni-061Xeq4OCdynGRxGVSw@mail.gmail.com>
 <CA+8X3fWXTXnsWEzK848pfffLciJY_g4qT6HxcRUpHq=H2kz7aw@mail.gmail.com>
Message-ID: <CANVfANpHwDPkyPivFNF=Mv2A-rAaOCa+xQyhqs_2sKSW09=5Pw@mail.gmail.com>

Thank you Jim for your response. I will try it now and then let you know if
it works.

Kind regards,
Kostas

On Wed, Jul 26, 2023 at 1:59?AM Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi Kostas,
> The function vectorField in the plotrix package may do what you want.
> See the example.
>
> Jim
>
> On Tue, Jul 25, 2023 at 9:30?PM konstantinos christodoulou
> <konstantinos.christodoulou1 at gmail.com> wrote:
> >
> > Dear Rcommunity,
> >
> > I hope this email finds you well. I am writing to seek your assistance
> with
> > a data visualization problem I am facing while working with R.
> >
> > Problem Description:
> >
> > I have a dataframe named "df" containing the following columns:
> > "longitude", "latitude", "sea_currents_mag", and
> "sea_currents_direction".
> > The dataframe includes sea current estimations, with information about
> > magnitude (m/s) and direction (degrees) at various longitude and latitude
> > coordinates. The study domain covers the Eastern Mediterranean Sea (23E
> to
> > 36W) and extends from 31S to 37N. It is important to note that the
> > longitude and latitude coordinates are not evenly spaced across the
> domain.
> >
> > Objective: I am seeking guidance on how to create a plot that visualizes
> > the sea current vectors (arrows) at each coordinate. Additionally, if
> > possible, I would like the borders of the surrounding countries to be
> > included in the plot to provide geographic context.
> >
> > Specific Requests:
> >
> >    1. Help with plotting sea current vectors (arrows) based on
> >    "sea_currents_mag" and "sea_currents_direction" at each corresponding
> >    longitude and latitude coordinate.
> >    2. Assistance with including the borders of the surrounding countries
> in
> >    the plot to provide geographic context.
> >
> > I would highly appreciate any advice, code examples, or packages that
> could
> > assist me in achieving this visualization goal.
> >
> > Thank you very much for taking the time to read my email, and I look
> > forward to any assistance you can provide.
> >
> > Best regards,
> > Kostas
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @t@t@@@tudent4647 @end|ng |rom gm@||@com  Tue Jul 25 22:18:08 2023
From: @t@t@@@tudent4647 @end|ng |rom gm@||@com (Stats Student)
Date: Tue, 25 Jul 2023 13:18:08 -0700
Subject: [R] Survival questions
Message-ID: <CAMZO7wJWPxizaomdTtxWZ5FoLcF5thi6j7BftZWDMR9DTuyO0A@mail.gmail.com>

Hi - I am using the survfit() function to produce Kaplan-Meier
survival curves for several different groups.

survfit (Surv() ~ cohort, data=d)

Everything works fine, but I'd like to do something different.

I have a 12 month survival curve (base) and I also have two survival
curves based on some experiment that only go out to 3 months. What I
would like to do is take the 3 month realized curves and apply the 3+
month hazard from the base curve to those.

1) is this a reasonable approach? (short of building a full-fledged model)
2) is there a standard way of doing this? I was going to read the
survival curves, calc the hazard (S(t) / S(t-1)), apply it to the
realized (short) curves. Related to that, from the survfit() object,
how do I read various curves specific to a particular cohort?
Everything appears to be concatenated together but I am guessing there
is some way to separate based on particular strata.

Thanks in advance.


From @gw96 @end|ng |rom |@@t@te@edu  Wed Jul 26 23:48:15 2023
From: @gw96 @end|ng |rom |@@t@te@edu (Wadsworth, Spencer G [STAT])
Date: Wed, 26 Jul 2023 21:48:15 +0000
Subject: [R] Style guide when using "R" in a title
Message-ID: <MN2PR04MB67838034E5D4723848692D0FB300A@MN2PR04MB6783.namprd04.prod.outlook.com>

Hello,

I am working on a small booklet to be used with an existing statistics textbook. The purpose of the booklet is to give worked through examples from the textbook using R code and it will be made publicly available with the textbook. The title of the booklet is "R Code Supplement for Basic Engineering Data Collection and Analysis by Vardeman and Jobe".  Someone with whom I'm working on the booklet said that the "R" in the title might need to follow a specific style guide given by the R-project. Is this accurate? Is there a particular font I should use?

Thanks,
Spencer

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Thu Jul 27 01:05:32 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 26 Jul 2023 16:05:32 -0700
Subject: [R] Style guide when using "R" in a title
In-Reply-To: <MN2PR04MB67838034E5D4723848692D0FB300A@MN2PR04MB6783.namprd04.prod.outlook.com>
References: <MN2PR04MB67838034E5D4723848692D0FB300A@MN2PR04MB6783.namprd04.prod.outlook.com>
Message-ID: <CAGxFJbR0ZcWvyJ5wKzKqOGQB+Hyk154zwJMtBQMRUYz=QM9B5Q@mail.gmail.com>

https://www.r-project.org/logo/

Cheers,
Bert

On Wed, Jul 26, 2023 at 4:01?PM Wadsworth, Spencer G [STAT]
<sgw96 at iastate.edu> wrote:
>
> Hello,
>
> I am working on a small booklet to be used with an existing statistics textbook. The purpose of the booklet is to give worked through examples from the textbook using R code and it will be made publicly available with the textbook. The title of the booklet is "R Code Supplement for Basic Engineering Data Collection and Analysis by Vardeman and Jobe".  Someone with whom I'm working on the booklet said that the "R" in the title might need to follow a specific style guide given by the R-project. Is this accurate? Is there a particular font I should use?
>
> Thanks,
> Spencer
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Jul 27 01:17:40 2023
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 27 Jul 2023 01:17:40 +0200
Subject: [R] Style guide when using "R" in a title
In-Reply-To: <MN2PR04MB67838034E5D4723848692D0FB300A@MN2PR04MB6783.namprd04.prod.outlook.com>
References: <MN2PR04MB67838034E5D4723848692D0FB300A@MN2PR04MB6783.namprd04.prod.outlook.com>
Message-ID: <d8f2d822-de85-c5d7-8f8e-b38af6a56a94@statistik.tu-dortmund.de>



On 26.07.2023 23:48, Wadsworth, Spencer G [STAT] wrote:
> Hello,
> 
> I am working on a small booklet to be used with an existing statistics textbook. The purpose of the booklet is to give worked through examples from the textbook using R code and it will be made publicly available with the textbook. The title of the booklet is "R Code Supplement for Basic Engineering Data Collection and Analysis by Vardeman and Jobe".  Someone with whom I'm working on the booklet said that the "R" in the title might need to follow a specific style guide given by the R-project. Is this accurate? Is there a particular font I should use?

You can simply write the title as is.

Best,
Uwe Ligges

> 
> Thanks,
> Spencer
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Thu Jul 27 14:13:09 2023
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 27 Jul 2023 14:13:09 +0200
Subject: [R] Style guide when using "R" in a title
In-Reply-To: <CAGxFJbR0ZcWvyJ5wKzKqOGQB+Hyk154zwJMtBQMRUYz=QM9B5Q@mail.gmail.com>
References: <MN2PR04MB67838034E5D4723848692D0FB300A@MN2PR04MB6783.namprd04.prod.outlook.com>
 <CAGxFJbR0ZcWvyJ5wKzKqOGQB+Hyk154zwJMtBQMRUYz=QM9B5Q@mail.gmail.com>
Message-ID: <25794.24405.433418.575488@stat.math.ethz.ch>

>>>>> Bert Gunter 
>>>>>     on Wed, 26 Jul 2023 16:05:32 -0700 writes:

    > https://www.r-project.org/logo/

    > Cheers, Bert

Well, I tend to disagree.

He did not say he'd want to use the R logo
and there is really nobody saying that "you should".

Using the letter 'R' as are regular word (noun) in a title is
perfectly fine.

Martin

    > On Wed, Jul 26, 2023 at 4:01?PM Wadsworth, Spencer G
    > [STAT] <sgw96 at iastate.edu> wrote:
    >> 
    >> Hello,
    >> 
    >> I am working on a small booklet to be used with an
    >> existing statistics textbook. The purpose of the booklet
    >> is to give worked through examples from the textbook
    >> using R code and it will be made publicly available with
    >> the textbook. The title of the booklet is "R Code
    >> Supplement for Basic Engineering Data Collection and
    >> Analysis by Vardeman and Jobe".  Someone with whom I'm
    >> working on the booklet said that the "R" in the title
    >> might need to follow a specific style guide given by the
    >> R-project. Is this accurate? Is there a particular font I
    >> should use?
    >> 
    >> Thanks, Spencer
    >> 
    >> [[alternative HTML version deleted]]
    >> 
    >> ______________________________________________
    >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    >> more, see https://stat.ethz.ch/mailman/listinfo/r-help
    >> PLEASE do read the posting guide
    >> http://www.R-project.org/posting-guide.html and provide
    >> commented, minimal, self-contained, reproducible code.

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    > more, see https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide
    > http://www.R-project.org/posting-guide.html and provide
    > commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Thu Jul 27 15:10:13 2023
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Thu, 27 Jul 2023 13:10:13 +0000
Subject: [R] Style guide when using "R" in a title
In-Reply-To: <25794.24405.433418.575488@stat.math.ethz.ch>
References: <MN2PR04MB67838034E5D4723848692D0FB300A@MN2PR04MB6783.namprd04.prod.outlook.com>
 <CAGxFJbR0ZcWvyJ5wKzKqOGQB+Hyk154zwJMtBQMRUYz=QM9B5Q@mail.gmail.com>
 <25794.24405.433418.575488@stat.math.ethz.ch>
Message-ID: <CH3PR22MB4514829E8CE0938CC32E61AACF01A@CH3PR22MB4514.namprd22.prod.outlook.com>

I did a google search for "R books" and looked at the R in the titles. There is no consistency except it is always an upper case letter.
Serif, white R on red: "R for Data Science" and again "R Packages." Given a common author this is a Hadley Wickham style.
Sans-serif, black R on cream and a stylistic black R on white: "The art of R programming."
Serif, black R on white backgro7und: "R in a Nutshell: A desktop Quick Reference."

And many others

The R logo is sans-serif, blue, upper case R over a gray oval. The rules for using that are https://www.r-project.org/logo/.

With no legal standing, my thought is that you can use R in any way you like.
Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Martin Maechler
Sent: Thursday, July 27, 2023 8:13 AM
To: Bert Gunter <bgunter.4567 at gmail.com>
Cc: r-help at r-project.org
Subject: Re: [R] Style guide when using "R" in a title

[External Email]

>>>>> Bert Gunter
>>>>>     on Wed, 26 Jul 2023 16:05:32 -0700 writes:

    > https://www.r-project.org/logo/

    > Cheers, Bert

Well, I tend to disagree.

He did not say he'd want to use the R logo and there is really nobody saying that "you should".

Using the letter 'R' as are regular word (noun) in a title is perfectly fine.

Martin

    > On Wed, Jul 26, 2023 at 4:01?PM Wadsworth, Spencer G
    > [STAT] <sgw96 at iastate.edu> wrote:
    >>
    >> Hello,
    >>
    >> I am working on a small booklet to be used with an
    >> existing statistics textbook. The purpose of the booklet
    >> is to give worked through examples from the textbook
    >> using R code and it will be made publicly available with
    >> the textbook. The title of the booklet is "R Code
    >> Supplement for Basic Engineering Data Collection and
    >> Analysis by Vardeman and Jobe".  Someone with whom I'm
    >> working on the booklet said that the "R" in the title
    >> might need to follow a specific style guide given by the
    >> R-project. Is this accurate? Is there a particular font I
    >> should use?
    >>
    >> Thanks, Spencer
    >>
    >> [[alternative HTML version deleted]]
    >>
    >> ______________________________________________
    >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    >> more, see https://stat.ethz.ch/mailman/listinfo/r-help
    >> PLEASE do read the posting guide
    >> http://www.r-project.org/posting-guide.html and provide
    >> commented, minimal, self-contained, reproducible code.

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    > more, see https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide
    > http://www.r-project.org/posting-guide.html and provide
    > commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

