From m@rong|u@|u|g| @end|ng |rom gm@||@com  Sat Jul  1 20:20:53 2023
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Sat, 1 Jul 2023 20:20:53 +0200
Subject: [R] How to plot both lines and points by group on ggplot2
Message-ID: <CAMk+s2R96RiuV0fr16X4jBjPfM8X1mcRUO9kr3HTYdvP9gV_tg@mail.gmail.com>

Hello,
I have a dataframe with measurements stratified by the concentration
of a certain substance. I would like to plot the points of the
measures and connect the points within each series of concentrations.
When I launch ggplot2 I get the error
```
geom_path: Each group consists of only one observation. Do you need to
adjust the
group aesthetic?
```
and no lines are drawn.
Where am I going wrong?
Thank you
Luigi

```
df = data.frame(Conc = c(rep(1, 3), rep(2, 3), rep(5, 3)),
                Time = rep(1:3, 3),
                Value = c(0.91, 0.67, 0.71, 0.91, 0.65, 0.74, 0.95, 0.67, 0.67))
df$Time <- as.factor(df$Time)
levels(df$Time) = c(1, 4, 24)
df$Conc <- as.factor(df$Conc)
levels(df$Conc) = c(1, 2, 5)
library(ggplot2)
ggplot(df, aes(x=Time, y=Value, colour=Conc)) +
  geom_point(size=6) +
  geom_line(aes(x=Time, y=Value, colour=Conc)) +
  scale_colour_manual(values = c("darkslategray3", "darkslategray4",
                                 "deepskyblue4")) +
  ggtitle("Working example") +
  xlab(expression(bold("Time (h)"))) +
  ylab(expression(bold("Concentration (mM)")))
```
-- 
Best regards,
Luigi


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jul  1 20:43:14 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 1 Jul 2023 11:43:14 -0700
Subject: [R] How to plot both lines and points by group on ggplot2
In-Reply-To: <CAMk+s2R96RiuV0fr16X4jBjPfM8X1mcRUO9kr3HTYdvP9gV_tg@mail.gmail.com>
References: <CAMk+s2R96RiuV0fr16X4jBjPfM8X1mcRUO9kr3HTYdvP9gV_tg@mail.gmail.com>
Message-ID: <CAGxFJbRR=32BbB7=-8Wpcha2-dJnD-C8-O0wrwgG9=UYYeRTMw@mail.gmail.com>

Can your post a few lines of your data frame (e.g. via
dput(head(...))) to make it clearer. I found this statement confusing:
"... measurements stratified by the concentration
of a certain substance. I would like to plot the points of the
measures and connect the points within each series of concentrations."

This might or might not be the source of your problems, but I think
showing us (enough of) your data would help clarify things. I don't
use ggplot, but someone who does might have a better chance of
pinpointing the problem if you provide such data.

Cheers,
Bert

On Sat, Jul 1, 2023 at 11:21?AM Luigi Marongiu <marongiu.luigi at gmail.com> wrote:
>
> Hello,
> I have a dataframe with measurements stratified by the concentration
> of a certain substance. I would like to plot the points of the
> measures and connect the points within each series of concentrations.
> When I launch ggplot2 I get the error
> ```
> geom_path: Each group consists of only one observation. Do you need to
> adjust the
> group aesthetic?
> ```
> and no lines are drawn.
> Where am I going wrong?
> Thank you
> Luigi
>
> ```
> df = data.frame(Conc = c(rep(1, 3), rep(2, 3), rep(5, 3)),
>                 Time = rep(1:3, 3),
>                 Value = c(0.91, 0.67, 0.71, 0.91, 0.65, 0.74, 0.95, 0.67, 0.67))
> df$Time <- as.factor(df$Time)
> levels(df$Time) = c(1, 4, 24)
> df$Conc <- as.factor(df$Conc)
> levels(df$Conc) = c(1, 2, 5)
> library(ggplot2)
> ggplot(df, aes(x=Time, y=Value, colour=Conc)) +
>   geom_point(size=6) +
>   geom_line(aes(x=Time, y=Value, colour=Conc)) +
>   scale_colour_manual(values = c("darkslategray3", "darkslategray4",
>                                  "deepskyblue4")) +
>   ggtitle("Working example") +
>   xlab(expression(bold("Time (h)"))) +
>   ylab(expression(bold("Concentration (mM)")))
> ```
> --
> Best regards,
> Luigi
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From chr|@ho|d @end|ng |rom p@yctc@org  Sat Jul  1 20:48:49 2023
From: chr|@ho|d @end|ng |rom p@yctc@org (Chris Evans)
Date: Sat, 1 Jul 2023 19:48:49 +0100
Subject: [R] How to plot both lines and points by group on ggplot2
In-Reply-To: <CAMk+s2R96RiuV0fr16X4jBjPfM8X1mcRUO9kr3HTYdvP9gV_tg@mail.gmail.com>
References: <CAMk+s2R96RiuV0fr16X4jBjPfM8X1mcRUO9kr3HTYdvP9gV_tg@mail.gmail.com>
Message-ID: <d8140c35-9a98-dd45-12fb-883b434430fb@psyctc.org>

[Whoops, forgot that default reply-to is to the sender.]


On 01/07/2023 19:20, Luigi Marongiu wrote:
> Hello,
> I have a dataframe with measurements stratified by the concentration
> of a certain substance. I would like to plot the points of the
> measures and connect the points within each series of concentrations.
> When I launch ggplot2 I get the error
> ```
> geom_path: Each group consists of only one observation. Do you need to
> adjust the
> group aesthetic?
> ```
> and no lines are drawn.
> Where am I going wrong?
> Thank you
> Luigi
>
> ```
> df = data.frame(Conc = c(rep(1, 3), rep(2, 3), rep(5, 3)),
> Time = rep(1:3, 3),
> Value = c(0.91, 0.67, 0.71, 0.91, 0.65, 0.74, 0.95, 0.67, 0.67))
> df$Time <- as.factor(df$Time)
> levels(df$Time) = c(1, 4, 24)
> df$Conc <- as.factor(df$Conc)
> levels(df$Conc) = c(1, 2, 5)
> library(ggplot2)
> ggplot(df, aes(x=Time, y=Value, colour=Conc)) +
> geom_point(size=6) +
> geom_line(aes(x=Time, y=Value, colour=Conc)) +
> scale_colour_manual(values = c("darkslategray3", "darkslategray4",
> "deepskyblue4")) +
> ggtitle("Working example") +
> xlab(expression(bold("Time (h)"))) +
> ylab(expression(bold("Concentration (mM)")))
> ```

If I understand what you want then I think all you need is to add "group 
= Conc".? That's what that message is telling you.

df = data.frame(Conc = c(rep(1, 3), rep(2, 3), rep(5, 3)),
 ??????????????? Time = rep(1:3, 3),
 ??????????????? Value = c(0.91, 0.67, 0.71, 0.91, 0.65, 0.74, 0.95, 
0.67, 0.67))
df$Time <- as.factor(df$Time)
levels(df$Time) = c(1, 4, 24)
df$Conc <- as.factor(df$Conc)
levels(df$Conc) = c(1, 2, 5)
library(ggplot2)
ggplot(df, aes(x=Time, y=Value, colour=Conc, group = Conc)) +
 ? geom_point(size=6) +
 ? geom_line(aes(x=Time, y=Value, colour=Conc)) +
 ? scale_colour_manual(values = c("darkslategray3", "darkslategray4",
 ???????????????????????????????? "deepskyblue4")) +
 ? ggtitle("Working example") +
 ? xlab(expression(bold("Time (h)"))) +
 ? ylab(expression(bold("Concentration (mM)")))

Very? best,


Chris

-- 
Chris Evans (he/him)
Visiting Professor, UDLA, Quito, Ecuador & Honorary Professor, University of Roehampton, London, UK.
Work web site: https://www.psyctc.org/psyctc/
CORE site: http://www.coresystemtrust.org.uk/
Personal site: https://www.psyctc.org/pelerinage2016/
Emeetings (Thursdays): https://www.psyctc.org/psyctc/booking-meetings-with-me/
(Beware: French time, generally an hour ahead of UK)
<https://ombook.psyctc.org/book>


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jul  1 20:57:50 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 1 Jul 2023 11:57:50 -0700
Subject: [R] How to plot both lines and points by group on ggplot2
In-Reply-To: <d8140c35-9a98-dd45-12fb-883b434430fb@psyctc.org>
References: <CAMk+s2R96RiuV0fr16X4jBjPfM8X1mcRUO9kr3HTYdvP9gV_tg@mail.gmail.com>
 <d8140c35-9a98-dd45-12fb-883b434430fb@psyctc.org>
Message-ID: <CAGxFJbRCbiz7N=4O9CNZfe5pX7D2t3dj-KqFvWW4L=maYHiGzw@mail.gmail.com>

... and so ignore my previous missive, as you *did* provide data.
Sorry for the noise.

-- Bert


On Sat, Jul 1, 2023 at 11:53?AM Chris Evans via R-help
<r-help at r-project.org> wrote:
>
> [Whoops, forgot that default reply-to is to the sender.]
>
>
> On 01/07/2023 19:20, Luigi Marongiu wrote:
> > Hello,
> > I have a dataframe with measurements stratified by the concentration
> > of a certain substance. I would like to plot the points of the
> > measures and connect the points within each series of concentrations.
> > When I launch ggplot2 I get the error
> > ```
> > geom_path: Each group consists of only one observation. Do you need to
> > adjust the
> > group aesthetic?
> > ```
> > and no lines are drawn.
> > Where am I going wrong?
> > Thank you
> > Luigi
> >
> > ```
> > df = data.frame(Conc = c(rep(1, 3), rep(2, 3), rep(5, 3)),
> > Time = rep(1:3, 3),
> > Value = c(0.91, 0.67, 0.71, 0.91, 0.65, 0.74, 0.95, 0.67, 0.67))
> > df$Time <- as.factor(df$Time)
> > levels(df$Time) = c(1, 4, 24)
> > df$Conc <- as.factor(df$Conc)
> > levels(df$Conc) = c(1, 2, 5)
> > library(ggplot2)
> > ggplot(df, aes(x=Time, y=Value, colour=Conc)) +
> > geom_point(size=6) +
> > geom_line(aes(x=Time, y=Value, colour=Conc)) +
> > scale_colour_manual(values = c("darkslategray3", "darkslategray4",
> > "deepskyblue4")) +
> > ggtitle("Working example") +
> > xlab(expression(bold("Time (h)"))) +
> > ylab(expression(bold("Concentration (mM)")))
> > ```
>
> If I understand what you want then I think all you need is to add "group
> = Conc".  That's what that message is telling you.
>
> df = data.frame(Conc = c(rep(1, 3), rep(2, 3), rep(5, 3)),
>                  Time = rep(1:3, 3),
>                  Value = c(0.91, 0.67, 0.71, 0.91, 0.65, 0.74, 0.95,
> 0.67, 0.67))
> df$Time <- as.factor(df$Time)
> levels(df$Time) = c(1, 4, 24)
> df$Conc <- as.factor(df$Conc)
> levels(df$Conc) = c(1, 2, 5)
> library(ggplot2)
> ggplot(df, aes(x=Time, y=Value, colour=Conc, group = Conc)) +
>    geom_point(size=6) +
>    geom_line(aes(x=Time, y=Value, colour=Conc)) +
>    scale_colour_manual(values = c("darkslategray3", "darkslategray4",
>                                   "deepskyblue4")) +
>    ggtitle("Working example") +
>    xlab(expression(bold("Time (h)"))) +
>    ylab(expression(bold("Concentration (mM)")))
>
> Very  best,
>
>
> Chris
>
> --
> Chris Evans (he/him)
> Visiting Professor, UDLA, Quito, Ecuador & Honorary Professor, University of Roehampton, London, UK.
> Work web site: https://www.psyctc.org/psyctc/
> CORE site: http://www.coresystemtrust.org.uk/
> Personal site: https://www.psyctc.org/pelerinage2016/
> Emeetings (Thursdays): https://www.psyctc.org/psyctc/booking-meetings-with-me/
> (Beware: French time, generally an hour ahead of UK)
> <https://ombook.psyctc.org/book>
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sat Jul  1 21:24:14 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sat, 1 Jul 2023 20:24:14 +0100
Subject: [R] How to plot both lines and points by group on ggplot2
In-Reply-To: <CAMk+s2R96RiuV0fr16X4jBjPfM8X1mcRUO9kr3HTYdvP9gV_tg@mail.gmail.com>
References: <CAMk+s2R96RiuV0fr16X4jBjPfM8X1mcRUO9kr3HTYdvP9gV_tg@mail.gmail.com>
Message-ID: <0f792256-dfbf-bdf9-a0f6-35a8c4282177@sapo.pt>

?s 19:20 de 01/07/2023, Luigi Marongiu escreveu:
> Hello,
> I have a dataframe with measurements stratified by the concentration
> of a certain substance. I would like to plot the points of the
> measures and connect the points within each series of concentrations.
> When I launch ggplot2 I get the error
> ```
> geom_path: Each group consists of only one observation. Do you need to
> adjust the
> group aesthetic?
> ```
> and no lines are drawn.
> Where am I going wrong?
> Thank you
> Luigi
> 
> ```
> df = data.frame(Conc = c(rep(1, 3), rep(2, 3), rep(5, 3)),
>                  Time = rep(1:3, 3),
>                  Value = c(0.91, 0.67, 0.71, 0.91, 0.65, 0.74, 0.95, 0.67, 0.67))
> df$Time <- as.factor(df$Time)
> levels(df$Time) = c(1, 4, 24)
> df$Conc <- as.factor(df$Conc)
> levels(df$Conc) = c(1, 2, 5)
> library(ggplot2)
> ggplot(df, aes(x=Time, y=Value, colour=Conc)) +
>    geom_point(size=6) +
>    geom_line(aes(x=Time, y=Value, colour=Conc)) +
>    scale_colour_manual(values = c("darkslategray3", "darkslategray4",
>                                   "deepskyblue4")) +
>    ggtitle("Working example") +
>    xlab(expression(bold("Time (h)"))) +
>    ylab(expression(bold("Concentration (mM)")))
> ```
Hello,

Here are two solutions. I have removed the redundant aes() from 
geom_line in both plots.

1. If you do not coerce Time to factor, the x axis will be continuous.
    The plot will be as expected but you wi have to include a 
scale_x_continuous to have the wanted labels.



df = data.frame(Conc = c(rep(1, 3), rep(2, 3), rep(5, 3)),
                 Time = rep(1:3, 3),
                 Value = c(0.91, 0.67, 0.71, 0.91, 0.65, 0.74, 0.95, 
0.67, 0.67))

library(ggplot2)

df$Conc <- factor(df$Conc, levels = c(1, 2, 5))

ggplot(df, aes(x=Time, y=Value, colour=Conc)) +
   geom_point(size=6) +
   geom_line() +
   scale_colour_manual(values = c("darkslategray3", "darkslategray4", 
"deepskyblue4")) +
   scale_x_continuous(breaks = 1:3, labels = c(1, 2, 24)) +
   ggtitle("Working example") +
   xlab(expression(bold("Time (h)"))) +
   ylab(expression(bold("Concentration (mM)")))




2. Time is coerced to factor. Then, tell geom_line the data is grouped 
by Conc. This is probably the solution you should use.



df$Time <- factor(df$Time, labels = c(1, 4, 24))

ggplot(df, aes(x=Time, y=Value, colour=Conc)) +
   geom_point(size=6) +
   geom_line(aes(group = Conc)) +
   scale_colour_manual(values = c("darkslategray3", "darkslategray4", 
"deepskyblue4")) +
   ggtitle("Working example") +
   xlab(expression(bold("Time (h)"))) +
   ylab(expression(bold("Concentration (mM)")))



Hope this helps,

Rui Barradas


From m@rong|u@|u|g| @end|ng |rom gm@||@com  Sun Jul  2 07:31:57 2023
From: m@rong|u@|u|g| @end|ng |rom gm@||@com (Luigi Marongiu)
Date: Sun, 2 Jul 2023 07:31:57 +0200
Subject: [R] How to plot both lines and points by group on ggplot2
In-Reply-To: <9bf6e614-0df4-fd45-a40c-50302a26d5a9@psyctc.org>
References: <CAMk+s2R96RiuV0fr16X4jBjPfM8X1mcRUO9kr3HTYdvP9gV_tg@mail.gmail.com>
 <9bf6e614-0df4-fd45-a40c-50302a26d5a9@psyctc.org>
Message-ID: <CAMk+s2QgD+q4x2nty=5mO7zjVG2Vr8fwqkoF0kjODFtUSLFP-w@mail.gmail.com>

Thank you that is exactly it!
The problem was to connect each point of the series 'Conc' with a line.
Best regards
Luigi

On Sat, Jul 1, 2023 at 8:33?PM Chris Evans <chrishold at psyctc.org> wrote:
>
>
> On 01/07/2023 19:20, Luigi Marongiu wrote:
> > Hello,
> > I have a dataframe with measurements stratified by the concentration
> > of a certain substance. I would like to plot the points of the
> > measures and connect the points within each series of concentrations.
> > When I launch ggplot2 I get the error
> > ```
> > geom_path: Each group consists of only one observation. Do you need to
> > adjust the
> > group aesthetic?
> > ```
> > and no lines are drawn.
> > Where am I going wrong?
> > Thank you
> > Luigi
> >
> > ```
> > df = data.frame(Conc = c(rep(1, 3), rep(2, 3), rep(5, 3)),
> >                  Time = rep(1:3, 3),
> >                  Value = c(0.91, 0.67, 0.71, 0.91, 0.65, 0.74, 0.95, 0.67, 0.67))
> > df$Time <- as.factor(df$Time)
> > levels(df$Time) = c(1, 4, 24)
> > df$Conc <- as.factor(df$Conc)
> > levels(df$Conc) = c(1, 2, 5)
> > library(ggplot2)
> > ggplot(df, aes(x=Time, y=Value, colour=Conc)) +
> >    geom_point(size=6) +
> >    geom_line(aes(x=Time, y=Value, colour=Conc)) +
> >    scale_colour_manual(values = c("darkslategray3", "darkslategray4",
> >                                   "deepskyblue4")) +
> >    ggtitle("Working example") +
> >    xlab(expression(bold("Time (h)"))) +
> >    ylab(expression(bold("Concentration (mM)")))
> > ```
>
> If I understand what you want then I think all you need is to add "group
> = Conc".  That's what that message is telling you.
>
> df = data.frame(Conc = c(rep(1, 3), rep(2, 3), rep(5, 3)),
>                  Time = rep(1:3, 3),
>                  Value = c(0.91, 0.67, 0.71, 0.91, 0.65, 0.74, 0.95,
> 0.67, 0.67))
> df$Time <- as.factor(df$Time)
> levels(df$Time) = c(1, 4, 24)
> df$Conc <- as.factor(df$Conc)
> levels(df$Conc) = c(1, 2, 5)
> library(ggplot2)
> ggplot(df, aes(x=Time, y=Value, colour=Conc, group = Conc)) +
>    geom_point(size=6) +
>    geom_line(aes(x=Time, y=Value, colour=Conc)) +
>    scale_colour_manual(values = c("darkslategray3", "darkslategray4",
>                                   "deepskyblue4")) +
>    ggtitle("Working example") +
>    xlab(expression(bold("Time (h)"))) +
>    ylab(expression(bold("Concentration (mM)")))
>
> Very  best,
>
>
> Chris
>
> --
> Chris Evans (he/him)
> Visiting Professor, UDLA, Quito, Ecuador & Honorary Professor,
> University of Roehampton, London, UK.
> Work web site: https://www.psyctc.org/psyctc/
> CORE site: http://www.coresystemtrust.org.uk/
> Personal site: https://www.psyctc.org/pelerinage2016/
> Emeetings (Thursdays):
> https://www.psyctc.org/psyctc/booking-meetings-with-me/
> (Beware: French time, generally an hour ahead of UK)
> <https://ombook.psyctc.org/book>



-- 
Best regards,
Luigi


From r@v|@v@r@dh@n @end|ng |rom jhu@edu  Sat Jul  1 19:15:48 2023
From: r@v|@v@r@dh@n @end|ng |rom jhu@edu (Ravi Varadhan)
Date: Sat, 1 Jul 2023 17:15:48 +0000
Subject: [R] Number of Cores limited to two in CRAN
Message-ID: <SJ0PR01MB6400F14976E2657491EF473CF22BA@SJ0PR01MB6400.prod.exchangelabs.com>

Hi,
I am developing a package where I would like to utilize multiple cores for parallel computing.  However, I get an error message when I run R CMD check --as-cran.

I read that CRAN limits the number of cores to 2.  Is this correct? Is there any way to overcome this limitation?

Thank you,
Ravi

	[[alternative HTML version deleted]]


From r@v|@v@r@dh@n @end|ng |rom jhu@edu  Sat Jul  1 19:46:43 2023
From: r@v|@v@r@dh@n @end|ng |rom jhu@edu (Ravi Varadhan)
Date: Sat, 1 Jul 2023 17:46:43 +0000
Subject: [R] Number of Cores limited to two in CRAN
In-Reply-To: <SJ0PR01MB6400F14976E2657491EF473CF22BA@SJ0PR01MB6400.prod.exchangelabs.com>
References: <SJ0PR01MB6400F14976E2657491EF473CF22BA@SJ0PR01MB6400.prod.exchangelabs.com>
Message-ID: <SJ0PR01MB6400A88A7DA6AFEE1C8DA7A0F22BA@SJ0PR01MB6400.prod.exchangelabs.com>

This is the specific error messsage from R CMD check --as-cran


Error in .check_ncores(length(names)) : 16 simultaneous processes spawned
  Calls: prepost -> makeCluster -> makePSOCKcluster -> .check_ncores
  Execution halted


Thanks,
Ravi

________________________________
From: Ravi Varadhan
Sent: Saturday, July 1, 2023 1:15 PM
To: R-Help <r-help at r-project.org>
Subject: Number of Cores limited to two in CRAN

Hi,
I am developing a package where I would like to utilize multiple cores for parallel computing.  However, I get an error message when I run R CMD check --as-cran.

I read that CRAN limits the number of cores to 2.  Is this correct? Is there any way to overcome this limitation?

Thank you,
Ravi

	[[alternative HTML version deleted]]


From henr|k@bengt@@on @end|ng |rom gm@||@com  Sun Jul  2 10:33:34 2023
From: henr|k@bengt@@on @end|ng |rom gm@||@com (Henrik Bengtsson)
Date: Sun, 2 Jul 2023 10:33:34 +0200
Subject: [R] Number of Cores limited to two in CRAN
In-Reply-To: <SJ0PR01MB6400A88A7DA6AFEE1C8DA7A0F22BA@SJ0PR01MB6400.prod.exchangelabs.com>
References: <SJ0PR01MB6400F14976E2657491EF473CF22BA@SJ0PR01MB6400.prod.exchangelabs.com>
 <SJ0PR01MB6400A88A7DA6AFEE1C8DA7A0F22BA@SJ0PR01MB6400.prod.exchangelabs.com>
Message-ID: <CAFDcVCQ2Ej825e4q=A8pLUqvD9D-DN_PkUTUJQt1svWzLO-nTA@mail.gmail.com>

Short answer: You don't want to override that limit in your R package.
Don't do it.

Long answer: You'll find the reason for this in the 'CRAN Repository
Policy' (https://cran.r-project.org/web/packages/policies.html).
Specifically, the following passage:

"Checking the package should take as little CPU time as possible, as
the CRAN check farm is a very limited resource and there are thousands
of packages. Long-running tests and vignette code can be made optional
for checking, but do ensure that the checks that are left do exercise
all the features of the package.

**If running a package uses multiple threads/cores it must never use
more than two simultaneously: the check farm is a shared resource and
will typically be running many checks simultaneously.**

Examples should run for no more than a few seconds each: they are
intended to exemplify to the would-be user how to use the functions in
the package."

Basically, you can use two cores to demonstrate or validate (e.g. in
package tests) that your code *can* run in parallel, but you must not
use more than that to demonstrate that your code can "run super fast".

Even-longer answer: See my blog post 'Please Avoid detectCores() in
your R Packages' (https://www.jottr.org/2022/12/05/avoid-detectcores/)
from 2022-12-05 for even more reasons.

/Henrik

On Sun, Jul 2, 2023 at 9:55?AM Ravi Varadhan via R-help
<r-help at r-project.org> wrote:
>
> This is the specific error messsage from R CMD check --as-cran
>
>
> Error in .check_ncores(length(names)) : 16 simultaneous processes spawned
>   Calls: prepost -> makeCluster -> makePSOCKcluster -> .check_ncores
>   Execution halted
>
>
> Thanks,
> Ravi
>
> ________________________________
> From: Ravi Varadhan
> Sent: Saturday, July 1, 2023 1:15 PM
> To: R-Help <r-help at r-project.org>
> Subject: Number of Cores limited to two in CRAN
>
> Hi,
> I am developing a package where I would like to utilize multiple cores for parallel computing.  However, I get an error message when I run R CMD check --as-cran.
>
> I read that CRAN limits the number of cores to 2.  Is this correct? Is there any way to overcome this limitation?
>
> Thank you,
> Ravi
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@v|@v@r@dh@n @end|ng |rom jhu@edu  Sun Jul  2 14:40:22 2023
From: r@v|@v@r@dh@n @end|ng |rom jhu@edu (Ravi Varadhan)
Date: Sun, 2 Jul 2023 12:40:22 +0000
Subject: [R] Number of Cores limited to two in CRAN
In-Reply-To: <CAFDcVCQ2Ej825e4q=A8pLUqvD9D-DN_PkUTUJQt1svWzLO-nTA@mail.gmail.com>
References: <SJ0PR01MB6400F14976E2657491EF473CF22BA@SJ0PR01MB6400.prod.exchangelabs.com>
 <SJ0PR01MB6400A88A7DA6AFEE1C8DA7A0F22BA@SJ0PR01MB6400.prod.exchangelabs.com>
 <CAFDcVCQ2Ej825e4q=A8pLUqvD9D-DN_PkUTUJQt1svWzLO-nTA@mail.gmail.com>
Message-ID: <SJ0PR01MB6400D508E3D324C426301023F228A@SJ0PR01MB6400.prod.exchangelabs.com>

Dear Henrik,
Thank you!  This is quite helpful, especially your longer blog post.

Best regards,
Ravi
________________________________
From: Henrik Bengtsson <henrik.bengtsson at gmail.com>
Sent: Sunday, July 2, 2023 4:33 AM
To: Ravi Varadhan <ravi.varadhan at jhu.edu>
Cc: R-Help <r-help at r-project.org>
Subject: Re: [R] Number of Cores limited to two in CRAN


      External Email - Use Caution



Short answer: You don't want to override that limit in your R package.
Don't do it.

Long answer: You'll find the reason for this in the 'CRAN Repository
Policy' (https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran.r-project.org%2Fweb%2Fpackages%2Fpolicies.html&data=05%7C01%7Cravi.varadhan%40jhu.edu%7Cbf56c90173504853907408db7ad70f08%7C9fa4f438b1e6473b803f86f8aedf0dec%7C0%7C0%7C638238836311718317%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=KDB6%2BqMgn4KrKtVEgWezfRY9isT926wLwZGg5yuDKI4%3D&reserved=0<https://cran.r-project.org/web/packages/policies.html>).
Specifically, the following passage:

"Checking the package should take as little CPU time as possible, as
the CRAN check farm is a very limited resource and there are thousands
of packages. Long-running tests and vignette code can be made optional
for checking, but do ensure that the checks that are left do exercise
all the features of the package.

**If running a package uses multiple threads/cores it must never use
more than two simultaneously: the check farm is a shared resource and
will typically be running many checks simultaneously.**

Examples should run for no more than a few seconds each: they are
intended to exemplify to the would-be user how to use the functions in
the package."

Basically, you can use two cores to demonstrate or validate (e.g. in
package tests) that your code *can* run in parallel, but you must not
use more than that to demonstrate that your code can "run super fast".

Even-longer answer: See my blog post 'Please Avoid detectCores() in
your R Packages' (https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.jottr.org%2F2022%2F12%2F05%2Favoid-detectcores%2F&data=05%7C01%7Cravi.varadhan%40jhu.edu%7Cbf56c90173504853907408db7ad70f08%7C9fa4f438b1e6473b803f86f8aedf0dec%7C0%7C0%7C638238836311718317%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=xPkA6JCccHZcST76lWa6xFYWWKBOZYQCOezF5t4YVPM%3D&reserved=0<https://www.jottr.org/2022/12/05/avoid-detectcores/>)
from 2022-12-05 for even more reasons.

/Henrik

On Sun, Jul 2, 2023 at 9:55?AM Ravi Varadhan via R-help
<r-help at r-project.org> wrote:
>
> This is the specific error messsage from R CMD check --as-cran
>
>
> Error in .check_ncores(length(names)) : 16 simultaneous processes spawned
>   Calls: prepost -> makeCluster -> makePSOCKcluster -> .check_ncores
>   Execution halted
>
>
> Thanks,
> Ravi
>
> ________________________________
> From: Ravi Varadhan
> Sent: Saturday, July 1, 2023 1:15 PM
> To: R-Help <r-help at r-project.org>
> Subject: Number of Cores limited to two in CRAN
>
> Hi,
> I am developing a package where I would like to utilize multiple cores for parallel computing.  However, I get an error message when I run R CMD check --as-cran.
>
> I read that CRAN limits the number of cores to 2.  Is this correct? Is there any way to overcome this limitation?
>
> Thank you,
> Ravi
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Cravi.varadhan%40jhu.edu%7Cbf56c90173504853907408db7ad70f08%7C9fa4f438b1e6473b803f86f8aedf0dec%7C0%7C0%7C638238836311873942%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=KTNwXurNvbEhviVf15RF0la%2FvUVGBW60yuyVVy9Umxc%3D&reserved=0<https://stat.ethz.ch/mailman/listinfo/r-help>
> PLEASE do read the posting guide https://nam02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Cravi.varadhan%40jhu.edu%7Cbf56c90173504853907408db7ad70f08%7C9fa4f438b1e6473b803f86f8aedf0dec%7C0%7C0%7C638238836311873942%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=HvGb20UiUey9O3plynLiRmHQtqpjfrndk2iPfvleT3Q%3D&reserved=0<http://www.r-project.org/posting-guide.html>
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From |@go@g|ne @end|ng |rom @jd@e@  Mon Jul  3 08:36:27 2023
From: |@go@g|ne @end|ng |rom @jd@e@ (=?iso-8859-1?Q?Iago_Gin=E9_V=E1zquez?=)
Date: Mon, 3 Jul 2023 06:36:27 +0000
Subject: [R] Help/documentation on Rgui
Message-ID: <AM6PR02MB4423F1C4ED2FB19545C78FC09429A@AM6PR02MB4423.eurprd02.prod.outlook.com>

Hi all,

Where can I find a detailed document(ation) on the use of Rgui.exe. The most detailed I found is https://cran.r-project.org/doc/manuals/r-release/R-ints.html#GUI-consoles, where there is almost nothing.

Actually I want to know how to open Rgui.exe (let's say, from a terminal [mainly in Windows], even better, through the ViM plugin NVim-R) with a set of specific preferences, like a dark background or specific text colour and size, which I see I can modify once it is open.

Thank you for your help.

Iago


	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Jul  3 09:42:56 2023
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 3 Jul 2023 07:42:56 +0000
Subject: [R] Help/documentation on Rgui
In-Reply-To: <AM6PR02MB4423F1C4ED2FB19545C78FC09429A@AM6PR02MB4423.eurprd02.prod.outlook.com>
References: <AM6PR02MB4423F1C4ED2FB19545C78FC09429A@AM6PR02MB4423.eurprd02.prod.outlook.com>
Message-ID: <89e64ee67c91423cac3cb642c353ee1f@SRVEXCHCM1302.precheza.cz>

Hi

I am not sure about opening Rgui in terminal but for customising Rgui
appearance you can modify Rconsole and Rprofile or Rprofile.site which you
should find in etc folder of your R installation.

https://stat.ethz.ch/R-manual/R-devel/library/utils/html/Rconsole.html
https://rdrr.io/r/utils/Rconsole.html
and "Initialization at Start of an R Session" in R help
?Rprofile

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Iago Gin?
> V?zquez
> Sent: Monday, July 3, 2023 8:36 AM
> To: r-help at r-project.org
> Subject: [R] Help/documentation on Rgui
> 
> Hi all,
> 
> Where can I find a detailed document(ation) on the use of Rgui.exe. The
most
> detailed I found is https://cran.r-project.org/doc/manuals/r-release/R-
> ints.html#GUI-consoles, where there is almost nothing.
> 
> Actually I want to know how to open Rgui.exe (let's say, from a terminal
> [mainly in Windows], even better, through the ViM plugin NVim-R) with a
set
> of specific preferences, like a dark background or specific text colour
and size,
> which I see I can modify once it is open.
> 
> Thank you for your help.
> 
> Iago
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From |@go@g|ne @end|ng |rom @jd@e@  Mon Jul  3 09:47:52 2023
From: |@go@g|ne @end|ng |rom @jd@e@ (=?iso-8859-1?Q?Iago_Gin=E9_V=E1zquez?=)
Date: Mon, 3 Jul 2023 07:47:52 +0000
Subject: [R] Help/documentation on Rgui
Message-ID: <AM6PR02MB44235C1EA9517904E87741439429A@AM6PR02MB4423.eurprd02.prod.outlook.com>

Thank you Petr, great!

Best,
Iago

________________________________
De: PIKAL Petr
Enviat: Dilluns, 3-juliol 3e000 2023 9:42
Per a: Iago Gin? V?zquez; r-help at r-project.org
Assumpte: RE: Help/documentation on Rgui

Hi

I am not sure about opening Rgui in terminal but for customising Rgui
appearance you can modify Rconsole and Rprofile or Rprofile.site which you
should find in etc folder of your R installation.

https://stat.ethz.ch/R-manual/R-devel/library/utils/html/Rconsole.html
https://rdrr.io/r/utils/Rconsole.html
and "Initialization at Start of an R Session" in R help
?Rprofile

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Iago Gin?
> V?zquez
> Sent: Monday, July 3, 2023 8:36 AM
> To: r-help at r-project.org
> Subject: [R] Help/documentation on Rgui
>
> Hi all,
>
> Where can I find a detailed document(ation) on the use of Rgui.exe. The
most
> detailed I found is https://cran.r-project.org/doc/manuals/r-release/R-
> ints.html#GUI-consoles, where there is almost nothing.
>
> Actually I want to know how to open Rgui.exe (let's say, from a terminal
> [mainly in Windows], even better, through the ViM plugin NVim-R) with a
set
> of specific preferences, like a dark background or specific text colour
and size,
> which I see I can modify once it is open.
>
> Thank you for your help.
>
> Iago
>
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @nupty@g| @end|ng |rom gm@||@com  Mon Jul  3 11:08:17 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Mon, 3 Jul 2023 14:38:17 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CA+8X3fV8SxdDcaQ=Sd7rg6WmJ3xX0wgdjCSSf9wZ6zpaz9vDPQ@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CA+8X3fV8SxdDcaQ=Sd7rg6WmJ3xX0wgdjCSSf9wZ6zpaz9vDPQ@mail.gmail.com>
Message-ID: <CAFL9eunJR8sRQBtTpJD0PrZf3P7FXw+u+4FmXqmS+zv35HmbUg@mail.gmail.com>

Thanks Jim, thanks everyone. I was caught up with work and moving home, so
a delay in response. I tried running the code you provided and it is not
running well in my R-Studio setup. It is giving errors and not producing
plots. I don't yet understand all the code well yet, so I need to work on
it and then get back to you all. Sorry for not posting data from a R
dataframe. My data is still in Excel. I organized data in Excel almost
exactly (look wise) as the output from Stata log file (text) for a
"tabulate" command for a survey dataset. I don't yet understand a good way
to organize this data in R, so I cannot send it to you now. Let me do some
work on this, understand the R code you have given, and get back to you in
a few days. I have not been using R lately, but I think the graph I am
trying to make will be done better and easier in R than in Stata. Thank you
all for all your help. Let me do some work and get back to you.


On Fri, 30 Jun 2023 at 04:41, Jim Lemon <drjimlemon at gmail.com> wrote:

> Okay. Here is a modification that does four single line plots.
>
> at_df<-read.table(text=
>  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None Bank_Current
> Bank_Savings Bank_NA
>  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
>  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
>  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
>  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
>  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
>  No_Answer 9 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
>  header=TRUE,stringsAsFactors=FALSE)
> at_df<-at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA")]
> png("Income_pcts.png",height=700)
> par(mfrow=c(4,1))
> plot(at_df[,"Bank_Current"],
>  type="l",lwd=3,main="Bsnk_Current",
>  xlab="Income",ylab="%",xaxt="n")
> axis(1,at=1:5,labels=at_df$Income)
> plot(at_df[,"Bank_Savings"],
>  type="l",lwd=3,main="Bank_Sasvings",
>  xlab="Income",ylab="%",xaxt="n")
> axis(1,at=1:5,labels=at_df$Income)
> plot(at_df[,"MF_Equity"],
>  type="l",lwd=3,main="MF_Equity",
>  xlab="Income",ylab="%",xaxt="n")
> axis(1,at=1:5,labels=at_df$Income)
> plot(at_df[,"MF_Debt"],
>  type="l",lwd=3,main="MF_Debt",
>  xlab="Income",ylab="%",xaxt="n")
> axis(1,at=1:5,labels=at_df$Income)
> dev.off()
>
> Jim
>
> On Thu, Jun 29, 2023 at 1:49?PM Anupam Tyagi <anuptyagi at gmail.com> wrote:
> >
> > Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope you have
> > been well.
> >
> > Pikal, thanks. Your solution may be close to what I want. I did not know
> > that I was posting in HTML. I just copied the data from Excel and posted
> in
> > the email in Gmail. The data is still in Excel, because I have not yet
> > figured out what is a good way to organize it in R. I am posting it again
> > below as text. These are rows in Excel: 1,2,3,5,9 after MF are income
> > categories and No Answer category (9). Down the second column are
> > categories of MF and Bank AC. Rest of the columns are percentages.
> >
> > Jim, thanks for the graph. I am looking to plot only one line (category)
> > each in many small plots on the same page. I don't want to compare
> > different categories on the same graph as you do, but see how each
> category
> > varies by income, one category in each graph. Like Excel does with
> > Sparklines (Top menu: Insert, Sparklines, Lines). I have many categories
> > for many variables. I am only showing two MF and Bank AC.
> >
> > Income $10 $25 $40 $75 > $75 No Answer
> > MF 1 2 3 4 5 9
> > None 1 3.05 2.29 2.24 1.71 1.30 2.83
> > Equity 2 29.76 28.79 29.51 28.90 31.67 36.77
> > Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
> > Hybrid 4 36.00 36.27 33.94 33.74 29.44 27.25
> > Bank AC
> > None 1 46.54 54.01 59.1 62.17 67.67 60.87
> > Current 2 24.75 24.4 25 24.61 24.02 21.09
> > Savings 3 25.4 18.7 29 11.48 7.103 13.46
> > No Answer 9 3.307 2.891 13.4 1.746 1.208 4.577
> >
> >
> > On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com> wrote:
> >
> > > Hi Anupam,
> > > Haven't heard from you in a long time. Perhaps you want something like
> > > this:
> > >
> > > at_df<-read.table(text=
> > >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None Bank_Current
> > > Bank_Savings Bank_NA
> > >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> > >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> > >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> > >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> > >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
> > >  No_Answer 9 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> > >  header=TRUE,stringsAsFactors=FALSE)
> > > at_df<-at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA")]
> > > png("MF_Bank.png",height=600)
> > > par(mfrow=c(2,1))
> > > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
> > >  type="l",col=1:4,lty=1:4,lwd=3,
> > >  main="Percentages by Income and MF type",
> > >  xlab="Income",ylab="Percentage of group",xaxt="n")
> > > axis(1,at=1:5,labels=at_df$Income)
> > > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
> > >  lty=1:4,lwd=3,col=1:4)
> > > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
> > >  type="l",col=1:3,lty=1:4,lwd=3,
> > >  main="Percentages by Income and Bank type",
> > >  xlab="Income",ylab="Percentage of group",xaxt="n")
> > > axis(1,at=1:5,labels=at_df$Income)
> > > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
> > >  lty=1:4,lwd=3,col=1:3)
> > > dev.off()
> > >
> > > Jim
> > >
> > > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi <anuptyagi at gmail.com>
> wrote:
> > > >
> > > > Hello,
> > > >
> > > > I want to plot the following kind of data (percentage of respondents
> > > from a
> > > > survey) that varies by Income into many small *line* graphs in a
> panel of
> > > > graphs. I want to omit "No Answer" categories. I want to see how
> each one
> > > > of the categories (percentages), "None", " Equity", etc. varies by
> > > Income.
> > > > How can I do this? How to organize the data well and how to plot? I
> > > thought
> > > > Lattice may be a good package to plot this, but I don't know for
> sure. I
> > > > prefer to do this in Base-R if possible, but I am open to ggplot. Any
> > > ideas
> > > > will be helpful.
> > > >
> > > > Income
> > > > $10 $25 $40 $75 > $75 No Answer
> > > > MF 1 2 3 4 5 9
> > > > None 1 3.05 2.29 2.24 1.71 1.30 2.83
> > > > Equity 2 29.76 28.79 29.51 28.90 31.67 36.77
> > > > Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
> > > > Hybrid 4 36.00 36.27 33.94 33.74 29.44 27.25
> > > > Bank AC
> > > > None 1 46.54 54.01 59.1 62.17 67.67 60.87
> > > > Current 2 24.75 24.4 25 24.61 24.02 21.09
> > > > Savings 3 25.4 18.7 29 11.48 7.103 13.46
> > > > No Answer 9 3.307 2.891 13.4 1.746 1.208 4.577
> > > >
> > > > Thanks.
> > > > --
> > > > Anupam.
> > > >
> > > >         [[alternative HTML version deleted]]
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> >
> > --
> > Anupam.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>


-- 
Anupam.

	[[alternative HTML version deleted]]


From @nupty@g| @end|ng |rom gm@||@com  Mon Jul  3 11:53:31 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Mon, 3 Jul 2023 15:23:31 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CAFL9eumiW_+fa8RNk=yWEw8N7Uz0rK1mbbuaqXOT1FymEtRoVQ@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CA+8X3fV8SxdDcaQ=Sd7rg6WmJ3xX0wgdjCSSf9wZ6zpaz9vDPQ@mail.gmail.com>
 <CAFL9eunJR8sRQBtTpJD0PrZf3P7FXw+u+4FmXqmS+zv35HmbUg@mail.gmail.com>
 <CAFL9eumiW_+fa8RNk=yWEw8N7Uz0rK1mbbuaqXOT1FymEtRoVQ@mail.gmail.com>
Message-ID: <CAFL9eumct3yOEKkhsc4DPCgj=_0rRbNLNexH7tro35uT5=v8_A@mail.gmail.com>

Attached is another example plot, that is better than the earlier one.

On Mon, 3 Jul 2023 at 15:21, Anupam Tyagi <anuptyagi at gmail.com> wrote:

> I thought maybe I can share with you how the data looks in Excel, and an
> example plot I found on the web that looks similar to what I want to plot.
> These are attached to this email as *.png files. I am trying to see (plot)
> how each row of data (percentages) varies with income, making many small
> graphs in the same plot. For each row of data there will be one graph. I
> can manually delete the "No Answer" rows in Excel, if that is the best
> solution. I want the output to look like the sparklines in column "I" of
> attached Excel screenshot, with labelling of each graphs. This is similar
> to the attached "Example_plot". I thought this could be done with Lattice,
> or base-R, or ggplot easily, but this turning out to be more difficult than
> I had thought.
>
> On Mon, 3 Jul 2023 at 14:38, Anupam Tyagi <anuptyagi at gmail.com> wrote:
>
>> Thanks Jim, thanks everyone. I was caught up with work and moving home,
>> so a delay in response. I tried running the code you provided and it is not
>> running well in my R-Studio setup. It is giving errors and not producing
>> plots. I don't yet understand all the code well yet, so I need to work on
>> it and then get back to you all. Sorry for not posting data from a R
>> dataframe. My data is still in Excel. I organized data in Excel almost
>> exactly (look wise) as the output from Stata log file (text) for a
>> "tabulate" command for a survey dataset. I don't yet understand a good way
>> to organize this data in R, so I cannot send it to you now. Let me do some
>> work on this, understand the R code you have given, and get back to you in
>> a few days. I have not been using R lately, but I think the graph I am
>> trying to make will be done better and easier in R than in Stata. Thank you
>> all for all your help. Let me do some work and get back to you.
>>
>>
>> On Fri, 30 Jun 2023 at 04:41, Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>>> Okay. Here is a modification that does four single line plots.
>>>
>>> at_df<-read.table(text=
>>>  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None Bank_Current
>>> Bank_Savings Bank_NA
>>>  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
>>>  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
>>>  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
>>>  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
>>>  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
>>>  No_Answer 9 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
>>>  header=TRUE,stringsAsFactors=FALSE)
>>> at_df<-at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA")]
>>> png("Income_pcts.png",height=700)
>>> par(mfrow=c(4,1))
>>> plot(at_df[,"Bank_Current"],
>>>  type="l",lwd=3,main="Bsnk_Current",
>>>  xlab="Income",ylab="%",xaxt="n")
>>> axis(1,at=1:5,labels=at_df$Income)
>>> plot(at_df[,"Bank_Savings"],
>>>  type="l",lwd=3,main="Bank_Sasvings",
>>>  xlab="Income",ylab="%",xaxt="n")
>>> axis(1,at=1:5,labels=at_df$Income)
>>> plot(at_df[,"MF_Equity"],
>>>  type="l",lwd=3,main="MF_Equity",
>>>  xlab="Income",ylab="%",xaxt="n")
>>> axis(1,at=1:5,labels=at_df$Income)
>>> plot(at_df[,"MF_Debt"],
>>>  type="l",lwd=3,main="MF_Debt",
>>>  xlab="Income",ylab="%",xaxt="n")
>>> axis(1,at=1:5,labels=at_df$Income)
>>> dev.off()
>>>
>>> Jim
>>>
>>> On Thu, Jun 29, 2023 at 1:49?PM Anupam Tyagi <anuptyagi at gmail.com>
>>> wrote:
>>> >
>>> > Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope you
>>> have
>>> > been well.
>>> >
>>> > Pikal, thanks. Your solution may be close to what I want. I did not
>>> know
>>> > that I was posting in HTML. I just copied the data from Excel and
>>> posted in
>>> > the email in Gmail. The data is still in Excel, because I have not yet
>>> > figured out what is a good way to organize it in R. I am posting it
>>> again
>>> > below as text. These are rows in Excel: 1,2,3,5,9 after MF are income
>>> > categories and No Answer category (9). Down the second column are
>>> > categories of MF and Bank AC. Rest of the columns are percentages.
>>> >
>>> > Jim, thanks for the graph. I am looking to plot only one line
>>> (category)
>>> > each in many small plots on the same page. I don't want to compare
>>> > different categories on the same graph as you do, but see how each
>>> category
>>> > varies by income, one category in each graph. Like Excel does with
>>> > Sparklines (Top menu: Insert, Sparklines, Lines). I have many
>>> categories
>>> > for many variables. I am only showing two MF and Bank AC.
>>> >
>>> > Income $10 $25 $40 $75 > $75 No Answer
>>> > MF 1 2 3 4 5 9
>>> > None 1 3.05 2.29 2.24 1.71 1.30 2.83
>>> > Equity 2 29.76 28.79 29.51 28.90 31.67 36.77
>>> > Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
>>> > Hybrid 4 36.00 36.27 33.94 33.74 29.44 27.25
>>> > Bank AC
>>> > None 1 46.54 54.01 59.1 62.17 67.67 60.87
>>> > Current 2 24.75 24.4 25 24.61 24.02 21.09
>>> > Savings 3 25.4 18.7 29 11.48 7.103 13.46
>>> > No Answer 9 3.307 2.891 13.4 1.746 1.208 4.577
>>> >
>>> >
>>> > On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com> wrote:
>>> >
>>> > > Hi Anupam,
>>> > > Haven't heard from you in a long time. Perhaps you want something
>>> like
>>> > > this:
>>> > >
>>> > > at_df<-read.table(text=
>>> > >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None
>>> Bank_Current
>>> > > Bank_Savings Bank_NA
>>> > >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
>>> > >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
>>> > >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
>>> > >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
>>> > >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
>>> > >  No_Answer 9 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
>>> > >  header=TRUE,stringsAsFactors=FALSE)
>>> > >
>>> at_df<-at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA")]
>>> > > png("MF_Bank.png",height=600)
>>> > > par(mfrow=c(2,1))
>>> > > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
>>> > >  type="l",col=1:4,lty=1:4,lwd=3,
>>> > >  main="Percentages by Income and MF type",
>>> > >  xlab="Income",ylab="Percentage of group",xaxt="n")
>>> > > axis(1,at=1:5,labels=at_df$Income)
>>> > > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
>>> > >  lty=1:4,lwd=3,col=1:4)
>>> > > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
>>> > >  type="l",col=1:3,lty=1:4,lwd=3,
>>> > >  main="Percentages by Income and Bank type",
>>> > >  xlab="Income",ylab="Percentage of group",xaxt="n")
>>> > > axis(1,at=1:5,labels=at_df$Income)
>>> > > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
>>> > >  lty=1:4,lwd=3,col=1:3)
>>> > > dev.off()
>>> > >
>>> > > Jim
>>> > >
>>> > > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi <anuptyagi at gmail.com>
>>> wrote:
>>> > > >
>>> > > > Hello,
>>> > > >
>>> > > > I want to plot the following kind of data (percentage of
>>> respondents
>>> > > from a
>>> > > > survey) that varies by Income into many small *line* graphs in a
>>> panel of
>>> > > > graphs. I want to omit "No Answer" categories. I want to see how
>>> each one
>>> > > > of the categories (percentages), "None", " Equity", etc. varies by
>>> > > Income.
>>> > > > How can I do this? How to organize the data well and how to plot? I
>>> > > thought
>>> > > > Lattice may be a good package to plot this, but I don't know for
>>> sure. I
>>> > > > prefer to do this in Base-R if possible, but I am open to ggplot.
>>> Any
>>> > > ideas
>>> > > > will be helpful.
>>> > > >
>>> > > > Income
>>> > > > $10 $25 $40 $75 > $75 No Answer
>>> > > > MF 1 2 3 4 5 9
>>> > > > None 1 3.05 2.29 2.24 1.71 1.30 2.83
>>> > > > Equity 2 29.76 28.79 29.51 28.90 31.67 36.77
>>> > > > Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
>>> > > > Hybrid 4 36.00 36.27 33.94 33.74 29.44 27.25
>>> > > > Bank AC
>>> > > > None 1 46.54 54.01 59.1 62.17 67.67 60.87
>>> > > > Current 2 24.75 24.4 25 24.61 24.02 21.09
>>> > > > Savings 3 25.4 18.7 29 11.48 7.103 13.46
>>> > > > No Answer 9 3.307 2.891 13.4 1.746 1.208 4.577
>>> > > >
>>> > > > Thanks.
>>> > > > --
>>> > > > Anupam.
>>> > > >
>>> > > >         [[alternative HTML version deleted]]
>>> > > >
>>> > > > ______________________________________________
>>> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> > > > https://stat.ethz.ch/mailman/listinfo/r-help
>>> > > > PLEASE do read the posting guide
>>> > > http://www.R-project.org/posting-guide.html
>>> > > > and provide commented, minimal, self-contained, reproducible code.
>>> > >
>>> >
>>> >
>>> > --
>>> > Anupam.
>>> >
>>> >         [[alternative HTML version deleted]]
>>> >
>>> > ______________________________________________
>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> > https://stat.ethz.ch/mailman/listinfo/r-help
>>> > PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> > and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>
>> --
>> Anupam.
>>
>>
>
> --
> Anupam.
>
>

-- 
Anupam.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Example_plot2.png
Type: image/png
Size: 90776 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20230703/6c120593/attachment.png>

From petr@p|k@| @end|ng |rom prechez@@cz  Mon Jul  3 12:51:12 2023
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 3 Jul 2023 10:51:12 +0000
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CAFL9eumct3yOEKkhsc4DPCgj=_0rRbNLNexH7tro35uT5=v8_A@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CA+8X3fV8SxdDcaQ=Sd7rg6WmJ3xX0wgdjCSSf9wZ6zpaz9vDPQ@mail.gmail.com>
 <CAFL9eunJR8sRQBtTpJD0PrZf3P7FXw+u+4FmXqmS+zv35HmbUg@mail.gmail.com>
 <CAFL9eumiW_+fa8RNk=yWEw8N7Uz0rK1mbbuaqXOT1FymEtRoVQ@mail.gmail.com>
 <CAFL9eumct3yOEKkhsc4DPCgj=_0rRbNLNexH7tro35uT5=v8_A@mail.gmail.com>
Message-ID: <48cbfde02f2a443fbf1be583b968a0f5@SRVEXCHCM1302.precheza.cz>

Hi

I believe that facet_grid his is quite close to what you expect.  

p <- ggplot(mpg, aes(displ, cty)) + geom_point()+geom_line()
p + facet_grid(vars(drv), vars(cyl))

You can inspect how mpg data is organized by head(mpg)

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam Tyagi
> Sent: Monday, July 3, 2023 11:54 AM
> To: Jim Lemon <drjimlemon at gmail.com>
> Cc: r-help mailing list <r-help at r-project.org>
> Subject: Re: [R] Plotting factors in graph panel
> 
> Attached is another example plot, that is better than the earlier one.
> 
> On Mon, 3 Jul 2023 at 15:21, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> 
> > I thought maybe I can share with you how the data looks in Excel, and
> > an example plot I found on the web that looks similar to what I want to plot.
> > These are attached to this email as *.png files. I am trying to see
> > (plot) how each row of data (percentages) varies with income, making
> > many small graphs in the same plot. For each row of data there will be
> > one graph. I can manually delete the "No Answer" rows in Excel, if
> > that is the best solution. I want the output to look like the
> > sparklines in column "I" of attached Excel screenshot, with labelling
> > of each graphs. This is similar to the attached "Example_plot". I
> > thought this could be done with Lattice, or base-R, or ggplot easily,
> > but this turning out to be more difficult than I had thought.
> >
> > On Mon, 3 Jul 2023 at 14:38, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> >
> >> Thanks Jim, thanks everyone. I was caught up with work and moving
> >> home, so a delay in response. I tried running the code you provided
> >> and it is not running well in my R-Studio setup. It is giving errors
> >> and not producing plots. I don't yet understand all the code well
> >> yet, so I need to work on it and then get back to you all. Sorry for
> >> not posting data from a R dataframe. My data is still in Excel. I
> >> organized data in Excel almost exactly (look wise) as the output from
> >> Stata log file (text) for a "tabulate" command for a survey dataset.
> >> I don't yet understand a good way to organize this data in R, so I
> >> cannot send it to you now. Let me do some work on this, understand
> >> the R code you have given, and get back to you in a few days. I have
> >> not been using R lately, but I think the graph I am trying to make
> >> will be done better and easier in R than in Stata. Thank you all for all your
> help. Let me do some work and get back to you.
> >>
> >>
> >> On Fri, 30 Jun 2023 at 04:41, Jim Lemon <drjimlemon at gmail.com> wrote:
> >>
> >>> Okay. Here is a modification that does four single line plots.
> >>>
> >>> at_df<-read.table(text=
> >>>  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None
> >>> Bank_Current Bank_Savings Bank_NA
> >>>  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> >>>  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> >>>  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> >>>  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> >>>  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208  No_Answer 9
> >>> 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> >>>  header=TRUE,stringsAsFactors=FALSE)
> >>> at_df<-
> at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA"
> >>> )]
> >>> png("Income_pcts.png",height=700)
> >>> par(mfrow=c(4,1))
> >>> plot(at_df[,"Bank_Current"],
> >>>  type="l",lwd=3,main="Bsnk_Current",
> >>>  xlab="Income",ylab="%",xaxt="n")
> >>> axis(1,at=1:5,labels=at_df$Income)
> >>> plot(at_df[,"Bank_Savings"],
> >>>  type="l",lwd=3,main="Bank_Sasvings",
> >>>  xlab="Income",ylab="%",xaxt="n")
> >>> axis(1,at=1:5,labels=at_df$Income)
> >>> plot(at_df[,"MF_Equity"],
> >>>  type="l",lwd=3,main="MF_Equity",
> >>>  xlab="Income",ylab="%",xaxt="n")
> >>> axis(1,at=1:5,labels=at_df$Income)
> >>> plot(at_df[,"MF_Debt"],
> >>>  type="l",lwd=3,main="MF_Debt",
> >>>  xlab="Income",ylab="%",xaxt="n")
> >>> axis(1,at=1:5,labels=at_df$Income)
> >>> dev.off()
> >>>
> >>> Jim
> >>>
> >>> On Thu, Jun 29, 2023 at 1:49?PM Anupam Tyagi <anuptyagi at gmail.com>
> >>> wrote:
> >>> >
> >>> > Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope
> >>> > you
> >>> have
> >>> > been well.
> >>> >
> >>> > Pikal, thanks. Your solution may be close to what I want. I did
> >>> > not
> >>> know
> >>> > that I was posting in HTML. I just copied the data from Excel and
> >>> posted in
> >>> > the email in Gmail. The data is still in Excel, because I have not
> >>> > yet figured out what is a good way to organize it in R. I am
> >>> > posting it
> >>> again
> >>> > below as text. These are rows in Excel: 1,2,3,5,9 after MF are
> >>> > income categories and No Answer category (9). Down the second
> >>> > column are categories of MF and Bank AC. Rest of the columns are
> percentages.
> >>> >
> >>> > Jim, thanks for the graph. I am looking to plot only one line
> >>> (category)
> >>> > each in many small plots on the same page. I don't want to compare
> >>> > different categories on the same graph as you do, but see how each
> >>> category
> >>> > varies by income, one category in each graph. Like Excel does with
> >>> > Sparklines (Top menu: Insert, Sparklines, Lines). I have many
> >>> categories
> >>> > for many variables. I am only showing two MF and Bank AC.
> >>> >
> >>> > Income $10 $25 $40 $75 > $75 No Answer MF 1 2 3 4 5 9 None 1 3.05
> >>> > 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51 28.90 31.67
> >>> > 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15 Hybrid 4 36.00
> >>> > 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54 54.01 59.1
> >>> > 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02 21.09
> >>> > Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9 3.307 2.891
> >>> > 13.4 1.746 1.208 4.577
> >>> >
> >>> >
> >>> > On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com>
> wrote:
> >>> >
> >>> > > Hi Anupam,
> >>> > > Haven't heard from you in a long time. Perhaps you want
> >>> > > something
> >>> like
> >>> > > this:
> >>> > >
> >>> > > at_df<-read.table(text=
> >>> > >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None
> >>> Bank_Current
> >>> > > Bank_Savings Bank_NA
> >>> > >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> >>> > >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> >>> > >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> >>> > >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> >>> > >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
> >>> > > No_Answer 9 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> >>> > >  header=TRUE,stringsAsFactors=FALSE)
> >>> > >
> >>> at_df<-
> at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA"
> >>> )]
> >>> > > png("MF_Bank.png",height=600)
> >>> > > par(mfrow=c(2,1))
> >>> > > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
> >>> > >  type="l",col=1:4,lty=1:4,lwd=3,  main="Percentages by Income
> >>> > > and MF type",  xlab="Income",ylab="Percentage of
> >>> > > group",xaxt="n")
> >>> > > axis(1,at=1:5,labels=at_df$Income)
> >>> > > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
> >>> > >  lty=1:4,lwd=3,col=1:4)
> >>> > > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
> >>> > >  type="l",col=1:3,lty=1:4,lwd=3,  main="Percentages by Income
> >>> > > and Bank type",  xlab="Income",ylab="Percentage of
> >>> > > group",xaxt="n")
> >>> > > axis(1,at=1:5,labels=at_df$Income)
> >>> > > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
> >>> > >  lty=1:4,lwd=3,col=1:3)
> >>> > > dev.off()
> >>> > >
> >>> > > Jim
> >>> > >
> >>> > > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi
> >>> > > <anuptyagi at gmail.com>
> >>> wrote:
> >>> > > >
> >>> > > > Hello,
> >>> > > >
> >>> > > > I want to plot the following kind of data (percentage of
> >>> respondents
> >>> > > from a
> >>> > > > survey) that varies by Income into many small *line* graphs in
> >>> > > > a
> >>> panel of
> >>> > > > graphs. I want to omit "No Answer" categories. I want to see
> >>> > > > how
> >>> each one
> >>> > > > of the categories (percentages), "None", " Equity", etc.
> >>> > > > varies by
> >>> > > Income.
> >>> > > > How can I do this? How to organize the data well and how to
> >>> > > > plot? I
> >>> > > thought
> >>> > > > Lattice may be a good package to plot this, but I don't know
> >>> > > > for
> >>> sure. I
> >>> > > > prefer to do this in Base-R if possible, but I am open to ggplot.
> >>> Any
> >>> > > ideas
> >>> > > > will be helpful.
> >>> > > >
> >>> > > > Income
> >>> > > > $10 $25 $40 $75 > $75 No Answer MF 1 2 3 4 5 9 None 1 3.05
> >>> > > > 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51 28.90
> >>> > > > 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15 Hybrid
> >>> > > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54
> >>> > > > 54.01 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61
> >>> > > > 24.02 21.09 Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer
> >>> > > > 9 3.307 2.891 13.4 1.746 1.208 4.577
> >>> > > >
> >>> > > > Thanks.
> >>> > > > --
> >>> > > > Anupam.
> >>> > > >
> >>> > > >         [[alternative HTML version deleted]]
> >>> > > >
> >>> > > > ______________________________________________
> >>> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> >>> > > > see https://stat.ethz.ch/mailman/listinfo/r-help
> >>> > > > PLEASE do read the posting guide
> >>> > > http://www.R-project.org/posting-guide.html
> >>> > > > and provide commented, minimal, self-contained, reproducible
> code.
> >>> > >
> >>> >
> >>> >
> >>> > --
> >>> > Anupam.
> >>> >
> >>> >         [[alternative HTML version deleted]]
> >>> >
> >>> > ______________________________________________
> >>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> > https://stat.ethz.ch/mailman/listinfo/r-help
> >>> > PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> > and provide commented, minimal, self-contained, reproducible code.
> >>>
> >>
> >>
> >> --
> >> Anupam.
> >>
> >>
> >
> > --
> > Anupam.
> >
> >
> 
> --
> Anupam.

From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Mon Jul  3 20:00:32 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Mon, 3 Jul 2023 18:00:32 +0000
Subject: [R] Create matrix with column names wiht the same prefix xxxx and
 that end in 1, 2
Message-ID: <MW4PR03MB6363F53E2F260B10E5695BFCE229A@MW4PR03MB6363.namprd03.prod.outlook.com>

I am trying to create an array, myvalues, having 2 rows and 4 columns, where the column names are j,k,xxx1,xxx2. The code below fails, with the following error, "Error in dimnames(myvalues) <- list(NULL, zzz) : 
  length of 'dimnames' [2] not equal to array extent" 

Please help me get the code to work.

Thank you,
John

# create variable names xxx1 and xxx2.
string=""
for (j in 1:2){
  name <- paste("xxx",j,sep="")
  string <- paste(string,name)
  print(string)
}
# Creation of xxx1 and xxx2 works
string

# Create matrix
myvalues <- matrix(nrow=2,ncol=4)
head(myvalues,1)
# Add "j" and "k" to the string of column names
zzz <- paste("j","k",string)
zzz
# assign column names, j, k, xxx1, xxx2 to the matrix
# create column names, j, k, xxx1, xxx2.
dimnames(myvalues)<-list(NULL,zzz)



From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Jul  3 20:11:03 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 03 Jul 2023 11:11:03 -0700
Subject: [R] 
 Create matrix with column names wiht the same prefix xxxx and
 that end in 1, 2
In-Reply-To: <MW4PR03MB6363F53E2F260B10E5695BFCE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB6363F53E2F260B10E5695BFCE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <CAF74814-8ADF-44F8-ABF0-FB8AA73A3D96@dcn.davis.ca.us>

?colnames

On July 3, 2023 11:00:32 AM PDT, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>I am trying to create an array, myvalues, having 2 rows and 4 columns, where the column names are j,k,xxx1,xxx2. The code below fails, with the following error, "Error in dimnames(myvalues) <- list(NULL, zzz) : 
>  length of 'dimnames' [2] not equal to array extent" 
>
>Please help me get the code to work.
>
>Thank you,
>John
>
># create variable names xxx1 and xxx2.
>string=""
>for (j in 1:2){
>  name <- paste("xxx",j,sep="")
>  string <- paste(string,name)
>  print(string)
>}
># Creation of xxx1 and xxx2 works
>string
>
># Create matrix
>myvalues <- matrix(nrow=2,ncol=4)
>head(myvalues,1)
># Add "j" and "k" to the string of column names
>zzz <- paste("j","k",string)
>zzz
># assign column names, j, k, xxx1, xxx2 to the matrix
># create column names, j, k, xxx1, xxx2.
>dimnames(myvalues)<-list(NULL,zzz)
>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Jul  3 20:34:44 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 3 Jul 2023 19:34:44 +0100
Subject: [R] 
 Create matrix with column names wiht the same prefix xxxx and
 that end in 1, 2
In-Reply-To: <MW4PR03MB6363F53E2F260B10E5695BFCE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB6363F53E2F260B10E5695BFCE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <1c17cec4-de83-e2e7-3ee6-c649f4eb1fd4@sapo.pt>

?s 19:00 de 03/07/2023, Sorkin, John escreveu:
> I am trying to create an array, myvalues, having 2 rows and 4 columns, where the column names are j,k,xxx1,xxx2. The code below fails, with the following error, "Error in dimnames(myvalues) <- list(NULL, zzz) :
>    length of 'dimnames' [2] not equal to array extent"
> 
> Please help me get the code to work.
> 
> Thank you,
> John
> 
> # create variable names xxx1 and xxx2.
> string=""
> for (j in 1:2){
>    name <- paste("xxx",j,sep="")
>    string <- paste(string,name)
>    print(string)
> }
> # Creation of xxx1 and xxx2 works
> string
> 
> # Create matrix
> myvalues <- matrix(nrow=2,ncol=4)
> head(myvalues,1)
> # Add "j" and "k" to the string of column names
> zzz <- paste("j","k",string)
> zzz
> # assign column names, j, k, xxx1, xxx2 to the matrix
> # create column names, j, k, xxx1, xxx2.
> dimnames(myvalues)<-list(NULL,zzz)
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

You don't need so many calls to paste, one is enough.
And you don't need the for loop at all, paste and paste0 are vectorized.



myvalues <- matrix(nrow=2,ncol=4)

cnames <- paste0("xxx", 1:2)
cnames
# [1] "xxx1" "xxx2"

colnames(myvalues) <- c("j", "k", cnames)



Hope this helps,

Rui Barradas


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Mon Jul  3 20:39:37 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Mon, 3 Jul 2023 18:39:37 +0000
Subject: [R] 
 Create matrix with column names wiht the same prefix xxxx and
 that end in 1, 2
In-Reply-To: <CAF74814-8ADF-44F8-ABF0-FB8AA73A3D96@dcn.davis.ca.us>
References: <MW4PR03MB6363F53E2F260B10E5695BFCE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <CAF74814-8ADF-44F8-ABF0-FB8AA73A3D96@dcn.davis.ca.us>
Message-ID: <2B3D5683-8BC6-4EFA-BACE-696F262D31A9@som.umaryland.edu>

Jeff,
Thank you for your reply.
I should have said with dim names not column names. I want the Mateix to have dim names, no row names, dim names j, k, xxx1, xxx2.

John

John David Sorkin M.D., Ph.D.
Professor of Medicine
Chief, Biostatistics and Informatics
University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
Baltimore VA Medical Center
10 North Greene Street<x-apple-data-detectors://12>
GRECC<x-apple-data-detectors://12> (BT/18/GR)
Baltimore, MD 21201-1524<x-apple-data-detectors://13/0>
(Phone) 410-605-711<tel:410-605-7119>9
(Fax) 410-605-7913<tel:410-605-7913> (Please call phone number above prior to faxing)

On Jul 3, 2023, at 2:11 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:

??colnames

On July 3, 2023 11:00:32 AM PDT, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
I am trying to create an array, myvalues, having 2 rows and 4 columns, where the column names are j,k,xxx1,xxx2. The code below fails, with the following error, "Error in dimnames(myvalues) <- list(NULL, zzz) :
length of 'dimnames' [2] not equal to array extent"

Please help me get the code to work.

Thank you,
John

# create variable names xxx1 and xxx2.
string=""
for (j in 1:2){
name <- paste("xxx",j,sep="")
string <- paste(string,name)
print(string)
}
# Creation of xxx1 and xxx2 works
string

# Create matrix
myvalues <- matrix(nrow=2,ncol=4)
head(myvalues,1)
# Add "j" and "k" to the string of column names
zzz <- paste("j","k",string)
zzz
# assign column names, j, k, xxx1, xxx2 to the matrix
# create column names, j, k, xxx1, xxx2.
dimnames(myvalues)<-list(NULL,zzz)


______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C4347c6a62c4b4956756708db7bf0ea2b%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638240046889096206%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=y8kLruSvrjxQLegbbPNMMl665EEApCgiSOq%2BEmhQfNE%3D&reserved=0
PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C4347c6a62c4b4956756708db7bf0ea2b%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638240046889096206%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=HBUMNAeG1KurerS2DAhKxxZVRs71TSF0YJSGjP%2FCixA%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C4347c6a62c4b4956756708db7bf0ea2b%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638240046889096206%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=y8kLruSvrjxQLegbbPNMMl665EEApCgiSOq%2BEmhQfNE%3D&reserved=0
PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C4347c6a62c4b4956756708db7bf0ea2b%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638240046889096206%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=HBUMNAeG1KurerS2DAhKxxZVRs71TSF0YJSGjP%2FCixA%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Jul  3 20:45:25 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 03 Jul 2023 11:45:25 -0700
Subject: [R] 
 Create matrix with column names wiht the same prefix xxxx and
 that end in 1, 2
In-Reply-To: <2B3D5683-8BC6-4EFA-BACE-696F262D31A9@som.umaryland.edu>
References: <MW4PR03MB6363F53E2F260B10E5695BFCE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <CAF74814-8ADF-44F8-ABF0-FB8AA73A3D96@dcn.davis.ca.us>
 <2B3D5683-8BC6-4EFA-BACE-696F262D31A9@som.umaryland.edu>
Message-ID: <92543D52-786A-487D-B39E-9635EF9D5200@dcn.davis.ca.us>

I really think you should read that help page.  colnames() accesses the second element of dimnames() directly.

On July 3, 2023 11:39:37 AM PDT, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>Jeff,
>Thank you for your reply.
>I should have said with dim names not column names. I want the Mateix to have dim names, no row names, dim names j, k, xxx1, xxx2.
>
>John
>
>John David Sorkin M.D., Ph.D.
>Professor of Medicine
>Chief, Biostatistics and Informatics
>University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
>Baltimore VA Medical Center
>10 North Greene Street<x-apple-data-detectors://12>
>GRECC<x-apple-data-detectors://12> (BT/18/GR)
>Baltimore, MD 21201-1524<x-apple-data-detectors://13/0>
>(Phone) 410-605-711<tel:410-605-7119>9
>(Fax) 410-605-7913<tel:410-605-7913> (Please call phone number above prior to faxing)
>
>On Jul 3, 2023, at 2:11 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
>??colnames
>
>On July 3, 2023 11:00:32 AM PDT, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>I am trying to create an array, myvalues, having 2 rows and 4 columns, where the column names are j,k,xxx1,xxx2. The code below fails, with the following error, "Error in dimnames(myvalues) <- list(NULL, zzz) :
>length of 'dimnames' [2] not equal to array extent"
>
>Please help me get the code to work.
>
>Thank you,
>John
>
># create variable names xxx1 and xxx2.
>string=""
>for (j in 1:2){
>name <- paste("xxx",j,sep="")
>string <- paste(string,name)
>print(string)
>}
># Creation of xxx1 and xxx2 works
>string
>
># Create matrix
>myvalues <- matrix(nrow=2,ncol=4)
>head(myvalues,1)
># Add "j" and "k" to the string of column names
>zzz <- paste("j","k",string)
>zzz
># assign column names, j, k, xxx1, xxx2 to the matrix
># create column names, j, k, xxx1, xxx2.
>dimnames(myvalues)<-list(NULL,zzz)
>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C4347c6a62c4b4956756708db7bf0ea2b%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638240046889096206%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=y8kLruSvrjxQLegbbPNMMl665EEApCgiSOq%2BEmhQfNE%3D&reserved=0
>PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C4347c6a62c4b4956756708db7bf0ea2b%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638240046889096206%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=HBUMNAeG1KurerS2DAhKxxZVRs71TSF0YJSGjP%2FCixA%3D&reserved=0
>and provide commented, minimal, self-contained, reproducible code.
>
>--
>Sent from my phone. Please excuse my brevity.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C4347c6a62c4b4956756708db7bf0ea2b%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638240046889096206%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=y8kLruSvrjxQLegbbPNMMl665EEApCgiSOq%2BEmhQfNE%3D&reserved=0
>PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C4347c6a62c4b4956756708db7bf0ea2b%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638240046889096206%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=HBUMNAeG1KurerS2DAhKxxZVRs71TSF0YJSGjP%2FCixA%3D&reserved=0
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Mon Jul  3 21:26:38 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Mon, 3 Jul 2023 19:26:38 +0000
Subject: [R] 
 Create matrix with column names wiht the same prefix xxxx and
 that end in 1, 2
In-Reply-To: <92543D52-786A-487D-B39E-9635EF9D5200@dcn.davis.ca.us>
References: <MW4PR03MB6363F53E2F260B10E5695BFCE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <CAF74814-8ADF-44F8-ABF0-FB8AA73A3D96@dcn.davis.ca.us>
 <2B3D5683-8BC6-4EFA-BACE-696F262D31A9@som.umaryland.edu>
 <92543D52-786A-487D-B39E-9635EF9D5200@dcn.davis.ca.us>
Message-ID: <MW4PR03MB6363C345F53BA12435A47AE8E229A@MW4PR03MB6363.namprd03.prod.outlook.com>

Jeff,
Again my thanks for your guidance.
I replaced dimnames(myvalues)<-list(NULL,c(zzz))
with
colnames(myvalues)<-zzz
and get the same error,
Error in dimnames(x) <- dn :
  length of 'dimnames' [2] not equal to array extent
It appears that I am creating the string zzz in a manner that is not compatable with either
dimnames(myvalues)<-list(NULL,c(zzz))
or
colnames(myvalues)<-zzz

I think I need to modify the way I create the string zzz.

# create variable names xxx1 and xxx2.
string=""
for (j in 1:2){
  name <- paste("xxx",j,sep="")
  string <- paste(string,name)
  print(string)
}
# Creation of xxx1 and xxx2 works
string

# Create matrix
myvalues <- matrix(nrow=2,ncol=4)
head(myvalues,1)
# Add "j" and "k" to the string of column names
zzz <- paste("j","k",string)
zzz
# assign column names, j, k, xxx1, xxx2 to the matrix
# create column names, j, k, xxx1, xxx2.
dimnames(myvalues)<-list(NULL,c(zzz))
colnames(myvalues)<-zzz
________________________________________
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Sent: Monday, July 3, 2023 2:45 PM
To: Sorkin, John
Cc: r-help at r-project.org
Subject: Re: [R]  Create matrix with column names wiht the same prefix xxxx and that end in 1, 2

I really think you should read that help page.  colnames() accesses the second element of dimnames() directly.

On July 3, 2023 11:39:37 AM PDT, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>Jeff,
>Thank you for your reply.
>I should have said with dim names not column names. I want the Mateix to have dim names, no row names, dim names j, k, xxx1, xxx2.
>
>John
>
>John David Sorkin M.D., Ph.D.
>Professor of Medicine
>Chief, Biostatistics and Informatics
>University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
>Baltimore VA Medical Center
>10 North Greene Street<x-apple-data-detectors://12>
>GRECC<x-apple-data-detectors://12> (BT/18/GR)
>Baltimore, MD 21201-1524<x-apple-data-detectors://13/0>
>(Phone) 410-605-711<tel:410-605-7119>9
>(Fax) 410-605-7913<tel:410-605-7913> (Please call phone number above prior to faxing)
>
>On Jul 3, 2023, at 2:11 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
>??colnames
>
>On July 3, 2023 11:00:32 AM PDT, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>I am trying to create an array, myvalues, having 2 rows and 4 columns, where the column names are j,k,xxx1,xxx2. The code below fails, with the following error, "Error in dimnames(myvalues) <- list(NULL, zzz) :
>length of 'dimnames' [2] not equal to array extent"
>
>Please help me get the code to work.
>
>Thank you,
>John
>
># create variable names xxx1 and xxx2.
>string=""
>for (j in 1:2){
>name <- paste("xxx",j,sep="")
>string <- paste(string,name)
>print(string)
>}
># Creation of xxx1 and xxx2 works
>string
>
># Create matrix
>myvalues <- matrix(nrow=2,ncol=4)
>head(myvalues,1)
># Add "j" and "k" to the string of column names
>zzz <- paste("j","k",string)
>zzz
># assign column names, j, k, xxx1, xxx2 to the matrix
># create column names, j, k, xxx1, xxx2.
>dimnames(myvalues)<-list(NULL,zzz)
>
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.
>
>--
>Sent from my phone. Please excuse my brevity.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Jul  3 21:55:20 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 3 Jul 2023 20:55:20 +0100
Subject: [R] 
 Create matrix with column names wiht the same prefix xxxx and
 that end in 1, 2
In-Reply-To: <MW4PR03MB6363C345F53BA12435A47AE8E229A@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB6363F53E2F260B10E5695BFCE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <CAF74814-8ADF-44F8-ABF0-FB8AA73A3D96@dcn.davis.ca.us>
 <2B3D5683-8BC6-4EFA-BACE-696F262D31A9@som.umaryland.edu>
 <92543D52-786A-487D-B39E-9635EF9D5200@dcn.davis.ca.us>
 <MW4PR03MB6363C345F53BA12435A47AE8E229A@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <17f9849f-aabd-f714-2487-a6c31245ce62@sapo.pt>

?s 20:26 de 03/07/2023, Sorkin, John escreveu:
> Jeff,
> Again my thanks for your guidance.
> I replaced dimnames(myvalues)<-list(NULL,c(zzz))
> with
> colnames(myvalues)<-zzz
> and get the same error,
> Error in dimnames(x) <- dn :
>    length of 'dimnames' [2] not equal to array extent
> It appears that I am creating the string zzz in a manner that is not compatable with either
> dimnames(myvalues)<-list(NULL,c(zzz))
> or
> colnames(myvalues)<-zzz
> 
> I think I need to modify the way I create the string zzz.
> 
> # create variable names xxx1 and xxx2.
> string=""
> for (j in 1:2){
>    name <- paste("xxx",j,sep="")
>    string <- paste(string,name)
>    print(string)
> }
> # Creation of xxx1 and xxx2 works
> string
> 
> # Create matrix
> myvalues <- matrix(nrow=2,ncol=4)
> head(myvalues,1)
> # Add "j" and "k" to the string of column names
> zzz <- paste("j","k",string)
> zzz
> # assign column names, j, k, xxx1, xxx2 to the matrix
> # create column names, j, k, xxx1, xxx2.
> dimnames(myvalues)<-list(NULL,c(zzz))
> colnames(myvalues)<-zzz
> ________________________________________
> From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> Sent: Monday, July 3, 2023 2:45 PM
> To: Sorkin, John
> Cc: r-help at r-project.org
> Subject: Re: [R]  Create matrix with column names wiht the same prefix xxxx and that end in 1, 2
> 
> I really think you should read that help page.  colnames() accesses the second element of dimnames() directly.
> 
> On July 3, 2023 11:39:37 AM PDT, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>> Jeff,
>> Thank you for your reply.
>> I should have said with dim names not column names. I want the Mateix to have dim names, no row names, dim names j, k, xxx1, xxx2.
>>
>> John
>>
>> John David Sorkin M.D., Ph.D.
>> Professor of Medicine
>> Chief, Biostatistics and Informatics
>> University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
>> Baltimore VA Medical Center
>> 10 North Greene Street<x-apple-data-detectors://12>
>> GRECC<x-apple-data-detectors://12> (BT/18/GR)
>> Baltimore, MD 21201-1524<x-apple-data-detectors://13/0>
>> (Phone) 410-605-711<tel:410-605-7119>9
>> (Fax) 410-605-7913<tel:410-605-7913> (Please call phone number above prior to faxing)
>>
>> On Jul 3, 2023, at 2:11 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>>
>> ??colnames
>>
>> On July 3, 2023 11:00:32 AM PDT, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>> I am trying to create an array, myvalues, having 2 rows and 4 columns, where the column names are j,k,xxx1,xxx2. The code below fails, with the following error, "Error in dimnames(myvalues) <- list(NULL, zzz) :
>> length of 'dimnames' [2] not equal to array extent"
>>
>> Please help me get the code to work.
>>
>> Thank you,
>> John
>>
>> # create variable names xxx1 and xxx2.
>> string=""
>> for (j in 1:2){
>> name <- paste("xxx",j,sep="")
>> string <- paste(string,name)
>> print(string)
>> }
>> # Creation of xxx1 and xxx2 works
>> string
>>
>> # Create matrix
>> myvalues <- matrix(nrow=2,ncol=4)
>> head(myvalues,1)
>> # Add "j" and "k" to the string of column names
>> zzz <- paste("j","k",string)
>> zzz
>> # assign column names, j, k, xxx1, xxx2 to the matrix
>> # create column names, j, k, xxx1, xxx2.
>> dimnames(myvalues)<-list(NULL,zzz)
>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>> --
>> Sent from my phone. Please excuse my brevity.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> --
> Sent from my phone. Please excuse my brevity.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

I should have pointed out in my answer that you are inded creating the 
names vector in a (very) wrong way. When in the loop you paste string 
and name you create one vector of length 1. When the loop ends, you have 
" xxx1 xxx2", not two names.


string=""
for (j in 1:2){
   name <- paste("xxx",j,sep="")
   string <- paste(string,name)
   print(string)
}
#> [1] " xxx1"
#> [1] " xxx1 xxx2"
# Creation of xxx1 and xxx2 works
string
#> [1] " xxx1 xxx2"



Quoting the comment above,

   Creation of xxx1 and xxx2 works

No, it does not!
And then you paste again, adding two extra letters to one string

zzz <- paste("j","k",string)


This zzz also is of length 1, check it.


With a loop the right way would be any of

# 1. concatenate the current name with string
string <- NULL   # or c(), perhaps more frequent
for (j in 1:2){
   name <- paste("xxx",j,sep="")
   string <- c(string, name)
   print(string)
}
#> [1] "xxx1"
#> [1] "xxx1" "xxx2"
# Now creation of xxx1 and xxx2 does work
string
#> [1] "xxx1" "xxx2"



# 2. create a vector of the appropriate length beforehand, my preferred
string <- character(2)
for (j in 1:2){
   string[j] <- paste0("xxx",j,sep="")
   print(string)
}
#> [1] "xxx1" ""
#> [1] "xxx1" "xxx2"
# Creation of xxx1 and xxx2 works
string
#> [1] "xxx1" "xxx2"



But the vectorized way is still the better one.

Hope this helps,

Rui Barradas


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Jul  3 22:02:26 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 3 Jul 2023 21:02:26 +0100
Subject: [R] 
 Create matrix with column names wiht the same prefix xxxx and
 that end in 1, 2
In-Reply-To: <17f9849f-aabd-f714-2487-a6c31245ce62@sapo.pt>
References: <MW4PR03MB6363F53E2F260B10E5695BFCE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <CAF74814-8ADF-44F8-ABF0-FB8AA73A3D96@dcn.davis.ca.us>
 <2B3D5683-8BC6-4EFA-BACE-696F262D31A9@som.umaryland.edu>
 <92543D52-786A-487D-B39E-9635EF9D5200@dcn.davis.ca.us>
 <MW4PR03MB6363C345F53BA12435A47AE8E229A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <17f9849f-aabd-f714-2487-a6c31245ce62@sapo.pt>
Message-ID: <64cb9bc7-f554-04cb-0a17-cf889b202c78@sapo.pt>

?s 20:55 de 03/07/2023, Rui Barradas escreveu:
> ?s 20:26 de 03/07/2023, Sorkin, John escreveu:
>> Jeff,
>> Again my thanks for your guidance.
>> I replaced dimnames(myvalues)<-list(NULL,c(zzz))
>> with
>> colnames(myvalues)<-zzz
>> and get the same error,
>> Error in dimnames(x) <- dn :
>> ?? length of 'dimnames' [2] not equal to array extent
>> It appears that I am creating the string zzz in a manner that is not 
>> compatable with either
>> dimnames(myvalues)<-list(NULL,c(zzz))
>> or
>> colnames(myvalues)<-zzz
>>
>> I think I need to modify the way I create the string zzz.
>>
>> # create variable names xxx1 and xxx2.
>> string=""
>> for (j in 1:2){
>> ?? name <- paste("xxx",j,sep="")
>> ?? string <- paste(string,name)
>> ?? print(string)
>> }
>> # Creation of xxx1 and xxx2 works
>> string
>>
>> # Create matrix
>> myvalues <- matrix(nrow=2,ncol=4)
>> head(myvalues,1)
>> # Add "j" and "k" to the string of column names
>> zzz <- paste("j","k",string)
>> zzz
>> # assign column names, j, k, xxx1, xxx2 to the matrix
>> # create column names, j, k, xxx1, xxx2.
>> dimnames(myvalues)<-list(NULL,c(zzz))
>> colnames(myvalues)<-zzz
>> ________________________________________
>> From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>> Sent: Monday, July 3, 2023 2:45 PM
>> To: Sorkin, John
>> Cc: r-help at r-project.org
>> Subject: Re: [R]? Create matrix with column names wiht the same prefix 
>> xxxx and that end in 1, 2
>>
>> I really think you should read that help page.? colnames() accesses 
>> the second element of dimnames() directly.
>>
>> On July 3, 2023 11:39:37 AM PDT, "Sorkin, John" 
>> <jsorkin at som.umaryland.edu> wrote:
>>> Jeff,
>>> Thank you for your reply.
>>> I should have said with dim names not column names. I want the Mateix 
>>> to have dim names, no row names, dim names j, k, xxx1, xxx2.
>>>
>>> John
>>>
>>> John David Sorkin M.D., Ph.D.
>>> Professor of Medicine
>>> Chief, Biostatistics and Informatics
>>> University of Maryland School of Medicine Division of Gerontology and 
>>> Geriatric Medicine
>>> Baltimore VA Medical Center
>>> 10 North Greene Street<x-apple-data-detectors://12>
>>> GRECC<x-apple-data-detectors://12> (BT/18/GR)
>>> Baltimore, MD 21201-1524<x-apple-data-detectors://13/0>
>>> (Phone) 410-605-711<tel:410-605-7119>9
>>> (Fax) 410-605-7913<tel:410-605-7913> (Please call phone number above 
>>> prior to faxing)
>>>
>>> On Jul 3, 2023, at 2:11 PM, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> 
>>> wrote:
>>>
>>> ??colnames
>>>
>>> On July 3, 2023 11:00:32 AM PDT, "Sorkin, John" 
>>> <jsorkin at som.umaryland.edu> wrote:
>>> I am trying to create an array, myvalues, having 2 rows and 4 
>>> columns, where the column names are j,k,xxx1,xxx2. The code below 
>>> fails, with the following error, "Error in dimnames(myvalues) <- 
>>> list(NULL, zzz) :
>>> length of 'dimnames' [2] not equal to array extent"
>>>
>>> Please help me get the code to work.
>>>
>>> Thank you,
>>> John
>>>
>>> # create variable names xxx1 and xxx2.
>>> string=""
>>> for (j in 1:2){
>>> name <- paste("xxx",j,sep="")
>>> string <- paste(string,name)
>>> print(string)
>>> }
>>> # Creation of xxx1 and xxx2 works
>>> string
>>>
>>> # Create matrix
>>> myvalues <- matrix(nrow=2,ncol=4)
>>> head(myvalues,1)
>>> # Add "j" and "k" to the string of column names
>>> zzz <- paste("j","k",string)
>>> zzz
>>> # assign column names, j, k, xxx1, xxx2 to the matrix
>>> # create column names, j, k, xxx1, xxx2.
>>> dimnames(myvalues)<-list(NULL,zzz)
>>>
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.r-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> -- 
>>> Sent from my phone. Please excuse my brevity.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.r-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> -- 
>> Sent from my phone. Please excuse my brevity.
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> Hello,
> 
> I should have pointed out in my answer that you are inded creating the 
> names vector in a (very) wrong way. When in the loop you paste string 
> and name you create one vector of length 1. When the loop ends, you have 
> " xxx1 xxx2", not two names.
> 
> 
> string=""
> for (j in 1:2){
>  ? name <- paste("xxx",j,sep="")
>  ? string <- paste(string,name)
>  ? print(string)
> }
> #> [1] " xxx1"
> #> [1] " xxx1 xxx2"
> # Creation of xxx1 and xxx2 works
> string
> #> [1] " xxx1 xxx2"
> 
> 
> 
> Quoting the comment above,
> 
>  ? Creation of xxx1 and xxx2 works
> 
> No, it does not!
> And then you paste again, adding two extra letters to one string
> 
> zzz <- paste("j","k",string)
> 
> 
> This zzz also is of length 1, check it.
> 
> 
> With a loop the right way would be any of
> 
> # 1. concatenate the current name with string
> string <- NULL?? # or c(), perhaps more frequent
> for (j in 1:2){
>  ? name <- paste("xxx",j,sep="")
>  ? string <- c(string, name)
>  ? print(string)
> }
> #> [1] "xxx1"
> #> [1] "xxx1" "xxx2"
> # Now creation of xxx1 and xxx2 does work
> string
> #> [1] "xxx1" "xxx2"
> 
> 
> 
> # 2. create a vector of the appropriate length beforehand, my preferred
> string <- character(2)
> for (j in 1:2){
>  ? string[j] <- paste0("xxx",j,sep="")
>  ? print(string)
> }
> #> [1] "xxx1" ""
> #> [1] "xxx1" "xxx2"
> # Creation of xxx1 and xxx2 works
> string
> #> [1] "xxx1" "xxx2"
> 
> 
> 
> But the vectorized way is still the better one.
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

The notation in my first post doesn't follow the OP's, so here is a MWE 
corrected.


myvalues <- matrix(nrow=2,ncol=4)

string <- paste0("xxx", 1:2)
length(string)
#> [1] 2
string
#> [1] "xxx1" "xxx2"

zzz <- c("j", "k", string)
length(zzz)
#> [1] 4
zzz
#> [1] "j"    "k"    "xxx1" "xxx2"

# with colnames
colnames(myvalues) <- zzz

# with dimnames
dimnames(myvalues) <- list(NULL, zzz)

myvalues
#>       j  k xxx1 xxx2
#> [1,] NA NA   NA   NA
#> [2,] NA NA   NA   NA



Hope this helps,

Rui Barradas


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Mon Jul  3 22:08:06 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Mon, 3 Jul 2023 20:08:06 +0000
Subject: [R] Create a variable lenght string that can be used in a dimnames
 statement
Message-ID: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>

Colleagues,

I am sending this email again with a better description of my problem and the area where I need help.

I need help creating a string of variables that will be accepted by the dimnames function. The string needs to start with the dimnames j and k followed by a series of dimnames xxx1, . . . ., xxx2, . . ., xxxn. I create xxx1, xxx2 (not  going to xxxn to shorten the code below) as a string using a for loop and the paste function. I then use a paste function, zzz <- paste("j","k",string) to create the full set of dimnames, j, k, xxx1, xxx2 as string. I create the matrix myvalues in the usual way and attempt to assign dim names to the matrix using the following dimnames statement,
dimnames(myvalues)<-list(NULL,c(zzz))
The dimnames statement leads to the following error, 
 Error in dimnames(x) <- dn : 
  length of 'dimnames' [2] not equal to array extent
A colnames statement,
colnames(myvalues)<-as.character(zzz)
produces the same error. 

Can someone tell me how to create a sting that can be used in the dimnames statment?

Thank you (and please accept my apologies for double posting).

John

# create variable names xxx1 and xxx2.
string=""
for (j in 1:2){
  name <- paste("xxx",j,sep="")
  string <- paste(string,name)
  print(string)
}
# Creation of xxx1 and xxx2 works
string

# Create matrix
myvalues <- matrix(nrow=2,ncol=4)
head(myvalues,1)
# Add "j" and "k" to the string of column names
zzz <- paste("j","k",string)
zzz
# assign column names, j, k, xxx1, xxx2 to the matrix
# create column names, j, k, xxx1, xxx2.
dimnames(myvalues)<-list(NULL,c(zzz))
colnames(myvalues) <- string

From bgunter@4567 @end|ng |rom gm@||@com  Mon Jul  3 22:40:41 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 3 Jul 2023 13:40:41 -0700
Subject: [R] 
 Create a variable lenght string that can be used in a dimnames
 statement
In-Reply-To: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <CAGxFJbS-oNXzomZ+Ry_fRGF6zCU7rya07tLyNvqOSTNg_WNB-w@mail.gmail.com>

I am not going to try to sort out your confusion, as others have already
tried and failed. But I will point out that "string" of variables is pretty
much nonsense in R. A "character vector"/"vector of strings" is probably
what you mean and want to provide column names // names for the second
component of the dim list for a matrix. e.g.

> m <- matrix(1:6, nr=3)
> m
     [,1] [,2]
[1,]    1    4
[2,]    2    5
[3,]    3    6
> dimnames(m)
NULL
> dimnames(m) <- list(letters[1:3], c('foo','bar'))
> m
  foo bar
a   1   4
b   2   5
c   3   6

Cheers,
Bert

On Mon, Jul 3, 2023 at 1:10?PM Sorkin, John <jsorkin at som.umaryland.edu>
wrote:

> Colleagues,
>
> I am sending this email again with a better description of my problem and
> the area where I need help.
>
> I need help creating a string of variables that will be accepted by the
> dimnames function. The string needs to start with the dimnames j and k
> followed by a series of dimnames xxx1, . . . ., xxx2, . . ., xxxn. I create
> xxx1, xxx2 (not  going to xxxn to shorten the code below) as a string using
> a for loop and the paste function. I then use a paste function, zzz <-
> paste("j","k",string) to create the full set of dimnames, j, k, xxx1, xxx2
> as string. I create the matrix myvalues in the usual way and attempt to
> assign dim names to the matrix using the following dimnames statement,
> dimnames(myvalues)<-list(NULL,c(zzz))
> The dimnames statement leads to the following error,
>  Error in dimnames(x) <- dn :
>   length of 'dimnames' [2] not equal to array extent
> A colnames statement,
> colnames(myvalues)<-as.character(zzz)
> produces the same error.
>
> Can someone tell me how to create a sting that can be used in the dimnames
> statment?
>
> Thank you (and please accept my apologies for double posting).
>
> John
>
> # create variable names xxx1 and xxx2.
> string=""
> for (j in 1:2){
>   name <- paste("xxx",j,sep="")
>   string <- paste(string,name)
>   print(string)
> }
> # Creation of xxx1 and xxx2 works
> string
>
> # Create matrix
> myvalues <- matrix(nrow=2,ncol=4)
> head(myvalues,1)
> # Add "j" and "k" to the string of column names
> zzz <- paste("j","k",string)
> zzz
> # assign column names, j, k, xxx1, xxx2 to the matrix
> # create column names, j, k, xxx1, xxx2.
> dimnames(myvalues)<-list(NULL,c(zzz))
> colnames(myvalues) <- string
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ro||turner @end|ng |rom po@teo@net  Tue Jul  4 00:34:05 2023
From: ro||turner @end|ng |rom po@teo@net (Rolf Turner)
Date: Mon,  3 Jul 2023 22:34:05 +0000
Subject: [R] 
 Create a variable lenght string that can be used in a dimnames
 statement
In-Reply-To: <CAGxFJbS-oNXzomZ+Ry_fRGF6zCU7rya07tLyNvqOSTNg_WNB-w@mail.gmail.com>
References: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <CAGxFJbS-oNXzomZ+Ry_fRGF6zCU7rya07tLyNvqOSTNg_WNB-w@mail.gmail.com>
Message-ID: <20230704103405.385c8bb3@rolf-Latitude-E7470>


On Mon, 3 Jul 2023 13:40:41 -0700
Bert Gunter <bgunter.4567 at gmail.com> wrote:

> I am not going to try to sort out your confusion, as others have
> already tried and failed.

<SNIP>

Fortune nomination!!!

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Stats. Dep't. (secretaries) phone:
         +64-9-373-7599 ext. 89622
Home phone: +64-9-480-4619


From tebert @end|ng |rom u||@edu  Tue Jul  4 03:24:02 2023
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Tue, 4 Jul 2023 01:24:02 +0000
Subject: [R] 
 Create a variable lenght string that can be used in a dimnames
 statement
In-Reply-To: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <CH3PR22MB4514E47AF054F07F9D8BC6B5CF2EA@CH3PR22MB4514.namprd22.prod.outlook.com>

At least on my system string has a single value of " xxx1 xxx2" not "xxx1" and "xxx2".
The variable zzz has two values: "J K xxx1" and "J K xxx2"

What you want is "J", "K", "xxx1", "xxx2"
If I cheat everything works. So then the goal is to rewrite the program so cheating is not needed.

    # create variable names xxx1 and xxx2.
    string=""
    for (j in 1:2){
      name <- paste("xxx",j,sep="")
      string <- paste(string,name)
      print(string)
    }
    # Creation of xxx1 and xxx2 works
    string
    string = c("xxx1","xxx2") #Cheating
    # Create matrix
    myvalues <- matrix(nrow=2,ncol=4)
    head(myvalues,1)
    # Add "j" and "k" to the string of column names
    zzz <- paste("j","k",string) # assign column names, j, k, xxx1, xxx2 to the matrix # create column names, j, k, xxx1, xxx2.
    zzz<-c("J", "K", "xxx1", "xxx2") #Cheating again
    dimnames(myvalues)<-list(NULL,c(zzz))


Here is one version that runs without cheating
    # create variable names xxx1 and xxx2.
    string=""
    for (j in 1:2){
      string[j] <- paste("xxx",j,sep="")
      print(string)
    }
    # Creation of xxx1 and xxx2 works
    string

    # Create matrix
    myvalues <- matrix(nrow=2,ncol=4)
    zzz <- c("j","k",string) # assign column names, j, k, xxx1, xxx2 to the matrix # create column names, j, k, xxx1, xxx2.
    dimnames(myvalues)<-list(NULL,c(zzz))


Regards,
Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
Sent: Monday, July 3, 2023 4:08 PM
To: r-help at r-project.org (r-help at r-project.org) <r-help at r-project.org>
Subject: [R] Create a variable lenght string that can be used in a dimnames statement

[External Email]

Colleagues,

I am sending this email again with a better description of my problem and the area where I need help.

I need help creating a string of variables that will be accepted by the dimnames function. The string needs to start with the dimnames j and k followed by a series of dimnames xxx1, . . . ., xxx2, . . ., xxxn. I create xxx1, xxx2 (not  going to xxxn to shorten the code below) as a string using a for loop and the paste function. I then use a paste function, zzz <- paste("j","k",string) to create the full set of dimnames, j, k, xxx1, xxx2 as string. I create the matrix myvalues in the usual way and attempt to assign dim names to the matrix using the following dimnames statement,
dimnames(myvalues)<-list(NULL,c(zzz))
The dimnames statement leads to the following error,  Error in dimnames(x) <- dn :
  length of 'dimnames' [2] not equal to array extent A colnames statement,
colnames(myvalues)<-as.character(zzz)
produces the same error.

Can someone tell me how to create a sting that can be used in the dimnames statment?

Thank you (and please accept my apologies for double posting).

John

# create variable names xxx1 and xxx2.
string=""
for (j in 1:2){
  name <- paste("xxx",j,sep="")
  string <- paste(string,name)
  print(string)
}
# Creation of xxx1 and xxx2 works
string

# Create matrix
myvalues <- matrix(nrow=2,ncol=4)
head(myvalues,1)
# Add "j" and "k" to the string of column names zzz <- paste("j","k",string) zzz # assign column names, j, k, xxx1, xxx2 to the matrix # create column names, j, k, xxx1, xxx2.
dimnames(myvalues)<-list(NULL,c(zzz))
colnames(myvalues) <- string
______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Tue Jul  4 06:16:50 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Tue, 4 Jul 2023 04:16:50 +0000
Subject: [R] 
 Create a variable lenght string that can be used in a dimnames
 statement
In-Reply-To: <20230704103405.385c8bb3@rolf-Latitude-E7470>
References: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <CAGxFJbS-oNXzomZ+Ry_fRGF6zCU7rya07tLyNvqOSTNg_WNB-w@mail.gmail.com>
 <20230704103405.385c8bb3@rolf-Latitude-E7470>
Message-ID: <MW4PR03MB63632A747CBB1CB03996A55DE22EA@MW4PR03MB6363.namprd03.prod.outlook.com>

My life is complete.
I have inspired a fortune!
John

________________________________________
From: Rolf Turner <rolfturner at posteo.net>
Sent: Monday, July 3, 2023 6:34 PM
To: Bert Gunter
Cc: Sorkin, John; r-help at r-project.org (r-help at r-project.org); Achim Zeileis
Subject: Re: [R]  Create a variable lenght string that can be used in a dimnames statement


On Mon, 3 Jul 2023 13:40:41 -0700
Bert Gunter <bgunter.4567 at gmail.com> wrote:

> I am not going to try to sort out your confusion, as others have
> already tried and failed.

<SNIP>

Fortune nomination!!!

cheers,

Rolf Turner

--
Honorary Research Fellow
Department of Statistics
University of Auckland
Stats. Dep't. (secretaries) phone:
         +64-9-373-7599 ext. 89622
Home phone: +64-9-480-4619


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Jul  4 09:14:43 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 4 Jul 2023 10:14:43 +0300
Subject: [R] 
 Create a variable lenght string that can be used in a dimnames
 statement
In-Reply-To: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <20230704101443.207f8449@Tarkus>

On Mon, 3 Jul 2023 20:08:06 +0000
"Sorkin, John" <jsorkin at som.umaryland.edu> wrote:

> # create variable names xxx1 and xxx2.
> string=""
> for (j in 1:2){
>   name <- paste("xxx",j,sep="")
>   string <- paste(string,name)
>   print(string)
> }
> # Creation of xxx1 and xxx2 works
> string

You need to distinguish between a space separated string and a string
vector. A space separated string is a single object that R won't split
for you unless you tell it to. (Are you coming from a Unix background?
A command line shell will split a space-separated string into a list of
words unless you tell it not to do that, but that's because its main
job is to convert space separated command lines typed by the operator
into lists of command line arguments. R is not like that at all.)

What you're getting here is an individual string. You can confirm that
by typing:

  string[1]

and still seeing the whole string. You can also type:

  string[2]

and see an NA instead of the second word in the string.

Try replacing the _second_ paste() in the example above with a c().
Given individual strings, paste() concatenates its arguments into
a string. c() concatenates its arguments into a vector of separate
objects. You should still get a variable named `string`, but when you
print it whole, the results will look different (R will separate the
two strings inside that vector), and you should be able to type
string[1] and string[2] and get "xxx1" and "xxx2" respectively.

What about Rui's solution, the one that used paste() and got a vector,
contrary to what I wrote above? Rui gave a vector to paste(). paste()
runs a loop inside it and produces a string for every vector element of
it encounters, unless you tell it to collapse the result.

> zzz <- paste("j","k",string)

Same thing here. paste() adds spaces and returns a string. You need c()
to retain "j" and "k" separate from "xxx1" and "xxx2" as individual
elements of the vector.

It may *look* similar ([1] "j k xxx1 xxx2" vs. [1] "j" "k" "xxx1"
"xxx2"), but the resulting objects are different. When in doubt, use
str() on an object to see its structure.

-- 
Best regards,
Ivan


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Jul  4 09:32:53 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 4 Jul 2023 10:32:53 +0300
Subject: [R] 
 Create a variable lenght string that can be used in a dimnames
 statement
In-Reply-To: <20230704101443.207f8449@Tarkus>
References: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <20230704101443.207f8449@Tarkus>
Message-ID: <20230704103253.6409a7e8@Tarkus>

(Sorry for the double post.)

On Tue, 4 Jul 2023 10:14:43 +0300
Ivan Krylov <krylov.r00t at gmail.com> wrote:

> Try replacing the _second_ paste() in the example above with a c().

What I had forgotten to mention is that you also need to replace the
initial assignment

>  string=""

with the following:

   string = character()

(NULL and c(), as mentioned by Rui, are also valid options here.)

If you don't do that, the empty string remains an element in the
resulting vector c('', 'xxx1', 'xxx2'), which is not the desired
result. It's awkward to build data structures in an iterative manner,
which is why solutions like Rui's paste0("xxx", 1:2) are considered
more idiomatic.

-- 
Best regards,
Ivan


From j@nn|e@pretor|u@ @end|ng |rom up@@c@z@  Tue Jul  4 12:00:29 2023
From: j@nn|e@pretor|u@ @end|ng |rom up@@c@z@ (Jannie Pretorius)
Date: Tue, 4 Jul 2023 15:00:29 +0500
Subject: [R] 
 LINUX SuSE15.4 (GNU & Intel) compiler problem in "configure" file
In-Reply-To: <20230629174456.29f4b812@arachnoid>
References: <CAEeL5i57oZVLrijwqXKfjtftf5gYyCXsFXdcDqL4X7MvuZbqSg@mail.gmail.com>
 <20230629090131.7a4d3789@Tarkus>
 <CAEeL5i7xrZcu+EFtJ7TZaaBHqsL8E53n27mHh5SJ3PHtrACuEg@mail.gmail.com>
 <20230629174456.29f4b812@arachnoid>
Message-ID: <CAEeL5i46eZ1VJf+hX+BCrm6hho42Ct7uxQdPT5nBX=S1L0qyJg@mail.gmail.com>

 Dear Dr Krylov,

 From our side, a sincere appreciation for the pointers you gave me.

a)  Apologies from my end:
        Our: */bin/sh* is a symlink to:
*sh -> /usr/bin/sh *

b) I further found that the specific HEADER files under:
       /usr/src/*linux-5.14.21-150400.2*2/include/linux
    are important (specific for some of the internal R-CRAN Compilations)
    These of course relate to the specific LINUX kernel revision:
*5.14.21-150400.22*

c) SuSe SLES 15.3/15.4 has the default environment PATH statement
            (under <*su*> status) as:
         /usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
      This order must be retained and is important.

d) And the [configure] script ran just fine (attached here)

e) You were correct, the host declaration was not sufficient:
         Now points to: x86_64-pc-linux

f) In some cases found embedded characters disrupting code sequences.
   This is typical of preparing and developing code across a local area
network,
       in our case found not to adhere to proper protocol support (under
traffic load).
   In which case, I normally strip code sections into a spreadsheet
workpage
       (widen one column) and store it as: CSV (MS-DOS) (*.csv)  --> SAVE
and open it again.
   In several instances found the character: *?*  embedded (not visible
under any STD text editors)

Very best Wishes and many, many thanks
   Jan Pretorius (UPta)


On Thu, 29 Jun 2023 at 16:45, Ivan Krylov <krylov.r00t at gmail.com> wrote:

> ? Thu, 29 Jun 2023 16:17:50 +0500
> Jannie Pretorius <jannie.pretorius at up.ac.za> ?????:
>
> >    Our: */bin/sh* is a symlink to: ls -> /usr/bin/ls
>
> That sounds strange. Are you sure that /bin/sh (and not /bin/ls) points
> to /usr/bin/ls?
>
> >    The variables Rshlibpath_var and shlibparth_var are indeed empty.
>
> That's the reason why .../configure originally failed. It was asked to
> substitute a variable (which would normally look like
> ${LD_LIBRARY_PATH}), but with these variables empty the substitution
> looked like ${}, which is an error.
>
> >  The:  .../tools/config.guess file is attached
>
> Sorry, when I asked for tools/config.guess, I meant its output (what it
> prints on the console when run), not the contents.
>
> >  The:  ../config.log  file is attached
>
> config.log is indeed useful. It also must contain the output of
> tools/config.guess and tools/config.sub. I think that problem here is
> that for some reason it doesn't say "linux":
>
> > configure:4221: checking host system type
> > configure:4235: result: x86_64-pc-none
>
> Can you confirm that tools/config.guess prints x86_64-pc-linux-gnu but
> tools/config.sub $(tools/config.guess) prints x86_64-pc-none?
>
> When other people install other ./configure-based software on this
> computer, do they encounter similar problems?
>
> (It may be worth keeping the R-help mailing list in the Cc: header of
> your replies, because other people with more knowledge of GNU autotools
> may step in.)
>
> --
> Best regards,
> Ivan
>

-- 
This message and attachments are subject to a disclaimer.

Please refer to?
http://upnet.up.ac.za/services/it/documentation/docs/004167.pdf 
<http://upnet.up.ac.za/services/it/documentation/docs/004167.pdf>?for
full 
details.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: COMPILE-script R-4.3.1.pdf
Type: application/pdf
Size: 143049 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20230704/462709c0/attachment.pdf>

From @vi@e@gross m@iii@g oii gm@ii@com  Wed Jul  5 02:05:47 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Tue, 4 Jul 2023 20:05:47 -0400
Subject: [R] 
 Create a variable lenght string that can be used in a dimnames
 statement
In-Reply-To: <MW4PR03MB63632A747CBB1CB03996A55DE22EA@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB636332F061D412D7125839EAE229A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <CAGxFJbS-oNXzomZ+Ry_fRGF6zCU7rya07tLyNvqOSTNg_WNB-w@mail.gmail.com>
 <20230704103405.385c8bb3@rolf-Latitude-E7470>
 <MW4PR03MB63632A747CBB1CB03996A55DE22EA@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <006d01d9aed4$73bb8830$5b329890$@gmail.com>

Interesting to read all the answers. Personally, I was a bit irked to see
that using a combination of assignments using rownames() and colnames() did
not work as one canceled what the other had done.

But it turns out if we listed to what John really wanted versus what he said
he wanted, then a fairly simple parameterized answer is to add the row and
column names when creating the matrix as in:

# Create a matrix of size M by N rows, initialiazed to NA
# and also add row names that look like row1, row2, ... rowM
# as well as column names that look like col1, col2, ... colN
# Set the parameters and the rest is a one-liner, wrapped a bit
# for legibility:
M <- 2
N <- 4
rowpref <- "row"
colpref <- "col"

myvalues <- matrix(data=NA, 
                   nrow=M, 
                   ncol=N, 
                   dimnames=list(rows=paste("row", seq(M), sep=""), 
                                 cols=paste("col", seq(N), sep="")))

The resulting value is:

> myvalues
      cols
rows   col1 col2 col3 col4
  row1   NA   NA   NA   NA
  row2   NA   NA   NA   NA



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
Sent: Tuesday, July 4, 2023 12:17 AM
To: Rolf Turner <rolfturner at posteo.net>; Bert Gunter
<bgunter.4567 at gmail.com>
Cc: r-help at r-project.org (r-help at r-project.org) <r-help at r-project.org>;
Achim Zeileis <Achim.Zeileis at uibk.ac.at>
Subject: Re: [R] Create a variable lenght string that can be used in a
dimnames statement

My life is complete.
I have inspired a fortune!
John

________________________________________
From: Rolf Turner <rolfturner at posteo.net>
Sent: Monday, July 3, 2023 6:34 PM
To: Bert Gunter
Cc: Sorkin, John; r-help at r-project.org (r-help at r-project.org); Achim Zeileis
Subject: Re: [R]  Create a variable lenght string that can be used in a
dimnames statement


On Mon, 3 Jul 2023 13:40:41 -0700
Bert Gunter <bgunter.4567 at gmail.com> wrote:

> I am not going to try to sort out your confusion, as others have
> already tried and failed.

<SNIP>

Fortune nomination!!!

cheers,

Rolf Turner

--
Honorary Research Fellow
Department of Statistics
University of Auckland
Stats. Dep't. (secretaries) phone:
         +64-9-373-7599 ext. 89622
Home phone: +64-9-480-4619

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From cec|||@@c@rmo @end|ng |rom u@@pt  Wed Jul  5 11:14:14 2023
From: cec|||@@c@rmo @end|ng |rom u@@pt (=?iso-8859-1?Q?Cec=EDlia_Carmo?=)
Date: Wed, 5 Jul 2023 09:14:14 +0000
Subject: [R] textual analysis - transforming several pdf to txt - naming the
 files
Message-ID: <0379a40c6de749b6b10709601cf074af@ua.pt>

I am taking my first steps in textual analysis with R.
I have pdf files consisting of company reports for several years (1 file corresponds to 1 company and 1 year).
My idea is to start by transforming all my pdf files into txt files for further treatment and analysis (this will allow me to group the files by company or by year, depending on the future analysis to be performed).
I do not have in-depth knowledge of programming in R. I just adapt codes that I find, to my needs. Here goes the first doubt in a code I'm adapting:

My pdf files are in one directory named "pdfs". The names of my files are, for example, SONAE2020FS.pdf, EDP2021GS.pdf
I want to convert them to txt and give the same names as in the pdf files: SOANE2020FS.txt, EDP2021GS.txt
I'm running the following scrip, but the names of txt files that I obtain are: pdftext1, pdftext2, pdftext3...
What do I need to change?
Thank you very much,

Cec?lia Carmo
Universidade de Aveiro - Portugal


dirpath <- ("/Users/ceciliacarmo/documents/RTextualAnalysis/data/pdfs")


library(pdftools)

library(dplyr)


convertpdf2txt <- function(dirpath){

  files <- list.files(dirpath, full.names = T)

  x <- sapply(files, function(x){

  x <- pdftools::pdf_text(x) %>%

  paste0(collapse = " ") %>%

  stringr::str_squish()

  return(x)

    })

}

# apply function

txts <- convertpdf2txt(here::here("data", "pdf/"))

# add names to txt files

names(txts) <- paste0(here::here("data","pdftext"), 1:length(txts), sep = "")




	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Jul  5 11:57:33 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 5 Jul 2023 10:57:33 +0100
Subject: [R] 
 textual analysis - transforming several pdf to txt - naming the
 files
In-Reply-To: <0379a40c6de749b6b10709601cf074af@ua.pt>
References: <0379a40c6de749b6b10709601cf074af@ua.pt>
Message-ID: <b639decc-d80f-d58e-f3ed-9e0c9751eec3@sapo.pt>

?s 10:14 de 05/07/2023, Cec?lia Carmo escreveu:
> I am taking my first steps in textual analysis with R.
> I have pdf files consisting of company reports for several years (1 file corresponds to 1 company and 1 year).
> My idea is to start by transforming all my pdf files into txt files for further treatment and analysis (this will allow me to group the files by company or by year, depending on the future analysis to be performed).
> I do not have in-depth knowledge of programming in R. I just adapt codes that I find, to my needs. Here goes the first doubt in a code I'm adapting:
> 
> My pdf files are in one directory named "pdfs". The names of my files are, for example, SONAE2020FS.pdf, EDP2021GS.pdf
> I want to convert them to txt and give the same names as in the pdf files: SOANE2020FS.txt, EDP2021GS.txt
> I'm running the following scrip, but the names of txt files that I obtain are: pdftext1, pdftext2, pdftext3...
> What do I need to change?
> Thank you very much,
> 
> Cec?lia Carmo
> Universidade de Aveiro - Portugal
> 
> 
> dirpath <- ("/Users/ceciliacarmo/documents/RTextualAnalysis/data/pdfs")
> 
> 
> library(pdftools)
> 
> library(dplyr)
> 
> 
> convertpdf2txt <- function(dirpath){
> 
>    files <- list.files(dirpath, full.names = T)
> 
>    x <- sapply(files, function(x){
> 
>    x <- pdftools::pdf_text(x) %>%
> 
>    paste0(collapse = " ") %>%
> 
>    stringr::str_squish()
> 
>    return(x)
> 
>      })
> 
> }
> 
> # apply function
> 
> txts <- convertpdf2txt(here::here("data", "pdf/"))
> 
> # add names to txt files
> 
> names(txts) <- paste0(here::here("data","pdftext"), 1:length(txts), sep = "")
> 
> 
> 
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Try the following.
The corrected function convertpdf2txt assigns names based on the files 
variable.
It uses tools::file_path_sans_ext to keep the filename without extension 
and pastes the new extension to them. In the end there is no need to 
call here::here again, the list already is a named list.



convertpdf2txt <- function(dirpath){
   files <- list.files(dirpath, pattern = "Consoli.*\\.pdf$", full.names 
= TRUE)
   files <- chartr("\\", "/", files)

   x <- lapply(files, function(x){
     pdftools::pdf_text(x) %>%
       paste0(collapse = " ") %>%
       stringr::str_squish()
   })
   new_names <- tools::file_path_sans_ext(files)
   new_names <- paste(new_names, "txt", sep = ".")
   setNames(x, new_names)
}

# apply function
# note that my test files are in "~/Temp"
txts <- convertpdf2txt(here::here("~", "Temp"))
names(txts)



Hope this helps,

Rui Barradas


From cec|||@@c@rmo @end|ng |rom u@@pt  Wed Jul  5 12:12:12 2023
From: cec|||@@c@rmo @end|ng |rom u@@pt (=?iso-8859-1?Q?Cec=EDlia_Carmo?=)
Date: Wed, 5 Jul 2023 10:12:12 +0000
Subject: [R] 
 textual analysis - transforming several pdf to txt - naming the
 files
Message-ID: <07a94f758365464b97691564ab7be648@ua.pt>

convertpdf2txt <- function(dirpath){

   files <- list.files(dirpath, pattern = "Consoli.*\\.pdf$", full.names
= TRUE)
   files <- chartr("\\", "/", files)

   x <- lapply(files, function(x){
     pdftools::pdf_text(x) %>%
       paste0(collapse = " ") %>%
       stringr::str_squish()
   })
   new_names <- tools::file_path_sans_ext(files)
   new_names <- paste(new_names, "txt", sep = ".")
   setNames(x, new_names)
}

# apply function
# note that my test files are in "~/Temp"
txts <- convertpdf2txt(here::here("~", "Temp"))
names(txts)


Thank you very much, but the following error appeared:

Error: unexpected '}' in "}"




Cec?lia Carmo

Universidade de Aveiro

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Jul  5 17:43:19 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 5 Jul 2023 16:43:19 +0100
Subject: [R] 
 textual analysis - transforming several pdf to txt - naming the
 files
In-Reply-To: <07a94f758365464b97691564ab7be648@ua.pt>
References: <07a94f758365464b97691564ab7be648@ua.pt>
Message-ID: <70b01fdb-8adc-337f-8bc7-d2d7f0e050b3@sapo.pt>

?s 11:12 de 05/07/2023, Cec?lia Carmo escreveu:
> convertpdf2txt <- function(dirpath){
> 
>     files <- list.files(dirpath, pattern = "Consoli.*\\.pdf$", full.names
> = TRUE)
>     files <- chartr("\\", "/", files)
> 
>     x <- lapply(files, function(x){
>       pdftools::pdf_text(x) %>%
>         paste0(collapse = " ") %>%
>         stringr::str_squish()
>     })
>     new_names <- tools::file_path_sans_ext(files)
>     new_names <- paste(new_names, "txt", sep = ".")
>     setNames(x, new_names)
> }
> 
> # apply function
> # note that my test files are in "~/Temp"
> txts <- convertpdf2txt(here::here("~", "Temp"))
> names(txts)
> 
> 
> Thank you very much, but the following error appeared:
> 
> Error: unexpected '}' in "}"
> 
> 
> 
> 
> Cec?lia Carmo
> 
> Universidade de Aveiro
> 
> 	[[alternative HTML version deleted]]
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

I had tested the code with a couple of PDF's and it ran with no errors 
or warnings.
That error is telling that a "}" is not balanced but in my code they all 
are, RStudio checks it automatically.

Can you try to check in an editor with syntax highlighting?


Hope this helps,

Rui Barradas


From @nupty@g| @end|ng |rom gm@||@com  Thu Jul  6 05:48:45 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Thu, 6 Jul 2023 09:18:45 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CA+8X3fV8SxdDcaQ=Sd7rg6WmJ3xX0wgdjCSSf9wZ6zpaz9vDPQ@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CA+8X3fV8SxdDcaQ=Sd7rg6WmJ3xX0wgdjCSSf9wZ6zpaz9vDPQ@mail.gmail.com>
Message-ID: <CAFL9eukTu4s+3rbAJYHE5GZyDETeNbd9Qgrr3ffrVEwn4rnbXQ@mail.gmail.com>

I am working with Jim's solution, but I am getting some errors. I organized
the data in Excel and read into R using the Import option in the menu of
R-Studio. For some reason it is telling me my data is a Tibble and not a
dataframe. Am I using Tidyverse unknowingly? I thought I was working in
base-R.


> head(TrialData)# A tibble: 5 ? 8
  Income `MF None` `MF Equity` `MF Debt` `MF Hybrid` Bank ?? Bank ?? Bank ??
  <chr>      <dbl>       <dbl>     <dbl>       <dbl>   <dbl>   <dbl>
<dbl>1 $10         3.05        29.8      31.2        36      46.5
24.8   25.4 2 $25         2.29        28.8      32.6        36.3
54.0    24.4   18.7 3 $40         2.24        29.5      34.3
33.9    59.1    25     29   4 $75         1.71        28.9      35.6
     33.7    62.2    24.6   11.5 5 > $75       1.30        31.7
37.6        29.4    67.7    24.0    7.10# ? with abbreviated variable
names ?`Bank None`, ?`Bank Current`,#   ?`Bank Savings`


> png("Income_pcts.png",height=700)> par(mfrow=c(4,1))> plot(TrialData[,"Bank Current"], type="o",lwd=3,main="Bank Current", xlab="Income",ylab="%",xaxt="n")Warning messages:
1: In plot.window(xlim, ylim, log, ...) :
  graphical parameter "type" is obsolete
2: In axis(side = side, at = at, labels = labels, ...) :
  graphical parameter "type" is obsolete
3: In title(xlab = xlab, ylab = ylab, ...) :
  graphical parameter "type" is obsolete


On Fri, 30 Jun 2023 at 04:41, Jim Lemon <drjimlemon at gmail.com> wrote:

> Okay. Here is a modification that does four single line plots.
>
> at_df<-read.table(text=
>  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None Bank_Current
> Bank_Savings Bank_NA
>  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
>  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
>  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
>  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
>  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
>  No_Answer 9 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
>  header=TRUE,stringsAsFactors=FALSE)
> at_df<-at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA")]
> png("Income_pcts.png",height=700)
> par(mfrow=c(4,1))
> plot(at_df[,"Bank_Current"],
>  type="l",lwd=3,main="Bsnk_Current",
>  xlab="Income",ylab="%",xaxt="n")
> axis(1,at=1:5,labels=at_df$Income)
> plot(at_df[,"Bank_Savings"],
>  type="l",lwd=3,main="Bank_Sasvings",
>  xlab="Income",ylab="%",xaxt="n")
> axis(1,at=1:5,labels=at_df$Income)
> plot(at_df[,"MF_Equity"],
>  type="l",lwd=3,main="MF_Equity",
>  xlab="Income",ylab="%",xaxt="n")
> axis(1,at=1:5,labels=at_df$Income)
> plot(at_df[,"MF_Debt"],
>  type="l",lwd=3,main="MF_Debt",
>  xlab="Income",ylab="%",xaxt="n")
> axis(1,at=1:5,labels=at_df$Income)
> dev.off()
>
> Jim
>
> On Thu, Jun 29, 2023 at 1:49?PM Anupam Tyagi <anuptyagi at gmail.com> wrote:
> >
> > Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope you have
> > been well.
> >
> > Pikal, thanks. Your solution may be close to what I want. I did not know
> > that I was posting in HTML. I just copied the data from Excel and posted
> in
> > the email in Gmail. The data is still in Excel, because I have not yet
> > figured out what is a good way to organize it in R. I am posting it again
> > below as text. These are rows in Excel: 1,2,3,5,9 after MF are income
> > categories and No Answer category (9). Down the second column are
> > categories of MF and Bank AC. Rest of the columns are percentages.
> >
> > Jim, thanks for the graph. I am looking to plot only one line (category)
> > each in many small plots on the same page. I don't want to compare
> > different categories on the same graph as you do, but see how each
> category
> > varies by income, one category in each graph. Like Excel does with
> > Sparklines (Top menu: Insert, Sparklines, Lines). I have many categories
> > for many variables. I am only showing two MF and Bank AC.
> >
> > Income $10 $25 $40 $75 > $75 No Answer
> > MF 1 2 3 4 5 9
> > None 1 3.05 2.29 2.24 1.71 1.30 2.83
> > Equity 2 29.76 28.79 29.51 28.90 31.67 36.77
> > Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
> > Hybrid 4 36.00 36.27 33.94 33.74 29.44 27.25
> > Bank AC
> > None 1 46.54 54.01 59.1 62.17 67.67 60.87
> > Current 2 24.75 24.4 25 24.61 24.02 21.09
> > Savings 3 25.4 18.7 29 11.48 7.103 13.46
> > No Answer 9 3.307 2.891 13.4 1.746 1.208 4.577
> >
> >
> > On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com> wrote:
> >
> > > Hi Anupam,
> > > Haven't heard from you in a long time. Perhaps you want something like
> > > this:
> > >
> > > at_df<-read.table(text=
> > >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None Bank_Current
> > > Bank_Savings Bank_NA
> > >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> > >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> > >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> > >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> > >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
> > >  No_Answer 9 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> > >  header=TRUE,stringsAsFactors=FALSE)
> > > at_df<-at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA")]
> > > png("MF_Bank.png",height=600)
> > > par(mfrow=c(2,1))
> > > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
> > >  type="l",col=1:4,lty=1:4,lwd=3,
> > >  main="Percentages by Income and MF type",
> > >  xlab="Income",ylab="Percentage of group",xaxt="n")
> > > axis(1,at=1:5,labels=at_df$Income)
> > > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
> > >  lty=1:4,lwd=3,col=1:4)
> > > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
> > >  type="l",col=1:3,lty=1:4,lwd=3,
> > >  main="Percentages by Income and Bank type",
> > >  xlab="Income",ylab="Percentage of group",xaxt="n")
> > > axis(1,at=1:5,labels=at_df$Income)
> > > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
> > >  lty=1:4,lwd=3,col=1:3)
> > > dev.off()
> > >
> > > Jim
> > >
> > > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi <anuptyagi at gmail.com>
> wrote:
> > > >
> > > > Hello,
> > > >
> > > > I want to plot the following kind of data (percentage of respondents
> > > from a
> > > > survey) that varies by Income into many small *line* graphs in a
> panel of
> > > > graphs. I want to omit "No Answer" categories. I want to see how
> each one
> > > > of the categories (percentages), "None", " Equity", etc. varies by
> > > Income.
> > > > How can I do this? How to organize the data well and how to plot? I
> > > thought
> > > > Lattice may be a good package to plot this, but I don't know for
> sure. I
> > > > prefer to do this in Base-R if possible, but I am open to ggplot. Any
> > > ideas
> > > > will be helpful.
> > > >
> > > > Income
> > > > $10 $25 $40 $75 > $75 No Answer
> > > > MF 1 2 3 4 5 9
> > > > None 1 3.05 2.29 2.24 1.71 1.30 2.83
> > > > Equity 2 29.76 28.79 29.51 28.90 31.67 36.77
> > > > Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
> > > > Hybrid 4 36.00 36.27 33.94 33.74 29.44 27.25
> > > > Bank AC
> > > > None 1 46.54 54.01 59.1 62.17 67.67 60.87
> > > > Current 2 24.75 24.4 25 24.61 24.02 21.09
> > > > Savings 3 25.4 18.7 29 11.48 7.103 13.46
> > > > No Answer 9 3.307 2.891 13.4 1.746 1.208 4.577
> > > >
> > > > Thanks.
> > > > --
> > > > Anupam.
> > > >
> > > >         [[alternative HTML version deleted]]
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > > and provide commented, minimal, self-contained, reproducible code.
> > >
> >
> >
> > --
> > Anupam.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>


-- 
Anupam.

	[[alternative HTML version deleted]]


From j@rkko@to|vonen@19 @end|ng |rom gm@||@com  Thu Jul  6 09:12:16 2023
From: j@rkko@to|vonen@19 @end|ng |rom gm@||@com (Jarkko Toivonen)
Date: Thu, 6 Jul 2023 10:12:16 +0300
Subject: [R] Errors in "An introduction to R"
Message-ID: <4caaf4ba-0072-8040-5e0b-77a2f5725004@gmail.com>

Hi,

Thanks for the great manual! I noticed a few errors in Version 4.3.1 
(2023-06-16), though.

Early in the document a "working directory" refers to a file system 
directory, such as ~/work. It is also discussed whether
separate working directories should be used for separate analyses (page 
6). However, in sections 6.3.2 - 6.3.4, the term "working directory"
seems to refer to environment (or workspace). This is very confusing, 
especially in section 6.3.3, where it is written "to work with many 
different problems comfortably together in the same working directory". 
Maybe the word "environment" or "workspace" should be used instead of 
"working directory" in sections 6.3.2 - 6.3.4.

Footnote on page 30: space missing in "orawk".

Page 42, section 10.1: backslash between X and y is not shown in "Thus 
given a n by 1 vector y and an n by p matrix X then X y is defined as".

Jarkko


From @nupty@g| @end|ng |rom gm@||@com  Thu Jul  6 11:41:35 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Thu, 6 Jul 2023 15:11:35 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CH3PR22MB4514251DCFE77C2E74C285A8CF25A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
Message-ID: <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>

Hi John:

Thanks! Below is the data using your suggestion. I used "ggplot" to make a
graph. I am not too happy with it. I am looking for something simpler and
cleaner. Plot is attached.

I also tried "lattice" package, but nothing got plotted with "xyplot"
command, because it is looking for a numeric variable on x-axis.

ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) + geom_point() +
  geom_line() + facet_wrap(~Measure) + theme_classic()

> dput(TrialData4)structure(list(Income = c("$10", "$25", "$40", "$75", "> $75",
"$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
"> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
"$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
"$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
"$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
"$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
"> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
"$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
"$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
"$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
"$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
"> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
"$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
"$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
"$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75"
), Percent = c(3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79,
29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27,
33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75,
24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052,
2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51, 28.9, 31.67,
31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94, 33.74, 29.44,
46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4, 25, 24.61, 24.02,
25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244, 1.706, 1.297,
29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65,
37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17,
67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
7.103, 3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51,
28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94,
33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4,
25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103), Measure = c("MF None",
"MF None", "MF None", "MF None", "MF None", "MF Equity", "MF Equity",
"MF Equity", "MF Equity", "MF Equity", "MF Debt", "MF Debt",
"MF Debt", "MF Debt", "MF Debt", "MF Hybrid", "MF Hybrid", "MF Hybrid",
"MF Hybrid", "MF Hybrid", "Bank None", "Bank None", "Bank None",
"Bank None", "Bank None", "Bank Current", "Bank Current", "Bank Current",
"Bank Current", "Bank Current", "Bank Savings", "Bank Savings",
"Bank Savings", "Bank Savings", "Bank Savings", "MF None 1",
"MF None 1", "MF None 1", "MF None 1", "MF None 1", "MF Equity 1",
"MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Debt 1",
"MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Hybrid 1",
"MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "Bank None 1",
"Bank None 1", "Bank None 1", "Bank None 1", "Bank None 1", "Bank Current 1",
"Bank Current 1", "Bank Current 1", "Bank Current 1", "Bank Current 1",
"Bank Savings 1", "Bank Savings 1", "Bank Savings 1", "Bank Savings 1",
"Bank Savings 1", "MF None 2", "MF None 2", "MF None 2", "MF None 2",
"MF None 2", "MF Equity 2", "MF Equity 2", "MF Equity 2", "MF Equity 2",
"MF Equity 2", "MF Debt 2", "MF Debt 2", "MF Debt 2", "MF Debt 2",
"MF Debt 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2",
"MF Hybrid 2", "Bank None 2", "Bank None 2", "Bank None 2", "Bank None 2",
"Bank None 2", "Bank Current 2", "Bank Current 2", "Bank Current 2",
"Bank Current 2", "Bank Current 2", "Bank Savings 2", "Bank Savings 2",
"Bank Savings 2", "Bank Savings 2", "Bank Savings 2", "MF None 3",
"MF None 3", "MF None 3", "MF None 3", "MF None 3", "MF Equity 3",
"MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Debt 3",
"MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Hybrid 3",
"MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "Bank None 3",
"Bank None 3", "Bank None 3", "Bank None 3", "Bank None 3", "Bank Current 3",
"Bank Current 3", "Bank Current 3", "Bank Current 3", "Bank Current 3",
"Bank Savings 3", "Bank Savings 3", "Bank Savings 3", "Bank Savings 3",
"Bank Savings 3")), class = c("tbl_df", "tbl", "data.frame"), row.names = c(NA,
-140L))




On Thu, 29 Jun 2023 at 21:11, John Kane <jrkrideau at gmail.com> wrote:

> Anupa,
>
> I think your  best bet with your data would be to tidy it up in Excel,
> read it into  R using something like the readxl package and then supply
> some sample data is the dput() function.
>
> In the case of a large dataset something like dput(head(mydata, 100))
> should supply the data we need. Just do dput(mydata) where *mydata* is your
> data. Copy the output and paste it here.
>
> On Thu, 29 Jun 2023 at 08:37, Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
>
>> Reposting the data did not help. We do not like to guess, and doing so
>> takes a great deal of time that is likely wasted.
>> Rows are observations.
>> Columns are variables.
>> In Excel, the first row will be variable names and all subsequent rows
>> will be observations.
>>
>> Income is the first variable. It has seven states: $10, $25, $40, $75,
>> >$75, "No", "Answer"
>> MF is the second variable. It has six values: 1, 2, 3, 4, 5, 9
>> None is the third variable. It has seven values: 1, 3.05,  2.29, 2.24,
>> 1.71, 1.30, 2.83
>> Equity is the last variable with many states, both numeric and text. A
>> computer will read it all as text.
>>
>> As written the data cannot be analyzed.
>>
>> Equity looks like it should be numeric. However, it has text values:
>> "Debt", "Hybrid", Bank", "AC", "None", "Current", "Savings", "No", and
>> "Answer"
>>
>> In looking at the data I try to find some organization where every
>> variable has the same number of rows as every other variable. I fail with
>> these data.
>> I could combine "No" and "Answer" into one name "No Answer" to make it
>> agree with MF, but then it does not work for None.
>>
>>
>> Please rework the data in Excel so that we can properly interpret the
>> content. If it is badly organized in Excel, moving it to R will not help.
>> Below, I tried adding carriage returns and spaces to organize the data,
>> but I have a column of numbers that are not identified. The values below
>> $10 do not make much sense compared to other values.
>>
>> I am tired of guessing.
>>
>> Tim
>>
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam Tyagi
>> Sent: Wednesday, June 28, 2023 11:49 PM
>> To: r-help at r-project.org
>> Subject: Re: [R] Plotting factors in graph panel
>>
>> [External Email]
>>
>> Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope you have
>> been well.
>>
>> Pikal, thanks. Your solution may be close to what I want. I did not know
>> that I was posting in HTML. I just copied the data from Excel and posted in
>> the email in Gmail. The data is still in Excel, because I have not yet
>> figured out what is a good way to organize it in R. I am posting it again
>> below as text. These are rows in Excel: 1,2,3,5,9 after MF are income
>> categories and No Answer category (9). Down the second column are
>> categories of MF and Bank AC. Rest of the columns are percentages.
>>
>> Jim, thanks for the graph. I am looking to plot only one line (category)
>> each in many small plots on the same page. I don't want to compare
>> different categories on the same graph as you do, but see how each category
>> varies by income, one category in each graph. Like Excel does with
>> Sparklines (Top menu: Insert, Sparklines, Lines). I have many categories
>> for many variables. I am only showing two MF and Bank AC.
>>
>> Income        $10 $25     $40      $75   > $75    No Answer
>> MF                   1      2         3           4         5          9
>> None               1   3.05     2.29    2.24     1.71    1.30
>>    2.83
>> Equity             2    29.76  28.79  29.51 28.90   31.67            36.77
>>
>> Debt                3  31.18  32.64  34.31  35.65  37.59             33.15
>>
>> Hybrid              4 36.00 36.27 33.94 33.74 29.44 27.25
>>
>> Bank AC None 1 46.54 54.01 59.1 62.17 67.67 60.87
>>
>> Current            2 24.75 24.4 25 24.61 24.02 21.09
>>
>> Savings             3 25.4 18.7 29 11.48 7.103 13.46
>>
>> No Answer       9 3.307 2.891 13.4 1.746 1.208 4.577
>>
>>
>> On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com> wrote:
>>
>> > Hi Anupam,
>> > Haven't heard from you in a long time. Perhaps you want something like
>> > this:
>> >
>> > at_df<-read.table(text=
>> >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None Bank_Current
>> > Bank_Savings Bank_NA
>> >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
>> >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
>> >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
>> >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
>> >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208  No_Answer 9
>> > 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
>> >  header=TRUE,stringsAsFactors=FALSE)
>> > at_df<-at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA")]
>> > png("MF_Bank.png",height=600)
>> > par(mfrow=c(2,1))
>> > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
>> >  type="l",col=1:4,lty=1:4,lwd=3,
>> >  main="Percentages by Income and MF type",
>> > xlab="Income",ylab="Percentage of group",xaxt="n")
>> > axis(1,at=1:5,labels=at_df$Income)
>> > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
>> >  lty=1:4,lwd=3,col=1:4)
>> > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
>> >  type="l",col=1:3,lty=1:4,lwd=3,
>> >  main="Percentages by Income and Bank type",
>> > xlab="Income",ylab="Percentage of group",xaxt="n")
>> > axis(1,at=1:5,labels=at_df$Income)
>> > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
>> >  lty=1:4,lwd=3,col=1:3)
>> > dev.off()
>> >
>> > Jim
>> >
>> > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi <anuptyagi at gmail.com>
>> wrote:
>> > >
>> > > Hello,
>> > >
>> > > I want to plot the following kind of data (percentage of respondents
>> > from a
>> > > survey) that varies by Income into many small *line* graphs in a
>> > > panel of graphs. I want to omit "No Answer" categories. I want to
>> > > see how each one of the categories (percentages), "None", " Equity",
>> > > etc. varies by
>> > Income.
>> > > How can I do this? How to organize the data well and how to plot? I
>> > thought
>> > > Lattice may be a good package to plot this, but I don't know for
>> > > sure. I prefer to do this in Base-R if possible, but I am open to
>> > > ggplot. Any
>> > ideas
>> > > will be helpful.
>> > >
>> > > Income
>> > > $10 $25 $40 $75 > $75 No Answer
>> > > MF 1 2 3 4 5 9
>> > > None 1 3.05 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51
>> > > 28.90 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15 Hybrid
>> > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54 54.01
>> > > 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02 21.09
>> > > Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9 3.307 2.891
>> > > 13.4 1.746 1.208 4.577
>> > >
>> > > Thanks.
>> > > --
>> > > Anupam.
>> > >
>> > >         [[alternative HTML version deleted]]
>> > >
>> > > ______________________________________________
>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > > https://st/
>> > > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl
>> > > .edu%7C59874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a6233
>> > > 1e1b84%7C0%7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoi
>> > > MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C
>> > > %7C%7C&sdata=xoaDMG7ogY4tMtqe30pONZrBdk0eq2cW%2BgdwlDHneWY%3D&reserv
>> > > ed=0
>> > > PLEASE do read the posting guide
>> > http://www.r/
>> > -project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C59
>> > 874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
>> > 7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
>> > CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=H7
>> > 6XCa%2FULBGUn0Lok93l6mtHzo0snq5G0a%2BL4sEH8%2F8%3D&reserved=0
>> > > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>>
>> --
>> Anupam.
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.r-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>
> --
> John Kane
> Kingston ON Canada
>


-- 
Anupam.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: TrialData4.png
Type: image/png
Size: 9740 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20230706/7e56f392/attachment.png>

From @nupty@g| @end|ng |rom gm@||@com  Thu Jul  6 11:51:42 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Thu, 6 Jul 2023 15:21:42 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CH3PR22MB4514251DCFE77C2E74C285A8CF25A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
 <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>
Message-ID: <CAFL9eu=QJG8X9PDG0RNxP88TicefE_DAgnkK-nxWkD9oLt6Z0g@mail.gmail.com>

Btw, I think "lattice" graphics will provide a better solution than
"ggplot", because it puts appropriate (space saving) markers on the axes
and does axes labels well. However, I cannot figure out how to do it in
"lattice".


On Thu, 6 Jul 2023 at 15:11, Anupam Tyagi <anuptyagi at gmail.com> wrote:

> Hi John:
>
> Thanks! Below is the data using your suggestion. I used "ggplot" to make a
> graph. I am not too happy with it. I am looking for something simpler and
> cleaner. Plot is attached.
>
> I also tried "lattice" package, but nothing got plotted with "xyplot"
> command, because it is looking for a numeric variable on x-axis.
>
> ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) + geom_point()
> +
>   geom_line() + facet_wrap(~Measure) + theme_classic()
>
> > dput(TrialData4)structure(list(Income = c("$10", "$25", "$40", "$75", "> $75",
> "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
> "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
> "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
> "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75"
> ), Percent = c(3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79,
> 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27,
> 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75,
> 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052,
> 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51, 28.9, 31.67,
> 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94, 33.74, 29.44,
> 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4, 25, 24.61, 24.02,
> 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244, 1.706, 1.297,
> 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65,
> 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17,
> 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
> 7.103, 3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51,
> 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94,
> 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4,
> 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103), Measure = c("MF None",
> "MF None", "MF None", "MF None", "MF None", "MF Equity", "MF Equity",
> "MF Equity", "MF Equity", "MF Equity", "MF Debt", "MF Debt",
> "MF Debt", "MF Debt", "MF Debt", "MF Hybrid", "MF Hybrid", "MF Hybrid",
> "MF Hybrid", "MF Hybrid", "Bank None", "Bank None", "Bank None",
> "Bank None", "Bank None", "Bank Current", "Bank Current", "Bank Current",
> "Bank Current", "Bank Current", "Bank Savings", "Bank Savings",
> "Bank Savings", "Bank Savings", "Bank Savings", "MF None 1",
> "MF None 1", "MF None 1", "MF None 1", "MF None 1", "MF Equity 1",
> "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Debt 1",
> "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Hybrid 1",
> "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "Bank None 1",
> "Bank None 1", "Bank None 1", "Bank None 1", "Bank None 1", "Bank Current 1",
> "Bank Current 1", "Bank Current 1", "Bank Current 1", "Bank Current 1",
> "Bank Savings 1", "Bank Savings 1", "Bank Savings 1", "Bank Savings 1",
> "Bank Savings 1", "MF None 2", "MF None 2", "MF None 2", "MF None 2",
> "MF None 2", "MF Equity 2", "MF Equity 2", "MF Equity 2", "MF Equity 2",
> "MF Equity 2", "MF Debt 2", "MF Debt 2", "MF Debt 2", "MF Debt 2",
> "MF Debt 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2",
> "MF Hybrid 2", "Bank None 2", "Bank None 2", "Bank None 2", "Bank None 2",
> "Bank None 2", "Bank Current 2", "Bank Current 2", "Bank Current 2",
> "Bank Current 2", "Bank Current 2", "Bank Savings 2", "Bank Savings 2",
> "Bank Savings 2", "Bank Savings 2", "Bank Savings 2", "MF None 3",
> "MF None 3", "MF None 3", "MF None 3", "MF None 3", "MF Equity 3",
> "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Debt 3",
> "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Hybrid 3",
> "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "Bank None 3",
> "Bank None 3", "Bank None 3", "Bank None 3", "Bank None 3", "Bank Current 3",
> "Bank Current 3", "Bank Current 3", "Bank Current 3", "Bank Current 3",
> "Bank Savings 3", "Bank Savings 3", "Bank Savings 3", "Bank Savings 3",
> "Bank Savings 3")), class = c("tbl_df", "tbl", "data.frame"), row.names = c(NA,
> -140L))
>
>
>
>
> On Thu, 29 Jun 2023 at 21:11, John Kane <jrkrideau at gmail.com> wrote:
>
>> Anupa,
>>
>> I think your  best bet with your data would be to tidy it up in Excel,
>> read it into  R using something like the readxl package and then supply
>> some sample data is the dput() function.
>>
>> In the case of a large dataset something like dput(head(mydata, 100))
>> should supply the data we need. Just do dput(mydata) where *mydata* is your
>> data. Copy the output and paste it here.
>>
>> On Thu, 29 Jun 2023 at 08:37, Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
>>
>>> Reposting the data did not help. We do not like to guess, and doing so
>>> takes a great deal of time that is likely wasted.
>>> Rows are observations.
>>> Columns are variables.
>>> In Excel, the first row will be variable names and all subsequent rows
>>> will be observations.
>>>
>>> Income is the first variable. It has seven states: $10, $25, $40, $75,
>>> >$75, "No", "Answer"
>>> MF is the second variable. It has six values: 1, 2, 3, 4, 5, 9
>>> None is the third variable. It has seven values: 1, 3.05,  2.29, 2.24,
>>> 1.71, 1.30, 2.83
>>> Equity is the last variable with many states, both numeric and text. A
>>> computer will read it all as text.
>>>
>>> As written the data cannot be analyzed.
>>>
>>> Equity looks like it should be numeric. However, it has text values:
>>> "Debt", "Hybrid", Bank", "AC", "None", "Current", "Savings", "No", and
>>> "Answer"
>>>
>>> In looking at the data I try to find some organization where every
>>> variable has the same number of rows as every other variable. I fail with
>>> these data.
>>> I could combine "No" and "Answer" into one name "No Answer" to make it
>>> agree with MF, but then it does not work for None.
>>>
>>>
>>> Please rework the data in Excel so that we can properly interpret the
>>> content. If it is badly organized in Excel, moving it to R will not help.
>>> Below, I tried adding carriage returns and spaces to organize the data,
>>> but I have a column of numbers that are not identified. The values below
>>> $10 do not make much sense compared to other values.
>>>
>>> I am tired of guessing.
>>>
>>> Tim
>>>
>>> -----Original Message-----
>>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam Tyagi
>>> Sent: Wednesday, June 28, 2023 11:49 PM
>>> To: r-help at r-project.org
>>> Subject: Re: [R] Plotting factors in graph panel
>>>
>>> [External Email]
>>>
>>> Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope you have
>>> been well.
>>>
>>> Pikal, thanks. Your solution may be close to what I want. I did not know
>>> that I was posting in HTML. I just copied the data from Excel and posted in
>>> the email in Gmail. The data is still in Excel, because I have not yet
>>> figured out what is a good way to organize it in R. I am posting it again
>>> below as text. These are rows in Excel: 1,2,3,5,9 after MF are income
>>> categories and No Answer category (9). Down the second column are
>>> categories of MF and Bank AC. Rest of the columns are percentages.
>>>
>>> Jim, thanks for the graph. I am looking to plot only one line (category)
>>> each in many small plots on the same page. I don't want to compare
>>> different categories on the same graph as you do, but see how each category
>>> varies by income, one category in each graph. Like Excel does with
>>> Sparklines (Top menu: Insert, Sparklines, Lines). I have many categories
>>> for many variables. I am only showing two MF and Bank AC.
>>>
>>> Income        $10 $25     $40      $75   > $75    No Answer
>>> MF                   1      2         3           4         5          9
>>> None               1   3.05     2.29    2.24     1.71    1.30
>>>    2.83
>>> Equity             2    29.76  28.79  29.51 28.90   31.67
>>> 36.77
>>>
>>> Debt                3  31.18  32.64  34.31  35.65  37.59
>>>  33.15
>>>
>>> Hybrid              4 36.00 36.27 33.94 33.74 29.44 27.25
>>>
>>> Bank AC None 1 46.54 54.01 59.1 62.17 67.67 60.87
>>>
>>> Current            2 24.75 24.4 25 24.61 24.02 21.09
>>>
>>> Savings             3 25.4 18.7 29 11.48 7.103 13.46
>>>
>>> No Answer       9 3.307 2.891 13.4 1.746 1.208 4.577
>>>
>>>
>>> On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com> wrote:
>>>
>>> > Hi Anupam,
>>> > Haven't heard from you in a long time. Perhaps you want something like
>>> > this:
>>> >
>>> > at_df<-read.table(text=
>>> >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None Bank_Current
>>> > Bank_Savings Bank_NA
>>> >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
>>> >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
>>> >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
>>> >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
>>> >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208  No_Answer 9
>>> > 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
>>> >  header=TRUE,stringsAsFactors=FALSE)
>>> > at_df<-at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA")]
>>> > png("MF_Bank.png",height=600)
>>> > par(mfrow=c(2,1))
>>> > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
>>> >  type="l",col=1:4,lty=1:4,lwd=3,
>>> >  main="Percentages by Income and MF type",
>>> > xlab="Income",ylab="Percentage of group",xaxt="n")
>>> > axis(1,at=1:5,labels=at_df$Income)
>>> > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
>>> >  lty=1:4,lwd=3,col=1:4)
>>> > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
>>> >  type="l",col=1:3,lty=1:4,lwd=3,
>>> >  main="Percentages by Income and Bank type",
>>> > xlab="Income",ylab="Percentage of group",xaxt="n")
>>> > axis(1,at=1:5,labels=at_df$Income)
>>> > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
>>> >  lty=1:4,lwd=3,col=1:3)
>>> > dev.off()
>>> >
>>> > Jim
>>> >
>>> > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi <anuptyagi at gmail.com>
>>> wrote:
>>> > >
>>> > > Hello,
>>> > >
>>> > > I want to plot the following kind of data (percentage of respondents
>>> > from a
>>> > > survey) that varies by Income into many small *line* graphs in a
>>> > > panel of graphs. I want to omit "No Answer" categories. I want to
>>> > > see how each one of the categories (percentages), "None", " Equity",
>>> > > etc. varies by
>>> > Income.
>>> > > How can I do this? How to organize the data well and how to plot? I
>>> > thought
>>> > > Lattice may be a good package to plot this, but I don't know for
>>> > > sure. I prefer to do this in Base-R if possible, but I am open to
>>> > > ggplot. Any
>>> > ideas
>>> > > will be helpful.
>>> > >
>>> > > Income
>>> > > $10 $25 $40 $75 > $75 No Answer
>>> > > MF 1 2 3 4 5 9
>>> > > None 1 3.05 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51
>>> > > 28.90 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15 Hybrid
>>> > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54 54.01
>>> > > 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02 21.09
>>> > > Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9 3.307 2.891
>>> > > 13.4 1.746 1.208 4.577
>>> > >
>>> > > Thanks.
>>> > > --
>>> > > Anupam.
>>> > >
>>> > >         [[alternative HTML version deleted]]
>>> > >
>>> > > ______________________________________________
>>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> > > https://st/
>>> > > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl
>>> > > .edu%7C59874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a6233
>>> > > 1e1b84%7C0%7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoi
>>> > > MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C
>>> > > %7C%7C&sdata=xoaDMG7ogY4tMtqe30pONZrBdk0eq2cW%2BgdwlDHneWY%3D&reserv
>>> > > ed=0
>>> > > PLEASE do read the posting guide
>>> > http://www.r/
>>> > -project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C59
>>> > 874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
>>> > 7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
>>> > CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=H7
>>> > 6XCa%2FULBGUn0Lok93l6mtHzo0snq5G0a%2BL4sEH8%2F8%3D&reserved=0
>>> > > and provide commented, minimal, self-contained, reproducible code.
>>> >
>>>
>>>
>>> --
>>> Anupam.
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.r-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>
>> --
>> John Kane
>> Kingston ON Canada
>>
>
>
> --
> Anupam.
>
>

-- 
Anupam.

	[[alternative HTML version deleted]]


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Thu Jul  6 15:05:30 2023
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Thu, 6 Jul 2023 18:35:30 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CAFL9eu=QJG8X9PDG0RNxP88TicefE_DAgnkK-nxWkD9oLt6Z0g@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CH3PR22MB4514251DCFE77C2E74C285A8CF25A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
 <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>
 <CAFL9eu=QJG8X9PDG0RNxP88TicefE_DAgnkK-nxWkD9oLt6Z0g@mail.gmail.com>
Message-ID: <CADfFDC4hrX8huz2HnDMLM=WT+z5UttBfk8rQeOGwLj14CZN2Pw@mail.gmail.com>

On Thu, 6 Jul 2023 at 15:21, Anupam Tyagi <anuptyagi at gmail.com> wrote:
>
> Btw, I think "lattice" graphics will provide a better solution than
> "ggplot", because it puts appropriate (space saving) markers on the axes
> and does axes labels well. However, I cannot figure out how to do it in
> "lattice".

You will need to convert Income to a factor first. Alternatively, use
dotplot() instead of xyplot(), but that will sort the levels wrongly,
so better to make the factor first anyway.

TrialData4 <- within(TrialData4,
{
    Income <- factor(Income, levels = c("$10", "$25", "$40", "$75", "> $75"))
})

xyplot(Percent ~ Income | Measure, TrialData4,
       type = "o", pch = 16, as.table = TRUE, grid = TRUE)

or

dotplot(Percent ~ Income | Measure, TrialData4,
        type = "o", as.table = TRUE)

This is not really any different from the ggplot() version though.
Maybe you just don't like the effect of the '+ theme_classic()' part.

Best,
-Deepayan


> On Thu, 6 Jul 2023 at 15:11, Anupam Tyagi <anuptyagi at gmail.com> wrote:
>
> > Hi John:
> >
> > Thanks! Below is the data using your suggestion. I used "ggplot" to make a
> > graph. I am not too happy with it. I am looking for something simpler and
> > cleaner. Plot is attached.
> >
> > I also tried "lattice" package, but nothing got plotted with "xyplot"
> > command, because it is looking for a numeric variable on x-axis.
> >
> > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) + geom_point()
> > +
> >   geom_line() + facet_wrap(~Measure) + theme_classic()
> >
> > > dput(TrialData4)structure(list(Income = c("$10", "$25", "$40", "$75", "> $75",
> > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
> > "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
> > "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
> > "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75"
> > ), Percent = c(3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79,
> > 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27,
> > 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75,
> > 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052,
> > 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51, 28.9, 31.67,
> > 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94, 33.74, 29.44,
> > 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4, 25, 24.61, 24.02,
> > 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244, 1.706, 1.297,
> > 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65,
> > 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17,
> > 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
> > 7.103, 3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51,
> > 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94,
> > 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4,
> > 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103), Measure = c("MF None",
> > "MF None", "MF None", "MF None", "MF None", "MF Equity", "MF Equity",
> > "MF Equity", "MF Equity", "MF Equity", "MF Debt", "MF Debt",
> > "MF Debt", "MF Debt", "MF Debt", "MF Hybrid", "MF Hybrid", "MF Hybrid",
> > "MF Hybrid", "MF Hybrid", "Bank None", "Bank None", "Bank None",
> > "Bank None", "Bank None", "Bank Current", "Bank Current", "Bank Current",
> > "Bank Current", "Bank Current", "Bank Savings", "Bank Savings",
> > "Bank Savings", "Bank Savings", "Bank Savings", "MF None 1",
> > "MF None 1", "MF None 1", "MF None 1", "MF None 1", "MF Equity 1",
> > "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Debt 1",
> > "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Hybrid 1",
> > "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "Bank None 1",
> > "Bank None 1", "Bank None 1", "Bank None 1", "Bank None 1", "Bank Current 1",
> > "Bank Current 1", "Bank Current 1", "Bank Current 1", "Bank Current 1",
> > "Bank Savings 1", "Bank Savings 1", "Bank Savings 1", "Bank Savings 1",
> > "Bank Savings 1", "MF None 2", "MF None 2", "MF None 2", "MF None 2",
> > "MF None 2", "MF Equity 2", "MF Equity 2", "MF Equity 2", "MF Equity 2",
> > "MF Equity 2", "MF Debt 2", "MF Debt 2", "MF Debt 2", "MF Debt 2",
> > "MF Debt 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2",
> > "MF Hybrid 2", "Bank None 2", "Bank None 2", "Bank None 2", "Bank None 2",
> > "Bank None 2", "Bank Current 2", "Bank Current 2", "Bank Current 2",
> > "Bank Current 2", "Bank Current 2", "Bank Savings 2", "Bank Savings 2",
> > "Bank Savings 2", "Bank Savings 2", "Bank Savings 2", "MF None 3",
> > "MF None 3", "MF None 3", "MF None 3", "MF None 3", "MF Equity 3",
> > "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Debt 3",
> > "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Hybrid 3",
> > "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "Bank None 3",
> > "Bank None 3", "Bank None 3", "Bank None 3", "Bank None 3", "Bank Current 3",
> > "Bank Current 3", "Bank Current 3", "Bank Current 3", "Bank Current 3",
> > "Bank Savings 3", "Bank Savings 3", "Bank Savings 3", "Bank Savings 3",
> > "Bank Savings 3")), class = c("tbl_df", "tbl", "data.frame"), row.names = c(NA,
> > -140L))
> >
> >
> >
> >
> > On Thu, 29 Jun 2023 at 21:11, John Kane <jrkrideau at gmail.com> wrote:
> >
> >> Anupa,
> >>
> >> I think your  best bet with your data would be to tidy it up in Excel,
> >> read it into  R using something like the readxl package and then supply
> >> some sample data is the dput() function.
> >>
> >> In the case of a large dataset something like dput(head(mydata, 100))
> >> should supply the data we need. Just do dput(mydata) where *mydata* is your
> >> data. Copy the output and paste it here.
> >>
> >> On Thu, 29 Jun 2023 at 08:37, Ebert,Timothy Aaron <tebert at ufl.edu> wrote:
> >>
> >>> Reposting the data did not help. We do not like to guess, and doing so
> >>> takes a great deal of time that is likely wasted.
> >>> Rows are observations.
> >>> Columns are variables.
> >>> In Excel, the first row will be variable names and all subsequent rows
> >>> will be observations.
> >>>
> >>> Income is the first variable. It has seven states: $10, $25, $40, $75,
> >>> >$75, "No", "Answer"
> >>> MF is the second variable. It has six values: 1, 2, 3, 4, 5, 9
> >>> None is the third variable. It has seven values: 1, 3.05,  2.29, 2.24,
> >>> 1.71, 1.30, 2.83
> >>> Equity is the last variable with many states, both numeric and text. A
> >>> computer will read it all as text.
> >>>
> >>> As written the data cannot be analyzed.
> >>>
> >>> Equity looks like it should be numeric. However, it has text values:
> >>> "Debt", "Hybrid", Bank", "AC", "None", "Current", "Savings", "No", and
> >>> "Answer"
> >>>
> >>> In looking at the data I try to find some organization where every
> >>> variable has the same number of rows as every other variable. I fail with
> >>> these data.
> >>> I could combine "No" and "Answer" into one name "No Answer" to make it
> >>> agree with MF, but then it does not work for None.
> >>>
> >>>
> >>> Please rework the data in Excel so that we can properly interpret the
> >>> content. If it is badly organized in Excel, moving it to R will not help.
> >>> Below, I tried adding carriage returns and spaces to organize the data,
> >>> but I have a column of numbers that are not identified. The values below
> >>> $10 do not make much sense compared to other values.
> >>>
> >>> I am tired of guessing.
> >>>
> >>> Tim
> >>>
> >>> -----Original Message-----
> >>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam Tyagi
> >>> Sent: Wednesday, June 28, 2023 11:49 PM
> >>> To: r-help at r-project.org
> >>> Subject: Re: [R] Plotting factors in graph panel
> >>>
> >>> [External Email]
> >>>
> >>> Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope you have
> >>> been well.
> >>>
> >>> Pikal, thanks. Your solution may be close to what I want. I did not know
> >>> that I was posting in HTML. I just copied the data from Excel and posted in
> >>> the email in Gmail. The data is still in Excel, because I have not yet
> >>> figured out what is a good way to organize it in R. I am posting it again
> >>> below as text. These are rows in Excel: 1,2,3,5,9 after MF are income
> >>> categories and No Answer category (9). Down the second column are
> >>> categories of MF and Bank AC. Rest of the columns are percentages.
> >>>
> >>> Jim, thanks for the graph. I am looking to plot only one line (category)
> >>> each in many small plots on the same page. I don't want to compare
> >>> different categories on the same graph as you do, but see how each category
> >>> varies by income, one category in each graph. Like Excel does with
> >>> Sparklines (Top menu: Insert, Sparklines, Lines). I have many categories
> >>> for many variables. I am only showing two MF and Bank AC.
> >>>
> >>> Income        $10 $25     $40      $75   > $75    No Answer
> >>> MF                   1      2         3           4         5          9
> >>> None               1   3.05     2.29    2.24     1.71    1.30
> >>>    2.83
> >>> Equity             2    29.76  28.79  29.51 28.90   31.67
> >>> 36.77
> >>>
> >>> Debt                3  31.18  32.64  34.31  35.65  37.59
> >>>  33.15
> >>>
> >>> Hybrid              4 36.00 36.27 33.94 33.74 29.44 27.25
> >>>
> >>> Bank AC None 1 46.54 54.01 59.1 62.17 67.67 60.87
> >>>
> >>> Current            2 24.75 24.4 25 24.61 24.02 21.09
> >>>
> >>> Savings             3 25.4 18.7 29 11.48 7.103 13.46
> >>>
> >>> No Answer       9 3.307 2.891 13.4 1.746 1.208 4.577
> >>>
> >>>
> >>> On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com> wrote:
> >>>
> >>> > Hi Anupam,
> >>> > Haven't heard from you in a long time. Perhaps you want something like
> >>> > this:
> >>> >
> >>> > at_df<-read.table(text=
> >>> >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None Bank_Current
> >>> > Bank_Savings Bank_NA
> >>> >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> >>> >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> >>> >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> >>> >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> >>> >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208  No_Answer 9
> >>> > 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> >>> >  header=TRUE,stringsAsFactors=FALSE)
> >>> > at_df<-at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA")]
> >>> > png("MF_Bank.png",height=600)
> >>> > par(mfrow=c(2,1))
> >>> > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
> >>> >  type="l",col=1:4,lty=1:4,lwd=3,
> >>> >  main="Percentages by Income and MF type",
> >>> > xlab="Income",ylab="Percentage of group",xaxt="n")
> >>> > axis(1,at=1:5,labels=at_df$Income)
> >>> > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
> >>> >  lty=1:4,lwd=3,col=1:4)
> >>> > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
> >>> >  type="l",col=1:3,lty=1:4,lwd=3,
> >>> >  main="Percentages by Income and Bank type",
> >>> > xlab="Income",ylab="Percentage of group",xaxt="n")
> >>> > axis(1,at=1:5,labels=at_df$Income)
> >>> > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
> >>> >  lty=1:4,lwd=3,col=1:3)
> >>> > dev.off()
> >>> >
> >>> > Jim
> >>> >
> >>> > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi <anuptyagi at gmail.com>
> >>> wrote:
> >>> > >
> >>> > > Hello,
> >>> > >
> >>> > > I want to plot the following kind of data (percentage of respondents
> >>> > from a
> >>> > > survey) that varies by Income into many small *line* graphs in a
> >>> > > panel of graphs. I want to omit "No Answer" categories. I want to
> >>> > > see how each one of the categories (percentages), "None", " Equity",
> >>> > > etc. varies by
> >>> > Income.
> >>> > > How can I do this? How to organize the data well and how to plot? I
> >>> > thought
> >>> > > Lattice may be a good package to plot this, but I don't know for
> >>> > > sure. I prefer to do this in Base-R if possible, but I am open to
> >>> > > ggplot. Any
> >>> > ideas
> >>> > > will be helpful.
> >>> > >
> >>> > > Income
> >>> > > $10 $25 $40 $75 > $75 No Answer
> >>> > > MF 1 2 3 4 5 9
> >>> > > None 1 3.05 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51
> >>> > > 28.90 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15 Hybrid
> >>> > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54 54.01
> >>> > > 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02 21.09
> >>> > > Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9 3.307 2.891
> >>> > > 13.4 1.746 1.208 4.577
> >>> > >
> >>> > > Thanks.
> >>> > > --
> >>> > > Anupam.
> >>> > >
> >>> > >         [[alternative HTML version deleted]]
> >>> > >
> >>> > > ______________________________________________
> >>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> > > https://st/
> >>> > > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl
> >>> > > .edu%7C59874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a6233
> >>> > > 1e1b84%7C0%7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoi
> >>> > > MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C
> >>> > > %7C%7C&sdata=xoaDMG7ogY4tMtqe30pONZrBdk0eq2cW%2BgdwlDHneWY%3D&reserv
> >>> > > ed=0
> >>> > > PLEASE do read the posting guide
> >>> > http://www.r/
> >>> > -project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C59
> >>> > 874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
> >>> > 7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
> >>> > CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=H7
> >>> > 6XCa%2FULBGUn0Lok93l6mtHzo0snq5G0a%2BL4sEH8%2F8%3D&reserved=0
> >>> > > and provide commented, minimal, self-contained, reproducible code.
> >>> >
> >>>
> >>>
> >>> --
> >>> Anupam.
> >>>
> >>>         [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.r-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>>
> >>
> >>
> >> --
> >> John Kane
> >> Kingston ON Canada
> >>
> >
> >
> > --
> > Anupam.
> >
> >
>
> --
> Anupam.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @hu|@|@cheung @end|ng |rom gm@||@com  Thu Jul  6 11:14:27 2023
From: @hu|@|@cheung @end|ng |rom gm@||@com (Shu Fai Cheung)
Date: Thu, 6 Jul 2023 17:14:27 +0800
Subject: [R] printCoefmat() and zap.ind
Message-ID: <CAPVJd2UBbr--JaN20EG65aFt+yMSeeQ_pT2SfPKD+CFPW+seeQ@mail.gmail.com>

Hi All,

I would like to ask two questions about printCoefmat().

First, I found a behavior of printCoefmat() that looks strange to me,
but I am not sure whether this is an intended behavior:

``` r
set.seed(5689417)
n <- 10000
x1 <- rnorm(n)
x2 <- rnorm(n)
y <- .5 * x1 + .6 * x2 + rnorm(n, -0.0002366, .2)
dat <- data.frame(x1, x2, y)
out <- lm(y ~ x1 + x2, dat)
out_summary <- summary(out)
printCoefmat(out_summary$coefficients)
#>               Estimate Std. Error t value Pr(>|t|)
#> (Intercept) 1.7228e-08 1.9908e-03    0.00        1
#> x1          5.0212e-01 1.9715e-03  254.70   <2e-16 ***
#> x2          6.0016e-01 1.9924e-03  301.23   <2e-16 ***
#> ---
#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
printCoefmat(out_summary$coefficients,
             zap.ind = 1,
             digits = 4)
#>             Estimate Std. Error t value Pr(>|t|)
#> (Intercept) 0.000000   0.001991     0.0        1
#> x1          0.502100   0.001971   254.7   <2e-16 ***
#> x2          0.600200   0.001992   301.2   <2e-16 ***
#> ---
#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
```

With zap.ind = 1, the values in "Estimate" were correctly
zapped using digits = 4. However, by default, "Estimate"
and "Std. Error" are formatted together. Because the
standard errors are small, with digits = 4, zero's were added
to values in "Estimate", resulting in "0.502100" and
"0.600200", which are misleading because, if rounded to
the 6th decimal place, the values to be displayed should
be "0.502122" and "0.600162".

Is this behavior of printCoefmat() intended/normal?

Second, how can I use zap without this behavior?
In cases like the one above, I need to use zap such that
the intercept will not be displayed in scientific notation.
Disabling scientific notation cannot achieve the desired
goal.

I tried adding cs.ind = 1:

```r
printCoefmat(out_summary$coefficients,
             zap.ind = 1,
             digits = 4,
             cs.ind = 1)
#>             Estimate Std. Error t value Pr(>|t|)
#> (Intercept)   0.0000   0.001991     0.0        1
#> x1            0.5021   0.001971   254.7   <2e-16 ***
#> x2            0.6002   0.001992   301.2   <2e-16 ***
#> ---
#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
```

However, this solution is not ideal because the numbers
of decimal places of "Estimate" and "Std. Error" are
different. How can I get the output like this one?

```r
#>             Estimate Std. Error t value Pr(>|t|)
#> (Intercept)   0.0000   0.0020     0.0        1
#> x1            0.5021   0.0020   254.7   <2e-16 ***
#> x2            0.6002   0.0020   301.2   <2e-16 ***
```

Thanks for your attention.

Regards,
Shu Fai Cheung


From petr@p|k@| @end|ng |rom prechez@@cz  Fri Jul  7 08:32:50 2023
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Fri, 7 Jul 2023 06:32:50 +0000
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CADfFDC4hrX8huz2HnDMLM=WT+z5UttBfk8rQeOGwLj14CZN2Pw@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CH3PR22MB4514251DCFE77C2E74C285A8CF25A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
 <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>
 <CAFL9eu=QJG8X9PDG0RNxP88TicefE_DAgnkK-nxWkD9oLt6Z0g@mail.gmail.com>
 <CADfFDC4hrX8huz2HnDMLM=WT+z5UttBfk8rQeOGwLj14CZN2Pw@mail.gmail.com>
Message-ID: <ac95f337b83240d5836169c02548d0d4@SRVEXCHCM1302.precheza.cz>

Hallo Anupam

I do not see much difference in ggplot or lattice, they seems to me provide almost identical results when removing theme part from ggplot.

library(ggplot2)
library(lattice)

ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) + geom_point() +
  geom_line() + facet_wrap(~Measure)

xyplot(Percent ~ Income | Measure, TrialData4,
       type = "o", pch = 16, as.table = TRUE, grid = TRUE)

So it is probably only matter of your preference which one do you choose.

Cheers
Petr


> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Deepayan Sarkar
> Sent: Thursday, July 6, 2023 3:06 PM
> To: Anupam Tyagi <anuptyagi at gmail.com>
> Cc: r-help at r-project.org
> Subject: Re: [R] Plotting factors in graph panel
> 
> On Thu, 6 Jul 2023 at 15:21, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> >
> > Btw, I think "lattice" graphics will provide a better solution than
> > "ggplot", because it puts appropriate (space saving) markers on the
> > axes and does axes labels well. However, I cannot figure out how to do
> > it in "lattice".
> 
> You will need to convert Income to a factor first. Alternatively, use
> dotplot() instead of xyplot(), but that will sort the levels wrongly, so better to
> make the factor first anyway.
> 
> TrialData4 <- within(TrialData4,
> {
>     Income <- factor(Income, levels = c("$10", "$25", "$40", "$75", "> $75"))
> })
> 
> xyplot(Percent ~ Income | Measure, TrialData4,
>        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
> 
> or
> 
> dotplot(Percent ~ Income | Measure, TrialData4,
>         type = "o", as.table = TRUE)
> 
> This is not really any different from the ggplot() version though.
> Maybe you just don't like the effect of the '+ theme_classic()' part.
> 
> Best,
> -Deepayan
> 
> 
> > On Thu, 6 Jul 2023 at 15:11, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> >
> > > Hi John:
> > >
> > > Thanks! Below is the data using your suggestion. I used "ggplot" to
> > > make a graph. I am not too happy with it. I am looking for something
> > > simpler and cleaner. Plot is attached.
> > >
> > > I also tried "lattice" package, but nothing got plotted with "xyplot"
> > > command, because it is looking for a numeric variable on x-axis.
> > >
> > > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
> > > geom_point()
> > > +
> > >   geom_line() + facet_wrap(~Measure) + theme_classic()
> > >
> > > > dput(TrialData4)structure(list(Income = c("$10", "$25", "$40",
> > > > "$75", "> $75",
> > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75"
> > > ), Percent = c(3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79,
> > > 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27,
> > > 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4,
> > > 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244,
> > > 1.706, 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31,
> > > 35.65, 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1,
> > > 62.17, 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
> > > 7.103, 3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51, 28.9,
> > > 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94, 33.74,
> > > 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4, 25, 24.61,
> > > 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244, 1.706,
> > > 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65,
> > > 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17,
> > > 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103),
> > > Measure = c("MF None", "MF None", "MF None", "MF None", "MF None",
> > > "MF Equity", "MF Equity", "MF Equity", "MF Equity", "MF Equity", "MF
> > > Debt", "MF Debt", "MF Debt", "MF Debt", "MF Debt", "MF Hybrid", "MF
> > > Hybrid", "MF Hybrid", "MF Hybrid", "MF Hybrid", "Bank None", "Bank
> > > None", "Bank None", "Bank None", "Bank None", "Bank Current", "Bank
> > > Current", "Bank Current", "Bank Current", "Bank Current", "Bank
> > > Savings", "Bank Savings", "Bank Savings", "Bank Savings", "Bank
> > > Savings", "MF None 1", "MF None 1", "MF None 1", "MF None 1", "MF
> > > None 1", "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Equity 1",
> > > "MF Equity 1", "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Debt 1",
> > > "MF Debt 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid
> > > 1", "MF Hybrid 1", "Bank None 1", "Bank None 1", "Bank None 1",
> > > "Bank None 1", "Bank None 1", "Bank Current 1", "Bank Current 1",
> > > "Bank Current 1", "Bank Current 1", "Bank Current 1", "Bank Savings
> > > 1", "Bank Savings 1", "Bank Savings 1", "Bank Savings 1", "Bank
> > > Savings 1", "MF None 2", "MF None 2", "MF None 2", "MF None 2", "MF
> > > None 2", "MF Equity 2", "MF Equity 2", "MF Equity 2", "MF Equity 2",
> > > "MF Equity 2", "MF Debt 2", "MF Debt 2", "MF Debt 2", "MF Debt 2",
> > > "MF Debt 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid
> > > 2", "MF Hybrid 2", "Bank None 2", "Bank None 2", "Bank None 2",
> > > "Bank None 2", "Bank None 2", "Bank Current 2", "Bank Current 2",
> > > "Bank Current 2", "Bank Current 2", "Bank Current 2", "Bank Savings
> > > 2", "Bank Savings 2", "Bank Savings 2", "Bank Savings 2", "Bank
> > > Savings 2", "MF None 3", "MF None 3", "MF None 3", "MF None 3", "MF
> > > None 3", "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Equity 3",
> > > "MF Equity 3", "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Debt 3",
> > > "MF Debt 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid
> > > 3", "MF Hybrid 3", "Bank None 3", "Bank None 3", "Bank None 3",
> > > "Bank None 3", "Bank None 3", "Bank Current 3", "Bank Current 3",
> > > "Bank Current 3", "Bank Current 3", "Bank Current 3", "Bank Savings
> > > 3", "Bank Savings 3", "Bank Savings 3", "Bank Savings 3", "Bank
> > > Savings 3")), class = c("tbl_df", "tbl", "data.frame"), row.names =
> > > c(NA,
> > > -140L))
> > >
> > >
> > >
> > >
> > > On Thu, 29 Jun 2023 at 21:11, John Kane <jrkrideau at gmail.com> wrote:
> > >
> > >> Anupa,
> > >>
> > >> I think your  best bet with your data would be to tidy it up in
> > >> Excel, read it into  R using something like the readxl package and
> > >> then supply some sample data is the dput() function.
> > >>
> > >> In the case of a large dataset something like dput(head(mydata,
> > >> 100)) should supply the data we need. Just do dput(mydata) where
> > >> *mydata* is your data. Copy the output and paste it here.
> > >>
> > >> On Thu, 29 Jun 2023 at 08:37, Ebert,Timothy Aaron <tebert at ufl.edu>
> wrote:
> > >>
> > >>> Reposting the data did not help. We do not like to guess, and
> > >>> doing so takes a great deal of time that is likely wasted.
> > >>> Rows are observations.
> > >>> Columns are variables.
> > >>> In Excel, the first row will be variable names and all subsequent
> > >>> rows will be observations.
> > >>>
> > >>> Income is the first variable. It has seven states: $10, $25, $40,
> > >>> $75,
> > >>> >$75, "No", "Answer"
> > >>> MF is the second variable. It has six values: 1, 2, 3, 4, 5, 9
> > >>> None is the third variable. It has seven values: 1, 3.05,  2.29,
> > >>> 2.24, 1.71, 1.30, 2.83 Equity is the last variable with many
> > >>> states, both numeric and text. A computer will read it all as
> > >>> text.
> > >>>
> > >>> As written the data cannot be analyzed.
> > >>>
> > >>> Equity looks like it should be numeric. However, it has text values:
> > >>> "Debt", "Hybrid", Bank", "AC", "None", "Current", "Savings", "No",
> > >>> and "Answer"
> > >>>
> > >>> In looking at the data I try to find some organization where every
> > >>> variable has the same number of rows as every other variable. I
> > >>> fail with these data.
> > >>> I could combine "No" and "Answer" into one name "No Answer" to
> > >>> make it agree with MF, but then it does not work for None.
> > >>>
> > >>>
> > >>> Please rework the data in Excel so that we can properly interpret
> > >>> the content. If it is badly organized in Excel, moving it to R will not help.
> > >>> Below, I tried adding carriage returns and spaces to organize the
> > >>> data, but I have a column of numbers that are not identified. The
> > >>> values below
> > >>> $10 do not make much sense compared to other values.
> > >>>
> > >>> I am tired of guessing.
> > >>>
> > >>> Tim
> > >>>
> > >>> -----Original Message-----
> > >>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam
> > >>> Tyagi
> > >>> Sent: Wednesday, June 28, 2023 11:49 PM
> > >>> To: r-help at r-project.org
> > >>> Subject: Re: [R] Plotting factors in graph panel
> > >>>
> > >>> [External Email]
> > >>>
> > >>> Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope
> > >>> you have been well.
> > >>>
> > >>> Pikal, thanks. Your solution may be close to what I want. I did
> > >>> not know that I was posting in HTML. I just copied the data from
> > >>> Excel and posted in the email in Gmail. The data is still in
> > >>> Excel, because I have not yet figured out what is a good way to
> > >>> organize it in R. I am posting it again below as text. These are
> > >>> rows in Excel: 1,2,3,5,9 after MF are income categories and No
> > >>> Answer category (9). Down the second column are categories of MF
> and Bank AC. Rest of the columns are percentages.
> > >>>
> > >>> Jim, thanks for the graph. I am looking to plot only one line
> > >>> (category) each in many small plots on the same page. I don't want
> > >>> to compare different categories on the same graph as you do, but
> > >>> see how each category varies by income, one category in each
> > >>> graph. Like Excel does with Sparklines (Top menu: Insert,
> > >>> Sparklines, Lines). I have many categories for many variables. I am only
> showing two MF and Bank AC.
> > >>>
> > >>> Income        $10 $25     $40      $75   > $75    No Answer
> > >>> MF                   1      2         3           4         5          9
> > >>> None               1   3.05     2.29    2.24     1.71    1.30
> > >>>    2.83
> > >>> Equity             2    29.76  28.79  29.51 28.90   31.67
> > >>> 36.77
> > >>>
> > >>> Debt                3  31.18  32.64  34.31  35.65  37.59
> > >>>  33.15
> > >>>
> > >>> Hybrid              4 36.00 36.27 33.94 33.74 29.44 27.25
> > >>>
> > >>> Bank AC None 1 46.54 54.01 59.1 62.17 67.67 60.87
> > >>>
> > >>> Current            2 24.75 24.4 25 24.61 24.02 21.09
> > >>>
> > >>> Savings             3 25.4 18.7 29 11.48 7.103 13.46
> > >>>
> > >>> No Answer       9 3.307 2.891 13.4 1.746 1.208 4.577
> > >>>
> > >>>
> > >>> On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com>
> wrote:
> > >>>
> > >>> > Hi Anupam,
> > >>> > Haven't heard from you in a long time. Perhaps you want
> > >>> > something like
> > >>> > this:
> > >>> >
> > >>> > at_df<-read.table(text=
> > >>> >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None
> > >>> > Bank_Current Bank_Savings Bank_NA
> > >>> >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> > >>> >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> > >>> >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> > >>> >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> > >>> >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
> > >>> > No_Answer 9
> > >>> > 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> > >>> >  header=TRUE,stringsAsFactors=FALSE)
> > >>> > at_df<-
> at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank
> > >>> > _NA")]
> > >>> > png("MF_Bank.png",height=600)
> > >>> > par(mfrow=c(2,1))
> > >>> > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
> > >>> >  type="l",col=1:4,lty=1:4,lwd=3,  main="Percentages by Income
> > >>> > and MF type", xlab="Income",ylab="Percentage of group",xaxt="n")
> > >>> > axis(1,at=1:5,labels=at_df$Income)
> > >>> > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
> > >>> >  lty=1:4,lwd=3,col=1:4)
> > >>> > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
> > >>> >  type="l",col=1:3,lty=1:4,lwd=3,  main="Percentages by Income
> > >>> > and Bank type", xlab="Income",ylab="Percentage of
> > >>> > group",xaxt="n")
> > >>> > axis(1,at=1:5,labels=at_df$Income)
> > >>> > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
> > >>> >  lty=1:4,lwd=3,col=1:3)
> > >>> > dev.off()
> > >>> >
> > >>> > Jim
> > >>> >
> > >>> > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi
> > >>> > <anuptyagi at gmail.com>
> > >>> wrote:
> > >>> > >
> > >>> > > Hello,
> > >>> > >
> > >>> > > I want to plot the following kind of data (percentage of
> > >>> > > respondents
> > >>> > from a
> > >>> > > survey) that varies by Income into many small *line* graphs in
> > >>> > > a panel of graphs. I want to omit "No Answer" categories. I
> > >>> > > want to see how each one of the categories (percentages),
> > >>> > > "None", " Equity", etc. varies by
> > >>> > Income.
> > >>> > > How can I do this? How to organize the data well and how to
> > >>> > > plot? I
> > >>> > thought
> > >>> > > Lattice may be a good package to plot this, but I don't know
> > >>> > > for sure. I prefer to do this in Base-R if possible, but I am
> > >>> > > open to ggplot. Any
> > >>> > ideas
> > >>> > > will be helpful.
> > >>> > >
> > >>> > > Income
> > >>> > > $10 $25 $40 $75 > $75 No Answer MF 1 2 3 4 5 9 None 1 3.05
> > >>> > > 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51
> > >>> > > 28.90 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
> > >>> > > Hybrid
> > >>> > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54
> > >>> > > 54.01
> > >>> > > 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02
> > >>> > > 21.09 Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9
> > >>> > > 3.307 2.891
> > >>> > > 13.4 1.746 1.208 4.577
> > >>> > >
> > >>> > > Thanks.
> > >>> > > --
> > >>> > > Anupam.
> > >>> > >
> > >>> > >         [[alternative HTML version deleted]]
> > >>> > >
> > >>> > > ______________________________________________
> > >>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> > >>> > > see https://st/
> > >>> > > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-
> help&data=05%7C01%7Ctebert
> > >>> > > %40ufl
> > >>> > >
> .edu%7C59874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace6
> > >>> > > 0a6233
> > >>> > >
> 1e1b84%7C0%7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d
> 8ey
> > >>> > > JWIjoi
> > >>> > >
> MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3
> > >>> > > 000%7C
> > >>> > >
> %7C%7C&sdata=xoaDMG7ogY4tMtqe30pONZrBdk0eq2cW%2BgdwlDHneWY
> %3D&
> > >>> > > reserv
> > >>> > > ed=0
> > >>> > > PLEASE do read the posting guide
> > >>> > http://www.r/
> > >>> > -project.org%2Fposting-
> guide.html&data=05%7C01%7Ctebert%40ufl.ed
> > >>> > u%7C59
> > >>> >
> 874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a62331e1b8
> > >>> > 4%7C0%
> > >>> >
> 7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4
> wLjA
> > >>> > wMDAiL
> > >>> >
> CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sd
> > >>> > ata=H7
> > >>> >
> 6XCa%2FULBGUn0Lok93l6mtHzo0snq5G0a%2BL4sEH8%2F8%3D&reserved=0
> > >>> > > and provide commented, minimal, self-contained, reproducible
> code.
> > >>> >
> > >>>
> > >>>
> > >>> --
> > >>> Anupam.
> > >>>
> > >>>         [[alternative HTML version deleted]]
> > >>>
> > >>> ______________________________________________
> > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > >>> PLEASE do read the posting guide
> > >>> http://www.r-project.org/posting-guide.html
> > >>> and provide commented, minimal, self-contained, reproducible code.
> > >>> ______________________________________________
> > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > >>> PLEASE do read the posting guide
> > >>> http://www.R-project.org/posting-guide.html
> > >>> and provide commented, minimal, self-contained, reproducible code.
> > >>>
> > >>
> > >>
> > >> --
> > >> John Kane
> > >> Kingston ON Canada
> > >>
> > >
> > >
> > > --
> > > Anupam.
> > >
> > >
> >
> > --
> > Anupam.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.

From @nupty@g| @end|ng |rom gm@||@com  Fri Jul  7 12:46:54 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Fri, 7 Jul 2023 16:16:54 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CADfFDC4hrX8huz2HnDMLM=WT+z5UttBfk8rQeOGwLj14CZN2Pw@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CH3PR22MB4514251DCFE77C2E74C285A8CF25A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
 <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>
 <CAFL9eu=QJG8X9PDG0RNxP88TicefE_DAgnkK-nxWkD9oLt6Z0g@mail.gmail.com>
 <CADfFDC4hrX8huz2HnDMLM=WT+z5UttBfk8rQeOGwLj14CZN2Pw@mail.gmail.com>
Message-ID: <CAFL9eumBZgqp7S76KE0jH+D-VX0rrqOfkzuX15bzoE7Webz7xw@mail.gmail.com>

Thanks!

Is there a way to reduce font-size of text of x-axis labels and titles of
sub-graphs? That will probably make graphs more readable.

I am realizing that since the y-axis scales are very different for some
graphs, I may have to figure out a way to build the sub-graphs one at a
time, manually, and then combine them together. It is going to be very
tedious. I have more than 100 sub-graphs to display, more than 50 varying
by income and more than 50 varying by education. I may need to combine them
in two or four panels of graphs. No journal is likely to want pages full of
sub-graphs.



On Thu, 6 Jul 2023 at 18:35, Deepayan Sarkar <deepayan.sarkar at gmail.com>
wrote:

> On Thu, 6 Jul 2023 at 15:21, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> >
> > Btw, I think "lattice" graphics will provide a better solution than
> > "ggplot", because it puts appropriate (space saving) markers on the axes
> > and does axes labels well. However, I cannot figure out how to do it in
> > "lattice".
>
> You will need to convert Income to a factor first. Alternatively, use
> dotplot() instead of xyplot(), but that will sort the levels wrongly,
> so better to make the factor first anyway.
>
> TrialData4 <- within(TrialData4,
> {
>     Income <- factor(Income, levels = c("$10", "$25", "$40", "$75", ">
> $75"))
> })
>
> xyplot(Percent ~ Income | Measure, TrialData4,
>        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
>
> or
>
> dotplot(Percent ~ Income | Measure, TrialData4,
>         type = "o", as.table = TRUE)
>
> This is not really any different from the ggplot() version though.
> Maybe you just don't like the effect of the '+ theme_classic()' part.
>
> Best,
> -Deepayan
>
>
> > On Thu, 6 Jul 2023 at 15:11, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> >
> > > Hi John:
> > >
> > > Thanks! Below is the data using your suggestion. I used "ggplot" to
> make a
> > > graph. I am not too happy with it. I am looking for something simpler
> and
> > > cleaner. Plot is attached.
> > >
> > > I also tried "lattice" package, but nothing got plotted with "xyplot"
> > > command, because it is looking for a numeric variable on x-axis.
> > >
> > > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
> geom_point()
> > > +
> > >   geom_line() + facet_wrap(~Measure) + theme_classic()
> > >
> > > > dput(TrialData4)structure(list(Income = c("$10", "$25", "$40",
> "$75", "> $75",
> > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
> > > "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
> > > "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
> > > "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75"
> > > ), Percent = c(3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79,
> > > 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27,
> > > 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75,
> > > 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052,
> > > 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51, 28.9, 31.67,
> > > 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94, 33.74, 29.44,
> > > 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4, 25, 24.61, 24.02,
> > > 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244, 1.706, 1.297,
> > > 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65,
> > > 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17,
> > > 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
> > > 7.103, 3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51,
> > > 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94,
> > > 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4,
> > > 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103), Measure = c("MF None",
> > > "MF None", "MF None", "MF None", "MF None", "MF Equity", "MF Equity",
> > > "MF Equity", "MF Equity", "MF Equity", "MF Debt", "MF Debt",
> > > "MF Debt", "MF Debt", "MF Debt", "MF Hybrid", "MF Hybrid", "MF Hybrid",
> > > "MF Hybrid", "MF Hybrid", "Bank None", "Bank None", "Bank None",
> > > "Bank None", "Bank None", "Bank Current", "Bank Current", "Bank
> Current",
> > > "Bank Current", "Bank Current", "Bank Savings", "Bank Savings",
> > > "Bank Savings", "Bank Savings", "Bank Savings", "MF None 1",
> > > "MF None 1", "MF None 1", "MF None 1", "MF None 1", "MF Equity 1",
> > > "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Debt
> 1",
> > > "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Hybrid 1",
> > > "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "Bank None
> 1",
> > > "Bank None 1", "Bank None 1", "Bank None 1", "Bank None 1", "Bank
> Current 1",
> > > "Bank Current 1", "Bank Current 1", "Bank Current 1", "Bank Current 1",
> > > "Bank Savings 1", "Bank Savings 1", "Bank Savings 1", "Bank Savings 1",
> > > "Bank Savings 1", "MF None 2", "MF None 2", "MF None 2", "MF None 2",
> > > "MF None 2", "MF Equity 2", "MF Equity 2", "MF Equity 2", "MF Equity
> 2",
> > > "MF Equity 2", "MF Debt 2", "MF Debt 2", "MF Debt 2", "MF Debt 2",
> > > "MF Debt 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid
> 2",
> > > "MF Hybrid 2", "Bank None 2", "Bank None 2", "Bank None 2", "Bank None
> 2",
> > > "Bank None 2", "Bank Current 2", "Bank Current 2", "Bank Current 2",
> > > "Bank Current 2", "Bank Current 2", "Bank Savings 2", "Bank Savings 2",
> > > "Bank Savings 2", "Bank Savings 2", "Bank Savings 2", "MF None 3",
> > > "MF None 3", "MF None 3", "MF None 3", "MF None 3", "MF Equity 3",
> > > "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Debt
> 3",
> > > "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Hybrid 3",
> > > "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "Bank None
> 3",
> > > "Bank None 3", "Bank None 3", "Bank None 3", "Bank None 3", "Bank
> Current 3",
> > > "Bank Current 3", "Bank Current 3", "Bank Current 3", "Bank Current 3",
> > > "Bank Savings 3", "Bank Savings 3", "Bank Savings 3", "Bank Savings 3",
> > > "Bank Savings 3")), class = c("tbl_df", "tbl", "data.frame"),
> row.names = c(NA,
> > > -140L))
> > >
> > >
> > >
> > >
> > > On Thu, 29 Jun 2023 at 21:11, John Kane <jrkrideau at gmail.com> wrote:
> > >
> > >> Anupa,
> > >>
> > >> I think your  best bet with your data would be to tidy it up in Excel,
> > >> read it into  R using something like the readxl package and then
> supply
> > >> some sample data is the dput() function.
> > >>
> > >> In the case of a large dataset something like dput(head(mydata, 100))
> > >> should supply the data we need. Just do dput(mydata) where *mydata*
> is your
> > >> data. Copy the output and paste it here.
> > >>
> > >> On Thu, 29 Jun 2023 at 08:37, Ebert,Timothy Aaron <tebert at ufl.edu>
> wrote:
> > >>
> > >>> Reposting the data did not help. We do not like to guess, and doing
> so
> > >>> takes a great deal of time that is likely wasted.
> > >>> Rows are observations.
> > >>> Columns are variables.
> > >>> In Excel, the first row will be variable names and all subsequent
> rows
> > >>> will be observations.
> > >>>
> > >>> Income is the first variable. It has seven states: $10, $25, $40,
> $75,
> > >>> >$75, "No", "Answer"
> > >>> MF is the second variable. It has six values: 1, 2, 3, 4, 5, 9
> > >>> None is the third variable. It has seven values: 1, 3.05,  2.29,
> 2.24,
> > >>> 1.71, 1.30, 2.83
> > >>> Equity is the last variable with many states, both numeric and text.
> A
> > >>> computer will read it all as text.
> > >>>
> > >>> As written the data cannot be analyzed.
> > >>>
> > >>> Equity looks like it should be numeric. However, it has text values:
> > >>> "Debt", "Hybrid", Bank", "AC", "None", "Current", "Savings", "No",
> and
> > >>> "Answer"
> > >>>
> > >>> In looking at the data I try to find some organization where every
> > >>> variable has the same number of rows as every other variable. I fail
> with
> > >>> these data.
> > >>> I could combine "No" and "Answer" into one name "No Answer" to make
> it
> > >>> agree with MF, but then it does not work for None.
> > >>>
> > >>>
> > >>> Please rework the data in Excel so that we can properly interpret the
> > >>> content. If it is badly organized in Excel, moving it to R will not
> help.
> > >>> Below, I tried adding carriage returns and spaces to organize the
> data,
> > >>> but I have a column of numbers that are not identified. The values
> below
> > >>> $10 do not make much sense compared to other values.
> > >>>
> > >>> I am tired of guessing.
> > >>>
> > >>> Tim
> > >>>
> > >>> -----Original Message-----
> > >>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam
> Tyagi
> > >>> Sent: Wednesday, June 28, 2023 11:49 PM
> > >>> To: r-help at r-project.org
> > >>> Subject: Re: [R] Plotting factors in graph panel
> > >>>
> > >>> [External Email]
> > >>>
> > >>> Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope you
> have
> > >>> been well.
> > >>>
> > >>> Pikal, thanks. Your solution may be close to what I want. I did not
> know
> > >>> that I was posting in HTML. I just copied the data from Excel and
> posted in
> > >>> the email in Gmail. The data is still in Excel, because I have not
> yet
> > >>> figured out what is a good way to organize it in R. I am posting it
> again
> > >>> below as text. These are rows in Excel: 1,2,3,5,9 after MF are income
> > >>> categories and No Answer category (9). Down the second column are
> > >>> categories of MF and Bank AC. Rest of the columns are percentages.
> > >>>
> > >>> Jim, thanks for the graph. I am looking to plot only one line
> (category)
> > >>> each in many small plots on the same page. I don't want to compare
> > >>> different categories on the same graph as you do, but see how each
> category
> > >>> varies by income, one category in each graph. Like Excel does with
> > >>> Sparklines (Top menu: Insert, Sparklines, Lines). I have many
> categories
> > >>> for many variables. I am only showing two MF and Bank AC.
> > >>>
> > >>> Income        $10 $25     $40      $75   > $75    No Answer
> > >>> MF                   1      2         3           4         5
>   9
> > >>> None               1   3.05     2.29    2.24     1.71    1.30
> > >>>    2.83
> > >>> Equity             2    29.76  28.79  29.51 28.90   31.67
> > >>> 36.77
> > >>>
> > >>> Debt                3  31.18  32.64  34.31  35.65  37.59
> > >>>  33.15
> > >>>
> > >>> Hybrid              4 36.00 36.27 33.94 33.74 29.44 27.25
> > >>>
> > >>> Bank AC None 1 46.54 54.01 59.1 62.17 67.67 60.87
> > >>>
> > >>> Current            2 24.75 24.4 25 24.61 24.02 21.09
> > >>>
> > >>> Savings             3 25.4 18.7 29 11.48 7.103 13.46
> > >>>
> > >>> No Answer       9 3.307 2.891 13.4 1.746 1.208 4.577
> > >>>
> > >>>
> > >>> On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com>
> wrote:
> > >>>
> > >>> > Hi Anupam,
> > >>> > Haven't heard from you in a long time. Perhaps you want something
> like
> > >>> > this:
> > >>> >
> > >>> > at_df<-read.table(text=
> > >>> >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None
> Bank_Current
> > >>> > Bank_Savings Bank_NA
> > >>> >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> > >>> >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> > >>> >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> > >>> >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> > >>> >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208  No_Answer 9
> > >>> > 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> > >>> >  header=TRUE,stringsAsFactors=FALSE)
> > >>> >
> at_df<-at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank_NA")]
> > >>> > png("MF_Bank.png",height=600)
> > >>> > par(mfrow=c(2,1))
> > >>> > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
> > >>> >  type="l",col=1:4,lty=1:4,lwd=3,
> > >>> >  main="Percentages by Income and MF type",
> > >>> > xlab="Income",ylab="Percentage of group",xaxt="n")
> > >>> > axis(1,at=1:5,labels=at_df$Income)
> > >>> > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
> > >>> >  lty=1:4,lwd=3,col=1:4)
> > >>> > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
> > >>> >  type="l",col=1:3,lty=1:4,lwd=3,
> > >>> >  main="Percentages by Income and Bank type",
> > >>> > xlab="Income",ylab="Percentage of group",xaxt="n")
> > >>> > axis(1,at=1:5,labels=at_df$Income)
> > >>> > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
> > >>> >  lty=1:4,lwd=3,col=1:3)
> > >>> > dev.off()
> > >>> >
> > >>> > Jim
> > >>> >
> > >>> > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi <anuptyagi at gmail.com>
> > >>> wrote:
> > >>> > >
> > >>> > > Hello,
> > >>> > >
> > >>> > > I want to plot the following kind of data (percentage of
> respondents
> > >>> > from a
> > >>> > > survey) that varies by Income into many small *line* graphs in a
> > >>> > > panel of graphs. I want to omit "No Answer" categories. I want to
> > >>> > > see how each one of the categories (percentages), "None", "
> Equity",
> > >>> > > etc. varies by
> > >>> > Income.
> > >>> > > How can I do this? How to organize the data well and how to
> plot? I
> > >>> > thought
> > >>> > > Lattice may be a good package to plot this, but I don't know for
> > >>> > > sure. I prefer to do this in Base-R if possible, but I am open to
> > >>> > > ggplot. Any
> > >>> > ideas
> > >>> > > will be helpful.
> > >>> > >
> > >>> > > Income
> > >>> > > $10 $25 $40 $75 > $75 No Answer
> > >>> > > MF 1 2 3 4 5 9
> > >>> > > None 1 3.05 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51
> > >>> > > 28.90 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
> Hybrid
> > >>> > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54 54.01
> > >>> > > 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02 21.09
> > >>> > > Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9 3.307 2.891
> > >>> > > 13.4 1.746 1.208 4.577
> > >>> > >
> > >>> > > Thanks.
> > >>> > > --
> > >>> > > Anupam.
> > >>> > >
> > >>> > >         [[alternative HTML version deleted]]
> > >>> > >
> > >>> > > ______________________________________________
> > >>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> see
> > >>> > > https://st/
> > >>> > > at.ethz.ch
> %2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl
> > >>> > >
> .edu%7C59874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a6233
> > >>> > >
> 1e1b84%7C0%7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoi
> > >>> > >
> MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C
> > >>> > >
> %7C%7C&sdata=xoaDMG7ogY4tMtqe30pONZrBdk0eq2cW%2BgdwlDHneWY%3D&reserv
> > >>> > > ed=0
> > >>> > > PLEASE do read the posting guide
> > >>> > http://www.r/
> > >>> > -project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu
> %7C59
> > >>> >
> 874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
> > >>> >
> 7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
> > >>> >
> CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=H7
> > >>> > 6XCa%2FULBGUn0Lok93l6mtHzo0snq5G0a%2BL4sEH8%2F8%3D&reserved=0
> > >>> > > and provide commented, minimal, self-contained, reproducible
> code.
> > >>> >
> > >>>
> > >>>
> > >>> --
> > >>> Anupam.
> > >>>
> > >>>         [[alternative HTML version deleted]]
> > >>>
> > >>> ______________________________________________
> > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > >>> PLEASE do read the posting guide
> > >>> http://www.r-project.org/posting-guide.html
> > >>> and provide commented, minimal, self-contained, reproducible code.
> > >>> ______________________________________________
> > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > >>> PLEASE do read the posting guide
> > >>> http://www.R-project.org/posting-guide.html
> > >>> and provide commented, minimal, self-contained, reproducible code.
> > >>>
> > >>
> > >>
> > >> --
> > >> John Kane
> > >> Kingston ON Canada
> > >>
> > >
> > >
> > > --
> > > Anupam.
> > >
> > >
> >
> > --
> > Anupam.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>


-- 
Anupam.

	[[alternative HTML version deleted]]


From @nupty@g| @end|ng |rom gm@||@com  Fri Jul  7 12:48:14 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Fri, 7 Jul 2023 16:18:14 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <ac95f337b83240d5836169c02548d0d4@SRVEXCHCM1302.precheza.cz>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CH3PR22MB4514251DCFE77C2E74C285A8CF25A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
 <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>
 <CAFL9eu=QJG8X9PDG0RNxP88TicefE_DAgnkK-nxWkD9oLt6Z0g@mail.gmail.com>
 <CADfFDC4hrX8huz2HnDMLM=WT+z5UttBfk8rQeOGwLj14CZN2Pw@mail.gmail.com>
 <ac95f337b83240d5836169c02548d0d4@SRVEXCHCM1302.precheza.cz>
Message-ID: <CAFL9eunWEer8nXQ52jsrvicdvDokyZHfTWrOsstRyyW37hm+nQ@mail.gmail.com>

Thanks! You are correct, the graphs look very similar, except ggplot is
scaling the text font to make it more readable. Is there a way to scale
down the x-axis labels, so they are readable?

On Fri, 7 Jul 2023 at 12:02, PIKAL Petr <petr.pikal at precheza.cz> wrote:

> Hallo Anupam
>
> I do not see much difference in ggplot or lattice, they seems to me
> provide almost identical results when removing theme part from ggplot.
>
> library(ggplot2)
> library(lattice)
>
> ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) + geom_point()
> +
>   geom_line() + facet_wrap(~Measure)
>
> xyplot(Percent ~ Income | Measure, TrialData4,
>        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
>
> So it is probably only matter of your preference which one do you choose.
>
> Cheers
> Petr
>
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Deepayan Sarkar
> > Sent: Thursday, July 6, 2023 3:06 PM
> > To: Anupam Tyagi <anuptyagi at gmail.com>
> > Cc: r-help at r-project.org
> > Subject: Re: [R] Plotting factors in graph panel
> >
> > On Thu, 6 Jul 2023 at 15:21, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> > >
> > > Btw, I think "lattice" graphics will provide a better solution than
> > > "ggplot", because it puts appropriate (space saving) markers on the
> > > axes and does axes labels well. However, I cannot figure out how to do
> > > it in "lattice".
> >
> > You will need to convert Income to a factor first. Alternatively, use
> > dotplot() instead of xyplot(), but that will sort the levels wrongly, so
> better to
> > make the factor first anyway.
> >
> > TrialData4 <- within(TrialData4,
> > {
> >     Income <- factor(Income, levels = c("$10", "$25", "$40", "$75", ">
> $75"))
> > })
> >
> > xyplot(Percent ~ Income | Measure, TrialData4,
> >        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
> >
> > or
> >
> > dotplot(Percent ~ Income | Measure, TrialData4,
> >         type = "o", as.table = TRUE)
> >
> > This is not really any different from the ggplot() version though.
> > Maybe you just don't like the effect of the '+ theme_classic()' part.
> >
> > Best,
> > -Deepayan
> >
> >
> > > On Thu, 6 Jul 2023 at 15:11, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> > >
> > > > Hi John:
> > > >
> > > > Thanks! Below is the data using your suggestion. I used "ggplot" to
> > > > make a graph. I am not too happy with it. I am looking for something
> > > > simpler and cleaner. Plot is attached.
> > > >
> > > > I also tried "lattice" package, but nothing got plotted with "xyplot"
> > > > command, because it is looking for a numeric variable on x-axis.
> > > >
> > > > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
> > > > geom_point()
> > > > +
> > > >   geom_line() + facet_wrap(~Measure) + theme_classic()
> > > >
> > > > > dput(TrialData4)structure(list(Income = c("$10", "$25", "$40",
> > > > > "$75", "> $75",
> > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75"
> > > > ), Percent = c(3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79,
> > > > 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27,
> > > > 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4,
> > > > 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244,
> > > > 1.706, 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31,
> > > > 35.65, 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1,
> > > > 62.17, 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
> > > > 7.103, 3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51, 28.9,
> > > > 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94, 33.74,
> > > > 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4, 25, 24.61,
> > > > 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244, 1.706,
> > > > 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65,
> > > > 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17,
> > > > 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103),
> > > > Measure = c("MF None", "MF None", "MF None", "MF None", "MF None",
> > > > "MF Equity", "MF Equity", "MF Equity", "MF Equity", "MF Equity", "MF
> > > > Debt", "MF Debt", "MF Debt", "MF Debt", "MF Debt", "MF Hybrid", "MF
> > > > Hybrid", "MF Hybrid", "MF Hybrid", "MF Hybrid", "Bank None", "Bank
> > > > None", "Bank None", "Bank None", "Bank None", "Bank Current", "Bank
> > > > Current", "Bank Current", "Bank Current", "Bank Current", "Bank
> > > > Savings", "Bank Savings", "Bank Savings", "Bank Savings", "Bank
> > > > Savings", "MF None 1", "MF None 1", "MF None 1", "MF None 1", "MF
> > > > None 1", "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Equity 1",
> > > > "MF Equity 1", "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Debt 1",
> > > > "MF Debt 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid
> > > > 1", "MF Hybrid 1", "Bank None 1", "Bank None 1", "Bank None 1",
> > > > "Bank None 1", "Bank None 1", "Bank Current 1", "Bank Current 1",
> > > > "Bank Current 1", "Bank Current 1", "Bank Current 1", "Bank Savings
> > > > 1", "Bank Savings 1", "Bank Savings 1", "Bank Savings 1", "Bank
> > > > Savings 1", "MF None 2", "MF None 2", "MF None 2", "MF None 2", "MF
> > > > None 2", "MF Equity 2", "MF Equity 2", "MF Equity 2", "MF Equity 2",
> > > > "MF Equity 2", "MF Debt 2", "MF Debt 2", "MF Debt 2", "MF Debt 2",
> > > > "MF Debt 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid
> > > > 2", "MF Hybrid 2", "Bank None 2", "Bank None 2", "Bank None 2",
> > > > "Bank None 2", "Bank None 2", "Bank Current 2", "Bank Current 2",
> > > > "Bank Current 2", "Bank Current 2", "Bank Current 2", "Bank Savings
> > > > 2", "Bank Savings 2", "Bank Savings 2", "Bank Savings 2", "Bank
> > > > Savings 2", "MF None 3", "MF None 3", "MF None 3", "MF None 3", "MF
> > > > None 3", "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Equity 3",
> > > > "MF Equity 3", "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Debt 3",
> > > > "MF Debt 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid
> > > > 3", "MF Hybrid 3", "Bank None 3", "Bank None 3", "Bank None 3",
> > > > "Bank None 3", "Bank None 3", "Bank Current 3", "Bank Current 3",
> > > > "Bank Current 3", "Bank Current 3", "Bank Current 3", "Bank Savings
> > > > 3", "Bank Savings 3", "Bank Savings 3", "Bank Savings 3", "Bank
> > > > Savings 3")), class = c("tbl_df", "tbl", "data.frame"), row.names =
> > > > c(NA,
> > > > -140L))
> > > >
> > > >
> > > >
> > > >
> > > > On Thu, 29 Jun 2023 at 21:11, John Kane <jrkrideau at gmail.com> wrote:
> > > >
> > > >> Anupa,
> > > >>
> > > >> I think your  best bet with your data would be to tidy it up in
> > > >> Excel, read it into  R using something like the readxl package and
> > > >> then supply some sample data is the dput() function.
> > > >>
> > > >> In the case of a large dataset something like dput(head(mydata,
> > > >> 100)) should supply the data we need. Just do dput(mydata) where
> > > >> *mydata* is your data. Copy the output and paste it here.
> > > >>
> > > >> On Thu, 29 Jun 2023 at 08:37, Ebert,Timothy Aaron <tebert at ufl.edu>
> > wrote:
> > > >>
> > > >>> Reposting the data did not help. We do not like to guess, and
> > > >>> doing so takes a great deal of time that is likely wasted.
> > > >>> Rows are observations.
> > > >>> Columns are variables.
> > > >>> In Excel, the first row will be variable names and all subsequent
> > > >>> rows will be observations.
> > > >>>
> > > >>> Income is the first variable. It has seven states: $10, $25, $40,
> > > >>> $75,
> > > >>> >$75, "No", "Answer"
> > > >>> MF is the second variable. It has six values: 1, 2, 3, 4, 5, 9
> > > >>> None is the third variable. It has seven values: 1, 3.05,  2.29,
> > > >>> 2.24, 1.71, 1.30, 2.83 Equity is the last variable with many
> > > >>> states, both numeric and text. A computer will read it all as
> > > >>> text.
> > > >>>
> > > >>> As written the data cannot be analyzed.
> > > >>>
> > > >>> Equity looks like it should be numeric. However, it has text
> values:
> > > >>> "Debt", "Hybrid", Bank", "AC", "None", "Current", "Savings", "No",
> > > >>> and "Answer"
> > > >>>
> > > >>> In looking at the data I try to find some organization where every
> > > >>> variable has the same number of rows as every other variable. I
> > > >>> fail with these data.
> > > >>> I could combine "No" and "Answer" into one name "No Answer" to
> > > >>> make it agree with MF, but then it does not work for None.
> > > >>>
> > > >>>
> > > >>> Please rework the data in Excel so that we can properly interpret
> > > >>> the content. If it is badly organized in Excel, moving it to R
> will not help.
> > > >>> Below, I tried adding carriage returns and spaces to organize the
> > > >>> data, but I have a column of numbers that are not identified. The
> > > >>> values below
> > > >>> $10 do not make much sense compared to other values.
> > > >>>
> > > >>> I am tired of guessing.
> > > >>>
> > > >>> Tim
> > > >>>
> > > >>> -----Original Message-----
> > > >>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam
> > > >>> Tyagi
> > > >>> Sent: Wednesday, June 28, 2023 11:49 PM
> > > >>> To: r-help at r-project.org
> > > >>> Subject: Re: [R] Plotting factors in graph panel
> > > >>>
> > > >>> [External Email]
> > > >>>
> > > >>> Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope
> > > >>> you have been well.
> > > >>>
> > > >>> Pikal, thanks. Your solution may be close to what I want. I did
> > > >>> not know that I was posting in HTML. I just copied the data from
> > > >>> Excel and posted in the email in Gmail. The data is still in
> > > >>> Excel, because I have not yet figured out what is a good way to
> > > >>> organize it in R. I am posting it again below as text. These are
> > > >>> rows in Excel: 1,2,3,5,9 after MF are income categories and No
> > > >>> Answer category (9). Down the second column are categories of MF
> > and Bank AC. Rest of the columns are percentages.
> > > >>>
> > > >>> Jim, thanks for the graph. I am looking to plot only one line
> > > >>> (category) each in many small plots on the same page. I don't want
> > > >>> to compare different categories on the same graph as you do, but
> > > >>> see how each category varies by income, one category in each
> > > >>> graph. Like Excel does with Sparklines (Top menu: Insert,
> > > >>> Sparklines, Lines). I have many categories for many variables. I
> am only
> > showing two MF and Bank AC.
> > > >>>
> > > >>> Income        $10 $25     $40      $75   > $75    No Answer
> > > >>> MF                   1      2         3           4         5
>     9
> > > >>> None               1   3.05     2.29    2.24     1.71    1.30
> > > >>>    2.83
> > > >>> Equity             2    29.76  28.79  29.51 28.90   31.67
> > > >>> 36.77
> > > >>>
> > > >>> Debt                3  31.18  32.64  34.31  35.65  37.59
> > > >>>  33.15
> > > >>>
> > > >>> Hybrid              4 36.00 36.27 33.94 33.74 29.44 27.25
> > > >>>
> > > >>> Bank AC None 1 46.54 54.01 59.1 62.17 67.67 60.87
> > > >>>
> > > >>> Current            2 24.75 24.4 25 24.61 24.02 21.09
> > > >>>
> > > >>> Savings             3 25.4 18.7 29 11.48 7.103 13.46
> > > >>>
> > > >>> No Answer       9 3.307 2.891 13.4 1.746 1.208 4.577
> > > >>>
> > > >>>
> > > >>> On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com>
> > wrote:
> > > >>>
> > > >>> > Hi Anupam,
> > > >>> > Haven't heard from you in a long time. Perhaps you want
> > > >>> > something like
> > > >>> > this:
> > > >>> >
> > > >>> > at_df<-read.table(text=
> > > >>> >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None
> > > >>> > Bank_Current Bank_Savings Bank_NA
> > > >>> >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> > > >>> >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> > > >>> >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> > > >>> >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> > > >>> >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
> > > >>> > No_Answer 9
> > > >>> > 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> > > >>> >  header=TRUE,stringsAsFactors=FALSE)
> > > >>> > at_df<-
> > at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank
> > > >>> > _NA")]
> > > >>> > png("MF_Bank.png",height=600)
> > > >>> > par(mfrow=c(2,1))
> > > >>> > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
> > > >>> >  type="l",col=1:4,lty=1:4,lwd=3,  main="Percentages by Income
> > > >>> > and MF type", xlab="Income",ylab="Percentage of group",xaxt="n")
> > > >>> > axis(1,at=1:5,labels=at_df$Income)
> > > >>> > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
> > > >>> >  lty=1:4,lwd=3,col=1:4)
> > > >>> > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
> > > >>> >  type="l",col=1:3,lty=1:4,lwd=3,  main="Percentages by Income
> > > >>> > and Bank type", xlab="Income",ylab="Percentage of
> > > >>> > group",xaxt="n")
> > > >>> > axis(1,at=1:5,labels=at_df$Income)
> > > >>> > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
> > > >>> >  lty=1:4,lwd=3,col=1:3)
> > > >>> > dev.off()
> > > >>> >
> > > >>> > Jim
> > > >>> >
> > > >>> > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi
> > > >>> > <anuptyagi at gmail.com>
> > > >>> wrote:
> > > >>> > >
> > > >>> > > Hello,
> > > >>> > >
> > > >>> > > I want to plot the following kind of data (percentage of
> > > >>> > > respondents
> > > >>> > from a
> > > >>> > > survey) that varies by Income into many small *line* graphs in
> > > >>> > > a panel of graphs. I want to omit "No Answer" categories. I
> > > >>> > > want to see how each one of the categories (percentages),
> > > >>> > > "None", " Equity", etc. varies by
> > > >>> > Income.
> > > >>> > > How can I do this? How to organize the data well and how to
> > > >>> > > plot? I
> > > >>> > thought
> > > >>> > > Lattice may be a good package to plot this, but I don't know
> > > >>> > > for sure. I prefer to do this in Base-R if possible, but I am
> > > >>> > > open to ggplot. Any
> > > >>> > ideas
> > > >>> > > will be helpful.
> > > >>> > >
> > > >>> > > Income
> > > >>> > > $10 $25 $40 $75 > $75 No Answer MF 1 2 3 4 5 9 None 1 3.05
> > > >>> > > 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51
> > > >>> > > 28.90 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
> > > >>> > > Hybrid
> > > >>> > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54
> > > >>> > > 54.01
> > > >>> > > 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02
> > > >>> > > 21.09 Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9
> > > >>> > > 3.307 2.891
> > > >>> > > 13.4 1.746 1.208 4.577
> > > >>> > >
> > > >>> > > Thanks.
> > > >>> > > --
> > > >>> > > Anupam.
> > > >>> > >
> > > >>> > >         [[alternative HTML version deleted]]
> > > >>> > >
> > > >>> > > ______________________________________________
> > > >>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> > > >>> > > see https://st/
> > > >>> > > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-
> > help&data=05%7C01%7Ctebert
> > > >>> > > %40ufl
> > > >>> > >
> > .edu%7C59874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace6
> > > >>> > > 0a6233
> > > >>> > >
> > 1e1b84%7C0%7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d
> > 8ey
> > > >>> > > JWIjoi
> > > >>> > >
> > MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3
> > > >>> > > 000%7C
> > > >>> > >
> > %7C%7C&sdata=xoaDMG7ogY4tMtqe30pONZrBdk0eq2cW%2BgdwlDHneWY
> > %3D&
> > > >>> > > reserv
> > > >>> > > ed=0
> > > >>> > > PLEASE do read the posting guide
> > > >>> > http://www.r/
> > > >>> > -project.org%2Fposting-
> > guide.html&data=05%7C01%7Ctebert%40ufl.ed
> > > >>> > u%7C59
> > > >>> >
> > 874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a62331e1b8
> > > >>> > 4%7C0%
> > > >>> >
> > 7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4
> > wLjA
> > > >>> > wMDAiL
> > > >>> >
> > CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sd
> > > >>> > ata=H7
> > > >>> >
> > 6XCa%2FULBGUn0Lok93l6mtHzo0snq5G0a%2BL4sEH8%2F8%3D&reserved=0
> > > >>> > > and provide commented, minimal, self-contained, reproducible
> > code.
> > > >>> >
> > > >>>
> > > >>>
> > > >>> --
> > > >>> Anupam.
> > > >>>
> > > >>>         [[alternative HTML version deleted]]
> > > >>>
> > > >>> ______________________________________________
> > > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > > >>> PLEASE do read the posting guide
> > > >>> http://www.r-project.org/posting-guide.html
> > > >>> and provide commented, minimal, self-contained, reproducible code.
> > > >>> ______________________________________________
> > > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > > >>> PLEASE do read the posting guide
> > > >>> http://www.R-project.org/posting-guide.html
> > > >>> and provide commented, minimal, self-contained, reproducible code.
> > > >>>
> > > >>
> > > >>
> > > >> --
> > > >> John Kane
> > > >> Kingston ON Canada
> > > >>
> > > >
> > > >
> > > > --
> > > > Anupam.
> > > >
> > > >
> > >
> > > --
> > > Anupam.
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-
> > guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>


-- 
Anupam.

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Fri Jul  7 14:27:22 2023
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Fri, 7 Jul 2023 12:27:22 +0000
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CAFL9eunWEer8nXQ52jsrvicdvDokyZHfTWrOsstRyyW37hm+nQ@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CH3PR22MB4514251DCFE77C2E74C285A8CF25A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
 <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>
 <CAFL9eu=QJG8X9PDG0RNxP88TicefE_DAgnkK-nxWkD9oLt6Z0g@mail.gmail.com>
 <CADfFDC4hrX8huz2HnDMLM=WT+z5UttBfk8rQeOGwLj14CZN2Pw@mail.gmail.com>
 <ac95f337b83240d5836169c02548d0d4@SRVEXCHCM1302.precheza.cz>
 <CAFL9eunWEer8nXQ52jsrvicdvDokyZHfTWrOsstRyyW37hm+nQ@mail.gmail.com>
Message-ID: <2cdced6c2c8b492ea94099f51d482970@SRVEXCHCM1302.precheza.cz>

Hallo Anupam

With

ggplot change axis label size into Google

the first answer I got was

axis.text theme

r - Change size of axes title and labels in ggplot2 - Stack Overflow <https://stackoverflow.com/questions/14942681/change-size-of-axes-title-and-labels-in-ggplot2> 

 

so

 

ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) + geom_point() +
  geom_line() + facet_wrap(~Measure) + theme(axis.text=element_text(size=5))

 

Should do the trick.

 

S pozdravem | Best Regards

RNDr. Petr PIKAL
Vedouc? V?zkumu a v?voje | Research Manager

PRECHEZA a.s.
n?b?. Dr. Edvarda Bene?e 1170/24 | 750 02 P?erov | Czech Republic
Tel: +420 581 252 256 | GSM: +420 724 008 364
 <mailto:petr.pikal at precheza.cz> petr.pikal at precheza.cz |  <https://www.precheza.cz/> www.precheza.cz

Osobn? ?daje: Informace o zpracov?n? a ochran? osobn?ch ?daj? obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na:  <https://www.precheza.cz/zasady-ochrany-osobnich-udaju/> https://www.precheza.cz/zasady-ochrany-osobnich-udaju/ | Information about processing and protection of business partner?s personal data are available on website:  <https://www.precheza.cz/en/personal-data-protection-principles/> https://www.precheza.cz/en/personal-data-protection-principles/

D?v?rnost: Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en? odpov?dnosti:  <https://www.precheza.cz/01-dovetek/> https://www.precheza.cz/01-dovetek/ | This email and any documents attached to it may be confidential and are subject to the legally binding disclaimer:  <https://www.precheza.cz/en/01-disclaimer/> https://www.precheza.cz/en/01-disclaimer/

 

From: Anupam Tyagi <anuptyagi at gmail.com> 
Sent: Friday, July 7, 2023 12:48 PM
To: PIKAL Petr <petr.pikal at precheza.cz>
Cc: r-help at r-project.org
Subject: Re: [R] Plotting factors in graph panel

 

Thanks! You are correct, the graphs look very similar, except ggplot is scaling the text font to make it more readable. Is there a way to scale down the x-axis labels, so they are readable?

 

On Fri, 7 Jul 2023 at 12:02, PIKAL Petr <petr.pikal at precheza.cz <mailto:petr.pikal at precheza.cz> > wrote:

Hallo Anupam

I do not see much difference in ggplot or lattice, they seems to me provide almost identical results when removing theme part from ggplot.

library(ggplot2)
library(lattice)

ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) + geom_point() +
  geom_line() + facet_wrap(~Measure)

xyplot(Percent ~ Income | Measure, TrialData4,
       type = "o", pch = 16, as.table = TRUE, grid = TRUE)

So it is probably only matter of your preference which one do you choose.

Cheers
Petr


> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org <mailto:r-help-bounces at r-project.org> > On Behalf Of Deepayan Sarkar
> Sent: Thursday, July 6, 2023 3:06 PM
> To: Anupam Tyagi <anuptyagi at gmail.com <mailto:anuptyagi at gmail.com> >
> Cc: r-help at r-project.org <mailto:r-help at r-project.org> 
> Subject: Re: [R] Plotting factors in graph panel
> 
> On Thu, 6 Jul 2023 at 15:21, Anupam Tyagi <anuptyagi at gmail.com <mailto:anuptyagi at gmail.com> > wrote:
> >
> > Btw, I think "lattice" graphics will provide a better solution than
> > "ggplot", because it puts appropriate (space saving) markers on the
> > axes and does axes labels well. However, I cannot figure out how to do
> > it in "lattice".
> 
> You will need to convert Income to a factor first. Alternatively, use
> dotplot() instead of xyplot(), but that will sort the levels wrongly, so better to
> make the factor first anyway.
> 
> TrialData4 <- within(TrialData4,
> {
>     Income <- factor(Income, levels = c("$10", "$25", "$40", "$75", "> $75"))
> })
> 
> xyplot(Percent ~ Income | Measure, TrialData4,
>        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
> 
> or
> 
> dotplot(Percent ~ Income | Measure, TrialData4,
>         type = "o", as.table = TRUE)
> 
> This is not really any different from the ggplot() version though.
> Maybe you just don't like the effect of the '+ theme_classic()' part.
> 
> Best,
> -Deepayan
> 
> 
> > On Thu, 6 Jul 2023 at 15:11, Anupam Tyagi <anuptyagi at gmail.com <mailto:anuptyagi at gmail.com> > wrote:
> >
> > > Hi John:
> > >
> > > Thanks! Below is the data using your suggestion. I used "ggplot" to
> > > make a graph. I am not too happy with it. I am looking for something
> > > simpler and cleaner. Plot is attached.
> > >
> > > I also tried "lattice" package, but nothing got plotted with "xyplot"
> > > command, because it is looking for a numeric variable on x-axis.
> > >
> > > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
> > > geom_point()
> > > +
> > >   geom_line() + facet_wrap(~Measure) + theme_classic()
> > >
> > > > dput(TrialData4)structure(list(Income = c("$10", "$25", "$40",
> > > > "$75", "> $75",
> > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75"
> > > ), Percent = c(3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79,
> > > 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27,
> > > 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4,
> > > 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244,
> > > 1.706, 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31,
> > > 35.65, 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1,
> > > 62.17, 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
> > > 7.103, 3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51, 28.9,
> > > 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94, 33.74,
> > > 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4, 25, 24.61,
> > > 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244, 1.706,
> > > 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65,
> > > 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17,
> > > 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103),
> > > Measure = c("MF None", "MF None", "MF None", "MF None", "MF None",
> > > "MF Equity", "MF Equity", "MF Equity", "MF Equity", "MF Equity", "MF
> > > Debt", "MF Debt", "MF Debt", "MF Debt", "MF Debt", "MF Hybrid", "MF
> > > Hybrid", "MF Hybrid", "MF Hybrid", "MF Hybrid", "Bank None", "Bank
> > > None", "Bank None", "Bank None", "Bank None", "Bank Current", "Bank
> > > Current", "Bank Current", "Bank Current", "Bank Current", "Bank
> > > Savings", "Bank Savings", "Bank Savings", "Bank Savings", "Bank
> > > Savings", "MF None 1", "MF None 1", "MF None 1", "MF None 1", "MF
> > > None 1", "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Equity 1",
> > > "MF Equity 1", "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Debt 1",
> > > "MF Debt 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid
> > > 1", "MF Hybrid 1", "Bank None 1", "Bank None 1", "Bank None 1",
> > > "Bank None 1", "Bank None 1", "Bank Current 1", "Bank Current 1",
> > > "Bank Current 1", "Bank Current 1", "Bank Current 1", "Bank Savings
> > > 1", "Bank Savings 1", "Bank Savings 1", "Bank Savings 1", "Bank
> > > Savings 1", "MF None 2", "MF None 2", "MF None 2", "MF None 2", "MF
> > > None 2", "MF Equity 2", "MF Equity 2", "MF Equity 2", "MF Equity 2",
> > > "MF Equity 2", "MF Debt 2", "MF Debt 2", "MF Debt 2", "MF Debt 2",
> > > "MF Debt 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid
> > > 2", "MF Hybrid 2", "Bank None 2", "Bank None 2", "Bank None 2",
> > > "Bank None 2", "Bank None 2", "Bank Current 2", "Bank Current 2",
> > > "Bank Current 2", "Bank Current 2", "Bank Current 2", "Bank Savings
> > > 2", "Bank Savings 2", "Bank Savings 2", "Bank Savings 2", "Bank
> > > Savings 2", "MF None 3", "MF None 3", "MF None 3", "MF None 3", "MF
> > > None 3", "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Equity 3",
> > > "MF Equity 3", "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Debt 3",
> > > "MF Debt 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid
> > > 3", "MF Hybrid 3", "Bank None 3", "Bank None 3", "Bank None 3",
> > > "Bank None 3", "Bank None 3", "Bank Current 3", "Bank Current 3",
> > > "Bank Current 3", "Bank Current 3", "Bank Current 3", "Bank Savings
> > > 3", "Bank Savings 3", "Bank Savings 3", "Bank Savings 3", "Bank
> > > Savings 3")), class = c("tbl_df", "tbl", "data.frame"), row.names =
> > > c(NA,
> > > -140L))
> > >
> > >
> > >
> > >
> > > On Thu, 29 Jun 2023 at 21:11, John Kane <jrkrideau at gmail.com <mailto:jrkrideau at gmail.com> > wrote:
> > >
> > >> Anupa,
> > >>
> > >> I think your  best bet with your data would be to tidy it up in
> > >> Excel, read it into  R using something like the readxl package and
> > >> then supply some sample data is the dput() function.
> > >>
> > >> In the case of a large dataset something like dput(head(mydata,
> > >> 100)) should supply the data we need. Just do dput(mydata) where
> > >> *mydata* is your data. Copy the output and paste it here.
> > >>
> > >> On Thu, 29 Jun 2023 at 08:37, Ebert,Timothy Aaron <tebert at ufl.edu <mailto:tebert at ufl.edu> >
> wrote:
> > >>
> > >>> Reposting the data did not help. We do not like to guess, and
> > >>> doing so takes a great deal of time that is likely wasted.
> > >>> Rows are observations.
> > >>> Columns are variables.
> > >>> In Excel, the first row will be variable names and all subsequent
> > >>> rows will be observations.
> > >>>
> > >>> Income is the first variable. It has seven states: $10, $25, $40,
> > >>> $75,
> > >>> >$75, "No", "Answer"
> > >>> MF is the second variable. It has six values: 1, 2, 3, 4, 5, 9
> > >>> None is the third variable. It has seven values: 1, 3.05,  2.29,
> > >>> 2.24, 1.71, 1.30, 2.83 Equity is the last variable with many
> > >>> states, both numeric and text. A computer will read it all as
> > >>> text.
> > >>>
> > >>> As written the data cannot be analyzed.
> > >>>
> > >>> Equity looks like it should be numeric. However, it has text values:
> > >>> "Debt", "Hybrid", Bank", "AC", "None", "Current", "Savings", "No",
> > >>> and "Answer"
> > >>>
> > >>> In looking at the data I try to find some organization where every
> > >>> variable has the same number of rows as every other variable. I
> > >>> fail with these data.
> > >>> I could combine "No" and "Answer" into one name "No Answer" to
> > >>> make it agree with MF, but then it does not work for None.
> > >>>
> > >>>
> > >>> Please rework the data in Excel so that we can properly interpret
> > >>> the content. If it is badly organized in Excel, moving it to R will not help.
> > >>> Below, I tried adding carriage returns and spaces to organize the
> > >>> data, but I have a column of numbers that are not identified. The
> > >>> values below
> > >>> $10 do not make much sense compared to other values.
> > >>>
> > >>> I am tired of guessing.
> > >>>
> > >>> Tim
> > >>>
> > >>> -----Original Message-----
> > >>> From: R-help <r-help-bounces at r-project.org <mailto:r-help-bounces at r-project.org> > On Behalf Of Anupam
> > >>> Tyagi
> > >>> Sent: Wednesday, June 28, 2023 11:49 PM
> > >>> To: r-help at r-project.org <mailto:r-help at r-project.org> 
> > >>> Subject: Re: [R] Plotting factors in graph panel
> > >>>
> > >>> [External Email]
> > >>>
> > >>> Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope
> > >>> you have been well.
> > >>>
> > >>> Pikal, thanks. Your solution may be close to what I want. I did
> > >>> not know that I was posting in HTML. I just copied the data from
> > >>> Excel and posted in the email in Gmail. The data is still in
> > >>> Excel, because I have not yet figured out what is a good way to
> > >>> organize it in R. I am posting it again below as text. These are
> > >>> rows in Excel: 1,2,3,5,9 after MF are income categories and No
> > >>> Answer category (9). Down the second column are categories of MF
> and Bank AC. Rest of the columns are percentages.
> > >>>
> > >>> Jim, thanks for the graph. I am looking to plot only one line
> > >>> (category) each in many small plots on the same page. I don't want
> > >>> to compare different categories on the same graph as you do, but
> > >>> see how each category varies by income, one category in each
> > >>> graph. Like Excel does with Sparklines (Top menu: Insert,
> > >>> Sparklines, Lines). I have many categories for many variables. I am only
> showing two MF and Bank AC.
> > >>>
> > >>> Income        $10 $25     $40      $75   > $75    No Answer
> > >>> MF                   1      2         3           4         5          9
> > >>> None               1   3.05     2.29    2.24     1.71    1.30
> > >>>    2.83
> > >>> Equity             2    29.76  28.79  29.51 28.90   31.67
> > >>> 36.77
> > >>>
> > >>> Debt                3  31.18  32.64  34.31  35.65  37.59
> > >>>  33.15
> > >>>
> > >>> Hybrid              4 36.00 36.27 33.94 33.74 29.44 27.25
> > >>>
> > >>> Bank AC None 1 46.54 54.01 59.1 62.17 67.67 60.87
> > >>>
> > >>> Current            2 24.75 24.4 25 24.61 24.02 21.09
> > >>>
> > >>> Savings             3 25.4 18.7 29 11.48 7.103 13.46
> > >>>
> > >>> No Answer       9 3.307 2.891 13.4 1.746 1.208 4.577
> > >>>
> > >>>
> > >>> On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com <mailto:drjimlemon at gmail.com> >
> wrote:
> > >>>
> > >>> > Hi Anupam,
> > >>> > Haven't heard from you in a long time. Perhaps you want
> > >>> > something like
> > >>> > this:
> > >>> >
> > >>> > at_df<-read.table(text=
> > >>> >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None
> > >>> > Bank_Current Bank_Savings Bank_NA
> > >>> >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> > >>> >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> > >>> >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> > >>> >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> > >>> >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
> > >>> > No_Answer 9
> > >>> > 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> > >>> >  header=TRUE,stringsAsFactors=FALSE)
> > >>> > at_df<-
> at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank
> > >>> > _NA")]
> > >>> > png("MF_Bank.png",height=600)
> > >>> > par(mfrow=c(2,1))
> > >>> > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
> > >>> >  type="l",col=1:4,lty=1:4,lwd=3,  main="Percentages by Income
> > >>> > and MF type", xlab="Income",ylab="Percentage of group",xaxt="n")
> > >>> > axis(1,at=1:5,labels=at_df$Income)
> > >>> > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
> > >>> >  lty=1:4,lwd=3,col=1:4)
> > >>> > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
> > >>> >  type="l",col=1:3,lty=1:4,lwd=3,  main="Percentages by Income
> > >>> > and Bank type", xlab="Income",ylab="Percentage of
> > >>> > group",xaxt="n")
> > >>> > axis(1,at=1:5,labels=at_df$Income)
> > >>> > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
> > >>> >  lty=1:4,lwd=3,col=1:3)
> > >>> > dev.off()
> > >>> >
> > >>> > Jim
> > >>> >
> > >>> > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi
> > >>> > <anuptyagi at gmail.com <mailto:anuptyagi at gmail.com> >
> > >>> wrote:
> > >>> > >
> > >>> > > Hello,
> > >>> > >
> > >>> > > I want to plot the following kind of data (percentage of
> > >>> > > respondents
> > >>> > from a
> > >>> > > survey) that varies by Income into many small *line* graphs in
> > >>> > > a panel of graphs. I want to omit "No Answer" categories. I
> > >>> > > want to see how each one of the categories (percentages),
> > >>> > > "None", " Equity", etc. varies by
> > >>> > Income.
> > >>> > > How can I do this? How to organize the data well and how to
> > >>> > > plot? I
> > >>> > thought
> > >>> > > Lattice may be a good package to plot this, but I don't know
> > >>> > > for sure. I prefer to do this in Base-R if possible, but I am
> > >>> > > open to ggplot. Any
> > >>> > ideas
> > >>> > > will be helpful.
> > >>> > >
> > >>> > > Income
> > >>> > > $10 $25 $40 $75 > $75 No Answer MF 1 2 3 4 5 9 None 1 3.05
> > >>> > > 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51
> > >>> > > 28.90 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
> > >>> > > Hybrid
> > >>> > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54
> > >>> > > 54.01
> > >>> > > 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02
> > >>> > > 21.09 Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9
> > >>> > > 3.307 2.891
> > >>> > > 13.4 1.746 1.208 4.577
> > >>> > >
> > >>> > > Thanks.
> > >>> > > --
> > >>> > > Anupam.
> > >>> > >
> > >>> > >         [[alternative HTML version deleted]]
> > >>> > >
> > >>> > > ______________________________________________
> > >>> > > R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more,
> > >>> > > see https://st/
> > >>> > > at.ethz.ch <http://at.ethz.ch> %2Fmailman%2Flistinfo%2Fr-
> help&data=05%7C01%7Ctebert
> > >>> > > %40ufl
> > >>> > >
> .edu%7C59874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace6
> > >>> > > 0a6233
> > >>> > >
> 1e1b84%7C0%7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d
> 8ey
> > >>> > > JWIjoi
> > >>> > >
> MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3
> > >>> > > 000%7C
> > >>> > >
> %7C%7C&sdata=xoaDMG7ogY4tMtqe30pONZrBdk0eq2cW%2BgdwlDHneWY
> %3D&
> > >>> > > reserv
> > >>> > > ed=0
> > >>> > > PLEASE do read the posting guide
> > >>> > http://www.r/
> > >>> > -project.org <http://project.org> %2Fposting-
> guide.html&data=05%7C01%7Ctebert%40ufl.ed
> > >>> > u%7C59
> > >>> >
> 874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a62331e1b8
> > >>> > 4%7C0%
> > >>> >
> 7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4
> wLjA
> > >>> > wMDAiL
> > >>> >
> CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sd
> > >>> > ata=H7
> > >>> >
> 6XCa%2FULBGUn0Lok93l6mtHzo0snq5G0a%2BL4sEH8%2F8%3D&reserved=0
> > >>> > > and provide commented, minimal, self-contained, reproducible
> code.
> > >>> >
> > >>>
> > >>>
> > >>> --
> > >>> Anupam.
> > >>>
> > >>>         [[alternative HTML version deleted]]
> > >>>
> > >>> ______________________________________________
> > >>> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > >>> PLEASE do read the posting guide
> > >>> http://www.r-project.org/posting-guide.html
> > >>> and provide commented, minimal, self-contained, reproducible code.
> > >>> ______________________________________________
> > >>> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > >>> PLEASE do read the posting guide
> > >>> http://www.R-project.org/posting-guide.html
> > >>> and provide commented, minimal, self-contained, reproducible code.
> > >>>
> > >>
> > >>
> > >> --
> > >> John Kane
> > >> Kingston ON Canada
> > >>
> > >
> > >
> > > --
> > > Anupam.
> > >
> > >
> >
> > --
> > Anupam.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-
> guide.html
> and provide commented, minimal, self-contained, reproducible code.




 

-- 

Anupam.


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Fri Jul  7 18:12:24 2023
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 7 Jul 2023 18:12:24 +0200
Subject: [R] printCoefmat() and zap.ind
In-Reply-To: <CAPVJd2UBbr--JaN20EG65aFt+yMSeeQ_pT2SfPKD+CFPW+seeQ@mail.gmail.com>
References: <CAPVJd2UBbr--JaN20EG65aFt+yMSeeQ_pT2SfPKD+CFPW+seeQ@mail.gmail.com>
Message-ID: <25768.14696.794296.3642@stat.math.ethz.ch>

>>>>> Shu Fai Cheung 
>>>>>     on Thu, 6 Jul 2023 17:14:27 +0800 writes:

    > Hi All,

    > I would like to ask two questions about printCoefmat().

Good... this function, originally named print.coefmat(),
is 25 years old (in R) now:

  --------------------------------------------------------------------
  r1902 | maechler | 1998-08-14 19:19:05 +0200 (Fri, 14 Aug 1998) |
  Changed paths:
     M R-0-62-patches/CHANGES
     M R-0-62-patches/src/library/base/R/anova.R
     M R-0-62-patches/src/library/base/R/glm.R
     M R-0-62-patches/src/library/base/R/lm.R
     M R-0-62-patches/src/library/base/R/print.R

  print.coefmat(.) about ok
  --------------------------------------------------------------------

  (yes, at the time, the 'stats' package did not exist yet ..)

so it may be a good time to look at it.


    > First, I found a behavior of printCoefmat() that looks strange to me,
    > but I am not sure whether this is an intended behavior:

    > ``` r
    > set.seed(5689417)
    > n <- 10000
    > x1 <- rnorm(n)
    > x2 <- rnorm(n)
    > y <- .5 * x1 + .6 * x2 + rnorm(n, -0.0002366, .2)
    > dat <- data.frame(x1, x2, y)
    > out <- lm(y ~ x1 + x2, dat)
    > out_summary <- summary(out)
    > printCoefmat(out_summary$coefficients)
    > #>               Estimate Std. Error t value Pr(>|t|)
    > #> (Intercept) 1.7228e-08 1.9908e-03    0.00        1
    > #> x1          5.0212e-01 1.9715e-03  254.70   <2e-16 ***
    > #> x2          6.0016e-01 1.9924e-03  301.23   <2e-16 ***
    > #> ---
    > #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

    > printCoefmat(out_summary$coefficients,
    > zap.ind = 1,
    > digits = 4)
    > #>             Estimate Std. Error t value Pr(>|t|)
    > #> (Intercept) 0.000000   0.001991     0.0        1
    > #> x1          0.502100   0.001971   254.7   <2e-16 ***
    > #> x2          0.600200   0.001992   301.2   <2e-16 ***
    > #> ---
    > #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
    > ```

    > With zap.ind = 1, the values in "Estimate" were correctly
    > zapped using digits = 4. However, by default, "Estimate"
    > and "Std. Error" are formatted together. Because the
    > standard errors are small, with digits = 4, zero's were added
    > to values in "Estimate", resulting in "0.502100" and
    > "0.600200", which are misleading because, if rounded to
    > the 6th decimal place, the values to be displayed should
    > be "0.502122" and "0.600162".

    > Is this behavior of printCoefmat() intended/normal?

Yes, this is "normal" in the sense that zapsmall() is used.
I'm not even sure anymore if I was always aware 1998 what exactly the
simple zapsmall() function is doing.
It does not do what you want here (and actually *typically* want
for formatting numbers for display, plotting, etc):
You "really want" here and in such situations

  zapOnlysmall <- function(x, dig) {
      x[abs(x) <= 10^-dig] <- 0
      x
  }

and I think I'd replace the use of zapsmall() inside
printCoefmat() with something like zapOnlysmall() above.

This will indeed nicely solve your problem.


    > Second, how can I use zap without this behavior?
    > In cases like the one above, I need to use zap such that
    > the intercept will not be displayed in scientific notation.
    > Disabling scientific notation cannot achieve the desired
    > goal.


    > I tried adding cs.ind = 1:

well, from the help page   ?printCoefmat  

cs.ind is really about the [ind]ices of [c]oefficient + [s]cale or [s]td.err
So, for lm() you should not have to set cs.ind but rather keep
it at it's smart default of cs.ind = 1:2 .


    > ```r
    > printCoefmat(out_summary$coefficients,
    > zap.ind = 1,
    > digits = 4,
    > cs.ind = 1)
    > #>             Estimate Std. Error t value Pr(>|t|)
    > #> (Intercept)   0.0000   0.001991     0.0        1
    > #> x1            0.5021   0.001971   254.7   <2e-16 ***
    > #> x2            0.6002   0.001992   301.2   <2e-16 ***
    > #> ---
    > #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
    > ```

    > However, this solution is not ideal because the numbers
    > of decimal places of "Estimate" and "Std. Error" are
    > different. How can I get the output like this one?


    > ```r
    > #>             Estimate Std. Error t value Pr(>|t|)
    > #> (Intercept)   0.0000   0.0020     0.0        1
    > #> x1            0.5021   0.0020   254.7   <2e-16 ***
    > #> x2            0.6002   0.0020   301.2   <2e-16 ***
    > ```

    > Thanks for your attention.

    > Regards,
    > Shu Fai Cheung

Thank you, Shu Fai,
for your careful and thoughtful report!

Best regards,
Martin


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Fri Jul  7 18:41:07 2023
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Fri, 7 Jul 2023 18:41:07 +0200
Subject: [R] printCoefmat() and zap.ind
In-Reply-To: <25768.14696.794296.3642@stat.math.ethz.ch>
References: <CAPVJd2UBbr--JaN20EG65aFt+yMSeeQ_pT2SfPKD+CFPW+seeQ@mail.gmail.com>
 <25768.14696.794296.3642@stat.math.ethz.ch>
Message-ID: <25768.16419.758276.323572@stat.math.ethz.ch>

>>>>> Martin Maechler 
>>>>>     on Fri, 7 Jul 2023 18:12:24 +0200 writes:

>>>>> Shu Fai Cheung 
>>>>>     on Thu, 6 Jul 2023 17:14:27 +0800 writes:

    >> Hi All,

    >> I would like to ask two questions about printCoefmat().

    > Good... this function, originally named print.coefmat(),
    > is 25 years old (in R) now:

    > --------------------------------------------------------------------
    > r1902 | maechler | 1998-08-14 19:19:05 +0200 (Fri, 14 Aug 1998) |
    > Changed paths:
    > M R-0-62-patches/CHANGES
    > M R-0-62-patches/src/library/base/R/anova.R
    > M R-0-62-patches/src/library/base/R/glm.R
    > M R-0-62-patches/src/library/base/R/lm.R
    > M R-0-62-patches/src/library/base/R/print.R

    > print.coefmat(.) about ok
    > --------------------------------------------------------------------

    > (yes, at the time, the 'stats' package did not exist yet ..)

    > so it may be a good time to look at it.


    >> First, I found a behavior of printCoefmat() that looks strange to me,
    >> but I am not sure whether this is an intended behavior:

    >> ``` r
    >> set.seed(5689417)
    >> n <- 10000
    >> x1 <- rnorm(n)
    >> x2 <- rnorm(n)
    >> y <- .5 * x1 + .6 * x2 + rnorm(n, -0.0002366, .2)
    >> dat <- data.frame(x1, x2, y)
    >> out <- lm(y ~ x1 + x2, dat)
    >> out_summary <- summary(out)
    >> printCoefmat(out_summary$coefficients)
    >> #>               Estimate Std. Error t value Pr(>|t|)
    >> #> (Intercept) 1.7228e-08 1.9908e-03    0.00        1
    >> #> x1          5.0212e-01 1.9715e-03  254.70   <2e-16 ***
    >> #> x2          6.0016e-01 1.9924e-03  301.23   <2e-16 ***
    >> #> ---
    >> #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

    >> printCoefmat(out_summary$coefficients,
    >> zap.ind = 1,
    >> digits = 4)
    >> #>             Estimate Std. Error t value Pr(>|t|)
    >> #> (Intercept) 0.000000   0.001991     0.0        1
    >> #> x1          0.502100   0.001971   254.7   <2e-16 ***
    >> #> x2          0.600200   0.001992   301.2   <2e-16 ***
    >> #> ---
    >> #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
    >> ```

    >> With zap.ind = 1, the values in "Estimate" were correctly
    >> zapped using digits = 4. However, by default, "Estimate"
    >> and "Std. Error" are formatted together. Because the
    >> standard errors are small, with digits = 4, zero's were added
    >> to values in "Estimate", resulting in "0.502100" and
    >> "0.600200", which are misleading because, if rounded to
    >> the 6th decimal place, the values to be displayed should
    >> be "0.502122" and "0.600162".

    >> Is this behavior of printCoefmat() intended/normal?

    > Yes, this is "normal" in the sense that zapsmall() is used.
    > I'm not even sure anymore if I was always aware 1998 what exactly the
    > simple zapsmall() function is doing.
    > It does not do what you want here (and actually *typically* want
    > for formatting numbers for display, plotting, etc):
    > You "really want" here and in such situations

    > zapOnlysmall <- function(x, dig) {
    >    x[abs(x) <= 10^-dig] <- 0
    >    x
    > }

    > and I think I'd replace the use of zapsmall() inside
    > printCoefmat() with something like zapOnlysmall() above.

    > This will indeed nicely solve your problem.

well..., now that I tried to change it "globally" in
printCoefmat() and I see how many of the lm() summary or anova()
outputs .. outputs that get slightly changed, and sometimes
quite unfavourably,

I think that the "hard" replacement of zapsmall() by
zapOnlysmall() {above}  is too drastic, ... even though it helps
in your case.

... back to the "drawing board" ...

Martin


    >> Second, how can I use zap without this behavior?
    >> In cases like the one above, I need to use zap such that
    >> the intercept will not be displayed in scientific notation.
    >> Disabling scientific notation cannot achieve the desired
    >> goal.


    >> I tried adding cs.ind = 1:

    > well, from the help page   ?printCoefmat  

    > cs.ind is really about the [ind]ices of [c]oefficient + [s]cale or [s]td.err
    > So, for lm() you should not have to set cs.ind but rather keep
    > it at it's smart default of cs.ind = 1:2 .


    >> ```r
    >> printCoefmat(out_summary$coefficients,
    >> zap.ind = 1,
    >> digits = 4,
    >> cs.ind = 1)
    >> #>             Estimate Std. Error t value Pr(>|t|)
    >> #> (Intercept)   0.0000   0.001991     0.0        1
    >> #> x1            0.5021   0.001971   254.7   <2e-16 ***
    >> #> x2            0.6002   0.001992   301.2   <2e-16 ***
    >> #> ---
    >> #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
    >> ```

    >> However, this solution is not ideal because the numbers
    >> of decimal places of "Estimate" and "Std. Error" are
    >> different. How can I get the output like this one?


    >> ```r
    >> #>             Estimate Std. Error t value Pr(>|t|)
    >> #> (Intercept)   0.0000   0.0020     0.0        1
    >> #> x1            0.5021   0.0020   254.7   <2e-16 ***
    >> #> x2            0.6002   0.0020   301.2   <2e-16 ***
    >> ```

    >> Thanks for your attention.

    >> Regards,
    >> Shu Fai Cheung

    > Thank you, Shu Fai,
    > for your careful and thoughtful report!

    > Best regards,
    > Martin

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
    > https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
    > and provide commented, minimal, self-contained, reproducible code.


From h|uc@@2 @end|ng |rom |@u@edu  Fri Jul  7 18:23:57 2023
From: h|uc@@2 @end|ng |rom |@u@edu (Heather Lucas)
Date: Fri, 7 Jul 2023 16:23:57 +0000
Subject: [R] depmixs4 standardError() issue
In-Reply-To: <20230625133640.7b6b073c@rolf-Latitude-E7470>
References: <BN0P221MB049361B6F118626AE9C0243BF84B9@BN0P221MB0493.NAMP221.PROD.OUTLOOK.COM>
 <20230625133640.7b6b073c@rolf-Latitude-E7470>
Message-ID: <BN0P221MB0493A41D64DDE97E14FFB90DF82DA@BN0P221MB0493.NAMP221.PROD.OUTLOOK.COM>

Hi Rolf,

Thank you so much for this very helpful response (and I apologize for the slow response to the response)!  I did have the opportunity to speak to Maarten Speekenbrink recently and he provided similar information, so I believe you are exactly right and your response helped provide some additional context.  Good to know that it is not just me but somewhat of an inherent difficulty with HMMs.

Thank you for letting me know about your eglhmm package!  I will keep in it in mind for any future projects in which there is only one predictor.

For now, I have switched from depmixS4 to a new package called hmmTBM.  Not so much because of the issue with the NaN CIs but because it allows random effects. This is extremely helpful for me since I am working with eye tracking data, which has fixations nested in trials and trials nested in participants.  While I am still learning, this package seems to be working well for me so far.

Thanks again for taking the time to respond to my question!

Best,
Heather


----------------------------------------------
Heather D. Lucas, PhD
(she/her pronouns)
Assistant Professor, Cognitive and Brain Sciences
Committee on Diversity and Outreach in Psychology, Member
Louisiana State University
210 Audubon Hall
Baton Rouge, LA 70803

From: Rolf Turner <rolfturner at posteo.net>
Date: Saturday, June 24, 2023 at 8:36 PM
To: Heather Lucas <hlucas2 at lsu.edu>
Cc: r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] depmixs4 standardError() issue
[You don't often get email from rolfturner at posteo.net. Learn why this is important at https://aka.ms/LearnAboutSenderIdentification ]

On Tue, 30 May 2023 17:43:31 +0000
Heather Lucas <hlucas2 at lsu.edu> wrote:

> Hello,
>
> I've been enjoying using the "Mixture and Hidden Markov Models in R"
> by Visser & Speekenbrink to learn how to apply these analyses to my
> own data using depmixS4.
>
> I currently have a fitted 4-state mixture model with three emissions
> variables and one binomial covariate (HS). I am trying to compute
> confidence intervals using the following code, where fmms4s is the
> model:
>
> fmms4Svov <- vcov(fmms4S)$vcov  #this line runs fine
> fmms4Sse <- standardError(fmms4S)  #this is where I get the error
> fmms4SCI <- confint(fmms4S)
>
> This worked fine before I added the covariate, but with the covariate
> I receive a warning message: In sqrt(diag(vc$vcov)) : NaNs produced.
> As a result, several of my parameters have NaNs as CIs.  In general,
> I get this error more frequently for more complex models (even when
> these models converge and show a better fit than simpler models) but
> I cannot find any information as to why this happens.  Getting rid of
> one of the emissions variables but leaving the covariate also seems
> to ?fix? the issue but it crops up quite often for me in general.
>
> Many thanks,

Greetings.  I hope, given the very belated nature of my response, that
you are still interested in this issue.  I have seen no answers to your
enquiry, so I am chipping in, despite my woeful lack of expertise.

Basically my guess would be that the NaNs result from  the covariance
matrix vc$vcov having negative diagonal entries --- negative variance
estimates.  I believe that vc$vcov would have been produced, at some
level, by inverting the negative of the Hessian matrix of the parameter
estimates.  In my experience, the Hessian matrices that arise in the
hidden Markov model context can be, shall we say, a bit delicate.
(Downright flaky, not to put too fine a point on it.) It may be the
case that the Hessian is not negative definite.

Theoretically the Hessian matrix will be negative definite at the
maximum (or at a local maximum) of the log likelihood of the model.
Convergence issues may be such that, even though the algorithm is judged
to have converged, the parameter estimates are sufficiently far from
the maximum point so that the Hessian will have some positive
eigenvalues (equivalently its negative will have some negative
eigenvalues) leading to the negative variance estimates.  If you could
look at it, you would probably find that the gradient vector (which
should theoretically be zero at the maximum) has some unacceptably
large entries.

The numerical analysis considerations that arise in maximising the log
likelihood of a hidden Markov model are fraught with difficulties and
subtleties.  The more complex the model, the more likely it is that
these difficulties will rear their ugly little heads.  When they do,
it seems to me, there is not much that an ordinary mortal can do about
it.

A couple of other comments.

(a) In the past I have communicated a bit with the maintainer of the
depmixS4 package (Ingmar Visser <i.visser at uva.nl>) and found him to be
reasonably helpful and responsive.  You might try contacting him
directly and see if he has any useful suggestions.  You would of course
have to make your data available to him, in order for him to get
anywhere.

(b) You might like to try experimenting with my package "eglhmm"
("extended generalised linear hidden Markov models").  This package has
considerable overlap with depmixS4, but has a very different syntax and
a different set of bells an whistles.  However I note that in your
enquiry you say that you have "three emission variables" so it appears
that you are dealing with a multivariate problem.  My package does not
do multivariate stuff, except in one restricted (and rather r?cherch?)
context so my package probably won't be of any real use to you.

Also my package does not do mixtures as such.

If you *should* be interested in trying my package, you can get it from
my web page (https://nam04.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.stat.auckland.ac.nz%2F~rolf&data=05%7C01%7Chlucas2%40lsu.edu%7C992a7466238a4739cfef08db751ca58a%7C2d4dad3f50ae47d983a09ae2b1f466f8%7C0%7C0%7C638232538139907909%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=zkIxJHl75Xuw4p1wPBiDIrX94IX%2F1dASRxrU3l%2FiNOQ%3D&reserved=0; scroll to the
bottom and click on "Eglhmm").  The source package and a Windoze binary
are available.  I have not yet submitted my package to CRAN, although I
hope to do so in the fairly (???) near future.

My package may well have a fair few bugs lurking in its innards.  (But
then, don't they all?)  If you do experiment with eglhmm, please let me
know about any bugs that you encounter.

I hope this of some help and interest.

cheers,

Rolf Turner

--
Honorary Research Fellow
Department of Statistics
University of Auckland
Stats. Dep't. (secretaries) phone:
         +64-9-373-7599 ext. 89622
Home phone: +64-9-480-4619

	[[alternative HTML version deleted]]


From r@e@crump @end|ng |rom w@rw|ck@@c@uk  Sat Jul  8 13:28:31 2023
From: r@e@crump @end|ng |rom w@rw|ck@@c@uk (Ron Crump)
Date: Sat, 08 Jul 2023 12:28:31 +0100
Subject: [R] Getting an error calling MASS::boxcox in a function
Message-ID: <08FA83E2-1D1B-4D38-B506-7AF5CCA905EF@warwick.ac.uk>

Hi,

Firstly, apologies as I have posted this on community.rstudio.com too. 

I want to optimise a Box-Cox transformation on columns of a matrix (ie, a unique lambda for each column). So I wrote a function that includes the call to MASS::boxcox in order that it can be applied to each column easily. Except that I'm getting an error when calling the function. If I just extract a column of the matrix and run the code not in the function, it works. If I call the function either with an extracted column (ie dd1 in the reprex below) or in a call to apply I get an error (see the reprex below).

I'm sure I'm doing something silly, but I can't see what it is. Any help appreciated.

library(MASS)

# Find optimised Lambda for Boc-Cox transformation
BoxCoxLambda <- function(z){
    b <- boxcox(lm(z+1 ~ 1), lambda = seq(-5, 5, length.out = 61), plotit = FALSE)
    b$x[which.max(b$y)]    # best lambda
}

mrow <- 500
mcol <- 2
set.seed(12345)
dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol = mcol)

# Try it not using the BoxCoxLambda function:
dd1 <- dd[,1] # 1st column of dd
bb <- boxcox(lm(dd1+1 ~ 1), lambda = seq(-5, 5, length.out = 101), plotit = FALSE)
print(paste0("1st column's lambda is ", bb$x[which.max(bb$y)]))
#> [1] "1st column's lambda is 0.2"

# Calculate lambda for each column of dd
lambdas <- apply(dd, 2, BoxCoxLambda, simplify = TRUE)
#> Error in eval(predvars, data, env): object 'z' not found

Created on 2023-07-08 with reprex v2.0.2

Thanks for your time and help.

Ron
	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jul  8 17:28:21 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 8 Jul 2023 08:28:21 -0700
Subject: [R] Getting an error calling MASS::boxcox in a function
In-Reply-To: <08FA83E2-1D1B-4D38-B506-7AF5CCA905EF@warwick.ac.uk>
References: <08FA83E2-1D1B-4D38-B506-7AF5CCA905EF@warwick.ac.uk>
Message-ID: <CAGxFJbS+gdxL+2NDam6n9RXn6NaM-2ZOQLgbkzissmftOBiDqw@mail.gmail.com>

Try this for your function:

BoxCoxLambda <- function(z){
   y <- z
   b <- boxcox(y + 1 ~ 1,lambda = seq(-5, 5, length.out = 61), plotit =
FALSE)
   b$x[which.max(b$y)]    # best lambda
}

***I think*** (corrections and clarification strongly welcomed!) that `~`
(the formula function) is looking for 'z' in the GlobalEnv, the caller of
apply(), and not finding it. It finds 'y' here explicitly in the
BoxCoxLambda environment.

Cheers,
Bert



On Sat, Jul 8, 2023 at 4:28?AM Ron Crump via R-help <r-help at r-project.org>
wrote:

> Hi,
>
> Firstly, apologies as I have posted this on community.rstudio.com too.
>
> I want to optimise a Box-Cox transformation on columns of a matrix (ie, a
> unique lambda for each column). So I wrote a function that includes the
> call to MASS::boxcox in order that it can be applied to each column easily.
> Except that I'm getting an error when calling the function. If I just
> extract a column of the matrix and run the code not in the function, it
> works. If I call the function either with an extracted column (ie dd1 in
> the reprex below) or in a call to apply I get an error (see the reprex
> below).
>
> I'm sure I'm doing something silly, but I can't see what it is. Any help
> appreciated.
>
> library(MASS)
>
> # Find optimised Lambda for Boc-Cox transformation
> BoxCoxLambda <- function(z){
>     b <- boxcox(lm(z+1 ~ 1), lambda = seq(-5, 5, length.out = 61), plotit
> = FALSE)
>     b$x[which.max(b$y)]    # best lambda
> }
>
> mrow <- 500
> mcol <- 2
> set.seed(12345)
> dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol =
> mcol)
>
> # Try it not using the BoxCoxLambda function:
> dd1 <- dd[,1] # 1st column of dd
> bb <- boxcox(lm(dd1+1 ~ 1), lambda = seq(-5, 5, length.out = 101), plotit
> = FALSE)
> print(paste0("1st column's lambda is ", bb$x[which.max(bb$y)]))
> #> [1] "1st column's lambda is 0.2"
>
> # Calculate lambda for each column of dd
> lambdas <- apply(dd, 2, BoxCoxLambda, simplify = TRUE)
> #> Error in eval(predvars, data, env): object 'z' not found
>
> Created on 2023-07-08 with reprex v2.0.2
>
> Thanks for your time and help.
>
> Ron
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jul  8 18:47:12 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 8 Jul 2023 09:47:12 -0700
Subject: [R] Getting an error calling MASS::boxcox in a function
In-Reply-To: <CAGxFJbS+gdxL+2NDam6n9RXn6NaM-2ZOQLgbkzissmftOBiDqw@mail.gmail.com>
References: <08FA83E2-1D1B-4D38-B506-7AF5CCA905EF@warwick.ac.uk>
 <CAGxFJbS+gdxL+2NDam6n9RXn6NaM-2ZOQLgbkzissmftOBiDqw@mail.gmail.com>
Message-ID: <CAGxFJbRaC89whn011w68jOzxag2R26DRpVLBAJ7guOjTKVk4bg@mail.gmail.com>

No, I'm afraid I'm wrong. Something went wrong with my R session and gave
me incorrect answers. After restarting, I continued to get the same error
as you did with my supposed "fix." So just ignore what I said and sorry for
the noise.

-- Bert

On Sat, Jul 8, 2023 at 8:28?AM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> Try this for your function:
>
> BoxCoxLambda <- function(z){
>    y <- z
>    b <- boxcox(y + 1 ~ 1,lambda = seq(-5, 5, length.out = 61), plotit =
> FALSE)
>    b$x[which.max(b$y)]    # best lambda
> }
>
> ***I think*** (corrections and clarification strongly welcomed!) that `~`
> (the formula function) is looking for 'z' in the GlobalEnv, the caller of
> apply(), and not finding it. It finds 'y' here explicitly in the
> BoxCoxLambda environment.
>
> Cheers,
> Bert
>
>
>
> On Sat, Jul 8, 2023 at 4:28?AM Ron Crump via R-help <r-help at r-project.org>
> wrote:
>
>> Hi,
>>
>> Firstly, apologies as I have posted this on community.rstudio.com too.
>>
>> I want to optimise a Box-Cox transformation on columns of a matrix (ie, a
>> unique lambda for each column). So I wrote a function that includes the
>> call to MASS::boxcox in order that it can be applied to each column easily.
>> Except that I'm getting an error when calling the function. If I just
>> extract a column of the matrix and run the code not in the function, it
>> works. If I call the function either with an extracted column (ie dd1 in
>> the reprex below) or in a call to apply I get an error (see the reprex
>> below).
>>
>> I'm sure I'm doing something silly, but I can't see what it is. Any help
>> appreciated.
>>
>> library(MASS)
>>
>> # Find optimised Lambda for Boc-Cox transformation
>> BoxCoxLambda <- function(z){
>>     b <- boxcox(lm(z+1 ~ 1), lambda = seq(-5, 5, length.out = 61), plotit
>> = FALSE)
>>     b$x[which.max(b$y)]    # best lambda
>> }
>>
>> mrow <- 500
>> mcol <- 2
>> set.seed(12345)
>> dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol =
>> mcol)
>>
>> # Try it not using the BoxCoxLambda function:
>> dd1 <- dd[,1] # 1st column of dd
>> bb <- boxcox(lm(dd1+1 ~ 1), lambda = seq(-5, 5, length.out = 101), plotit
>> = FALSE)
>> print(paste0("1st column's lambda is ", bb$x[which.max(bb$y)]))
>> #> [1] "1st column's lambda is 0.2"
>>
>> # Calculate lambda for each column of dd
>> lambdas <- apply(dd, 2, BoxCoxLambda, simplify = TRUE)
>> #> Error in eval(predvars, data, env): object 'z' not found
>>
>> Created on 2023-07-08 with reprex v2.0.2
>>
>> Thanks for your time and help.
>>
>> Ron
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From j|ox @end|ng |rom mcm@@ter@c@  Sat Jul  8 20:25:49 2023
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Sat, 8 Jul 2023 14:25:49 -0400
Subject: [R] Getting an error calling MASS::boxcox in a function
In-Reply-To: <CAGxFJbRaC89whn011w68jOzxag2R26DRpVLBAJ7guOjTKVk4bg@mail.gmail.com>
References: <08FA83E2-1D1B-4D38-B506-7AF5CCA905EF@warwick.ac.uk>
 <CAGxFJbS+gdxL+2NDam6n9RXn6NaM-2ZOQLgbkzissmftOBiDqw@mail.gmail.com>
 <CAGxFJbRaC89whn011w68jOzxag2R26DRpVLBAJ7guOjTKVk4bg@mail.gmail.com>
Message-ID: <56188272-3d6a-205f-eeb3-ab38ea503b2c@mcmaster.ca>

Dear Ron and Bert,

First (and without considering why one would want to do this, e.g., 
adding a start of 1 to the data), the following works for me:

------ snip ------

 > library(MASS)

 > BoxCoxLambda <- function(z){
+   b <- boxcox(z + 1 ~ 1,
+               lambda = seq(-5, 5, length.out = 101),
+               plotit = FALSE)
+   b$x[which.max(b$y)]
+ }

 > mrow <- 500
 > mcol <- 2
 > set.seed(12345)
 > dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol =
+                mcol)

 > dd1 <- dd[, 1] # 1st column of dd
 > res <- boxcox(lm(dd1 + 1 ~ 1), lambda = seq(-5, 5, length.out = 101), 
plotit
+              = FALSE)
 > res$x[which.max(res$y)]
[1] 0.2

 > apply(dd, 2, BoxCoxLambda, simplify = TRUE)
[1] 0.2 0.2

------ snip ------

One could also use the powerTransform() function in the car package, 
which in this context transforms towards *multi*normality:

------ snip ------

 > library(car)
Loading required package: carData

 > powerTransform(dd + 1)
Estimated transformation parameters
        Y1        Y2
0.1740200 0.2089925

I hope this helps,
  John

-- 
John Fox, Professor Emeritus
McMaster University
Hamilton, Ontario, Canada
web: https://www.john-fox.ca/

On 2023-07-08 12:47 p.m., Bert Gunter wrote:
> Caution: This email may have originated from outside the organization. Please exercise additional caution with any links and attachments.
> 
> 
> No, I'm afraid I'm wrong. Something went wrong with my R session and gave
> me incorrect answers. After restarting, I continued to get the same error
> as you did with my supposed "fix." So just ignore what I said and sorry for
> the noise.
> 
> -- Bert
> 
> On Sat, Jul 8, 2023 at 8:28?AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
>> Try this for your function:
>>
>> BoxCoxLambda <- function(z){
>>     y <- z
>>     b <- boxcox(y + 1 ~ 1,lambda = seq(-5, 5, length.out = 61), plotit =
>> FALSE)
>>     b$x[which.max(b$y)]    # best lambda
>> }
>>
>> ***I think*** (corrections and clarification strongly welcomed!) that `~`
>> (the formula function) is looking for 'z' in the GlobalEnv, the caller of
>> apply(), and not finding it. It finds 'y' here explicitly in the
>> BoxCoxLambda environment.
>>
>> Cheers,
>> Bert
>>
>>
>>
>> On Sat, Jul 8, 2023 at 4:28?AM Ron Crump via R-help <r-help at r-project.org>
>> wrote:
>>
>>> Hi,
>>>
>>> Firstly, apologies as I have posted this on community.rstudio.com too.
>>>
>>> I want to optimise a Box-Cox transformation on columns of a matrix (ie, a
>>> unique lambda for each column). So I wrote a function that includes the
>>> call to MASS::boxcox in order that it can be applied to each column easily.
>>> Except that I'm getting an error when calling the function. If I just
>>> extract a column of the matrix and run the code not in the function, it
>>> works. If I call the function either with an extracted column (ie dd1 in
>>> the reprex below) or in a call to apply I get an error (see the reprex
>>> below).
>>>
>>> I'm sure I'm doing something silly, but I can't see what it is. Any help
>>> appreciated.
>>>
>>> library(MASS)
>>>
>>> # Find optimised Lambda for Boc-Cox transformation
>>> BoxCoxLambda <- function(z){
>>>      b <- boxcox(lm(z+1 ~ 1), lambda = seq(-5, 5, length.out = 61), plotit
>>> = FALSE)
>>>      b$x[which.max(b$y)]    # best lambda
>>> }
>>>
>>> mrow <- 500
>>> mcol <- 2
>>> set.seed(12345)
>>> dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol =
>>> mcol)
>>>
>>> # Try it not using the BoxCoxLambda function:
>>> dd1 <- dd[,1] # 1st column of dd
>>> bb <- boxcox(lm(dd1+1 ~ 1), lambda = seq(-5, 5, length.out = 101), plotit
>>> = FALSE)
>>> print(paste0("1st column's lambda is ", bb$x[which.max(bb$y)]))
>>> #> [1] "1st column's lambda is 0.2"
>>>
>>> # Calculate lambda for each column of dd
>>> lambdas <- apply(dd, 2, BoxCoxLambda, simplify = TRUE)
>>> #> Error in eval(predvars, data, env): object 'z' not found
>>>
>>> Created on 2023-07-08 with reprex v2.0.2
>>>
>>> Thanks for your time and help.
>>>
>>> Ron
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
> 
>          [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jul  8 21:42:05 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 8 Jul 2023 12:42:05 -0700
Subject: [R] Getting an error calling MASS::boxcox in a function
In-Reply-To: <56188272-3d6a-205f-eeb3-ab38ea503b2c@mcmaster.ca>
References: <08FA83E2-1D1B-4D38-B506-7AF5CCA905EF@warwick.ac.uk>
 <CAGxFJbS+gdxL+2NDam6n9RXn6NaM-2ZOQLgbkzissmftOBiDqw@mail.gmail.com>
 <CAGxFJbRaC89whn011w68jOzxag2R26DRpVLBAJ7guOjTKVk4bg@mail.gmail.com>
 <56188272-3d6a-205f-eeb3-ab38ea503b2c@mcmaster.ca>
Message-ID: <CAGxFJbReEb_f0+gzDOTfWOiRYgGizdVgzX5ZbKkguthE7iqR6g@mail.gmail.com>

Thanks John.

?boxcox says:

*************************
Arguments

object

a formula or fitted model object. Currently only lm and aov objects are handled.
*************************
I read that as saying that

boxcox(lm(z+1 ~ 1),...)

should run without error. But it didn't. And perhaps here's why:
BoxCoxLambda <- function(z){
   b <- MASS:::boxcox.lm(lm(z+1 ~ 1), lambda = seq(-5, 5, length.out =
61), plotit = FALSE)
   b$x[which.max(b$y)]    # best lambda
}

> lambdas <- apply(dd,2 , BoxCoxLambda)
Error in NextMethod() : 'NextMethod' called from an anonymous function

and, indeed, ?UseMethod says:
"NextMethod should not be called except in methods called by UseMethod
or from internal generics (see InternalGenerics). In particular it
will not work inside anonymous calling functions (e.g.,
get("print.ts")(AirPassengers))."

****BUT ****
BoxCoxLambda <- function(z){
  b <- MASS:::boxcox(z+1 ~ 1, lambda = seq(-5, 5, length.out = 61),
plotit = FALSE)
  b$x[which.max(b$y)]    # best lambda
}

> lambdas <- apply(dd,2 , BoxCoxLambda)
> lambdas
[1] 0.1666667 0.1666667

The identical lambdas do not seem right to me; nor do I understand why
boxcox.lm apparently throws the error while boxcox.formula does not
(it also calls NextMethod()) So I would welcome clarification to clear
my clogged (cerebral) sinuses. :-)


Best,
Bert


On Sat, Jul 8, 2023 at 11:25?AM John Fox <jfox at mcmaster.ca> wrote:
>
> Dear Ron and Bert,
>
> First (and without considering why one would want to do this, e.g.,
> adding a start of 1 to the data), the following works for me:
>
> ------ snip ------
>
>  > library(MASS)
>
>  > BoxCoxLambda <- function(z){
> +   b <- boxcox(z + 1 ~ 1,
> +               lambda = seq(-5, 5, length.out = 101),
> +               plotit = FALSE)
> +   b$x[which.max(b$y)]
> + }
>
>  > mrow <- 500
>  > mcol <- 2
>  > set.seed(12345)
>  > dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol =
> +                mcol)
>
>  > dd1 <- dd[, 1] # 1st column of dd
>  > res <- boxcox(lm(dd1 + 1 ~ 1), lambda = seq(-5, 5, length.out = 101),
> plotit
> +              = FALSE)
>  > res$x[which.max(res$y)]
> [1] 0.2
>
>  > apply(dd, 2, BoxCoxLambda, simplify = TRUE)
> [1] 0.2 0.2
>
> ------ snip ------
>
> One could also use the powerTransform() function in the car package,
> which in this context transforms towards *multi*normality:
>
> ------ snip ------
>
>  > library(car)
> Loading required package: carData
>
>  > powerTransform(dd + 1)
> Estimated transformation parameters
>         Y1        Y2
> 0.1740200 0.2089925
>
> I hope this helps,
>   John
>
> --
> John Fox, Professor Emeritus
> McMaster University
> Hamilton, Ontario, Canada
> web: https://www.john-fox.ca/
>
> On 2023-07-08 12:47 p.m., Bert Gunter wrote:
> > Caution: This email may have originated from outside the organization. Please exercise additional caution with any links and attachments.
> >
> >
> > No, I'm afraid I'm wrong. Something went wrong with my R session and gave
> > me incorrect answers. After restarting, I continued to get the same error
> > as you did with my supposed "fix." So just ignore what I said and sorry for
> > the noise.
> >
> > -- Bert
> >
> > On Sat, Jul 8, 2023 at 8:28?AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >
> >> Try this for your function:
> >>
> >> BoxCoxLambda <- function(z){
> >>     y <- z
> >>     b <- boxcox(y + 1 ~ 1,lambda = seq(-5, 5, length.out = 61), plotit =
> >> FALSE)
> >>     b$x[which.max(b$y)]    # best lambda
> >> }
> >>
> >> ***I think*** (corrections and clarification strongly welcomed!) that `~`
> >> (the formula function) is looking for 'z' in the GlobalEnv, the caller of
> >> apply(), and not finding it. It finds 'y' here explicitly in the
> >> BoxCoxLambda environment.
> >>
> >> Cheers,
> >> Bert
> >>
> >>
> >>
> >> On Sat, Jul 8, 2023 at 4:28?AM Ron Crump via R-help <r-help at r-project.org>
> >> wrote:
> >>
> >>> Hi,
> >>>
> >>> Firstly, apologies as I have posted this on community.rstudio.com too.
> >>>
> >>> I want to optimise a Box-Cox transformation on columns of a matrix (ie, a
> >>> unique lambda for each column). So I wrote a function that includes the
> >>> call to MASS::boxcox in order that it can be applied to each column easily.
> >>> Except that I'm getting an error when calling the function. If I just
> >>> extract a column of the matrix and run the code not in the function, it
> >>> works. If I call the function either with an extracted column (ie dd1 in
> >>> the reprex below) or in a call to apply I get an error (see the reprex
> >>> below).
> >>>
> >>> I'm sure I'm doing something silly, but I can't see what it is. Any help
> >>> appreciated.
> >>>
> >>> library(MASS)
> >>>
> >>> # Find optimised Lambda for Boc-Cox transformation
> >>> BoxCoxLambda <- function(z){
> >>>      b <- boxcox(lm(z+1 ~ 1), lambda = seq(-5, 5, length.out = 61), plotit
> >>> = FALSE)
> >>>      b$x[which.max(b$y)]    # best lambda
> >>> }
> >>>
> >>> mrow <- 500
> >>> mcol <- 2
> >>> set.seed(12345)
> >>> dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol =
> >>> mcol)
> >>>
> >>> # Try it not using the BoxCoxLambda function:
> >>> dd1 <- dd[,1] # 1st column of dd
> >>> bb <- boxcox(lm(dd1+1 ~ 1), lambda = seq(-5, 5, length.out = 101), plotit
> >>> = FALSE)
> >>> print(paste0("1st column's lambda is ", bb$x[which.max(bb$y)]))
> >>> #> [1] "1st column's lambda is 0.2"
> >>>
> >>> # Calculate lambda for each column of dd
> >>> lambdas <- apply(dd, 2, BoxCoxLambda, simplify = TRUE)
> >>> #> Error in eval(predvars, data, env): object 'z' not found
> >>>
> >>> Created on 2023-07-08 with reprex v2.0.2
> >>>
> >>> Thanks for your time and help.
> >>>
> >>> Ron
> >>>          [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>>
> >>
> >
> >          [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>


From j|ox @end|ng |rom mcm@@ter@c@  Sat Jul  8 23:01:27 2023
From: j|ox @end|ng |rom mcm@@ter@c@ (John Fox)
Date: Sat, 8 Jul 2023 17:01:27 -0400
Subject: [R] Getting an error calling MASS::boxcox in a function
In-Reply-To: <CAGxFJbReEb_f0+gzDOTfWOiRYgGizdVgzX5ZbKkguthE7iqR6g@mail.gmail.com>
References: <08FA83E2-1D1B-4D38-B506-7AF5CCA905EF@warwick.ac.uk>
 <CAGxFJbS+gdxL+2NDam6n9RXn6NaM-2ZOQLgbkzissmftOBiDqw@mail.gmail.com>
 <CAGxFJbRaC89whn011w68jOzxag2R26DRpVLBAJ7guOjTKVk4bg@mail.gmail.com>
 <56188272-3d6a-205f-eeb3-ab38ea503b2c@mcmaster.ca>
 <CAGxFJbReEb_f0+gzDOTfWOiRYgGizdVgzX5ZbKkguthE7iqR6g@mail.gmail.com>
Message-ID: <b1559643-c0cf-7b89-382a-cb184e567669@mcmaster.ca>

Hi Bert,

On 2023-07-08 3:42 p.m., Bert Gunter wrote:
> Caution: This email may have originated from outside the organization. Please exercise additional caution with any links and attachments.
> 
> 
> Thanks John.
> 
> ?boxcox says:
> 
> *************************
> Arguments
> 
> object
> 
> a formula or fitted model object. Currently only lm and aov objects are handled.
> *************************
> I read that as saying that
> 
> boxcox(lm(z+1 ~ 1),...)
> 
> should run without error. But it didn't. And perhaps here's why:
> BoxCoxLambda <- function(z){
>     b <- MASS:::boxcox.lm(lm(z+1 ~ 1), lambda = seq(-5, 5, length.out =
> 61), plotit = FALSE)
>     b$x[which.max(b$y)]    # best lambda
> }
> 
>> lambdas <- apply(dd,2 , BoxCoxLambda)
> Error in NextMethod() : 'NextMethod' called from an anonymous function
> 
> and, indeed, ?UseMethod says:
> "NextMethod should not be called except in methods called by UseMethod
> or from internal generics (see InternalGenerics). In particular it
> will not work inside anonymous calling functions (e.g.,
> get("print.ts")(AirPassengers))."
> 
> ****BUT ****
> BoxCoxLambda <- function(z){
>    b <- MASS:::boxcox(z+1 ~ 1, lambda = seq(-5, 5, length.out = 61),
> plotit = FALSE)
>    b$x[which.max(b$y)]    # best lambda
> }
> 
>> lambdas <- apply(dd,2 , BoxCoxLambda)
>> lambdas
> [1] 0.1666667 0.1666667

As it turns out, it's the update() step in boxcox.lm() that fails, and 
the update takes place because $y is missing from the lm object, so the 
following works:

BoxCoxLambda <- function(z){
     b <- boxcox(lm(z + 1 ~ 1, y=TRUE),
                 lambda = seq(-5, 5, length.out = 101),
                 plotit = FALSE)
     b$x[which.max(b$y)]
}

> 
> The identical lambdas do not seem right to me; 

I think that's just an accident of the example (using the BoxCoxLambda() 
above):

 > apply(dd, 2, BoxCoxLambda, simplify = TRUE)
[1] 0.2 0.2

 > dd[, 2]  <- dd[, 2]^3
 > apply(dd, 2, BoxCoxLambda, simplify = TRUE)
[1] 0.2 0.1

Best,
  John

> nor do I understand why
> boxcox.lm apparently throws the error while boxcox.formula does not
> (it also calls NextMethod()) So I would welcome clarification to clear
> my clogged (cerebral) sinuses. :-)
> 
> 
> Best,
> Bert
> 
> 
> On Sat, Jul 8, 2023 at 11:25?AM John Fox <jfox at mcmaster.ca> wrote:
>>
>> Dear Ron and Bert,
>>
>> First (and without considering why one would want to do this, e.g.,
>> adding a start of 1 to the data), the following works for me:
>>
>> ------ snip ------
>>
>>   > library(MASS)
>>
>>   > BoxCoxLambda <- function(z){
>> +   b <- boxcox(z + 1 ~ 1,
>> +               lambda = seq(-5, 5, length.out = 101),
>> +               plotit = FALSE)
>> +   b$x[which.max(b$y)]
>> + }
>>
>>   > mrow <- 500
>>   > mcol <- 2
>>   > set.seed(12345)
>>   > dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol =
>> +                mcol)
>>
>>   > dd1 <- dd[, 1] # 1st column of dd
>>   > res <- boxcox(lm(dd1 + 1 ~ 1), lambda = seq(-5, 5, length.out = 101),
>> plotit
>> +              = FALSE)
>>   > res$x[which.max(res$y)]
>> [1] 0.2
>>
>>   > apply(dd, 2, BoxCoxLambda, simplify = TRUE)
>> [1] 0.2 0.2
>>
>> ------ snip ------
>>
>> One could also use the powerTransform() function in the car package,
>> which in this context transforms towards *multi*normality:
>>
>> ------ snip ------
>>
>>   > library(car)
>> Loading required package: carData
>>
>>   > powerTransform(dd + 1)
>> Estimated transformation parameters
>>          Y1        Y2
>> 0.1740200 0.2089925
>>
>> I hope this helps,
>>    John
>>
>> --
>> John Fox, Professor Emeritus
>> McMaster University
>> Hamilton, Ontario, Canada
>> web: https://www.john-fox.ca/
>>
>> On 2023-07-08 12:47 p.m., Bert Gunter wrote:
>>> Caution: This email may have originated from outside the organization. Please exercise additional caution with any links and attachments.
>>>
>>>
>>> No, I'm afraid I'm wrong. Something went wrong with my R session and gave
>>> me incorrect answers. After restarting, I continued to get the same error
>>> as you did with my supposed "fix." So just ignore what I said and sorry for
>>> the noise.
>>>
>>> -- Bert
>>>
>>> On Sat, Jul 8, 2023 at 8:28?AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>>
>>>> Try this for your function:
>>>>
>>>> BoxCoxLambda <- function(z){
>>>>      y <- z
>>>>      b <- boxcox(y + 1 ~ 1,lambda = seq(-5, 5, length.out = 61), plotit =
>>>> FALSE)
>>>>      b$x[which.max(b$y)]    # best lambda
>>>> }
>>>>
>>>> ***I think*** (corrections and clarification strongly welcomed!) that `~`
>>>> (the formula function) is looking for 'z' in the GlobalEnv, the caller of
>>>> apply(), and not finding it. It finds 'y' here explicitly in the
>>>> BoxCoxLambda environment.
>>>>
>>>> Cheers,
>>>> Bert
>>>>
>>>>
>>>>
>>>> On Sat, Jul 8, 2023 at 4:28?AM Ron Crump via R-help <r-help at r-project.org>
>>>> wrote:
>>>>
>>>>> Hi,
>>>>>
>>>>> Firstly, apologies as I have posted this on community.rstudio.com too.
>>>>>
>>>>> I want to optimise a Box-Cox transformation on columns of a matrix (ie, a
>>>>> unique lambda for each column). So I wrote a function that includes the
>>>>> call to MASS::boxcox in order that it can be applied to each column easily.
>>>>> Except that I'm getting an error when calling the function. If I just
>>>>> extract a column of the matrix and run the code not in the function, it
>>>>> works. If I call the function either with an extracted column (ie dd1 in
>>>>> the reprex below) or in a call to apply I get an error (see the reprex
>>>>> below).
>>>>>
>>>>> I'm sure I'm doing something silly, but I can't see what it is. Any help
>>>>> appreciated.
>>>>>
>>>>> library(MASS)
>>>>>
>>>>> # Find optimised Lambda for Boc-Cox transformation
>>>>> BoxCoxLambda <- function(z){
>>>>>       b <- boxcox(lm(z+1 ~ 1), lambda = seq(-5, 5, length.out = 61), plotit
>>>>> = FALSE)
>>>>>       b$x[which.max(b$y)]    # best lambda
>>>>> }
>>>>>
>>>>> mrow <- 500
>>>>> mcol <- 2
>>>>> set.seed(12345)
>>>>> dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol =
>>>>> mcol)
>>>>>
>>>>> # Try it not using the BoxCoxLambda function:
>>>>> dd1 <- dd[,1] # 1st column of dd
>>>>> bb <- boxcox(lm(dd1+1 ~ 1), lambda = seq(-5, 5, length.out = 101), plotit
>>>>> = FALSE)
>>>>> print(paste0("1st column's lambda is ", bb$x[which.max(bb$y)]))
>>>>> #> [1] "1st column's lambda is 0.2"
>>>>>
>>>>> # Calculate lambda for each column of dd
>>>>> lambdas <- apply(dd, 2, BoxCoxLambda, simplify = TRUE)
>>>>> #> Error in eval(predvars, data, env): object 'z' not found
>>>>>
>>>>> Created on 2023-07-08 with reprex v2.0.2
>>>>>
>>>>> Thanks for your time and help.
>>>>>
>>>>> Ron
>>>>>           [[alternative HTML version deleted]]
>>>>>
>>>>> ______________________________________________
>>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>> PLEASE do read the posting guide
>>>>> http://www.R-project.org/posting-guide.html
>>>>> and provide commented, minimal, self-contained, reproducible code.
>>>>>
>>>>
>>>
>>>           [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jul  8 23:08:07 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sat, 8 Jul 2023 14:08:07 -0700
Subject: [R] Getting an error calling MASS::boxcox in a function
In-Reply-To: <b1559643-c0cf-7b89-382a-cb184e567669@mcmaster.ca>
References: <08FA83E2-1D1B-4D38-B506-7AF5CCA905EF@warwick.ac.uk>
 <CAGxFJbS+gdxL+2NDam6n9RXn6NaM-2ZOQLgbkzissmftOBiDqw@mail.gmail.com>
 <CAGxFJbRaC89whn011w68jOzxag2R26DRpVLBAJ7guOjTKVk4bg@mail.gmail.com>
 <56188272-3d6a-205f-eeb3-ab38ea503b2c@mcmaster.ca>
 <CAGxFJbReEb_f0+gzDOTfWOiRYgGizdVgzX5ZbKkguthE7iqR6g@mail.gmail.com>
 <b1559643-c0cf-7b89-382a-cb184e567669@mcmaster.ca>
Message-ID: <CAGxFJbRXL0KaUisgVD+BiLjhpOn3+MaV045kX1=XwG4WQm9Lxw@mail.gmail.com>

Aha. Many thanks, John. Never would have gotten there on my own.

-- Bert

On Sat, Jul 8, 2023 at 2:01?PM John Fox <jfox at mcmaster.ca> wrote:
>
> Hi Bert,
>
> On 2023-07-08 3:42 p.m., Bert Gunter wrote:
> > Caution: This email may have originated from outside the organization. Please exercise additional caution with any links and attachments.
> >
> >
> > Thanks John.
> >
> > ?boxcox says:
> >
> > *************************
> > Arguments
> >
> > object
> >
> > a formula or fitted model object. Currently only lm and aov objects are handled.
> > *************************
> > I read that as saying that
> >
> > boxcox(lm(z+1 ~ 1),...)
> >
> > should run without error. But it didn't. And perhaps here's why:
> > BoxCoxLambda <- function(z){
> >     b <- MASS:::boxcox.lm(lm(z+1 ~ 1), lambda = seq(-5, 5, length.out =
> > 61), plotit = FALSE)
> >     b$x[which.max(b$y)]    # best lambda
> > }
> >
> >> lambdas <- apply(dd,2 , BoxCoxLambda)
> > Error in NextMethod() : 'NextMethod' called from an anonymous function
> >
> > and, indeed, ?UseMethod says:
> > "NextMethod should not be called except in methods called by UseMethod
> > or from internal generics (see InternalGenerics). In particular it
> > will not work inside anonymous calling functions (e.g.,
> > get("print.ts")(AirPassengers))."
> >
> > ****BUT ****
> > BoxCoxLambda <- function(z){
> >    b <- MASS:::boxcox(z+1 ~ 1, lambda = seq(-5, 5, length.out = 61),
> > plotit = FALSE)
> >    b$x[which.max(b$y)]    # best lambda
> > }
> >
> >> lambdas <- apply(dd,2 , BoxCoxLambda)
> >> lambdas
> > [1] 0.1666667 0.1666667
>
> As it turns out, it's the update() step in boxcox.lm() that fails, and
> the update takes place because $y is missing from the lm object, so the
> following works:
>
> BoxCoxLambda <- function(z){
>      b <- boxcox(lm(z + 1 ~ 1, y=TRUE),
>                  lambda = seq(-5, 5, length.out = 101),
>                  plotit = FALSE)
>      b$x[which.max(b$y)]
> }
>
> >
> > The identical lambdas do not seem right to me;
>
> I think that's just an accident of the example (using the BoxCoxLambda()
> above):
>
>  > apply(dd, 2, BoxCoxLambda, simplify = TRUE)
> [1] 0.2 0.2
>
>  > dd[, 2]  <- dd[, 2]^3
>  > apply(dd, 2, BoxCoxLambda, simplify = TRUE)
> [1] 0.2 0.1
>
> Best,
>   John
>
> > nor do I understand why
> > boxcox.lm apparently throws the error while boxcox.formula does not
> > (it also calls NextMethod()) So I would welcome clarification to clear
> > my clogged (cerebral) sinuses. :-)
> >
> >
> > Best,
> > Bert
> >
> >
> > On Sat, Jul 8, 2023 at 11:25?AM John Fox <jfox at mcmaster.ca> wrote:
> >>
> >> Dear Ron and Bert,
> >>
> >> First (and without considering why one would want to do this, e.g.,
> >> adding a start of 1 to the data), the following works for me:
> >>
> >> ------ snip ------
> >>
> >>   > library(MASS)
> >>
> >>   > BoxCoxLambda <- function(z){
> >> +   b <- boxcox(z + 1 ~ 1,
> >> +               lambda = seq(-5, 5, length.out = 101),
> >> +               plotit = FALSE)
> >> +   b$x[which.max(b$y)]
> >> + }
> >>
> >>   > mrow <- 500
> >>   > mcol <- 2
> >>   > set.seed(12345)
> >>   > dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol =
> >> +                mcol)
> >>
> >>   > dd1 <- dd[, 1] # 1st column of dd
> >>   > res <- boxcox(lm(dd1 + 1 ~ 1), lambda = seq(-5, 5, length.out = 101),
> >> plotit
> >> +              = FALSE)
> >>   > res$x[which.max(res$y)]
> >> [1] 0.2
> >>
> >>   > apply(dd, 2, BoxCoxLambda, simplify = TRUE)
> >> [1] 0.2 0.2
> >>
> >> ------ snip ------
> >>
> >> One could also use the powerTransform() function in the car package,
> >> which in this context transforms towards *multi*normality:
> >>
> >> ------ snip ------
> >>
> >>   > library(car)
> >> Loading required package: carData
> >>
> >>   > powerTransform(dd + 1)
> >> Estimated transformation parameters
> >>          Y1        Y2
> >> 0.1740200 0.2089925
> >>
> >> I hope this helps,
> >>    John
> >>
> >> --
> >> John Fox, Professor Emeritus
> >> McMaster University
> >> Hamilton, Ontario, Canada
> >> web: https://www.john-fox.ca/
> >>
> >> On 2023-07-08 12:47 p.m., Bert Gunter wrote:
> >>> Caution: This email may have originated from outside the organization. Please exercise additional caution with any links and attachments.
> >>>
> >>>
> >>> No, I'm afraid I'm wrong. Something went wrong with my R session and gave
> >>> me incorrect answers. After restarting, I continued to get the same error
> >>> as you did with my supposed "fix." So just ignore what I said and sorry for
> >>> the noise.
> >>>
> >>> -- Bert
> >>>
> >>> On Sat, Jul 8, 2023 at 8:28?AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >>>
> >>>> Try this for your function:
> >>>>
> >>>> BoxCoxLambda <- function(z){
> >>>>      y <- z
> >>>>      b <- boxcox(y + 1 ~ 1,lambda = seq(-5, 5, length.out = 61), plotit =
> >>>> FALSE)
> >>>>      b$x[which.max(b$y)]    # best lambda
> >>>> }
> >>>>
> >>>> ***I think*** (corrections and clarification strongly welcomed!) that `~`
> >>>> (the formula function) is looking for 'z' in the GlobalEnv, the caller of
> >>>> apply(), and not finding it. It finds 'y' here explicitly in the
> >>>> BoxCoxLambda environment.
> >>>>
> >>>> Cheers,
> >>>> Bert
> >>>>
> >>>>
> >>>>
> >>>> On Sat, Jul 8, 2023 at 4:28?AM Ron Crump via R-help <r-help at r-project.org>
> >>>> wrote:
> >>>>
> >>>>> Hi,
> >>>>>
> >>>>> Firstly, apologies as I have posted this on community.rstudio.com too.
> >>>>>
> >>>>> I want to optimise a Box-Cox transformation on columns of a matrix (ie, a
> >>>>> unique lambda for each column). So I wrote a function that includes the
> >>>>> call to MASS::boxcox in order that it can be applied to each column easily.
> >>>>> Except that I'm getting an error when calling the function. If I just
> >>>>> extract a column of the matrix and run the code not in the function, it
> >>>>> works. If I call the function either with an extracted column (ie dd1 in
> >>>>> the reprex below) or in a call to apply I get an error (see the reprex
> >>>>> below).
> >>>>>
> >>>>> I'm sure I'm doing something silly, but I can't see what it is. Any help
> >>>>> appreciated.
> >>>>>
> >>>>> library(MASS)
> >>>>>
> >>>>> # Find optimised Lambda for Boc-Cox transformation
> >>>>> BoxCoxLambda <- function(z){
> >>>>>       b <- boxcox(lm(z+1 ~ 1), lambda = seq(-5, 5, length.out = 61), plotit
> >>>>> = FALSE)
> >>>>>       b$x[which.max(b$y)]    # best lambda
> >>>>> }
> >>>>>
> >>>>> mrow <- 500
> >>>>> mcol <- 2
> >>>>> set.seed(12345)
> >>>>> dd <- matrix(rgamma(mrow*mcol, shape = 2, scale = 5), nrow = mrow, ncol =
> >>>>> mcol)
> >>>>>
> >>>>> # Try it not using the BoxCoxLambda function:
> >>>>> dd1 <- dd[,1] # 1st column of dd
> >>>>> bb <- boxcox(lm(dd1+1 ~ 1), lambda = seq(-5, 5, length.out = 101), plotit
> >>>>> = FALSE)
> >>>>> print(paste0("1st column's lambda is ", bb$x[which.max(bb$y)]))
> >>>>> #> [1] "1st column's lambda is 0.2"
> >>>>>
> >>>>> # Calculate lambda for each column of dd
> >>>>> lambdas <- apply(dd, 2, BoxCoxLambda, simplify = TRUE)
> >>>>> #> Error in eval(predvars, data, env): object 'z' not found
> >>>>>
> >>>>> Created on 2023-07-08 with reprex v2.0.2
> >>>>>
> >>>>> Thanks for your time and help.
> >>>>>
> >>>>> Ron
> >>>>>           [[alternative HTML version deleted]]
> >>>>>
> >>>>> ______________________________________________
> >>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>> PLEASE do read the posting guide
> >>>>> http://www.R-project.org/posting-guide.html
> >>>>> and provide commented, minimal, self-contained, reproducible code.
> >>>>>
> >>>>
> >>>
> >>>           [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>


From @hu|@|@cheung @end|ng |rom gm@||@com  Sun Jul  9 03:25:03 2023
From: @hu|@|@cheung @end|ng |rom gm@||@com (Shu Fai Cheung)
Date: Sun, 9 Jul 2023 09:25:03 +0800
Subject: [R] printCoefmat() and zap.ind
In-Reply-To: <25768.16419.758276.323572@stat.math.ethz.ch>
References: <CAPVJd2UBbr--JaN20EG65aFt+yMSeeQ_pT2SfPKD+CFPW+seeQ@mail.gmail.com>
 <25768.14696.794296.3642@stat.math.ethz.ch>
 <25768.16419.758276.323572@stat.math.ethz.ch>
Message-ID: <CAPVJd2Xf0KHGY1T_ydivvqobq8AB=3cN8C8j7Y8bdubd98-27g@mail.gmail.com>

(Sorry for sending it twice. I forgot to reply
to the mailing list.)

Many many thanks for the comments and examples!

I could write my own function to achieve what
I want to do. However, I would like to find a method that
uses built-in functions only and prints the output in a format
identical to that of the default output of print.summary.lm(),
which uses printCoefmat() internally.

It seems that this cannot be done easily for now. This
is a workaround.

```r

set.seed(5689417)
n <- 10000
x1 <- rnorm(n)
x2 <- rnorm(n)
y <- .5 * x1 + .6 * x2 + rnorm(n, -0.0002366, .2)
dat <- data.frame(x1, x2, y)
out <- lm(y ~ x1 + x2, dat)
out_summary <- summary(out)
out_summary$coefficients[, "Estimate"] <-
  round(out_summary$coefficients[, "Estimate"], 4)
out_summary$coefficients[, "Std. Error"] <-
  round(out_summary$coefficients[, "Std. Error"], 4)

printCoefmat(out_summary$coefficients)
#>             Estimate Std. Error t value Pr(>|t|)
#> (Intercept)   0.0000     0.0020    0.00        1
#> x1            0.5021     0.0020  254.70   <2e-16 ***
#> x2            0.6002     0.0020  301.23   <2e-16 ***

#> ---
#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
```

I have to round the two columns first before calling
printCoefmat(). Not nice but works for now.

Regards,
Shu Fai Cheung

? 2023?7?8??? 00:41?Martin Maechler <maechler at stat.math.ethz.ch> ???

> >>>>> Martin Maechler
> >>>>>     on Fri, 7 Jul 2023 18:12:24 +0200 writes:
>
> >>>>> Shu Fai Cheung
> >>>>>     on Thu, 6 Jul 2023 17:14:27 +0800 writes:
>
>     >> Hi All,
>
>     >> I would like to ask two questions about printCoefmat().
>
>     > Good... this function, originally named print.coefmat(),
>     > is 25 years old (in R) now:
>
>     > --------------------------------------------------------------------
>     > r1902 | maechler | 1998-08-14 19:19:05 +0200 (Fri, 14 Aug 1998) |
>     > Changed paths:
>     > M R-0-62-patches/CHANGES
>     > M R-0-62-patches/src/library/base/R/anova.R
>     > M R-0-62-patches/src/library/base/R/glm.R
>     > M R-0-62-patches/src/library/base/R/lm.R
>     > M R-0-62-patches/src/library/base/R/print.R
>
>     > print.coefmat(.) about ok
>     > --------------------------------------------------------------------
>
>     > (yes, at the time, the 'stats' package did not exist yet ..)
>
>     > so it may be a good time to look at it.
>
>
>     >> First, I found a behavior of printCoefmat() that looks strange to
> me,
>     >> but I am not sure whether this is an intended behavior:
>
>     >> ``` r
>     >> set.seed(5689417)
>     >> n <- 10000
>     >> x1 <- rnorm(n)
>     >> x2 <- rnorm(n)
>     >> y <- .5 * x1 + .6 * x2 + rnorm(n, -0.0002366, .2)
>     >> dat <- data.frame(x1, x2, y)
>     >> out <- lm(y ~ x1 + x2, dat)
>     >> out_summary <- summary(out)
>     >> printCoefmat(out_summary$coefficients)
>     >> #>               Estimate Std. Error t value Pr(>|t|)
>     >> #> (Intercept) 1.7228e-08 1.9908e-03    0.00        1
>     >> #> x1          5.0212e-01 1.9715e-03  254.70   <2e-16 ***
>     >> #> x2          6.0016e-01 1.9924e-03  301.23   <2e-16 ***
>     >> #> ---
>     >> #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
>
>     >> printCoefmat(out_summary$coefficients,
>     >> zap.ind = 1,
>     >> digits = 4)
>     >> #>             Estimate Std. Error t value Pr(>|t|)
>     >> #> (Intercept) 0.000000   0.001991     0.0        1
>     >> #> x1          0.502100   0.001971   254.7   <2e-16 ***
>     >> #> x2          0.600200   0.001992   301.2   <2e-16 ***
>     >> #> ---
>     >> #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
>     >> ```
>
>     >> With zap.ind = 1, the values in "Estimate" were correctly
>     >> zapped using digits = 4. However, by default, "Estimate"
>     >> and "Std. Error" are formatted together. Because the
>     >> standard errors are small, with digits = 4, zero's were added
>     >> to values in "Estimate", resulting in "0.502100" and
>     >> "0.600200", which are misleading because, if rounded to
>     >> the 6th decimal place, the values to be displayed should
>     >> be "0.502122" and "0.600162".
>
>     >> Is this behavior of printCoefmat() intended/normal?
>
>     > Yes, this is "normal" in the sense that zapsmall() is used.
>     > I'm not even sure anymore if I was always aware 1998 what exactly the
>     > simple zapsmall() function is doing.
>     > It does not do what you want here (and actually *typically* want
>     > for formatting numbers for display, plotting, etc):
>     > You "really want" here and in such situations
>
>     > zapOnlysmall <- function(x, dig) {
>     >    x[abs(x) <= 10^-dig] <- 0
>     >    x
>     > }
>
>     > and I think I'd replace the use of zapsmall() inside
>     > printCoefmat() with something like zapOnlysmall() above.
>
>     > This will indeed nicely solve your problem.
>
> well..., now that I tried to change it "globally" in
> printCoefmat() and I see how many of the lm() summary or anova()
> outputs .. outputs that get slightly changed, and sometimes
> quite unfavourably,
>
> I think that the "hard" replacement of zapsmall() by
> zapOnlysmall() {above}  is too drastic, ... even though it helps
> in your case.
>
> ... back to the "drawing board" ...
>
> Martin
>
>
>     >> Second, how can I use zap without this behavior?
>     >> In cases like the one above, I need to use zap such that
>     >> the intercept will not be displayed in scientific notation.
>     >> Disabling scientific notation cannot achieve the desired
>     >> goal.
>
>
>     >> I tried adding cs.ind = 1:
>
>     > well, from the help page   ?printCoefmat
>
>     > cs.ind is really about the [ind]ices of [c]oefficient + [s]cale or
> [s]td.err
>     > So, for lm() you should not have to set cs.ind but rather keep
>     > it at it's smart default of cs.ind = 1:2 .
>
>
>     >> ```r
>     >> printCoefmat(out_summary$coefficients,
>     >> zap.ind = 1,
>     >> digits = 4,
>     >> cs.ind = 1)
>     >> #>             Estimate Std. Error t value Pr(>|t|)
>     >> #> (Intercept)   0.0000   0.001991     0.0        1
>     >> #> x1            0.5021   0.001971   254.7   <2e-16 ***
>     >> #> x2            0.6002   0.001992   301.2   <2e-16 ***
>     >> #> ---
>     >> #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
>     >> ```
>
>     >> However, this solution is not ideal because the numbers
>     >> of decimal places of "Estimate" and "Std. Error" are
>     >> different. How can I get the output like this one?
>
>
>     >> ```r
>     >> #>             Estimate Std. Error t value Pr(>|t|)
>     >> #> (Intercept)   0.0000   0.0020     0.0        1
>     >> #> x1            0.5021   0.0020   254.7   <2e-16 ***
>     >> #> x2            0.6002   0.0020   301.2   <2e-16 ***
>     >> ```
>
>     >> Thanks for your attention.
>
>     >> Regards,
>     >> Shu Fai Cheung
>
>     > Thank you, Shu Fai,
>     > for your careful and thoughtful report!
>
>     > Best regards,
>     > Martin
>
>     > ______________________________________________
>     > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     > https://stat.ethz.ch/mailman/listinfo/r-help
>     > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
>     > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @ndrewzh@ng20052005 @end|ng |rom gm@||@com  Sun Jul  9 08:29:54 2023
From: @ndrewzh@ng20052005 @end|ng |rom gm@||@com (Andrew Zhang)
Date: Sat, 8 Jul 2023 23:29:54 -0700
Subject: [R] caret package
Message-ID: <CAC7O5WLugCk9U3ur03F003AB65yPsY=t0ZYFW9f8KyPbiuBbJA@mail.gmail.com>

Dear all,

I am using caret package to analyze a microarray dataset with feature
selection using sbf(). My dataset is 3500 samples with 2200 genes, the
outcome Y variable is a factor of 12 levels. I used the following script to
run the feature selection:

library(caret)
ctrl <- sbfControl(functions=rfSBF, method='repeatedcv', repeats=5)

    ### x is a matrix of 3500x2200, y is a factor of 12 levels
obj <- sbf(x, y, sbfControl=ctrl)

But it has been more than 15 hours, the code is still running!

My computer has the following specifications:

Intel(R) Core(TM) i7-8550U CPU @ 1.80GHz   2.00 GHz, 8 cores
16.0 GB

Does anyone know if my script has any issues, or it is normal for sbf() to
run this long?

Thank you!

Andrew

> sessionInfo()
R version 4.3.1 (2023-06-16 ucrt)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 19045)

Matrix products: default


locale:
[1] LC_COLLATE=English_United States.utf8
[2] LC_CTYPE=English_United States.utf8
[3] LC_MONETARY=English_United States.utf8
[4] LC_NUMERIC=C
[5] LC_TIME=English_United States.utf8

time zone: America/Los_Angeles
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] caret_6.0-94   lattice_0.21-8 ggplot2_3.4.2

loaded via a namespace (and not attached):
 [1] utf8_1.2.3           future_1.33.0        generics_0.1.3
 [4] class_7.3-22         stringi_1.7.12       pROC_1.18.2
 [7] listenv_0.9.0        digest_0.6.32        magrittr_2.0.3
[10] grid_4.3.1           timechange_0.2.0     iterators_1.0.14
[13] foreach_1.5.2        plyr_1.8.8           Matrix_1.5-4.1
[16] ModelMetrics_1.2.2.2 nnet_7.3-19          survival_3.5-5
[19] purrr_1.0.1          fansi_1.0.4          scales_1.2.1
[22] codetools_0.2-19     lava_1.7.2.1         cli_3.6.1
[25] rlang_1.1.1          hardhat_1.3.0        parallelly_1.36.0
[28] future.apply_1.11.0  munsell_0.5.0        splines_4.3.1
[31] withr_2.5.0          prodlim_2023.03.31   tools_4.3.1
[34] parallel_4.3.1       reshape2_1.4.4       dplyr_1.1.2
[37] colorspace_2.1-0     recipes_1.0.6        globals_0.16.2
[40] vctrs_0.6.3          R6_2.5.1             rpart_4.1.19
[43] stats4_4.3.1         lifecycle_1.0.3      lubridate_1.9.2
[46] stringr_1.5.0        MASS_7.3-60          pkgconfig_2.0.3
[49] pillar_1.9.0         gtable_0.3.3         glue_1.6.2
[52] data.table_1.14.8    Rcpp_1.0.10          tibble_3.2.1
[55] tidyselect_1.2.0     nlme_3.1-162         ipred_0.9-14
[58] timeDate_4022.108    gower_1.0.1          compiler_4.3.1

	[[alternative HTML version deleted]]


From @@ch@ndh|@| @end|ng |rom bt|nternet@com  Tue Jul 11 11:14:31 2023
From: @@ch@ndh|@| @end|ng |rom bt|nternet@com (a.chandhial@btinternet.com a.chandhial@btinternet.com)
Date: Tue, 11 Jul 2023 10:14:31 +0100 (BST)
Subject: [R] Base R Stats Package - quantile function
Message-ID: <48936a4b.634b.189443b1a36.Webtop.118@btinternet.com>




Hi,


In Base R Stats Package, the quantile function has 9 Type's:

?quantile

I'd be very grateful if simple numerical examples (ideally from members 
of the R core team), for each of the 9 methods, both for EVEN and ODD 
numbered length's of series, be provided.


thanks,
Amarjit


	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jul 11 22:05:20 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 11 Jul 2023 13:05:20 -0700
Subject: [R] Base R Stats Package - quantile function
In-Reply-To: <48936a4b.634b.189443b1a36.Webtop.118@btinternet.com>
References: <48936a4b.634b.189443b1a36.Webtop.118@btinternet.com>
Message-ID: <CAGxFJbS-JMvGS69f68pGacvj9DKe889Xfhhgv-7uzPcs+-s32Q@mail.gmail.com>

1. I highly doubt that anyone from the "R Core team" would respond to such
a request. That is emphatically **not** their job.

2. More to the point, this is *exactly* the sort of task that *you*, as a
student/practitioner of statistics and data analysis are expected to do for
yourself. Indeed, examples already are included in ?quantile, and
references are provided for you to follow up on on your own if you wish to
learn more.

3. Finally, your request is largely off topic here. Please read and follow
the posting guide linked below for learning about/posting on matters that
are on topic.

Cheers,
Bert

On Tue, Jul 11, 2023 at 12:19?PM a.chandhial at btinternet.com a.chandhial---
via R-help <r-help at r-project.org> wrote:

>
>
>
> Hi,
>
>
> In Base R Stats Package, the quantile function has 9 Type's:
>
> ?quantile
>
> I'd be very grateful if simple numerical examples (ideally from members
> of the R core team), for each of the 9 methods, both for EVEN and ODD
> numbered length's of series, be provided.
>
>
> thanks,
> Amarjit
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @nupty@g| @end|ng |rom gm@||@com  Wed Jul 12 05:27:44 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Wed, 12 Jul 2023 08:57:44 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <2cdced6c2c8b492ea94099f51d482970@SRVEXCHCM1302.precheza.cz>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CH3PR22MB4514251DCFE77C2E74C285A8CF25A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
 <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>
 <CAFL9eu=QJG8X9PDG0RNxP88TicefE_DAgnkK-nxWkD9oLt6Z0g@mail.gmail.com>
 <CADfFDC4hrX8huz2HnDMLM=WT+z5UttBfk8rQeOGwLj14CZN2Pw@mail.gmail.com>
 <ac95f337b83240d5836169c02548d0d4@SRVEXCHCM1302.precheza.cz>
 <CAFL9eunWEer8nXQ52jsrvicdvDokyZHfTWrOsstRyyW37hm+nQ@mail.gmail.com>
 <2cdced6c2c8b492ea94099f51d482970@SRVEXCHCM1302.precheza.cz>
Message-ID: <CAFL9eunmj9+NvNmzM20YDXwDFxKZM25A0axUNk2_n-1+miSsBg@mail.gmail.com>

Thanks.
I made a graph in Stata that is close to what I want in R. Stata graph is
attached. The main differences between Stata and R graphs that I was able
to make, with ggplot or lattice, is that I have been able to scale y-axis
of each sub-graph independently in Stata, but not in R. Also, x-axis labels
are also complete in Stata but not in R. Is there a way to do this in R via
base-R, ggplot or lattice? I had initially thought that these types of
panel graphs are common and should be easy to do, but that is not how this
is turning out to be. Any help is welcome.

On Fri, 7 Jul 2023 at 17:57, PIKAL Petr <petr.pikal at precheza.cz> wrote:

> Hallo Anupam
>
> With
>
> ggplot change axis label size into Google
>
> the first answer I got was
>
> axis.text theme
>
> r - Change size of axes title and labels in ggplot2 - Stack Overflow
> <https://stackoverflow.com/questions/14942681/change-size-of-axes-title-and-labels-in-ggplot2>
>
>
>
> so
>
>
>
> ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) + geom_point()
> +
>   geom_line() + facet_wrap(~Measure) +
> theme(axis.text=element_text(size=5))
>
>
>
> Should do the trick.
>
>
>
> S pozdravem | Best Regards
>
>
> *RNDr. Petr PIKAL*Vedouc? V?zkumu a v?voje | Research Manager
>
>
> *PRECHEZA a.s.*n?b?. Dr. Edvarda Bene?e 1170/24 | 750 02 P?erov | Czech
> Republic
> Tel: +420 581 252 256 | GSM: +420 724 008 364
> petr.pikal at precheza.cz | *www.precheza.cz <https://www.precheza.cz/>*
>
> *Osobn? ?daje: *Informace o zpracov?n? a ochran? osobn?ch ?daj?
> obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: *https://www.precheza.cz/zasady-ochrany-osobnich-udaju/
> <https://www.precheza.cz/zasady-ochrany-osobnich-udaju/>* | Information
> about processing and protection of business partner?s personal data are
> available on website: *https://www.precheza.cz/en/personal-data-protection-principles/
> <https://www.precheza.cz/en/personal-data-protection-principles/>*
>
> *D?v?rnost: *Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
> d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
> odpov?dnosti: *https://www.precheza.cz/01-dovetek/
> <https://www.precheza.cz/01-dovetek/>* | This email and any documents
> attached to it may be confidential and are subject to the legally binding
> disclaimer: *https://www.precheza.cz/en/01-disclaimer/
> <https://www.precheza.cz/en/01-disclaimer/>*
>
>
>
> *From:* Anupam Tyagi <anuptyagi at gmail.com>
> *Sent:* Friday, July 7, 2023 12:48 PM
> *To:* PIKAL Petr <petr.pikal at precheza.cz>
> *Cc:* r-help at r-project.org
> *Subject:* Re: [R] Plotting factors in graph panel
>
>
>
> Thanks! You are correct, the graphs look very similar, except ggplot is
> scaling the text font to make it more readable. Is there a way to scale
> down the x-axis labels, so they are readable?
>
>
>
> On Fri, 7 Jul 2023 at 12:02, PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> Hallo Anupam
>
> I do not see much difference in ggplot or lattice, they seems to me
> provide almost identical results when removing theme part from ggplot.
>
> library(ggplot2)
> library(lattice)
>
> ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) + geom_point()
> +
>   geom_line() + facet_wrap(~Measure)
>
> xyplot(Percent ~ Income | Measure, TrialData4,
>        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
>
> So it is probably only matter of your preference which one do you choose.
>
> Cheers
> Petr
>
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Deepayan Sarkar
> > Sent: Thursday, July 6, 2023 3:06 PM
> > To: Anupam Tyagi <anuptyagi at gmail.com>
> > Cc: r-help at r-project.org
> > Subject: Re: [R] Plotting factors in graph panel
> >
> > On Thu, 6 Jul 2023 at 15:21, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> > >
> > > Btw, I think "lattice" graphics will provide a better solution than
> > > "ggplot", because it puts appropriate (space saving) markers on the
> > > axes and does axes labels well. However, I cannot figure out how to do
> > > it in "lattice".
> >
> > You will need to convert Income to a factor first. Alternatively, use
> > dotplot() instead of xyplot(), but that will sort the levels wrongly, so
> better to
> > make the factor first anyway.
> >
> > TrialData4 <- within(TrialData4,
> > {
> >     Income <- factor(Income, levels = c("$10", "$25", "$40", "$75", ">
> $75"))
> > })
> >
> > xyplot(Percent ~ Income | Measure, TrialData4,
> >        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
> >
> > or
> >
> > dotplot(Percent ~ Income | Measure, TrialData4,
> >         type = "o", as.table = TRUE)
> >
> > This is not really any different from the ggplot() version though.
> > Maybe you just don't like the effect of the '+ theme_classic()' part.
> >
> > Best,
> > -Deepayan
> >
> >
> > > On Thu, 6 Jul 2023 at 15:11, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> > >
> > > > Hi John:
> > > >
> > > > Thanks! Below is the data using your suggestion. I used "ggplot" to
> > > > make a graph. I am not too happy with it. I am looking for something
> > > > simpler and cleaner. Plot is attached.
> > > >
> > > > I also tried "lattice" package, but nothing got plotted with "xyplot"
> > > > command, because it is looking for a numeric variable on x-axis.
> > > >
> > > > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
> > > > geom_point()
> > > > +
> > > >   geom_line() + facet_wrap(~Measure) + theme_classic()
> > > >
> > > > > dput(TrialData4)structure(list(Income = c("$10", "$25", "$40",
> > > > > "$75", "> $75",
> > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75"
> > > > ), Percent = c(3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79,
> > > > 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27,
> > > > 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4,
> > > > 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244,
> > > > 1.706, 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31,
> > > > 35.65, 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1,
> > > > 62.17, 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
> > > > 7.103, 3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51, 28.9,
> > > > 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94, 33.74,
> > > > 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4, 25, 24.61,
> > > > 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244, 1.706,
> > > > 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65,
> > > > 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17,
> > > > 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103),
> > > > Measure = c("MF None", "MF None", "MF None", "MF None", "MF None",
> > > > "MF Equity", "MF Equity", "MF Equity", "MF Equity", "MF Equity", "MF
> > > > Debt", "MF Debt", "MF Debt", "MF Debt", "MF Debt", "MF Hybrid", "MF
> > > > Hybrid", "MF Hybrid", "MF Hybrid", "MF Hybrid", "Bank None", "Bank
> > > > None", "Bank None", "Bank None", "Bank None", "Bank Current", "Bank
> > > > Current", "Bank Current", "Bank Current", "Bank Current", "Bank
> > > > Savings", "Bank Savings", "Bank Savings", "Bank Savings", "Bank
> > > > Savings", "MF None 1", "MF None 1", "MF None 1", "MF None 1", "MF
> > > > None 1", "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Equity 1",
> > > > "MF Equity 1", "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Debt 1",
> > > > "MF Debt 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid
> > > > 1", "MF Hybrid 1", "Bank None 1", "Bank None 1", "Bank None 1",
> > > > "Bank None 1", "Bank None 1", "Bank Current 1", "Bank Current 1",
> > > > "Bank Current 1", "Bank Current 1", "Bank Current 1", "Bank Savings
> > > > 1", "Bank Savings 1", "Bank Savings 1", "Bank Savings 1", "Bank
> > > > Savings 1", "MF None 2", "MF None 2", "MF None 2", "MF None 2", "MF
> > > > None 2", "MF Equity 2", "MF Equity 2", "MF Equity 2", "MF Equity 2",
> > > > "MF Equity 2", "MF Debt 2", "MF Debt 2", "MF Debt 2", "MF Debt 2",
> > > > "MF Debt 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid
> > > > 2", "MF Hybrid 2", "Bank None 2", "Bank None 2", "Bank None 2",
> > > > "Bank None 2", "Bank None 2", "Bank Current 2", "Bank Current 2",
> > > > "Bank Current 2", "Bank Current 2", "Bank Current 2", "Bank Savings
> > > > 2", "Bank Savings 2", "Bank Savings 2", "Bank Savings 2", "Bank
> > > > Savings 2", "MF None 3", "MF None 3", "MF None 3", "MF None 3", "MF
> > > > None 3", "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Equity 3",
> > > > "MF Equity 3", "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Debt 3",
> > > > "MF Debt 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid
> > > > 3", "MF Hybrid 3", "Bank None 3", "Bank None 3", "Bank None 3",
> > > > "Bank None 3", "Bank None 3", "Bank Current 3", "Bank Current 3",
> > > > "Bank Current 3", "Bank Current 3", "Bank Current 3", "Bank Savings
> > > > 3", "Bank Savings 3", "Bank Savings 3", "Bank Savings 3", "Bank
> > > > Savings 3")), class = c("tbl_df", "tbl", "data.frame"), row.names =
> > > > c(NA,
> > > > -140L))
> > > >
> > > >
> > > >
> > > >
> > > > On Thu, 29 Jun 2023 at 21:11, John Kane <jrkrideau at gmail.com> wrote:
> > > >
> > > >> Anupa,
> > > >>
> > > >> I think your  best bet with your data would be to tidy it up in
> > > >> Excel, read it into  R using something like the readxl package and
> > > >> then supply some sample data is the dput() function.
> > > >>
> > > >> In the case of a large dataset something like dput(head(mydata,
> > > >> 100)) should supply the data we need. Just do dput(mydata) where
> > > >> *mydata* is your data. Copy the output and paste it here.
> > > >>
> > > >> On Thu, 29 Jun 2023 at 08:37, Ebert,Timothy Aaron <tebert at ufl.edu>
> > wrote:
> > > >>
> > > >>> Reposting the data did not help. We do not like to guess, and
> > > >>> doing so takes a great deal of time that is likely wasted.
> > > >>> Rows are observations.
> > > >>> Columns are variables.
> > > >>> In Excel, the first row will be variable names and all subsequent
> > > >>> rows will be observations.
> > > >>>
> > > >>> Income is the first variable. It has seven states: $10, $25, $40,
> > > >>> $75,
> > > >>> >$75, "No", "Answer"
> > > >>> MF is the second variable. It has six values: 1, 2, 3, 4, 5, 9
> > > >>> None is the third variable. It has seven values: 1, 3.05,  2.29,
> > > >>> 2.24, 1.71, 1.30, 2.83 Equity is the last variable with many
> > > >>> states, both numeric and text. A computer will read it all as
> > > >>> text.
> > > >>>
> > > >>> As written the data cannot be analyzed.
> > > >>>
> > > >>> Equity looks like it should be numeric. However, it has text
> values:
> > > >>> "Debt", "Hybrid", Bank", "AC", "None", "Current", "Savings", "No",
> > > >>> and "Answer"
> > > >>>
> > > >>> In looking at the data I try to find some organization where every
> > > >>> variable has the same number of rows as every other variable. I
> > > >>> fail with these data.
> > > >>> I could combine "No" and "Answer" into one name "No Answer" to
> > > >>> make it agree with MF, but then it does not work for None.
> > > >>>
> > > >>>
> > > >>> Please rework the data in Excel so that we can properly interpret
> > > >>> the content. If it is badly organized in Excel, moving it to R
> will not help.
> > > >>> Below, I tried adding carriage returns and spaces to organize the
> > > >>> data, but I have a column of numbers that are not identified. The
> > > >>> values below
> > > >>> $10 do not make much sense compared to other values.
> > > >>>
> > > >>> I am tired of guessing.
> > > >>>
> > > >>> Tim
> > > >>>
> > > >>> -----Original Message-----
> > > >>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam
> > > >>> Tyagi
> > > >>> Sent: Wednesday, June 28, 2023 11:49 PM
> > > >>> To: r-help at r-project.org
> > > >>> Subject: Re: [R] Plotting factors in graph panel
> > > >>>
> > > >>> [External Email]
> > > >>>
> > > >>> Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope
> > > >>> you have been well.
> > > >>>
> > > >>> Pikal, thanks. Your solution may be close to what I want. I did
> > > >>> not know that I was posting in HTML. I just copied the data from
> > > >>> Excel and posted in the email in Gmail. The data is still in
> > > >>> Excel, because I have not yet figured out what is a good way to
> > > >>> organize it in R. I am posting it again below as text. These are
> > > >>> rows in Excel: 1,2,3,5,9 after MF are income categories and No
> > > >>> Answer category (9). Down the second column are categories of MF
> > and Bank AC. Rest of the columns are percentages.
> > > >>>
> > > >>> Jim, thanks for the graph. I am looking to plot only one line
> > > >>> (category) each in many small plots on the same page. I don't want
> > > >>> to compare different categories on the same graph as you do, but
> > > >>> see how each category varies by income, one category in each
> > > >>> graph. Like Excel does with Sparklines (Top menu: Insert,
> > > >>> Sparklines, Lines). I have many categories for many variables. I
> am only
> > showing two MF and Bank AC.
> > > >>>
> > > >>> Income        $10 $25     $40      $75   > $75    No Answer
> > > >>> MF                   1      2         3           4         5
>     9
> > > >>> None               1   3.05     2.29    2.24     1.71    1.30
> > > >>>    2.83
> > > >>> Equity             2    29.76  28.79  29.51 28.90   31.67
> > > >>> 36.77
> > > >>>
> > > >>> Debt                3  31.18  32.64  34.31  35.65  37.59
> > > >>>  33.15
> > > >>>
> > > >>> Hybrid              4 36.00 36.27 33.94 33.74 29.44 27.25
> > > >>>
> > > >>> Bank AC None 1 46.54 54.01 59.1 62.17 67.67 60.87
> > > >>>
> > > >>> Current            2 24.75 24.4 25 24.61 24.02 21.09
> > > >>>
> > > >>> Savings             3 25.4 18.7 29 11.48 7.103 13.46
> > > >>>
> > > >>> No Answer       9 3.307 2.891 13.4 1.746 1.208 4.577
> > > >>>
> > > >>>
> > > >>> On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com>
> > wrote:
> > > >>>
> > > >>> > Hi Anupam,
> > > >>> > Haven't heard from you in a long time. Perhaps you want
> > > >>> > something like
> > > >>> > this:
> > > >>> >
> > > >>> > at_df<-read.table(text=
> > > >>> >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None
> > > >>> > Bank_Current Bank_Savings Bank_NA
> > > >>> >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> > > >>> >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> > > >>> >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> > > >>> >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> > > >>> >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
> > > >>> > No_Answer 9
> > > >>> > 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> > > >>> >  header=TRUE,stringsAsFactors=FALSE)
> > > >>> > at_df<-
> > at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank
> > > >>> > _NA")]
> > > >>> > png("MF_Bank.png",height=600)
> > > >>> > par(mfrow=c(2,1))
> > > >>> > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
> > > >>> >  type="l",col=1:4,lty=1:4,lwd=3,  main="Percentages by Income
> > > >>> > and MF type", xlab="Income",ylab="Percentage of group",xaxt="n")
> > > >>> > axis(1,at=1:5,labels=at_df$Income)
> > > >>> > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
> > > >>> >  lty=1:4,lwd=3,col=1:4)
> > > >>> > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
> > > >>> >  type="l",col=1:3,lty=1:4,lwd=3,  main="Percentages by Income
> > > >>> > and Bank type", xlab="Income",ylab="Percentage of
> > > >>> > group",xaxt="n")
> > > >>> > axis(1,at=1:5,labels=at_df$Income)
> > > >>> > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
> > > >>> >  lty=1:4,lwd=3,col=1:3)
> > > >>> > dev.off()
> > > >>> >
> > > >>> > Jim
> > > >>> >
> > > >>> > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi
> > > >>> > <anuptyagi at gmail.com>
> > > >>> wrote:
> > > >>> > >
> > > >>> > > Hello,
> > > >>> > >
> > > >>> > > I want to plot the following kind of data (percentage of
> > > >>> > > respondents
> > > >>> > from a
> > > >>> > > survey) that varies by Income into many small *line* graphs in
> > > >>> > > a panel of graphs. I want to omit "No Answer" categories. I
> > > >>> > > want to see how each one of the categories (percentages),
> > > >>> > > "None", " Equity", etc. varies by
> > > >>> > Income.
> > > >>> > > How can I do this? How to organize the data well and how to
> > > >>> > > plot? I
> > > >>> > thought
> > > >>> > > Lattice may be a good package to plot this, but I don't know
> > > >>> > > for sure. I prefer to do this in Base-R if possible, but I am
> > > >>> > > open to ggplot. Any
> > > >>> > ideas
> > > >>> > > will be helpful.
> > > >>> > >
> > > >>> > > Income
> > > >>> > > $10 $25 $40 $75 > $75 No Answer MF 1 2 3 4 5 9 None 1 3.05
> > > >>> > > 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51
> > > >>> > > 28.90 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
> > > >>> > > Hybrid
> > > >>> > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54
> > > >>> > > 54.01
> > > >>> > > 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02
> > > >>> > > 21.09 Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9
> > > >>> > > 3.307 2.891
> > > >>> > > 13.4 1.746 1.208 4.577
> > > >>> > >
> > > >>> > > Thanks.
> > > >>> > > --
> > > >>> > > Anupam.
> > > >>> > >
> > > >>> > >         [[alternative HTML version deleted]]
> > > >>> > >
> > > >>> > > ______________________________________________
> > > >>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> > > >>> > > see https://st/
> > > >>> > > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-
> > help&data=05%7C01%7Ctebert
> > > >>> > > %40ufl
> > > >>> > >
> > .edu%7C59874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace6
> > > >>> > > 0a6233
> > > >>> > >
> > 1e1b84%7C0%7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d
> > 8ey
> > > >>> > > JWIjoi
> > > >>> > >
> > MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3
> > > >>> > > 000%7C
> > > >>> > >
> > %7C%7C&sdata=xoaDMG7ogY4tMtqe30pONZrBdk0eq2cW%2BgdwlDHneWY
> > %3D&
> > > >>> > > reserv
> > > >>> > > ed=0
> > > >>> > > PLEASE do read the posting guide
> > > >>> > http://www.r/
> > > >>> > -project.org%2Fposting-
> > guide.html&data=05%7C01%7Ctebert%40ufl.ed
> > > >>> > u%7C59
> > > >>> >
> > 874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a62331e1b8
> > > >>> > 4%7C0%
> > > >>> >
> > 7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4
> > wLjA
> > > >>> > wMDAiL
> > > >>> >
> > CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sd
> > > >>> > ata=H7
> > > >>> >
> > 6XCa%2FULBGUn0Lok93l6mtHzo0snq5G0a%2BL4sEH8%2F8%3D&reserved=0
> > > >>> > > and provide commented, minimal, self-contained, reproducible
> > code.
> > > >>> >
> > > >>>
> > > >>>
> > > >>> --
> > > >>> Anupam.
> > > >>>
> > > >>>         [[alternative HTML version deleted]]
> > > >>>
> > > >>> ______________________________________________
> > > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > > >>> PLEASE do read the posting guide
> > > >>> http://www.r-project.org/posting-guide.html
> > > >>> and provide commented, minimal, self-contained, reproducible code.
> > > >>> ______________________________________________
> > > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > > >>> PLEASE do read the posting guide
> > > >>> http://www.R-project.org/posting-guide.html
> > > >>> and provide commented, minimal, self-contained, reproducible code.
> > > >>>
> > > >>
> > > >>
> > > >> --
> > > >> John Kane
> > > >> Kingston ON Canada
> > > >>
> > > >
> > > >
> > > > --
> > > > Anupam.
> > > >
> > > >
> > >
> > > --
> > > Anupam.
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-
> > guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>
>
>
> --
>
> Anupam.
>


-- 
Anupam.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: TrialData4Stata.png
Type: image/png
Size: 40141 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20230712/53b47ab1/attachment.png>

From @nupty@g| @end|ng |rom gm@||@com  Wed Jul 12 05:45:46 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Wed, 12 Jul 2023 09:15:46 +0530
Subject: [R] Alternative to rggobi
Message-ID: <CAFL9eum+nvSDHM2G-=5MQ89pG2ywUCs4eu86ixc_K_jOUoRnNA@mail.gmail.com>

Hello,

since rggobi is not available, is there an alternative to rggobi?

-- 
Anupam.

	[[alternative HTML version deleted]]


From @nupty@g| @end|ng |rom gm@||@com  Wed Jul 12 05:48:55 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Wed, 12 Jul 2023 09:18:55 +0530
Subject: [R] Variable and value labels
Message-ID: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>

Hello,

is there an easy way to do variable and value labels (for factor variables)
in base-R, without using a package. If not, what is an easy and good way to
do labels, using an add-on package.

-- 
Anupam.

	[[alternative HTML version deleted]]


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Wed Jul 12 05:50:54 2023
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Wed, 12 Jul 2023 09:20:54 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CAFL9eunmj9+NvNmzM20YDXwDFxKZM25A0axUNk2_n-1+miSsBg@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CH3PR22MB4514251DCFE77C2E74C285A8CF25A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
 <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>
 <CAFL9eu=QJG8X9PDG0RNxP88TicefE_DAgnkK-nxWkD9oLt6Z0g@mail.gmail.com>
 <CADfFDC4hrX8huz2HnDMLM=WT+z5UttBfk8rQeOGwLj14CZN2Pw@mail.gmail.com>
 <ac95f337b83240d5836169c02548d0d4@SRVEXCHCM1302.precheza.cz>
 <CAFL9eunWEer8nXQ52jsrvicdvDokyZHfTWrOsstRyyW37hm+nQ@mail.gmail.com>
 <2cdced6c2c8b492ea94099f51d482970@SRVEXCHCM1302.precheza.cz>
 <CAFL9eunmj9+NvNmzM20YDXwDFxKZM25A0axUNk2_n-1+miSsBg@mail.gmail.com>
Message-ID: <CADfFDC4UqC943PtmVsuEo4igKWuL8pveJsy5YQ0qa-0HDSBBdQ@mail.gmail.com>

On Wed, 12 Jul 2023 at 08:57, Anupam Tyagi <anuptyagi at gmail.com> wrote:

> Thanks.
> I made a graph in Stata that is close to what I want in R. Stata graph is
> attached. The main differences between Stata and R graphs that I was able
> to make, with ggplot or lattice, is that I have been able to scale y-axis
> of each sub-graph independently in Stata, but not in R. Also, x-axis labels
> are also complete in Stata but not in R. Is there a way to do this in R via
> base-R, ggplot or lattice?


Yes, of course. For lattice, add the argument

scales = list(y = "free")

For ggplot2, change

facet_wrap(~Measure)

to

facet_wrap(~Measure, scale = "free")

-Deepayan

I had initially thought that these types of
> panel graphs are common and should be easy to do, but that is not how this
> is turning out to be. Any help is welcome.
>

> On Fri, 7 Jul 2023 at 17:57, PIKAL Petr <petr.pikal at precheza.cz> wrote:
>
> > Hallo Anupam
> >
> > With
> >
> > ggplot change axis label size into Google
> >
> > the first answer I got was
> >
> > axis.text theme
> >
> > r - Change size of axes title and labels in ggplot2 - Stack Overflow
> > <
> https://stackoverflow.com/questions/14942681/change-size-of-axes-title-and-labels-in-ggplot2
> >
> >
> >
> >
> > so
> >
> >
> >
> > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
> geom_point()
> > +
> >   geom_line() + facet_wrap(~Measure) +
> > theme(axis.text=element_text(size=5))
> >
> >
> >
> > Should do the trick.
> >
> >
> >
> > S pozdravem | Best Regards
> >
> >
> > *RNDr. Petr PIKAL*Vedouc? V?zkumu a v?voje | Research Manager
> >
> >
> > *PRECHEZA a.s.*n?b?. Dr. Edvarda Bene?e 1170/24 | 750 02 P?erov | Czech
> > Republic
> > Tel: +420 581 252 256 | GSM: +420 724 008 364
> > petr.pikal at precheza.cz | *www.precheza.cz <https://www.precheza.cz/>*
> >
> > *Osobn? ?daje: *Informace o zpracov?n? a ochran? osobn?ch ?daj?
> > obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: *
> https://www.precheza.cz/zasady-ochrany-osobnich-udaju/
> > <https://www.precheza.cz/zasady-ochrany-osobnich-udaju/>* | Information
> > about processing and protection of business partner?s personal data are
> > available on website: *
> https://www.precheza.cz/en/personal-data-protection-principles/
> > <https://www.precheza.cz/en/personal-data-protection-principles/>*
> >
> > *D?v?rnost: *Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
> > d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
> > odpov?dnosti: *https://www.precheza.cz/01-dovetek/
> > <https://www.precheza.cz/01-dovetek/>* | This email and any documents
> > attached to it may be confidential and are subject to the legally binding
> > disclaimer: *https://www.precheza.cz/en/01-disclaimer/
> > <https://www.precheza.cz/en/01-disclaimer/>*
> >
> >
> >
> > *From:* Anupam Tyagi <anuptyagi at gmail.com>
> > *Sent:* Friday, July 7, 2023 12:48 PM
> > *To:* PIKAL Petr <petr.pikal at precheza.cz>
> > *Cc:* r-help at r-project.org
> > *Subject:* Re: [R] Plotting factors in graph panel
> >
> >
> >
> > Thanks! You are correct, the graphs look very similar, except ggplot is
> > scaling the text font to make it more readable. Is there a way to scale
> > down the x-axis labels, so they are readable?
> >
> >
> >
> > On Fri, 7 Jul 2023 at 12:02, PIKAL Petr <petr.pikal at precheza.cz> wrote:
> >
> > Hallo Anupam
> >
> > I do not see much difference in ggplot or lattice, they seems to me
> > provide almost identical results when removing theme part from ggplot.
> >
> > library(ggplot2)
> > library(lattice)
> >
> > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
> geom_point()
> > +
> >   geom_line() + facet_wrap(~Measure)
> >
> > xyplot(Percent ~ Income | Measure, TrialData4,
> >        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
> >
> > So it is probably only matter of your preference which one do you choose.
> >
> > Cheers
> > Petr
> >
> >
> > > -----Original Message-----
> > > From: R-help <r-help-bounces at r-project.org> On Behalf Of Deepayan
> Sarkar
> > > Sent: Thursday, July 6, 2023 3:06 PM
> > > To: Anupam Tyagi <anuptyagi at gmail.com>
> > > Cc: r-help at r-project.org
> > > Subject: Re: [R] Plotting factors in graph panel
> > >
> > > On Thu, 6 Jul 2023 at 15:21, Anupam Tyagi <anuptyagi at gmail.com> wrote:
> > > >
> > > > Btw, I think "lattice" graphics will provide a better solution than
> > > > "ggplot", because it puts appropriate (space saving) markers on the
> > > > axes and does axes labels well. However, I cannot figure out how to
> do
> > > > it in "lattice".
> > >
> > > You will need to convert Income to a factor first. Alternatively, use
> > > dotplot() instead of xyplot(), but that will sort the levels wrongly,
> so
> > better to
> > > make the factor first anyway.
> > >
> > > TrialData4 <- within(TrialData4,
> > > {
> > >     Income <- factor(Income, levels = c("$10", "$25", "$40", "$75", ">
> > $75"))
> > > })
> > >
> > > xyplot(Percent ~ Income | Measure, TrialData4,
> > >        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
> > >
> > > or
> > >
> > > dotplot(Percent ~ Income | Measure, TrialData4,
> > >         type = "o", as.table = TRUE)
> > >
> > > This is not really any different from the ggplot() version though.
> > > Maybe you just don't like the effect of the '+ theme_classic()' part.
> > >
> > > Best,
> > > -Deepayan
> > >
> > >
> > > > On Thu, 6 Jul 2023 at 15:11, Anupam Tyagi <anuptyagi at gmail.com>
> wrote:
> > > >
> > > > > Hi John:
> > > > >
> > > > > Thanks! Below is the data using your suggestion. I used "ggplot" to
> > > > > make a graph. I am not too happy with it. I am looking for
> something
> > > > > simpler and cleaner. Plot is attached.
> > > > >
> > > > > I also tried "lattice" package, but nothing got plotted with
> "xyplot"
> > > > > command, because it is looking for a numeric variable on x-axis.
> > > > >
> > > > > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
> > > > > geom_point()
> > > > > +
> > > > >   geom_line() + facet_wrap(~Measure) + theme_classic()
> > > > >
> > > > > > dput(TrialData4)structure(list(Income = c("$10", "$25", "$40",
> > > > > > "$75", "> $75",
> > > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
> > > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", ">
> > > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
> > > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
> > > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
> > > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75"
> > > > > ), Percent = c(3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79,
> > > > > 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27,
> > > > > 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4,
> > > > > 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292,
> 2.244,
> > > > > 1.706, 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64,
> 34.31,
> > > > > 35.65, 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1,
> > > > > 62.17, 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
> > > > > 7.103, 3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51,
> 28.9,
> > > > > 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94, 33.74,
> > > > > 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4, 25, 24.61,
> > > > > 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244, 1.706,
> > > > > 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31,
> 35.65,
> > > > > 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17,
> > > > > 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
> 7.103),
> > > > > Measure = c("MF None", "MF None", "MF None", "MF None", "MF None",
> > > > > "MF Equity", "MF Equity", "MF Equity", "MF Equity", "MF Equity",
> "MF
> > > > > Debt", "MF Debt", "MF Debt", "MF Debt", "MF Debt", "MF Hybrid", "MF
> > > > > Hybrid", "MF Hybrid", "MF Hybrid", "MF Hybrid", "Bank None", "Bank
> > > > > None", "Bank None", "Bank None", "Bank None", "Bank Current", "Bank
> > > > > Current", "Bank Current", "Bank Current", "Bank Current", "Bank
> > > > > Savings", "Bank Savings", "Bank Savings", "Bank Savings", "Bank
> > > > > Savings", "MF None 1", "MF None 1", "MF None 1", "MF None 1", "MF
> > > > > None 1", "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Equity
> 1",
> > > > > "MF Equity 1", "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Debt 1",
> > > > > "MF Debt 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "MF
> Hybrid
> > > > > 1", "MF Hybrid 1", "Bank None 1", "Bank None 1", "Bank None 1",
> > > > > "Bank None 1", "Bank None 1", "Bank Current 1", "Bank Current 1",
> > > > > "Bank Current 1", "Bank Current 1", "Bank Current 1", "Bank Savings
> > > > > 1", "Bank Savings 1", "Bank Savings 1", "Bank Savings 1", "Bank
> > > > > Savings 1", "MF None 2", "MF None 2", "MF None 2", "MF None 2", "MF
> > > > > None 2", "MF Equity 2", "MF Equity 2", "MF Equity 2", "MF Equity
> 2",
> > > > > "MF Equity 2", "MF Debt 2", "MF Debt 2", "MF Debt 2", "MF Debt 2",
> > > > > "MF Debt 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2", "MF
> Hybrid
> > > > > 2", "MF Hybrid 2", "Bank None 2", "Bank None 2", "Bank None 2",
> > > > > "Bank None 2", "Bank None 2", "Bank Current 2", "Bank Current 2",
> > > > > "Bank Current 2", "Bank Current 2", "Bank Current 2", "Bank Savings
> > > > > 2", "Bank Savings 2", "Bank Savings 2", "Bank Savings 2", "Bank
> > > > > Savings 2", "MF None 3", "MF None 3", "MF None 3", "MF None 3", "MF
> > > > > None 3", "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Equity
> 3",
> > > > > "MF Equity 3", "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Debt 3",
> > > > > "MF Debt 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "MF
> Hybrid
> > > > > 3", "MF Hybrid 3", "Bank None 3", "Bank None 3", "Bank None 3",
> > > > > "Bank None 3", "Bank None 3", "Bank Current 3", "Bank Current 3",
> > > > > "Bank Current 3", "Bank Current 3", "Bank Current 3", "Bank Savings
> > > > > 3", "Bank Savings 3", "Bank Savings 3", "Bank Savings 3", "Bank
> > > > > Savings 3")), class = c("tbl_df", "tbl", "data.frame"), row.names =
> > > > > c(NA,
> > > > > -140L))
> > > > >
> > > > >
> > > > >
> > > > >
> > > > > On Thu, 29 Jun 2023 at 21:11, John Kane <jrkrideau at gmail.com>
> wrote:
> > > > >
> > > > >> Anupa,
> > > > >>
> > > > >> I think your  best bet with your data would be to tidy it up in
> > > > >> Excel, read it into  R using something like the readxl package and
> > > > >> then supply some sample data is the dput() function.
> > > > >>
> > > > >> In the case of a large dataset something like dput(head(mydata,
> > > > >> 100)) should supply the data we need. Just do dput(mydata) where
> > > > >> *mydata* is your data. Copy the output and paste it here.
> > > > >>
> > > > >> On Thu, 29 Jun 2023 at 08:37, Ebert,Timothy Aaron <tebert at ufl.edu
> >
> > > wrote:
> > > > >>
> > > > >>> Reposting the data did not help. We do not like to guess, and
> > > > >>> doing so takes a great deal of time that is likely wasted.
> > > > >>> Rows are observations.
> > > > >>> Columns are variables.
> > > > >>> In Excel, the first row will be variable names and all subsequent
> > > > >>> rows will be observations.
> > > > >>>
> > > > >>> Income is the first variable. It has seven states: $10, $25, $40,
> > > > >>> $75,
> > > > >>> >$75, "No", "Answer"
> > > > >>> MF is the second variable. It has six values: 1, 2, 3, 4, 5, 9
> > > > >>> None is the third variable. It has seven values: 1, 3.05,  2.29,
> > > > >>> 2.24, 1.71, 1.30, 2.83 Equity is the last variable with many
> > > > >>> states, both numeric and text. A computer will read it all as
> > > > >>> text.
> > > > >>>
> > > > >>> As written the data cannot be analyzed.
> > > > >>>
> > > > >>> Equity looks like it should be numeric. However, it has text
> > values:
> > > > >>> "Debt", "Hybrid", Bank", "AC", "None", "Current", "Savings",
> "No",
> > > > >>> and "Answer"
> > > > >>>
> > > > >>> In looking at the data I try to find some organization where
> every
> > > > >>> variable has the same number of rows as every other variable. I
> > > > >>> fail with these data.
> > > > >>> I could combine "No" and "Answer" into one name "No Answer" to
> > > > >>> make it agree with MF, but then it does not work for None.
> > > > >>>
> > > > >>>
> > > > >>> Please rework the data in Excel so that we can properly interpret
> > > > >>> the content. If it is badly organized in Excel, moving it to R
> > will not help.
> > > > >>> Below, I tried adding carriage returns and spaces to organize the
> > > > >>> data, but I have a column of numbers that are not identified. The
> > > > >>> values below
> > > > >>> $10 do not make much sense compared to other values.
> > > > >>>
> > > > >>> I am tired of guessing.
> > > > >>>
> > > > >>> Tim
> > > > >>>
> > > > >>> -----Original Message-----
> > > > >>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam
> > > > >>> Tyagi
> > > > >>> Sent: Wednesday, June 28, 2023 11:49 PM
> > > > >>> To: r-help at r-project.org
> > > > >>> Subject: Re: [R] Plotting factors in graph panel
> > > > >>>
> > > > >>> [External Email]
> > > > >>>
> > > > >>> Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope
> > > > >>> you have been well.
> > > > >>>
> > > > >>> Pikal, thanks. Your solution may be close to what I want. I did
> > > > >>> not know that I was posting in HTML. I just copied the data from
> > > > >>> Excel and posted in the email in Gmail. The data is still in
> > > > >>> Excel, because I have not yet figured out what is a good way to
> > > > >>> organize it in R. I am posting it again below as text. These are
> > > > >>> rows in Excel: 1,2,3,5,9 after MF are income categories and No
> > > > >>> Answer category (9). Down the second column are categories of MF
> > > and Bank AC. Rest of the columns are percentages.
> > > > >>>
> > > > >>> Jim, thanks for the graph. I am looking to plot only one line
> > > > >>> (category) each in many small plots on the same page. I don't
> want
> > > > >>> to compare different categories on the same graph as you do, but
> > > > >>> see how each category varies by income, one category in each
> > > > >>> graph. Like Excel does with Sparklines (Top menu: Insert,
> > > > >>> Sparklines, Lines). I have many categories for many variables. I
> > am only
> > > showing two MF and Bank AC.
> > > > >>>
> > > > >>> Income        $10 $25     $40      $75   > $75    No Answer
> > > > >>> MF                   1      2         3           4         5
> >     9
> > > > >>> None               1   3.05     2.29    2.24     1.71    1.30
> > > > >>>    2.83
> > > > >>> Equity             2    29.76  28.79  29.51 28.90   31.67
> > > > >>> 36.77
> > > > >>>
> > > > >>> Debt                3  31.18  32.64  34.31  35.65  37.59
> > > > >>>  33.15
> > > > >>>
> > > > >>> Hybrid              4 36.00 36.27 33.94 33.74 29.44 27.25
> > > > >>>
> > > > >>> Bank AC None 1 46.54 54.01 59.1 62.17 67.67 60.87
> > > > >>>
> > > > >>> Current            2 24.75 24.4 25 24.61 24.02 21.09
> > > > >>>
> > > > >>> Savings             3 25.4 18.7 29 11.48 7.103 13.46
> > > > >>>
> > > > >>> No Answer       9 3.307 2.891 13.4 1.746 1.208 4.577
> > > > >>>
> > > > >>>
> > > > >>> On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com>
> > > wrote:
> > > > >>>
> > > > >>> > Hi Anupam,
> > > > >>> > Haven't heard from you in a long time. Perhaps you want
> > > > >>> > something like
> > > > >>> > this:
> > > > >>> >
> > > > >>> > at_df<-read.table(text=
> > > > >>> >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None
> > > > >>> > Bank_Current Bank_Savings Bank_NA
> > > > >>> >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
> > > > >>> >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
> > > > >>> >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
> > > > >>> >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
> > > > >>> >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
> > > > >>> > No_Answer 9
> > > > >>> > 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
> > > > >>> >  header=TRUE,stringsAsFactors=FALSE)
> > > > >>> > at_df<-
> > > at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank
> > > > >>> > _NA")]
> > > > >>> > png("MF_Bank.png",height=600)
> > > > >>> > par(mfrow=c(2,1))
> > > > >>> > matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
> > > > >>> >  type="l",col=1:4,lty=1:4,lwd=3,  main="Percentages by Income
> > > > >>> > and MF type", xlab="Income",ylab="Percentage of
> group",xaxt="n")
> > > > >>> > axis(1,at=1:5,labels=at_df$Income)
> > > > >>> > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
> > > > >>> >  lty=1:4,lwd=3,col=1:4)
> > > > >>> > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
> > > > >>> >  type="l",col=1:3,lty=1:4,lwd=3,  main="Percentages by Income
> > > > >>> > and Bank type", xlab="Income",ylab="Percentage of
> > > > >>> > group",xaxt="n")
> > > > >>> > axis(1,at=1:5,labels=at_df$Income)
> > > > >>> > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
> > > > >>> >  lty=1:4,lwd=3,col=1:3)
> > > > >>> > dev.off()
> > > > >>> >
> > > > >>> > Jim
> > > > >>> >
> > > > >>> > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi
> > > > >>> > <anuptyagi at gmail.com>
> > > > >>> wrote:
> > > > >>> > >
> > > > >>> > > Hello,
> > > > >>> > >
> > > > >>> > > I want to plot the following kind of data (percentage of
> > > > >>> > > respondents
> > > > >>> > from a
> > > > >>> > > survey) that varies by Income into many small *line* graphs
> in
> > > > >>> > > a panel of graphs. I want to omit "No Answer" categories. I
> > > > >>> > > want to see how each one of the categories (percentages),
> > > > >>> > > "None", " Equity", etc. varies by
> > > > >>> > Income.
> > > > >>> > > How can I do this? How to organize the data well and how to
> > > > >>> > > plot? I
> > > > >>> > thought
> > > > >>> > > Lattice may be a good package to plot this, but I don't know
> > > > >>> > > for sure. I prefer to do this in Base-R if possible, but I am
> > > > >>> > > open to ggplot. Any
> > > > >>> > ideas
> > > > >>> > > will be helpful.
> > > > >>> > >
> > > > >>> > > Income
> > > > >>> > > $10 $25 $40 $75 > $75 No Answer MF 1 2 3 4 5 9 None 1 3.05
> > > > >>> > > 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51
> > > > >>> > > 28.90 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
> > > > >>> > > Hybrid
> > > > >>> > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54
> > > > >>> > > 54.01
> > > > >>> > > 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02
> > > > >>> > > 21.09 Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9
> > > > >>> > > 3.307 2.891
> > > > >>> > > 13.4 1.746 1.208 4.577
> > > > >>> > >
> > > > >>> > > Thanks.
> > > > >>> > > --
> > > > >>> > > Anupam.
> > > > >>> > >
> > > > >>> > >         [[alternative HTML version deleted]]
> > > > >>> > >
> > > > >>> > > ______________________________________________
> > > > >>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
> more,
> > > > >>> > > see https://st/
> > > > >>> > > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-
> > > help&data=05%7C01%7Ctebert
> > > > >>> > > %40ufl
> > > > >>> > >
> > > .edu%7C59874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace6
> > > > >>> > > 0a6233
> > > > >>> > >
> > > 1e1b84%7C0%7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d
> > > 8ey
> > > > >>> > > JWIjoi
> > > > >>> > >
> > > MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3
> > > > >>> > > 000%7C
> > > > >>> > >
> > > %7C%7C&sdata=xoaDMG7ogY4tMtqe30pONZrBdk0eq2cW%2BgdwlDHneWY
> > > %3D&
> > > > >>> > > reserv
> > > > >>> > > ed=0
> > > > >>> > > PLEASE do read the posting guide
> > > > >>> > http://www.r/
> > > > >>> > -project.org%2Fposting-
> > > guide.html&data=05%7C01%7Ctebert%40ufl.ed
> > > > >>> > u%7C59
> > > > >>> >
> > > 874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a62331e1b8
> > > > >>> > 4%7C0%
> > > > >>> >
> > > 7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4
> > > wLjA
> > > > >>> > wMDAiL
> > > > >>> >
> > > CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sd
> > > > >>> > ata=H7
> > > > >>> >
> > > 6XCa%2FULBGUn0Lok93l6mtHzo0snq5G0a%2BL4sEH8%2F8%3D&reserved=0
> > > > >>> > > and provide commented, minimal, self-contained, reproducible
> > > code.
> > > > >>> >
> > > > >>>
> > > > >>>
> > > > >>> --
> > > > >>> Anupam.
> > > > >>>
> > > > >>>         [[alternative HTML version deleted]]
> > > > >>>
> > > > >>> ______________________________________________
> > > > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> see
> > > > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > > > >>> PLEASE do read the posting guide
> > > > >>> http://www.r-project.org/posting-guide.html
> > > > >>> and provide commented, minimal, self-contained, reproducible
> code.
> > > > >>> ______________________________________________
> > > > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> see
> > > > >>> https://stat.ethz.ch/mailman/listinfo/r-help
> > > > >>> PLEASE do read the posting guide
> > > > >>> http://www.R-project.org/posting-guide.html
> > > > >>> and provide commented, minimal, self-contained, reproducible
> code.
> > > > >>>
> > > > >>
> > > > >>
> > > > >> --
> > > > >> John Kane
> > > > >> Kingston ON Canada
> > > > >>
> > > > >
> > > > >
> > > > > --
> > > > > Anupam.
> > > > >
> > > > >
> > > >
> > > > --
> > > > Anupam.
> > > >
> > > >         [[alternative HTML version deleted]]
> > > >
> > > > ______________________________________________
> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide
> > > > http://www.R-project.org/posting-guide.html
> > > > and provide commented, minimal, self-contained, reproducible code.
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide http://www.R-project.org/posting-
> > > guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> >
> >
> >
> > --
> >
> > Anupam.
> >
>
>
> --
> Anupam.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @nupty@g| @end|ng |rom gm@||@com  Wed Jul 12 06:12:04 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Wed, 12 Jul 2023 09:42:04 +0530
Subject: [R] Plotting factors in graph panel
In-Reply-To: <CADfFDC4UqC943PtmVsuEo4igKWuL8pveJsy5YQ0qa-0HDSBBdQ@mail.gmail.com>
References: <CAFL9eu=85pvoKKdUKgaK-edX8CoELAMkzqH5wAupQ-Dh9ntFMg@mail.gmail.com>
 <CA+8X3fUkafDZ-0H5KhtQveQfRxRmf56xQzxCMiSc68XbNyOvRw@mail.gmail.com>
 <CAFL9eu=rLoYgKV3+Gprz8Mi6H3FDC-C7tPN4d8GqZuGthk--tQ@mail.gmail.com>
 <CH3PR22MB4514251DCFE77C2E74C285A8CF25A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <CAKZQJMCX0GRDZ0ypxEf1LBr-U8=HMVYGf2otMWVbn+m00GPeRw@mail.gmail.com>
 <CAFL9eu=qG0NeQtfQdfHYsr3rXRL+t59aBoYykoN2mHoC-tXLmA@mail.gmail.com>
 <CAFL9eu=QJG8X9PDG0RNxP88TicefE_DAgnkK-nxWkD9oLt6Z0g@mail.gmail.com>
 <CADfFDC4hrX8huz2HnDMLM=WT+z5UttBfk8rQeOGwLj14CZN2Pw@mail.gmail.com>
 <ac95f337b83240d5836169c02548d0d4@SRVEXCHCM1302.precheza.cz>
 <CAFL9eunWEer8nXQ52jsrvicdvDokyZHfTWrOsstRyyW37hm+nQ@mail.gmail.com>
 <2cdced6c2c8b492ea94099f51d482970@SRVEXCHCM1302.precheza.cz>
 <CAFL9eunmj9+NvNmzM20YDXwDFxKZM25A0axUNk2_n-1+miSsBg@mail.gmail.com>
 <CADfFDC4UqC943PtmVsuEo4igKWuL8pveJsy5YQ0qa-0HDSBBdQ@mail.gmail.com>
Message-ID: <CAFL9eu=xc62U-avWvrzKamBcpdntnLTO6L+REQjurxNaEwp0jQ@mail.gmail.com>

Wonderful! This is great news. Thanks, Deepayan.

On Wed, 12 Jul 2023 at 09:21, Deepayan Sarkar <deepayan.sarkar at gmail.com>
wrote:

>
>
> On Wed, 12 Jul 2023 at 08:57, Anupam Tyagi <anuptyagi at gmail.com> wrote:
>
>> Thanks.
>> I made a graph in Stata that is close to what I want in R. Stata graph is
>> attached. The main differences between Stata and R graphs that I was able
>> to make, with ggplot or lattice, is that I have been able to scale y-axis
>> of each sub-graph independently in Stata, but not in R. Also, x-axis
>> labels
>> are also complete in Stata but not in R. Is there a way to do this in R
>> via
>> base-R, ggplot or lattice?
>
>
> Yes, of course. For lattice, add the argument
>
> scales = list(y = "free")
>
> For ggplot2, change
>
> facet_wrap(~Measure)
>
> to
>
> facet_wrap(~Measure, scale = "free")
>
> -Deepayan
>
> I had initially thought that these types of
>> panel graphs are common and should be easy to do, but that is not how this
>> is turning out to be. Any help is welcome.
>>
>
>> On Fri, 7 Jul 2023 at 17:57, PIKAL Petr <petr.pikal at precheza.cz> wrote:
>>
>> > Hallo Anupam
>> >
>> > With
>> >
>> > ggplot change axis label size into Google
>> >
>> > the first answer I got was
>> >
>> > axis.text theme
>> >
>> > r - Change size of axes title and labels in ggplot2 - Stack Overflow
>> > <
>> https://stackoverflow.com/questions/14942681/change-size-of-axes-title-and-labels-in-ggplot2
>> >
>> >
>> >
>> >
>> > so
>> >
>> >
>> >
>> > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
>> geom_point()
>> > +
>> >   geom_line() + facet_wrap(~Measure) +
>> > theme(axis.text=element_text(size=5))
>> >
>> >
>> >
>> > Should do the trick.
>> >
>> >
>> >
>> > S pozdravem | Best Regards
>> >
>> >
>> > *RNDr. Petr PIKAL*Vedouc? V?zkumu a v?voje | Research Manager
>> >
>> >
>> > *PRECHEZA a.s.*n?b?. Dr. Edvarda Bene?e 1170/24 | 750 02 P?erov | Czech
>> > Republic
>> > Tel: +420 581 252 256 | GSM: +420 724 008 364
>> > petr.pikal at precheza.cz | *www.precheza.cz <https://www.precheza.cz/>*
>> >
>> > *Osobn? ?daje: *Informace o zpracov?n? a ochran? osobn?ch ?daj?
>> > obchodn?ch partner? PRECHEZA a.s. jsou zve?ejn?ny na: *
>> https://www.precheza.cz/zasady-ochrany-osobnich-udaju/
>> > <https://www.precheza.cz/zasady-ochrany-osobnich-udaju/>* | Information
>> > about processing and protection of business partner?s personal data are
>> > available on website: *
>> https://www.precheza.cz/en/personal-data-protection-principles/
>> > <https://www.precheza.cz/en/personal-data-protection-principles/>*
>> >
>> > *D?v?rnost: *Tento e-mail a jak?koliv k n?mu p?ipojen? dokumenty jsou
>> > d?v?rn? a podl?haj? tomuto pr?vn? z?vazn?mu prohl??en? o vylou?en?
>> > odpov?dnosti: *https://www.precheza.cz/01-dovetek/
>> > <https://www.precheza.cz/01-dovetek/>* | This email and any documents
>> > attached to it may be confidential and are subject to the legally
>> binding
>> > disclaimer: *https://www.precheza.cz/en/01-disclaimer/
>> > <https://www.precheza.cz/en/01-disclaimer/>*
>> >
>> >
>> >
>> > *From:* Anupam Tyagi <anuptyagi at gmail.com>
>> > *Sent:* Friday, July 7, 2023 12:48 PM
>> > *To:* PIKAL Petr <petr.pikal at precheza.cz>
>> > *Cc:* r-help at r-project.org
>> > *Subject:* Re: [R] Plotting factors in graph panel
>> >
>> >
>> >
>> > Thanks! You are correct, the graphs look very similar, except ggplot is
>> > scaling the text font to make it more readable. Is there a way to scale
>> > down the x-axis labels, so they are readable?
>> >
>> >
>> >
>> > On Fri, 7 Jul 2023 at 12:02, PIKAL Petr <petr.pikal at precheza.cz> wrote:
>> >
>> > Hallo Anupam
>> >
>> > I do not see much difference in ggplot or lattice, they seems to me
>> > provide almost identical results when removing theme part from ggplot.
>> >
>> > library(ggplot2)
>> > library(lattice)
>> >
>> > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
>> geom_point()
>> > +
>> >   geom_line() + facet_wrap(~Measure)
>> >
>> > xyplot(Percent ~ Income | Measure, TrialData4,
>> >        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
>> >
>> > So it is probably only matter of your preference which one do you
>> choose.
>> >
>> > Cheers
>> > Petr
>> >
>> >
>> > > -----Original Message-----
>> > > From: R-help <r-help-bounces at r-project.org> On Behalf Of Deepayan
>> Sarkar
>> > > Sent: Thursday, July 6, 2023 3:06 PM
>> > > To: Anupam Tyagi <anuptyagi at gmail.com>
>> > > Cc: r-help at r-project.org
>> > > Subject: Re: [R] Plotting factors in graph panel
>> > >
>> > > On Thu, 6 Jul 2023 at 15:21, Anupam Tyagi <anuptyagi at gmail.com>
>> wrote:
>> > > >
>> > > > Btw, I think "lattice" graphics will provide a better solution than
>> > > > "ggplot", because it puts appropriate (space saving) markers on the
>> > > > axes and does axes labels well. However, I cannot figure out how to
>> do
>> > > > it in "lattice".
>> > >
>> > > You will need to convert Income to a factor first. Alternatively, use
>> > > dotplot() instead of xyplot(), but that will sort the levels wrongly,
>> so
>> > better to
>> > > make the factor first anyway.
>> > >
>> > > TrialData4 <- within(TrialData4,
>> > > {
>> > >     Income <- factor(Income, levels = c("$10", "$25", "$40", "$75", ">
>> > $75"))
>> > > })
>> > >
>> > > xyplot(Percent ~ Income | Measure, TrialData4,
>> > >        type = "o", pch = 16, as.table = TRUE, grid = TRUE)
>> > >
>> > > or
>> > >
>> > > dotplot(Percent ~ Income | Measure, TrialData4,
>> > >         type = "o", as.table = TRUE)
>> > >
>> > > This is not really any different from the ggplot() version though.
>> > > Maybe you just don't like the effect of the '+ theme_classic()' part.
>> > >
>> > > Best,
>> > > -Deepayan
>> > >
>> > >
>> > > > On Thu, 6 Jul 2023 at 15:11, Anupam Tyagi <anuptyagi at gmail.com>
>> wrote:
>> > > >
>> > > > > Hi John:
>> > > > >
>> > > > > Thanks! Below is the data using your suggestion. I used "ggplot"
>> to
>> > > > > make a graph. I am not too happy with it. I am looking for
>> something
>> > > > > simpler and cleaner. Plot is attached.
>> > > > >
>> > > > > I also tried "lattice" package, but nothing got plotted with
>> "xyplot"
>> > > > > command, because it is looking for a numeric variable on x-axis.
>> > > > >
>> > > > > ggplot(TrialData4, aes(x=Income, y=Percent, group=Measure)) +
>> > > > > geom_point()
>> > > > > +
>> > > > >   geom_line() + facet_wrap(~Measure) + theme_classic()
>> > > > >
>> > > > > > dput(TrialData4)structure(list(Income = c("$10", "$25", "$40",
>> > > > > > "$75", "> $75",
>> > > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
>> ">
>> > > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
>> > > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
>> > > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
>> > > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
>> > > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
>> ">
>> > > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
>> > > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
>> > > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
>> > > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75",
>> > > > > "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75",
>> ">
>> > > > > $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25", "$40",
>> > > > > "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10", "$25",
>> > > > > "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75", "$10",
>> > > > > "$25", "$40", "$75", "> $75", "$10", "$25", "$40", "$75", "> $75"
>> > > > > ), Percent = c(3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79,
>> > > > > 29.51, 28.9, 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27,
>> > > > > 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75,
>> 24.4,
>> > > > > 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292,
>> 2.244,
>> > > > > 1.706, 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64,
>> 34.31,
>> > > > > 35.65, 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1,
>> > > > > 62.17, 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29,
>> 11.48,
>> > > > > 7.103, 3.052, 2.292, 2.244, 1.706, 1.297, 29.76, 28.79, 29.51,
>> 28.9,
>> > > > > 31.67, 31.18, 32.64, 34.31, 35.65, 37.59, 36, 36.27, 33.94, 33.74,
>> > > > > 29.44, 46.54, 54.01, 59.1, 62.17, 67.67, 24.75, 24.4, 25, 24.61,
>> > > > > 24.02, 25.4, 18.7, 29, 11.48, 7.103, 3.052, 2.292, 2.244, 1.706,
>> > > > > 1.297, 29.76, 28.79, 29.51, 28.9, 31.67, 31.18, 32.64, 34.31,
>> 35.65,
>> > > > > 37.59, 36, 36.27, 33.94, 33.74, 29.44, 46.54, 54.01, 59.1, 62.17,
>> > > > > 67.67, 24.75, 24.4, 25, 24.61, 24.02, 25.4, 18.7, 29, 11.48,
>> 7.103),
>> > > > > Measure = c("MF None", "MF None", "MF None", "MF None", "MF None",
>> > > > > "MF Equity", "MF Equity", "MF Equity", "MF Equity", "MF Equity",
>> "MF
>> > > > > Debt", "MF Debt", "MF Debt", "MF Debt", "MF Debt", "MF Hybrid",
>> "MF
>> > > > > Hybrid", "MF Hybrid", "MF Hybrid", "MF Hybrid", "Bank None", "Bank
>> > > > > None", "Bank None", "Bank None", "Bank None", "Bank Current",
>> "Bank
>> > > > > Current", "Bank Current", "Bank Current", "Bank Current", "Bank
>> > > > > Savings", "Bank Savings", "Bank Savings", "Bank Savings", "Bank
>> > > > > Savings", "MF None 1", "MF None 1", "MF None 1", "MF None 1", "MF
>> > > > > None 1", "MF Equity 1", "MF Equity 1", "MF Equity 1", "MF Equity
>> 1",
>> > > > > "MF Equity 1", "MF Debt 1", "MF Debt 1", "MF Debt 1", "MF Debt 1",
>> > > > > "MF Debt 1", "MF Hybrid 1", "MF Hybrid 1", "MF Hybrid 1", "MF
>> Hybrid
>> > > > > 1", "MF Hybrid 1", "Bank None 1", "Bank None 1", "Bank None 1",
>> > > > > "Bank None 1", "Bank None 1", "Bank Current 1", "Bank Current 1",
>> > > > > "Bank Current 1", "Bank Current 1", "Bank Current 1", "Bank
>> Savings
>> > > > > 1", "Bank Savings 1", "Bank Savings 1", "Bank Savings 1", "Bank
>> > > > > Savings 1", "MF None 2", "MF None 2", "MF None 2", "MF None 2",
>> "MF
>> > > > > None 2", "MF Equity 2", "MF Equity 2", "MF Equity 2", "MF Equity
>> 2",
>> > > > > "MF Equity 2", "MF Debt 2", "MF Debt 2", "MF Debt 2", "MF Debt 2",
>> > > > > "MF Debt 2", "MF Hybrid 2", "MF Hybrid 2", "MF Hybrid 2", "MF
>> Hybrid
>> > > > > 2", "MF Hybrid 2", "Bank None 2", "Bank None 2", "Bank None 2",
>> > > > > "Bank None 2", "Bank None 2", "Bank Current 2", "Bank Current 2",
>> > > > > "Bank Current 2", "Bank Current 2", "Bank Current 2", "Bank
>> Savings
>> > > > > 2", "Bank Savings 2", "Bank Savings 2", "Bank Savings 2", "Bank
>> > > > > Savings 2", "MF None 3", "MF None 3", "MF None 3", "MF None 3",
>> "MF
>> > > > > None 3", "MF Equity 3", "MF Equity 3", "MF Equity 3", "MF Equity
>> 3",
>> > > > > "MF Equity 3", "MF Debt 3", "MF Debt 3", "MF Debt 3", "MF Debt 3",
>> > > > > "MF Debt 3", "MF Hybrid 3", "MF Hybrid 3", "MF Hybrid 3", "MF
>> Hybrid
>> > > > > 3", "MF Hybrid 3", "Bank None 3", "Bank None 3", "Bank None 3",
>> > > > > "Bank None 3", "Bank None 3", "Bank Current 3", "Bank Current 3",
>> > > > > "Bank Current 3", "Bank Current 3", "Bank Current 3", "Bank
>> Savings
>> > > > > 3", "Bank Savings 3", "Bank Savings 3", "Bank Savings 3", "Bank
>> > > > > Savings 3")), class = c("tbl_df", "tbl", "data.frame"), row.names
>> =
>> > > > > c(NA,
>> > > > > -140L))
>> > > > >
>> > > > >
>> > > > >
>> > > > >
>> > > > > On Thu, 29 Jun 2023 at 21:11, John Kane <jrkrideau at gmail.com>
>> wrote:
>> > > > >
>> > > > >> Anupa,
>> > > > >>
>> > > > >> I think your  best bet with your data would be to tidy it up in
>> > > > >> Excel, read it into  R using something like the readxl package
>> and
>> > > > >> then supply some sample data is the dput() function.
>> > > > >>
>> > > > >> In the case of a large dataset something like dput(head(mydata,
>> > > > >> 100)) should supply the data we need. Just do dput(mydata) where
>> > > > >> *mydata* is your data. Copy the output and paste it here.
>> > > > >>
>> > > > >> On Thu, 29 Jun 2023 at 08:37, Ebert,Timothy Aaron <
>> tebert at ufl.edu>
>> > > wrote:
>> > > > >>
>> > > > >>> Reposting the data did not help. We do not like to guess, and
>> > > > >>> doing so takes a great deal of time that is likely wasted.
>> > > > >>> Rows are observations.
>> > > > >>> Columns are variables.
>> > > > >>> In Excel, the first row will be variable names and all
>> subsequent
>> > > > >>> rows will be observations.
>> > > > >>>
>> > > > >>> Income is the first variable. It has seven states: $10, $25,
>> $40,
>> > > > >>> $75,
>> > > > >>> >$75, "No", "Answer"
>> > > > >>> MF is the second variable. It has six values: 1, 2, 3, 4, 5, 9
>> > > > >>> None is the third variable. It has seven values: 1, 3.05,  2.29,
>> > > > >>> 2.24, 1.71, 1.30, 2.83 Equity is the last variable with many
>> > > > >>> states, both numeric and text. A computer will read it all as
>> > > > >>> text.
>> > > > >>>
>> > > > >>> As written the data cannot be analyzed.
>> > > > >>>
>> > > > >>> Equity looks like it should be numeric. However, it has text
>> > values:
>> > > > >>> "Debt", "Hybrid", Bank", "AC", "None", "Current", "Savings",
>> "No",
>> > > > >>> and "Answer"
>> > > > >>>
>> > > > >>> In looking at the data I try to find some organization where
>> every
>> > > > >>> variable has the same number of rows as every other variable. I
>> > > > >>> fail with these data.
>> > > > >>> I could combine "No" and "Answer" into one name "No Answer" to
>> > > > >>> make it agree with MF, but then it does not work for None.
>> > > > >>>
>> > > > >>>
>> > > > >>> Please rework the data in Excel so that we can properly
>> interpret
>> > > > >>> the content. If it is badly organized in Excel, moving it to R
>> > will not help.
>> > > > >>> Below, I tried adding carriage returns and spaces to organize
>> the
>> > > > >>> data, but I have a column of numbers that are not identified.
>> The
>> > > > >>> values below
>> > > > >>> $10 do not make much sense compared to other values.
>> > > > >>>
>> > > > >>> I am tired of guessing.
>> > > > >>>
>> > > > >>> Tim
>> > > > >>>
>> > > > >>> -----Original Message-----
>> > > > >>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam
>> > > > >>> Tyagi
>> > > > >>> Sent: Wednesday, June 28, 2023 11:49 PM
>> > > > >>> To: r-help at r-project.org
>> > > > >>> Subject: Re: [R] Plotting factors in graph panel
>> > > > >>>
>> > > > >>> [External Email]
>> > > > >>>
>> > > > >>> Thanks, Pikal and Jim. Yes, it has been a long time Jim. I hope
>> > > > >>> you have been well.
>> > > > >>>
>> > > > >>> Pikal, thanks. Your solution may be close to what I want. I did
>> > > > >>> not know that I was posting in HTML. I just copied the data from
>> > > > >>> Excel and posted in the email in Gmail. The data is still in
>> > > > >>> Excel, because I have not yet figured out what is a good way to
>> > > > >>> organize it in R. I am posting it again below as text. These are
>> > > > >>> rows in Excel: 1,2,3,5,9 after MF are income categories and No
>> > > > >>> Answer category (9). Down the second column are categories of MF
>> > > and Bank AC. Rest of the columns are percentages.
>> > > > >>>
>> > > > >>> Jim, thanks for the graph. I am looking to plot only one line
>> > > > >>> (category) each in many small plots on the same page. I don't
>> want
>> > > > >>> to compare different categories on the same graph as you do, but
>> > > > >>> see how each category varies by income, one category in each
>> > > > >>> graph. Like Excel does with Sparklines (Top menu: Insert,
>> > > > >>> Sparklines, Lines). I have many categories for many variables. I
>> > am only
>> > > showing two MF and Bank AC.
>> > > > >>>
>> > > > >>> Income        $10 $25     $40      $75   > $75    No Answer
>> > > > >>> MF                   1      2         3           4         5
>> >     9
>> > > > >>> None               1   3.05     2.29    2.24     1.71    1.30
>> > > > >>>    2.83
>> > > > >>> Equity             2    29.76  28.79  29.51 28.90   31.67
>> > > > >>> 36.77
>> > > > >>>
>> > > > >>> Debt                3  31.18  32.64  34.31  35.65  37.59
>> > > > >>>  33.15
>> > > > >>>
>> > > > >>> Hybrid              4 36.00 36.27 33.94 33.74 29.44 27.25
>> > > > >>>
>> > > > >>> Bank AC None 1 46.54 54.01 59.1 62.17 67.67 60.87
>> > > > >>>
>> > > > >>> Current            2 24.75 24.4 25 24.61 24.02 21.09
>> > > > >>>
>> > > > >>> Savings             3 25.4 18.7 29 11.48 7.103 13.46
>> > > > >>>
>> > > > >>> No Answer       9 3.307 2.891 13.4 1.746 1.208 4.577
>> > > > >>>
>> > > > >>>
>> > > > >>> On Wed, 28 Jun 2023 at 17:30, Jim Lemon <drjimlemon at gmail.com>
>> > > wrote:
>> > > > >>>
>> > > > >>> > Hi Anupam,
>> > > > >>> > Haven't heard from you in a long time. Perhaps you want
>> > > > >>> > something like
>> > > > >>> > this:
>> > > > >>> >
>> > > > >>> > at_df<-read.table(text=
>> > > > >>> >  "Income MF MF_None MF_Equity MF_Debt MF_Hybrid Bank_None
>> > > > >>> > Bank_Current Bank_Savings Bank_NA
>> > > > >>> >  $10 1 3.05 29.76 31.18 36.0 46.54 24.75 25.4 3.307
>> > > > >>> >  $25 2 2.29 28.79 32.64 36.27 54.01 24.4 18.7 2.891
>> > > > >>> >  $40 3 2.24 29.51 34.31 33.94 59.1 25.0 29 13.4
>> > > > >>> >  $75 4 1.71 28.90 35.65 33.74 62.17 24.61 11.48 1.746
>> > > > >>> >  >$75 5 1.30 31.67 37.59 29.44 67.67 24.02 7.103 1.208
>> > > > >>> > No_Answer 9
>> > > > >>> > 2.83 36.77 33.15 27.25 60.87 21.09 13.46 4.577",
>> > > > >>> >  header=TRUE,stringsAsFactors=FALSE)
>> > > > >>> > at_df<-
>> > > at_df[at_df$Income!="No_Answer",which(names(at_df)!="Bank
>> > > > >>> > _NA")]
>> > > > >>> > png("MF_Bank.png",height=600)
>> > > > >>> > par(mfrow=c(2,1))
>> > > > >>> >
>> matplot(at_df[,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid")],
>> > > > >>> >  type="l",col=1:4,lty=1:4,lwd=3,  main="Percentages by Income
>> > > > >>> > and MF type", xlab="Income",ylab="Percentage of
>> group",xaxt="n")
>> > > > >>> > axis(1,at=1:5,labels=at_df$Income)
>> > > > >>> > legend(3,24,c("MF_None","MF_Equity","MF_Debt","MF_Hybrid"),
>> > > > >>> >  lty=1:4,lwd=3,col=1:4)
>> > > > >>> > matplot(at_df[,c("Bank_None","Bank_Current","Bank_Savings")],
>> > > > >>> >  type="l",col=1:3,lty=1:4,lwd=3,  main="Percentages by Income
>> > > > >>> > and Bank type", xlab="Income",ylab="Percentage of
>> > > > >>> > group",xaxt="n")
>> > > > >>> > axis(1,at=1:5,labels=at_df$Income)
>> > > > >>> > legend(3,54,c("Bank_None","Bank_Current","Bank_Savings"),
>> > > > >>> >  lty=1:4,lwd=3,col=1:3)
>> > > > >>> > dev.off()
>> > > > >>> >
>> > > > >>> > Jim
>> > > > >>> >
>> > > > >>> > On Wed, Jun 28, 2023 at 6:33?PM Anupam Tyagi
>> > > > >>> > <anuptyagi at gmail.com>
>> > > > >>> wrote:
>> > > > >>> > >
>> > > > >>> > > Hello,
>> > > > >>> > >
>> > > > >>> > > I want to plot the following kind of data (percentage of
>> > > > >>> > > respondents
>> > > > >>> > from a
>> > > > >>> > > survey) that varies by Income into many small *line* graphs
>> in
>> > > > >>> > > a panel of graphs. I want to omit "No Answer" categories. I
>> > > > >>> > > want to see how each one of the categories (percentages),
>> > > > >>> > > "None", " Equity", etc. varies by
>> > > > >>> > Income.
>> > > > >>> > > How can I do this? How to organize the data well and how to
>> > > > >>> > > plot? I
>> > > > >>> > thought
>> > > > >>> > > Lattice may be a good package to plot this, but I don't know
>> > > > >>> > > for sure. I prefer to do this in Base-R if possible, but I
>> am
>> > > > >>> > > open to ggplot. Any
>> > > > >>> > ideas
>> > > > >>> > > will be helpful.
>> > > > >>> > >
>> > > > >>> > > Income
>> > > > >>> > > $10 $25 $40 $75 > $75 No Answer MF 1 2 3 4 5 9 None 1 3.05
>> > > > >>> > > 2.29 2.24 1.71 1.30 2.83 Equity 2 29.76 28.79 29.51
>> > > > >>> > > 28.90 31.67 36.77 Debt 3 31.18 32.64 34.31 35.65 37.59 33.15
>> > > > >>> > > Hybrid
>> > > > >>> > > 4 36.00 36.27 33.94 33.74 29.44 27.25 Bank AC None 1 46.54
>> > > > >>> > > 54.01
>> > > > >>> > > 59.1 62.17 67.67 60.87 Current 2 24.75 24.4 25 24.61 24.02
>> > > > >>> > > 21.09 Savings 3 25.4 18.7 29 11.48 7.103 13.46 No Answer 9
>> > > > >>> > > 3.307 2.891
>> > > > >>> > > 13.4 1.746 1.208 4.577
>> > > > >>> > >
>> > > > >>> > > Thanks.
>> > > > >>> > > --
>> > > > >>> > > Anupam.
>> > > > >>> > >
>> > > > >>> > >         [[alternative HTML version deleted]]
>> > > > >>> > >
>> > > > >>> > > ______________________________________________
>> > > > >>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>> more,
>> > > > >>> > > see https://st/
>> > > > >>> > > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-
>> > > help&data=05%7C01%7Ctebert
>> > > > >>> > > %40ufl
>> > > > >>> > >
>> > > .edu%7C59874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace6
>> > > > >>> > > 0a6233
>> > > > >>> > >
>> > > 1e1b84%7C0%7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d
>> > > 8ey
>> > > > >>> > > JWIjoi
>> > > > >>> > >
>> > > MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3
>> > > > >>> > > 000%7C
>> > > > >>> > >
>> > > %7C%7C&sdata=xoaDMG7ogY4tMtqe30pONZrBdk0eq2cW%2BgdwlDHneWY
>> > > %3D&
>> > > > >>> > > reserv
>> > > > >>> > > ed=0
>> > > > >>> > > PLEASE do read the posting guide
>> > > > >>> > http://www.r/
>> > > > >>> > -project.org%2Fposting-
>> > > guide.html&data=05%7C01%7Ctebert%40ufl.ed
>> > > > >>> > u%7C59
>> > > > >>> >
>> > > 874e74164c46133f2c08db7853d28f%7C0d4da0f84a314d76ace60a62331e1b8
>> > > > >>> > 4%7C0%
>> > > > >>> >
>> > > 7C0%7C638236073642897221%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4
>> > > wLjA
>> > > > >>> > wMDAiL
>> > > > >>> >
>> > > CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sd
>> > > > >>> > ata=H7
>> > > > >>> >
>> > > 6XCa%2FULBGUn0Lok93l6mtHzo0snq5G0a%2BL4sEH8%2F8%3D&reserved=0
>> > > > >>> > > and provide commented, minimal, self-contained, reproducible
>> > > code.
>> > > > >>> >
>> > > > >>>
>> > > > >>>
>> > > > >>> --
>> > > > >>> Anupam.
>> > > > >>>
>> > > > >>>         [[alternative HTML version deleted]]
>> > > > >>>
>> > > > >>> ______________________________________________
>> > > > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
>> see
>> > > > >>> https://stat.ethz.ch/mailman/listinfo/r-help
>> > > > >>> PLEASE do read the posting guide
>> > > > >>> http://www.r-project.org/posting-guide.html
>> > > > >>> and provide commented, minimal, self-contained, reproducible
>> code.
>> > > > >>> ______________________________________________
>> > > > >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
>> see
>> > > > >>> https://stat.ethz.ch/mailman/listinfo/r-help
>> > > > >>> PLEASE do read the posting guide
>> > > > >>> http://www.R-project.org/posting-guide.html
>> > > > >>> and provide commented, minimal, self-contained, reproducible
>> code.
>> > > > >>>
>> > > > >>
>> > > > >>
>> > > > >> --
>> > > > >> John Kane
>> > > > >> Kingston ON Canada
>> > > > >>
>> > > > >
>> > > > >
>> > > > > --
>> > > > > Anupam.
>> > > > >
>> > > > >
>> > > >
>> > > > --
>> > > > Anupam.
>> > > >
>> > > >         [[alternative HTML version deleted]]
>> > > >
>> > > > ______________________________________________
>> > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > > > https://stat.ethz.ch/mailman/listinfo/r-help
>> > > > PLEASE do read the posting guide
>> > > > http://www.R-project.org/posting-guide.html
>> > > > and provide commented, minimal, self-contained, reproducible code.
>> > >
>> > > ______________________________________________
>> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > > https://stat.ethz.ch/mailman/listinfo/r-help
>> > > PLEASE do read the posting guide http://www.R-project.org/posting-
>> > > guide.html
>> > > and provide commented, minimal, self-contained, reproducible code.
>> >
>> >
>> >
>> >
>> > --
>> >
>> > Anupam.
>> >
>>
>>
>> --
>> Anupam.
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

-- 
Anupam.

	[[alternative HTML version deleted]]


From tg@77m @end|ng |rom y@hoo@com  Wed Jul 12 07:37:30 2023
From: tg@77m @end|ng |rom y@hoo@com (Thomas Subia)
Date: Wed, 12 Jul 2023 05:37:30 +0000 (UTC)
Subject: [R] prop.test question
References: <583346509.2893700.1689140250616.ref@mail.yahoo.com>
Message-ID: <583346509.2893700.1689140250616@mail.yahoo.com>

Colleagues
Consider:smokers? <- c( 83, 90, 129, 70 )
patients <- c( 86, 93, 136, 82 )
prop.test(smokers, patients)
??? 4-sample test for equality of proportions
?? ?without continuity correction

data:? smokers out of patients
X-squared = 12.6, df = 3, p-value = 0.005585
alternative hypothesis: two.sided
sample estimates:
?? prop 1??? prop 2??????? prop 3??????? prop 4 
0.9651163 0.9677419 0.9485294 0.8536585 

Now:prop.trend.test(smokers, patients)??? Chi-squared Test for Trend in Proportions

data:? smokers out of patients ,
?using scores: 1 2 3 4
X-squared = 8.2249, df = 1, p-value = 0.004132
How can one determine the direction of the trend?
Thomas Subia




	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Wed Jul 12 10:03:27 2023
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Wed, 12 Jul 2023 10:03:27 +0200
Subject: [R] Variable and value labels
In-Reply-To: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
References: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
Message-ID: <25774.24143.211448.339245@stat.math.ethz.ch>

>>>>> Anupam Tyagi 
>>>>>     on Wed, 12 Jul 2023 09:18:55 +0530 writes:

    > Hello,

    > is there an easy way to do variable and value labels (for
    > factor variables) in base-R, without using a package. 

Yes, there are many.
How many help pages (in R , i.e. base-R)  did you consult?

Very general questions as the above are not very useful,
because typically the only concised answer can be yes/no.


    > If not, what is an easy and good way to do labels, using an
    > add-on package.


    > -- 
    > Anupam.

    > 	[[alternative HTML version deleted]]

    > ______________________________________________
    > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    > more, see https://stat.ethz.ch/mailman/listinfo/r-help
    > PLEASE do read the posting guide
    > http://www.R-project.org/posting-guide.html and provide
    > commented, minimal, self-contained, reproducible code.


From @nupty@g| @end|ng |rom gm@||@com  Wed Jul 12 14:10:56 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Wed, 12 Jul 2023 17:40:56 +0530
Subject: [R] Variable and value labels
In-Reply-To: <25774.24143.211448.339245@stat.math.ethz.ch>
References: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
 <25774.24143.211448.339245@stat.math.ethz.ch>
Message-ID: <CAFL9euk+etiLi37D+kAwavTBAY75Lb0LyRWFFiGdPorUibVm-Q@mail.gmail.com>

Thanks. Sorry, I have not consulted help pages, but did a web search. Web
search results are referring to some package or the other for doing labels.
Thanks for letting me know that this can be done in base-R. I will try to
find the relevant information in R documentation.

On Wed, 12 Jul, 2023, 1:33 pm Martin Maechler, <maechler at stat.math.ethz.ch>
wrote:

> >>>>> Anupam Tyagi
> >>>>>     on Wed, 12 Jul 2023 09:18:55 +0530 writes:
>
>     > Hello,
>
>     > is there an easy way to do variable and value labels (for
>     > factor variables) in base-R, without using a package.
>
> Yes, there are many.
> How many help pages (in R , i.e. base-R)  did you consult?
>
> Very general questions as the above are not very useful,
> because typically the only concised answer can be yes/no.
>
>
>     > If not, what is an easy and good way to do labels, using an
>     > add-on package.
>
>
>     > --
>     > Anupam.
>
>     >   [[alternative HTML version deleted]]
>
>     > ______________________________________________
>     > R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>     > more, see https://stat.ethz.ch/mailman/listinfo/r-help
>     > PLEASE do read the posting guide
>     > http://www.R-project.org/posting-guide.html and provide
>     > commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Wed Jul 12 16:28:22 2023
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (NP))
Date: Wed, 12 Jul 2023 14:28:22 +0000
Subject: [R] Variable and value labels
In-Reply-To: <CAFL9euk+etiLi37D+kAwavTBAY75Lb0LyRWFFiGdPorUibVm-Q@mail.gmail.com>
References: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
 <25774.24143.211448.339245@stat.math.ethz.ch>
 <CAFL9euk+etiLi37D+kAwavTBAY75Lb0LyRWFFiGdPorUibVm-Q@mail.gmail.com>
Message-ID: <e1f860c1434048b298226d12f55bc2ab@maastrichtuniversity.nl>

For value labels, factor() provides the necessary machinery. For variable labels, one could make use of comment() (something that not too many people seem to know about). To illustrate:

# look at the mtcars dataset
mtcars

# turn 'am' into a factor and use labels for the two possible levels thereof
mtcars$am <- factor(mtcars$am, levels=c(0,1), labels=c("automatic","manual"))
mtcars

# add a variable label via comment()
comment(mtcars$am) <- "Type of transmission"

# extract all the variable labels
sapply(mtcars, comment)

Best,
Wolfgang

>-----Original Message-----
>From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Anupam Tyagi
>Sent: Wednesday, 12 July, 2023 14:11
>To: Martin Maechler
>Cc: r-help mailing list
>Subject: Re: [R] Variable and value labels
>
>Thanks. Sorry, I have not consulted help pages, but did a web search. Web
>search results are referring to some package or the other for doing labels.
>Thanks for letting me know that this can be done in base-R. I will try to
>find the relevant information in R documentation.
>
>On Wed, 12 Jul, 2023, 1:33 pm Martin Maechler, <maechler at stat.math.ethz.ch>
>wrote:
>
>> >>>>> Anupam Tyagi
>> >>>>>     on Wed, 12 Jul 2023 09:18:55 +0530 writes:
>>
>>     > Hello,
>>
>>     > is there an easy way to do variable and value labels (for
>>     > factor variables) in base-R, without using a package.
>>
>> Yes, there are many.
>> How many help pages (in R , i.e. base-R)  did you consult?
>>
>> Very general questions as the above are not very useful,
>> because typically the only concised answer can be yes/no.
>>
>>
>>     > If not, what is an easy and good way to do labels, using an
>>     > add-on package.
>>
>>
>>     > --
>>     > Anupam.


From @nupty@g| @end|ng |rom gm@||@com  Wed Jul 12 17:32:33 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Wed, 12 Jul 2023 21:02:33 +0530
Subject: [R] Variable and value labels
In-Reply-To: <e1f860c1434048b298226d12f55bc2ab@maastrichtuniversity.nl>
References: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
 <25774.24143.211448.339245@stat.math.ethz.ch>
 <CAFL9euk+etiLi37D+kAwavTBAY75Lb0LyRWFFiGdPorUibVm-Q@mail.gmail.com>
 <e1f860c1434048b298226d12f55bc2ab@maastrichtuniversity.nl>
Message-ID: <CAFL9eu=WWAA_kGEcVC_d3tb8RDaJhgfX+3EC8Yj5UxCE_uPELQ@mail.gmail.com>

Very interesting! Thanks!

On Wed, 12 Jul, 2023, 7:58 pm Viechtbauer, Wolfgang (NP), <
wolfgang.viechtbauer at maastrichtuniversity.nl> wrote:

> For value labels, factor() provides the necessary machinery. For variable
> labels, one could make use of comment() (something that not too many people
> seem to know about). To illustrate:
>
> # look at the mtcars dataset
> mtcars
>
> # turn 'am' into a factor and use labels for the two possible levels
> thereof
> mtcars$am <- factor(mtcars$am, levels=c(0,1),
> labels=c("automatic","manual"))
> mtcars
>
> # add a variable label via comment()
> comment(mtcars$am) <- "Type of transmission"
>
> # extract all the variable labels
> sapply(mtcars, comment)
>
> Best,
> Wolfgang
>
> >-----Original Message-----
> >From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Anupam
> Tyagi
> >Sent: Wednesday, 12 July, 2023 14:11
> >To: Martin Maechler
> >Cc: r-help mailing list
> >Subject: Re: [R] Variable and value labels
> >
> >Thanks. Sorry, I have not consulted help pages, but did a web search. Web
> >search results are referring to some package or the other for doing
> labels.
> >Thanks for letting me know that this can be done in base-R. I will try to
> >find the relevant information in R documentation.
> >
> >On Wed, 12 Jul, 2023, 1:33 pm Martin Maechler, <
> maechler at stat.math.ethz.ch>
> >wrote:
> >
> >> >>>>> Anupam Tyagi
> >> >>>>>     on Wed, 12 Jul 2023 09:18:55 +0530 writes:
> >>
> >>     > Hello,
> >>
> >>     > is there an easy way to do variable and value labels (for
> >>     > factor variables) in base-R, without using a package.
> >>
> >> Yes, there are many.
> >> How many help pages (in R , i.e. base-R)  did you consult?
> >>
> >> Very general questions as the above are not very useful,
> >> because typically the only concised answer can be yes/no.
> >>
> >>
> >>     > If not, what is an easy and good way to do labels, using an
> >>     > add-on package.
> >>
> >>
> >>     > --
> >>     > Anupam.
>

	[[alternative HTML version deleted]]


From @vi@e@gross m@iii@g oii gm@ii@com  Wed Jul 12 20:44:42 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Wed, 12 Jul 2023 14:44:42 -0400
Subject: [R] Variable and value labels
In-Reply-To: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
References: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
Message-ID: <005e01d9b4f0$ec59d040$c50d70c0$@gmail.com>

Anupam,

Your question, even after looking at other messages, remains a bit unclear.

What do you mean by "labels"? What you mean by variables and values and how
is that related to factors?

An example or two would be helpful so we can say more than PROBABLY.
Otherwise, you risk having many people here waste lots of time sending
answers to questions you did not ask.

And why an insistence on not using packages? If you are doing something for
a class, sure, you may need to use the basics you were supposedly taught in
class or a textbook. Otherwise, a good set of packages makes code much
easier to write and often more reliable. Realistically, quite a bit of what
some call base R is actually packages deemed useful enough to be included at
startup and that can change.

If you are new to R, note you can attach arbitrary attributes to a variable
and you can have things like named lists where some or all the items have
names as an attribute.

Factors are part of base R and are a completely different concept. You can
use base R to get or set the base levels of a factor and many other things
and there are advantages sometimes in using a vector in factor mode than
plain but also sometimes disadvantages. 

If you ask a more specific and properly explained question, maybe we can
help you.

Specifically, please tell us how you plan on using your labels. As an
example, if I make a named list like this:

mylist <- list(pi=3.14, e=2.7, 666)

then I can access all elements as in mylist[[2]] without a name but
mylist$pi lets me access that item by name and mylist[["e"]] and I can also
change the current values similarly. But without explaining what you want,
my explanation likely is not what you need.

But do note that even if you do not USE a package, you can sometimes use it
indirectly by examining the code for a function you like. If it is primarily
written in R, you may see how it does something and take a part of the code
and use it yourself.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam Tyagi
Sent: Tuesday, July 11, 2023 11:49 PM
To: r-help mailing list <r-help at r-project.org>
Subject: [R] Variable and value labels

Hello,

is there an easy way to do variable and value labels (for factor variables)
in base-R, without using a package. If not, what is an easy and good way to
do labels, using an add-on package.

-- 
Anupam.

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Thu Jul 13 03:17:12 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Thu, 13 Jul 2023 01:17:12 +0000
Subject: [R] ggplot: Can plot graphs with points,
 can't plot graph with points and line
Message-ID: <MW4PR03MB6363CE7C6DFD8C38798773F4E237A@MW4PR03MB6363.namprd03.prod.outlook.com>

I am trying to plot four points, and join the points with lines. I can plot the points, but I can't plot the points and the line.
I hope someone can help my with my ggplot code.

# load ggplot2
if(!require(ggplot2)){install.packages("ggplot2")}
library(ggplot2)

# Create data
Time       <- c("Age.25","Age.35","Age.45","Age.55")
Medians    <-c(128.25,148.75,158.5,168.75)
themedians <- matrix(data=cbind(Time,Medians),nrow=4,ncol=2)
dimnames(themedians) <- list(NULL,c("Time","Median"))
# Convert to dataframe the data format used by ggplot
themedians <- data.frame(themedians)
themedians

# This plot works
ggplot(themedians,aes(x=Time,y=Median))+
  geom_point()
# This plot does not work!
ggplot(themedians,aes(x=Time,y=Median))+
  geom_point()+
  geom_line()

Thank you,
John


From @vi@e@gross m@iii@g oii gm@ii@com  Thu Jul 13 05:20:35 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Wed, 12 Jul 2023 23:20:35 -0400
Subject: [R] Just to you
In-Reply-To: <MW4PR03MB6363CE7C6DFD8C38798773F4E237A@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB6363CE7C6DFD8C38798773F4E237A@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <005101d9b538$fd2b9c30$f782d490$@gmail.com>

John,

I am a tad puzzled at why your code does not work so I tried replicating it.

Let me say you are not plotting what you think. When you plot points using
characters, it LOOKS like it did something but not really. It labels four
equally apart lines (when your data is not linear) and you are getting
nosense. But when you try for lines, using otherwise valid code, it fails.

Based on your earlier post, I sort of understood what you did but find it
roundabout and not necessary. And you made all columns of type character!

You had two perfectly good vectors of type character and floating point. You
eventually wanted a data.frame or the like. I assume your code is an example
of something more complex because normally code like this works fine:

> temp <- data.frame(Time=Time, Median=Medians)
> temp
    Time Median
1 Age.25 128.25
2 Age.35 148.75
3 Age.45 158.50
4 Age.55 168.75

Alternatively, these two lines let you make a data.frame with default names
and rename it, skipping the matrix part as that nonsense makes all the
columns character and you need floating point for a graph!

> temp <- data.frame(Time, Medians)
> temp
    Time Medians
1 Age.25  128.25
2 Age.35  148.75
3 Age.45  158.50
4 Age.55  168.75
> colnames(temp) <- c("Newname1", "Newname2")
> temp
  Newname1 Newname2
1   Age.25   128.25
2   Age.35   148.75
3   Age.45   158.50
4   Age.55   168.75

Now in your code using ggplot, as stated above it only looks like it works.
Using my temp, the points are where they belong. Yes, it breaks when adding
lines because the code is trying to group things as one axis is categorical.
One solution is to tell it not to group:

This works for me:

ggplot(temp,aes(x=Time,y=Median))+
+     geom_point()+
+     geom_line(aes(group=NA))

I cannot attach a graph to messages on this forum but I suggest you modify
your code to include this. Either do not use the matrix intermediate and
keep your numbers as numbers, or convert the darn column back to numeric.

And for now, try my ungrouping.

Alternate suggestion, don't graph as above. Consider three columns and graph
numbers versus numbers adding a label wherever you want:

library(ggplot2)

Time <- c(25, 35, 45, 55)
Timelabels <- paste("age.", Time, sep="")
Medians    <-c(128.25,148.75,158.5,168.75)
mydata=data.frame(Time=Time, Median=Medians)
rownames(mydata) <- Timelabels

ggplot(data=mydata, aes(x=Time, y=Medians)) + geom_line() + geom_point()
+geom_text(label=rownames(mydata))

ggplot(data=mydata, aes(x=Time, y=Medians)) +
  geom_line() + 
  geom_point(size=3, color="red") +
  geom_label(label=rownames(mydata),alpha=0.4)

There are likely better ways but my point is it may be best to plot numbers
against numbers.













-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
Sent: Wednesday, July 12, 2023 9:17 PM
To: r-help at r-project.org (r-help at r-project.org) <r-help at r-project.org>
Subject: [R] ggplot: Can plot graphs with points, can't plot graph with
points and line

I am trying to plot four points, and join the points with lines. I can plot
the points, but I can't plot the points and the line.
I hope someone can help my with my ggplot code.

# load ggplot2
if(!require(ggplot2)){install.packages("ggplot2")}
library(ggplot2)

# Create data
Time       <- c("Age.25","Age.35","Age.45","Age.55")
Medians    <-c(128.25,148.75,158.5,168.75)
themedians <- matrix(data=cbind(Time,Medians),nrow=4,ncol=2)
dimnames(themedians) <- list(NULL,c("Time","Median"))
# Convert to dataframe the data format used by ggplot
themedians <- data.frame(themedians)
themedians

# This plot works
ggplot(themedians,aes(x=Time,y=Median))+
  geom_point()
# This plot does not work!
ggplot(themedians,aes(x=Time,y=Median))+
  geom_point()+
  geom_line()

Thank you,
John

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From drj|m|emon @end|ng |rom gm@||@com  Thu Jul 13 07:10:35 2023
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Thu, 13 Jul 2023 15:10:35 +1000
Subject: [R] ggplot: Can plot graphs with points,
 can't plot graph with points and line
In-Reply-To: <MW4PR03MB6363CE7C6DFD8C38798773F4E237A@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <MW4PR03MB6363CE7C6DFD8C38798773F4E237A@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <CA+8X3fVYLe3UcgNyPcVnW9-L1zZpkhok+ykFNvCyZaxrsAeSTg@mail.gmail.com>

Hi John,
I'm not sure how to do this with ggplot, but:

Time<- c("Age.25","Age.35","Age.45","Age.55")
Medians<-c(128.25,148.75,158.5,168.75)
> is.character(Time)
# [1] TRUE - thus it has no intrinsic numeric value to plot
> is.numeric(Medians)
# [1] TRUE
# coerce Medians to factor and then plot against Time, but can't do point/line
plot(as.factor(Time),Medians,type="p")
# let R determine the x values (1:4) and omit the x-axis
plot(Medians,type="b",xaxt="n")
# add the x-axis with the "Time" labels
axis(1,at=1:4,labels=Time)


On Thu, Jul 13, 2023 at 11:18?AM Sorkin, John <jsorkin at som.umaryland.edu> wrote:
>
> I am trying to plot four points, and join the points with lines. I can plot the points, but I can't plot the points and the line.
> I hope someone can help my with my ggplot code.
>
> # load ggplot2
> if(!require(ggplot2)){install.packages("ggplot2")}
> library(ggplot2)
>
> # Create data
> Time       <- c("Age.25","Age.35","Age.45","Age.55")
> Medians    <-c(128.25,148.75,158.5,168.75)
> themedians <- matrix(data=cbind(Time,Medians),nrow=4,ncol=2)
> dimnames(themedians) <- list(NULL,c("Time","Median"))
> # Convert to dataframe the data format used by ggplot
> themedians <- data.frame(themedians)
> themedians
>
> # This plot works
> ggplot(themedians,aes(x=Time,y=Median))+
>   geom_point()
> # This plot does not work!
> ggplot(themedians,aes(x=Time,y=Median))+
>   geom_point()+
>   geom_line()
>
> Thank you,
> John
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From du@@@@dr|@n @end|ng |rom un|buc@ro  Thu Jul 13 08:08:56 2023
From: du@@@@dr|@n @end|ng |rom un|buc@ro (=?UTF-8?B?QWRyaWFuIER1yJlh?=)
Date: Thu, 13 Jul 2023 09:08:56 +0300
Subject: [R] Variable and value labels
In-Reply-To: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
References: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
Message-ID: <CAJ=0CtA0fcStv-OV_GkviR=05cSY93MnCqH8Myo5tJ+ZX7qM9A@mail.gmail.com>

Anupam,

This is very general, and it also depends on the scientific domain.
Factors do solve the value labels, but they drop the (original) values.
They also lose the connection to the different types of missing values (an
important topic in the social sciences).

Base R provides as much as it can, but it cannot possibly cover all
applications out there, so an add-on package is a must.
A good way to do both variable and value labels, as well as different types
of missing values, is the package "declared".

I hope this helps,
Adrian

On Wed, Jul 12, 2023 at 6:55?AM Anupam Tyagi <anuptyagi at gmail.com> wrote:

> Hello,
>
> is there an easy way to do variable and value labels (for factor variables)
> in base-R, without using a package. If not, what is an easy and good way to
> do labels, using an add-on package.
>
> --
> Anupam.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
Adrian Dusa
University of Bucharest
Romanian Social Data Archive
Soseaua Panduri nr. 90-92
050663 Bucharest sector 5
Romania
https://adriandusa.eu

	[[alternative HTML version deleted]]


From @nupty@g| @end|ng |rom gm@||@com  Thu Jul 13 08:50:31 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Thu, 13 Jul 2023 12:20:31 +0530
Subject: [R] Variable and value labels
In-Reply-To: <005e01d9b4f0$ec59d040$c50d70c0$@gmail.com>
References: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
 <005e01d9b4f0$ec59d040$c50d70c0$@gmail.com>
Message-ID: <CAFL9euk-keAWbHNwvP06zhgQP5JpeixxpvurLnQ+3E_igAv+Jw@mail.gmail.com>

Thanks, Avi. By labels I mean human readable descriptions of variables and
values of factor variables. In a plot, I want labels to be used
for labelling axes on which a factor is plotted, and variable labels for
axes names/descriptions in a plot. I may have borrowed the terminology of
variable and value labels from Stata software, which I use.

I use a lot of packages. So, I have nothing against packages. But for
labelling, I sometimes worry that I may get tied to a package for something
as basic as assigning labels, and some function/packages may not pick up
the labels correctly/well when plotting or displaying results. Maybe I am
worried for nothing.

I have not used R much after 2003. In the past few months I have begun to
use R again with R Studio, mostly for plotting and visualization of data.
So, you can think of me as a new user.

On Thu, 13 Jul 2023 at 00:14, <avi.e.gross at gmail.com> wrote:

> Anupam,
>
> Your question, even after looking at other messages, remains a bit unclear.
>
> What do you mean by "labels"? What you mean by variables and values and how
> is that related to factors?
>
> An example or two would be helpful so we can say more than PROBABLY.
> Otherwise, you risk having many people here waste lots of time sending
> answers to questions you did not ask.
>
> And why an insistence on not using packages? If you are doing something for
> a class, sure, you may need to use the basics you were supposedly taught in
> class or a textbook. Otherwise, a good set of packages makes code much
> easier to write and often more reliable. Realistically, quite a bit of what
> some call base R is actually packages deemed useful enough to be included
> at
> startup and that can change.
>
> If you are new to R, note you can attach arbitrary attributes to a variable
> and you can have things like named lists where some or all the items have
> names as an attribute.
>
> Factors are part of base R and are a completely different concept. You can
> use base R to get or set the base levels of a factor and many other things
> and there are advantages sometimes in using a vector in factor mode than
> plain but also sometimes disadvantages.
>
> If you ask a more specific and properly explained question, maybe we can
> help you.
>
> Specifically, please tell us how you plan on using your labels. As an
> example, if I make a named list like this:
>
> mylist <- list(pi=3.14, e=2.7, 666)
>
> then I can access all elements as in mylist[[2]] without a name but
> mylist$pi lets me access that item by name and mylist[["e"]] and I can also
> change the current values similarly. But without explaining what you want,
> my explanation likely is not what you need.
>
> But do note that even if you do not USE a package, you can sometimes use it
> indirectly by examining the code for a function you like. If it is
> primarily
> written in R, you may see how it does something and take a part of the code
> and use it yourself.
>
>
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam Tyagi
> Sent: Tuesday, July 11, 2023 11:49 PM
> To: r-help mailing list <r-help at r-project.org>
> Subject: [R] Variable and value labels
>
> Hello,
>
> is there an easy way to do variable and value labels (for factor variables)
> in base-R, without using a package. If not, what is an easy and good way to
> do labels, using an add-on package.
>
> --
> Anupam.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>

-- 
Anupam.

	[[alternative HTML version deleted]]


From jrkr|de@u @end|ng |rom gm@||@com  Thu Jul 13 14:30:50 2023
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Thu, 13 Jul 2023 08:30:50 -0400
Subject: [R] ggplot: Can plot graphs with points,
 can't plot graph with points and line
In-Reply-To: <CA+8X3fVYLe3UcgNyPcVnW9-L1zZpkhok+ykFNvCyZaxrsAeSTg@mail.gmail.com>
References: <MW4PR03MB6363CE7C6DFD8C38798773F4E237A@MW4PR03MB6363.namprd03.prod.outlook.com>
 <CA+8X3fVYLe3UcgNyPcVnW9-L1zZpkhok+ykFNvCyZaxrsAeSTg@mail.gmail.com>
Message-ID: <CAKZQJMBPHFagGCOT3HmNZcmqzmecf+LkFs2XLdu74tAuHHY7QQ@mail.gmail.com>

Hi John,

This should do what you want.  I've changed your data.frame name for my own
convenience to "dat1".

###===========================================
dat1  <- data.frame(
Time  = c("Age.25","Age.35","Age.45","Age.55"),
Medians = c(128.25,148.75,158.5,168.75)
)

# create segments data.frame

dat2  <- data.frame(x = dat1$Time[1:3], xend = dat1$Time[2:4],
                    y = dat1$Medians[1:3], yend = dat1$Medians[2:4])



p1  <- ggplot(dat1 ,aes(x = Time, y = Medians)) +
  geom_point()

p1 + geom_segment( x = "Age.25", y = 128.25, xend = "Age.35", yend =
148.75) +
  geom_segment( x = "Age.35", y = 148.75, xend = "Age.45", yend = 158.5) +
  geom_segment( x = "Age.45", y = 158.5, xend = "Age.55", yend = 168.55)


# This solution shamelessly stolen from
##
https://stackoverflow.com/questions/62536499/how-to-draw-multiple-line-segment-in-ggplot
p1 + geom_segment(
  data = dat2,
  mapping = aes(x=x, y=y, xend=xend, yend=yend),
  inherit.aes = FALSE
)


On Thu, 13 Jul 2023 at 01:11, Jim Lemon <drjimlemon at gmail.com> wrote:

> Hi John,
> I'm not sure how to do this with ggplot, but:
>
> Time<- c("Age.25","Age.35","Age.45","Age.55")
> Medians<-c(128.25,148.75,158.5,168.75)
> > is.character(Time)
> # [1] TRUE - thus it has no intrinsic numeric value to plot
> > is.numeric(Medians)
> # [1] TRUE
> # coerce Medians to factor and then plot against Time, but can't do
> point/line
> plot(as.factor(Time),Medians,type="p")
> # let R determine the x values (1:4) and omit the x-axis
> plot(Medians,type="b",xaxt="n")
> # add the x-axis with the "Time" labels
> axis(1,at=1:4,labels=Time)
>
>
> On Thu, Jul 13, 2023 at 11:18?AM Sorkin, John <jsorkin at som.umaryland.edu>
> wrote:
> >
> > I am trying to plot four points, and join the points with lines. I can
> plot the points, but I can't plot the points and the line.
> > I hope someone can help my with my ggplot code.
> >
> > # load ggplot2
> > if(!require(ggplot2)){install.packages("ggplot2")}
> > library(ggplot2)
> >
> > # Create data
> > Time       <- c("Age.25","Age.35","Age.45","Age.55")
> > Medians    <-c(128.25,148.75,158.5,168.75)
> > themedians <- matrix(data=cbind(Time,Medians),nrow=4,ncol=2)
> > dimnames(themedians) <- list(NULL,c("Time","Median"))
> > # Convert to dataframe the data format used by ggplot
> > themedians <- data.frame(themedians)
> > themedians
> >
> > # This plot works
> > ggplot(themedians,aes(x=Time,y=Median))+
> >   geom_point()
> > # This plot does not work!
> > ggplot(themedians,aes(x=Time,y=Median))+
> >   geom_point()+
> >   geom_line()
> >
> > Thank you,
> > John
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From @vi@e@gross m@iii@g oii gm@ii@com  Thu Jul 13 17:21:42 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Thu, 13 Jul 2023 11:21:42 -0400
Subject: [R] Variable and value labels
In-Reply-To: <CAFL9euk-keAWbHNwvP06zhgQP5JpeixxpvurLnQ+3E_igAv+Jw@mail.gmail.com>
References: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
 <005e01d9b4f0$ec59d040$c50d70c0$@gmail.com>
 <CAFL9euk-keAWbHNwvP06zhgQP5JpeixxpvurLnQ+3E_igAv+Jw@mail.gmail.com>
Message-ID: <003601d9b59d$ba876a70$2f963f50$@gmail.com>

Anupam,
 
Thanks for explaining you are talking about factors.
 
I see my friend Adrian has pointed out reasons you may want to use a package he built called ?declared? but my answer will be within the regular R domain as you asked.
 
You should read up a bit on factors in a book, not just blindly searching. A factor, loosely speaking started off as a mixture of the original values as characters and a numbered vector referencing them. When you want the original labels, you can see them and when you want the integer indices you can see them.
 
> greek <- c("Alpha", "Beta", "Gamma", "Alphabeta", "Beta", "Alpha", "Alpha Male")
> greek
[1] "Alpha"      "Beta"       "Gamma"      "Alphabeta"  "Beta"       "Alpha"     
[7] "Alpha Male"
> 
> facgreek <- factor(greek)
> facgreek
[1] Alpha      Beta       Gamma      Alphabeta  Beta       Alpha      Alpha Male
Levels: Alpha Alpha Male Alphabeta Beta Gamma
> 
> levels(facgreek)
[1] "Alpha"      "Alpha Male" "Alphabeta"  "Beta"       "Gamma"     
> labels(facgreek)
[1] "1" "2" "3" "4" "5" "6" "7"
> str(facgreek)
Factor w/ 5 levels "Alpha","Alpha Male",..: 1 4 5 3 4 1 2
> as.numeric(facgreek)
[1] 1 4 5 3 4 1 2
 
You can play with all kinds of things in base R such as getting the nth item as a label, or finding all the items currently mapped to the key of 1 and so on.
 
> as.numeric(facgreek)
[1] 1 4 5 3 4 1 2
> facgreek[5]
[1] Beta
Levels: Alpha Alpha Male Alphabeta Beta Gamma
> facgreek[as.numeric(facgreek) == 1]
[1] Alpha Alpha
 
 
> as.character(facgreek)
[1] "Alpha"      "Beta"       "Gamma"      "Alphabeta"  "Beta"       "Alpha"     
[7] "Alpha Male"
> as.integer(facgreek)
[1] 1 4 5 3 4 1 2
 
 
Now when plotting, it depends on what you use. Base R comes with the usual plot functions as well as others like lattice and there are packages like ggplot2. Some of these may even convert a vector into a factor internally. In some cases, you may want to tell it to use a factor in a certain way, such as by re-ordering the order of the levels of a factor so the display is graphed in that order.
 
And as I answered another person, some graphing functions allow you to do other kinds of labeling on top of the plot that may meet your needs.
 
I may be the opposite of you as I did not use R much before 2003. ?
 
But seriously, we often are like new users even when we once knew a bit about something. The R from before 2003 (or was it S?) has evolved quite a bit. If, like me, you have used lots of other computer languages in between, then they often blend in your mind as they have overlapping paradigms and methods and of course quirks.
 
And, of course, I sympathize with adjusting from other environments designed for somewhat more specific purposes like Stata as R is more of a general purpose programming language. Often people start with those others and then come to R because they need to be able to do more or just fine-tune things or ?
 
 
 
From: Anupam Tyagi <anuptyagi at gmail.com> 
Sent: Thursday, July 13, 2023 2:51 AM
To: avi.e.gross at gmail.com
Cc: r-help at r-project.org
Subject: Re: [R] Variable and value labels
 
Thanks, Avi. By labels I mean human readable descriptions of variables and values of factor variables. In a plot, I want labels to be used for labelling axes on which a factor is plotted, and variable labels for axes names/descriptions in a plot. I may have borrowed the terminology of variable and value labels from Stata software, which I use.
 
I use a lot of packages. So, I have nothing against packages. But for labelling, I sometimes worry that I may get tied to a package for something as basic as assigning labels, and some function/packages may not pick up the labels correctly/well when plotting or displaying results. Maybe I am worried for nothing.
 
I have not used R much after 2003. In the past few months I have begun to use R again with R Studio, mostly for plotting and visualization of data. So, you can think of me as a new user.
 
On Thu, 13 Jul 2023 at 00:14, <avi.e.gross at gmail.com <mailto:avi.e.gross at gmail.com> > wrote:
Anupam,

Your question, even after looking at other messages, remains a bit unclear.

What do you mean by "labels"? What you mean by variables and values and how
is that related to factors?

An example or two would be helpful so we can say more than PROBABLY.
Otherwise, you risk having many people here waste lots of time sending
answers to questions you did not ask.

And why an insistence on not using packages? If you are doing something for
a class, sure, you may need to use the basics you were supposedly taught in
class or a textbook. Otherwise, a good set of packages makes code much
easier to write and often more reliable. Realistically, quite a bit of what
some call base R is actually packages deemed useful enough to be included at
startup and that can change.

If you are new to R, note you can attach arbitrary attributes to a variable
and you can have things like named lists where some or all the items have
names as an attribute.

Factors are part of base R and are a completely different concept. You can
use base R to get or set the base levels of a factor and many other things
and there are advantages sometimes in using a vector in factor mode than
plain but also sometimes disadvantages. 

If you ask a more specific and properly explained question, maybe we can
help you.

Specifically, please tell us how you plan on using your labels. As an
example, if I make a named list like this:

mylist <- list(pi=3.14, e=2.7, 666)

then I can access all elements as in mylist[[2]] without a name but
mylist$pi lets me access that item by name and mylist[["e"]] and I can also
change the current values similarly. But without explaining what you want,
my explanation likely is not what you need.

But do note that even if you do not USE a package, you can sometimes use it
indirectly by examining the code for a function you like. If it is primarily
written in R, you may see how it does something and take a part of the code
and use it yourself.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org <mailto:r-help-bounces at r-project.org> > On Behalf Of Anupam Tyagi
Sent: Tuesday, July 11, 2023 11:49 PM
To: r-help mailing list <r-help at r-project.org <mailto:r-help at r-project.org> >
Subject: [R] Variable and value labels

Hello,

is there an easy way to do variable and value labels (for factor variables)
in base-R, without using a package. If not, what is an easy and good way to
do labels, using an add-on package.

-- 
Anupam.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.



-- 
Anupam.

	[[alternative HTML version deleted]]


From @nupty@g| @end|ng |rom gm@||@com  Fri Jul 14 02:58:53 2023
From: @nupty@g| @end|ng |rom gm@||@com (Anupam Tyagi)
Date: Fri, 14 Jul 2023 06:28:53 +0530
Subject: [R] Variable and value labels
In-Reply-To: <003601d9b59d$ba876a70$2f963f50$@gmail.com>
References: <CAFL9eumQ+U63SyzH6dED+yeEo2xFmFNt1ur8K-hjMdSaa+msew@mail.gmail.com>
 <005e01d9b4f0$ec59d040$c50d70c0$@gmail.com>
 <CAFL9euk-keAWbHNwvP06zhgQP5JpeixxpvurLnQ+3E_igAv+Jw@mail.gmail.com>
 <003601d9b59d$ba876a70$2f963f50$@gmail.com>
Message-ID: <CAFL9eumg3ESy+SERvEWv__44TuyVvNje466cjoBWG_nmTBzn5Q@mail.gmail.com>

Thanks again, Avi. I will read up more on factors.

On Thu, 13 Jul, 2023, 8:51 pm , <avi.e.gross at gmail.com> wrote:

> Anupam,
>
>
>
> Thanks for explaining you are talking about factors.
>
>
>
> I see my friend Adrian has pointed out reasons you may want to use a
> package he built called ?declared? but my answer will be within the regular
> R domain as you asked.
>
>
>
> You should read up a bit on factors in a book, not just blindly searching.
> A factor, loosely speaking started off as a mixture of the original values
> as characters and a numbered vector referencing them. When you want the
> original labels, you can see them and when you want the integer indices you
> can see them.
>
>
>
> > greek <- c("Alpha", "Beta", "Gamma", "Alphabeta", "Beta", "Alpha",
> "Alpha Male")
>
> > greek
>
> [1] "Alpha"      "Beta"       "Gamma"      "Alphabeta"  "Beta"
> "Alpha"
>
> [7] "Alpha Male"
>
> >
>
> > facgreek <- factor(greek)
>
> > facgreek
>
> [1] Alpha      Beta       Gamma      Alphabeta  Beta       Alpha
> Alpha Male
>
> Levels: Alpha Alpha Male Alphabeta Beta Gamma
>
> >
>
> > levels(facgreek)
>
> [1] "Alpha"      "Alpha Male" "Alphabeta"  "Beta"       "Gamma"
>
> > labels(facgreek)
>
> [1] "1" "2" "3" "4" "5" "6" "7"
>
> > str(facgreek)
>
> Factor w/ 5 levels "Alpha","Alpha Male",..: 1 4 5 3 4 1 2
>
> > as.numeric(facgreek)
>
> [1] 1 4 5 3 4 1 2
>
>
>
> You can play with all kinds of things in base R such as getting the nth
> item as a label, or finding all the items currently mapped to the key of 1
> and so on.
>
>
>
> > as.numeric(facgreek)
>
> [1] 1 4 5 3 4 1 2
>
> > facgreek[5]
>
> [1] Beta
>
> Levels: Alpha Alpha Male Alphabeta Beta Gamma
>
> > facgreek[as.numeric(facgreek) == 1]
>
> [1] Alpha Alpha
>
>
>
>
>
> > as.character(facgreek)
>
> [1] "Alpha"      "Beta"       "Gamma"      "Alphabeta"  "Beta"       "Alpha"
>
> [7] "Alpha Male"
>
> > as.integer(facgreek)
>
> [1] 1 4 5 3 4 1 2
>
>
>
>
>
> Now when plotting, it depends on what you use. Base R comes with the usual
> plot functions as well as others like lattice and there are packages like
> ggplot2. Some of these may even convert a vector into a factor internally.
> In some cases, you may want to tell it to use a factor in a certain way,
> such as by re-ordering the order of the levels of a factor so the display
> is graphed in that order.
>
>
>
> And as I answered another person, some graphing functions allow you to do
> other kinds of labeling on top of the plot that may meet your needs.
>
>
>
> I may be the opposite of you as I did not use R much before 2003. ?
>
>
>
> But seriously, we often are like new users even when we once knew a bit
> about something. The R from before 2003 (or was it S?) has evolved quite a
> bit. If, like me, you have used lots of other computer languages in
> between, then they often blend in your mind as they have overlapping
> paradigms and methods and of course quirks.
>
>
>
> And, of course, I sympathize with adjusting from other environments
> designed for somewhat more specific purposes like Stata as R is more of a
> general purpose programming language. Often people start with those others
> and then come to R because they need to be able to do more or just
> fine-tune things or ?
>
>
>
>
>
>
>
> *From:* Anupam Tyagi <anuptyagi at gmail.com>
> *Sent:* Thursday, July 13, 2023 2:51 AM
> *To:* avi.e.gross at gmail.com
> *Cc:* r-help at r-project.org
> *Subject:* Re: [R] Variable and value labels
>
>
>
> Thanks, Avi. By labels I mean human readable descriptions of variables and
> values of factor variables. In a plot, I want labels to be used
> for labelling axes on which a factor is plotted, and variable labels for
> axes names/descriptions in a plot. I may have borrowed the terminology of
> variable and value labels from Stata software, which I use.
>
>
>
> I use a lot of packages. So, I have nothing against packages. But for
> labelling, I sometimes worry that I may get tied to a package for something
> as basic as assigning labels, and some function/packages may not pick up
> the labels correctly/well when plotting or displaying results. Maybe I am
> worried for nothing.
>
>
>
> I have not used R much after 2003. In the past few months I have begun to
> use R again with R Studio, mostly for plotting and visualization of data.
> So, you can think of me as a new user.
>
>
>
> On Thu, 13 Jul 2023 at 00:14, <avi.e.gross at gmail.com> wrote:
>
> Anupam,
>
> Your question, even after looking at other messages, remains a bit unclear.
>
> What do you mean by "labels"? What you mean by variables and values and how
> is that related to factors?
>
> An example or two would be helpful so we can say more than PROBABLY.
> Otherwise, you risk having many people here waste lots of time sending
> answers to questions you did not ask.
>
> And why an insistence on not using packages? If you are doing something for
> a class, sure, you may need to use the basics you were supposedly taught in
> class or a textbook. Otherwise, a good set of packages makes code much
> easier to write and often more reliable. Realistically, quite a bit of what
> some call base R is actually packages deemed useful enough to be included
> at
> startup and that can change.
>
> If you are new to R, note you can attach arbitrary attributes to a variable
> and you can have things like named lists where some or all the items have
> names as an attribute.
>
> Factors are part of base R and are a completely different concept. You can
> use base R to get or set the base levels of a factor and many other things
> and there are advantages sometimes in using a vector in factor mode than
> plain but also sometimes disadvantages.
>
> If you ask a more specific and properly explained question, maybe we can
> help you.
>
> Specifically, please tell us how you plan on using your labels. As an
> example, if I make a named list like this:
>
> mylist <- list(pi=3.14, e=2.7, 666)
>
> then I can access all elements as in mylist[[2]] without a name but
> mylist$pi lets me access that item by name and mylist[["e"]] and I can also
> change the current values similarly. But without explaining what you want,
> my explanation likely is not what you need.
>
> But do note that even if you do not USE a package, you can sometimes use it
> indirectly by examining the code for a function you like. If it is
> primarily
> written in R, you may see how it does something and take a part of the code
> and use it yourself.
>
>
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Anupam Tyagi
> Sent: Tuesday, July 11, 2023 11:49 PM
> To: r-help mailing list <r-help at r-project.org>
> Subject: [R] Variable and value labels
>
> Hello,
>
> is there an easy way to do variable and value labels (for factor variables)
> in base-R, without using a package. If not, what is an easy and good way to
> do labels, using an add-on package.
>
> --
> Anupam.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>
>
>
> --
>
> Anupam.
>

	[[alternative HTML version deleted]]


