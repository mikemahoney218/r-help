From n|ckmwr@y @end|ng |rom gm@||@com  Sat Apr  1 20:05:36 2023
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Sat, 1 Apr 2023 19:05:36 +0100
Subject: [R] weird things in seqMK() and sqmk()
Message-ID: <CABxY9BO-07koJ61186rLpDYWWLRSPRzGkTZbbJ8jzz8=KkY9mA@mail.gmail.com>

Hello  The other say I posted a question about altering confidence limits
in the seqMK() function  in the pheno package.  I didn't get any bites but
in any case I've been trying to use this function.  It seems to me to give
very odd results - sometimes identifying 8 or 9 changepoints in a
relatively short vector of maybe 40 elements, and at other times not giving
any changepoints at all, despite visually there appearing to be
changepoints and other changepoint algorithms (pettitt etc) saying that
there are other changepoints.  Apart from the cran vignette there doesn't
seem to be anything on this function

Has anyone else used the seqMK() function and if so, have they noticed any
weird behaviour with it?

I've also lookedf at sqmk() in trendchange function.  This also seems to
give odd results, and not ones consistent with seqMK() results either

Again has anyone used these and do they know of any sites with further ifo,
as it seems v sparse about these two functions
Thanks Nick Wray

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Apr  1 22:41:51 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 1 Apr 2023 16:41:51 -0400
Subject: [R] weird things in seqMK() and sqmk()
In-Reply-To: <CABxY9BO-07koJ61186rLpDYWWLRSPRzGkTZbbJ8jzz8=KkY9mA@mail.gmail.com>
References: <CABxY9BO-07koJ61186rLpDYWWLRSPRzGkTZbbJ8jzz8=KkY9mA@mail.gmail.com>
Message-ID: <c2a31cd5-5e3e-da68-6773-b63db4f6c13b@gmail.com>

There are references listed on the help page for seqMK.  I'd start with 
those.

If you can't figure it out from that, then contacting the pheno package 
maintainer or author of the package would probably be the best step. 
This group really isn't set up for supporting contributed packages, 
though sometimes knowledgeable people here will comment.

Duncan Murdoch

On 01/04/2023 2:05 p.m., Nick Wray wrote:
> Hello  The other say I posted a question about altering confidence limits
> in the seqMK() function  in the pheno package.  I didn't get any bites but
> in any case I've been trying to use this function.  It seems to me to give
> very odd results - sometimes identifying 8 or 9 changepoints in a
> relatively short vector of maybe 40 elements, and at other times not giving
> any changepoints at all, despite visually there appearing to be
> changepoints and other changepoint algorithms (pettitt etc) saying that
> there are other changepoints.  Apart from the cran vignette there doesn't
> seem to be anything on this function
> 
> Has anyone else used the seqMK() function and if so, have they noticed any
> weird behaviour with it?
> 
> I've also lookedf at sqmk() in trendchange function.  This also seems to
> give odd results, and not ones consistent with seqMK() results either
> 
> Again has anyone used these and do they know of any sites with further ifo,
> as it seems v sparse about these two functions
> Thanks Nick Wray
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @n@@j@m@hed1994 @end|ng |rom gm@||@com  Sun Apr  2 17:09:22 2023
From: @n@@j@m@hed1994 @end|ng |rom gm@||@com (Anas Jamshed)
Date: Sun, 2 Apr 2023 20:09:22 +0500
Subject: [R] Count matrix of GSE146049
Message-ID: <CAG0CrLgJ7sejknyeBm8SXVJ-13ZWGccMBYx4MiZQCKiiuUi_jw@mail.gmail.com>

I want to get the count matrix of genes from
https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE146049. Is it
possible for GSE146049? After getting counts, I want to do TMM
normalization.

	[[alternative HTML version deleted]]


From m@rc_grt @end|ng |rom y@hoo@|r  Sun Apr  2 17:18:50 2023
From: m@rc_grt @end|ng |rom y@hoo@|r (Marc Girondot)
Date: Sun, 2 Apr 2023 17:18:50 +0200
Subject: [R] Count matrix of GSE146049
In-Reply-To: <CAG0CrLgJ7sejknyeBm8SXVJ-13ZWGccMBYx4MiZQCKiiuUi_jw@mail.gmail.com>
References: <CAG0CrLgJ7sejknyeBm8SXVJ-13ZWGccMBYx4MiZQCKiiuUi_jw@mail.gmail.com>
Message-ID: <88b2ab2a-b41b-a8ba-ada0-1c6956236471@yahoo.fr>

Dear Anas Jamshed,

This is a list for R, not for specific genomic question using R.

You will have more chance to have answers using a genomic list.

And when you ask question, it is better to not use abbreviation that 
only people from that field will understand: TMM ?

Marc

Le 02/04/2023 ? 17:09, Anas Jamshed a ?crit?:
> I want to get the count matrix of genes from
> https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE146049. Is it
> possible for GSE146049? After getting counts, I want to do TMM
> normalization.
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From peter@|@ng|e|der @end|ng |rom gm@||@com  Sun Apr  2 18:28:09 2023
From: peter@|@ng|e|der @end|ng |rom gm@||@com (Peter Langfelder)
Date: Mon, 3 Apr 2023 00:28:09 +0800
Subject: [R] Count matrix of GSE146049
In-Reply-To: <CAG0CrLgJ7sejknyeBm8SXVJ-13ZWGccMBYx4MiZQCKiiuUi_jw@mail.gmail.com>
References: <CAG0CrLgJ7sejknyeBm8SXVJ-13ZWGccMBYx4MiZQCKiiuUi_jw@mail.gmail.com>
Message-ID: <CA+hbrhXW5DyL20oVDA7+=n4jcqL4W_Kk_6bQNYNro6NoTqWs0Q@mail.gmail.com>

It's a microarray data set, so I don't think you would want to apply
an RNA-seq pipeline. You'd be better off applying a normalization
appropriate for this type of microarray data.

HTH,

Peter

On Sun, Apr 2, 2023 at 11:09?PM Anas Jamshed <anasjamshed1994 at gmail.com> wrote:
>
> I want to get the count matrix of genes from
> https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE146049. Is it
> possible for GSE146049? After getting counts, I want to do TMM
> normalization.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @n@@j@m@hed1994 @end|ng |rom gm@||@com  Sun Apr  2 18:30:15 2023
From: @n@@j@m@hed1994 @end|ng |rom gm@||@com (Anas Jamshed)
Date: Sun, 2 Apr 2023 21:30:15 +0500
Subject: [R] Count matrix of GSE146049
In-Reply-To: <CA+hbrhXW5DyL20oVDA7+=n4jcqL4W_Kk_6bQNYNro6NoTqWs0Q@mail.gmail.com>
References: <CAG0CrLgJ7sejknyeBm8SXVJ-13ZWGccMBYx4MiZQCKiiuUi_jw@mail.gmail.com>
 <CA+hbrhXW5DyL20oVDA7+=n4jcqL4W_Kk_6bQNYNro6NoTqWs0Q@mail.gmail.com>
Message-ID: <CAG0CrLiC+WTG-Aa0XMZNAih-gDRzKyYJBhnMhdH18JMwuAszBw@mail.gmail.com>

How can I subscribe to R genomic list?

On Sun, 2 Apr 2023, 9:28 pm Peter Langfelder, <peter.langfelder at gmail.com>
wrote:

> It's a microarray data set, so I don't think you would want to apply
> an RNA-seq pipeline. You'd be better off applying a normalization
> appropriate for this type of microarray data.
>
> HTH,
>
> Peter
>
> On Sun, Apr 2, 2023 at 11:09?PM Anas Jamshed <anasjamshed1994 at gmail.com>
> wrote:
> >
> > I want to get the count matrix of genes from
> > https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE146049. Is it
> > possible for GSE146049? After getting counts, I want to do TMM
> > normalization.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sun Apr  2 21:12:59 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 2 Apr 2023 12:12:59 -0700
Subject: [R] Count matrix of GSE146049
In-Reply-To: <CAG0CrLiC+WTG-Aa0XMZNAih-gDRzKyYJBhnMhdH18JMwuAszBw@mail.gmail.com>
References: <CAG0CrLgJ7sejknyeBm8SXVJ-13ZWGccMBYx4MiZQCKiiuUi_jw@mail.gmail.com>
 <CA+hbrhXW5DyL20oVDA7+=n4jcqL4W_Kk_6bQNYNro6NoTqWs0Q@mail.gmail.com>
 <CAG0CrLiC+WTG-Aa0XMZNAih-gDRzKyYJBhnMhdH18JMwuAszBw@mail.gmail.com>
Message-ID: <CAGxFJbR=Y-QXzJ0HfmU-MV-R-xVHqksvC7OuthVmDykBGzZoiQ@mail.gmail.com>

Go to Bioconductor.org

-- Bert

On Sun, Apr 2, 2023 at 9:38?AM Anas Jamshed <anasjamshed1994 at gmail.com> wrote:
>
> How can I subscribe to R genomic list?
>
> On Sun, 2 Apr 2023, 9:28 pm Peter Langfelder, <peter.langfelder at gmail.com>
> wrote:
>
> > It's a microarray data set, so I don't think you would want to apply
> > an RNA-seq pipeline. You'd be better off applying a normalization
> > appropriate for this type of microarray data.
> >
> > HTH,
> >
> > Peter
> >
> > On Sun, Apr 2, 2023 at 11:09?PM Anas Jamshed <anasjamshed1994 at gmail.com>
> > wrote:
> > >
> > > I want to get the count matrix of genes from
> > > https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE146049. Is it
> > > possible for GSE146049? After getting counts, I want to do TMM
> > > normalization.
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @@mue|@gr@nje@ud @end|ng |rom |n@erm@|r  Sun Apr  2 23:39:13 2023
From: @@mue|@gr@nje@ud @end|ng |rom |n@erm@|r (Samuel Granjeaud IR/Inserm)
Date: Sun, 2 Apr 2023 23:39:13 +0200
Subject: [R] Should help of estimate in t.test be corrected?
Message-ID: <66fec2cf-c0c9-d821-f32d-8b6222fc5be3@inserm.fr>

Hi,

Not important, but IMHO the estimate component of the t.test holds an 
estimate of mean of each group, never a difference. The doc says 
"estimate??? the estimated mean or difference in means depending on 
whether it was a one-sample test or a two-sample test."

 > t.test(0:4)$estimate
mean of x
 ??????? 2
 > t.test(0:4, 5:9)$estimate
mean of x mean of y
 ??????? 2???????? 7

Best,
Samuel


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Apr  3 12:10:09 2023
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 3 Apr 2023 10:10:09 +0000
Subject: [R] Should help of estimate in t.test be corrected?
In-Reply-To: <66fec2cf-c0c9-d821-f32d-8b6222fc5be3@inserm.fr>
References: <66fec2cf-c0c9-d821-f32d-8b6222fc5be3@inserm.fr>
Message-ID: <6a6a75959ad04255aaae478b5ba7eaf6@SRVEXCHCM1302.precheza.cz>

Hi

You need to use paired option

> t.test(x=0:4, y=sample(5:9), paired=TRUE)$estimate
mean difference
             -5

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Samuel Granjeaud
> IR/Inserm
> Sent: Sunday, April 2, 2023 11:39 PM
> To: r-help at r-project.org
> Subject: [R] Should help of estimate in t.test be corrected?
>
> Hi,
>
> Not important, but IMHO the estimate component of the t.test holds an
> estimate of mean of each group, never a difference. The doc says
> "estimate    the estimated mean or difference in means depending on whether 
> it
> was a one-sample test or a two-sample test."
>
>  > t.test(0:4)$estimate
> mean of x
>          2
>  > t.test(0:4, 5:9)$estimate
> mean of x mean of y
>          2         7
>
> Best,
> Samuel
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From jr@| @end|ng |rom po@teo@no  Mon Apr  3 14:08:38 2023
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Mon,  3 Apr 2023 12:08:38 +0000
Subject: [R] seqMK function
In-Reply-To: <CABxY9BPFU1YB90Vf8RUKusRJ1BS3P+VmqV==NghBxcvqss9CCA@mail.gmail.com>
References: <CABxY9BPFU1YB90Vf8RUKusRJ1BS3P+VmqV==NghBxcvqss9CCA@mail.gmail.com>
Message-ID: <ZCrBxg7xGcDd14dk@posteo.no>

Dear Nick,

Looking at dput(pheno::seqMK), 
dput(pheno::tau), and [1], I think you 
need to change the function pheno::tau 
to change the confidence level ... R

[1] https://mannkendall.github.io/about.html#application-of-the-seasonal-mann-kendall-test


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Apr  3 14:23:12 2023
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 3 Apr 2023 12:23:12 +0000
Subject: [R] Should help of estimate in t.test be corrected?
In-Reply-To: <4a9791fc-17b5-48d8-3ba2-96fa1823c7c5@inserm.fr>
References: <66fec2cf-c0c9-d821-f32d-8b6222fc5be3@inserm.fr>
 <6a6a75959ad04255aaae478b5ba7eaf6@SRVEXCHCM1302.precheza.cz>
 <4a9791fc-17b5-48d8-3ba2-96fa1823c7c5@inserm.fr>
Message-ID: <34dad510cf2140b0a9f4f14fa00bc4c2@SRVEXCHCM1302.precheza.cz>

Hallo, 
you are probably right that 

"the estimated mean or difference in means depending on whether it was a one-sample test or a two-sample test"

should be rephrased to

"the estimated mean or difference in means depending on whether it was a one-sample test, two-sample test or two sample paired test"

Cheers
Petr

> -----Original Message-----
> From: Samuel Granjeaud IR/Inserm <samuel.granjeaud at inserm.fr>
> Sent: Monday, April 3, 2023 1:25 PM
> To: PIKAL Petr <petr.pikal at precheza.cz>; r-help at r-project.org
> Subject: Re: [R] Should help of estimate in t.test be corrected?
> 
> Hi
> 
> Thanks for your feedback. I didn't think about that.
> 
> Still, the mean difference is computed for paired, not because there are two
> samples. IMHO, the help should be updated.
> 
> Best,
> Samuel
> 
> Le 2023-04-03 ? 12:10, PIKAL Petr a ?crit :
> > Hi
> >
> > You need to use paired option
> >
> >> t.test(x=0:4, y=sample(5:9), paired=TRUE)$estimate
> > mean difference
> >               -5
> >
> > Cheers
> > Petr
> >
> >> -----Original Message-----
> >> From: R-help <r-help-bounces at r-project.org> On Behalf Of Samuel
> >> Granjeaud IR/Inserm
> >> Sent: Sunday, April 2, 2023 11:39 PM
> >> To: r-help at r-project.org
> >> Subject: [R] Should help of estimate in t.test be corrected?
> >>
> >> Hi,
> >>
> >> Not important, but IMHO the estimate component of the t.test holds an
> >> estimate of mean of each group, never a difference. The doc says
> >> "estimate    the estimated mean or difference in means depending on
> whether
> >> it
> >> was a one-sample test or a two-sample test."
> >>
> >>   > t.test(0:4)$estimate
> >> mean of x
> >>           2
> >>   > t.test(0:4, 5:9)$estimate
> >> mean of x mean of y
> >>           2         7
> >>
> >> Best,
> >> Samuel
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.

From j@p@rk4 @end|ng |rom u|c@edu  Mon Apr  3 17:08:59 2023
From: j@p@rk4 @end|ng |rom u|c@edu (Sparks, John)
Date: Mon, 3 Apr 2023 15:08:59 +0000
Subject: [R] Simple Stacking of Two Columns
Message-ID: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>

Hi R-Helpers,

Sorry to bother you, but I have a simple task that I can't figure out how to do.

For example, I have some names in two columns

NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))

and I simply want to get a single column
NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
> NamesLong
  Names
1   Tom
2  Dick
3 Larry
4 Curly


Stack produces an error
NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
Error in if (drop) { : argument is of length zero

So does bind_rows
> NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
Error in `dplyr::bind_rows()`:
! Argument 1 must be a data frame or a named atomic vector.
Run `rlang::last_error()` to see where the error occurred.

I tried making separate dataframes to get around the error in bind_rows but it puts the data in two different columns
Name1<-data.frame(c("Tom","Dick"))
Name2<-data.frame(c("Larry","Curly"))
NamesLong<-dplyr::bind_rows(Name1,Name2)
> NamesLong
  c..Tom....Dick.. c..Larry....Curly..
1              Tom                <NA>
2             Dick                <NA>
3             <NA>               Larry
4             <NA>               Curly

gather makes no change to the data
NamesLong<-gather(NamesWide,Name1,Name2)
> NamesLong
  Name1 Name2
1   Tom Larry
2  Dick Curly


Please help me solve what should be a very simple problem.

Thanks,
John Sparks





	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Mon Apr  3 17:36:13 2023
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 3 Apr 2023 18:36:13 +0300
Subject: [R] Simple Stacking of Two Columns
In-Reply-To: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
References: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
Message-ID: <66199F30-6AF1-4C4A-BF4A-6F5B1DFC8BDE@gmail.com>

pivot_longer()

Sent from my iPhone

> On 3 Apr 2023, at 18:09, Sparks, John <jspark4 at uic.edu> wrote:
> 
> ?Hi R-Helpers,
> 
> Sorry to bother you, but I have a simple task that I can't figure out how to do.
> 
> For example, I have some names in two columns
> 
> NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
> 
> and I simply want to get a single column
> NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
>> NamesLong
>  Names
> 1   Tom
> 2  Dick
> 3 Larry
> 4 Curly
> 
> 
> Stack produces an error
> NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
> Error in if (drop) { : argument is of length zero
> 
> So does bind_rows
>> NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
> Error in `dplyr::bind_rows()`:
> ! Argument 1 must be a data frame or a named atomic vector.
> Run `rlang::last_error()` to see where the error occurred.
> 
> I tried making separate dataframes to get around the error in bind_rows but it puts the data in two different columns
> Name1<-data.frame(c("Tom","Dick"))
> Name2<-data.frame(c("Larry","Curly"))
> NamesLong<-dplyr::bind_rows(Name1,Name2)
>> NamesLong
>  c..Tom....Dick.. c..Larry....Curly..
> 1              Tom                <NA>
> 2             Dick                <NA>
> 3             <NA>               Larry
> 4             <NA>               Curly
> 
> gather makes no change to the data
> NamesLong<-gather(NamesWide,Name1,Name2)
>> NamesLong
>  Name1 Name2
> 1   Tom Larry
> 2  Dick Curly
> 
> 
> Please help me solve what should be a very simple problem.
> 
> Thanks,
> John Sparks
> 
> 
> 
> 
> 
>    [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@rc_@chw@rtz @end|ng |rom me@com  Mon Apr  3 17:44:21 2023
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Mon, 3 Apr 2023 11:44:21 -0400
Subject: [R] Simple Stacking of Two Columns
In-Reply-To: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
References: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
Message-ID: <etPan.642af455.4a1014c4.57e@me.com>

Hi,

You were on the right track using stack(), but you just pass the entire data frame as a single object, not the separate columns:

> stack(NamesWide)
? values ? ind
1 ? ?Tom Name1
2 ? Dick Name1
3 ?Larry Name2
4 ?Curly Name2

Note that stack also returns the index (second column of 'ind' values), which tells you which column in the source data frame the stacked values originated from.

Thus, if you just want the actual data:

> stack(NamesWide)$values
[1] "Tom" ? "Dick" ?"Larry" "Curly"

returns a vector, or:

> stack(NamesWide)[, 1, drop = FALSE]
? values
1 ? ?Tom
2 ? Dick
3 ?Larry
4 ?Curly

which returns a data frame with a single column named 'values'.

Regards,

Marc Schwartz


On April 3, 2023 at 11:08:59 AM, Sparks, John (jspark4 at uic.edu (mailto:jspark4 at uic.edu)) wrote:

> Hi R-Helpers,
>
> Sorry to bother you, but I have a simple task that I can't figure out how to do.
>
> For example, I have some names in two columns
>
> NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
>
> and I simply want to get a single column
> NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
> > NamesLong
> Names
> 1 Tom
> 2 Dick
> 3 Larry
> 4 Curly
>
>
> Stack produces an error
> NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
> Error in if (drop) { : argument is of length zero
>
> So does bind_rows
> > NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
> Error in `dplyr::bind_rows()`:
> ! Argument 1 must be a data frame or a named atomic vector.
> Run `rlang::last_error()` to see where the error occurred.
>
> I tried making separate dataframes to get around the error in bind_rows but it puts the data in two different columns
> Name1<-data.frame(c("Tom","Dick"))
> Name2<-data.frame(c("Larry","Curly"))
> NamesLong<-dplyr::bind_rows(Name1,Name2)
> > NamesLong
> c..Tom....Dick.. c..Larry....Curly..
> 1 Tom  
> 2 Dick  
> 3 Larry
> 4 Curly
>
> gather makes no change to the data
> NamesLong<-gather(NamesWide,Name1,Name2)
> > NamesLong
> Name1 Name2
> 1 Tom Larry
> 2 Dick Curly
>
>
> Please help me solve what should be a very simple problem.
>
> Thanks,
> John Sparks
>
>
>
>
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Mon Apr  3 18:23:33 2023
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Mon, 3 Apr 2023 16:23:33 +0000
Subject: [R] Simple Stacking of Two Columns
In-Reply-To: <etPan.642af455.4a1014c4.57e@me.com>
References: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
 <etPan.642af455.4a1014c4.57e@me.com>
Message-ID: <SN4PR22MB28240D4AD51A007E60E692D5CF929@SN4PR22MB2824.namprd22.prod.outlook.com>

My first thought was pivot_longer, and stack() is new to me. 
How about append(c1,c2) as another solution? Or data.frame(append(c1,c2)) if you want that form.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Marc Schwartz via R-help
Sent: Monday, April 3, 2023 11:44 AM
To: Sparks, John <jspark4 at uic.edu>; r-help at r-project.org
Subject: Re: [R] Simple Stacking of Two Columns

[External Email]

Hi,

You were on the right track using stack(), but you just pass the entire data frame as a single object, not the separate columns:

> stack(NamesWide)
  values   ind
1    Tom Name1
2   Dick Name1
3  Larry Name2
4  Curly Name2

Note that stack also returns the index (second column of 'ind' values), which tells you which column in the source data frame the stacked values originated from.

Thus, if you just want the actual data:

> stack(NamesWide)$values
[1] "Tom"   "Dick"  "Larry" "Curly"

returns a vector, or:

> stack(NamesWide)[, 1, drop = FALSE]
  values
1    Tom
2   Dick
3  Larry
4  Curly

which returns a data frame with a single column named 'values'.

Regards,

Marc Schwartz


On April 3, 2023 at 11:08:59 AM, Sparks, John (jspark4 at uic.edu (mailto:jspark4 at uic.edu)) wrote:

> Hi R-Helpers,
>
> Sorry to bother you, but I have a simple task that I can't figure out how to do.
>
> For example, I have some names in two columns
>
> NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
>
> and I simply want to get a single column
> NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
> > NamesLong
> Names
> 1 Tom
> 2 Dick
> 3 Larry
> 4 Curly
>
>
> Stack produces an error
> NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
> Error in if (drop) { : argument is of length zero
>
> So does bind_rows
> > NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
> Error in `dplyr::bind_rows()`:
> ! Argument 1 must be a data frame or a named atomic vector.
> Run `rlang::last_error()` to see where the error occurred.
>
> I tried making separate dataframes to get around the error in bind_rows but it puts the data in two different columns
> Name1<-data.frame(c("Tom","Dick"))
> Name2<-data.frame(c("Larry","Curly"))
> NamesLong<-dplyr::bind_rows(Name1,Name2)
> > NamesLong
> c..Tom....Dick.. c..Larry....Curly..
> 1 Tom
> 2 Dick
> 3 Larry
> 4 Curly
>
> gather makes no change to the data
> NamesLong<-gather(NamesWide,Name1,Name2)
> > NamesLong
> Name1 Name2
> 1 Tom Larry
> 2 Dick Curly
>
>
> Please help me solve what should be a very simple problem.
>
> Thanks,
> John Sparks
>
>
>
>
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7Ce0f22e022c0b48d2766408db345aa062%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161336072628296%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=MEaORpaFihsIHu3Iu2GwO15ey%2BvZP3Wxa6UiS3g0PyQ%3D&reserved=0
> PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7Ce0f22e022c0b48d2766408db345aa062%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161336072628296%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=ZwKZkaGoEVMu8Jp%2BbcIj%2FLVi9%2Fwug%2Fi48uarb8yg5KY%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7Ce0f22e022c0b48d2766408db345aa062%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161336072628296%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=MEaORpaFihsIHu3Iu2GwO15ey%2BvZP3Wxa6UiS3g0PyQ%3D&reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7Ce0f22e022c0b48d2766408db345aa062%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161336072628296%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=ZwKZkaGoEVMu8Jp%2BbcIj%2FLVi9%2Fwug%2Fi48uarb8yg5KY%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Apr  3 18:26:10 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 03 Apr 2023 09:26:10 -0700
Subject: [R] Simple Stacking of Two Columns
In-Reply-To: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
References: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
Message-ID: <D148C450-D53D-4962-9043-8F5416AD510D@dcn.davis.ca.us>

unname(unlist(NamesWide))

On April 3, 2023 8:08:59 AM PDT, "Sparks, John" <jspark4 at uic.edu> wrote:
>Hi R-Helpers,
>
>Sorry to bother you, but I have a simple task that I can't figure out how to do.
>
>For example, I have some names in two columns
>
>NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
>
>and I simply want to get a single column
>NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
>> NamesLong
>  Names
>1   Tom
>2  Dick
>3 Larry
>4 Curly
>
>
>Stack produces an error
>NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
>Error in if (drop) { : argument is of length zero
>
>So does bind_rows
>> NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
>Error in `dplyr::bind_rows()`:
>! Argument 1 must be a data frame or a named atomic vector.
>Run `rlang::last_error()` to see where the error occurred.
>
>I tried making separate dataframes to get around the error in bind_rows but it puts the data in two different columns
>Name1<-data.frame(c("Tom","Dick"))
>Name2<-data.frame(c("Larry","Curly"))
>NamesLong<-dplyr::bind_rows(Name1,Name2)
>> NamesLong
>  c..Tom....Dick.. c..Larry....Curly..
>1              Tom                <NA>
>2             Dick                <NA>
>3             <NA>               Larry
>4             <NA>               Curly
>
>gather makes no change to the data
>NamesLong<-gather(NamesWide,Name1,Name2)
>> NamesLong
>  Name1 Name2
>1   Tom Larry
>2  Dick Curly
>
>
>Please help me solve what should be a very simple problem.
>
>Thanks,
>John Sparks
>
>
>
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @@mue|@gr@nje@ud @end|ng |rom |n@erm@|r  Mon Apr  3 13:24:55 2023
From: @@mue|@gr@nje@ud @end|ng |rom |n@erm@|r (Samuel Granjeaud IR/Inserm)
Date: Mon, 3 Apr 2023 13:24:55 +0200
Subject: [R] Should help of estimate in t.test be corrected?
In-Reply-To: <6a6a75959ad04255aaae478b5ba7eaf6@SRVEXCHCM1302.precheza.cz>
References: <66fec2cf-c0c9-d821-f32d-8b6222fc5be3@inserm.fr>
 <6a6a75959ad04255aaae478b5ba7eaf6@SRVEXCHCM1302.precheza.cz>
Message-ID: <4a9791fc-17b5-48d8-3ba2-96fa1823c7c5@inserm.fr>

Hi

Thanks for your feedback. I didn't think about that.

Still, the mean difference is computed for paired, not because there are 
two samples. IMHO, the help should be updated.

Best,
Samuel

Le 2023-04-03 ? 12:10, PIKAL Petr a ?crit?:
> Hi
>
> You need to use paired option
>
>> t.test(x=0:4, y=sample(5:9), paired=TRUE)$estimate
> mean difference
>               -5
>
> Cheers
> Petr
>
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Samuel Granjeaud
>> IR/Inserm
>> Sent: Sunday, April 2, 2023 11:39 PM
>> To: r-help at r-project.org
>> Subject: [R] Should help of estimate in t.test be corrected?
>>
>> Hi,
>>
>> Not important, but IMHO the estimate component of the t.test holds an
>> estimate of mean of each group, never a difference. The doc says
>> "estimate    the estimated mean or difference in means depending on whether
>> it
>> was a one-sample test or a two-sample test."
>>
>>   > t.test(0:4)$estimate
>> mean of x
>>           2
>>   > t.test(0:4, 5:9)$estimate
>> mean of x mean of y
>>           2         7
>>
>> Best,
>> Samuel
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Mon Apr  3 21:14:58 2023
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Mon, 3 Apr 2023 19:14:58 +0000
Subject: [R] Should help of estimate in t.test be corrected?
In-Reply-To: <4a9791fc-17b5-48d8-3ba2-96fa1823c7c5@inserm.fr>
References: <66fec2cf-c0c9-d821-f32d-8b6222fc5be3@inserm.fr>
 <6a6a75959ad04255aaae478b5ba7eaf6@SRVEXCHCM1302.precheza.cz>
 <4a9791fc-17b5-48d8-3ba2-96fa1823c7c5@inserm.fr>
Message-ID: <SN4PR22MB28240ED4A01334A79B0B3171CF929@SN4PR22MB2824.namprd22.prod.outlook.com>

IMHO The difference makes sense for paired samples. For unpaired samples it is just the difference in means. I think presenting the means (and assuming the audience can perform subtraction) conveys more information. The interpretation of a difference of 5 might be influenced if I have means of -3, 2, or 4, 9, or 2000, 2005. 
Tim


-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Samuel Granjeaud IR/Inserm
Sent: Monday, April 3, 2023 7:25 AM
To: PIKAL Petr <petr.pikal at precheza.cz>; r-help at r-project.org
Subject: Re: [R] Should help of estimate in t.test be corrected?

[External Email]

Hi

Thanks for your feedback. I didn't think about that.

Still, the mean difference is computed for paired, not because there are two samples. IMHO, the help should be updated.

Best,
Samuel

Le 2023-04-03 ? 12:10, PIKAL Petr a ?crit :
> Hi
>
> You need to use paired option
>
>> t.test(x=0:4, y=sample(5:9), paired=TRUE)$estimate
> mean difference
>               -5
>
> Cheers
> Petr
>
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Samuel 
>> Granjeaud IR/Inserm
>> Sent: Sunday, April 2, 2023 11:39 PM
>> To: r-help at r-project.org
>> Subject: [R] Should help of estimate in t.test be corrected?
>>
>> Hi,
>>
>> Not important, but IMHO the estimate component of the t.test holds an 
>> estimate of mean of each group, never a difference. The doc says
>> "estimate    the estimated mean or difference in means depending on whether
>> it
>> was a one-sample test or a two-sample test."
>>
>>   > t.test(0:4)$estimate
>> mean of x
>>           2
>>   > t.test(0:4, 5:9)$estimate
>> mean of x mean of y
>>           2         7
>>
>> Best,
>> Samuel
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fsta
>> t.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.e
>> du%7Cdd06e263220c464ea0c908db3475a677%7C0d4da0f84a314d76ace60a62331e1
>> b84%7C0%7C0%7C638161452151623376%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
>> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7
>> C&sdata=a7zlFppg4iG2uyMH7mpgyoLTIxXG8F3dx3FPt6YfLdc%3D&reserved=0
>> PLEASE do read the posting guide 
>> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.
>> r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C
>> dd06e263220c464ea0c908db3475a677%7C0d4da0f84a314d76ace60a62331e1b84%7
>> C0%7C0%7C638161452151623376%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
>> DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sda
>> ta=e%2B0jDRNJRJJ%2BE%2F091LZxD5%2BUhJAz%2FzSjJ7YZhYdFhDk%3D&reserved=
>> 0 and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7Cdd06e263220c464ea0c908db3475a677%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161452151623376%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=a7zlFppg4iG2uyMH7mpgyoLTIxXG8F3dx3FPt6YfLdc%3D&reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7Cdd06e263220c464ea0c908db3475a677%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161452151623376%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=e%2B0jDRNJRJJ%2BE%2F091LZxD5%2BUhJAz%2FzSjJ7YZhYdFhDk%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.


From tuech|er @end|ng |rom gmx@@t  Mon Apr  3 22:39:08 2023
From: tuech|er @end|ng |rom gmx@@t (Heinz Tuechler)
Date: Mon, 3 Apr 2023 22:39:08 +0200
Subject: [R] Simple Stacking of Two Columns
In-Reply-To: <D148C450-D53D-4962-9043-8F5416AD510D@dcn.davis.ca.us>
References: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
 <D148C450-D53D-4962-9043-8F5416AD510D@dcn.davis.ca.us>
Message-ID: <36af214a-c628-4de0-80e1-797d3a6a4d6c@gmx.at>

Jeff Newmiller wrote/hat geschrieben on/am 03.04.2023 18:26:
> unname(unlist(NamesWide))
Why not:

NamesWide <- data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
NamesLong <- data.frame(Names=with(NamesWide, c(Name1, Name2)))

>
> On April 3, 2023 8:08:59 AM PDT, "Sparks, John" <jspark4 at uic.edu> wrote:
>> Hi R-Helpers,
>>
>> Sorry to bother you, but I have a simple task that I can't figure out how to do.
>>
>> For example, I have some names in two columns
>>
>> NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
>>
>> and I simply want to get a single column
>> NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
>>> NamesLong
>>  Names
>> 1   Tom
>> 2  Dick
>> 3 Larry
>> 4 Curly
>>
>>
>> Stack produces an error
>> NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
>> Error in if (drop) { : argument is of length zero
>>
>> So does bind_rows
>>> NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
>> Error in `dplyr::bind_rows()`:
>> ! Argument 1 must be a data frame or a named atomic vector.
>> Run `rlang::last_error()` to see where the error occurred.
>>
>> I tried making separate dataframes to get around the error in bind_rows but it puts the data in two different columns
>> Name1<-data.frame(c("Tom","Dick"))
>> Name2<-data.frame(c("Larry","Curly"))
>> NamesLong<-dplyr::bind_rows(Name1,Name2)
>>> NamesLong
>>  c..Tom....Dick.. c..Larry....Curly..
>> 1              Tom                <NA>
>> 2             Dick                <NA>
>> 3             <NA>               Larry
>> 4             <NA>               Curly
>>
>> gather makes no change to the data
>> NamesLong<-gather(NamesWide,Name1,Name2)
>>> NamesLong
>>  Name1 Name2
>> 1   Tom Larry
>> 2  Dick Curly
>>
>>
>> Please help me solve what should be a very simple problem.
>>
>> Thanks,
>> John Sparks
>>
>>
>>
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From @vi@e@gross m@iii@g oii gm@ii@com  Tue Apr  4 03:28:15 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Mon, 3 Apr 2023 21:28:15 -0400
Subject: [R] Simple Stacking of Two Columns
In-Reply-To: <36af214a-c628-4de0-80e1-797d3a6a4d6c@gmx.at>
References: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
 <D148C450-D53D-4962-9043-8F5416AD510D@dcn.davis.ca.us>
 <36af214a-c628-4de0-80e1-797d3a6a4d6c@gmx.at>
Message-ID: <002901d96694$baeb8350$30c289f0$@gmail.com>

I may be missing something but using the plain old c() combine function
seems to work fine:

df <- data.frame(left = 1:5, right = 6:10)
df.combined <- data.frame(comb = c(df$left, df$right))

df
  left right
1    1     6
2    2     7
3    3     8
4    4     9
5    5    10

df.combined
   comb
1     1
2     2
3     3
4     4
5     5
6     6
7     7
8     8
9     9
10   10



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Heinz Tuechler
Sent: Monday, April 3, 2023 4:39 PM
To: r-help at r-project.org
Subject: Re: [R] Simple Stacking of Two Columns

Jeff Newmiller wrote/hat geschrieben on/am 03.04.2023 18:26:
> unname(unlist(NamesWide))
Why not:

NamesWide <- data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
NamesLong <- data.frame(Names=with(NamesWide, c(Name1, Name2)))

>
> On April 3, 2023 8:08:59 AM PDT, "Sparks, John" <jspark4 at uic.edu> wrote:
>> Hi R-Helpers,
>>
>> Sorry to bother you, but I have a simple task that I can't figure out how
to do.
>>
>> For example, I have some names in two columns
>>
>> NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
>>
>> and I simply want to get a single column
>> NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
>>> NamesLong
>>  Names
>> 1   Tom
>> 2  Dick
>> 3 Larry
>> 4 Curly
>>
>>
>> Stack produces an error
>> NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
>> Error in if (drop) { : argument is of length zero
>>
>> So does bind_rows
>>> NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
>> Error in `dplyr::bind_rows()`:
>> ! Argument 1 must be a data frame or a named atomic vector.
>> Run `rlang::last_error()` to see where the error occurred.
>>
>> I tried making separate dataframes to get around the error in bind_rows
but it puts the data in two different columns
>> Name1<-data.frame(c("Tom","Dick"))
>> Name2<-data.frame(c("Larry","Curly"))
>> NamesLong<-dplyr::bind_rows(Name1,Name2)
>>> NamesLong
>>  c..Tom....Dick.. c..Larry....Curly..
>> 1              Tom                <NA>
>> 2             Dick                <NA>
>> 3             <NA>               Larry
>> 4             <NA>               Curly
>>
>> gather makes no change to the data
>> NamesLong<-gather(NamesWide,Name1,Name2)
>>> NamesLong
>>  Name1 Name2
>> 1   Tom Larry
>> 2  Dick Curly
>>
>>
>> Please help me solve what should be a very simple problem.
>>
>> Thanks,
>> John Sparks
>>
>>
>>
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Tue Apr  4 03:54:17 2023
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Tue, 4 Apr 2023 01:54:17 +0000
Subject: [R] Simple Stacking of Two Columns
In-Reply-To: <002901d96694$baeb8350$30c289f0$@gmail.com>
References: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
 <D148C450-D53D-4962-9043-8F5416AD510D@dcn.davis.ca.us>
 <36af214a-c628-4de0-80e1-797d3a6a4d6c@gmx.at>
 <002901d96694$baeb8350$30c289f0$@gmail.com>
Message-ID: <SN4PR22MB28245086367CD9F434201D1ECF939@SN4PR22MB2824.namprd22.prod.outlook.com>

Combined, the answers are close to an example in the documentation for microbenchmark where they (in part) look at execution times for c() versus append(). Here is the code, but c() has the shortest execution time in this example. If I remove a3 and a4 then c() is significantly shorter than append().

install.packages('microbenchmark')
library(microbenchmark)
c1 <- c("Lilia","Sam")
c2 <- c("Skywalker","Voldemort")
res <- microbenchmark(a1 <- c(c1, c2),
                      a2 <- append(c1, c2),
                      a3 <- {c3 <- data.frame(Name1=c1, Name2=c2)
                        stack(c3)},
                      a4 <- {c3 <- data.frame(Name1=c1, Name2=c2)
                        data.frame(Names=with(c3, c(Name1, Name2)))},
                      times=100L)
print(res)

    min     lq   mean median     uq     max neval cld
    500    900   1647   1700   1900   11000   100 a  
   2300   3000   4604   4800   5300   14600   100 a  
 779500 812950 843367 832750 868800 1129300   100   c
 486800 506650 527375 527950 544000  621900   100  b






-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of avi.e.gross at gmail.com
Sent: Monday, April 3, 2023 9:28 PM
To: 'Heinz Tuechler' <tuechler at gmx.at>; r-help at r-project.org
Subject: Re: [R] Simple Stacking of Two Columns

[External Email]

I may be missing something but using the plain old c() combine function seems to work fine:

df <- data.frame(left = 1:5, right = 6:10) df.combined <- data.frame(comb = c(df$left, df$right))

df
  left right
1    1     6
2    2     7
3    3     8
4    4     9
5    5    10

df.combined
   comb
1     1
2     2
3     3
4     4
5     5
6     6
7     7
8     8
9     9
10   10



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Heinz Tuechler
Sent: Monday, April 3, 2023 4:39 PM
To: r-help at r-project.org
Subject: Re: [R] Simple Stacking of Two Columns

Jeff Newmiller wrote/hat geschrieben on/am 03.04.2023 18:26:
> unname(unlist(NamesWide))
Why not:

NamesWide <- data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
NamesLong <- data.frame(Names=with(NamesWide, c(Name1, Name2)))

>
> On April 3, 2023 8:08:59 AM PDT, "Sparks, John" <jspark4 at uic.edu> wrote:
>> Hi R-Helpers,
>>
>> Sorry to bother you, but I have a simple task that I can't figure out 
>> how
to do.
>>
>> For example, I have some names in two columns
>>
>> NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
>>
>> and I simply want to get a single column
>> NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
>>> NamesLong
>>  Names
>> 1   Tom
>> 2  Dick
>> 3 Larry
>> 4 Curly
>>
>>
>> Stack produces an error
>> NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
>> Error in if (drop) { : argument is of length zero
>>
>> So does bind_rows
>>> NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
>> Error in `dplyr::bind_rows()`:
>> ! Argument 1 must be a data frame or a named atomic vector.
>> Run `rlang::last_error()` to see where the error occurred.
>>
>> I tried making separate dataframes to get around the error in 
>> bind_rows
but it puts the data in two different columns
>> Name1<-data.frame(c("Tom","Dick"))
>> Name2<-data.frame(c("Larry","Curly"))
>> NamesLong<-dplyr::bind_rows(Name1,Name2)
>>> NamesLong
>>  c..Tom....Dick.. c..Larry....Curly..
>> 1              Tom                <NA>
>> 2             Dick                <NA>
>> 3             <NA>               Larry
>> 4             <NA>               Curly
>>
>> gather makes no change to the data
>> NamesLong<-gather(NamesWide,Name1,Name2)
>>> NamesLong
>>  Name1 Name2
>> 1   Tom Larry
>> 2  Dick Curly
>>
>>
>> Please help me solve what should be a very simple problem.
>>
>> Thanks,
>> John Sparks
>>
>>
>>
>>
>>
>>      [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fsta
>> t.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.e
>> du%7C35b7ed1179cf4b8c549f08db34abeb5b%7C0d4da0f84a314d76ace60a62331e1
>> b84%7C0%7C0%7C638161685242095287%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
>> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7
>> C&sdata=dDPUQYH5pkdJl7gdcjAtA1QeK2J%2FlQOguTu3mbiaQjk%3D&reserved=0
>> PLEASE do read the posting guide
https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C35b7ed1179cf4b8c549f08db34abeb5b%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161685242095287%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=U8I45KBcR6YkCO%2BGhoMHY09NRl1I%2BootIfGruFzm70o%3D&reserved=0
>> and provide commented, minimal, self-contained, reproducible code.
>

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C35b7ed1179cf4b8c549f08db34abeb5b%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161685242095287%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=dDPUQYH5pkdJl7gdcjAtA1QeK2J%2FlQOguTu3mbiaQjk%3D&reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C35b7ed1179cf4b8c549f08db34abeb5b%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161685242251519%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=KhIz18GmFTqlVHp9PRn6tOjU%2Fi4mMzTWr%2FtGvldt%2FMs%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C35b7ed1179cf4b8c549f08db34abeb5b%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161685242251519%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=yn1UoCxiZk3HCDBZpwbUjdxlLHts3%2Fd1GSwwKMVy1UI%3D&reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C35b7ed1179cf4b8c549f08db34abeb5b%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161685242251519%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=KhIz18GmFTqlVHp9PRn6tOjU%2Fi4mMzTWr%2FtGvldt%2FMs%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.


From k|mmo@e|o @end|ng |rom utu@||  Tue Apr  4 10:08:51 2023
From: k|mmo@e|o @end|ng |rom utu@|| (Kimmo Elo)
Date: Tue, 4 Apr 2023 08:08:51 +0000
Subject: [R] Simple Stacking of Two Columns
In-Reply-To: <SN4PR22MB28240D4AD51A007E60E692D5CF929@SN4PR22MB2824.namprd22.prod.outlook.com>
References: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
 <etPan.642af455.4a1014c4.57e@me.com>
 <SN4PR22MB28240D4AD51A007E60E692D5CF929@SN4PR22MB2824.namprd22.prod.outlook.com>
Message-ID: <8b026b96fc364893c6eec19664cc7ed3077226d2.camel@utu.fi>

Hi,

or maybe this?

NamesLong<-data.frame(Names=unlist(NamesWide), row.names = NULL)

HTH,

Kimmo

ma, 2023-04-03 kello 16:23 +0000, Ebert,Timothy Aaron kirjoitti:
> My first thought was pivot_longer, and stack() is new to me. 
> How about append(c1,c2) as another solution? Or
> data.frame(append(c1,c2)) if you want that form.
> 
> Tim
> 
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Marc
> Schwartz via R-help
> Sent: Monday, April 3, 2023 11:44 AM
> To: Sparks, John <jspark4 at uic.edu>; r-help at r-project.org
> Subject: Re: [R] Simple Stacking of Two Columns
> 
> [External Email]
> 
> Hi,
> 
> You were on the right track using stack(), but you just pass the
> entire data frame as a single object, not the separate columns:
> 
> > stack(NamesWide)
> ? values?? ind
> 1??? Tom Name1
> 2?? Dick Name1
> 3? Larry Name2
> 4? Curly Name2
> 
> Note that stack also returns the index (second column of 'ind'
> values), which tells you which column in the source data frame the
> stacked values originated from.
> 
> Thus, if you just want the actual data:
> 
> > stack(NamesWide)$values
> [1] "Tom"?? "Dick"? "Larry" "Curly"
> 
> returns a vector, or:
> 
> > stack(NamesWide)[, 1, drop = FALSE]
> ? values
> 1??? Tom
> 2?? Dick
> 3? Larry
> 4? Curly
> 
> which returns a data frame with a single column named 'values'.
> 
> Regards,
> 
> Marc Schwartz
> 
> 
> On April 3, 2023 at 11:08:59 AM, Sparks, John
> (jspark4 at uic.edu?(mailto:jspark4 at uic.edu)) wrote:
> 
> > Hi R-Helpers,
> > 
> > Sorry to bother you, but I have a simple task that I can't figure
> > out how to do.
> > 
> > For example, I have some names in two columns
> > 
> > NamesWide<-
> > data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
> > 
> > and I simply want to get a single column
> > NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
> > > NamesLong
> > Names
> > 1 Tom
> > 2 Dick
> > 3 Larry
> > 4 Curly
> > 
> > 
> > Stack produces an error
> > NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
> > Error in if (drop) { : argument is of length zero
> > 
> > So does bind_rows
> > > NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
> > Error in `dplyr::bind_rows()`:
> > ! Argument 1 must be a data frame or a named atomic vector.
> > Run `rlang::last_error()` to see where the error occurred.
> > 
> > I tried making separate dataframes to get around the error in
> > bind_rows but it puts the data in two different columns
> > Name1<-data.frame(c("Tom","Dick"))
> > Name2<-data.frame(c("Larry","Curly"))
> > NamesLong<-dplyr::bind_rows(Name1,Name2)
> > > NamesLong
> > c..Tom....Dick.. c..Larry....Curly..
> > 1 Tom
> > 2 Dick
> > 3 Larry
> > 4 Curly
> > 
> > gather makes no change to the data
> > NamesLong<-gather(NamesWide,Name1,Name2)
> > > NamesLong
> > Name1 Name2
> > 1 Tom Larry
> > 2 Dick Curly
> > 
> > 
> > Please help me solve what should be a very simple problem.
> > 
> > Thanks,
> > John Sparks
> > 
> > 
> > 
> > 
> > 
> > [[alternative HTML version deleted]]
> > 
> > ______________________________________________
> > R-help at r-project.org?mailing list -- To UNSUBSCRIBE and more, see
> > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7Ce0f22e022c0b48d2766408db345aa062%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161336072628296%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=MEaORpaFihsIHu3Iu2GwO15ey%2BvZP3Wxa6UiS3g0PyQ%3D&reserved=0
> > PLEASE do read the posting guide
> > https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7Ce0f22e022c0b48d2766408db345aa062%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161336072628296%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=ZwKZkaGoEVMu8Jp%2BbcIj%2FLVi9%2Fwug%2Fi48uarb8yg5KY%3D&reserved=0
> > and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org?mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7Ce0f22e022c0b48d2766408db345aa062%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161336072628296%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=MEaORpaFihsIHu3Iu2GwO15ey%2BvZP3Wxa6UiS3g0PyQ%3D&reserved=0
> PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7Ce0f22e022c0b48d2766408db345aa062%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161336072628296%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=ZwKZkaGoEVMu8Jp%2BbcIj%2FLVi9%2Fwug%2Fi48uarb8yg5KY%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org?mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@oknz @end|ng |rom gm@||@com  Tue Apr  4 14:20:36 2023
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Wed, 5 Apr 2023 00:20:36 +1200
Subject: [R] Simple Stacking of Two Columns
In-Reply-To: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
References: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
Message-ID: <CABcYAdK98ow5yQH2OOoaM0r8LubJe99aXp1_Ap_N+E3cx3z-mQ@mail.gmail.com>

Just to repeat:
you have

   NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))

and you want

   NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))

There must be something I am missing, because

   NamesLong <- data.frame(Names = c(NamesWide$Name1, NamesWide$Name2))

appears to do the job in the simplest possible manner.  There are all sorts
of alternatives, such as
   data.frame(Name = as.vector(as.matrix(NamesWide[, 1:2])))

As for stack(), the main problem there was a typo (Names2 for Name2).

> stack(NamesWide)
  values   ind
1    Tom Name1
2   Dick Name1
3  Larry Name2
4  Curly Name2

If there were multiple columns, you might do

> stack(NamesWide[,c("Name1","Name2")])$values
[1] "Tom"   "Dick"  "Larry" "Curly"


On Tue, 4 Apr 2023 at 03:09, Sparks, John <jspark4 at uic.edu> wrote:

> Hi R-Helpers,
>
> Sorry to bother you, but I have a simple task that I can't figure out how
> to do.
>
> For example, I have some names in two columns
>
> NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
>
> and I simply want to get a single column
> NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
> > NamesLong
>   Names
> 1   Tom
> 2  Dick
> 3 Larry
> 4 Curly
>
>
> Stack produces an error
> NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
> Error in if (drop) { : argument is of length zero
>
> So does bind_rows
> > NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
> Error in `dplyr::bind_rows()`:
> ! Argument 1 must be a data frame or a named atomic vector.
> Run `rlang::last_error()` to see where the error occurred.
>
> I tried making separate dataframes to get around the error in bind_rows
> but it puts the data in two different columns
> Name1<-data.frame(c("Tom","Dick"))
> Name2<-data.frame(c("Larry","Curly"))
> NamesLong<-dplyr::bind_rows(Name1,Name2)
> > NamesLong
>   c..Tom....Dick.. c..Larry....Curly..
> 1              Tom                <NA>
> 2             Dick                <NA>
> 3             <NA>               Larry
> 4             <NA>               Curly
>
> gather makes no change to the data
> NamesLong<-gather(NamesWide,Name1,Name2)
> > NamesLong
>   Name1 Name2
> 1   Tom Larry
> 2  Dick Curly
>
>
> Please help me solve what should be a very simple problem.
>
> Thanks,
> John Sparks
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From tebert @end|ng |rom u||@edu  Tue Apr  4 15:40:55 2023
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Tue, 4 Apr 2023 13:40:55 +0000
Subject: [R] Simple Stacking of Two Columns
In-Reply-To: <CABcYAdK98ow5yQH2OOoaM0r8LubJe99aXp1_Ap_N+E3cx3z-mQ@mail.gmail.com>
References: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
 <CABcYAdK98ow5yQH2OOoaM0r8LubJe99aXp1_Ap_N+E3cx3z-mQ@mail.gmail.com>
Message-ID: <SN4PR22MB282430CF79783105EA3B11B8CF939@SN4PR22MB2824.namprd22.prod.outlook.com>

Originally this post was to just look at execution times for different approaches to solving this problem.
Now I have a question:
   I change the code for calculating a1 from c(c1, c2) to data.frame(c(c1,c2)). This changes the execution times of all the other variables. What am I missing?

Original
For efficiency, the answer Avi provided is still the best option with these data. The append() method is next. Both of these approaches avoid having to make a data frame in the wide format. The slowest method is pivot_longer(). Note that the order of elements is different in the pivot_longer() approach. If the order matters then some of these answers will need sorting to get the correct output. Also note that a1 and a2 are vectors, while the others are data frames. However, all of these appear correct from our understanding of the problem.

library(tidyverse)
library(microbenchmark)
c1 <- c("Tom","Dick")
c2 <- c("Larry","Curly")
res <- microbenchmark(a1 <- c(c1, c2),
                      a2 <- append(c1, c2),
                      a3 <- {c3 <- data.frame(Name1=c1, Name2=c2)
                        stack(c3)},
                      a4 <- {c3 <- data.frame(Name1=c1, Name2=c2)
                        data.frame(Names=with(c3, c(Name1, Name2)))},
                      a5 <- {c3 <- data.frame(Name1=c1, Name2=c2)
                        data.frame(Names=unlist(c3), row.names=NULL)},
                      a6 <- {c3 <- data.frame(Name1=c1, Name2=c2)
                        pivot_longer(c3, cols=everything(),names_to="Names")},
                      a7 <- {c3 <- data.frame(Name1=c1, Name2=c2)
                        data.frame(Names=c(c3$Name1,c3$Name2))},
                      times=100L)
print(res)

Mean execution times for seven different methods where a1 <- c(c1,c2)
Method	Mean(ms)  	CLD
a1		1998    		a  
a2		5749    		a  
a3		1055501  	 b 
a4 		592548  	 b 
a5 		682491  	 b 
a6		6962660	   c 
a7		608337  	 b


Mean execution times for seven different methods where a1 <- data.frame(c(c1,c2))
Method	mean		cld
a1		272.467	  b
a2		5.768		a
a3		907.171	      d
a4		561.863	    c
a5		581.989	    c
a6		6371.465	        e
a7		552.208	    c

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Richard O'Keefe
Sent: Tuesday, April 4, 2023 8:21 AM
To: Sparks, John <jspark4 at uic.edu>
Cc: r-help at r-project.org
Subject: Re: [R] Simple Stacking of Two Columns

[External Email]

Just to repeat:
you have

   NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))

and you want

   NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))

There must be something I am missing, because

   NamesLong <- data.frame(Names = c(NamesWide$Name1, NamesWide$Name2))

appears to do the job in the simplest possible manner.  There are all sorts of alternatives, such as
   data.frame(Name = as.vector(as.matrix(NamesWide[, 1:2])))

As for stack(), the main problem there was a typo (Names2 for Name2).

> stack(NamesWide)
  values   ind
1    Tom Name1
2   Dick Name1
3  Larry Name2
4  Curly Name2

If there were multiple columns, you might do

> stack(NamesWide[,c("Name1","Name2")])$values
[1] "Tom"   "Dick"  "Larry" "Curly"


On Tue, 4 Apr 2023 at 03:09, Sparks, John <jspark4 at uic.edu> wrote:

> Hi R-Helpers,
>
> Sorry to bother you, but I have a simple task that I can't figure out 
> how to do.
>
> For example, I have some names in two columns
>
> NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
>
> and I simply want to get a single column
> NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
> > NamesLong
>   Names
> 1   Tom
> 2  Dick
> 3 Larry
> 4 Curly
>
>
> Stack produces an error
> NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
> Error in if (drop) { : argument is of length zero
>
> So does bind_rows
> > NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
> Error in `dplyr::bind_rows()`:
> ! Argument 1 must be a data frame or a named atomic vector.
> Run `rlang::last_error()` to see where the error occurred.
>
> I tried making separate dataframes to get around the error in 
> bind_rows but it puts the data in two different columns
> Name1<-data.frame(c("Tom","Dick"))
> Name2<-data.frame(c("Larry","Curly"))
> NamesLong<-dplyr::bind_rows(Name1,Name2)
> > NamesLong
>   c..Tom....Dick.. c..Larry....Curly..
> 1              Tom                <NA>
> 2             Dick                <NA>
> 3             <NA>               Larry
> 4             <NA>               Curly
>
> gather makes no change to the data
> NamesLong<-gather(NamesWide,Name1,Name2)
> > NamesLong
>   Name1 Name2
> 1   Tom Larry
> 2  Dick Curly
>
>
> Please help me solve what should be a very simple problem.
>
> Thanks,
> John Sparks
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu
> %7C1185a53a1a9d448bbd2f08db350715fa%7C0d4da0f84a314d76ace60a62331e1b84
> %7C0%7C0%7C638162076773455805%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAw
> MDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sda
> ta=EpchrCOzXyr05ruHu0OoOVdxRZoX6MMm3lodvtsSnGk%3D&reserved=0
> PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> -project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C11
> 85a53a1a9d448bbd2f08db350715fa%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
> 7C0%7C638162076773455805%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
> CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=mb
> iDzTsmt%2B2yeIIvjXE2vC5X7Xxnsttx0RhgCcqxNeg%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C1185a53a1a9d448bbd2f08db350715fa%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638162076773455805%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=EpchrCOzXyr05ruHu0OoOVdxRZoX6MMm3lodvtsSnGk%3D&reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C1185a53a1a9d448bbd2f08db350715fa%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638162076773455805%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=mbiDzTsmt%2B2yeIIvjXE2vC5X7Xxnsttx0RhgCcqxNeg%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Apr  4 15:56:04 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 4 Apr 2023 13:56:04 +0000
Subject: [R] on lexical scoping....
Message-ID: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Members,
                             I have the following code typed at the console prompt:

y   <-   x*10

X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).

What concept of R is at work in this dichotomy?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Apr  4 16:13:30 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 04 Apr 2023 07:13:30 -0700
Subject: [R] on lexical scoping....
In-Reply-To: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <76220291-8F24-4F3D-A609-6EF12D599DD5@dcn.davis.ca.us>

Namespaces. Packages only export specific object names from their namespaces. But few instances of x would be found there.

Also, function argument lists are not added to the search path until the functions are running, and then the search path only goes through the environments in which the running functions were defined, not through the call stack.

Read Advanced R. [1]

[1] https://adv-r.hadley.nz/environments.html

On April 4, 2023 6:56:04 AM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>Dear Members,
>                             I have the following code typed at the console prompt:
>
>y   <-   x*10
>
>X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).
>
>What concept of R is at work in this dichotomy?
>
>THanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From bgunter@4567 @end|ng |rom gm@||@com  Tue Apr  4 16:18:07 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 4 Apr 2023 07:18:07 -0700
Subject: [R] on lexical scoping....
In-Reply-To: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbQEn_dhsa=65o7TX42dEWQa1J2ZhfQBLLAfVwfZvR6Hqg@mail.gmail.com>

?search and ?environment

See also "The R Language Definition" manual for similar such questions.

-- Bert

On Tue, Apr 4, 2023 at 6:56?AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear Members,
>                              I have the following code typed at the console prompt:
>
> y   <-   x*10
>
> X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).
>
> What concept of R is at work in this dichotomy?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Apr  4 16:18:21 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 4 Apr 2023 10:18:21 -0400
Subject: [R] on lexical scoping....
In-Reply-To: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <6f4a962f-4ddc-5f5e-e2e3-15a59bcb06fb@gmail.com>

On 04/04/2023 9:56 a.m., akshay kulkarni wrote:
> Dear Members,
>                               I have the following code typed at the console prompt:
> 
> y   <-   x*10
> 
> X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).
> 
> What concept of R is at work in this dichotomy?
> 

First, some background:

Packages are associated with multiple environments.  There is the 
internal one that the package sees, and the external one that contains 
just the exports.

These are sometimes called the "package" environment and the "namespace" 
environment, but I don't think those names are used consistently. 
(There's another one containing the imports, but for these purposes, 
it's indistinguishable from the internal one.)

When a package is loaded by loadNamespace("pkg"), nothing happens in the 
global environment:  no new variables are visible.

When it is attached by library("pkg"), a lot more happens.  First, it is 
loaded as above, then the search list is modified.  The global 
environment is entry 1 in the search list; it stays there, but its 
"parent" is set to a copy of the external environment from the new 
package, and the parent of that environment is set to the previous 
parent, the second entry in the search list.

Okay, so now you search for "x" in the global environment, and it's not 
there.  It then goes to the other entries in the search list, which are 
typically external environments from various packages.  None of those 
packages export "x", so it is not found.

It doesn't matter if those packages use "x" without exporting it, 
because R won't look at internal environments in this kind of search.

And it doesn't matter what happens in other packages that are not on the 
search list (i.e. not "attached" because you never called library() or 
require() on them), because they just aren't in the chain of 
environments where R looks.

Duncan Murdoch


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Tue Apr  4 16:21:20 2023
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Tue, 4 Apr 2023 19:51:20 +0530
Subject: [R] on lexical scoping....
In-Reply-To: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CADfFDC5YomeR-1N+PnWzB0Cuypk81d4pRHgR9e8MeGs5iR+yBQ@mail.gmail.com>

On Tue, Apr 4, 2023 at 7:26?PM akshay kulkarni <akshay_e4 at hotmail.com>
wrote:

> Dear Members,
>                              I have the following code typed at the
> console prompt:
>
> y   <-   x*10
>
> X has not been defined and the above code throws an object not found
> error. That is, the global environment does not contain x.


That is not the correct interpretation of the error. R will happily evaluate

y   <-   pi*10

even if the global environment does not contain pi. The "environments"
where R will look is given by

search()

If you manage to find a package that defines 'x' (and exports it),
attaching it will put the package on the search path, and then your call
will indeed no longer give an error.

-Deepayan

Why doesn't it look further in the environment stack, like that of
> packages? There are thousands of packages that contain the variable named
> x. Of course, that happens if the above code is in a function (or does it?).
>
> What concept of R is at work in this dichotomy?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Apr  4 16:28:00 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 4 Apr 2023 14:28:00 +0000
Subject: [R] on lexical scoping....
In-Reply-To: <CADfFDC5YomeR-1N+PnWzB0Cuypk81d4pRHgR9e8MeGs5iR+yBQ@mail.gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CADfFDC5YomeR-1N+PnWzB0Cuypk81d4pRHgR9e8MeGs5iR+yBQ@mail.gmail.com>
Message-ID: <PU4P216MB1568CED165233CF39DD946C5C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Deepayan,
                              THanks for the pithy, pointed reply.

But isn't it risky? Can I somehow get a warning when x is not defined in the global environment but takes on a value from one of the loaded packages? any packages for that?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Deepayan Sarkar <deepayan.sarkar at gmail.com>
Sent: Tuesday, April 4, 2023 7:51 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] on lexical scoping....



On Tue, Apr 4, 2023 at 7:26?PM akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
Dear Members,
                             I have the following code typed at the console prompt:

y   <-   x*10

X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x.

That is not the correct interpretation of the error. R will happily evaluate

y   <-   pi*10

even if the global environment does not contain pi. The "environments" where R will look is given by

search()

If you manage to find a package that defines 'x' (and exports it), attaching it will put the package on the search path, and then your call will indeed no longer give an error.

-Deepayan

Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).

What concept of R is at work in this dichotomy?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Apr  4 16:35:00 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 4 Apr 2023 14:35:00 +0000
Subject: [R] on lexical scoping....
In-Reply-To: <6f4a962f-4ddc-5f5e-e2e3-15a59bcb06fb@gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <6f4a962f-4ddc-5f5e-e2e3-15a59bcb06fb@gmail.com>
Message-ID: <PU4P216MB15689766719CE03919206FC5C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Duncan,
                         THanks for the reply.

I am looking at the technical point. The behavior you just described, as far as I know, is only for functions right? THre is no documentation ever, which says that the code looks for x in the search path. Could you please point me to some resources where I can find further information on lexical scoping for the code "typed" in the console (but not in a function)?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Tuesday, April 4, 2023 7:48 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] on lexical scoping....

On 04/04/2023 9:56 a.m., akshay kulkarni wrote:
> Dear Members,
>                               I have the following code typed at the console prompt:
>
> y   <-   x*10
>
> X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).
>
> What concept of R is at work in this dichotomy?
>

First, some background:

Packages are associated with multiple environments.  There is the
internal one that the package sees, and the external one that contains
just the exports.

These are sometimes called the "package" environment and the "namespace"
environment, but I don't think those names are used consistently.
(There's another one containing the imports, but for these purposes,
it's indistinguishable from the internal one.)

When a package is loaded by loadNamespace("pkg"), nothing happens in the
global environment:  no new variables are visible.

When it is attached by library("pkg"), a lot more happens.  First, it is
loaded as above, then the search list is modified.  The global
environment is entry 1 in the search list; it stays there, but its
"parent" is set to a copy of the external environment from the new
package, and the parent of that environment is set to the previous
parent, the second entry in the search list.

Okay, so now you search for "x" in the global environment, and it's not
there.  It then goes to the other entries in the search list, which are
typically external environments from various packages.  None of those
packages export "x", so it is not found.

It doesn't matter if those packages use "x" without exporting it,
because R won't look at internal environments in this kind of search.

And it doesn't matter what happens in other packages that are not on the
search list (i.e. not "attached" because you never called library() or
require() on them), because they just aren't in the chain of
environments where R looks.

Duncan Murdoch

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Apr  4 16:36:15 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 4 Apr 2023 14:36:15 +0000
Subject: [R] on lexical scoping....
In-Reply-To: <CAGxFJbQEn_dhsa=65o7TX42dEWQa1J2ZhfQBLLAfVwfZvR6Hqg@mail.gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbQEn_dhsa=65o7TX42dEWQa1J2ZhfQBLLAfVwfZvR6Hqg@mail.gmail.com>
Message-ID: <PU4P216MB15689A31901B7D5BF4EFF987C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Bert,
                   THanks a lot. I will take a look at those...

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>
Sent: Tuesday, April 4, 2023 7:48 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] on lexical scoping....

?search and ?environment

See also "The R Language Definition" manual for similar such questions.

-- Bert

On Tue, Apr 4, 2023 at 6:56?AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear Members,
>                              I have the following code typed at the console prompt:
>
> y   <-   x*10
>
> X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).
>
> What concept of R is at work in this dichotomy?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Apr  4 16:37:13 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 4 Apr 2023 14:37:13 +0000
Subject: [R] on lexical scoping....
In-Reply-To: <76220291-8F24-4F3D-A609-6EF12D599DD5@dcn.davis.ca.us>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <76220291-8F24-4F3D-A609-6EF12D599DD5@dcn.davis.ca.us>
Message-ID: <PU4P216MB1568E8FE8726914F276107C3C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Jeff,
                  THanks a lot for the pithy reply...

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Sent: Tuesday, April 4, 2023 7:43 PM
To: r-help at r-project.org <r-help at r-project.org>; akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] on lexical scoping....

Namespaces. Packages only export specific object names from their namespaces. But few instances of x would be found there.

Also, function argument lists are not added to the search path until the functions are running, and then the search path only goes through the environments in which the running functions were defined, not through the call stack.

Read Advanced R. [1]

[1] https://adv-r.hadley.nz/environments.html

On April 4, 2023 6:56:04 AM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>Dear Members,
>                             I have the following code typed at the console prompt:
>
>y   <-   x*10
>
>X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).
>
>What concept of R is at work in this dichotomy?
>
>THanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>
>       [[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Apr  4 16:44:54 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 4 Apr 2023 10:44:54 -0400
Subject: [R] on lexical scoping....
In-Reply-To: <PU4P216MB15689766719CE03919206FC5C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <6f4a962f-4ddc-5f5e-e2e3-15a59bcb06fb@gmail.com>
 <PU4P216MB15689766719CE03919206FC5C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <401472f6-4e94-74b4-4e15-3716279e6bb7@gmail.com>

On 04/04/2023 10:35 a.m., akshay kulkarni wrote:
> Dear Duncan,
>  ? ? ? ? ? ? ? ? ? ? ? ? ?THanks for the reply.
> 
> I am looking at the technical point. The behavior you just described, as 
> far as I know, is only for functions right? 

No, not at all.  Every function you write in R has an associated 
environment (which you can find using environment(fn)).  That only 
applies to searches taking place while evaluating the function.  The 
starting point is a temporary environment to hold local variables, 
called the "evaluation frame".  The parent of that environment is the 
environment given by environment(fn).

When you type something at the top level, evaluation is done very 
similarly, except that the starting point for the search is the global 
environment.

THre is no documentation
> ever, which says that the code looks for x in the search path. Could you 
> please point me to some resources where I can find further information 
> on lexical scoping for the code "typed" in the console (but not in a 
> function)?

See section 3.5.1 in the R Language Definition for a description of the 
relation between the global environment and the search list.  See 
section 2.1.10 in that manual for how R looks up variables.

Duncan Murdoch

> 
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> 
> ------------------------------------------------------------------------
> *From:* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Sent:* Tuesday, April 4, 2023 7:48 PM
> *To:* akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list 
> <r-help at r-project.org>
> *Subject:* Re: [R] on lexical scoping....
> On 04/04/2023 9:56 a.m., akshay kulkarni wrote:
>> Dear Members,
>>?????????????????????????????? I have the following code typed at the console prompt:
>> 
>> y?? <-?? x*10
>> 
>> X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable  named? x. Of course, that happens if the above code is in a function 
> (or does it?).
>> 
>> What concept of R is at work in this dichotomy?
>> 
> 
> First, some background:
> 
> Packages are associated with multiple environments.? There is the
> internal one that the package sees, and the external one that contains
> just the exports.
> 
> These are sometimes called the "package" environment and the "namespace"
> environment, but I don't think those names are used consistently.
> (There's another one containing the imports, but for these purposes,
> it's indistinguishable from the internal one.)
> 
> When a package is loaded by loadNamespace("pkg"), nothing happens in the
> global environment:? no new variables are visible.
> 
> When it is attached by library("pkg"), a lot more happens.? First, it is
> loaded as above, then the search list is modified.? The global
> environment is entry 1 in the search list; it stays there, but its
> "parent" is set to a copy of the external environment from the new
> package, and the parent of that environment is set to the previous
> parent, the second entry in the search list.
> 
> Okay, so now you search for "x" in the global environment, and it's not
> there.? It then goes to the other entries in the search list, which are
> typically external environments from various packages.? None of those
> packages export "x", so it is not found.
> 
> It doesn't matter if those packages use "x" without exporting it,
> because R won't look at internal environments in this kind of search.
> 
> And it doesn't matter what happens in other packages that are not on the
> search list (i.e. not "attached" because you never called library() or
> require() on them), because they just aren't in the chain of
> environments where R looks.
> 
> Duncan Murdoch


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Apr  4 16:50:15 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 4 Apr 2023 14:50:15 +0000
Subject: [R] on lexical scoping....
In-Reply-To: <401472f6-4e94-74b4-4e15-3716279e6bb7@gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <6f4a962f-4ddc-5f5e-e2e3-15a59bcb06fb@gmail.com>
 <PU4P216MB15689766719CE03919206FC5C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <401472f6-4e94-74b4-4e15-3716279e6bb7@gmail.com>
Message-ID: <PU4P216MB15681690B582386DDAD40AB1C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Ducan,
                        Very informative! THanks a lot!

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Tuesday, April 4, 2023 8:14 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] on lexical scoping....

On 04/04/2023 10:35 a.m., akshay kulkarni wrote:
> Dear Duncan,
>                           THanks for the reply.
>
> I am looking at the technical point. The behavior you just described, as
> far as I know, is only for functions right?

No, not at all.  Every function you write in R has an associated
environment (which you can find using environment(fn)).  That only
applies to searches taking place while evaluating the function.  The
starting point is a temporary environment to hold local variables,
called the "evaluation frame".  The parent of that environment is the
environment given by environment(fn).

When you type something at the top level, evaluation is done very
similarly, except that the starting point for the search is the global
environment.

THre is no documentation
> ever, which says that the code looks for x in the search path. Could you
> please point me to some resources where I can find further information
> on lexical scoping for the code "typed" in the console (but not in a
> function)?

See section 3.5.1 in the R Language Definition for a description of the
relation between the global environment and the search list.  See
section 2.1.10 in that manual for how R looks up variables.

Duncan Murdoch

>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
> ------------------------------------------------------------------------
> *From:* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Sent:* Tuesday, April 4, 2023 7:48 PM
> *To:* akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list
> <r-help at r-project.org>
> *Subject:* Re: [R] on lexical scoping....
> On 04/04/2023 9:56 a.m., akshay kulkarni wrote:
>> Dear Members,
>>                               I have the following code typed at the console prompt:
>>
>> y   <-   x*10
>>
>> X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable  named  x. Of course, that happens if the above code is in a function
> (or does it?).
>>
>> What concept of R is at work in this dichotomy?
>>
>
> First, some background:
>
> Packages are associated with multiple environments.  There is the
> internal one that the package sees, and the external one that contains
> just the exports.
>
> These are sometimes called the "package" environment and the "namespace"
> environment, but I don't think those names are used consistently.
> (There's another one containing the imports, but for these purposes,
> it's indistinguishable from the internal one.)
>
> When a package is loaded by loadNamespace("pkg"), nothing happens in the
> global environment:  no new variables are visible.
>
> When it is attached by library("pkg"), a lot more happens.  First, it is
> loaded as above, then the search list is modified.  The global
> environment is entry 1 in the search list; it stays there, but its
> "parent" is set to a copy of the external environment from the new
> package, and the parent of that environment is set to the previous
> parent, the second entry in the search list.
>
> Okay, so now you search for "x" in the global environment, and it's not
> there.  It then goes to the other entries in the search list, which are
> typically external environments from various packages.  None of those
> packages export "x", so it is not found.
>
> It doesn't matter if those packages use "x" without exporting it,
> because R won't look at internal environments in this kind of search.
>
> And it doesn't matter what happens in other packages that are not on the
> search list (i.e. not "attached" because you never called library() or
> require() on them), because they just aren't in the chain of
> environments where R looks.
>
> Duncan Murdoch


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Apr  4 16:51:52 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 4 Apr 2023 10:51:52 -0400
Subject: [R] on lexical scoping....
In-Reply-To: <PU4P216MB1568CED165233CF39DD946C5C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CADfFDC5YomeR-1N+PnWzB0Cuypk81d4pRHgR9e8MeGs5iR+yBQ@mail.gmail.com>
 <PU4P216MB1568CED165233CF39DD946C5C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <02c3b58c-f4c7-8b32-1253-9815547264bf@gmail.com>

You can't change the basic way R searches, but you can ask for a 
different kind of search.  For example, to see if "x" exists, you can use

  exists("x")

and it will do the default search, but

  exists("x", inherits = FALSE)

will only look in the current environment.  The get() function has a 
similar argument which returns the value

Unfortunately these functions have overly complicated argument lists 
because they are based on functions in S from 30-40 years ago, and it 
had very different scoping rules.  My advice would be to ignore the 
"where" and "frame" arguments, and always use "envir" if you want to say 
where to look.

Duncan Murdoch

On 04/04/2023 10:28 a.m., akshay kulkarni wrote:
> Dear Deepayan,
>                                THanks for the pithy, pointed reply.
> 
> But isn't it risky? Can I somehow get a warning when x is not defined in the global environment but takes on a value from one of the loaded packages? any packages for that?
> 
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> ________________________________
> From: Deepayan Sarkar <deepayan.sarkar at gmail.com>
> Sent: Tuesday, April 4, 2023 7:51 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] on lexical scoping....
> 
> 
> 
> On Tue, Apr 4, 2023 at 7:26?PM akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
> Dear Members,
>                               I have the following code typed at the console prompt:
> 
> y   <-   x*10
> 
> X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x.
> 
> That is not the correct interpretation of the error. R will happily evaluate
> 
> y   <-   pi*10
> 
> even if the global environment does not contain pi. The "environments" where R will look is given by
> 
> search()
> 
> If you manage to find a package that defines 'x' (and exports it), attaching it will put the package on the search path, and then your call will indeed no longer give an error.
> 
> -Deepayan
> 
> Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).
> 
> What concept of R is at work in this dichotomy?
> 
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> 
>          [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Apr  4 16:59:38 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 4 Apr 2023 14:59:38 +0000
Subject: [R] on lexical scoping....
In-Reply-To: <02c3b58c-f4c7-8b32-1253-9815547264bf@gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CADfFDC5YomeR-1N+PnWzB0Cuypk81d4pRHgR9e8MeGs5iR+yBQ@mail.gmail.com>
 <PU4P216MB1568CED165233CF39DD946C5C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <02c3b58c-f4c7-8b32-1253-9815547264bf@gmail.com>
Message-ID: <PU4P216MB156855D46C8D75540D01DCCCC8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Duncan,
                         THanks for the reply...!

So the takeaway is that define the symbol in the same environment before using it right!?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Tuesday, April 4, 2023 8:21 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; Deepayan Sarkar <deepayan.sarkar at gmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] on lexical scoping....

You can't change the basic way R searches, but you can ask for a
different kind of search.  For example, to see if "x" exists, you can use

  exists("x")

and it will do the default search, but

  exists("x", inherits = FALSE)

will only look in the current environment.  The get() function has a
similar argument which returns the value

Unfortunately these functions have overly complicated argument lists
because they are based on functions in S from 30-40 years ago, and it
had very different scoping rules.  My advice would be to ignore the
"where" and "frame" arguments, and always use "envir" if you want to say
where to look.

Duncan Murdoch

On 04/04/2023 10:28 a.m., akshay kulkarni wrote:
> Dear Deepayan,
>                                THanks for the pithy, pointed reply.
>
> But isn't it risky? Can I somehow get a warning when x is not defined in the global environment but takes on a value from one of the loaded packages? any packages for that?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> ________________________________
> From: Deepayan Sarkar <deepayan.sarkar at gmail.com>
> Sent: Tuesday, April 4, 2023 7:51 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] on lexical scoping....
>
>
>
> On Tue, Apr 4, 2023 at 7:26?PM akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
> Dear Members,
>                               I have the following code typed at the console prompt:
>
> y   <-   x*10
>
> X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x.
>
> That is not the correct interpretation of the error. R will happily evaluate
>
> y   <-   pi*10
>
> even if the global environment does not contain pi. The "environments" where R will look is given by
>
> search()
>
> If you manage to find a package that defines 'x' (and exports it), attaching it will put the package on the search path, and then your call will indeed no longer give an error.
>
> -Deepayan
>
> Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).
>
> What concept of R is at work in this dichotomy?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>          [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Apr  4 17:19:00 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 4 Apr 2023 11:19:00 -0400
Subject: [R] on lexical scoping....
In-Reply-To: <PU4P216MB156855D46C8D75540D01DCCCC8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CADfFDC5YomeR-1N+PnWzB0Cuypk81d4pRHgR9e8MeGs5iR+yBQ@mail.gmail.com>
 <PU4P216MB1568CED165233CF39DD946C5C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <02c3b58c-f4c7-8b32-1253-9815547264bf@gmail.com>
 <PU4P216MB156855D46C8D75540D01DCCCC8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <23e788c9-a214-0990-c9d6-10c8c1c61198@gmail.com>

No, there are lots of situations where that doesn't make sense.  You 
don't want to have to define local copies of the functions from every 
package you use, for example.

I think the takeaway is to learn how R scoping works, and keep things 
simple.  That's one reason I tend to avoid "tidyverse" packages.  There 
are a lot of really good ideas in those packages, but "tidy evaluation" 
is far too complicated and hard to understand, and I think it confuses 
people, so they don't understand the really very simple R scoping rules.

Duncan Murdoch

On 04/04/2023 10:59 a.m., akshay kulkarni wrote:
> Dear Duncan,
>  ? ? ? ? ? ? ? ? ? ? ? ? ?THanks for the reply...!
> 
> So the takeaway is that define the symbol in the same environment before 
> using it right!?
> 
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> ------------------------------------------------------------------------
> *From:* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Sent:* Tuesday, April 4, 2023 8:21 PM
> *To:* akshay kulkarni <akshay_e4 at hotmail.com>; Deepayan Sarkar 
> <deepayan.sarkar at gmail.com>
> *Cc:* R help Mailing list <r-help at r-project.org>
> *Subject:* Re: [R] on lexical scoping....
> You can't change the basic way R searches, but you can ask for a
> different kind of search.? For example, to see if "x" exists, you can use
> 
>  ? exists("x")
> 
> and it will do the default search, but
> 
>  ? exists("x", inherits = FALSE)
> 
> will only look in the current environment.? The get() function has a
> similar argument which returns the value
> 
> Unfortunately these functions have overly complicated argument lists
> because they are based on functions in S from 30-40 years ago, and it
> had very different scoping rules.? My advice would be to ignore the
> "where" and "frame" arguments, and always use "envir" if you want to say
> where to look.
> 
> Duncan Murdoch
> 
> On 04/04/2023 10:28 a.m., akshay kulkarni wrote:
>> Dear Deepayan,
>>??????????????????????????????? THanks for the pithy, pointed reply.
>> 
>> But isn't it risky? Can I somehow get a warning when x is not defined in the global environment but takes on a value from one of the loaded packages? any packages for that?
>> 
>> THanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>> ________________________________
>> From: Deepayan Sarkar <deepayan.sarkar at gmail.com>
>> Sent: Tuesday, April 4, 2023 7:51 PM
>> To: akshay kulkarni <akshay_e4 at hotmail.com>
>> Cc: R help Mailing list <r-help at r-project.org>
>> Subject: Re: [R] on lexical scoping....
>> 
>> 
>> 
>> On Tue, Apr 4, 2023 at 7:26?PM akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
>> Dear Members,
>>?????????????????????????????? I have the following code typed at the console prompt:
>> 
>> y?? <-?? x*10
>> 
>> X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x.
>> 
>> That is not the correct interpretation of the error. R will happily evaluate
>> 
>> y?? <-?? pi*10
>> 
>> even if the global environment does not contain pi. The "environments" where R will look is given by
>> 
>> search()
>> 
>> If you manage to find a package that defines 'x' (and exports it), attaching it will put the package on the search path, and then your call will indeed no longer give an error.
>> 
>> -Deepayan
>> 
>> Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named? x. Of course, that happens if the above code is in a function (or does it?).
>> 
>> What concept of R is at work in this dichotomy?
>> 
>> THanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>> 
>>????????? [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help 
> <https://stat.ethz.ch/mailman/listinfo/r-help>
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html 
> <http://www.R-project.org/posting-guide.html>
>> and provide commented, minimal, self-contained, reproducible code.
>> 
>>??????? [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help 
> <https://stat.ethz.ch/mailman/listinfo/r-help>
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html 
> <http://www.R-project.org/posting-guide.html>
>> and provide commented, minimal, self-contained, reproducible code.
>


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Apr  4 17:27:03 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 4 Apr 2023 15:27:03 +0000
Subject: [R] on lexical scoping....
In-Reply-To: <23e788c9-a214-0990-c9d6-10c8c1c61198@gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CADfFDC5YomeR-1N+PnWzB0Cuypk81d4pRHgR9e8MeGs5iR+yBQ@mail.gmail.com>
 <PU4P216MB1568CED165233CF39DD946C5C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <02c3b58c-f4c7-8b32-1253-9815547264bf@gmail.com>
 <PU4P216MB156855D46C8D75540D01DCCCC8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <23e788c9-a214-0990-c9d6-10c8c1c61198@gmail.com>
Message-ID: <PU4P216MB15687785D70756B86DEE9783C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Duncan,
                         THanks a lot..!!

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Tuesday, April 4, 2023 8:49 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; Deepayan Sarkar <deepayan.sarkar at gmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] on lexical scoping....

No, there are lots of situations where that doesn't make sense.  You
don't want to have to define local copies of the functions from every
package you use, for example.

I think the takeaway is to learn how R scoping works, and keep things
simple.  That's one reason I tend to avoid "tidyverse" packages.  There
are a lot of really good ideas in those packages, but "tidy evaluation"
is far too complicated and hard to understand, and I think it confuses
people, so they don't understand the really very simple R scoping rules.

Duncan Murdoch

On 04/04/2023 10:59 a.m., akshay kulkarni wrote:
> Dear Duncan,
>                           THanks for the reply...!
>
> So the takeaway is that define the symbol in the same environment before
> using it right!?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> ------------------------------------------------------------------------
> *From:* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Sent:* Tuesday, April 4, 2023 8:21 PM
> *To:* akshay kulkarni <akshay_e4 at hotmail.com>; Deepayan Sarkar
> <deepayan.sarkar at gmail.com>
> *Cc:* R help Mailing list <r-help at r-project.org>
> *Subject:* Re: [R] on lexical scoping....
> You can't change the basic way R searches, but you can ask for a
> different kind of search.  For example, to see if "x" exists, you can use
>
>    exists("x")
>
> and it will do the default search, but
>
>    exists("x", inherits = FALSE)
>
> will only look in the current environment.  The get() function has a
> similar argument which returns the value
>
> Unfortunately these functions have overly complicated argument lists
> because they are based on functions in S from 30-40 years ago, and it
> had very different scoping rules.  My advice would be to ignore the
> "where" and "frame" arguments, and always use "envir" if you want to say
> where to look.
>
> Duncan Murdoch
>
> On 04/04/2023 10:28 a.m., akshay kulkarni wrote:
>> Dear Deepayan,
>>                                THanks for the pithy, pointed reply.
>>
>> But isn't it risky? Can I somehow get a warning when x is not defined in the global environment but takes on a value from one of the loaded packages? any packages for that?
>>
>> THanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>> ________________________________
>> From: Deepayan Sarkar <deepayan.sarkar at gmail.com>
>> Sent: Tuesday, April 4, 2023 7:51 PM
>> To: akshay kulkarni <akshay_e4 at hotmail.com>
>> Cc: R help Mailing list <r-help at r-project.org>
>> Subject: Re: [R] on lexical scoping....
>>
>>
>>
>> On Tue, Apr 4, 2023 at 7:26?PM akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
>> Dear Members,
>>                               I have the following code typed at the console prompt:
>>
>> y   <-   x*10
>>
>> X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x.
>>
>> That is not the correct interpretation of the error. R will happily evaluate
>>
>> y   <-   pi*10
>>
>> even if the global environment does not contain pi. The "environments" where R will look is given by
>>
>> search()
>>
>> If you manage to find a package that defines 'x' (and exports it), attaching it will put the package on the search path, and then your call will indeed no longer give an error.
>>
>> -Deepayan
>>
>> Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).
>>
>> What concept of R is at work in this dichotomy?
>>
>> THanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
> <https://stat.ethz.ch/mailman/listinfo/r-help>
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> <http://www.R-project.org/posting-guide.html>
>> and provide commented, minimal, self-contained, reproducible code.
>>
>>        [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
> <https://stat.ethz.ch/mailman/listinfo/r-help>
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> <http://www.R-project.org/posting-guide.html>
>> and provide commented, minimal, self-contained, reproducible code.
>


	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Apr  5 01:06:19 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 4 Apr 2023 16:06:19 -0700
Subject: [R] on lexical scoping....
In-Reply-To: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbRBjrpo3c8D-vfaye1+Dc5eGb++eCaLQ+sbKojoFURy1A@mail.gmail.com>

The following *might* be of use to you. If you can predict what the various
function invocations will do, I think you have a reasonable grasp of how
lexical scoping works in R (contrary or supplementary opinions welcome).
It is the sort of thing you will find in the references also. If this is
all obvious, sorry for wasting your time.
#######################
search()
ls()
dat <- list(x =2)
attach(dat,2)
search()
f <- function(){
   g <- function() x
   x <- 3
   g}
h <- f()
g <- function()x
ls()
h()
g()
detach(dat)
h()
g()

##########################
## Here is what this gives starting with an empty .GlobalEnv.
##################################

> search()
 [1] ".GlobalEnv"        "package:tools"     "package:lattice"
"tools:rstudio"
 [5] "package:stats"     "package:graphics"  "package:grDevices"
"package:utils"
 [9] "package:datasets"  "package:methods"   "Autoloads"
"package:base"
> ls()
character(0)
> dat <- list(x =2)
> attach(dat,2)
> search()
 [1] ".GlobalEnv"        "dat"               "package:tools"
"package:lattice"
 [5] "tools:rstudio"     "package:stats"     "package:graphics"
 "package:grDevices"
 [9] "package:utils"     "package:datasets"  "package:methods"
"Autoloads"
[13] "package:base"
> f <- function(){
+    g <- function() x
+    x <- 3
+    g}
> h <- f()
> g <- function()x
> ls()
[1] "dat" "f"   "g"   "h"
> h()
[1] 3
> g()
[1] 2
> detach(dat)
> h()
[1] 3
> g()
Error in g() : object 'x' not found

-- Bert


On Tue, Apr 4, 2023 at 6:56?AM akshay kulkarni <akshay_e4 at hotmail.com>
wrote:

> Dear Members,
>                              I have the following code typed at the
> console prompt:
>
> y   <-   x*10
>
> X has not been defined and the above code throws an object not found
> error. That is, the global environment does not contain x. Why doesn't it
> look further in the environment stack, like that of packages? There are
> thousands of packages that contain the variable named  x. Of course, that
> happens if the above code is in a function (or does it?).
>
> What concept of R is at work in this dichotomy?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@rk|eed@2 @end|ng |rom gm@||@com  Wed Apr  5 01:53:38 2023
From: m@rk|eed@2 @end|ng |rom gm@||@com (Mark Leeds)
Date: Tue, 4 Apr 2023 19:53:38 -0400
Subject: [R] on lexical scoping....
In-Reply-To: <CAGxFJbRBjrpo3c8D-vfaye1+Dc5eGb++eCaLQ+sbKojoFURy1A@mail.gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbRBjrpo3c8D-vfaye1+Dc5eGb++eCaLQ+sbKojoFURy1A@mail.gmail.com>
Message-ID: <CAHz+bWbzDUPjrHyXauw07rWkB3mOs4YsQqZTEfWUkb8CtWbHJQ@mail.gmail.com>

obviously, everyone has different opinions on what's useful but I always
found this document quite
helpful. I think, in the past, someone said that there are some incorrect
statements in but I'm not sure
what they are.

https://askming.github.io/study_notes/Stats_Comp/Note-How%20R%20searches%20and%20finds%20stuff.html


On Tue, Apr 4, 2023 at 7:06?PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> The following *might* be of use to you. If you can predict what the various
> function invocations will do, I think you have a reasonable grasp of how
> lexical scoping works in R (contrary or supplementary opinions welcome).
> It is the sort of thing you will find in the references also. If this is
> all obvious, sorry for wasting your time.
> #######################
> search()
> ls()
> dat <- list(x =2)
> attach(dat,2)
> search()
> f <- function(){
>    g <- function() x
>    x <- 3
>    g}
> h <- f()
> g <- function()x
> ls()
> h()
> g()
> detach(dat)
> h()
> g()
>
> ##########################
> ## Here is what this gives starting with an empty .GlobalEnv.
> ##################################
>
> > search()
>  [1] ".GlobalEnv"        "package:tools"     "package:lattice"
> "tools:rstudio"
>  [5] "package:stats"     "package:graphics"  "package:grDevices"
> "package:utils"
>  [9] "package:datasets"  "package:methods"   "Autoloads"
> "package:base"
> > ls()
> character(0)
> > dat <- list(x =2)
> > attach(dat,2)
> > search()
>  [1] ".GlobalEnv"        "dat"               "package:tools"
> "package:lattice"
>  [5] "tools:rstudio"     "package:stats"     "package:graphics"
>  "package:grDevices"
>  [9] "package:utils"     "package:datasets"  "package:methods"
> "Autoloads"
> [13] "package:base"
> > f <- function(){
> +    g <- function() x
> +    x <- 3
> +    g}
> > h <- f()
> > g <- function()x
> > ls()
> [1] "dat" "f"   "g"   "h"
> > h()
> [1] 3
> > g()
> [1] 2
> > detach(dat)
> > h()
> [1] 3
> > g()
> Error in g() : object 'x' not found
>
> -- Bert
>
>
> On Tue, Apr 4, 2023 at 6:56?AM akshay kulkarni <akshay_e4 at hotmail.com>
> wrote:
>
> > Dear Members,
> >                              I have the following code typed at the
> > console prompt:
> >
> > y   <-   x*10
> >
> > X has not been defined and the above code throws an object not found
> > error. That is, the global environment does not contain x. Why doesn't it
> > look further in the environment stack, like that of packages? There are
> > thousands of packages that contain the variable named  x. Of course, that
> > happens if the above code is in a function (or does it?).
> >
> > What concept of R is at work in this dichotomy?
> >
> > THanking you,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Apr  5 02:15:47 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 04 Apr 2023 17:15:47 -0700
Subject: [R] on lexical scoping....
In-Reply-To: <CAHz+bWbzDUPjrHyXauw07rWkB3mOs4YsQqZTEfWUkb8CtWbHJQ@mail.gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbRBjrpo3c8D-vfaye1+Dc5eGb++eCaLQ+sbKojoFURy1A@mail.gmail.com>
 <CAHz+bWbzDUPjrHyXauw07rWkB3mOs4YsQqZTEfWUkb8CtWbHJQ@mail.gmail.com>
Message-ID: <B65D79AD-5854-463D-B074-9636889505D0@dcn.davis.ca.us>

Leading off with you can only have two things in an environment definitely indicates this should be read with a skeptical eye.

Although the title of "Advanced R" may be more scary than someone writing notes on GitHub like a bro, IMHO Adv R is quite readable for anyone interested in questions like this with fewer wrong assertions to unlearn later.

On April 4, 2023 4:53:38 PM PDT, Mark Leeds <markleeds2 at gmail.com> wrote:
>obviously, everyone has different opinions on what's useful but I always
>found this document quite
>helpful. I think, in the past, someone said that there are some incorrect
>statements in but I'm not sure
>what they are.
>
>https://askming.github.io/study_notes/Stats_Comp/Note-How%20R%20searches%20and%20finds%20stuff.html
>
>
>On Tue, Apr 4, 2023 at 7:06?PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
>> The following *might* be of use to you. If you can predict what the various
>> function invocations will do, I think you have a reasonable grasp of how
>> lexical scoping works in R (contrary or supplementary opinions welcome).
>> It is the sort of thing you will find in the references also. If this is
>> all obvious, sorry for wasting your time.
>> #######################
>> search()
>> ls()
>> dat <- list(x =2)
>> attach(dat,2)
>> search()
>> f <- function(){
>>    g <- function() x
>>    x <- 3
>>    g}
>> h <- f()
>> g <- function()x
>> ls()
>> h()
>> g()
>> detach(dat)
>> h()
>> g()
>>
>> ##########################
>> ## Here is what this gives starting with an empty .GlobalEnv.
>> ##################################
>>
>> > search()
>>  [1] ".GlobalEnv"        "package:tools"     "package:lattice"
>> "tools:rstudio"
>>  [5] "package:stats"     "package:graphics"  "package:grDevices"
>> "package:utils"
>>  [9] "package:datasets"  "package:methods"   "Autoloads"
>> "package:base"
>> > ls()
>> character(0)
>> > dat <- list(x =2)
>> > attach(dat,2)
>> > search()
>>  [1] ".GlobalEnv"        "dat"               "package:tools"
>> "package:lattice"
>>  [5] "tools:rstudio"     "package:stats"     "package:graphics"
>>  "package:grDevices"
>>  [9] "package:utils"     "package:datasets"  "package:methods"
>> "Autoloads"
>> [13] "package:base"
>> > f <- function(){
>> +    g <- function() x
>> +    x <- 3
>> +    g}
>> > h <- f()
>> > g <- function()x
>> > ls()
>> [1] "dat" "f"   "g"   "h"
>> > h()
>> [1] 3
>> > g()
>> [1] 2
>> > detach(dat)
>> > h()
>> [1] 3
>> > g()
>> Error in g() : object 'x' not found
>>
>> -- Bert
>>
>>
>> On Tue, Apr 4, 2023 at 6:56?AM akshay kulkarni <akshay_e4 at hotmail.com>
>> wrote:
>>
>> > Dear Members,
>> >                              I have the following code typed at the
>> > console prompt:
>> >
>> > y   <-   x*10
>> >
>> > X has not been defined and the above code throws an object not found
>> > error. That is, the global environment does not contain x. Why doesn't it
>> > look further in the environment stack, like that of packages? There are
>> > thousands of packages that contain the variable named  x. Of course, that
>> > happens if the above code is in a function (or does it?).
>> >
>> > What concept of R is at work in this dichotomy?
>> >
>> > THanking you,
>> > Yours sincerely,
>> > AKSHAY M KULKARNI
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> > http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From r@oknz @end|ng |rom gm@||@com  Wed Apr  5 07:00:38 2023
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Wed, 5 Apr 2023 17:00:38 +1200
Subject: [R] on lexical scoping....
In-Reply-To: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CABcYAdKa9SOBLCCRUK4qMHeVQAmgNzrY2_pi82n_6woXC7E2CA@mail.gmail.com>

R *does* search the environment stack.

> search()
[1] ".GlobalEnv"        "package:stats"     "package:graphics"
[4] "package:grDevices" "package:utils"     "package:datasets"
[7] "package:methods"   "Autoloads"         "package:base

What you seem to be missing is that a package may contain
bindings that it does not export, as the wording of this
error message reminds us:
> utils::y
Error: 'y' is not an exported object from 'namespace:utils'

So when package/namespace goes onto the environment stack,
it's only the *exported* bindings that become visible.



On Wed, 5 Apr 2023 at 01:56, akshay kulkarni <akshay_e4 at hotmail.com> wrote:

> Dear Members,
>                              I have the following code typed at the
> console prompt:
>
> y   <-   x*10
>
> X has not been defined and the above code throws an object not found
> error. That is, the global environment does not contain x. Why doesn't it
> look further in the environment stack, like that of packages? There are
> thousands of packages that contain the variable named  x. Of course, that
> happens if the above code is in a function (or does it?).
>
> What concept of R is at work in this dichotomy?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Apr  5 11:12:52 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 5 Apr 2023 05:12:52 -0400
Subject: [R] on lexical scoping....
In-Reply-To: <CAHz+bWbzDUPjrHyXauw07rWkB3mOs4YsQqZTEfWUkb8CtWbHJQ@mail.gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbRBjrpo3c8D-vfaye1+Dc5eGb++eCaLQ+sbKojoFURy1A@mail.gmail.com>
 <CAHz+bWbzDUPjrHyXauw07rWkB3mOs4YsQqZTEfWUkb8CtWbHJQ@mail.gmail.com>
Message-ID: <e8c9bf61-137e-eef5-adfd-70e000e8c2b0@gmail.com>

It seems mostly correct. Here are a few quibbles:

- I don't think "owner" is a good description of the parent environment. 
  Usually when I use owner in computing, there's an implication that the 
owner controls what it owns, is responsible for allocating and 
destroying it, etc.  Parent environments are targets of a pointer from 
other environments that list them as their "enclosure", but they have no 
record of their children.

- The analogy that all roads lead to the search list is wrong.  There's 
no reason you couldn't create an environment whose parent was the empty 
environment.  But with the qualifier "when we start in R_GlobalEnv" it's 
correct, so this complaint is just about the wording.

- The description of what Imports does is wrong.  What is described 
there is what the `import()` directive in NAMESPACE does.  The Imports 
line in DESCRIPTION just guarantees that the named package is loaded, it 
doesn't import anything.  And the `importFrom()` directive in NAMESPACE 
isn't discussed.

- It gets bad near the end in the "Curveball" section.  I'd just skip 
that.  It's not at all true that all functions in a package have the 
package's namespace environment as their environment.  There are lots of 
real examples where that's not true.  Functions that maintain persistent 
records (e.g. the base function conflictRules()) often have a private 
environment, and occasionally packages import functions from other 
packages by simple assignment, so they end up in the namespace 
environment of the importer but still have the namespace environment of 
the exporter associated with them.  And the last diagram (the revised 
one with all solid lines) is just misleading.

Duncan

On 04/04/2023 7:53 p.m., Mark Leeds wrote:
> obviously, everyone has different opinions on what's useful but I always
> found this document quite
> helpful. I think, in the past, someone said that there are some incorrect
> statements in but I'm not sure
> what they are.
> 
> https://askming.github.io/study_notes/Stats_Comp/Note-How%20R%20searches%20and%20finds%20stuff.html
> 
> 
> On Tue, Apr 4, 2023 at 7:06?PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
>> The following *might* be of use to you. If you can predict what the various
>> function invocations will do, I think you have a reasonable grasp of how
>> lexical scoping works in R (contrary or supplementary opinions welcome).
>> It is the sort of thing you will find in the references also. If this is
>> all obvious, sorry for wasting your time.
>> #######################
>> search()
>> ls()
>> dat <- list(x =2)
>> attach(dat,2)
>> search()
>> f <- function(){
>>     g <- function() x
>>     x <- 3
>>     g}
>> h <- f()
>> g <- function()x
>> ls()
>> h()
>> g()
>> detach(dat)
>> h()
>> g()
>>
>> ##########################
>> ## Here is what this gives starting with an empty .GlobalEnv.
>> ##################################
>>
>>> search()
>>   [1] ".GlobalEnv"        "package:tools"     "package:lattice"
>> "tools:rstudio"
>>   [5] "package:stats"     "package:graphics"  "package:grDevices"
>> "package:utils"
>>   [9] "package:datasets"  "package:methods"   "Autoloads"
>> "package:base"
>>> ls()
>> character(0)
>>> dat <- list(x =2)
>>> attach(dat,2)
>>> search()
>>   [1] ".GlobalEnv"        "dat"               "package:tools"
>> "package:lattice"
>>   [5] "tools:rstudio"     "package:stats"     "package:graphics"
>>   "package:grDevices"
>>   [9] "package:utils"     "package:datasets"  "package:methods"
>> "Autoloads"
>> [13] "package:base"
>>> f <- function(){
>> +    g <- function() x
>> +    x <- 3
>> +    g}
>>> h <- f()
>>> g <- function()x
>>> ls()
>> [1] "dat" "f"   "g"   "h"
>>> h()
>> [1] 3
>>> g()
>> [1] 2
>>> detach(dat)
>>> h()
>> [1] 3
>>> g()
>> Error in g() : object 'x' not found
>>
>> -- Bert
>>
>>
>> On Tue, Apr 4, 2023 at 6:56?AM akshay kulkarni <akshay_e4 at hotmail.com>
>> wrote:
>>
>>> Dear Members,
>>>                               I have the following code typed at the
>>> console prompt:
>>>
>>> y   <-   x*10
>>>
>>> X has not been defined and the above code throws an object not found
>>> error. That is, the global environment does not contain x. Why doesn't it
>>> look further in the environment stack, like that of packages? There are
>>> thousands of packages that contain the variable named  x. Of course, that
>>> happens if the above code is in a function (or does it?).
>>>
>>> What concept of R is at work in this dichotomy?
>>>
>>> THanking you,
>>> Yours sincerely,
>>> AKSHAY M KULKARNI
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@rk|eed@2 @end|ng |rom gm@||@com  Wed Apr  5 14:52:40 2023
From: m@rk|eed@2 @end|ng |rom gm@||@com (Mark Leeds)
Date: Wed, 5 Apr 2023 08:52:40 -0400
Subject: [R] on lexical scoping....
In-Reply-To: <e8c9bf61-137e-eef5-adfd-70e000e8c2b0@gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbRBjrpo3c8D-vfaye1+Dc5eGb++eCaLQ+sbKojoFURy1A@mail.gmail.com>
 <CAHz+bWbzDUPjrHyXauw07rWkB3mOs4YsQqZTEfWUkb8CtWbHJQ@mail.gmail.com>
 <e8c9bf61-137e-eef5-adfd-70e000e8c2b0@gmail.com>
Message-ID: <CAHz+bWaxQMG59GdLJrj4jhMkT7X3uAEghUr23_-p3zoCwW0o5A@mail.gmail.com>

Hi Duncan. I read it a looooong time ago so it's probably best if
I read it again ALONG with your corrections. Every detail matters
with these concepts so thanks a lot.

Mark

On Wed, Apr 5, 2023 at 5:12?AM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> It seems mostly correct. Here are a few quibbles:
>
> - I don't think "owner" is a good description of the parent environment.
>   Usually when I use owner in computing, there's an implication that the
> owner controls what it owns, is responsible for allocating and
> destroying it, etc.  Parent environments are targets of a pointer from
> other environments that list them as their "enclosure", but they have no
> record of their children.
>
> - The analogy that all roads lead to the search list is wrong.  There's
> no reason you couldn't create an environment whose parent was the empty
> environment.  But with the qualifier "when we start in R_GlobalEnv" it's
> correct, so this complaint is just about the wording.
>
> - The description of what Imports does is wrong.  What is described
> there is what the `import()` directive in NAMESPACE does.  The Imports
> line in DESCRIPTION just guarantees that the named package is loaded, it
> doesn't import anything.  And the `importFrom()` directive in NAMESPACE
> isn't discussed.
>
> - It gets bad near the end in the "Curveball" section.  I'd just skip
> that.  It's not at all true that all functions in a package have the
> package's namespace environment as their environment.  There are lots of
> real examples where that's not true.  Functions that maintain persistent
> records (e.g. the base function conflictRules()) often have a private
> environment, and occasionally packages import functions from other
> packages by simple assignment, so they end up in the namespace
> environment of the importer but still have the namespace environment of
> the exporter associated with them.  And the last diagram (the revised
> one with all solid lines) is just misleading.
>
> Duncan
>
> On 04/04/2023 7:53 p.m., Mark Leeds wrote:
> > obviously, everyone has different opinions on what's useful but I always
> > found this document quite
> > helpful. I think, in the past, someone said that there are some incorrect
> > statements in but I'm not sure
> > what they are.
> >
> >
> https://askming.github.io/study_notes/Stats_Comp/Note-How%20R%20searches%20and%20finds%20stuff.html
> >
> >
> > On Tue, Apr 4, 2023 at 7:06?PM Bert Gunter <bgunter.4567 at gmail.com>
> wrote:
> >
> >> The following *might* be of use to you. If you can predict what the
> various
> >> function invocations will do, I think you have a reasonable grasp of how
> >> lexical scoping works in R (contrary or supplementary opinions welcome).
> >> It is the sort of thing you will find in the references also. If this is
> >> all obvious, sorry for wasting your time.
> >> #######################
> >> search()
> >> ls()
> >> dat <- list(x =2)
> >> attach(dat,2)
> >> search()
> >> f <- function(){
> >>     g <- function() x
> >>     x <- 3
> >>     g}
> >> h <- f()
> >> g <- function()x
> >> ls()
> >> h()
> >> g()
> >> detach(dat)
> >> h()
> >> g()
> >>
> >> ##########################
> >> ## Here is what this gives starting with an empty .GlobalEnv.
> >> ##################################
> >>
> >>> search()
> >>   [1] ".GlobalEnv"        "package:tools"     "package:lattice"
> >> "tools:rstudio"
> >>   [5] "package:stats"     "package:graphics"  "package:grDevices"
> >> "package:utils"
> >>   [9] "package:datasets"  "package:methods"   "Autoloads"
> >> "package:base"
> >>> ls()
> >> character(0)
> >>> dat <- list(x =2)
> >>> attach(dat,2)
> >>> search()
> >>   [1] ".GlobalEnv"        "dat"               "package:tools"
> >> "package:lattice"
> >>   [5] "tools:rstudio"     "package:stats"     "package:graphics"
> >>   "package:grDevices"
> >>   [9] "package:utils"     "package:datasets"  "package:methods"
> >> "Autoloads"
> >> [13] "package:base"
> >>> f <- function(){
> >> +    g <- function() x
> >> +    x <- 3
> >> +    g}
> >>> h <- f()
> >>> g <- function()x
> >>> ls()
> >> [1] "dat" "f"   "g"   "h"
> >>> h()
> >> [1] 3
> >>> g()
> >> [1] 2
> >>> detach(dat)
> >>> h()
> >> [1] 3
> >>> g()
> >> Error in g() : object 'x' not found
> >>
> >> -- Bert
> >>
> >>
> >> On Tue, Apr 4, 2023 at 6:56?AM akshay kulkarni <akshay_e4 at hotmail.com>
> >> wrote:
> >>
> >>> Dear Members,
> >>>                               I have the following code typed at the
> >>> console prompt:
> >>>
> >>> y   <-   x*10
> >>>
> >>> X has not been defined and the above code throws an object not found
> >>> error. That is, the global environment does not contain x. Why doesn't
> it
> >>> look further in the environment stack, like that of packages? There are
> >>> thousands of packages that contain the variable named  x. Of course,
> that
> >>> happens if the above code is in a function (or does it?).
> >>>
> >>> What concept of R is at work in this dichotomy?
> >>>
> >>> THanking you,
> >>> Yours sincerely,
> >>> AKSHAY M KULKARNI
> >>>
> >>>          [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>>
> >>
> >>          [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Apr  5 18:59:50 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 5 Apr 2023 16:59:50 +0000
Subject: [R] on lexical scoping....
In-Reply-To: <CAGxFJbRBjrpo3c8D-vfaye1+Dc5eGb++eCaLQ+sbKojoFURy1A@mail.gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbRBjrpo3c8D-vfaye1+Dc5eGb++eCaLQ+sbKojoFURy1A@mail.gmail.com>
Message-ID: <PU4P216MB156847667C36C0F819E8A890C8909@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

dear Bert,
                  I could predict most of them, but,of course, you have not wasted my time!

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>
Sent: Wednesday, April 5, 2023 4:36 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] on lexical scoping....

The following *might* be of use to you. If you can predict what the various function invocations will do, I think you have a reasonable grasp of how lexical scoping works in R (contrary or supplementary opinions welcome).  It is the sort of thing you will find in the references also. If this is all obvious, sorry for wasting your time.
#######################
search()
ls()
dat <- list(x =2)
attach(dat,2)
search()
f <- function(){
   g <- function() x
   x <- 3
   g}
h <- f()
g <- function()x
ls()
h()
g()
detach(dat)
h()
g()

##########################
## Here is what this gives starting with an empty .GlobalEnv.
##################################

> search()
 [1] ".GlobalEnv"        "package:tools"     "package:lattice"   "tools:rstudio"
 [5] "package:stats"     "package:graphics"  "package:grDevices" "package:utils"
 [9] "package:datasets"  "package:methods"   "Autoloads"         "package:base"
> ls()
character(0)
> dat <- list(x =2)
> attach(dat,2)
> search()
 [1] ".GlobalEnv"        "dat"               "package:tools"     "package:lattice"
 [5] "tools:rstudio"     "package:stats"     "package:graphics"  "package:grDevices"
 [9] "package:utils"     "package:datasets"  "package:methods"   "Autoloads"
[13] "package:base"
> f <- function(){
+    g <- function() x
+    x <- 3
+    g}
> h <- f()
> g <- function()x
> ls()
[1] "dat" "f"   "g"   "h"
> h()
[1] 3
> g()
[1] 2
> detach(dat)
> h()
[1] 3
> g()
Error in g() : object 'x' not found

-- Bert


On Tue, Apr 4, 2023 at 6:56?AM akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
Dear Members,
                             I have the following code typed at the console prompt:

y   <-   x*10

X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).

What concept of R is at work in this dichotomy?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Apr  5 19:04:04 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 5 Apr 2023 17:04:04 +0000
Subject: [R] on lexical scoping....
In-Reply-To: <CABcYAdKa9SOBLCCRUK4qMHeVQAmgNzrY2_pi82n_6woXC7E2CA@mail.gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CABcYAdKa9SOBLCCRUK4qMHeVQAmgNzrY2_pi82n_6woXC7E2CA@mail.gmail.com>
Message-ID: <PU4P216MB15686DB38EB6408C3C8C55FEC8909@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear richard,
                        Bulls eye! thanks for your pointed reply...!

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Richard O'Keefe <raoknz at gmail.com>
Sent: Wednesday, April 5, 2023 10:30 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] on lexical scoping....

R *does* search the environment stack.

> search()
[1] ".GlobalEnv"        "package:stats"     "package:graphics"
[4] "package:grDevices" "package:utils"     "package:datasets"
[7] "package:methods"   "Autoloads"         "package:base

What you seem to be missing is that a package may contain
bindings that it does not export, as the wording of this
error message reminds us:
> utils::y
Error: 'y' is not an exported object from 'namespace:utils'

So when package/namespace goes onto the environment stack,
it's only the *exported* bindings that become visible.



On Wed, 5 Apr 2023 at 01:56, akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
Dear Members,
                             I have the following code typed at the console prompt:

y   <-   x*10

X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).

What concept of R is at work in this dichotomy?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


