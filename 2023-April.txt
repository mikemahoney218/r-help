From n|ckmwr@y @end|ng |rom gm@||@com  Sat Apr  1 20:05:36 2023
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Sat, 1 Apr 2023 19:05:36 +0100
Subject: [R] weird things in seqMK() and sqmk()
Message-ID: <CABxY9BO-07koJ61186rLpDYWWLRSPRzGkTZbbJ8jzz8=KkY9mA@mail.gmail.com>

Hello  The other say I posted a question about altering confidence limits
in the seqMK() function  in the pheno package.  I didn't get any bites but
in any case I've been trying to use this function.  It seems to me to give
very odd results - sometimes identifying 8 or 9 changepoints in a
relatively short vector of maybe 40 elements, and at other times not giving
any changepoints at all, despite visually there appearing to be
changepoints and other changepoint algorithms (pettitt etc) saying that
there are other changepoints.  Apart from the cran vignette there doesn't
seem to be anything on this function

Has anyone else used the seqMK() function and if so, have they noticed any
weird behaviour with it?

I've also lookedf at sqmk() in trendchange function.  This also seems to
give odd results, and not ones consistent with seqMK() results either

Again has anyone used these and do they know of any sites with further ifo,
as it seems v sparse about these two functions
Thanks Nick Wray

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Apr  1 22:41:51 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 1 Apr 2023 16:41:51 -0400
Subject: [R] weird things in seqMK() and sqmk()
In-Reply-To: <CABxY9BO-07koJ61186rLpDYWWLRSPRzGkTZbbJ8jzz8=KkY9mA@mail.gmail.com>
References: <CABxY9BO-07koJ61186rLpDYWWLRSPRzGkTZbbJ8jzz8=KkY9mA@mail.gmail.com>
Message-ID: <c2a31cd5-5e3e-da68-6773-b63db4f6c13b@gmail.com>

There are references listed on the help page for seqMK.  I'd start with 
those.

If you can't figure it out from that, then contacting the pheno package 
maintainer or author of the package would probably be the best step. 
This group really isn't set up for supporting contributed packages, 
though sometimes knowledgeable people here will comment.

Duncan Murdoch

On 01/04/2023 2:05 p.m., Nick Wray wrote:
> Hello  The other say I posted a question about altering confidence limits
> in the seqMK() function  in the pheno package.  I didn't get any bites but
> in any case I've been trying to use this function.  It seems to me to give
> very odd results - sometimes identifying 8 or 9 changepoints in a
> relatively short vector of maybe 40 elements, and at other times not giving
> any changepoints at all, despite visually there appearing to be
> changepoints and other changepoint algorithms (pettitt etc) saying that
> there are other changepoints.  Apart from the cran vignette there doesn't
> seem to be anything on this function
> 
> Has anyone else used the seqMK() function and if so, have they noticed any
> weird behaviour with it?
> 
> I've also lookedf at sqmk() in trendchange function.  This also seems to
> give odd results, and not ones consistent with seqMK() results either
> 
> Again has anyone used these and do they know of any sites with further ifo,
> as it seems v sparse about these two functions
> Thanks Nick Wray
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @n@@j@m@hed1994 @end|ng |rom gm@||@com  Sun Apr  2 17:09:22 2023
From: @n@@j@m@hed1994 @end|ng |rom gm@||@com (Anas Jamshed)
Date: Sun, 2 Apr 2023 20:09:22 +0500
Subject: [R] Count matrix of GSE146049
Message-ID: <CAG0CrLgJ7sejknyeBm8SXVJ-13ZWGccMBYx4MiZQCKiiuUi_jw@mail.gmail.com>

I want to get the count matrix of genes from
https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE146049. Is it
possible for GSE146049? After getting counts, I want to do TMM
normalization.

	[[alternative HTML version deleted]]


From m@rc_grt @end|ng |rom y@hoo@|r  Sun Apr  2 17:18:50 2023
From: m@rc_grt @end|ng |rom y@hoo@|r (Marc Girondot)
Date: Sun, 2 Apr 2023 17:18:50 +0200
Subject: [R] Count matrix of GSE146049
In-Reply-To: <CAG0CrLgJ7sejknyeBm8SXVJ-13ZWGccMBYx4MiZQCKiiuUi_jw@mail.gmail.com>
References: <CAG0CrLgJ7sejknyeBm8SXVJ-13ZWGccMBYx4MiZQCKiiuUi_jw@mail.gmail.com>
Message-ID: <88b2ab2a-b41b-a8ba-ada0-1c6956236471@yahoo.fr>

Dear Anas Jamshed,

This is a list for R, not for specific genomic question using R.

You will have more chance to have answers using a genomic list.

And when you ask question, it is better to not use abbreviation that 
only people from that field will understand: TMM ?

Marc

Le 02/04/2023 ? 17:09, Anas Jamshed a ?crit?:
> I want to get the count matrix of genes from
> https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE146049. Is it
> possible for GSE146049? After getting counts, I want to do TMM
> normalization.
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From peter@|@ng|e|der @end|ng |rom gm@||@com  Sun Apr  2 18:28:09 2023
From: peter@|@ng|e|der @end|ng |rom gm@||@com (Peter Langfelder)
Date: Mon, 3 Apr 2023 00:28:09 +0800
Subject: [R] Count matrix of GSE146049
In-Reply-To: <CAG0CrLgJ7sejknyeBm8SXVJ-13ZWGccMBYx4MiZQCKiiuUi_jw@mail.gmail.com>
References: <CAG0CrLgJ7sejknyeBm8SXVJ-13ZWGccMBYx4MiZQCKiiuUi_jw@mail.gmail.com>
Message-ID: <CA+hbrhXW5DyL20oVDA7+=n4jcqL4W_Kk_6bQNYNro6NoTqWs0Q@mail.gmail.com>

It's a microarray data set, so I don't think you would want to apply
an RNA-seq pipeline. You'd be better off applying a normalization
appropriate for this type of microarray data.

HTH,

Peter

On Sun, Apr 2, 2023 at 11:09?PM Anas Jamshed <anasjamshed1994 at gmail.com> wrote:
>
> I want to get the count matrix of genes from
> https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE146049. Is it
> possible for GSE146049? After getting counts, I want to do TMM
> normalization.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @n@@j@m@hed1994 @end|ng |rom gm@||@com  Sun Apr  2 18:30:15 2023
From: @n@@j@m@hed1994 @end|ng |rom gm@||@com (Anas Jamshed)
Date: Sun, 2 Apr 2023 21:30:15 +0500
Subject: [R] Count matrix of GSE146049
In-Reply-To: <CA+hbrhXW5DyL20oVDA7+=n4jcqL4W_Kk_6bQNYNro6NoTqWs0Q@mail.gmail.com>
References: <CAG0CrLgJ7sejknyeBm8SXVJ-13ZWGccMBYx4MiZQCKiiuUi_jw@mail.gmail.com>
 <CA+hbrhXW5DyL20oVDA7+=n4jcqL4W_Kk_6bQNYNro6NoTqWs0Q@mail.gmail.com>
Message-ID: <CAG0CrLiC+WTG-Aa0XMZNAih-gDRzKyYJBhnMhdH18JMwuAszBw@mail.gmail.com>

How can I subscribe to R genomic list?

On Sun, 2 Apr 2023, 9:28 pm Peter Langfelder, <peter.langfelder at gmail.com>
wrote:

> It's a microarray data set, so I don't think you would want to apply
> an RNA-seq pipeline. You'd be better off applying a normalization
> appropriate for this type of microarray data.
>
> HTH,
>
> Peter
>
> On Sun, Apr 2, 2023 at 11:09?PM Anas Jamshed <anasjamshed1994 at gmail.com>
> wrote:
> >
> > I want to get the count matrix of genes from
> > https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE146049. Is it
> > possible for GSE146049? After getting counts, I want to do TMM
> > normalization.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Sun Apr  2 21:12:59 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 2 Apr 2023 12:12:59 -0700
Subject: [R] Count matrix of GSE146049
In-Reply-To: <CAG0CrLiC+WTG-Aa0XMZNAih-gDRzKyYJBhnMhdH18JMwuAszBw@mail.gmail.com>
References: <CAG0CrLgJ7sejknyeBm8SXVJ-13ZWGccMBYx4MiZQCKiiuUi_jw@mail.gmail.com>
 <CA+hbrhXW5DyL20oVDA7+=n4jcqL4W_Kk_6bQNYNro6NoTqWs0Q@mail.gmail.com>
 <CAG0CrLiC+WTG-Aa0XMZNAih-gDRzKyYJBhnMhdH18JMwuAszBw@mail.gmail.com>
Message-ID: <CAGxFJbR=Y-QXzJ0HfmU-MV-R-xVHqksvC7OuthVmDykBGzZoiQ@mail.gmail.com>

Go to Bioconductor.org

-- Bert

On Sun, Apr 2, 2023 at 9:38?AM Anas Jamshed <anasjamshed1994 at gmail.com> wrote:
>
> How can I subscribe to R genomic list?
>
> On Sun, 2 Apr 2023, 9:28 pm Peter Langfelder, <peter.langfelder at gmail.com>
> wrote:
>
> > It's a microarray data set, so I don't think you would want to apply
> > an RNA-seq pipeline. You'd be better off applying a normalization
> > appropriate for this type of microarray data.
> >
> > HTH,
> >
> > Peter
> >
> > On Sun, Apr 2, 2023 at 11:09?PM Anas Jamshed <anasjamshed1994 at gmail.com>
> > wrote:
> > >
> > > I want to get the count matrix of genes from
> > > https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE146049. Is it
> > > possible for GSE146049? After getting counts, I want to do TMM
> > > normalization.
> > >
> > >         [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @@mue|@gr@nje@ud @end|ng |rom |n@erm@|r  Sun Apr  2 23:39:13 2023
From: @@mue|@gr@nje@ud @end|ng |rom |n@erm@|r (Samuel Granjeaud IR/Inserm)
Date: Sun, 2 Apr 2023 23:39:13 +0200
Subject: [R] Should help of estimate in t.test be corrected?
Message-ID: <66fec2cf-c0c9-d821-f32d-8b6222fc5be3@inserm.fr>

Hi,

Not important, but IMHO the estimate component of the t.test holds an 
estimate of mean of each group, never a difference. The doc says 
"estimate??? the estimated mean or difference in means depending on 
whether it was a one-sample test or a two-sample test."

 > t.test(0:4)$estimate
mean of x
 ??????? 2
 > t.test(0:4, 5:9)$estimate
mean of x mean of y
 ??????? 2???????? 7

Best,
Samuel


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Apr  3 12:10:09 2023
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 3 Apr 2023 10:10:09 +0000
Subject: [R] Should help of estimate in t.test be corrected?
In-Reply-To: <66fec2cf-c0c9-d821-f32d-8b6222fc5be3@inserm.fr>
References: <66fec2cf-c0c9-d821-f32d-8b6222fc5be3@inserm.fr>
Message-ID: <6a6a75959ad04255aaae478b5ba7eaf6@SRVEXCHCM1302.precheza.cz>

Hi

You need to use paired option

> t.test(x=0:4, y=sample(5:9), paired=TRUE)$estimate
mean difference
             -5

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Samuel Granjeaud
> IR/Inserm
> Sent: Sunday, April 2, 2023 11:39 PM
> To: r-help at r-project.org
> Subject: [R] Should help of estimate in t.test be corrected?
>
> Hi,
>
> Not important, but IMHO the estimate component of the t.test holds an
> estimate of mean of each group, never a difference. The doc says
> "estimate    the estimated mean or difference in means depending on whether 
> it
> was a one-sample test or a two-sample test."
>
>  > t.test(0:4)$estimate
> mean of x
>          2
>  > t.test(0:4, 5:9)$estimate
> mean of x mean of y
>          2         7
>
> Best,
> Samuel
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From jr@| @end|ng |rom po@teo@no  Mon Apr  3 14:08:38 2023
From: jr@| @end|ng |rom po@teo@no (Rasmus Liland)
Date: Mon,  3 Apr 2023 12:08:38 +0000
Subject: [R] seqMK function
In-Reply-To: <CABxY9BPFU1YB90Vf8RUKusRJ1BS3P+VmqV==NghBxcvqss9CCA@mail.gmail.com>
References: <CABxY9BPFU1YB90Vf8RUKusRJ1BS3P+VmqV==NghBxcvqss9CCA@mail.gmail.com>
Message-ID: <ZCrBxg7xGcDd14dk@posteo.no>

Dear Nick,

Looking at dput(pheno::seqMK), 
dput(pheno::tau), and [1], I think you 
need to change the function pheno::tau 
to change the confidence level ... R

[1] https://mannkendall.github.io/about.html#application-of-the-seasonal-mann-kendall-test


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Apr  3 14:23:12 2023
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 3 Apr 2023 12:23:12 +0000
Subject: [R] Should help of estimate in t.test be corrected?
In-Reply-To: <4a9791fc-17b5-48d8-3ba2-96fa1823c7c5@inserm.fr>
References: <66fec2cf-c0c9-d821-f32d-8b6222fc5be3@inserm.fr>
 <6a6a75959ad04255aaae478b5ba7eaf6@SRVEXCHCM1302.precheza.cz>
 <4a9791fc-17b5-48d8-3ba2-96fa1823c7c5@inserm.fr>
Message-ID: <34dad510cf2140b0a9f4f14fa00bc4c2@SRVEXCHCM1302.precheza.cz>

Hallo, 
you are probably right that 

"the estimated mean or difference in means depending on whether it was a one-sample test or a two-sample test"

should be rephrased to

"the estimated mean or difference in means depending on whether it was a one-sample test, two-sample test or two sample paired test"

Cheers
Petr

> -----Original Message-----
> From: Samuel Granjeaud IR/Inserm <samuel.granjeaud at inserm.fr>
> Sent: Monday, April 3, 2023 1:25 PM
> To: PIKAL Petr <petr.pikal at precheza.cz>; r-help at r-project.org
> Subject: Re: [R] Should help of estimate in t.test be corrected?
> 
> Hi
> 
> Thanks for your feedback. I didn't think about that.
> 
> Still, the mean difference is computed for paired, not because there are two
> samples. IMHO, the help should be updated.
> 
> Best,
> Samuel
> 
> Le 2023-04-03 ? 12:10, PIKAL Petr a ?crit :
> > Hi
> >
> > You need to use paired option
> >
> >> t.test(x=0:4, y=sample(5:9), paired=TRUE)$estimate
> > mean difference
> >               -5
> >
> > Cheers
> > Petr
> >
> >> -----Original Message-----
> >> From: R-help <r-help-bounces at r-project.org> On Behalf Of Samuel
> >> Granjeaud IR/Inserm
> >> Sent: Sunday, April 2, 2023 11:39 PM
> >> To: r-help at r-project.org
> >> Subject: [R] Should help of estimate in t.test be corrected?
> >>
> >> Hi,
> >>
> >> Not important, but IMHO the estimate component of the t.test holds an
> >> estimate of mean of each group, never a difference. The doc says
> >> "estimate    the estimated mean or difference in means depending on
> whether
> >> it
> >> was a one-sample test or a two-sample test."
> >>
> >>   > t.test(0:4)$estimate
> >> mean of x
> >>           2
> >>   > t.test(0:4, 5:9)$estimate
> >> mean of x mean of y
> >>           2         7
> >>
> >> Best,
> >> Samuel
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.

From j@p@rk4 @end|ng |rom u|c@edu  Mon Apr  3 17:08:59 2023
From: j@p@rk4 @end|ng |rom u|c@edu (Sparks, John)
Date: Mon, 3 Apr 2023 15:08:59 +0000
Subject: [R] Simple Stacking of Two Columns
Message-ID: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>

Hi R-Helpers,

Sorry to bother you, but I have a simple task that I can't figure out how to do.

For example, I have some names in two columns

NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))

and I simply want to get a single column
NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
> NamesLong
  Names
1   Tom
2  Dick
3 Larry
4 Curly


Stack produces an error
NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
Error in if (drop) { : argument is of length zero

So does bind_rows
> NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
Error in `dplyr::bind_rows()`:
! Argument 1 must be a data frame or a named atomic vector.
Run `rlang::last_error()` to see where the error occurred.

I tried making separate dataframes to get around the error in bind_rows but it puts the data in two different columns
Name1<-data.frame(c("Tom","Dick"))
Name2<-data.frame(c("Larry","Curly"))
NamesLong<-dplyr::bind_rows(Name1,Name2)
> NamesLong
  c..Tom....Dick.. c..Larry....Curly..
1              Tom                <NA>
2             Dick                <NA>
3             <NA>               Larry
4             <NA>               Curly

gather makes no change to the data
NamesLong<-gather(NamesWide,Name1,Name2)
> NamesLong
  Name1 Name2
1   Tom Larry
2  Dick Curly


Please help me solve what should be a very simple problem.

Thanks,
John Sparks





	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Mon Apr  3 17:36:13 2023
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 3 Apr 2023 18:36:13 +0300
Subject: [R] Simple Stacking of Two Columns
In-Reply-To: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
References: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
Message-ID: <66199F30-6AF1-4C4A-BF4A-6F5B1DFC8BDE@gmail.com>

pivot_longer()

Sent from my iPhone

> On 3 Apr 2023, at 18:09, Sparks, John <jspark4 at uic.edu> wrote:
> 
> ?Hi R-Helpers,
> 
> Sorry to bother you, but I have a simple task that I can't figure out how to do.
> 
> For example, I have some names in two columns
> 
> NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
> 
> and I simply want to get a single column
> NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
>> NamesLong
>  Names
> 1   Tom
> 2  Dick
> 3 Larry
> 4 Curly
> 
> 
> Stack produces an error
> NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
> Error in if (drop) { : argument is of length zero
> 
> So does bind_rows
>> NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
> Error in `dplyr::bind_rows()`:
> ! Argument 1 must be a data frame or a named atomic vector.
> Run `rlang::last_error()` to see where the error occurred.
> 
> I tried making separate dataframes to get around the error in bind_rows but it puts the data in two different columns
> Name1<-data.frame(c("Tom","Dick"))
> Name2<-data.frame(c("Larry","Curly"))
> NamesLong<-dplyr::bind_rows(Name1,Name2)
>> NamesLong
>  c..Tom....Dick.. c..Larry....Curly..
> 1              Tom                <NA>
> 2             Dick                <NA>
> 3             <NA>               Larry
> 4             <NA>               Curly
> 
> gather makes no change to the data
> NamesLong<-gather(NamesWide,Name1,Name2)
>> NamesLong
>  Name1 Name2
> 1   Tom Larry
> 2  Dick Curly
> 
> 
> Please help me solve what should be a very simple problem.
> 
> Thanks,
> John Sparks
> 
> 
> 
> 
> 
>    [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@rc_@chw@rtz @end|ng |rom me@com  Mon Apr  3 17:44:21 2023
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Mon, 3 Apr 2023 11:44:21 -0400
Subject: [R] Simple Stacking of Two Columns
In-Reply-To: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
References: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
Message-ID: <etPan.642af455.4a1014c4.57e@me.com>

Hi,

You were on the right track using stack(), but you just pass the entire data frame as a single object, not the separate columns:

> stack(NamesWide)
? values ? ind
1 ? ?Tom Name1
2 ? Dick Name1
3 ?Larry Name2
4 ?Curly Name2

Note that stack also returns the index (second column of 'ind' values), which tells you which column in the source data frame the stacked values originated from.

Thus, if you just want the actual data:

> stack(NamesWide)$values
[1] "Tom" ? "Dick" ?"Larry" "Curly"

returns a vector, or:

> stack(NamesWide)[, 1, drop = FALSE]
? values
1 ? ?Tom
2 ? Dick
3 ?Larry
4 ?Curly

which returns a data frame with a single column named 'values'.

Regards,

Marc Schwartz


On April 3, 2023 at 11:08:59 AM, Sparks, John (jspark4 at uic.edu (mailto:jspark4 at uic.edu)) wrote:

> Hi R-Helpers,
>
> Sorry to bother you, but I have a simple task that I can't figure out how to do.
>
> For example, I have some names in two columns
>
> NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
>
> and I simply want to get a single column
> NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
> > NamesLong
> Names
> 1 Tom
> 2 Dick
> 3 Larry
> 4 Curly
>
>
> Stack produces an error
> NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
> Error in if (drop) { : argument is of length zero
>
> So does bind_rows
> > NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
> Error in `dplyr::bind_rows()`:
> ! Argument 1 must be a data frame or a named atomic vector.
> Run `rlang::last_error()` to see where the error occurred.
>
> I tried making separate dataframes to get around the error in bind_rows but it puts the data in two different columns
> Name1<-data.frame(c("Tom","Dick"))
> Name2<-data.frame(c("Larry","Curly"))
> NamesLong<-dplyr::bind_rows(Name1,Name2)
> > NamesLong
> c..Tom....Dick.. c..Larry....Curly..
> 1 Tom  
> 2 Dick  
> 3 Larry
> 4 Curly
>
> gather makes no change to the data
> NamesLong<-gather(NamesWide,Name1,Name2)
> > NamesLong
> Name1 Name2
> 1 Tom Larry
> 2 Dick Curly
>
>
> Please help me solve what should be a very simple problem.
>
> Thanks,
> John Sparks
>
>
>
>
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Mon Apr  3 18:23:33 2023
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Mon, 3 Apr 2023 16:23:33 +0000
Subject: [R] Simple Stacking of Two Columns
In-Reply-To: <etPan.642af455.4a1014c4.57e@me.com>
References: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
 <etPan.642af455.4a1014c4.57e@me.com>
Message-ID: <SN4PR22MB28240D4AD51A007E60E692D5CF929@SN4PR22MB2824.namprd22.prod.outlook.com>

My first thought was pivot_longer, and stack() is new to me. 
How about append(c1,c2) as another solution? Or data.frame(append(c1,c2)) if you want that form.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Marc Schwartz via R-help
Sent: Monday, April 3, 2023 11:44 AM
To: Sparks, John <jspark4 at uic.edu>; r-help at r-project.org
Subject: Re: [R] Simple Stacking of Two Columns

[External Email]

Hi,

You were on the right track using stack(), but you just pass the entire data frame as a single object, not the separate columns:

> stack(NamesWide)
  values   ind
1    Tom Name1
2   Dick Name1
3  Larry Name2
4  Curly Name2

Note that stack also returns the index (second column of 'ind' values), which tells you which column in the source data frame the stacked values originated from.

Thus, if you just want the actual data:

> stack(NamesWide)$values
[1] "Tom"   "Dick"  "Larry" "Curly"

returns a vector, or:

> stack(NamesWide)[, 1, drop = FALSE]
  values
1    Tom
2   Dick
3  Larry
4  Curly

which returns a data frame with a single column named 'values'.

Regards,

Marc Schwartz


On April 3, 2023 at 11:08:59 AM, Sparks, John (jspark4 at uic.edu (mailto:jspark4 at uic.edu)) wrote:

> Hi R-Helpers,
>
> Sorry to bother you, but I have a simple task that I can't figure out how to do.
>
> For example, I have some names in two columns
>
> NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
>
> and I simply want to get a single column
> NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
> > NamesLong
> Names
> 1 Tom
> 2 Dick
> 3 Larry
> 4 Curly
>
>
> Stack produces an error
> NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
> Error in if (drop) { : argument is of length zero
>
> So does bind_rows
> > NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
> Error in `dplyr::bind_rows()`:
> ! Argument 1 must be a data frame or a named atomic vector.
> Run `rlang::last_error()` to see where the error occurred.
>
> I tried making separate dataframes to get around the error in bind_rows but it puts the data in two different columns
> Name1<-data.frame(c("Tom","Dick"))
> Name2<-data.frame(c("Larry","Curly"))
> NamesLong<-dplyr::bind_rows(Name1,Name2)
> > NamesLong
> c..Tom....Dick.. c..Larry....Curly..
> 1 Tom
> 2 Dick
> 3 Larry
> 4 Curly
>
> gather makes no change to the data
> NamesLong<-gather(NamesWide,Name1,Name2)
> > NamesLong
> Name1 Name2
> 1 Tom Larry
> 2 Dick Curly
>
>
> Please help me solve what should be a very simple problem.
>
> Thanks,
> John Sparks
>
>
>
>
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7Ce0f22e022c0b48d2766408db345aa062%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161336072628296%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=MEaORpaFihsIHu3Iu2GwO15ey%2BvZP3Wxa6UiS3g0PyQ%3D&reserved=0
> PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7Ce0f22e022c0b48d2766408db345aa062%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161336072628296%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=ZwKZkaGoEVMu8Jp%2BbcIj%2FLVi9%2Fwug%2Fi48uarb8yg5KY%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7Ce0f22e022c0b48d2766408db345aa062%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161336072628296%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=MEaORpaFihsIHu3Iu2GwO15ey%2BvZP3Wxa6UiS3g0PyQ%3D&reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7Ce0f22e022c0b48d2766408db345aa062%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161336072628296%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=ZwKZkaGoEVMu8Jp%2BbcIj%2FLVi9%2Fwug%2Fi48uarb8yg5KY%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Apr  3 18:26:10 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 03 Apr 2023 09:26:10 -0700
Subject: [R] Simple Stacking of Two Columns
In-Reply-To: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
References: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
Message-ID: <D148C450-D53D-4962-9043-8F5416AD510D@dcn.davis.ca.us>

unname(unlist(NamesWide))

On April 3, 2023 8:08:59 AM PDT, "Sparks, John" <jspark4 at uic.edu> wrote:
>Hi R-Helpers,
>
>Sorry to bother you, but I have a simple task that I can't figure out how to do.
>
>For example, I have some names in two columns
>
>NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
>
>and I simply want to get a single column
>NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
>> NamesLong
>  Names
>1   Tom
>2  Dick
>3 Larry
>4 Curly
>
>
>Stack produces an error
>NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
>Error in if (drop) { : argument is of length zero
>
>So does bind_rows
>> NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
>Error in `dplyr::bind_rows()`:
>! Argument 1 must be a data frame or a named atomic vector.
>Run `rlang::last_error()` to see where the error occurred.
>
>I tried making separate dataframes to get around the error in bind_rows but it puts the data in two different columns
>Name1<-data.frame(c("Tom","Dick"))
>Name2<-data.frame(c("Larry","Curly"))
>NamesLong<-dplyr::bind_rows(Name1,Name2)
>> NamesLong
>  c..Tom....Dick.. c..Larry....Curly..
>1              Tom                <NA>
>2             Dick                <NA>
>3             <NA>               Larry
>4             <NA>               Curly
>
>gather makes no change to the data
>NamesLong<-gather(NamesWide,Name1,Name2)
>> NamesLong
>  Name1 Name2
>1   Tom Larry
>2  Dick Curly
>
>
>Please help me solve what should be a very simple problem.
>
>Thanks,
>John Sparks
>
>
>
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @@mue|@gr@nje@ud @end|ng |rom |n@erm@|r  Mon Apr  3 13:24:55 2023
From: @@mue|@gr@nje@ud @end|ng |rom |n@erm@|r (Samuel Granjeaud IR/Inserm)
Date: Mon, 3 Apr 2023 13:24:55 +0200
Subject: [R] Should help of estimate in t.test be corrected?
In-Reply-To: <6a6a75959ad04255aaae478b5ba7eaf6@SRVEXCHCM1302.precheza.cz>
References: <66fec2cf-c0c9-d821-f32d-8b6222fc5be3@inserm.fr>
 <6a6a75959ad04255aaae478b5ba7eaf6@SRVEXCHCM1302.precheza.cz>
Message-ID: <4a9791fc-17b5-48d8-3ba2-96fa1823c7c5@inserm.fr>

Hi

Thanks for your feedback. I didn't think about that.

Still, the mean difference is computed for paired, not because there are 
two samples. IMHO, the help should be updated.

Best,
Samuel

Le 2023-04-03 ? 12:10, PIKAL Petr a ?crit?:
> Hi
>
> You need to use paired option
>
>> t.test(x=0:4, y=sample(5:9), paired=TRUE)$estimate
> mean difference
>               -5
>
> Cheers
> Petr
>
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Samuel Granjeaud
>> IR/Inserm
>> Sent: Sunday, April 2, 2023 11:39 PM
>> To: r-help at r-project.org
>> Subject: [R] Should help of estimate in t.test be corrected?
>>
>> Hi,
>>
>> Not important, but IMHO the estimate component of the t.test holds an
>> estimate of mean of each group, never a difference. The doc says
>> "estimate    the estimated mean or difference in means depending on whether
>> it
>> was a one-sample test or a two-sample test."
>>
>>   > t.test(0:4)$estimate
>> mean of x
>>           2
>>   > t.test(0:4, 5:9)$estimate
>> mean of x mean of y
>>           2         7
>>
>> Best,
>> Samuel
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Mon Apr  3 21:14:58 2023
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Mon, 3 Apr 2023 19:14:58 +0000
Subject: [R] Should help of estimate in t.test be corrected?
In-Reply-To: <4a9791fc-17b5-48d8-3ba2-96fa1823c7c5@inserm.fr>
References: <66fec2cf-c0c9-d821-f32d-8b6222fc5be3@inserm.fr>
 <6a6a75959ad04255aaae478b5ba7eaf6@SRVEXCHCM1302.precheza.cz>
 <4a9791fc-17b5-48d8-3ba2-96fa1823c7c5@inserm.fr>
Message-ID: <SN4PR22MB28240ED4A01334A79B0B3171CF929@SN4PR22MB2824.namprd22.prod.outlook.com>

IMHO The difference makes sense for paired samples. For unpaired samples it is just the difference in means. I think presenting the means (and assuming the audience can perform subtraction) conveys more information. The interpretation of a difference of 5 might be influenced if I have means of -3, 2, or 4, 9, or 2000, 2005. 
Tim


-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Samuel Granjeaud IR/Inserm
Sent: Monday, April 3, 2023 7:25 AM
To: PIKAL Petr <petr.pikal at precheza.cz>; r-help at r-project.org
Subject: Re: [R] Should help of estimate in t.test be corrected?

[External Email]

Hi

Thanks for your feedback. I didn't think about that.

Still, the mean difference is computed for paired, not because there are two samples. IMHO, the help should be updated.

Best,
Samuel

Le 2023-04-03 ? 12:10, PIKAL Petr a ?crit :
> Hi
>
> You need to use paired option
>
>> t.test(x=0:4, y=sample(5:9), paired=TRUE)$estimate
> mean difference
>               -5
>
> Cheers
> Petr
>
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Samuel 
>> Granjeaud IR/Inserm
>> Sent: Sunday, April 2, 2023 11:39 PM
>> To: r-help at r-project.org
>> Subject: [R] Should help of estimate in t.test be corrected?
>>
>> Hi,
>>
>> Not important, but IMHO the estimate component of the t.test holds an 
>> estimate of mean of each group, never a difference. The doc says
>> "estimate    the estimated mean or difference in means depending on whether
>> it
>> was a one-sample test or a two-sample test."
>>
>>   > t.test(0:4)$estimate
>> mean of x
>>           2
>>   > t.test(0:4, 5:9)$estimate
>> mean of x mean of y
>>           2         7
>>
>> Best,
>> Samuel
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fsta
>> t.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.e
>> du%7Cdd06e263220c464ea0c908db3475a677%7C0d4da0f84a314d76ace60a62331e1
>> b84%7C0%7C0%7C638161452151623376%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
>> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7
>> C&sdata=a7zlFppg4iG2uyMH7mpgyoLTIxXG8F3dx3FPt6YfLdc%3D&reserved=0
>> PLEASE do read the posting guide 
>> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.
>> r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C
>> dd06e263220c464ea0c908db3475a677%7C0d4da0f84a314d76ace60a62331e1b84%7
>> C0%7C0%7C638161452151623376%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwM
>> DAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sda
>> ta=e%2B0jDRNJRJJ%2BE%2F091LZxD5%2BUhJAz%2FzSjJ7YZhYdFhDk%3D&reserved=
>> 0 and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7Cdd06e263220c464ea0c908db3475a677%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161452151623376%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=a7zlFppg4iG2uyMH7mpgyoLTIxXG8F3dx3FPt6YfLdc%3D&reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7Cdd06e263220c464ea0c908db3475a677%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161452151623376%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=e%2B0jDRNJRJJ%2BE%2F091LZxD5%2BUhJAz%2FzSjJ7YZhYdFhDk%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.


From tuech|er @end|ng |rom gmx@@t  Mon Apr  3 22:39:08 2023
From: tuech|er @end|ng |rom gmx@@t (Heinz Tuechler)
Date: Mon, 3 Apr 2023 22:39:08 +0200
Subject: [R] Simple Stacking of Two Columns
In-Reply-To: <D148C450-D53D-4962-9043-8F5416AD510D@dcn.davis.ca.us>
References: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
 <D148C450-D53D-4962-9043-8F5416AD510D@dcn.davis.ca.us>
Message-ID: <36af214a-c628-4de0-80e1-797d3a6a4d6c@gmx.at>

Jeff Newmiller wrote/hat geschrieben on/am 03.04.2023 18:26:
> unname(unlist(NamesWide))
Why not:

NamesWide <- data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
NamesLong <- data.frame(Names=with(NamesWide, c(Name1, Name2)))

>
> On April 3, 2023 8:08:59 AM PDT, "Sparks, John" <jspark4 at uic.edu> wrote:
>> Hi R-Helpers,
>>
>> Sorry to bother you, but I have a simple task that I can't figure out how to do.
>>
>> For example, I have some names in two columns
>>
>> NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
>>
>> and I simply want to get a single column
>> NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
>>> NamesLong
>>  Names
>> 1   Tom
>> 2  Dick
>> 3 Larry
>> 4 Curly
>>
>>
>> Stack produces an error
>> NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
>> Error in if (drop) { : argument is of length zero
>>
>> So does bind_rows
>>> NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
>> Error in `dplyr::bind_rows()`:
>> ! Argument 1 must be a data frame or a named atomic vector.
>> Run `rlang::last_error()` to see where the error occurred.
>>
>> I tried making separate dataframes to get around the error in bind_rows but it puts the data in two different columns
>> Name1<-data.frame(c("Tom","Dick"))
>> Name2<-data.frame(c("Larry","Curly"))
>> NamesLong<-dplyr::bind_rows(Name1,Name2)
>>> NamesLong
>>  c..Tom....Dick.. c..Larry....Curly..
>> 1              Tom                <NA>
>> 2             Dick                <NA>
>> 3             <NA>               Larry
>> 4             <NA>               Curly
>>
>> gather makes no change to the data
>> NamesLong<-gather(NamesWide,Name1,Name2)
>>> NamesLong
>>  Name1 Name2
>> 1   Tom Larry
>> 2  Dick Curly
>>
>>
>> Please help me solve what should be a very simple problem.
>>
>> Thanks,
>> John Sparks
>>
>>
>>
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From @vi@e@gross m@iii@g oii gm@ii@com  Tue Apr  4 03:28:15 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Mon, 3 Apr 2023 21:28:15 -0400
Subject: [R] Simple Stacking of Two Columns
In-Reply-To: <36af214a-c628-4de0-80e1-797d3a6a4d6c@gmx.at>
References: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
 <D148C450-D53D-4962-9043-8F5416AD510D@dcn.davis.ca.us>
 <36af214a-c628-4de0-80e1-797d3a6a4d6c@gmx.at>
Message-ID: <002901d96694$baeb8350$30c289f0$@gmail.com>

I may be missing something but using the plain old c() combine function
seems to work fine:

df <- data.frame(left = 1:5, right = 6:10)
df.combined <- data.frame(comb = c(df$left, df$right))

df
  left right
1    1     6
2    2     7
3    3     8
4    4     9
5    5    10

df.combined
   comb
1     1
2     2
3     3
4     4
5     5
6     6
7     7
8     8
9     9
10   10



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Heinz Tuechler
Sent: Monday, April 3, 2023 4:39 PM
To: r-help at r-project.org
Subject: Re: [R] Simple Stacking of Two Columns

Jeff Newmiller wrote/hat geschrieben on/am 03.04.2023 18:26:
> unname(unlist(NamesWide))
Why not:

NamesWide <- data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
NamesLong <- data.frame(Names=with(NamesWide, c(Name1, Name2)))

>
> On April 3, 2023 8:08:59 AM PDT, "Sparks, John" <jspark4 at uic.edu> wrote:
>> Hi R-Helpers,
>>
>> Sorry to bother you, but I have a simple task that I can't figure out how
to do.
>>
>> For example, I have some names in two columns
>>
>> NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
>>
>> and I simply want to get a single column
>> NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
>>> NamesLong
>>  Names
>> 1   Tom
>> 2  Dick
>> 3 Larry
>> 4 Curly
>>
>>
>> Stack produces an error
>> NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
>> Error in if (drop) { : argument is of length zero
>>
>> So does bind_rows
>>> NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
>> Error in `dplyr::bind_rows()`:
>> ! Argument 1 must be a data frame or a named atomic vector.
>> Run `rlang::last_error()` to see where the error occurred.
>>
>> I tried making separate dataframes to get around the error in bind_rows
but it puts the data in two different columns
>> Name1<-data.frame(c("Tom","Dick"))
>> Name2<-data.frame(c("Larry","Curly"))
>> NamesLong<-dplyr::bind_rows(Name1,Name2)
>>> NamesLong
>>  c..Tom....Dick.. c..Larry....Curly..
>> 1              Tom                <NA>
>> 2             Dick                <NA>
>> 3             <NA>               Larry
>> 4             <NA>               Curly
>>
>> gather makes no change to the data
>> NamesLong<-gather(NamesWide,Name1,Name2)
>>> NamesLong
>>  Name1 Name2
>> 1   Tom Larry
>> 2  Dick Curly
>>
>>
>> Please help me solve what should be a very simple problem.
>>
>> Thanks,
>> John Sparks
>>
>>
>>
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Tue Apr  4 03:54:17 2023
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Tue, 4 Apr 2023 01:54:17 +0000
Subject: [R] Simple Stacking of Two Columns
In-Reply-To: <002901d96694$baeb8350$30c289f0$@gmail.com>
References: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
 <D148C450-D53D-4962-9043-8F5416AD510D@dcn.davis.ca.us>
 <36af214a-c628-4de0-80e1-797d3a6a4d6c@gmx.at>
 <002901d96694$baeb8350$30c289f0$@gmail.com>
Message-ID: <SN4PR22MB28245086367CD9F434201D1ECF939@SN4PR22MB2824.namprd22.prod.outlook.com>

Combined, the answers are close to an example in the documentation for microbenchmark where they (in part) look at execution times for c() versus append(). Here is the code, but c() has the shortest execution time in this example. If I remove a3 and a4 then c() is significantly shorter than append().

install.packages('microbenchmark')
library(microbenchmark)
c1 <- c("Lilia","Sam")
c2 <- c("Skywalker","Voldemort")
res <- microbenchmark(a1 <- c(c1, c2),
                      a2 <- append(c1, c2),
                      a3 <- {c3 <- data.frame(Name1=c1, Name2=c2)
                        stack(c3)},
                      a4 <- {c3 <- data.frame(Name1=c1, Name2=c2)
                        data.frame(Names=with(c3, c(Name1, Name2)))},
                      times=100L)
print(res)

    min     lq   mean median     uq     max neval cld
    500    900   1647   1700   1900   11000   100 a  
   2300   3000   4604   4800   5300   14600   100 a  
 779500 812950 843367 832750 868800 1129300   100   c
 486800 506650 527375 527950 544000  621900   100  b






-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of avi.e.gross at gmail.com
Sent: Monday, April 3, 2023 9:28 PM
To: 'Heinz Tuechler' <tuechler at gmx.at>; r-help at r-project.org
Subject: Re: [R] Simple Stacking of Two Columns

[External Email]

I may be missing something but using the plain old c() combine function seems to work fine:

df <- data.frame(left = 1:5, right = 6:10) df.combined <- data.frame(comb = c(df$left, df$right))

df
  left right
1    1     6
2    2     7
3    3     8
4    4     9
5    5    10

df.combined
   comb
1     1
2     2
3     3
4     4
5     5
6     6
7     7
8     8
9     9
10   10



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Heinz Tuechler
Sent: Monday, April 3, 2023 4:39 PM
To: r-help at r-project.org
Subject: Re: [R] Simple Stacking of Two Columns

Jeff Newmiller wrote/hat geschrieben on/am 03.04.2023 18:26:
> unname(unlist(NamesWide))
Why not:

NamesWide <- data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
NamesLong <- data.frame(Names=with(NamesWide, c(Name1, Name2)))

>
> On April 3, 2023 8:08:59 AM PDT, "Sparks, John" <jspark4 at uic.edu> wrote:
>> Hi R-Helpers,
>>
>> Sorry to bother you, but I have a simple task that I can't figure out 
>> how
to do.
>>
>> For example, I have some names in two columns
>>
>> NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
>>
>> and I simply want to get a single column
>> NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
>>> NamesLong
>>  Names
>> 1   Tom
>> 2  Dick
>> 3 Larry
>> 4 Curly
>>
>>
>> Stack produces an error
>> NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
>> Error in if (drop) { : argument is of length zero
>>
>> So does bind_rows
>>> NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
>> Error in `dplyr::bind_rows()`:
>> ! Argument 1 must be a data frame or a named atomic vector.
>> Run `rlang::last_error()` to see where the error occurred.
>>
>> I tried making separate dataframes to get around the error in 
>> bind_rows
but it puts the data in two different columns
>> Name1<-data.frame(c("Tom","Dick"))
>> Name2<-data.frame(c("Larry","Curly"))
>> NamesLong<-dplyr::bind_rows(Name1,Name2)
>>> NamesLong
>>  c..Tom....Dick.. c..Larry....Curly..
>> 1              Tom                <NA>
>> 2             Dick                <NA>
>> 3             <NA>               Larry
>> 4             <NA>               Curly
>>
>> gather makes no change to the data
>> NamesLong<-gather(NamesWide,Name1,Name2)
>>> NamesLong
>>  Name1 Name2
>> 1   Tom Larry
>> 2  Dick Curly
>>
>>
>> Please help me solve what should be a very simple problem.
>>
>> Thanks,
>> John Sparks
>>
>>
>>
>>
>>
>>      [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fsta
>> t.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.e
>> du%7C35b7ed1179cf4b8c549f08db34abeb5b%7C0d4da0f84a314d76ace60a62331e1
>> b84%7C0%7C0%7C638161685242095287%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4w
>> LjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7
>> C&sdata=dDPUQYH5pkdJl7gdcjAtA1QeK2J%2FlQOguTu3mbiaQjk%3D&reserved=0
>> PLEASE do read the posting guide
https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C35b7ed1179cf4b8c549f08db34abeb5b%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161685242095287%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=U8I45KBcR6YkCO%2BGhoMHY09NRl1I%2BootIfGruFzm70o%3D&reserved=0
>> and provide commented, minimal, self-contained, reproducible code.
>

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C35b7ed1179cf4b8c549f08db34abeb5b%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161685242095287%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=dDPUQYH5pkdJl7gdcjAtA1QeK2J%2FlQOguTu3mbiaQjk%3D&reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C35b7ed1179cf4b8c549f08db34abeb5b%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161685242251519%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=KhIz18GmFTqlVHp9PRn6tOjU%2Fi4mMzTWr%2FtGvldt%2FMs%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C35b7ed1179cf4b8c549f08db34abeb5b%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161685242251519%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=yn1UoCxiZk3HCDBZpwbUjdxlLHts3%2Fd1GSwwKMVy1UI%3D&reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C35b7ed1179cf4b8c549f08db34abeb5b%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161685242251519%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=KhIz18GmFTqlVHp9PRn6tOjU%2Fi4mMzTWr%2FtGvldt%2FMs%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.


From k|mmo@e|o @end|ng |rom utu@||  Tue Apr  4 10:08:51 2023
From: k|mmo@e|o @end|ng |rom utu@|| (Kimmo Elo)
Date: Tue, 4 Apr 2023 08:08:51 +0000
Subject: [R] Simple Stacking of Two Columns
In-Reply-To: <SN4PR22MB28240D4AD51A007E60E692D5CF929@SN4PR22MB2824.namprd22.prod.outlook.com>
References: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
 <etPan.642af455.4a1014c4.57e@me.com>
 <SN4PR22MB28240D4AD51A007E60E692D5CF929@SN4PR22MB2824.namprd22.prod.outlook.com>
Message-ID: <8b026b96fc364893c6eec19664cc7ed3077226d2.camel@utu.fi>

Hi,

or maybe this?

NamesLong<-data.frame(Names=unlist(NamesWide), row.names = NULL)

HTH,

Kimmo

ma, 2023-04-03 kello 16:23 +0000, Ebert,Timothy Aaron kirjoitti:
> My first thought was pivot_longer, and stack() is new to me. 
> How about append(c1,c2) as another solution? Or
> data.frame(append(c1,c2)) if you want that form.
> 
> Tim
> 
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Marc
> Schwartz via R-help
> Sent: Monday, April 3, 2023 11:44 AM
> To: Sparks, John <jspark4 at uic.edu>; r-help at r-project.org
> Subject: Re: [R] Simple Stacking of Two Columns
> 
> [External Email]
> 
> Hi,
> 
> You were on the right track using stack(), but you just pass the
> entire data frame as a single object, not the separate columns:
> 
> > stack(NamesWide)
> ? values?? ind
> 1??? Tom Name1
> 2?? Dick Name1
> 3? Larry Name2
> 4? Curly Name2
> 
> Note that stack also returns the index (second column of 'ind'
> values), which tells you which column in the source data frame the
> stacked values originated from.
> 
> Thus, if you just want the actual data:
> 
> > stack(NamesWide)$values
> [1] "Tom"?? "Dick"? "Larry" "Curly"
> 
> returns a vector, or:
> 
> > stack(NamesWide)[, 1, drop = FALSE]
> ? values
> 1??? Tom
> 2?? Dick
> 3? Larry
> 4? Curly
> 
> which returns a data frame with a single column named 'values'.
> 
> Regards,
> 
> Marc Schwartz
> 
> 
> On April 3, 2023 at 11:08:59 AM, Sparks, John
> (jspark4 at uic.edu?(mailto:jspark4 at uic.edu)) wrote:
> 
> > Hi R-Helpers,
> > 
> > Sorry to bother you, but I have a simple task that I can't figure
> > out how to do.
> > 
> > For example, I have some names in two columns
> > 
> > NamesWide<-
> > data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
> > 
> > and I simply want to get a single column
> > NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
> > > NamesLong
> > Names
> > 1 Tom
> > 2 Dick
> > 3 Larry
> > 4 Curly
> > 
> > 
> > Stack produces an error
> > NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
> > Error in if (drop) { : argument is of length zero
> > 
> > So does bind_rows
> > > NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
> > Error in `dplyr::bind_rows()`:
> > ! Argument 1 must be a data frame or a named atomic vector.
> > Run `rlang::last_error()` to see where the error occurred.
> > 
> > I tried making separate dataframes to get around the error in
> > bind_rows but it puts the data in two different columns
> > Name1<-data.frame(c("Tom","Dick"))
> > Name2<-data.frame(c("Larry","Curly"))
> > NamesLong<-dplyr::bind_rows(Name1,Name2)
> > > NamesLong
> > c..Tom....Dick.. c..Larry....Curly..
> > 1 Tom
> > 2 Dick
> > 3 Larry
> > 4 Curly
> > 
> > gather makes no change to the data
> > NamesLong<-gather(NamesWide,Name1,Name2)
> > > NamesLong
> > Name1 Name2
> > 1 Tom Larry
> > 2 Dick Curly
> > 
> > 
> > Please help me solve what should be a very simple problem.
> > 
> > Thanks,
> > John Sparks
> > 
> > 
> > 
> > 
> > 
> > [[alternative HTML version deleted]]
> > 
> > ______________________________________________
> > R-help at r-project.org?mailing list -- To UNSUBSCRIBE and more, see
> > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7Ce0f22e022c0b48d2766408db345aa062%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161336072628296%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=MEaORpaFihsIHu3Iu2GwO15ey%2BvZP3Wxa6UiS3g0PyQ%3D&reserved=0
> > PLEASE do read the posting guide
> > https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7Ce0f22e022c0b48d2766408db345aa062%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161336072628296%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=ZwKZkaGoEVMu8Jp%2BbcIj%2FLVi9%2Fwug%2Fi48uarb8yg5KY%3D&reserved=0
> > and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org?mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7Ce0f22e022c0b48d2766408db345aa062%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161336072628296%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=MEaORpaFihsIHu3Iu2GwO15ey%2BvZP3Wxa6UiS3g0PyQ%3D&reserved=0
> PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7Ce0f22e022c0b48d2766408db345aa062%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638161336072628296%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=ZwKZkaGoEVMu8Jp%2BbcIj%2FLVi9%2Fwug%2Fi48uarb8yg5KY%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org?mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@oknz @end|ng |rom gm@||@com  Tue Apr  4 14:20:36 2023
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Wed, 5 Apr 2023 00:20:36 +1200
Subject: [R] Simple Stacking of Two Columns
In-Reply-To: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
References: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
Message-ID: <CABcYAdK98ow5yQH2OOoaM0r8LubJe99aXp1_Ap_N+E3cx3z-mQ@mail.gmail.com>

Just to repeat:
you have

   NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))

and you want

   NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))

There must be something I am missing, because

   NamesLong <- data.frame(Names = c(NamesWide$Name1, NamesWide$Name2))

appears to do the job in the simplest possible manner.  There are all sorts
of alternatives, such as
   data.frame(Name = as.vector(as.matrix(NamesWide[, 1:2])))

As for stack(), the main problem there was a typo (Names2 for Name2).

> stack(NamesWide)
  values   ind
1    Tom Name1
2   Dick Name1
3  Larry Name2
4  Curly Name2

If there were multiple columns, you might do

> stack(NamesWide[,c("Name1","Name2")])$values
[1] "Tom"   "Dick"  "Larry" "Curly"


On Tue, 4 Apr 2023 at 03:09, Sparks, John <jspark4 at uic.edu> wrote:

> Hi R-Helpers,
>
> Sorry to bother you, but I have a simple task that I can't figure out how
> to do.
>
> For example, I have some names in two columns
>
> NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
>
> and I simply want to get a single column
> NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
> > NamesLong
>   Names
> 1   Tom
> 2  Dick
> 3 Larry
> 4 Curly
>
>
> Stack produces an error
> NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
> Error in if (drop) { : argument is of length zero
>
> So does bind_rows
> > NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
> Error in `dplyr::bind_rows()`:
> ! Argument 1 must be a data frame or a named atomic vector.
> Run `rlang::last_error()` to see where the error occurred.
>
> I tried making separate dataframes to get around the error in bind_rows
> but it puts the data in two different columns
> Name1<-data.frame(c("Tom","Dick"))
> Name2<-data.frame(c("Larry","Curly"))
> NamesLong<-dplyr::bind_rows(Name1,Name2)
> > NamesLong
>   c..Tom....Dick.. c..Larry....Curly..
> 1              Tom                <NA>
> 2             Dick                <NA>
> 3             <NA>               Larry
> 4             <NA>               Curly
>
> gather makes no change to the data
> NamesLong<-gather(NamesWide,Name1,Name2)
> > NamesLong
>   Name1 Name2
> 1   Tom Larry
> 2  Dick Curly
>
>
> Please help me solve what should be a very simple problem.
>
> Thanks,
> John Sparks
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From tebert @end|ng |rom u||@edu  Tue Apr  4 15:40:55 2023
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Tue, 4 Apr 2023 13:40:55 +0000
Subject: [R] Simple Stacking of Two Columns
In-Reply-To: <CABcYAdK98ow5yQH2OOoaM0r8LubJe99aXp1_Ap_N+E3cx3z-mQ@mail.gmail.com>
References: <CH2PR13MB36401FC1C56E179305968591FA929@CH2PR13MB3640.namprd13.prod.outlook.com>
 <CABcYAdK98ow5yQH2OOoaM0r8LubJe99aXp1_Ap_N+E3cx3z-mQ@mail.gmail.com>
Message-ID: <SN4PR22MB282430CF79783105EA3B11B8CF939@SN4PR22MB2824.namprd22.prod.outlook.com>

Originally this post was to just look at execution times for different approaches to solving this problem.
Now I have a question:
   I change the code for calculating a1 from c(c1, c2) to data.frame(c(c1,c2)). This changes the execution times of all the other variables. What am I missing?

Original
For efficiency, the answer Avi provided is still the best option with these data. The append() method is next. Both of these approaches avoid having to make a data frame in the wide format. The slowest method is pivot_longer(). Note that the order of elements is different in the pivot_longer() approach. If the order matters then some of these answers will need sorting to get the correct output. Also note that a1 and a2 are vectors, while the others are data frames. However, all of these appear correct from our understanding of the problem.

library(tidyverse)
library(microbenchmark)
c1 <- c("Tom","Dick")
c2 <- c("Larry","Curly")
res <- microbenchmark(a1 <- c(c1, c2),
                      a2 <- append(c1, c2),
                      a3 <- {c3 <- data.frame(Name1=c1, Name2=c2)
                        stack(c3)},
                      a4 <- {c3 <- data.frame(Name1=c1, Name2=c2)
                        data.frame(Names=with(c3, c(Name1, Name2)))},
                      a5 <- {c3 <- data.frame(Name1=c1, Name2=c2)
                        data.frame(Names=unlist(c3), row.names=NULL)},
                      a6 <- {c3 <- data.frame(Name1=c1, Name2=c2)
                        pivot_longer(c3, cols=everything(),names_to="Names")},
                      a7 <- {c3 <- data.frame(Name1=c1, Name2=c2)
                        data.frame(Names=c(c3$Name1,c3$Name2))},
                      times=100L)
print(res)

Mean execution times for seven different methods where a1 <- c(c1,c2)
Method	Mean(ms)  	CLD
a1		1998    		a  
a2		5749    		a  
a3		1055501  	 b 
a4 		592548  	 b 
a5 		682491  	 b 
a6		6962660	   c 
a7		608337  	 b


Mean execution times for seven different methods where a1 <- data.frame(c(c1,c2))
Method	mean		cld
a1		272.467	  b
a2		5.768		a
a3		907.171	      d
a4		561.863	    c
a5		581.989	    c
a6		6371.465	        e
a7		552.208	    c

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Richard O'Keefe
Sent: Tuesday, April 4, 2023 8:21 AM
To: Sparks, John <jspark4 at uic.edu>
Cc: r-help at r-project.org
Subject: Re: [R] Simple Stacking of Two Columns

[External Email]

Just to repeat:
you have

   NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))

and you want

   NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))

There must be something I am missing, because

   NamesLong <- data.frame(Names = c(NamesWide$Name1, NamesWide$Name2))

appears to do the job in the simplest possible manner.  There are all sorts of alternatives, such as
   data.frame(Name = as.vector(as.matrix(NamesWide[, 1:2])))

As for stack(), the main problem there was a typo (Names2 for Name2).

> stack(NamesWide)
  values   ind
1    Tom Name1
2   Dick Name1
3  Larry Name2
4  Curly Name2

If there were multiple columns, you might do

> stack(NamesWide[,c("Name1","Name2")])$values
[1] "Tom"   "Dick"  "Larry" "Curly"


On Tue, 4 Apr 2023 at 03:09, Sparks, John <jspark4 at uic.edu> wrote:

> Hi R-Helpers,
>
> Sorry to bother you, but I have a simple task that I can't figure out 
> how to do.
>
> For example, I have some names in two columns
>
> NamesWide<-data.frame(Name1=c("Tom","Dick"),Name2=c("Larry","Curly"))
>
> and I simply want to get a single column
> NamesLong<-data.frame(Names=c("Tom","Dick","Larry","Curly"))
> > NamesLong
>   Names
> 1   Tom
> 2  Dick
> 3 Larry
> 4 Curly
>
>
> Stack produces an error
> NamesLong<-stack(NamesWide$Name1,NamesWide$Names2)
> Error in if (drop) { : argument is of length zero
>
> So does bind_rows
> > NamesLong<-dplyr::bind_rows(NamesWide$Name1,NamesWide$Name2)
> Error in `dplyr::bind_rows()`:
> ! Argument 1 must be a data frame or a named atomic vector.
> Run `rlang::last_error()` to see where the error occurred.
>
> I tried making separate dataframes to get around the error in 
> bind_rows but it puts the data in two different columns
> Name1<-data.frame(c("Tom","Dick"))
> Name2<-data.frame(c("Larry","Curly"))
> NamesLong<-dplyr::bind_rows(Name1,Name2)
> > NamesLong
>   c..Tom....Dick.. c..Larry....Curly..
> 1              Tom                <NA>
> 2             Dick                <NA>
> 3             <NA>               Larry
> 4             <NA>               Curly
>
> gather makes no change to the data
> NamesLong<-gather(NamesWide,Name1,Name2)
> > NamesLong
>   Name1 Name2
> 1   Tom Larry
> 2  Dick Curly
>
>
> Please help me solve what should be a very simple problem.
>
> Thanks,
> John Sparks
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu
> %7C1185a53a1a9d448bbd2f08db350715fa%7C0d4da0f84a314d76ace60a62331e1b84
> %7C0%7C0%7C638162076773455805%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAw
> MDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sda
> ta=EpchrCOzXyr05ruHu0OoOVdxRZoX6MMm3lodvtsSnGk%3D&reserved=0
> PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> -project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C11
> 85a53a1a9d448bbd2f08db350715fa%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
> 7C0%7C638162076773455805%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
> CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=mb
> iDzTsmt%2B2yeIIvjXE2vC5X7Xxnsttx0RhgCcqxNeg%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C1185a53a1a9d448bbd2f08db350715fa%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638162076773455805%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=EpchrCOzXyr05ruHu0OoOVdxRZoX6MMm3lodvtsSnGk%3D&reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C1185a53a1a9d448bbd2f08db350715fa%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638162076773455805%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=mbiDzTsmt%2B2yeIIvjXE2vC5X7Xxnsttx0RhgCcqxNeg%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Apr  4 15:56:04 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 4 Apr 2023 13:56:04 +0000
Subject: [R] on lexical scoping....
Message-ID: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Members,
                             I have the following code typed at the console prompt:

y   <-   x*10

X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).

What concept of R is at work in this dichotomy?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Apr  4 16:13:30 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 04 Apr 2023 07:13:30 -0700
Subject: [R] on lexical scoping....
In-Reply-To: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <76220291-8F24-4F3D-A609-6EF12D599DD5@dcn.davis.ca.us>

Namespaces. Packages only export specific object names from their namespaces. But few instances of x would be found there.

Also, function argument lists are not added to the search path until the functions are running, and then the search path only goes through the environments in which the running functions were defined, not through the call stack.

Read Advanced R. [1]

[1] https://adv-r.hadley.nz/environments.html

On April 4, 2023 6:56:04 AM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>Dear Members,
>                             I have the following code typed at the console prompt:
>
>y   <-   x*10
>
>X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).
>
>What concept of R is at work in this dichotomy?
>
>THanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From bgunter@4567 @end|ng |rom gm@||@com  Tue Apr  4 16:18:07 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 4 Apr 2023 07:18:07 -0700
Subject: [R] on lexical scoping....
In-Reply-To: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbQEn_dhsa=65o7TX42dEWQa1J2ZhfQBLLAfVwfZvR6Hqg@mail.gmail.com>

?search and ?environment

See also "The R Language Definition" manual for similar such questions.

-- Bert

On Tue, Apr 4, 2023 at 6:56?AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear Members,
>                              I have the following code typed at the console prompt:
>
> y   <-   x*10
>
> X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).
>
> What concept of R is at work in this dichotomy?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Apr  4 16:18:21 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 4 Apr 2023 10:18:21 -0400
Subject: [R] on lexical scoping....
In-Reply-To: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <6f4a962f-4ddc-5f5e-e2e3-15a59bcb06fb@gmail.com>

On 04/04/2023 9:56 a.m., akshay kulkarni wrote:
> Dear Members,
>                               I have the following code typed at the console prompt:
> 
> y   <-   x*10
> 
> X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).
> 
> What concept of R is at work in this dichotomy?
> 

First, some background:

Packages are associated with multiple environments.  There is the 
internal one that the package sees, and the external one that contains 
just the exports.

These are sometimes called the "package" environment and the "namespace" 
environment, but I don't think those names are used consistently. 
(There's another one containing the imports, but for these purposes, 
it's indistinguishable from the internal one.)

When a package is loaded by loadNamespace("pkg"), nothing happens in the 
global environment:  no new variables are visible.

When it is attached by library("pkg"), a lot more happens.  First, it is 
loaded as above, then the search list is modified.  The global 
environment is entry 1 in the search list; it stays there, but its 
"parent" is set to a copy of the external environment from the new 
package, and the parent of that environment is set to the previous 
parent, the second entry in the search list.

Okay, so now you search for "x" in the global environment, and it's not 
there.  It then goes to the other entries in the search list, which are 
typically external environments from various packages.  None of those 
packages export "x", so it is not found.

It doesn't matter if those packages use "x" without exporting it, 
because R won't look at internal environments in this kind of search.

And it doesn't matter what happens in other packages that are not on the 
search list (i.e. not "attached" because you never called library() or 
require() on them), because they just aren't in the chain of 
environments where R looks.

Duncan Murdoch


From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Tue Apr  4 16:21:20 2023
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Tue, 4 Apr 2023 19:51:20 +0530
Subject: [R] on lexical scoping....
In-Reply-To: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CADfFDC5YomeR-1N+PnWzB0Cuypk81d4pRHgR9e8MeGs5iR+yBQ@mail.gmail.com>

On Tue, Apr 4, 2023 at 7:26?PM akshay kulkarni <akshay_e4 at hotmail.com>
wrote:

> Dear Members,
>                              I have the following code typed at the
> console prompt:
>
> y   <-   x*10
>
> X has not been defined and the above code throws an object not found
> error. That is, the global environment does not contain x.


That is not the correct interpretation of the error. R will happily evaluate

y   <-   pi*10

even if the global environment does not contain pi. The "environments"
where R will look is given by

search()

If you manage to find a package that defines 'x' (and exports it),
attaching it will put the package on the search path, and then your call
will indeed no longer give an error.

-Deepayan

Why doesn't it look further in the environment stack, like that of
> packages? There are thousands of packages that contain the variable named
> x. Of course, that happens if the above code is in a function (or does it?).
>
> What concept of R is at work in this dichotomy?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Apr  4 16:28:00 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 4 Apr 2023 14:28:00 +0000
Subject: [R] on lexical scoping....
In-Reply-To: <CADfFDC5YomeR-1N+PnWzB0Cuypk81d4pRHgR9e8MeGs5iR+yBQ@mail.gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CADfFDC5YomeR-1N+PnWzB0Cuypk81d4pRHgR9e8MeGs5iR+yBQ@mail.gmail.com>
Message-ID: <PU4P216MB1568CED165233CF39DD946C5C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Deepayan,
                              THanks for the pithy, pointed reply.

But isn't it risky? Can I somehow get a warning when x is not defined in the global environment but takes on a value from one of the loaded packages? any packages for that?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Deepayan Sarkar <deepayan.sarkar at gmail.com>
Sent: Tuesday, April 4, 2023 7:51 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] on lexical scoping....



On Tue, Apr 4, 2023 at 7:26?PM akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
Dear Members,
                             I have the following code typed at the console prompt:

y   <-   x*10

X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x.

That is not the correct interpretation of the error. R will happily evaluate

y   <-   pi*10

even if the global environment does not contain pi. The "environments" where R will look is given by

search()

If you manage to find a package that defines 'x' (and exports it), attaching it will put the package on the search path, and then your call will indeed no longer give an error.

-Deepayan

Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).

What concept of R is at work in this dichotomy?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Apr  4 16:35:00 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 4 Apr 2023 14:35:00 +0000
Subject: [R] on lexical scoping....
In-Reply-To: <6f4a962f-4ddc-5f5e-e2e3-15a59bcb06fb@gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <6f4a962f-4ddc-5f5e-e2e3-15a59bcb06fb@gmail.com>
Message-ID: <PU4P216MB15689766719CE03919206FC5C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Duncan,
                         THanks for the reply.

I am looking at the technical point. The behavior you just described, as far as I know, is only for functions right? THre is no documentation ever, which says that the code looks for x in the search path. Could you please point me to some resources where I can find further information on lexical scoping for the code "typed" in the console (but not in a function)?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Tuesday, April 4, 2023 7:48 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] on lexical scoping....

On 04/04/2023 9:56 a.m., akshay kulkarni wrote:
> Dear Members,
>                               I have the following code typed at the console prompt:
>
> y   <-   x*10
>
> X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).
>
> What concept of R is at work in this dichotomy?
>

First, some background:

Packages are associated with multiple environments.  There is the
internal one that the package sees, and the external one that contains
just the exports.

These are sometimes called the "package" environment and the "namespace"
environment, but I don't think those names are used consistently.
(There's another one containing the imports, but for these purposes,
it's indistinguishable from the internal one.)

When a package is loaded by loadNamespace("pkg"), nothing happens in the
global environment:  no new variables are visible.

When it is attached by library("pkg"), a lot more happens.  First, it is
loaded as above, then the search list is modified.  The global
environment is entry 1 in the search list; it stays there, but its
"parent" is set to a copy of the external environment from the new
package, and the parent of that environment is set to the previous
parent, the second entry in the search list.

Okay, so now you search for "x" in the global environment, and it's not
there.  It then goes to the other entries in the search list, which are
typically external environments from various packages.  None of those
packages export "x", so it is not found.

It doesn't matter if those packages use "x" without exporting it,
because R won't look at internal environments in this kind of search.

And it doesn't matter what happens in other packages that are not on the
search list (i.e. not "attached" because you never called library() or
require() on them), because they just aren't in the chain of
environments where R looks.

Duncan Murdoch

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Apr  4 16:36:15 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 4 Apr 2023 14:36:15 +0000
Subject: [R] on lexical scoping....
In-Reply-To: <CAGxFJbQEn_dhsa=65o7TX42dEWQa1J2ZhfQBLLAfVwfZvR6Hqg@mail.gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbQEn_dhsa=65o7TX42dEWQa1J2ZhfQBLLAfVwfZvR6Hqg@mail.gmail.com>
Message-ID: <PU4P216MB15689A31901B7D5BF4EFF987C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Bert,
                   THanks a lot. I will take a look at those...

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>
Sent: Tuesday, April 4, 2023 7:48 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] on lexical scoping....

?search and ?environment

See also "The R Language Definition" manual for similar such questions.

-- Bert

On Tue, Apr 4, 2023 at 6:56?AM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> Dear Members,
>                              I have the following code typed at the console prompt:
>
> y   <-   x*10
>
> X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).
>
> What concept of R is at work in this dichotomy?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Apr  4 16:37:13 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 4 Apr 2023 14:37:13 +0000
Subject: [R] on lexical scoping....
In-Reply-To: <76220291-8F24-4F3D-A609-6EF12D599DD5@dcn.davis.ca.us>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <76220291-8F24-4F3D-A609-6EF12D599DD5@dcn.davis.ca.us>
Message-ID: <PU4P216MB1568E8FE8726914F276107C3C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Jeff,
                  THanks a lot for the pithy reply...

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Sent: Tuesday, April 4, 2023 7:43 PM
To: r-help at r-project.org <r-help at r-project.org>; akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] on lexical scoping....

Namespaces. Packages only export specific object names from their namespaces. But few instances of x would be found there.

Also, function argument lists are not added to the search path until the functions are running, and then the search path only goes through the environments in which the running functions were defined, not through the call stack.

Read Advanced R. [1]

[1] https://adv-r.hadley.nz/environments.html

On April 4, 2023 6:56:04 AM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>Dear Members,
>                             I have the following code typed at the console prompt:
>
>y   <-   x*10
>
>X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).
>
>What concept of R is at work in this dichotomy?
>
>THanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>
>       [[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Apr  4 16:44:54 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 4 Apr 2023 10:44:54 -0400
Subject: [R] on lexical scoping....
In-Reply-To: <PU4P216MB15689766719CE03919206FC5C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <6f4a962f-4ddc-5f5e-e2e3-15a59bcb06fb@gmail.com>
 <PU4P216MB15689766719CE03919206FC5C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <401472f6-4e94-74b4-4e15-3716279e6bb7@gmail.com>

On 04/04/2023 10:35 a.m., akshay kulkarni wrote:
> Dear Duncan,
>  ? ? ? ? ? ? ? ? ? ? ? ? ?THanks for the reply.
> 
> I am looking at the technical point. The behavior you just described, as 
> far as I know, is only for functions right? 

No, not at all.  Every function you write in R has an associated 
environment (which you can find using environment(fn)).  That only 
applies to searches taking place while evaluating the function.  The 
starting point is a temporary environment to hold local variables, 
called the "evaluation frame".  The parent of that environment is the 
environment given by environment(fn).

When you type something at the top level, evaluation is done very 
similarly, except that the starting point for the search is the global 
environment.

THre is no documentation
> ever, which says that the code looks for x in the search path. Could you 
> please point me to some resources where I can find further information 
> on lexical scoping for the code "typed" in the console (but not in a 
> function)?

See section 3.5.1 in the R Language Definition for a description of the 
relation between the global environment and the search list.  See 
section 2.1.10 in that manual for how R looks up variables.

Duncan Murdoch

> 
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> 
> ------------------------------------------------------------------------
> *From:* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Sent:* Tuesday, April 4, 2023 7:48 PM
> *To:* akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list 
> <r-help at r-project.org>
> *Subject:* Re: [R] on lexical scoping....
> On 04/04/2023 9:56 a.m., akshay kulkarni wrote:
>> Dear Members,
>>?????????????????????????????? I have the following code typed at the console prompt:
>> 
>> y?? <-?? x*10
>> 
>> X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable  named? x. Of course, that happens if the above code is in a function 
> (or does it?).
>> 
>> What concept of R is at work in this dichotomy?
>> 
> 
> First, some background:
> 
> Packages are associated with multiple environments.? There is the
> internal one that the package sees, and the external one that contains
> just the exports.
> 
> These are sometimes called the "package" environment and the "namespace"
> environment, but I don't think those names are used consistently.
> (There's another one containing the imports, but for these purposes,
> it's indistinguishable from the internal one.)
> 
> When a package is loaded by loadNamespace("pkg"), nothing happens in the
> global environment:? no new variables are visible.
> 
> When it is attached by library("pkg"), a lot more happens.? First, it is
> loaded as above, then the search list is modified.? The global
> environment is entry 1 in the search list; it stays there, but its
> "parent" is set to a copy of the external environment from the new
> package, and the parent of that environment is set to the previous
> parent, the second entry in the search list.
> 
> Okay, so now you search for "x" in the global environment, and it's not
> there.? It then goes to the other entries in the search list, which are
> typically external environments from various packages.? None of those
> packages export "x", so it is not found.
> 
> It doesn't matter if those packages use "x" without exporting it,
> because R won't look at internal environments in this kind of search.
> 
> And it doesn't matter what happens in other packages that are not on the
> search list (i.e. not "attached" because you never called library() or
> require() on them), because they just aren't in the chain of
> environments where R looks.
> 
> Duncan Murdoch


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Apr  4 16:50:15 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 4 Apr 2023 14:50:15 +0000
Subject: [R] on lexical scoping....
In-Reply-To: <401472f6-4e94-74b4-4e15-3716279e6bb7@gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <6f4a962f-4ddc-5f5e-e2e3-15a59bcb06fb@gmail.com>
 <PU4P216MB15689766719CE03919206FC5C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <401472f6-4e94-74b4-4e15-3716279e6bb7@gmail.com>
Message-ID: <PU4P216MB15681690B582386DDAD40AB1C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Ducan,
                        Very informative! THanks a lot!

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Tuesday, April 4, 2023 8:14 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] on lexical scoping....

On 04/04/2023 10:35 a.m., akshay kulkarni wrote:
> Dear Duncan,
>                           THanks for the reply.
>
> I am looking at the technical point. The behavior you just described, as
> far as I know, is only for functions right?

No, not at all.  Every function you write in R has an associated
environment (which you can find using environment(fn)).  That only
applies to searches taking place while evaluating the function.  The
starting point is a temporary environment to hold local variables,
called the "evaluation frame".  The parent of that environment is the
environment given by environment(fn).

When you type something at the top level, evaluation is done very
similarly, except that the starting point for the search is the global
environment.

THre is no documentation
> ever, which says that the code looks for x in the search path. Could you
> please point me to some resources where I can find further information
> on lexical scoping for the code "typed" in the console (but not in a
> function)?

See section 3.5.1 in the R Language Definition for a description of the
relation between the global environment and the search list.  See
section 2.1.10 in that manual for how R looks up variables.

Duncan Murdoch

>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
> ------------------------------------------------------------------------
> *From:* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Sent:* Tuesday, April 4, 2023 7:48 PM
> *To:* akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list
> <r-help at r-project.org>
> *Subject:* Re: [R] on lexical scoping....
> On 04/04/2023 9:56 a.m., akshay kulkarni wrote:
>> Dear Members,
>>                               I have the following code typed at the console prompt:
>>
>> y   <-   x*10
>>
>> X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable  named  x. Of course, that happens if the above code is in a function
> (or does it?).
>>
>> What concept of R is at work in this dichotomy?
>>
>
> First, some background:
>
> Packages are associated with multiple environments.  There is the
> internal one that the package sees, and the external one that contains
> just the exports.
>
> These are sometimes called the "package" environment and the "namespace"
> environment, but I don't think those names are used consistently.
> (There's another one containing the imports, but for these purposes,
> it's indistinguishable from the internal one.)
>
> When a package is loaded by loadNamespace("pkg"), nothing happens in the
> global environment:  no new variables are visible.
>
> When it is attached by library("pkg"), a lot more happens.  First, it is
> loaded as above, then the search list is modified.  The global
> environment is entry 1 in the search list; it stays there, but its
> "parent" is set to a copy of the external environment from the new
> package, and the parent of that environment is set to the previous
> parent, the second entry in the search list.
>
> Okay, so now you search for "x" in the global environment, and it's not
> there.  It then goes to the other entries in the search list, which are
> typically external environments from various packages.  None of those
> packages export "x", so it is not found.
>
> It doesn't matter if those packages use "x" without exporting it,
> because R won't look at internal environments in this kind of search.
>
> And it doesn't matter what happens in other packages that are not on the
> search list (i.e. not "attached" because you never called library() or
> require() on them), because they just aren't in the chain of
> environments where R looks.
>
> Duncan Murdoch


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Apr  4 16:51:52 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 4 Apr 2023 10:51:52 -0400
Subject: [R] on lexical scoping....
In-Reply-To: <PU4P216MB1568CED165233CF39DD946C5C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CADfFDC5YomeR-1N+PnWzB0Cuypk81d4pRHgR9e8MeGs5iR+yBQ@mail.gmail.com>
 <PU4P216MB1568CED165233CF39DD946C5C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <02c3b58c-f4c7-8b32-1253-9815547264bf@gmail.com>

You can't change the basic way R searches, but you can ask for a 
different kind of search.  For example, to see if "x" exists, you can use

  exists("x")

and it will do the default search, but

  exists("x", inherits = FALSE)

will only look in the current environment.  The get() function has a 
similar argument which returns the value

Unfortunately these functions have overly complicated argument lists 
because they are based on functions in S from 30-40 years ago, and it 
had very different scoping rules.  My advice would be to ignore the 
"where" and "frame" arguments, and always use "envir" if you want to say 
where to look.

Duncan Murdoch

On 04/04/2023 10:28 a.m., akshay kulkarni wrote:
> Dear Deepayan,
>                                THanks for the pithy, pointed reply.
> 
> But isn't it risky? Can I somehow get a warning when x is not defined in the global environment but takes on a value from one of the loaded packages? any packages for that?
> 
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> ________________________________
> From: Deepayan Sarkar <deepayan.sarkar at gmail.com>
> Sent: Tuesday, April 4, 2023 7:51 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] on lexical scoping....
> 
> 
> 
> On Tue, Apr 4, 2023 at 7:26?PM akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
> Dear Members,
>                               I have the following code typed at the console prompt:
> 
> y   <-   x*10
> 
> X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x.
> 
> That is not the correct interpretation of the error. R will happily evaluate
> 
> y   <-   pi*10
> 
> even if the global environment does not contain pi. The "environments" where R will look is given by
> 
> search()
> 
> If you manage to find a package that defines 'x' (and exports it), attaching it will put the package on the search path, and then your call will indeed no longer give an error.
> 
> -Deepayan
> 
> Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).
> 
> What concept of R is at work in this dichotomy?
> 
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> 
>          [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Apr  4 16:59:38 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 4 Apr 2023 14:59:38 +0000
Subject: [R] on lexical scoping....
In-Reply-To: <02c3b58c-f4c7-8b32-1253-9815547264bf@gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CADfFDC5YomeR-1N+PnWzB0Cuypk81d4pRHgR9e8MeGs5iR+yBQ@mail.gmail.com>
 <PU4P216MB1568CED165233CF39DD946C5C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <02c3b58c-f4c7-8b32-1253-9815547264bf@gmail.com>
Message-ID: <PU4P216MB156855D46C8D75540D01DCCCC8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Duncan,
                         THanks for the reply...!

So the takeaway is that define the symbol in the same environment before using it right!?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Tuesday, April 4, 2023 8:21 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; Deepayan Sarkar <deepayan.sarkar at gmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] on lexical scoping....

You can't change the basic way R searches, but you can ask for a
different kind of search.  For example, to see if "x" exists, you can use

  exists("x")

and it will do the default search, but

  exists("x", inherits = FALSE)

will only look in the current environment.  The get() function has a
similar argument which returns the value

Unfortunately these functions have overly complicated argument lists
because they are based on functions in S from 30-40 years ago, and it
had very different scoping rules.  My advice would be to ignore the
"where" and "frame" arguments, and always use "envir" if you want to say
where to look.

Duncan Murdoch

On 04/04/2023 10:28 a.m., akshay kulkarni wrote:
> Dear Deepayan,
>                                THanks for the pithy, pointed reply.
>
> But isn't it risky? Can I somehow get a warning when x is not defined in the global environment but takes on a value from one of the loaded packages? any packages for that?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> ________________________________
> From: Deepayan Sarkar <deepayan.sarkar at gmail.com>
> Sent: Tuesday, April 4, 2023 7:51 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] on lexical scoping....
>
>
>
> On Tue, Apr 4, 2023 at 7:26?PM akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
> Dear Members,
>                               I have the following code typed at the console prompt:
>
> y   <-   x*10
>
> X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x.
>
> That is not the correct interpretation of the error. R will happily evaluate
>
> y   <-   pi*10
>
> even if the global environment does not contain pi. The "environments" where R will look is given by
>
> search()
>
> If you manage to find a package that defines 'x' (and exports it), attaching it will put the package on the search path, and then your call will indeed no longer give an error.
>
> -Deepayan
>
> Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).
>
> What concept of R is at work in this dichotomy?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>          [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Apr  4 17:19:00 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 4 Apr 2023 11:19:00 -0400
Subject: [R] on lexical scoping....
In-Reply-To: <PU4P216MB156855D46C8D75540D01DCCCC8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CADfFDC5YomeR-1N+PnWzB0Cuypk81d4pRHgR9e8MeGs5iR+yBQ@mail.gmail.com>
 <PU4P216MB1568CED165233CF39DD946C5C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <02c3b58c-f4c7-8b32-1253-9815547264bf@gmail.com>
 <PU4P216MB156855D46C8D75540D01DCCCC8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <23e788c9-a214-0990-c9d6-10c8c1c61198@gmail.com>

No, there are lots of situations where that doesn't make sense.  You 
don't want to have to define local copies of the functions from every 
package you use, for example.

I think the takeaway is to learn how R scoping works, and keep things 
simple.  That's one reason I tend to avoid "tidyverse" packages.  There 
are a lot of really good ideas in those packages, but "tidy evaluation" 
is far too complicated and hard to understand, and I think it confuses 
people, so they don't understand the really very simple R scoping rules.

Duncan Murdoch

On 04/04/2023 10:59 a.m., akshay kulkarni wrote:
> Dear Duncan,
>  ? ? ? ? ? ? ? ? ? ? ? ? ?THanks for the reply...!
> 
> So the takeaway is that define the symbol in the same environment before 
> using it right!?
> 
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> ------------------------------------------------------------------------
> *From:* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Sent:* Tuesday, April 4, 2023 8:21 PM
> *To:* akshay kulkarni <akshay_e4 at hotmail.com>; Deepayan Sarkar 
> <deepayan.sarkar at gmail.com>
> *Cc:* R help Mailing list <r-help at r-project.org>
> *Subject:* Re: [R] on lexical scoping....
> You can't change the basic way R searches, but you can ask for a
> different kind of search.? For example, to see if "x" exists, you can use
> 
>  ? exists("x")
> 
> and it will do the default search, but
> 
>  ? exists("x", inherits = FALSE)
> 
> will only look in the current environment.? The get() function has a
> similar argument which returns the value
> 
> Unfortunately these functions have overly complicated argument lists
> because they are based on functions in S from 30-40 years ago, and it
> had very different scoping rules.? My advice would be to ignore the
> "where" and "frame" arguments, and always use "envir" if you want to say
> where to look.
> 
> Duncan Murdoch
> 
> On 04/04/2023 10:28 a.m., akshay kulkarni wrote:
>> Dear Deepayan,
>>??????????????????????????????? THanks for the pithy, pointed reply.
>> 
>> But isn't it risky? Can I somehow get a warning when x is not defined in the global environment but takes on a value from one of the loaded packages? any packages for that?
>> 
>> THanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>> ________________________________
>> From: Deepayan Sarkar <deepayan.sarkar at gmail.com>
>> Sent: Tuesday, April 4, 2023 7:51 PM
>> To: akshay kulkarni <akshay_e4 at hotmail.com>
>> Cc: R help Mailing list <r-help at r-project.org>
>> Subject: Re: [R] on lexical scoping....
>> 
>> 
>> 
>> On Tue, Apr 4, 2023 at 7:26?PM akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
>> Dear Members,
>>?????????????????????????????? I have the following code typed at the console prompt:
>> 
>> y?? <-?? x*10
>> 
>> X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x.
>> 
>> That is not the correct interpretation of the error. R will happily evaluate
>> 
>> y?? <-?? pi*10
>> 
>> even if the global environment does not contain pi. The "environments" where R will look is given by
>> 
>> search()
>> 
>> If you manage to find a package that defines 'x' (and exports it), attaching it will put the package on the search path, and then your call will indeed no longer give an error.
>> 
>> -Deepayan
>> 
>> Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named? x. Of course, that happens if the above code is in a function (or does it?).
>> 
>> What concept of R is at work in this dichotomy?
>> 
>> THanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>> 
>>????????? [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help 
> <https://stat.ethz.ch/mailman/listinfo/r-help>
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html 
> <http://www.R-project.org/posting-guide.html>
>> and provide commented, minimal, self-contained, reproducible code.
>> 
>>??????? [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help 
> <https://stat.ethz.ch/mailman/listinfo/r-help>
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html 
> <http://www.R-project.org/posting-guide.html>
>> and provide commented, minimal, self-contained, reproducible code.
>


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Apr  4 17:27:03 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 4 Apr 2023 15:27:03 +0000
Subject: [R] on lexical scoping....
In-Reply-To: <23e788c9-a214-0990-c9d6-10c8c1c61198@gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CADfFDC5YomeR-1N+PnWzB0Cuypk81d4pRHgR9e8MeGs5iR+yBQ@mail.gmail.com>
 <PU4P216MB1568CED165233CF39DD946C5C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <02c3b58c-f4c7-8b32-1253-9815547264bf@gmail.com>
 <PU4P216MB156855D46C8D75540D01DCCCC8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <23e788c9-a214-0990-c9d6-10c8c1c61198@gmail.com>
Message-ID: <PU4P216MB15687785D70756B86DEE9783C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Duncan,
                         THanks a lot..!!

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Tuesday, April 4, 2023 8:49 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; Deepayan Sarkar <deepayan.sarkar at gmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] on lexical scoping....

No, there are lots of situations where that doesn't make sense.  You
don't want to have to define local copies of the functions from every
package you use, for example.

I think the takeaway is to learn how R scoping works, and keep things
simple.  That's one reason I tend to avoid "tidyverse" packages.  There
are a lot of really good ideas in those packages, but "tidy evaluation"
is far too complicated and hard to understand, and I think it confuses
people, so they don't understand the really very simple R scoping rules.

Duncan Murdoch

On 04/04/2023 10:59 a.m., akshay kulkarni wrote:
> Dear Duncan,
>                           THanks for the reply...!
>
> So the takeaway is that define the symbol in the same environment before
> using it right!?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> ------------------------------------------------------------------------
> *From:* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Sent:* Tuesday, April 4, 2023 8:21 PM
> *To:* akshay kulkarni <akshay_e4 at hotmail.com>; Deepayan Sarkar
> <deepayan.sarkar at gmail.com>
> *Cc:* R help Mailing list <r-help at r-project.org>
> *Subject:* Re: [R] on lexical scoping....
> You can't change the basic way R searches, but you can ask for a
> different kind of search.  For example, to see if "x" exists, you can use
>
>    exists("x")
>
> and it will do the default search, but
>
>    exists("x", inherits = FALSE)
>
> will only look in the current environment.  The get() function has a
> similar argument which returns the value
>
> Unfortunately these functions have overly complicated argument lists
> because they are based on functions in S from 30-40 years ago, and it
> had very different scoping rules.  My advice would be to ignore the
> "where" and "frame" arguments, and always use "envir" if you want to say
> where to look.
>
> Duncan Murdoch
>
> On 04/04/2023 10:28 a.m., akshay kulkarni wrote:
>> Dear Deepayan,
>>                                THanks for the pithy, pointed reply.
>>
>> But isn't it risky? Can I somehow get a warning when x is not defined in the global environment but takes on a value from one of the loaded packages? any packages for that?
>>
>> THanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>> ________________________________
>> From: Deepayan Sarkar <deepayan.sarkar at gmail.com>
>> Sent: Tuesday, April 4, 2023 7:51 PM
>> To: akshay kulkarni <akshay_e4 at hotmail.com>
>> Cc: R help Mailing list <r-help at r-project.org>
>> Subject: Re: [R] on lexical scoping....
>>
>>
>>
>> On Tue, Apr 4, 2023 at 7:26?PM akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
>> Dear Members,
>>                               I have the following code typed at the console prompt:
>>
>> y   <-   x*10
>>
>> X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x.
>>
>> That is not the correct interpretation of the error. R will happily evaluate
>>
>> y   <-   pi*10
>>
>> even if the global environment does not contain pi. The "environments" where R will look is given by
>>
>> search()
>>
>> If you manage to find a package that defines 'x' (and exports it), attaching it will put the package on the search path, and then your call will indeed no longer give an error.
>>
>> -Deepayan
>>
>> Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).
>>
>> What concept of R is at work in this dichotomy?
>>
>> THanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
> <https://stat.ethz.ch/mailman/listinfo/r-help>
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> <http://www.R-project.org/posting-guide.html>
>> and provide commented, minimal, self-contained, reproducible code.
>>
>>        [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
> <https://stat.ethz.ch/mailman/listinfo/r-help>
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> <http://www.R-project.org/posting-guide.html>
>> and provide commented, minimal, self-contained, reproducible code.
>


	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Apr  5 01:06:19 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 4 Apr 2023 16:06:19 -0700
Subject: [R] on lexical scoping....
In-Reply-To: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbRBjrpo3c8D-vfaye1+Dc5eGb++eCaLQ+sbKojoFURy1A@mail.gmail.com>

The following *might* be of use to you. If you can predict what the various
function invocations will do, I think you have a reasonable grasp of how
lexical scoping works in R (contrary or supplementary opinions welcome).
It is the sort of thing you will find in the references also. If this is
all obvious, sorry for wasting your time.
#######################
search()
ls()
dat <- list(x =2)
attach(dat,2)
search()
f <- function(){
   g <- function() x
   x <- 3
   g}
h <- f()
g <- function()x
ls()
h()
g()
detach(dat)
h()
g()

##########################
## Here is what this gives starting with an empty .GlobalEnv.
##################################

> search()
 [1] ".GlobalEnv"        "package:tools"     "package:lattice"
"tools:rstudio"
 [5] "package:stats"     "package:graphics"  "package:grDevices"
"package:utils"
 [9] "package:datasets"  "package:methods"   "Autoloads"
"package:base"
> ls()
character(0)
> dat <- list(x =2)
> attach(dat,2)
> search()
 [1] ".GlobalEnv"        "dat"               "package:tools"
"package:lattice"
 [5] "tools:rstudio"     "package:stats"     "package:graphics"
 "package:grDevices"
 [9] "package:utils"     "package:datasets"  "package:methods"
"Autoloads"
[13] "package:base"
> f <- function(){
+    g <- function() x
+    x <- 3
+    g}
> h <- f()
> g <- function()x
> ls()
[1] "dat" "f"   "g"   "h"
> h()
[1] 3
> g()
[1] 2
> detach(dat)
> h()
[1] 3
> g()
Error in g() : object 'x' not found

-- Bert


On Tue, Apr 4, 2023 at 6:56?AM akshay kulkarni <akshay_e4 at hotmail.com>
wrote:

> Dear Members,
>                              I have the following code typed at the
> console prompt:
>
> y   <-   x*10
>
> X has not been defined and the above code throws an object not found
> error. That is, the global environment does not contain x. Why doesn't it
> look further in the environment stack, like that of packages? There are
> thousands of packages that contain the variable named  x. Of course, that
> happens if the above code is in a function (or does it?).
>
> What concept of R is at work in this dichotomy?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@rk|eed@2 @end|ng |rom gm@||@com  Wed Apr  5 01:53:38 2023
From: m@rk|eed@2 @end|ng |rom gm@||@com (Mark Leeds)
Date: Tue, 4 Apr 2023 19:53:38 -0400
Subject: [R] on lexical scoping....
In-Reply-To: <CAGxFJbRBjrpo3c8D-vfaye1+Dc5eGb++eCaLQ+sbKojoFURy1A@mail.gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbRBjrpo3c8D-vfaye1+Dc5eGb++eCaLQ+sbKojoFURy1A@mail.gmail.com>
Message-ID: <CAHz+bWbzDUPjrHyXauw07rWkB3mOs4YsQqZTEfWUkb8CtWbHJQ@mail.gmail.com>

obviously, everyone has different opinions on what's useful but I always
found this document quite
helpful. I think, in the past, someone said that there are some incorrect
statements in but I'm not sure
what they are.

https://askming.github.io/study_notes/Stats_Comp/Note-How%20R%20searches%20and%20finds%20stuff.html


On Tue, Apr 4, 2023 at 7:06?PM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> The following *might* be of use to you. If you can predict what the various
> function invocations will do, I think you have a reasonable grasp of how
> lexical scoping works in R (contrary or supplementary opinions welcome).
> It is the sort of thing you will find in the references also. If this is
> all obvious, sorry for wasting your time.
> #######################
> search()
> ls()
> dat <- list(x =2)
> attach(dat,2)
> search()
> f <- function(){
>    g <- function() x
>    x <- 3
>    g}
> h <- f()
> g <- function()x
> ls()
> h()
> g()
> detach(dat)
> h()
> g()
>
> ##########################
> ## Here is what this gives starting with an empty .GlobalEnv.
> ##################################
>
> > search()
>  [1] ".GlobalEnv"        "package:tools"     "package:lattice"
> "tools:rstudio"
>  [5] "package:stats"     "package:graphics"  "package:grDevices"
> "package:utils"
>  [9] "package:datasets"  "package:methods"   "Autoloads"
> "package:base"
> > ls()
> character(0)
> > dat <- list(x =2)
> > attach(dat,2)
> > search()
>  [1] ".GlobalEnv"        "dat"               "package:tools"
> "package:lattice"
>  [5] "tools:rstudio"     "package:stats"     "package:graphics"
>  "package:grDevices"
>  [9] "package:utils"     "package:datasets"  "package:methods"
> "Autoloads"
> [13] "package:base"
> > f <- function(){
> +    g <- function() x
> +    x <- 3
> +    g}
> > h <- f()
> > g <- function()x
> > ls()
> [1] "dat" "f"   "g"   "h"
> > h()
> [1] 3
> > g()
> [1] 2
> > detach(dat)
> > h()
> [1] 3
> > g()
> Error in g() : object 'x' not found
>
> -- Bert
>
>
> On Tue, Apr 4, 2023 at 6:56?AM akshay kulkarni <akshay_e4 at hotmail.com>
> wrote:
>
> > Dear Members,
> >                              I have the following code typed at the
> > console prompt:
> >
> > y   <-   x*10
> >
> > X has not been defined and the above code throws an object not found
> > error. That is, the global environment does not contain x. Why doesn't it
> > look further in the environment stack, like that of packages? There are
> > thousands of packages that contain the variable named  x. Of course, that
> > happens if the above code is in a function (or does it?).
> >
> > What concept of R is at work in this dichotomy?
> >
> > THanking you,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Apr  5 02:15:47 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 04 Apr 2023 17:15:47 -0700
Subject: [R] on lexical scoping....
In-Reply-To: <CAHz+bWbzDUPjrHyXauw07rWkB3mOs4YsQqZTEfWUkb8CtWbHJQ@mail.gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbRBjrpo3c8D-vfaye1+Dc5eGb++eCaLQ+sbKojoFURy1A@mail.gmail.com>
 <CAHz+bWbzDUPjrHyXauw07rWkB3mOs4YsQqZTEfWUkb8CtWbHJQ@mail.gmail.com>
Message-ID: <B65D79AD-5854-463D-B074-9636889505D0@dcn.davis.ca.us>

Leading off with you can only have two things in an environment definitely indicates this should be read with a skeptical eye.

Although the title of "Advanced R" may be more scary than someone writing notes on GitHub like a bro, IMHO Adv R is quite readable for anyone interested in questions like this with fewer wrong assertions to unlearn later.

On April 4, 2023 4:53:38 PM PDT, Mark Leeds <markleeds2 at gmail.com> wrote:
>obviously, everyone has different opinions on what's useful but I always
>found this document quite
>helpful. I think, in the past, someone said that there are some incorrect
>statements in but I'm not sure
>what they are.
>
>https://askming.github.io/study_notes/Stats_Comp/Note-How%20R%20searches%20and%20finds%20stuff.html
>
>
>On Tue, Apr 4, 2023 at 7:06?PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
>> The following *might* be of use to you. If you can predict what the various
>> function invocations will do, I think you have a reasonable grasp of how
>> lexical scoping works in R (contrary or supplementary opinions welcome).
>> It is the sort of thing you will find in the references also. If this is
>> all obvious, sorry for wasting your time.
>> #######################
>> search()
>> ls()
>> dat <- list(x =2)
>> attach(dat,2)
>> search()
>> f <- function(){
>>    g <- function() x
>>    x <- 3
>>    g}
>> h <- f()
>> g <- function()x
>> ls()
>> h()
>> g()
>> detach(dat)
>> h()
>> g()
>>
>> ##########################
>> ## Here is what this gives starting with an empty .GlobalEnv.
>> ##################################
>>
>> > search()
>>  [1] ".GlobalEnv"        "package:tools"     "package:lattice"
>> "tools:rstudio"
>>  [5] "package:stats"     "package:graphics"  "package:grDevices"
>> "package:utils"
>>  [9] "package:datasets"  "package:methods"   "Autoloads"
>> "package:base"
>> > ls()
>> character(0)
>> > dat <- list(x =2)
>> > attach(dat,2)
>> > search()
>>  [1] ".GlobalEnv"        "dat"               "package:tools"
>> "package:lattice"
>>  [5] "tools:rstudio"     "package:stats"     "package:graphics"
>>  "package:grDevices"
>>  [9] "package:utils"     "package:datasets"  "package:methods"
>> "Autoloads"
>> [13] "package:base"
>> > f <- function(){
>> +    g <- function() x
>> +    x <- 3
>> +    g}
>> > h <- f()
>> > g <- function()x
>> > ls()
>> [1] "dat" "f"   "g"   "h"
>> > h()
>> [1] 3
>> > g()
>> [1] 2
>> > detach(dat)
>> > h()
>> [1] 3
>> > g()
>> Error in g() : object 'x' not found
>>
>> -- Bert
>>
>>
>> On Tue, Apr 4, 2023 at 6:56?AM akshay kulkarni <akshay_e4 at hotmail.com>
>> wrote:
>>
>> > Dear Members,
>> >                              I have the following code typed at the
>> > console prompt:
>> >
>> > y   <-   x*10
>> >
>> > X has not been defined and the above code throws an object not found
>> > error. That is, the global environment does not contain x. Why doesn't it
>> > look further in the environment stack, like that of packages? There are
>> > thousands of packages that contain the variable named  x. Of course, that
>> > happens if the above code is in a function (or does it?).
>> >
>> > What concept of R is at work in this dichotomy?
>> >
>> > THanking you,
>> > Yours sincerely,
>> > AKSHAY M KULKARNI
>> >
>> >         [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> > http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> >
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From r@oknz @end|ng |rom gm@||@com  Wed Apr  5 07:00:38 2023
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Wed, 5 Apr 2023 17:00:38 +1200
Subject: [R] on lexical scoping....
In-Reply-To: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CABcYAdKa9SOBLCCRUK4qMHeVQAmgNzrY2_pi82n_6woXC7E2CA@mail.gmail.com>

R *does* search the environment stack.

> search()
[1] ".GlobalEnv"        "package:stats"     "package:graphics"
[4] "package:grDevices" "package:utils"     "package:datasets"
[7] "package:methods"   "Autoloads"         "package:base

What you seem to be missing is that a package may contain
bindings that it does not export, as the wording of this
error message reminds us:
> utils::y
Error: 'y' is not an exported object from 'namespace:utils'

So when package/namespace goes onto the environment stack,
it's only the *exported* bindings that become visible.



On Wed, 5 Apr 2023 at 01:56, akshay kulkarni <akshay_e4 at hotmail.com> wrote:

> Dear Members,
>                              I have the following code typed at the
> console prompt:
>
> y   <-   x*10
>
> X has not been defined and the above code throws an object not found
> error. That is, the global environment does not contain x. Why doesn't it
> look further in the environment stack, like that of packages? There are
> thousands of packages that contain the variable named  x. Of course, that
> happens if the above code is in a function (or does it?).
>
> What concept of R is at work in this dichotomy?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Apr  5 11:12:52 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 5 Apr 2023 05:12:52 -0400
Subject: [R] on lexical scoping....
In-Reply-To: <CAHz+bWbzDUPjrHyXauw07rWkB3mOs4YsQqZTEfWUkb8CtWbHJQ@mail.gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbRBjrpo3c8D-vfaye1+Dc5eGb++eCaLQ+sbKojoFURy1A@mail.gmail.com>
 <CAHz+bWbzDUPjrHyXauw07rWkB3mOs4YsQqZTEfWUkb8CtWbHJQ@mail.gmail.com>
Message-ID: <e8c9bf61-137e-eef5-adfd-70e000e8c2b0@gmail.com>

It seems mostly correct. Here are a few quibbles:

- I don't think "owner" is a good description of the parent environment. 
  Usually when I use owner in computing, there's an implication that the 
owner controls what it owns, is responsible for allocating and 
destroying it, etc.  Parent environments are targets of a pointer from 
other environments that list them as their "enclosure", but they have no 
record of their children.

- The analogy that all roads lead to the search list is wrong.  There's 
no reason you couldn't create an environment whose parent was the empty 
environment.  But with the qualifier "when we start in R_GlobalEnv" it's 
correct, so this complaint is just about the wording.

- The description of what Imports does is wrong.  What is described 
there is what the `import()` directive in NAMESPACE does.  The Imports 
line in DESCRIPTION just guarantees that the named package is loaded, it 
doesn't import anything.  And the `importFrom()` directive in NAMESPACE 
isn't discussed.

- It gets bad near the end in the "Curveball" section.  I'd just skip 
that.  It's not at all true that all functions in a package have the 
package's namespace environment as their environment.  There are lots of 
real examples where that's not true.  Functions that maintain persistent 
records (e.g. the base function conflictRules()) often have a private 
environment, and occasionally packages import functions from other 
packages by simple assignment, so they end up in the namespace 
environment of the importer but still have the namespace environment of 
the exporter associated with them.  And the last diagram (the revised 
one with all solid lines) is just misleading.

Duncan

On 04/04/2023 7:53 p.m., Mark Leeds wrote:
> obviously, everyone has different opinions on what's useful but I always
> found this document quite
> helpful. I think, in the past, someone said that there are some incorrect
> statements in but I'm not sure
> what they are.
> 
> https://askming.github.io/study_notes/Stats_Comp/Note-How%20R%20searches%20and%20finds%20stuff.html
> 
> 
> On Tue, Apr 4, 2023 at 7:06?PM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
>> The following *might* be of use to you. If you can predict what the various
>> function invocations will do, I think you have a reasonable grasp of how
>> lexical scoping works in R (contrary or supplementary opinions welcome).
>> It is the sort of thing you will find in the references also. If this is
>> all obvious, sorry for wasting your time.
>> #######################
>> search()
>> ls()
>> dat <- list(x =2)
>> attach(dat,2)
>> search()
>> f <- function(){
>>     g <- function() x
>>     x <- 3
>>     g}
>> h <- f()
>> g <- function()x
>> ls()
>> h()
>> g()
>> detach(dat)
>> h()
>> g()
>>
>> ##########################
>> ## Here is what this gives starting with an empty .GlobalEnv.
>> ##################################
>>
>>> search()
>>   [1] ".GlobalEnv"        "package:tools"     "package:lattice"
>> "tools:rstudio"
>>   [5] "package:stats"     "package:graphics"  "package:grDevices"
>> "package:utils"
>>   [9] "package:datasets"  "package:methods"   "Autoloads"
>> "package:base"
>>> ls()
>> character(0)
>>> dat <- list(x =2)
>>> attach(dat,2)
>>> search()
>>   [1] ".GlobalEnv"        "dat"               "package:tools"
>> "package:lattice"
>>   [5] "tools:rstudio"     "package:stats"     "package:graphics"
>>   "package:grDevices"
>>   [9] "package:utils"     "package:datasets"  "package:methods"
>> "Autoloads"
>> [13] "package:base"
>>> f <- function(){
>> +    g <- function() x
>> +    x <- 3
>> +    g}
>>> h <- f()
>>> g <- function()x
>>> ls()
>> [1] "dat" "f"   "g"   "h"
>>> h()
>> [1] 3
>>> g()
>> [1] 2
>>> detach(dat)
>>> h()
>> [1] 3
>>> g()
>> Error in g() : object 'x' not found
>>
>> -- Bert
>>
>>
>> On Tue, Apr 4, 2023 at 6:56?AM akshay kulkarni <akshay_e4 at hotmail.com>
>> wrote:
>>
>>> Dear Members,
>>>                               I have the following code typed at the
>>> console prompt:
>>>
>>> y   <-   x*10
>>>
>>> X has not been defined and the above code throws an object not found
>>> error. That is, the global environment does not contain x. Why doesn't it
>>> look further in the environment stack, like that of packages? There are
>>> thousands of packages that contain the variable named  x. Of course, that
>>> happens if the above code is in a function (or does it?).
>>>
>>> What concept of R is at work in this dichotomy?
>>>
>>> THanking you,
>>> Yours sincerely,
>>> AKSHAY M KULKARNI
>>>
>>>          [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>          [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@rk|eed@2 @end|ng |rom gm@||@com  Wed Apr  5 14:52:40 2023
From: m@rk|eed@2 @end|ng |rom gm@||@com (Mark Leeds)
Date: Wed, 5 Apr 2023 08:52:40 -0400
Subject: [R] on lexical scoping....
In-Reply-To: <e8c9bf61-137e-eef5-adfd-70e000e8c2b0@gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbRBjrpo3c8D-vfaye1+Dc5eGb++eCaLQ+sbKojoFURy1A@mail.gmail.com>
 <CAHz+bWbzDUPjrHyXauw07rWkB3mOs4YsQqZTEfWUkb8CtWbHJQ@mail.gmail.com>
 <e8c9bf61-137e-eef5-adfd-70e000e8c2b0@gmail.com>
Message-ID: <CAHz+bWaxQMG59GdLJrj4jhMkT7X3uAEghUr23_-p3zoCwW0o5A@mail.gmail.com>

Hi Duncan. I read it a looooong time ago so it's probably best if
I read it again ALONG with your corrections. Every detail matters
with these concepts so thanks a lot.

Mark

On Wed, Apr 5, 2023 at 5:12?AM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> It seems mostly correct. Here are a few quibbles:
>
> - I don't think "owner" is a good description of the parent environment.
>   Usually when I use owner in computing, there's an implication that the
> owner controls what it owns, is responsible for allocating and
> destroying it, etc.  Parent environments are targets of a pointer from
> other environments that list them as their "enclosure", but they have no
> record of their children.
>
> - The analogy that all roads lead to the search list is wrong.  There's
> no reason you couldn't create an environment whose parent was the empty
> environment.  But with the qualifier "when we start in R_GlobalEnv" it's
> correct, so this complaint is just about the wording.
>
> - The description of what Imports does is wrong.  What is described
> there is what the `import()` directive in NAMESPACE does.  The Imports
> line in DESCRIPTION just guarantees that the named package is loaded, it
> doesn't import anything.  And the `importFrom()` directive in NAMESPACE
> isn't discussed.
>
> - It gets bad near the end in the "Curveball" section.  I'd just skip
> that.  It's not at all true that all functions in a package have the
> package's namespace environment as their environment.  There are lots of
> real examples where that's not true.  Functions that maintain persistent
> records (e.g. the base function conflictRules()) often have a private
> environment, and occasionally packages import functions from other
> packages by simple assignment, so they end up in the namespace
> environment of the importer but still have the namespace environment of
> the exporter associated with them.  And the last diagram (the revised
> one with all solid lines) is just misleading.
>
> Duncan
>
> On 04/04/2023 7:53 p.m., Mark Leeds wrote:
> > obviously, everyone has different opinions on what's useful but I always
> > found this document quite
> > helpful. I think, in the past, someone said that there are some incorrect
> > statements in but I'm not sure
> > what they are.
> >
> >
> https://askming.github.io/study_notes/Stats_Comp/Note-How%20R%20searches%20and%20finds%20stuff.html
> >
> >
> > On Tue, Apr 4, 2023 at 7:06?PM Bert Gunter <bgunter.4567 at gmail.com>
> wrote:
> >
> >> The following *might* be of use to you. If you can predict what the
> various
> >> function invocations will do, I think you have a reasonable grasp of how
> >> lexical scoping works in R (contrary or supplementary opinions welcome).
> >> It is the sort of thing you will find in the references also. If this is
> >> all obvious, sorry for wasting your time.
> >> #######################
> >> search()
> >> ls()
> >> dat <- list(x =2)
> >> attach(dat,2)
> >> search()
> >> f <- function(){
> >>     g <- function() x
> >>     x <- 3
> >>     g}
> >> h <- f()
> >> g <- function()x
> >> ls()
> >> h()
> >> g()
> >> detach(dat)
> >> h()
> >> g()
> >>
> >> ##########################
> >> ## Here is what this gives starting with an empty .GlobalEnv.
> >> ##################################
> >>
> >>> search()
> >>   [1] ".GlobalEnv"        "package:tools"     "package:lattice"
> >> "tools:rstudio"
> >>   [5] "package:stats"     "package:graphics"  "package:grDevices"
> >> "package:utils"
> >>   [9] "package:datasets"  "package:methods"   "Autoloads"
> >> "package:base"
> >>> ls()
> >> character(0)
> >>> dat <- list(x =2)
> >>> attach(dat,2)
> >>> search()
> >>   [1] ".GlobalEnv"        "dat"               "package:tools"
> >> "package:lattice"
> >>   [5] "tools:rstudio"     "package:stats"     "package:graphics"
> >>   "package:grDevices"
> >>   [9] "package:utils"     "package:datasets"  "package:methods"
> >> "Autoloads"
> >> [13] "package:base"
> >>> f <- function(){
> >> +    g <- function() x
> >> +    x <- 3
> >> +    g}
> >>> h <- f()
> >>> g <- function()x
> >>> ls()
> >> [1] "dat" "f"   "g"   "h"
> >>> h()
> >> [1] 3
> >>> g()
> >> [1] 2
> >>> detach(dat)
> >>> h()
> >> [1] 3
> >>> g()
> >> Error in g() : object 'x' not found
> >>
> >> -- Bert
> >>
> >>
> >> On Tue, Apr 4, 2023 at 6:56?AM akshay kulkarni <akshay_e4 at hotmail.com>
> >> wrote:
> >>
> >>> Dear Members,
> >>>                               I have the following code typed at the
> >>> console prompt:
> >>>
> >>> y   <-   x*10
> >>>
> >>> X has not been defined and the above code throws an object not found
> >>> error. That is, the global environment does not contain x. Why doesn't
> it
> >>> look further in the environment stack, like that of packages? There are
> >>> thousands of packages that contain the variable named  x. Of course,
> that
> >>> happens if the above code is in a function (or does it?).
> >>>
> >>> What concept of R is at work in this dichotomy?
> >>>
> >>> THanking you,
> >>> Yours sincerely,
> >>> AKSHAY M KULKARNI
> >>>
> >>>          [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>>
> >>
> >>          [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Apr  5 18:59:50 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 5 Apr 2023 16:59:50 +0000
Subject: [R] on lexical scoping....
In-Reply-To: <CAGxFJbRBjrpo3c8D-vfaye1+Dc5eGb++eCaLQ+sbKojoFURy1A@mail.gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbRBjrpo3c8D-vfaye1+Dc5eGb++eCaLQ+sbKojoFURy1A@mail.gmail.com>
Message-ID: <PU4P216MB156847667C36C0F819E8A890C8909@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

dear Bert,
                  I could predict most of them, but,of course, you have not wasted my time!

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>
Sent: Wednesday, April 5, 2023 4:36 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] on lexical scoping....

The following *might* be of use to you. If you can predict what the various function invocations will do, I think you have a reasonable grasp of how lexical scoping works in R (contrary or supplementary opinions welcome).  It is the sort of thing you will find in the references also. If this is all obvious, sorry for wasting your time.
#######################
search()
ls()
dat <- list(x =2)
attach(dat,2)
search()
f <- function(){
   g <- function() x
   x <- 3
   g}
h <- f()
g <- function()x
ls()
h()
g()
detach(dat)
h()
g()

##########################
## Here is what this gives starting with an empty .GlobalEnv.
##################################

> search()
 [1] ".GlobalEnv"        "package:tools"     "package:lattice"   "tools:rstudio"
 [5] "package:stats"     "package:graphics"  "package:grDevices" "package:utils"
 [9] "package:datasets"  "package:methods"   "Autoloads"         "package:base"
> ls()
character(0)
> dat <- list(x =2)
> attach(dat,2)
> search()
 [1] ".GlobalEnv"        "dat"               "package:tools"     "package:lattice"
 [5] "tools:rstudio"     "package:stats"     "package:graphics"  "package:grDevices"
 [9] "package:utils"     "package:datasets"  "package:methods"   "Autoloads"
[13] "package:base"
> f <- function(){
+    g <- function() x
+    x <- 3
+    g}
> h <- f()
> g <- function()x
> ls()
[1] "dat" "f"   "g"   "h"
> h()
[1] 3
> g()
[1] 2
> detach(dat)
> h()
[1] 3
> g()
Error in g() : object 'x' not found

-- Bert


On Tue, Apr 4, 2023 at 6:56?AM akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
Dear Members,
                             I have the following code typed at the console prompt:

y   <-   x*10

X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).

What concept of R is at work in this dichotomy?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Apr  5 19:04:04 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 5 Apr 2023 17:04:04 +0000
Subject: [R] on lexical scoping....
In-Reply-To: <CABcYAdKa9SOBLCCRUK4qMHeVQAmgNzrY2_pi82n_6woXC7E2CA@mail.gmail.com>
References: <PU4P216MB15683EBC52825DFE535B9F26C8939@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CABcYAdKa9SOBLCCRUK4qMHeVQAmgNzrY2_pi82n_6woXC7E2CA@mail.gmail.com>
Message-ID: <PU4P216MB15686DB38EB6408C3C8C55FEC8909@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear richard,
                        Bulls eye! thanks for your pointed reply...!

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Richard O'Keefe <raoknz at gmail.com>
Sent: Wednesday, April 5, 2023 10:30 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] on lexical scoping....

R *does* search the environment stack.

> search()
[1] ".GlobalEnv"        "package:stats"     "package:graphics"
[4] "package:grDevices" "package:utils"     "package:datasets"
[7] "package:methods"   "Autoloads"         "package:base

What you seem to be missing is that a package may contain
bindings that it does not export, as the wording of this
error message reminds us:
> utils::y
Error: 'y' is not an exported object from 'namespace:utils'

So when package/namespace goes onto the environment stack,
it's only the *exported* bindings that become visible.



On Wed, 5 Apr 2023 at 01:56, akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
Dear Members,
                             I have the following code typed at the console prompt:

y   <-   x*10

X has not been defined and the above code throws an object not found error. That is, the global environment does not contain x. Why doesn't it look further in the environment stack, like that of packages? There are thousands of packages that contain the variable named  x. Of course, that happens if the above code is in a function (or does it?).

What concept of R is at work in this dichotomy?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From g|t@yn|te @end|ng |rom out|ook@com  Tue Apr  4 08:24:56 2023
From: g|t@yn|te @end|ng |rom out|ook@com (peter murage)
Date: Tue, 4 Apr 2023 06:24:56 +0000
Subject: [R] "prob" package alternative
Message-ID: <AM0P195MB062743C4777B17ED9F6E1113BA939@AM0P195MB0627.EURP195.PROD.OUTLOOK.COM>

Which package in R replaced package prob?

Sent from Mail<https://go.microsoft.com/fwlink/?LinkId=550986> for Windows


	[[alternative HTML version deleted]]


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Thu Apr  6 11:15:12 2023
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 6 Apr 2023 11:15:12 +0200
Subject: [R] "prob" package alternative
In-Reply-To: <AM0P195MB062743C4777B17ED9F6E1113BA939@AM0P195MB0627.EURP195.PROD.OUTLOOK.COM>
References: <AM0P195MB062743C4777B17ED9F6E1113BA939@AM0P195MB0627.EURP195.PROD.OUTLOOK.COM>
Message-ID: <25646.36256.916387.808282@stat.math.ethz.ch>

>>>>> peter murage 
>>>>>     on Tue, 4 Apr 2023 06:24:56 +0000 writes:

    > Which package in R replaced package prob?

Well, if you google that you should quickly be lead to
(something I even think makes sense to memorize as "rule"
  package=<pkg> ) :

  https://CRAN.R-project.org/package=prob

which now says that the package was archived as it depended on
another package that was archived.

Both are still there -- in the CRAN archive --
but to install them may be a bit of work particularly if you are
on Windows (as it suggeested you are via a Microsoft "add" at
the end of your R-help post ..).
One way I'd use is Winbuilder
(which will require you to set yourself as formal "Maintainer" of
 the package before submission).

An alternative may be to use Rhub ..
or then learn to do it yourself, by installing the "Rtools" (for Windows):
---> https://cran.r-project.org/bin/windows/Rtools/
 
With best regards,
Martin


From @tyen @end|ng |rom ntu@edu@tw  Thu Apr  6 11:28:32 2023
From: @tyen @end|ng |rom ntu@edu@tw (Steven T. Yen)
Date: Thu, 6 Apr 2023 17:28:32 +0800
Subject: [R] R does not run under latest RStudio
Message-ID: <4f0449c3-3a7b-6537-4ba2-a6a1ae78c806@ntu.edu.tw>

I updated to latest RStudio (RStudio-2023.03.0-386.exe) but
R would not run. Error message:

Error Starting R
The R session failed to start.

RSTUDIO VERSION
RStudio 2023.03.0+386 "Cherry Blossom " (3c53477a, 2023-03-09) for Windows
[No error available]

I also tried RStudio 2022.12.0+353 --- same problem.

I then tried another older version of RStudio (not sure version
as I changed file name by accident) and R ran.

Any clues? Please help. Thanks.


From @tyen @end|ng |rom ntu@edu@tw  Thu Apr  6 12:21:09 2023
From: @tyen @end|ng |rom ntu@edu@tw (Steven T. Yen)
Date: Thu, 6 Apr 2023 18:21:09 +0800
Subject: [R] R does not run under latest RStudio
In-Reply-To: <4f0449c3-3a7b-6537-4ba2-a6a1ae78c806@ntu.edu.tw>
References: <4f0449c3-3a7b-6537-4ba2-a6a1ae78c806@ntu.edu.tw>
Message-ID: <d35a41c5-aaf5-3444-4f36-d685aa583a61@ntu.edu.tw>

p.s. But now I click some (but not all)? .R file and cannot see the 
source code.

On 4/6/2023 5:28 PM, Steven T. Yen wrote:
> I updated to latest RStudio (RStudio-2023.03.0-386.exe) but
> R would not run. Error message:
>
> Error Starting R
> The R session failed to start.
>
> RSTUDIO VERSION
> RStudio 2023.03.0+386 "Cherry Blossom " (3c53477a, 2023-03-09) for 
> Windows
> [No error available]
>
> I also tried RStudio 2022.12.0+353 --- same problem.
>
> I then tried another older version of RStudio (not sure version
> as I changed file name by accident) and R ran.
>
> Any clues? Please help. Thanks.
>


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Thu Apr  6 12:21:40 2023
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Thu, 6 Apr 2023 12:21:40 +0200
Subject: [R] R does not run under latest RStudio
In-Reply-To: <4f0449c3-3a7b-6537-4ba2-a6a1ae78c806@ntu.edu.tw>
References: <4f0449c3-3a7b-6537-4ba2-a6a1ae78c806@ntu.edu.tw>
Message-ID: <3c6ec750-1f6f-3633-47d3-f48993733d3a@statistik.tu-dortmund.de>

No, but you need to ask on an RStudio mailing list.
This one is about R.

Best,
Uwe Ligges




On 06.04.2023 11:28, Steven T. Yen wrote:
> I updated to latest RStudio (RStudio-2023.03.0-386.exe) but
> R would not run. Error message:
> 
> Error Starting R
> The R session failed to start.
> 
> RSTUDIO VERSION
> RStudio 2023.03.0+386 "Cherry Blossom " (3c53477a, 2023-03-09) for Windows
> [No error available]
> 
> I also tried RStudio 2022.12.0+353 --- same problem.
> 
> I then tried another older version of RStudio (not sure version
> as I changed file name by accident) and R ran.
> 
> Any clues? Please help. Thanks.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From |r@|nj @end|ng |rom gm@||@com  Thu Apr  6 16:22:31 2023
From: |r@|nj @end|ng |rom gm@||@com (John C Frain)
Date: Thu, 6 Apr 2023 15:22:31 +0100
Subject: [R] R does not run under latest RStudio
In-Reply-To: <3c6ec750-1f6f-3633-47d3-f48993733d3a@statistik.tu-dortmund.de>
References: <4f0449c3-3a7b-6537-4ba2-a6a1ae78c806@ntu.edu.tw>
 <3c6ec750-1f6f-3633-47d3-f48993733d3a@statistik.tu-dortmund.de>
Message-ID: <CAHrK516yvHdq3jjA2AonCY3WAM3bWPCkdpk8oNka2yVwDWmuFQ@mail.gmail.com>

Does R run from a command prompt?  If so, the problem is likely due to your
Rstudio setup.  If R does not run from a command prompt, any error messages
might give some idea of the problem.  I can run R and Rstudio in Windows
11?, Windows 10 and the current version of Linux Mint.

On Thu 6 Apr 2023, 11:31 Uwe Ligges, <ligges at statistik.tu-dortmund.de>
wrote:

> No, but you need to ask on an RStudio mailing list.
> This one is about R.
>
> Best,
> Uwe Ligges
>
>
>
>
> On 06.04.2023 11:28, Steven T. Yen wrote:
> > I updated to latest RStudio (RStudio-2023.03.0-386.exe) but
> > R would not run. Error message:
> >
> > Error Starting R
> > The R session failed to start.
> >
> > RSTUDIO VERSION
> > RStudio 2023.03.0+386 "Cherry Blossom " (3c53477a, 2023-03-09) for
> Windows
> > [No error available]
> >
> > I also tried RStudio 2022.12.0+353 --- same problem.
> >
> > I then tried another older version of RStudio (not sure version
> > as I changed file name by accident) and R ran.
> >
> > Any clues? Please help. Thanks.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From no@p@m @end|ng |rom ||@@e@NA  Thu Apr  6 16:50:47 2023
From: no@p@m @end|ng |rom ||@@e@NA (Dr Eberhard Lisse)
Date: Thu, 6 Apr 2023 16:50:47 +0200
Subject: [R] R does not run under latest RStudio
In-Reply-To: <CAHrK516yvHdq3jjA2AonCY3WAM3bWPCkdpk8oNka2yVwDWmuFQ@mail.gmail.com>
References: <4f0449c3-3a7b-6537-4ba2-a6a1ae78c806@ntu.edu.tw>
 <3c6ec750-1f6f-3633-47d3-f48993733d3a@statistik.tu-dortmund.de>
 <CAHrK516yvHdq3jjA2AonCY3WAM3bWPCkdpk8oNka2yVwDWmuFQ@mail.gmail.com>
Message-ID: <u0mm87$92q$1@ciao.gmane.io>

Works without issues on

R version 4.2.2 (2022-10-31) -- "Innocent and Trusting"
Platform: x86_64-apple-darwin17.0 (64-bit)
RStudio Version 2023.03.0+386 (2023.03.0+386)

el

On 06/04/2023 16:22, John C Frain wrote:
> Does R run from a command prompt? If so, the problem is likely due to
> your Rstudio setup. If R does not run from a command prompt, any error
> messages might give some idea of the problem. I can run R and Rstudio
> in Windows 11?, Windows 10 and the current version of Linux Mint.
[...]
>> On 06.04.2023 11:28, Steven T. Yen wrote:
>>> I updated to latest RStudio (RStudio-2023.03.0-386.exe) but
>>> R would not run. Error message:
>>>
>>> Error Starting R
>>> The R session failed to start.
[...]


-- 
To email me replace 'nospam' with 'el'


From jwd @end|ng |rom @urewe@t@net  Thu Apr  6 17:15:57 2023
From: jwd @end|ng |rom @urewe@t@net (John Dougherty)
Date: Thu, 6 Apr 2023 08:15:57 -0700
Subject: [R] R does not run under latest RStudio
In-Reply-To: <4f0449c3-3a7b-6537-4ba2-a6a1ae78c806@ntu.edu.tw>
References: <4f0449c3-3a7b-6537-4ba2-a6a1ae78c806@ntu.edu.tw>
Message-ID: <20230406081557.790b0999.jwd@surewest.net>

On Thu, 6 Apr 2023 17:28:32 +0800
"Steven T. Yen" <styen at ntu.edu.tw> wrote:

> I updated to latest RStudio (RStudio-2023.03.0-386.exe) but
> R would not run. Error message:
> 
> Error Starting R
> The R session failed to start.
> 
> RSTUDIO VERSION
> RStudio 2023.03.0+386 "Cherry Blossom " (3c53477a, 2023-03-09) for
> Windows [No error available]
> 
> I also tried RStudio 2022.12.0+353 --- same problem.
> 
> I then tried another older version of RStudio (not sure version
> as I changed file name by accident) and R ran.
> 
> Any clues? Please help. Thanks.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html and provide commented,
> minimal, self-contained, reproducible code.
> 

Just to be thorough, what version of R are you running.  RStudio is its
own project, and they have shifted their emphasis somewhat regarding R
somewhat.  The web site now states that the organization - now
called Posit - is not de-emphasizing R so much as extending to empbrase
Python.  The current version of RStudio requires R 3.3.0 or later.

JWDougherty


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Apr  6 19:06:17 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 6 Apr 2023 18:06:17 +0100
Subject: [R] R does not run under latest RStudio
In-Reply-To: <d35a41c5-aaf5-3444-4f36-d685aa583a61@ntu.edu.tw>
References: <4f0449c3-3a7b-6537-4ba2-a6a1ae78c806@ntu.edu.tw>
 <d35a41c5-aaf5-3444-4f36-d685aa583a61@ntu.edu.tw>
Message-ID: <b51ed5df-2fa8-95ca-5753-285698c2cc7f@sapo.pt>

?s 11:21 de 06/04/2023, Steven T. Yen escreveu:
> p.s. But now I click some (but not all)? .R file and cannot see the 
> source code.
> 
> On 4/6/2023 5:28 PM, Steven T. Yen wrote:
>> I updated to latest RStudio (RStudio-2023.03.0-386.exe) but
>> R would not run. Error message:
>>
>> Error Starting R
>> The R session failed to start.
>>
>> RSTUDIO VERSION
>> RStudio 2023.03.0+386 "Cherry Blossom " (3c53477a, 2023-03-09) for 
>> Windows
>> [No error available]
>>
>> I also tried RStudio 2022.12.0+353 --- same problem.
>>
>> I then tried another older version of RStudio (not sure version
>> as I changed file name by accident) and R ran.
>>
>> Any clues? Please help. Thanks.
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Do you have a file .RData in your home directory? If yes, try removing it.

As for not being able to read .R files, have you tried to right click 
and select a text processor to open them? Like this, you will probably 
be able to read the .R files.

Hope this helps,

Rui Barradas


From @yen04 @end|ng |rom gm@||@com  Thu Apr  6 12:49:11 2023
From: @yen04 @end|ng |rom gm@||@com (Steven Yen)
Date: Thu, 6 Apr 2023 18:49:11 +0800
Subject: [R] R does not run under latest RStudio
In-Reply-To: <3c6ec750-1f6f-3633-47d3-f48993733d3a@statistik.tu-dortmund.de>
References: <3c6ec750-1f6f-3633-47d3-f48993733d3a@statistik.tu-dortmund.de>
Message-ID: <796EE476-E558-43B5-AD3C-31365CF46AD6@gmail.com>

The RStudio list generally does not respond to free version users. I was hoping someone one this (R) list would be kind enough to help me.

Steven from iPhone

> On Apr 6, 2023, at 6:22 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
> 
> ?No, but you need to ask on an RStudio mailing list.
> This one is about R.
> 
> Best,
> Uwe Ligges
> 
> 
> 
> 
>> On 06.04.2023 11:28, Steven T. Yen wrote:
>> I updated to latest RStudio (RStudio-2023.03.0-386.exe) but
>> R would not run. Error message:
>> Error Starting R
>> The R session failed to start.
>> RSTUDIO VERSION
>> RStudio 2023.03.0+386 "Cherry Blossom " (3c53477a, 2023-03-09) for Windows
>> [No error available]
>> I also tried RStudio 2022.12.0+353 --- same problem.
>> I then tried another older version of RStudio (not sure version
>> as I changed file name by accident) and R ran.
>> Any clues? Please help. Thanks.
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Apr  6 21:53:26 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 6 Apr 2023 15:53:26 -0400
Subject: [R] R does not run under latest RStudio
In-Reply-To: <796EE476-E558-43B5-AD3C-31365CF46AD6@gmail.com>
References: <3c6ec750-1f6f-3633-47d3-f48993733d3a@statistik.tu-dortmund.de>
 <796EE476-E558-43B5-AD3C-31365CF46AD6@gmail.com>
Message-ID: <7090ff43-0ed9-533c-d4fb-c92b8b33c759@gmail.com>

On 06/04/2023 6:49 a.m., Steven Yen wrote:
> The RStudio list generally does not respond to free version users. I was hoping someone one this (R) list would be kind enough to help me.

The quality of RStudio has gone way downhill lately.  Although Posit is 
now a big company, I think there are only 1 or 2 people there who really 
know what's going on in the RStudio IDE, and they are busy on other 
things these days.

So my advice to you would be to switch to the Windows rgui front end 
(which comes with R, so questions about it will be addressed here), or 
switch to a different OS, or just stay with the old RStudio version that 
was working for you.

Duncan Murdoch


From mtmorg@n@b|oc @end|ng |rom gm@||@com  Thu Apr  6 22:03:35 2023
From: mtmorg@n@b|oc @end|ng |rom gm@||@com (Martin Morgan)
Date: Thu, 6 Apr 2023 20:03:35 +0000
Subject: [R] R does not run under latest RStudio
In-Reply-To: <796EE476-E558-43B5-AD3C-31365CF46AD6@gmail.com>
References: <3c6ec750-1f6f-3633-47d3-f48993733d3a@statistik.tu-dortmund.de>
 <796EE476-E558-43B5-AD3C-31365CF46AD6@gmail.com>
Message-ID: <BY5PR04MB6627B77F192004F677665D98F9919@BY5PR04MB6627.namprd04.prod.outlook.com>

Do you mean here

https://community.rstudio.com/

? there seems to be quite a bit of activity? here's a very similar post to yours in the last day

https://community.rstudio.com/t/latest-rstudio-version-did-not-launch-appropriately-in-my-computer/163585

with a response from an RStudio / Posit employee.

Martin Morgan

From: R-help <r-help-bounces at r-project.org> on behalf of Steven Yen <syen04 at gmail.com>
Date: Thursday, April 6, 2023 at 3:20 PM
To: Uwe Ligges <ligges at statistik.tu-dortmund.de>
Cc: R-help Mailing List <r-help at r-project.org>, Steven T. Yen <Styen at ntu.edu.tw>
Subject: Re: [R] R does not run under latest RStudio
The RStudio list generally does not respond to free version users. I was hoping someone one this (R) list would be kind enough to help me.

Steven from iPhone

> On Apr 6, 2023, at 6:22 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>
> ?No, but you need to ask on an RStudio mailing list.
> This one is about R.
>
> Best,
> Uwe Ligges
>
>
>
>
>> On 06.04.2023 11:28, Steven T. Yen wrote:
>> I updated to latest RStudio (RStudio-2023.03.0-386.exe) but
>> R would not run. Error message:
>> Error Starting R
>> The R session failed to start.
>> RSTUDIO VERSION
>> RStudio 2023.03.0+386 "Cherry Blossom " (3c53477a, 2023-03-09) for Windows
>> [No error available]
>> I also tried RStudio 2022.12.0+353 --- same problem.
>> I then tried another older version of RStudio (not sure version
>> as I changed file name by accident) and R ran.
>> Any clues? Please help. Thanks.
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Thu Apr  6 23:29:53 2023
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Thu, 6 Apr 2023 14:29:53 -0700
Subject: [R] R does not run under latest RStudio
In-Reply-To: <796EE476-E558-43B5-AD3C-31365CF46AD6@gmail.com>
References: <3c6ec750-1f6f-3633-47d3-f48993733d3a@statistik.tu-dortmund.de>
 <796EE476-E558-43B5-AD3C-31365CF46AD6@gmail.com>
Message-ID: <1e04100c-c608-6d8f-bfa7-c7ed271019e6@comcast.net>


On 4/6/23 03:49, Steven Yen wrote:
> The RStudio list generally does not respond to free version users. I was hoping someone one this (R) list would be kind enough to help me.


I don't think that is true. It is perhaps true that you cannot get 
personalized help from employed staff, but you can certainly submit to 
the Q&A forum.


-- 

David

>
> Steven from iPhone
>
>> On Apr 6, 2023, at 6:22 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>>
>> ?No, but you need to ask on an RStudio mailing list.
>> This one is about R.
>>
>> Best,
>> Uwe Ligges
>>
>>
>>
>>
>>> On 06.04.2023 11:28, Steven T. Yen wrote:
>>> I updated to latest RStudio (RStudio-2023.03.0-386.exe) but
>>> R would not run. Error message:
>>> Error Starting R
>>> The R session failed to start.
>>> RSTUDIO VERSION
>>> RStudio 2023.03.0+386 "Cherry Blossom " (3c53477a, 2023-03-09) for Windows
>>> [No error available]
>>> I also tried RStudio 2022.12.0+353 --- same problem.
>>> I then tried another older version of RStudio (not sure version
>>> as I changed file name by accident) and R ran.
>>> Any clues? Please help. Thanks.
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Apr  6 23:54:20 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 6 Apr 2023 22:54:20 +0100
Subject: [R] R does not run under latest RStudio
In-Reply-To: <796EE476-E558-43B5-AD3C-31365CF46AD6@gmail.com>
References: <3c6ec750-1f6f-3633-47d3-f48993733d3a@statistik.tu-dortmund.de>
 <796EE476-E558-43B5-AD3C-31365CF46AD6@gmail.com>
Message-ID: <d4d5584e-5ef9-6700-9859-b09dd26efa8c@sapo.pt>

?s 11:49 de 06/04/2023, Steven Yen escreveu:
> The RStudio list generally does not respond to free version users. I was hoping someone one this (R) list would be kind enough to help me.

Hello,

Yes it does.
I have asked questions before and got answers that solved my problems as 
fast as here or on StackOverflow.

Hope this helps,

Rui Barradas

> 
> Steven from iPhone
> 
>> On Apr 6, 2023, at 6:22 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>>
>> ?No, but you need to ask on an RStudio mailing list.
>> This one is about R.
>>
>> Best,
>> Uwe Ligges
>>
>>
>>
>>
>>> On 06.04.2023 11:28, Steven T. Yen wrote:
>>> I updated to latest RStudio (RStudio-2023.03.0-386.exe) but
>>> R would not run. Error message:
>>> Error Starting R
>>> The R session failed to start.
>>> RSTUDIO VERSION
>>> RStudio 2023.03.0+386 "Cherry Blossom " (3c53477a, 2023-03-09) for Windows
>>> [No error available]
>>> I also tried RStudio 2022.12.0+353 --- same problem.
>>> I then tried another older version of RStudio (not sure version
>>> as I changed file name by accident) and R ran.
>>> Any clues? Please help. Thanks.
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From dw|n@em|u@ @end|ng |rom comc@@t@net  Fri Apr  7 00:00:52 2023
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Thu, 6 Apr 2023 15:00:52 -0700
Subject: [R] "prob" package alternative
In-Reply-To: <25646.36256.916387.808282@stat.math.ethz.ch>
References: <AM0P195MB062743C4777B17ED9F6E1113BA939@AM0P195MB0627.EURP195.PROD.OUTLOOK.COM>
 <25646.36256.916387.808282@stat.math.ethz.ch>
Message-ID: <4152adff-330a-95bd-8e92-043eac97aefc@comcast.net>


On 4/6/23 02:15, Martin Maechler wrote:
>>>>>> peter murage
>>>>>>      on Tue, 4 Apr 2023 06:24:56 +0000 writes:
>      > Which package in R replaced package prob?
>
> Well, if you google that you should quickly be lead to
> (something I even think makes sense to memorize as "rule"
>    package=<pkg> ) :
>
>    https://CRAN.R-project.org/package=prob
>
> which now says that the package was archived as it depended on
> another package that was archived.
>
> Both are still there -- in the CRAN archive --
> but to install them may be a bit of work

I suspect Martin is referring to the need to have an OS-specific 
toolchain for compiling packages. In this case however the DESCRIPTION 
files says:


NeedsCompilation: no


So it is probably a simple matter to install. Err.... not quite 
correctOr it would have been if there hadn't been several dependencies, 
some of which required compilation. Here's what finally worked on a 
machine that has a working toolchain.

install.packages("fBasics")

install.packages("http://cran.nexr.com/src/contrib/fOptions_3042.86.tar.gz", 
repo=NULL)

install.packages("http://cran.nexr.com/src/contrib/fAsianOptions_3042.82.tar.gz", 
repo=NULL)

install.packages("https://cran.r-project.org/src/contrib/Archive/prob/prob_1.0-1.tar.gz", 
repo=NULL)


I think I could have changed my repo to cran.nexr.com and they might 
have even had binaries. I'll check. Yep, they do have source and 
binaries. So that might be the easiest. You could try just this:


install.packages("fAsianOptions", repo="http://cran.nexr.com/", 
dependencies=TRUE)


-- 

David.

> particularly if you are
> on Windows (as it suggeested you are via a Microsoft "add" at
> the end of your R-help post ..).
> One way I'd use is Winbuilder
> (which will require you to set yourself as formal "Maintainer" of
>   the package before submission).
>
> An alternative may be to use Rhub ..
> or then learn to do it yourself, by installing the "Rtools" (for Windows):
> --->https://cran.r-project.org/bin/windows/Rtools/
>   
> With best regards,
> Martin
>
> ______________________________________________
> R-help at r-project.org  mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guidehttp://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
	[[alternative HTML version deleted]]


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Fri Apr  7 03:18:26 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Fri, 7 Apr 2023 01:18:26 +0000
Subject: [R] R does not run under latest RStudio
In-Reply-To: <1e04100c-c608-6d8f-bfa7-c7ed271019e6@comcast.net>
References: <1e04100c-c608-6d8f-bfa7-c7ed271019e6@comcast.net>
Message-ID: <35CE6259-74E3-4310-953C-6B399B693DEB@som.umaryland.edu>

I have also had difficulty running R in RStudio. Has anyone else had problems?
 It will be a shame if we need to abandon R Studio. It is a very good IDE.
John

John David Sorkin M.D., Ph.D.
Professor of Medicine
Chief, Biostatistics and Informatics
University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
Baltimore VA Medical Center
10 North Greene Street<x-apple-data-detectors://12>
GRECC<x-apple-data-detectors://12> (BT/18/GR)
Baltimore, MD 21201-1524<x-apple-data-detectors://13/0>
(Phone) 410-605-711<tel:410-605-7119>9
(Fax) 410-605-7913<tel:410-605-7913> (Please call phone number above prior to faxing)

On Apr 6, 2023, at 5:30 PM, David Winsemius <dwinsemius at comcast.net> wrote:

?
On 4/6/23 03:49, Steven Yen wrote:
The RStudio list generally does not respond to free version users. I was hoping someone one this (R) list would be kind enough to help me.


I don't think that is true. It is perhaps true that you cannot get personalized help from employed staff, but you can certainly submit to the Q&A forum.


--

David


Steven from iPhone

On Apr 6, 2023, at 6:22 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:

?No, but you need to ask on an RStudio mailing list.
This one is about R.

Best,
Uwe Ligges




On 06.04.2023 11:28, Steven T. Yen wrote:
I updated to latest RStudio (RStudio-2023.03.0-386.exe) but
R would not run. Error message:
Error Starting R
The R session failed to start.
RSTUDIO VERSION
RStudio 2023.03.0+386 "Cherry Blossom " (3c53477a, 2023-03-09) for Windows
[No error available]
I also tried RStudio 2022.12.0+353 --- same problem.
I then tried another older version of RStudio (not sure version
as I changed file name by accident) and R ran.
Any clues? Please help. Thanks.
______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C93ce6a082163463da71b08db36e62f3c%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638164134503963420%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=EpNjOFynmxiXP3%2FkBx73iTmJJSX2cBXl92waOopal0A%3D&reserved=0
PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C93ce6a082163463da71b08db36e62f3c%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638164134503963420%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=iOZi2L%2F6B9B3RawVWM5dZ8iJV3SeAJ1K8j5cq38m%2BAA%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.
   [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C93ce6a082163463da71b08db36e62f3c%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638164134503963420%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=EpNjOFynmxiXP3%2FkBx73iTmJJSX2cBXl92waOopal0A%3D&reserved=0
PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C93ce6a082163463da71b08db36e62f3c%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638164134503963420%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=iOZi2L%2F6B9B3RawVWM5dZ8iJV3SeAJ1K8j5cq38m%2BAA%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C93ce6a082163463da71b08db36e62f3c%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638164134503963420%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=EpNjOFynmxiXP3%2FkBx73iTmJJSX2cBXl92waOopal0A%3D&reserved=0
PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C93ce6a082163463da71b08db36e62f3c%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638164134503963420%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=iOZi2L%2F6B9B3RawVWM5dZ8iJV3SeAJ1K8j5cq38m%2BAA%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From po|c1410 @end|ng |rom gm@||@com  Fri Apr  7 10:46:31 2023
From: po|c1410 @end|ng |rom gm@||@com (CALUM POLWART)
Date: Fri, 7 Apr 2023 09:46:31 +0100
Subject: [R] R does not run under latest RStudio
In-Reply-To: <1e04100c-c608-6d8f-bfa7-c7ed271019e6@comcast.net>
References: <3c6ec750-1f6f-3633-47d3-f48993733d3a@statistik.tu-dortmund.de>
 <796EE476-E558-43B5-AD3C-31365CF46AD6@gmail.com>
 <1e04100c-c608-6d8f-bfa7-c7ed271019e6@comcast.net>
Message-ID: <CA+etgPn8=Z3nbV9B8A3M98X8puRtsg=EY7ri556rxLAqSTgegg@mail.gmail.com>

R studio sometimes isn't happy with i386 versions. Although I thought they
had put support back in. If you have the option for 64bit, use 64bit R.

I've also had similar issues when R couldn't find the executable.

But absolutely would expect if you post this on the community forum someone
would be along to help.

Screenshots with setup etc will be helpful, which isn't visible on here...

On Thu, 6 Apr 2023, 22:31 David Winsemius, <dwinsemius at comcast.net> wrote:

>
> On 4/6/23 03:49, Steven Yen wrote:
> > The RStudio list generally does not respond to free version users. I was
> hoping someone one this (R) list would be kind enough to help me.
>
>
> I don't think that is true. It is perhaps true that you cannot get
> personalized help from employed staff, but you can certainly submit to
> the Q&A forum.
>
>
> --
>
> David
>
> >
> > Steven from iPhone
> >
> >> On Apr 6, 2023, at 6:22 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de>
> wrote:
> >>
> >> ?No, but you need to ask on an RStudio mailing list.
> >> This one is about R.
> >>
> >> Best,
> >> Uwe Ligges
> >>
> >>
> >>
> >>
> >>> On 06.04.2023 11:28, Steven T. Yen wrote:
> >>> I updated to latest RStudio (RStudio-2023.03.0-386.exe) but
> >>> R would not run. Error message:
> >>> Error Starting R
> >>> The R session failed to start.
> >>> RSTUDIO VERSION
> >>> RStudio 2023.03.0+386 "Cherry Blossom " (3c53477a, 2023-03-09) for
> Windows
> >>> [No error available]
> >>> I also tried RStudio 2022.12.0+353 --- same problem.
> >>> I then tried another older version of RStudio (not sure version
> >>> as I changed file name by accident) and R ran.
> >>> Any clues? Please help. Thanks.
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From po|c1410 @end|ng |rom gm@||@com  Fri Apr  7 10:48:18 2023
From: po|c1410 @end|ng |rom gm@||@com (CALUM POLWART)
Date: Fri, 7 Apr 2023 09:48:18 +0100
Subject: [R] R does not run under latest RStudio
In-Reply-To: <35CE6259-74E3-4310-953C-6B399B693DEB@som.umaryland.edu>
References: <1e04100c-c608-6d8f-bfa7-c7ed271019e6@comcast.net>
 <35CE6259-74E3-4310-953C-6B399B693DEB@som.umaryland.edu>
Message-ID: <CA+etgPkrAz+siTxm3tD_t9UzOH-FY6Gd8mj3M8vUFUU__h+jcQ@mail.gmail.com>

Obviously running R is pretty fundamental to running R studio. So it seems
rather odd to be thinking you'd need to stop using R studio unless you are
doing something odd

On Fri, 7 Apr 2023, 02:18 Sorkin, John, <jsorkin at som.umaryland.edu> wrote:

> I have also had difficulty running R in RStudio. Has anyone else had
> problems?
>  It will be a shame if we need to abandon R Studio. It is a very good IDE.
> John
>
> John David Sorkin M.D., Ph.D.
> Professor of Medicine
> Chief, Biostatistics and Informatics
> University of Maryland School of Medicine Division of Gerontology and
> Geriatric Medicine
> Baltimore VA Medical Center
> 10 North Greene Street<x-apple-data-detectors://12>
> GRECC<x-apple-data-detectors://12> (BT/18/GR)
> Baltimore, MD 21201-1524<x-apple-data-detectors://13/0>
> (Phone) 410-605-711<tel:410-605-7119>9
> (Fax) 410-605-7913<tel:410-605-7913> (Please call phone number above prior
> to faxing)
>
> On Apr 6, 2023, at 5:30 PM, David Winsemius <dwinsemius at comcast.net>
> wrote:
>
> ?
> On 4/6/23 03:49, Steven Yen wrote:
> The RStudio list generally does not respond to free version users. I was
> hoping someone one this (R) list would be kind enough to help me.
>
>
> I don't think that is true. It is perhaps true that you cannot get
> personalized help from employed staff, but you can certainly submit to the
> Q&A forum.
>
>
> --
>
> David
>
>
> Steven from iPhone
>
> On Apr 6, 2023, at 6:22 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de>
> wrote:
>
> ?No, but you need to ask on an RStudio mailing list.
> This one is about R.
>
> Best,
> Uwe Ligges
>
>
>
>
> On 06.04.2023 11:28, Steven T. Yen wrote:
> I updated to latest RStudio (RStudio-2023.03.0-386.exe) but
> R would not run. Error message:
> Error Starting R
> The R session failed to start.
> RSTUDIO VERSION
> RStudio 2023.03.0+386 "Cherry Blossom " (3c53477a, 2023-03-09) for Windows
> [No error available]
> I also tried RStudio 2022.12.0+353 --- same problem.
> I then tried another older version of RStudio (not sure version
> as I changed file name by accident) and R ran.
> Any clues? Please help. Thanks.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C93ce6a082163463da71b08db36e62f3c%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638164134503963420%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=EpNjOFynmxiXP3%2FkBx73iTmJJSX2cBXl92waOopal0A%3D&reserved=0
> PLEASE do read the posting guide
> https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C93ce6a082163463da71b08db36e62f3c%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638164134503963420%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=iOZi2L%2F6B9B3RawVWM5dZ8iJV3SeAJ1K8j5cq38m%2BAA%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>    [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C93ce6a082163463da71b08db36e62f3c%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638164134503963420%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=EpNjOFynmxiXP3%2FkBx73iTmJJSX2cBXl92waOopal0A%3D&reserved=0
> PLEASE do read the posting guide
> https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C93ce6a082163463da71b08db36e62f3c%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638164134503963420%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=iOZi2L%2F6B9B3RawVWM5dZ8iJV3SeAJ1K8j5cq38m%2BAA%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C93ce6a082163463da71b08db36e62f3c%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638164134503963420%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=EpNjOFynmxiXP3%2FkBx73iTmJJSX2cBXl92waOopal0A%3D&reserved=0
> PLEASE do read the posting guide
> https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C93ce6a082163463da71b08db36e62f3c%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638164134503963420%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=iOZi2L%2F6B9B3RawVWM5dZ8iJV3SeAJ1K8j5cq38m%2BAA%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From h@w|ckh@m @end|ng |rom gm@||@com  Fri Apr  7 11:20:25 2023
From: h@w|ckh@m @end|ng |rom gm@||@com (Hadley Wickham)
Date: Fri, 7 Apr 2023 21:20:25 +1200
Subject: [R] R does not run under latest RStudio
In-Reply-To: <35CE6259-74E3-4310-953C-6B399B693DEB@som.umaryland.edu>
References: <1e04100c-c608-6d8f-bfa7-c7ed271019e6@comcast.net>
 <35CE6259-74E3-4310-953C-6B399B693DEB@som.umaryland.edu>
Message-ID: <CABdHhvGudmsB+nXprPVTxNkhpDLBXX7nOzKVR1G5bii8J9-uvA@mail.gmail.com>

I'm not aware of widespread problems, but it's possible that some
combination of OS, RStudio version, and R version might be causing
problems. Unfortunately I don't think there's enough information in
this thread for anyone to tell if that's the case.

Hadley

On Fri, Apr 7, 2023 at 1:18?PM Sorkin, John <jsorkin at som.umaryland.edu> wrote:
>
> I have also had difficulty running R in RStudio. Has anyone else had problems?
>  It will be a shame if we need to abandon R Studio. It is a very good IDE.
> John
>
> John David Sorkin M.D., Ph.D.
> Professor of Medicine
> Chief, Biostatistics and Informatics
> University of Maryland School of Medicine Division of Gerontology and Geriatric Medicine
> Baltimore VA Medical Center
> 10 North Greene Street<x-apple-data-detectors://12>
> GRECC<x-apple-data-detectors://12> (BT/18/GR)
> Baltimore, MD 21201-1524<x-apple-data-detectors://13/0>
> (Phone) 410-605-711<tel:410-605-7119>9
> (Fax) 410-605-7913<tel:410-605-7913> (Please call phone number above prior to faxing)
>
> On Apr 6, 2023, at 5:30 PM, David Winsemius <dwinsemius at comcast.net> wrote:
>
> ?
> On 4/6/23 03:49, Steven Yen wrote:
> The RStudio list generally does not respond to free version users. I was hoping someone one this (R) list would be kind enough to help me.
>
>
> I don't think that is true. It is perhaps true that you cannot get personalized help from employed staff, but you can certainly submit to the Q&A forum.
>
>
> --
>
> David
>
>
> Steven from iPhone
>
> On Apr 6, 2023, at 6:22 PM, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>
> ?No, but you need to ask on an RStudio mailing list.
> This one is about R.
>
> Best,
> Uwe Ligges
>
>
>
>
> On 06.04.2023 11:28, Steven T. Yen wrote:
> I updated to latest RStudio (RStudio-2023.03.0-386.exe) but
> R would not run. Error message:
> Error Starting R
> The R session failed to start.
> RSTUDIO VERSION
> RStudio 2023.03.0+386 "Cherry Blossom " (3c53477a, 2023-03-09) for Windows
> [No error available]
> I also tried RStudio 2022.12.0+353 --- same problem.
> I then tried another older version of RStudio (not sure version
> as I changed file name by accident) and R ran.
> Any clues? Please help. Thanks.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C93ce6a082163463da71b08db36e62f3c%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638164134503963420%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=EpNjOFynmxiXP3%2FkBx73iTmJJSX2cBXl92waOopal0A%3D&reserved=0
> PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C93ce6a082163463da71b08db36e62f3c%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638164134503963420%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=iOZi2L%2F6B9B3RawVWM5dZ8iJV3SeAJ1K8j5cq38m%2BAA%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>    [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C93ce6a082163463da71b08db36e62f3c%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638164134503963420%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=EpNjOFynmxiXP3%2FkBx73iTmJJSX2cBXl92waOopal0A%3D&reserved=0
> PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C93ce6a082163463da71b08db36e62f3c%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638164134503963420%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=iOZi2L%2F6B9B3RawVWM5dZ8iJV3SeAJ1K8j5cq38m%2BAA%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C93ce6a082163463da71b08db36e62f3c%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638164134503963420%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=EpNjOFynmxiXP3%2FkBx73iTmJJSX2cBXl92waOopal0A%3D&reserved=0
> PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C93ce6a082163463da71b08db36e62f3c%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638164134503963420%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=iOZi2L%2F6B9B3RawVWM5dZ8iJV3SeAJ1K8j5cq38m%2BAA%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
http://hadley.nz


From p@i@di@i m@iii@g oii trusti@d@t@@de  Sun Apr  9 12:46:38 2023
From: p@i@di@i m@iii@g oii trusti@d@t@@de (p@i@di@i m@iii@g oii trusti@d@t@@de)
Date: Sun, 9 Apr 2023 12:46:38 +0200 (CEST)
Subject: [R] simultaneous confidence intervals for multinomial proportions:
 sample size
Message-ID: <1041153943.632748.1681037198192@email.df.eu>

Hello!
I want to calculate simultaneous confidence intervals for a nominal variable with three categories: "yes", "no", "partially" and I expect that far more than 5 samples fall into each category.
I have read that Glaz & Sison's method is only appropriate for variables with 7 or more categories. Therefore, the Goodman method seems like a good idea.
I have found the R function "MultinomCI" {DescTools} to calculate these CIs.
However, I have not found a way to calculate in advance the required sample size for the Goodman method at a fixed confidence level and length of the intervall.
I would be very grateful for any suggestion.


Many thanks in advance!

Claudia


	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Sun Apr  9 15:25:06 2023
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Sun, 9 Apr 2023 08:25:06 -0500
Subject: [R] 
 simultaneous confidence intervals for multinomial proportions:
 sample size
In-Reply-To: <1041153943.632748.1681037198192@email.df.eu>
References: <1041153943.632748.1681037198192@email.df.eu>
Message-ID: <394C1FE9-B9F8-4AD3-A853-13D8FBC50B11@comcast.net>



> On Apr 9, 2023, at 5:46 AM, paladini at trustindata.de wrote:
> 
> Hello!
> I want to calculate simultaneous confidence intervals for a nominal variable with three categories: "yes", "no", "partially" and I expect that far more than 5 samples fall into each category.
> I have read that Glaz & Sison's method is only appropriate for variables with 7 or more categories. Therefore, the Goodman method seems like a good idea.
> I have found the R function "MultinomCI" {DescTools} to calculate these CIs.
> However, I have not found a way to calculate in advance the required sample size for the Goodman method at a fixed confidence level and length of the intervall.



Seems very unlikely that you can achieve both of those goals simultaneously. I would expect the CI width t vary with the size of the sample in each category in any case. So I'm wondering if your failure at searching derives from the impossibility of your goal. Why would you desire such a result?


-- 
David.
> I would be very grateful for any suggestion.
> 
> 
> Many thanks in advance!
> 
> Claudia
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Apr  9 19:22:32 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 9 Apr 2023 17:22:32 +0000
Subject: [R] extracting pdf tables...
Message-ID: <PU4P216MB1568724B6675235F625EA26CC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear members,
                             I am extracting a pdf table by the following code:

> library(tabulizer)
> IDT <- extract_tables("https://www.canmoney.in/pdf/INTRADAYLEVERAGE-20220531-latest.pdf",output = "data.frame")

It returns 4 different data frames which I want to combine them and make one data frame. But when I run this:

> rbind(IDT[[1]],IDT[[2]],IDT[[3]],IDT[[4]])
 Error in match.names(clabs, names(xi)) :
names do not match previous names

Also:

> class(IDT[[1]])
[1] "data.frame"

> cbind(IDT[[1]],IDT[[2]],IDT[[3]],IDT[[4]],make.row.names = FALSE)
 Error in data.frame(..., check.names = FALSE) :
arguments imply differing number of rows: 55, 56, 30, 1

Can anyone please help me to combine all these 4 different data frames?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Apr  9 19:49:09 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 09 Apr 2023 10:49:09 -0700
Subject: [R] extracting pdf tables...
In-Reply-To: <PU4P216MB1568724B6675235F625EA26CC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568724B6675235F625EA26CC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <1FCFDA0D-A336-4F2B-A2BC-DA019DD39CB2@dcn.davis.ca.us>

Clearly the column names are different. You need to decide what to do about that. Choose the subset of dataframes where the column names are the same? Rename columns? Omit some columns? Add missing columns filled with NA?

On April 9, 2023 10:22:32 AM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>Dear members,
>                             I am extracting a pdf table by the following code:
>
>> library(tabulizer)
>> IDT <- extract_tables("https://www.canmoney.in/pdf/INTRADAYLEVERAGE-20220531-latest.pdf",output = "data.frame")
>
>It returns 4 different data frames which I want to combine them and make one data frame. But when I run this:
>
>> rbind(IDT[[1]],IDT[[2]],IDT[[3]],IDT[[4]])
> Error in match.names(clabs, names(xi)) :
>names do not match previous names
>
>Also:
>
>> class(IDT[[1]])
>[1] "data.frame"
>
>> cbind(IDT[[1]],IDT[[2]],IDT[[3]],IDT[[4]],make.row.names = FALSE)
> Error in data.frame(..., check.names = FALSE) :
>arguments imply differing number of rows: 55, 56, 30, 1
>
>Can anyone please help me to combine all these 4 different data frames?
>
>Thanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Apr  9 20:27:36 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 09 Apr 2023 11:27:36 -0700
Subject: [R] extracting pdf tables...
In-Reply-To: <1FCFDA0D-A336-4F2B-A2BC-DA019DD39CB2@dcn.davis.ca.us>
References: <PU4P216MB1568724B6675235F625EA26CC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <1FCFDA0D-A336-4F2B-A2BC-DA019DD39CB2@dcn.davis.ca.us>
Message-ID: <EBFC060B-1BBB-4D91-A88E-F021F1855327@dcn.davis.ca.us>

Sorry, did not read closely enough.

Did you want rbind (which has no problem with different numbers of rows) or merge (which requires that there be key columns that can be aligned by repeating data)?

On April 9, 2023 10:49:09 AM PDT, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>Clearly the column names are different. You need to decide what to do about that. Choose the subset of dataframes where the column names are the same? Rename columns? Omit some columns? Add missing columns filled with NA?
>
>On April 9, 2023 10:22:32 AM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>>Dear members,
>>                             I am extracting a pdf table by the following code:
>>
>>> library(tabulizer)
>>> IDT <- extract_tables("https://www.canmoney.in/pdf/INTRADAYLEVERAGE-20220531-latest.pdf",output = "data.frame")
>>
>>It returns 4 different data frames which I want to combine them and make one data frame. But when I run this:
>>
>>> rbind(IDT[[1]],IDT[[2]],IDT[[3]],IDT[[4]])
>> Error in match.names(clabs, names(xi)) :
>>names do not match previous names
>>
>>Also:
>>
>>> class(IDT[[1]])
>>[1] "data.frame"
>>
>>> cbind(IDT[[1]],IDT[[2]],IDT[[3]],IDT[[4]],make.row.names = FALSE)
>> Error in data.frame(..., check.names = FALSE) :
>>arguments imply differing number of rows: 55, 56, 30, 1
>>
>>Can anyone please help me to combine all these 4 different data frames?
>>
>>Thanking you,
>>Yours sincerely,
>>AKSHAY M KULKARNI
>>
>>	[[alternative HTML version deleted]]
>>
>>______________________________________________
>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.
>

-- 
Sent from my phone. Please excuse my brevity.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Apr  9 20:43:01 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 9 Apr 2023 18:43:01 +0000
Subject: [R] extracting pdf tables...
In-Reply-To: <EBFC060B-1BBB-4D91-A88E-F021F1855327@dcn.davis.ca.us>
References: <PU4P216MB1568724B6675235F625EA26CC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <1FCFDA0D-A336-4F2B-A2BC-DA019DD39CB2@dcn.davis.ca.us>
 <EBFC060B-1BBB-4D91-A88E-F021F1855327@dcn.davis.ca.us>
Message-ID: <PU4P216MB15683E997F32D7D80DC3D97AC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Jeff,
                  I want to rbind.

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Sent: Sunday, April 9, 2023 11:57 PM
To: r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] extracting pdf tables...

Sorry, did not read closely enough.

Did you want rbind (which has no problem with different numbers of rows) or merge (which requires that there be key columns that can be aligned by repeating data)?

On April 9, 2023 10:49:09 AM PDT, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>Clearly the column names are different. You need to decide what to do about that. Choose the subset of dataframes where the column names are the same? Rename columns? Omit some columns? Add missing columns filled with NA?
>
>On April 9, 2023 10:22:32 AM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>>Dear members,
>>                             I am extracting a pdf table by the following code:
>>
>>> library(tabulizer)
>>> IDT <- extract_tables("https://www.canmoney.in/pdf/INTRADAYLEVERAGE-20220531-latest.pdf",output = "data.frame")
>>
>>It returns 4 different data frames which I want to combine them and make one data frame. But when I run this:
>>
>>> rbind(IDT[[1]],IDT[[2]],IDT[[3]],IDT[[4]])
>> Error in match.names(clabs, names(xi)) :
>>names do not match previous names
>>
>>Also:
>>
>>> class(IDT[[1]])
>>[1] "data.frame"
>>
>>> cbind(IDT[[1]],IDT[[2]],IDT[[3]],IDT[[4]],make.row.names = FALSE)
>> Error in data.frame(..., check.names = FALSE) :
>>arguments imply differing number of rows: 55, 56, 30, 1
>>
>>Can anyone please help me to combine all these 4 different data frames?
>>
>>Thanking you,
>>Yours sincerely,
>>AKSHAY M KULKARNI
>>
>>      [[alternative HTML version deleted]]
>>
>>______________________________________________
>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.
>

--
Sent from my phone. Please excuse my brevity.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Apr  9 20:57:57 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 09 Apr 2023 11:57:57 -0700
Subject: [R] extracting pdf tables...
In-Reply-To: <PU4P216MB15683E997F32D7D80DC3D97AC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568724B6675235F625EA26CC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <1FCFDA0D-A336-4F2B-A2BC-DA019DD39CB2@dcn.davis.ca.us>
 <EBFC060B-1BBB-4D91-A88E-F021F1855327@dcn.davis.ca.us>
 <PU4P216MB15683E997F32D7D80DC3D97AC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <81BDDC28-FA17-4871-A97B-43ADE820B254@dcn.davis.ca.us>

Your code used cbind. My first answer was appropriate for rbind.

So you still need to figure out how to deal with the different columns in the tables, which requires more knowledge about their contents than we have.

On April 9, 2023 11:43:01 AM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>Dear Jeff,
>                  I want to rbind.
>
>Thanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>________________________________
>From: R-help <r-help-bounces at r-project.org> on behalf of Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>Sent: Sunday, April 9, 2023 11:57 PM
>To: r-help at r-project.org <r-help at r-project.org>
>Subject: Re: [R] extracting pdf tables...
>
>Sorry, did not read closely enough.
>
>Did you want rbind (which has no problem with different numbers of rows) or merge (which requires that there be key columns that can be aligned by repeating data)?
>
>On April 9, 2023 10:49:09 AM PDT, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>>Clearly the column names are different. You need to decide what to do about that. Choose the subset of dataframes where the column names are the same? Rename columns? Omit some columns? Add missing columns filled with NA?
>>
>>On April 9, 2023 10:22:32 AM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>>>Dear members,
>>>                             I am extracting a pdf table by the following code:
>>>
>>>> library(tabulizer)
>>>> IDT <- extract_tables("https://www.canmoney.in/pdf/INTRADAYLEVERAGE-20220531-latest.pdf",output = "data.frame")
>>>
>>>It returns 4 different data frames which I want to combine them and make one data frame. But when I run this:
>>>
>>>> rbind(IDT[[1]],IDT[[2]],IDT[[3]],IDT[[4]])
>>> Error in match.names(clabs, names(xi)) :
>>>names do not match previous names
>>>
>>>Also:
>>>
>>>> class(IDT[[1]])
>>>[1] "data.frame"
>>>
>>>> cbind(IDT[[1]],IDT[[2]],IDT[[3]],IDT[[4]],make.row.names = FALSE)
>>> Error in data.frame(..., check.names = FALSE) :
>>>arguments imply differing number of rows: 55, 56, 30, 1
>>>
>>>Can anyone please help me to combine all these 4 different data frames?
>>>
>>>Thanking you,
>>>Yours sincerely,
>>>AKSHAY M KULKARNI
>>>
>>>      [[alternative HTML version deleted]]
>>>
>>>______________________________________________
>>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>https://stat.ethz.ch/mailman/listinfo/r-help
>>>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>and provide commented, minimal, self-contained, reproducible code.
>>
>
>--
>Sent from my phone. Please excuse my brevity.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Apr  9 21:03:36 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 9 Apr 2023 19:03:36 +0000
Subject: [R] extracting pdf tables...
In-Reply-To: <81BDDC28-FA17-4871-A97B-43ADE820B254@dcn.davis.ca.us>
References: <PU4P216MB1568724B6675235F625EA26CC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <1FCFDA0D-A336-4F2B-A2BC-DA019DD39CB2@dcn.davis.ca.us>
 <EBFC060B-1BBB-4D91-A88E-F021F1855327@dcn.davis.ca.us>
 <PU4P216MB15683E997F32D7D80DC3D97AC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <81BDDC28-FA17-4871-A97B-43ADE820B254@dcn.davis.ca.us>
Message-ID: <PU4P216MB156825662F643D407191BAEAC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Jeff,
                  Thanks for your reply.

I have the following:

> colnames(IDT[[4]])
[1] "X168"                "TATA.MOTORS.LIMITED" "TATAMOTORS"          "X4"

THe above has to be the first row of IDT[[4]]. The first row is getting parsed as the column name. How do you make that the first row of IDT[[4]]?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Sent: Monday, April 10, 2023 12:27 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>; r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] extracting pdf tables...

Your code used cbind. My first answer was appropriate for rbind.

So you still need to figure out how to deal with the different columns in the tables, which requires more knowledge about their contents than we have.

On April 9, 2023 11:43:01 AM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>Dear Jeff,
>                  I want to rbind.
>
>Thanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>________________________________
>From: R-help <r-help-bounces at r-project.org> on behalf of Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>Sent: Sunday, April 9, 2023 11:57 PM
>To: r-help at r-project.org <r-help at r-project.org>
>Subject: Re: [R] extracting pdf tables...
>
>Sorry, did not read closely enough.
>
>Did you want rbind (which has no problem with different numbers of rows) or merge (which requires that there be key columns that can be aligned by repeating data)?
>
>On April 9, 2023 10:49:09 AM PDT, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>>Clearly the column names are different. You need to decide what to do about that. Choose the subset of dataframes where the column names are the same? Rename columns? Omit some columns? Add missing columns filled with NA?
>>
>>On April 9, 2023 10:22:32 AM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>>>Dear members,
>>>                             I am extracting a pdf table by the following code:
>>>
>>>> library(tabulizer)
>>>> IDT <- extract_tables("https://www.canmoney.in/pdf/INTRADAYLEVERAGE-20220531-latest.pdf",output = "data.frame")
>>>
>>>It returns 4 different data frames which I want to combine them and make one data frame. But when I run this:
>>>
>>>> rbind(IDT[[1]],IDT[[2]],IDT[[3]],IDT[[4]])
>>> Error in match.names(clabs, names(xi)) :
>>>names do not match previous names
>>>
>>>Also:
>>>
>>>> class(IDT[[1]])
>>>[1] "data.frame"
>>>
>>>> cbind(IDT[[1]],IDT[[2]],IDT[[3]],IDT[[4]],make.row.names = FALSE)
>>> Error in data.frame(..., check.names = FALSE) :
>>>arguments imply differing number of rows: 55, 56, 30, 1
>>>
>>>Can anyone please help me to combine all these 4 different data frames?
>>>
>>>Thanking you,
>>>Yours sincerely,
>>>AKSHAY M KULKARNI
>>>
>>>      [[alternative HTML version deleted]]
>>>
>>>______________________________________________
>>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>https://stat.ethz.ch/mailman/listinfo/r-help
>>>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>and provide commented, minimal, self-contained, reproducible code.
>>
>
>--
>Sent from my phone. Please excuse my brevity.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Apr  9 21:23:49 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 09 Apr 2023 12:23:49 -0700
Subject: [R] extracting pdf tables...
In-Reply-To: <PU4P216MB156825662F643D407191BAEAC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568724B6675235F625EA26CC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <1FCFDA0D-A336-4F2B-A2BC-DA019DD39CB2@dcn.davis.ca.us>
 <EBFC060B-1BBB-4D91-A88E-F021F1855327@dcn.davis.ca.us>
 <PU4P216MB15683E997F32D7D80DC3D97AC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <81BDDC28-FA17-4871-A97B-43ADE820B254@dcn.davis.ca.us>
 <PU4P216MB156825662F643D407191BAEAC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <0AFAA232-384F-4714-81E9-46ACCF32AA7F@dcn.davis.ca.us>

I don't know... I have never used tabulizer (which is no longer on CRAN anyway).

In general you would provide an argument to the data import function that would tell it to expect a header. I suspect you will have to set the names(IDT[[4]]) <- whatever it should be and remove the first row from the data frame.

On April 9, 2023 12:03:36 PM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>Dear Jeff,
>                  Thanks for your reply.
>
>I have the following:
>
>> colnames(IDT[[4]])
>[1] "X168"                "TATA.MOTORS.LIMITED" "TATAMOTORS"          "X4"
>
>THe above has to be the first row of IDT[[4]]. The first row is getting parsed as the column name. How do you make that the first row of IDT[[4]]?
>
>Thanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>________________________________
>From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>Sent: Monday, April 10, 2023 12:27 AM
>To: akshay kulkarni <akshay_e4 at hotmail.com>; r-help at r-project.org <r-help at r-project.org>
>Subject: Re: [R] extracting pdf tables...
>
>Your code used cbind. My first answer was appropriate for rbind.
>
>So you still need to figure out how to deal with the different columns in the tables, which requires more knowledge about their contents than we have.
>
>On April 9, 2023 11:43:01 AM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>>Dear Jeff,
>>                  I want to rbind.
>>
>>Thanking you,
>>Yours sincerely,
>>AKSHAY M KULKARNI
>>________________________________
>>From: R-help <r-help-bounces at r-project.org> on behalf of Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>Sent: Sunday, April 9, 2023 11:57 PM
>>To: r-help at r-project.org <r-help at r-project.org>
>>Subject: Re: [R] extracting pdf tables...
>>
>>Sorry, did not read closely enough.
>>
>>Did you want rbind (which has no problem with different numbers of rows) or merge (which requires that there be key columns that can be aligned by repeating data)?
>>
>>On April 9, 2023 10:49:09 AM PDT, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>>>Clearly the column names are different. You need to decide what to do about that. Choose the subset of dataframes where the column names are the same? Rename columns? Omit some columns? Add missing columns filled with NA?
>>>
>>>On April 9, 2023 10:22:32 AM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>>>>Dear members,
>>>>                             I am extracting a pdf table by the following code:
>>>>
>>>>> library(tabulizer)
>>>>> IDT <- extract_tables("https://www.canmoney.in/pdf/INTRADAYLEVERAGE-20220531-latest.pdf",output = "data.frame")
>>>>
>>>>It returns 4 different data frames which I want to combine them and make one data frame. But when I run this:
>>>>
>>>>> rbind(IDT[[1]],IDT[[2]],IDT[[3]],IDT[[4]])
>>>> Error in match.names(clabs, names(xi)) :
>>>>names do not match previous names
>>>>
>>>>Also:
>>>>
>>>>> class(IDT[[1]])
>>>>[1] "data.frame"
>>>>
>>>>> cbind(IDT[[1]],IDT[[2]],IDT[[3]],IDT[[4]],make.row.names = FALSE)
>>>> Error in data.frame(..., check.names = FALSE) :
>>>>arguments imply differing number of rows: 55, 56, 30, 1
>>>>
>>>>Can anyone please help me to combine all these 4 different data frames?
>>>>
>>>>Thanking you,
>>>>Yours sincerely,
>>>>AKSHAY M KULKARNI
>>>>
>>>>      [[alternative HTML version deleted]]
>>>>
>>>>______________________________________________
>>>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>https://stat.ethz.ch/mailman/listinfo/r-help
>>>>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>--
>>Sent from my phone. Please excuse my brevity.
>>
>>______________________________________________
>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.
>
>--
>Sent from my phone. Please excuse my brevity.

-- 
Sent from my phone. Please excuse my brevity.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Apr  9 21:28:43 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 9 Apr 2023 19:28:43 +0000
Subject: [R] extracting pdf tables...
In-Reply-To: <0AFAA232-384F-4714-81E9-46ACCF32AA7F@dcn.davis.ca.us>
References: <PU4P216MB1568724B6675235F625EA26CC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <1FCFDA0D-A336-4F2B-A2BC-DA019DD39CB2@dcn.davis.ca.us>
 <EBFC060B-1BBB-4D91-A88E-F021F1855327@dcn.davis.ca.us>
 <PU4P216MB15683E997F32D7D80DC3D97AC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <81BDDC28-FA17-4871-A97B-43ADE820B254@dcn.davis.ca.us>
 <PU4P216MB156825662F643D407191BAEAC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <0AFAA232-384F-4714-81E9-46ACCF32AA7F@dcn.davis.ca.us>
Message-ID: <PU4P216MB15680949B6293AEB45DD16BCC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Jeff,
                  Got the answer...I changed output = "matrix" in extract_table and used as.data.frame to coerce the output matrix to a data frame and
rbind is working fine then...

Thanks anyways for your reply...

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Sent: Monday, April 10, 2023 12:53 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>; r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] extracting pdf tables...

I don't know... I have never used tabulizer (which is no longer on CRAN anyway).

In general you would provide an argument to the data import function that would tell it to expect a header. I suspect you will have to set the names(IDT[[4]]) <- whatever it should be and remove the first row from the data frame.

On April 9, 2023 12:03:36 PM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>Dear Jeff,
>                  Thanks for your reply.
>
>I have the following:
>
>> colnames(IDT[[4]])
>[1] "X168"                "TATA.MOTORS.LIMITED" "TATAMOTORS"          "X4"
>
>THe above has to be the first row of IDT[[4]]. The first row is getting parsed as the column name. How do you make that the first row of IDT[[4]]?
>
>Thanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>________________________________
>From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>Sent: Monday, April 10, 2023 12:27 AM
>To: akshay kulkarni <akshay_e4 at hotmail.com>; r-help at r-project.org <r-help at r-project.org>
>Subject: Re: [R] extracting pdf tables...
>
>Your code used cbind. My first answer was appropriate for rbind.
>
>So you still need to figure out how to deal with the different columns in the tables, which requires more knowledge about their contents than we have.
>
>On April 9, 2023 11:43:01 AM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>>Dear Jeff,
>>                  I want to rbind.
>>
>>Thanking you,
>>Yours sincerely,
>>AKSHAY M KULKARNI
>>________________________________
>>From: R-help <r-help-bounces at r-project.org> on behalf of Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>Sent: Sunday, April 9, 2023 11:57 PM
>>To: r-help at r-project.org <r-help at r-project.org>
>>Subject: Re: [R] extracting pdf tables...
>>
>>Sorry, did not read closely enough.
>>
>>Did you want rbind (which has no problem with different numbers of rows) or merge (which requires that there be key columns that can be aligned by repeating data)?
>>
>>On April 9, 2023 10:49:09 AM PDT, Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>>>Clearly the column names are different. You need to decide what to do about that. Choose the subset of dataframes where the column names are the same? Rename columns? Omit some columns? Add missing columns filled with NA?
>>>
>>>On April 9, 2023 10:22:32 AM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>>>>Dear members,
>>>>                             I am extracting a pdf table by the following code:
>>>>
>>>>> library(tabulizer)
>>>>> IDT <- extract_tables("https://www.canmoney.in/pdf/INTRADAYLEVERAGE-20220531-latest.pdf",output = "data.frame")
>>>>
>>>>It returns 4 different data frames which I want to combine them and make one data frame. But when I run this:
>>>>
>>>>> rbind(IDT[[1]],IDT[[2]],IDT[[3]],IDT[[4]])
>>>> Error in match.names(clabs, names(xi)) :
>>>>names do not match previous names
>>>>
>>>>Also:
>>>>
>>>>> class(IDT[[1]])
>>>>[1] "data.frame"
>>>>
>>>>> cbind(IDT[[1]],IDT[[2]],IDT[[3]],IDT[[4]],make.row.names = FALSE)
>>>> Error in data.frame(..., check.names = FALSE) :
>>>>arguments imply differing number of rows: 55, 56, 30, 1
>>>>
>>>>Can anyone please help me to combine all these 4 different data frames?
>>>>
>>>>Thanking you,
>>>>Yours sincerely,
>>>>AKSHAY M KULKARNI
>>>>
>>>>      [[alternative HTML version deleted]]
>>>>
>>>>______________________________________________
>>>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>>https://stat.ethz.ch/mailman/listinfo/r-help
>>>>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>>>and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>--
>>Sent from my phone. Please excuse my brevity.
>>
>>______________________________________________
>>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>and provide commented, minimal, self-contained, reproducible code.
>
>--
>Sent from my phone. Please excuse my brevity.

--
Sent from my phone. Please excuse my brevity.

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Apr  9 23:55:26 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 9 Apr 2023 21:55:26 +0000
Subject: [R] can't install nser...
Message-ID: <PU4P216MB1568BB677A3836B1A8991945C8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear members,
                             I can't install "nser" package. It is not in cran but install_version and install_github both are not working:

> install_version("nser",version = "1.4.0")
Downloading package from url: https://cran.rstudio.com//src/contrib/Archive/nser/nser_1.4.0.tar.gz
These packages have more recent versions available.
It is recommended to update all of them.
Which would you like to update?

 1: All
 2: CRAN packages only
 3: None
 4: rlang    (1.0.4 -> 1.1.0 ) [CRAN]
 5: cli      (3.3.0 -> 3.6.1 ) [CRAN]
 6: openssl  (1.4.5 -> 2.0.6 ) [CRAN]
 7: curl     (4.3.2 -> 5.0.0 ) [CRAN]
 8: Rcpp     (1.0.7 -> 1.0.10) [CRAN]
 9: ps       (1.6.0 -> 1.7.4 ) [CRAN]
10: processx (3.5.2 -> 3.8.0 ) [CRAN]
11: purrr    (0.3.4 -> 1.0.1 ) [CRAN]
12: magrittr (2.0.1 -> 2.0.3 ) [CRAN]
13: fastmap  (1.1.0 -> 1.1.1 ) [CRAN]
14: cachem   (1.0.6 -> 1.0.7 ) [CRAN]
15: fs       (1.5.2 -> 1.6.1 ) [CRAN]

Enter one or more numbers, or an empty line to skip updates:
* installing *source* package 'nser' ...
** package 'nser' successfully unpacked and MD5 sums checked
** using staged installation
** R
** data
*** moving datasets to lazyload DB
** inst
** byte-compile and prepare package for lazy loading
Error in loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()), versionCheck = vI[[j]]) :
  namespace 'magrittr' 2.0.1 is being loaded, but >= 2.0.3 is required
Calls: <Anonymous> ... namespaceImportFrom -> asNamespace -> loadNamespace
Execution halted
ERROR: lazy loading failed for package 'nser'
* removing 'C:/Program Files/R/R-4.1.2/library/nser'
Warning message:
In i.p(...) :
  installation of package ?C:/Users/ADMINI~1/AppData/Local/Temp/2/RtmpktmxP2/remotesbec536a2c/nser? had non-zero exit status


Can you please help?

Thanking you,
Yours sincerely,
AKSHAY M MKULKARNI

	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Mon Apr 10 00:06:00 2023
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Sun, 9 Apr 2023 18:06:00 -0400
Subject: [R] can't install nser...
In-Reply-To: <PU4P216MB1568BB677A3836B1A8991945C8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568BB677A3836B1A8991945C8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAPcHnpRZ0uCkHQ8DUMTVwBFc7G2qpr3or0A5twkWS+7CCUbS0A@mail.gmail.com>

It says that nser requires the most recent version of magrittr that you do
not have installed. You must update magrittr before attempting to install
nser:

update.packages(oldPkgs = "magrittr")

or at the prompt you were presented before, choose to update magrittr
before installing nser.

On Sun, Apr 9, 2023, 17:55 akshay kulkarni <akshay_e4 at hotmail.com> wrote:

> Dear members,
>                              I can't install "nser" package. It is not in
> cran but install_version and install_github both are not working:
>
> > install_version("nser",version = "1.4.0")
> Downloading package from url:
> https://cran.rstudio.com//src/contrib/Archive/nser/nser_1.4.0.tar.gz
> These packages have more recent versions available.
> It is recommended to update all of them.
> Which would you like to update?
>
>  1: All
>  2: CRAN packages only
>  3: None
>  4: rlang    (1.0.4 -> 1.1.0 ) [CRAN]
>  5: cli      (3.3.0 -> 3.6.1 ) [CRAN]
>  6: openssl  (1.4.5 -> 2.0.6 ) [CRAN]
>  7: curl     (4.3.2 -> 5.0.0 ) [CRAN]
>  8: Rcpp     (1.0.7 -> 1.0.10) [CRAN]
>  9: ps       (1.6.0 -> 1.7.4 ) [CRAN]
> 10: processx (3.5.2 -> 3.8.0 ) [CRAN]
> 11: purrr    (0.3.4 -> 1.0.1 ) [CRAN]
> 12: magrittr (2.0.1 -> 2.0.3 ) [CRAN]
> 13: fastmap  (1.1.0 -> 1.1.1 ) [CRAN]
> 14: cachem   (1.0.6 -> 1.0.7 ) [CRAN]
> 15: fs       (1.5.2 -> 1.6.1 ) [CRAN]
>
> Enter one or more numbers, or an empty line to skip updates:
> * installing *source* package 'nser' ...
> ** package 'nser' successfully unpacked and MD5 sums checked
> ** using staged installation
> ** R
> ** data
> *** moving datasets to lazyload DB
> ** inst
> ** byte-compile and prepare package for lazy loading
> Error in loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()), versionCheck
> = vI[[j]]) :
>   namespace 'magrittr' 2.0.1 is being loaded, but >= 2.0.3 is required
> Calls: <Anonymous> ... namespaceImportFrom -> asNamespace -> loadNamespace
> Execution halted
> ERROR: lazy loading failed for package 'nser'
> * removing 'C:/Program Files/R/R-4.1.2/library/nser'
> Warning message:
> In i.p(...) :
>   installation of package
> ?C:/Users/ADMINI~1/AppData/Local/Temp/2/RtmpktmxP2/remotesbec536a2c/nser?
> had non-zero exit status
>
>
> Can you please help?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M MKULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Mon Apr 10 00:53:18 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 9 Apr 2023 22:53:18 +0000
Subject: [R] can't install nser...
In-Reply-To: <CAPcHnpRZ0uCkHQ8DUMTVwBFc7G2qpr3or0A5twkWS+7CCUbS0A@mail.gmail.com>
References: <PU4P216MB1568BB677A3836B1A8991945C8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAPcHnpRZ0uCkHQ8DUMTVwBFc7G2qpr3or0A5twkWS+7CCUbS0A@mail.gmail.com>
Message-ID: <PU4P216MB15682ABD66C974AA6F778D1BC8949@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Andrew,
                         Thanks its working...

Thanking you,
Yours sincerely
AKSHAY M KULKARNI
________________________________
From: Andrew Simmons <akwsimmo at gmail.com>
Sent: Monday, April 10, 2023 3:36 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] can't install nser...

It says that nser requires the most recent version of magrittr that you do not have installed. You must update magrittr before attempting to install nser:

update.packages(oldPkgs = "magrittr")

or at the prompt you were presented before, choose to update magrittr before installing nser.

On Sun, Apr 9, 2023, 17:55 akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
Dear members,
                             I can't install "nser" package. It is not in cran but install_version and install_github both are not working:

> install_version("nser",version = "1.4.0")
Downloading package from url: https://cran.rstudio.com//src/contrib/Archive/nser/nser_1.4.0.tar.gz
These packages have more recent versions available.
It is recommended to update all of them.
Which would you like to update?

 1: All
 2: CRAN packages only
 3: None
 4: rlang    (1.0.4 -> 1.1.0 ) [CRAN]
 5: cli      (3.3.0 -> 3.6.1 ) [CRAN]
 6: openssl  (1.4.5 -> 2.0.6 ) [CRAN]
 7: curl     (4.3.2 -> 5.0.0 ) [CRAN]
 8: Rcpp     (1.0.7 -> 1.0.10) [CRAN]
 9: ps       (1.6.0 -> 1.7.4 ) [CRAN]
10: processx (3.5.2 -> 3.8.0 ) [CRAN]
11: purrr    (0.3.4 -> 1.0.1 ) [CRAN]
12: magrittr (2.0.1 -> 2.0.3 ) [CRAN]
13: fastmap  (1.1.0 -> 1.1.1 ) [CRAN]
14: cachem   (1.0.6 -> 1.0.7 ) [CRAN]
15: fs       (1.5.2 -> 1.6.1 ) [CRAN]

Enter one or more numbers, or an empty line to skip updates:
* installing *source* package 'nser' ...
** package 'nser' successfully unpacked and MD5 sums checked
** using staged installation
** R
** data
*** moving datasets to lazyload DB
** inst
** byte-compile and prepare package for lazy loading
Error in loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()), versionCheck = vI[[j]]) :
  namespace 'magrittr' 2.0.1 is being loaded, but >= 2.0.3 is required
Calls: <Anonymous> ... namespaceImportFrom -> asNamespace -> loadNamespace
Execution halted
ERROR: lazy loading failed for package 'nser'
* removing 'C:/Program Files/R/R-4.1.2/library/nser'
Warning message:
In i.p(...) :
  installation of package ?C:/Users/ADMINI~1/AppData/Local/Temp/2/RtmpktmxP2/remotesbec536a2c/nser? had non-zero exit status


Can you please help?

Thanking you,
Yours sincerely,
AKSHAY M MKULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From Roger@B|v@nd @end|ng |rom nhh@no  Mon Apr 10 17:31:15 2023
From: Roger@B|v@nd @end|ng |rom nhh@no (Roger Bivand)
Date: Mon, 10 Apr 2023 17:31:15 +0200 (CEST)
Subject: [R] [R-pkgs] Retirement/archiving of rgdal,
 rgeos and maptools October 2023
Message-ID: <6253c881-857b-bc97-2420-d612a3549a3e@reclus2.nhh.no>

The third report on the R-spatial evolution project has been published.

https://r-spatial.org/r/2023/04/10/evolution3.html

It links back to earlier blogs and presentations, and focuses on work that 
maintainers of R packages and workflows using rgdal, rgeos and maptools 
need to put in train now before the packages are archived on CRAN.

The first changes will occur in June 2023, and the retiring packages will 
be archived during October 2023. If you are giving a workshop or tutorial 
during the Northern hemisphere summer, aim for June.

If you still need more assistance after reading the project materials, 
raise an issue on https://github.com/r-spatial/evolution/issues or email 
me (issue better, less likely to be overlooked).

-- 
Roger Bivand
Emeritus Professor
Department of Economics, Norwegian School of Economics,
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway.
e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From @erv|ce @end|ng |rom @hd@w@on@com  Mon Apr 10 17:48:09 2023
From: @erv|ce @end|ng |rom @hd@w@on@com (Stephen H. Dawson, DSL)
Date: Mon, 10 Apr 2023 11:48:09 -0400
Subject: [R] [R-pkgs] Retirement/archiving of rgdal,
 rgeos and maptools October 2023
In-Reply-To: <6253c881-857b-bc97-2420-d612a3549a3e@reclus2.nhh.no>
References: <6253c881-857b-bc97-2420-d612a3549a3e@reclus2.nhh.no>
Message-ID: <51cf7cb5-cf4a-42ba-1826-0c565fae598f@shdawson.com>

Thank you, Roger.


Kindest Regards,
*Stephen Dawson, DSL*
/Executive Strategy Consultant/
Business & Technology
+1 (865) 804-3454
http://www.shdawson.com


On 4/10/23 11:31, Roger Bivand wrote:
> The third report on the R-spatial evolution project has been published.
>
> https://r-spatial.org/r/2023/04/10/evolution3.html
>
> It links back to earlier blogs and presentations, and focuses on work 
> that maintainers of R packages and workflows using rgdal, rgeos and 
> maptools need to put in train now before the packages are archived on 
> CRAN.
>
> The first changes will occur in June 2023, and the retiring packages 
> will be archived during October 2023. If you are giving a workshop or 
> tutorial during the Northern hemisphere summer, aim for June.
>
> If you still need more assistance after reading the project materials, 
> raise an issue on https://github.com/r-spatial/evolution/issues or 
> email me (issue better, less likely to be overlooked).
>


From @zh@ng @end|ng |rom ng@@gen-|n|o@o@@k@-u@@c@jp  Wed Apr 12 04:21:12 2023
From: @zh@ng @end|ng |rom ng@@gen-|n|o@o@@k@-u@@c@jp (Shunran Zhang)
Date: Wed, 12 Apr 2023 11:21:12 +0900
Subject: [R] Matrix scalar operation that saves memory?
Message-ID: <fc9ea9b9-f224-6de2-e184-dd9126c56f18@ngs.gen-info.osaka-u.ac.jp>

Hi all,

I am currently working with a quite large matrix that takes 300G of 
memory. My computer only has 512G of memory. I would need to do a few 
arithmetic on it with a scalar value. My current code looks like this:

mat <- 100 - mat

However such code quickly uses up all of the remaining memory and got 
the R script killed by OOM killer.

Are there any more memory-efficient way of doing such operation?

Thanks,

S. Zhang

	[[alternative HTML version deleted]]


From @vi@e@gross m@iii@g oii gm@ii@com  Wed Apr 12 05:39:58 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Tue, 11 Apr 2023 23:39:58 -0400
Subject: [R] Matrix scalar operation that saves memory?
In-Reply-To: <fc9ea9b9-f224-6de2-e184-dd9126c56f18@ngs.gen-info.osaka-u.ac.jp>
References: <fc9ea9b9-f224-6de2-e184-dd9126c56f18@ngs.gen-info.osaka-u.ac.jp>
Message-ID: <000401d96cf0$74cf6500$5e6e2f00$@gmail.com>

The example given does not leave room for even a single copy of your matrix
so, yes, you need alternatives.

Your example was fairly trivial as all you wanted to do is subtract each
value from 100 and replace it. Obviously something like squaring a matrix
has no trivial way to do without multiple copies out there that won't fit.

One technique that might work is a nested loop that changes one cell of the
matrix at a time and in-place. A variant of this might be a singe loop that
changes a single row (or column) at a time and in place.

Another odd concept is to save your matrix in a file with some format you
can read back in such as a line or row at a time, and then do the
subtraction from 100 and write it back to disk in another file. If you need
it again, I assume you can read it in but perhaps you should consider how to
increase some aspects of your "memory".

Is your matrix a real matrix type or something like a list of lists or a
data.frame? You may do better with some data structures that are more
efficient than others.

Some OS allow you to use virtual memory that is mapped in and out from the
disk that allows larger things to be done, albeit often much slower. I also
note that you can remove some things you are not using and hope garbage
collection happens soon enough.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Shunran Zhang
Sent: Tuesday, April 11, 2023 10:21 PM
To: r-help at r-project.org
Subject: [R] Matrix scalar operation that saves memory?

Hi all,

I am currently working with a quite large matrix that takes 300G of 
memory. My computer only has 512G of memory. I would need to do a few 
arithmetic on it with a scalar value. My current code looks like this:

mat <- 100 - mat

However such code quickly uses up all of the remaining memory and got 
the R script killed by OOM killer.

Are there any more memory-efficient way of doing such operation?

Thanks,

S. Zhang

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From @zh@ng @end|ng |rom ng@@gen-|n|o@o@@k@-u@@c@jp  Wed Apr 12 05:54:17 2023
From: @zh@ng @end|ng |rom ng@@gen-|n|o@o@@k@-u@@c@jp (Shunran Zhang)
Date: Wed, 12 Apr 2023 12:54:17 +0900
Subject: [R] Matrix scalar operation that saves memory?
In-Reply-To: <000401d96cf0$74cf6500$5e6e2f00$@gmail.com>
References: <fc9ea9b9-f224-6de2-e184-dd9126c56f18@ngs.gen-info.osaka-u.ac.jp>
 <000401d96cf0$74cf6500$5e6e2f00$@gmail.com>
Message-ID: <ffb42d6c-b3b5-ac6d-f06e-1e6b0506cff1@ngs.gen-info.osaka-u.ac.jp>

Thanks for the info.

For the data type, my matrix as of now is indeed a matrix in a perfect 
square shape filled in a previous segment of code, but I believe I could 
extract one row/column at a time to do some processing. I can also 
change that previous part of code to change the data type of it to 
something else if that helps.

Saving it to a file for manipulation and reading it back seems to be 
quite IO intensive - writing 600G of data and reading 300G back from a 
hard drive would make the code extremely heavy as well as wear my disk 
quite badly.

For now I'll try the row-by-row method and hope it works...

Sincerely,
S. Zhang


On 2023/04/12 12:39, avi.e.gross at gmail.com wrote:
> The example given does not leave room for even a single copy of your matrix
> so, yes, you need alternatives.
>
> Your example was fairly trivial as all you wanted to do is subtract each
> value from 100 and replace it. Obviously something like squaring a matrix
> has no trivial way to do without multiple copies out there that won't fit.
>
> One technique that might work is a nested loop that changes one cell of the
> matrix at a time and in-place. A variant of this might be a singe loop that
> changes a single row (or column) at a time and in place.
>
> Another odd concept is to save your matrix in a file with some format you
> can read back in such as a line or row at a time, and then do the
> subtraction from 100 and write it back to disk in another file. If you need
> it again, I assume you can read it in but perhaps you should consider how to
> increase some aspects of your "memory".
>
> Is your matrix a real matrix type or something like a list of lists or a
> data.frame? You may do better with some data structures that are more
> efficient than others.
>
> Some OS allow you to use virtual memory that is mapped in and out from the
> disk that allows larger things to be done, albeit often much slower. I also
> note that you can remove some things you are not using and hope garbage
> collection happens soon enough.
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Shunran Zhang
> Sent: Tuesday, April 11, 2023 10:21 PM
> To: r-help at r-project.org
> Subject: [R] Matrix scalar operation that saves memory?
>
> Hi all,
>
> I am currently working with a quite large matrix that takes 300G of
> memory. My computer only has 512G of memory. I would need to do a few
> arithmetic on it with a scalar value. My current code looks like this:
>
> mat <- 100 - mat
>
> However such code quickly uses up all of the remaining memory and got
> the R script killed by OOM killer.
>
> Are there any more memory-efficient way of doing such operation?
>
> Thanks,
>
> S. Zhang
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From bgunter@4567 @end|ng |rom gm@||@com  Wed Apr 12 06:34:14 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 11 Apr 2023 21:34:14 -0700
Subject: [R] Matrix scalar operation that saves memory?
In-Reply-To: <fc9ea9b9-f224-6de2-e184-dd9126c56f18@ngs.gen-info.osaka-u.ac.jp>
References: <fc9ea9b9-f224-6de2-e184-dd9126c56f18@ngs.gen-info.osaka-u.ac.jp>
Message-ID: <CAGxFJbRmX=tERZX8wwgktYfaDQ5ztOi7X7q=Gq_zBAxLX1kueg@mail.gmail.com>

I doubt that R's basic matrix capabilities can handle this, but have a look
at the Matrix package, especially if your matrix is some special form.

Bert

On Tue, Apr 11, 2023, 19:21 Shunran Zhang <szhang at ngs.gen-info.osaka-u.ac.jp>
wrote:

> Hi all,
>
> I am currently working with a quite large matrix that takes 300G of
> memory. My computer only has 512G of memory. I would need to do a few
> arithmetic on it with a scalar value. My current code looks like this:
>
> mat <- 100 - mat
>
> However such code quickly uses up all of the remaining memory and got
> the R script killed by OOM killer.
>
> Are there any more memory-efficient way of doing such operation?
>
> Thanks,
>
> S. Zhang
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Wed Apr 12 08:38:36 2023
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 12 Apr 2023 09:38:36 +0300
Subject: [R] Matrix scalar operation that saves memory?
In-Reply-To: <CAGxFJbRmX=tERZX8wwgktYfaDQ5ztOi7X7q=Gq_zBAxLX1kueg@mail.gmail.com>
References: <fc9ea9b9-f224-6de2-e184-dd9126c56f18@ngs.gen-info.osaka-u.ac.jp>
 <CAGxFJbRmX=tERZX8wwgktYfaDQ5ztOi7X7q=Gq_zBAxLX1kueg@mail.gmail.com>
Message-ID: <CAGgJW74=r-BnB0C4Nu9+fcJ=A4gNk4pn1LKwyYw9wm=37UvVSQ@mail.gmail.com>

One possibility might be to use Rcpp.
An R matrix is stored in contiguous memory, which can be considered as a
vector.
Define a C++ function which operates on a vector in place, as in the
following:

library(Rcpp)
cppFunction(
  'void subtractConst(NumericVector x, double c) {
  for ( int i = 0; i < x.size(); ++i)
    x[i] = x[i] - c;
}')

Try this function out on a matrix. Here we define a 5x2 matrix

m <- matrix(150.5 + 1:10, nrow=5)
print(m)

      [,1]  [,2]
[1,] 151.5 156.5
[2,] 152.5 157.5
[3,] 153.5 158.5
[4,] 154.5 159.5
[5,] 155.5 160.5

Now call the C++ function

subtractConst(m,100.0)
print(m)

    [,1] [,2]
[1,] 51.5 56.5
[2,] 52.5 57.5
[3,] 53.5 58.5
[4,] 54.5 59.5
[5,] 55.5 60.5

HTH,
Eric


On Wed, Apr 12, 2023 at 7:34?AM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> I doubt that R's basic matrix capabilities can handle this, but have a look
> at the Matrix package, especially if your matrix is some special form.
>
> Bert
>
> On Tue, Apr 11, 2023, 19:21 Shunran Zhang <
> szhang at ngs.gen-info.osaka-u.ac.jp>
> wrote:
>
> > Hi all,
> >
> > I am currently working with a quite large matrix that takes 300G of
> > memory. My computer only has 512G of memory. I would need to do a few
> > arithmetic on it with a scalar value. My current code looks like this:
> >
> > mat <- 100 - mat
> >
> > However such code quickly uses up all of the remaining memory and got
> > the R script killed by OOM killer.
> >
> > Are there any more memory-efficient way of doing such operation?
> >
> > Thanks,
> >
> > S. Zhang
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |@go@g|ne @end|ng |rom @jd@e@  Wed Apr 12 08:55:46 2023
From: |@go@g|ne @end|ng |rom @jd@e@ (=?utf-8?B?SWFnbyBHaW7DqSBWw6F6cXVleg==?=)
Date: Wed, 12 Apr 2023 06:55:46 +0000
Subject: [R] Matrix scalar operation that saves memory?
In-Reply-To: <CAGgJW74=r-BnB0C4Nu9+fcJ=A4gNk4pn1LKwyYw9wm=37UvVSQ@mail.gmail.com>
References: <fc9ea9b9-f224-6de2-e184-dd9126c56f18@ngs.gen-info.osaka-u.ac.jp>
 <CAGxFJbRmX=tERZX8wwgktYfaDQ5ztOi7X7q=Gq_zBAxLX1kueg@mail.gmail.com>
 <CAGgJW74=r-BnB0C4Nu9+fcJ=A4gNk4pn1LKwyYw9wm=37UvVSQ@mail.gmail.com>
Message-ID: <AM6PR02MB44230D3E28AA894FC62A2ED7949B9@AM6PR02MB4423.eurprd02.prod.outlook.com>

You may take a look at the bigmemory package or other which deal with large memory data in https://cran.r-project.org/web/views/HighPerformanceComputing.html#large-memory-and-out-of-memory-data
Some extra explanation is in https://stackoverflow.com/a/11127229/997979

Iago

________________________________
De: R-help <r-help-bounces at r-project.org> de part de Eric Berger <ericjberger at gmail.com>
Enviat el: dimecres, 12 d?abril de 2023 8:38
Per a: Bert Gunter <bgunter.4567 at gmail.com>
A/c: R-help <r-help at r-project.org>
Tema: Re: [R] Matrix scalar operation that saves memory?

One possibility might be to use Rcpp.
An R matrix is stored in contiguous memory, which can be considered as a
vector.
Define a C++ function which operates on a vector in place, as in the
following:

library(Rcpp)
cppFunction(
  'void subtractConst(NumericVector x, double c) {
  for ( int i = 0; i < x.size(); ++i)
    x[i] = x[i] - c;
}')

Try this function out on a matrix. Here we define a 5x2 matrix

m <- matrix(150.5 + 1:10, nrow=5)
print(m)

      [,1]  [,2]
[1,] 151.5 156.5
[2,] 152.5 157.5
[3,] 153.5 158.5
[4,] 154.5 159.5
[5,] 155.5 160.5

Now call the C++ function

subtractConst(m,100.0)
print(m)

    [,1] [,2]
[1,] 51.5 56.5
[2,] 52.5 57.5
[3,] 53.5 58.5
[4,] 54.5 59.5
[5,] 55.5 60.5

HTH,
Eric


On Wed, Apr 12, 2023 at 7:34?AM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> I doubt that R's basic matrix capabilities can handle this, but have a look
> at the Matrix package, especially if your matrix is some special form.
>
> Bert
>
> On Tue, Apr 11, 2023, 19:21 Shunran Zhang <
> szhang at ngs.gen-info.osaka-u.ac.jp>
> wrote:
>
> > Hi all,
> >
> > I am currently working with a quite large matrix that takes 300G of
> > memory. My computer only has 512G of memory. I would need to do a few
> > arithmetic on it with a scalar value. My current code looks like this:
> >
> > mat <- 100 - mat
> >
> > However such code quickly uses up all of the remaining memory and got
> > the R script killed by OOM killer.
> >
> > Are there any more memory-efficient way of doing such operation?
> >
> > Thanks,
> >
> > S. Zhang
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From m@pjg @end|ng |rom br|@to|@@c@uk  Wed Apr 12 10:18:21 2023
From: m@pjg @end|ng |rom br|@to|@@c@uk (Peter Green)
Date: Wed, 12 Apr 2023 09:18:21 +0100
Subject: [R] [R-pkgs] DNAmixturesLite and KinMixLite
Message-ID: <68d2e035-6cba-b6dd-71e8-872dc2ed1f12@bristol.ac.uk>

Dear all,

We are pleased to announce that CRAN now hosts our packages 
DNAmixturesLite and KinMixLite.

These are fully R-based versions of our packages DNAmixtures and KinMix, 
which rely on a commercial software, HUGIN, for performing efficient 
computations in Bayesian networks. The lite versions rely instead on 
gRain for such computations.

DNAmixtures provides statistical methods for DNA mixture analysis and 
has been used to provide statistical evidence pertaining to DNA in 
several criminal cases in the UK and Denmark. The purpose of the newly 
released lite version is to allow users without a HUGIN software license 
to experiment with the statistical methodology. While the lite version 
aims to provide full functionality, it is noticeably less efficient than 
the original DNAmixtures package. For details on implementation and 
methodology see <https://dnamixtures.r-forge.r-project.org/>.

KinMix builds upon DNAmixtures and is a toolbox of methods for inference 
about relationships between contributors to a DNA mixture and other 
individuals of known genotype: a basic example would be testing whether 
a contributor to a mixture is the father of a child of known genotype. 
KinMixLite builds upon DNAmixturesLite and provides most of the 
functionality of the KinMix package, but with some loss of efficiency. 
The package implements the methods introduced in Green, P. J. and 
Mortera, J. (2017) <doi:10.1016/j.fsigen.2017.02.001> and Green, P. J. 
and Mortera, J. (2021) <doi:10.1111/rssc.12498>.

Regards,
Therese Graversen and Peter Green

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Apr 12 13:03:12 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 12 Apr 2023 11:03:12 +0000
Subject: [R] aborting the execution of a script...
Message-ID: <PU4P216MB15680A122BC54694F680420EC89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear members,
                            I have a script which I source it interactively. I have the following questions:


  1.  If there is an error in an expression, an error message is printed, but the execution continues till the end of the script. I am sourcing with echo. Is there any way to abort the execution when the first error occurs? This happens with R CMD BATCH. If there is an error midway, an error message is printed in the output file and the execution aborts. Is there a way to mimic this with source()?
  2.  I am trying to abort the execution with ESC key, but again the same thing happens: it aborts the current expression but continues on. How to abort an R script with source()? I am using RStudio in windows.

Please help,

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Apr 12 14:05:26 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 12 Apr 2023 08:05:26 -0400
Subject: [R] aborting the execution of a script...
In-Reply-To: <PU4P216MB15680A122BC54694F680420EC89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15680A122BC54694F680420EC89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <19c10227-c64d-897d-e676-bdbb996727cc@gmail.com>

On 12/04/2023 7:03 a.m., akshay kulkarni wrote:
> Dear members,
>                              I have a script which I source it interactively. I have the following questions:
> 
> 
>    1.  If there is an error in an expression, an error message is printed, but the execution continues till the end of the script. I am sourcing with echo. Is there any way to abort the execution when the first error occurs? This happens with R CMD BATCH. If there is an error midway, an error message is printed in the output file and the execution aborts. Is there a way to mimic this with source()?
>    2.  I am trying to abort the execution with ESC key, but again the same thing happens: it aborts the current expression but continues on. How to abort an R script with source()? I am using RStudio in windows.

I don't see this behaviour.  If I put this in a script:

  print(1)
  stop("here")
  print(2)

then execution stops at the "stop" line if I use source(), or R CMD 
BATCH <file>, or in RStudio, Run or Source gives the same behaviour.  I 
think older versions of RStudio would have run all three lines using 
Run, but all the other methods have stopped at the stop() line.

Duncan Murdoch


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Apr 12 14:13:30 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 12 Apr 2023 12:13:30 +0000
Subject: [R] aborting the execution of a script...
In-Reply-To: <19c10227-c64d-897d-e676-bdbb996727cc@gmail.com>
References: <PU4P216MB15680A122BC54694F680420EC89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <19c10227-c64d-897d-e676-bdbb996727cc@gmail.com>
Message-ID: <PU4P216MB15680540C8F0AA922AA6E09EC89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Duncan,
                         What if I use source() with echo? I am using that in RStudio.

THanking you,
Yours sincerely
AKSHAY M KULKARNI
________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Wednesday, April 12, 2023 5:35 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] aborting the execution of a script...

On 12/04/2023 7:03 a.m., akshay kulkarni wrote:
> Dear members,
>                              I have a script which I source it interactively. I have the following questions:
>
>
>    1.  If there is an error in an expression, an error message is printed, but the execution continues till the end of the script. I am sourcing with echo. Is there any way to abort the execution when the first error occurs? This happens with R CMD BATCH. If there is an error midway, an error message is printed in the output file and the execution aborts. Is there a way to mimic this with source()?
>    2.  I am trying to abort the execution with ESC key, but again the same thing happens: it aborts the current expression but continues on. How to abort an R script with source()? I am using RStudio in windows.

I don't see this behaviour.  If I put this in a script:

  print(1)
  stop("here")
  print(2)

then execution stops at the "stop" line if I use source(), or R CMD
BATCH <file>, or in RStudio, Run or Source gives the same behaviour.  I
think older versions of RStudio would have run all three lines using
Run, but all the other methods have stopped at the stop() line.

Duncan Murdoch




	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Apr 12 14:16:17 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 12 Apr 2023 08:16:17 -0400
Subject: [R] aborting the execution of a script...
In-Reply-To: <PU4P216MB15680540C8F0AA922AA6E09EC89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15680A122BC54694F680420EC89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <19c10227-c64d-897d-e676-bdbb996727cc@gmail.com>
 <PU4P216MB15680540C8F0AA922AA6E09EC89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <8bdfb8a7-4ad4-7bd4-629c-a8c60ecf83fa@gmail.com>

This is what I get:

 > source("~/temp/test.R", echo = TRUE)

 > print(1)
[1] 1

 > stop("here")
Error in eval(ei, envir) : here

I get similar output in every variation I tried.  It never prints the 2.

On 12/04/2023 8:13 a.m., akshay kulkarni wrote:
> Dear Duncan,
>  ? ? ? ? ? ? ? ? ? ? ? ? ?What if I use source() with echo? I am using 
> that in RStudio.
> 
> THanking you,
> Yours sincerely
> AKSHAY M KULKARNI
> ------------------------------------------------------------------------
> *From:* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Sent:* Wednesday, April 12, 2023 5:35 PM
> *To:* akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list 
> <r-help at r-project.org>
> *Subject:* Re: [R] aborting the execution of a script...
> On 12/04/2023 7:03 a.m., akshay kulkarni wrote:
>> Dear members,
>>????????????????????????????? I have a script which I source it interactively. I have the following questions:
>> 
>> 
>>??? 1.? If there is an error in an expression, an error message is printed, but the execution continues till the end of the script. I am sourcing with echo. Is there any way to abort the execution when the first error occurs? This happens with R CMD BATCH.  If there is an error midway, an error message is printed in the output 
> file and the execution aborts. Is there a way to mimic this with source()?
>>??? 2.? I am trying to abort the execution with ESC key, but again the same thing happens: it aborts the current expression but continues on. How to abort an R script with source()? I am using RStudio in windows.
> 
> I don't see this behaviour.? If I put this in a script:
> 
>  ? print(1)
>  ? stop("here")
>  ? print(2)
> 
> then execution stops at the "stop" line if I use source(), or R CMD
> BATCH <file>, or in RStudio, Run or Source gives the same behaviour.? I
> think older versions of RStudio would have run all three lines using
> Run, but all the other methods have stopped at the stop() line.
> 
> Duncan Murdoch
> 
> 
>


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Apr 12 15:48:44 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 12 Apr 2023 13:48:44 +0000
Subject: [R] aborting the execution of a script...
In-Reply-To: <8bdfb8a7-4ad4-7bd4-629c-a8c60ecf83fa@gmail.com>
References: <PU4P216MB15680A122BC54694F680420EC89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <19c10227-c64d-897d-e676-bdbb996727cc@gmail.com>
 <PU4P216MB15680540C8F0AA922AA6E09EC89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <8bdfb8a7-4ad4-7bd4-629c-a8c60ecf83fa@gmail.com>
Message-ID: <PU4P216MB1568BC1399B950CA1EB2ADE0C89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Duncan,
                         But it is entirely different in my case...! As you said, the problem may be with my version of RStudio. The main point is that it doesn't pose any serious problems...

Thanks any way for your reply...

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Wednesday, April 12, 2023 5:46 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] aborting the execution of a script...

This is what I get:

 > source("~/temp/test.R", echo = TRUE)

 > print(1)
[1] 1

 > stop("here")
Error in eval(ei, envir) : here

I get similar output in every variation I tried.  It never prints the 2.

On 12/04/2023 8:13 a.m., akshay kulkarni wrote:
> Dear Duncan,
>                           What if I use source() with echo? I am using
> that in RStudio.
>
> THanking you,
> Yours sincerely
> AKSHAY M KULKARNI
> ------------------------------------------------------------------------
> *From:* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Sent:* Wednesday, April 12, 2023 5:35 PM
> *To:* akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list
> <r-help at r-project.org>
> *Subject:* Re: [R] aborting the execution of a script...
> On 12/04/2023 7:03 a.m., akshay kulkarni wrote:
>> Dear members,
>>                              I have a script which I source it interactively. I have the following questions:
>>
>>
>>    1.  If there is an error in an expression, an error message is printed, but the execution continues till the end of the script. I am sourcing with echo. Is there any way to abort the execution when the first error occurs? This happens with R CMD BATCH.  If there is an error midway, an error message is printed in the output
> file and the execution aborts. Is there a way to mimic this with source()?
>>    2.  I am trying to abort the execution with ESC key, but again the same thing happens: it aborts the current expression but continues on. How to abort an R script with source()? I am using RStudio in windows.
>
> I don't see this behaviour.  If I put this in a script:
>
>    print(1)
>    stop("here")
>    print(2)
>
> then execution stops at the "stop" line if I use source(), or R CMD
> BATCH <file>, or in RStudio, Run or Source gives the same behaviour.  I
> think older versions of RStudio would have run all three lines using
> Run, but all the other methods have stopped at the stop() line.
>
> Duncan Murdoch
>
>
>


	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Apr 12 16:34:26 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 12 Apr 2023 14:34:26 +0000
Subject: [R] converting to date object...
Message-ID: <PU4P216MB1568D10BC50C770D456412F6C89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

dear members,
                            I want to convert "12 APR 2023" into a Date object. I tried as_Date() from lubridate, but it is not working:

> as_date("12 APR 2023")
[1] NA
Warning message:
All formats failed to parse. No formats found.
> as_date("12-APR-2023")
[1] NA
Warning message:
All formats failed to parse. No formats found.

I am looking for a shorthand way of doing it. Of course, one can convert APR to 4 and get the job done, but I ma looking for a short and elegant code

please help...

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Wed Apr 12 16:50:53 2023
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 12 Apr 2023 17:50:53 +0300
Subject: [R] converting to date object...
In-Reply-To: <PU4P216MB1568D10BC50C770D456412F6C89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568D10BC50C770D456412F6C89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAGgJW74TgEDuFtqKSDGU0XyEO5jOQ0ErkMseT3wU_vZOrOwV4Q@mail.gmail.com>

lubridate::dmy("12 APR 2023")


On Wed, Apr 12, 2023 at 5:34?PM akshay kulkarni <akshay_e4 at hotmail.com>
wrote:

> dear members,
>                             I want to convert "12 APR 2023" into a Date
> object. I tried as_Date() from lubridate, but it is not working:
>
> > as_date("12 APR 2023")
> [1] NA
> Warning message:
> All formats failed to parse. No formats found.
> > as_date("12-APR-2023")
> [1] NA
> Warning message:
> All formats failed to parse. No formats found.
>
> I am looking for a shorthand way of doing it. Of course, one can convert
> APR to 4 and get the job done, but I ma looking for a short and elegant code
>
> please help...
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@rc_@chw@rtz @end|ng |rom me@com  Wed Apr 12 17:03:19 2023
From: m@rc_@chw@rtz @end|ng |rom me@com (Marc Schwartz)
Date: Wed, 12 Apr 2023 11:03:19 -0400
Subject: [R] converting to date object...
In-Reply-To: <PU4P216MB1568D10BC50C770D456412F6C89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568D10BC50C770D456412F6C89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <etPan.6436c837.6cb1a7f0.508@me.com>

Hi,

You do not need to use third party packages for date or date/time objects in R.

If you review ?as.Date, you will see that there are two default formats for Date objects that are specified in the 'tryFormats' argument:

??tryFormats = c("%Y-%m-%d", "%Y/%m/%d")

If your date character vector does not conform to either one, which it does not in this case, then you need to explicitly specify the input format, the details of which are specified in ?strptime.

Thus:

> as.Date("12 APR 2023", format = "%d %b %Y")
[1] "2023-04-12"

> str(as.Date("12 APR 2023", format = "%d %b %Y"))
?Date[1:1], format: "2023-04-12"

> class(as.Date("12 APR 2023", format = "%d %b %Y"))
[1] "Date"

where the %d defines the day of the month number, %b defines the abbreviated month and %Y defines the four digit year. The spaces in between each specifier in the format argument reflect that there are spaces in the source vector, as opposed to hyphens (e.g. 12-APR-2023) or slashes (e.g. 12/APR/2023).

Note that once your vector is a Date class object, you can then manipulate them as dates and perform various operations on them. You can then use format() to alter the output format as you may need for other purposes, in which case, the formatted output is coerced back to a character vector, even though the internal storage is still a Date class object.

Regards,

Marc Schwartz



On April 12, 2023 at 10:34:26 AM, akshay kulkarni (akshay_e4 at hotmail.com (mailto:akshay_e4 at hotmail.com)) wrote:

> dear members,
> I want to convert "12 APR 2023" into a Date object. I tried as_Date() from lubridate, but it is not working:
>
> > as_date("12 APR 2023")
> [1] NA
> Warning message:
> All formats failed to parse. No formats found.
> > as_date("12-APR-2023")
> [1] NA
> Warning message:
> All formats failed to parse. No formats found.
>
> I am looking for a shorthand way of doing it. Of course, one can convert APR to 4 and get the job done, but I ma looking for a short and elegant code
>
> please help...
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From edd @end|ng |rom deb|@n@org  Wed Apr 12 17:08:09 2023
From: edd @end|ng |rom deb|@n@org (Dirk Eddelbuettel)
Date: Wed, 12 Apr 2023 10:08:09 -0500
Subject: [R] converting to date object...
In-Reply-To: <PU4P216MB1568D10BC50C770D456412F6C89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568D10BC50C770D456412F6C89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <25654.51545.755495.929646@rob.eddelbuettel.com>


That is what I wrote the anytime package for: effortless automatic
parsing.  Also works for dates:

   > library(anytime)
   > anydate("12 APR 2023")
   [1] "2023-04-12"
   > 

Dirk

-- 
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org


From w@ngdezh|@tudy @end|ng |rom 163@com  Wed Apr 12 10:04:55 2023
From: w@ngdezh|@tudy @end|ng |rom 163@com (Dezhi Wang)
Date: Wed, 12 Apr 2023 16:04:55 +0800 (GMT+08:00)
Subject: [R] R-error
Message-ID: <53f79172.f98b.187747f08bf.Coremail.wangdezhistudy@163.com>

Hello,
I run R 4.2.2 on CentOS-7.6. I install  package through install.packages("sf").It threw the above error:


> install.packages('sf')
--- Please select a CRAN mirror for use in this session ---
 *** caught segfault ***
address 0x60, cause 'memory not mapped'
Traceback:
 1: download.file(url, destfile = f, quiet = TRUE)
 2: doTryCatch(return(expr), name, parentenv, handler)
 3: tryCatchOne(expr, names, parentenv, handlers[[1L]])
 4: tryCatchList(expr, classes, parentenv, handlers)
 5: tryCatch({ m <- download.file(url, destfile = f, quiet = TRUE) if (m != 0L) stop(gettextf("'download.file()' error code '%d'", m)) read.csv(f, as.is = TRUE, encoding = "UTF-8")}, error = function(err) { warning(gettextf("failed to download mirrors file (%s); using local file '%s'", conditionMessage(err), local.file), call. = FALSE, immediate. = TRUE) NULL})
 6: .getMirrors("https://cran.r-project.org/CRAN_mirrors.csv", file.path(R.home("doc"), "CRAN_mirrors.csv"), all = all, local.only = local.only)
 7: getCRANmirrors(all = FALSE, local.only = local.only)
 8: chooseCRANmirror()
 9: contrib.url(repos, type)
10: startsWith(contriburl, "file:")
11: install.packages("sf")
Possible actions:
1: abort (with core dump, if enabled)
2: normal R exit
3: exit R without saving workspace
4: exit R saving workspace
Selection:




| |
Dezhi Wang
|
|
wangdezhistudy at 163.com
|
-------------- next part --------------
A non-text attachment was scrubbed...
Name: R-error.png
Type: image/png
Size: 73929 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20230412/7df82b04/attachment.png>

From em||yb@kker @end|ng |rom out|ook@com  Wed Apr 12 10:29:50 2023
From: em||yb@kker @end|ng |rom out|ook@com (Emily Bakker)
Date: Wed, 12 Apr 2023 08:29:50 +0000
Subject: [R] Split String in regex while Keeping Delimiter
Message-ID: <AM9P195MB096556D9607BF3E2A42B2E68BC969@AM9P195MB0965.EURP195.PROD.OUTLOOK.COM>

Hello List,
?
I have a dataset consisting of strings that I want to split while saving the delimiter.
?
Some example data:
?leucocyten + gramnegatieve staven +++ grampositieve staven ++?
?leucocyten ? grampositieve coccen +?
?
I want to split the strings such that I get the following result:
c(?leucocyten +?, ??gramnegatieve staven +++?, ??grampositieve staven ++?)
c(?leucocyten ??, ?grampositieve coccen +?)
?
I have tried strsplit with a regular expression with a positive lookahead, but I am not able to achieve the results that I want.
?
I have tried:
as.list(strsplit(x, split = ?(?=[\\+-]{1,3}\\s)+, perl=TRUE)
?
Which results in:
c(?leucocyten ?, ?+?, ??gramnegatieve staven ?, ?+?, ?+?, ?+?, ??grampositieve staven ++?)
c(?leucocyten ?, ???, ?grampositieve coccen +?)
?
?
Is there a function or regular expression that will make this possible?
?
Kind regards,
Emily 
?

From er|cjberger @end|ng |rom gm@||@com  Wed Apr 12 19:32:53 2023
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 12 Apr 2023 20:32:53 +0300
Subject: [R] Split String in regex while Keeping Delimiter
In-Reply-To: <AM9P195MB096556D9607BF3E2A42B2E68BC969@AM9P195MB0965.EURP195.PROD.OUTLOOK.COM>
References: <AM9P195MB096556D9607BF3E2A42B2E68BC969@AM9P195MB0965.EURP195.PROD.OUTLOOK.COM>
Message-ID: <CAGgJW77CaMFrpYPgf-UGcRRQRpRsF9cr571UrXJkG22Sx+3cxw@mail.gmail.com>

This seems to do the job but there are probably more elegant solutions:

f <- function(s) { sub("^ ","",unlist(strsplit(gsub("\\+ ","+@ ",s),"@"))) }
g <- function(s) { sub("^ ","",unlist(strsplit(gsub("- ","-@ ",s),"@"))) }
h <- function(s) { g(f(s)) }

To try it out:
s <- ?leucocyten + gramnegatieve staven +++ grampositieve staven ++?
t <- ?leucocyten ? grampositieve coccen +?

h(s)
h(t)

HTH,
Eric


On Wed, Apr 12, 2023 at 7:56?PM Emily Bakker <emilybakker at outlook.com>
wrote:

> Hello List,
>
> I have a dataset consisting of strings that I want to split while saving
> the delimiter.
>
> Some example data:
> ?leucocyten + gramnegatieve staven +++ grampositieve staven ++?
> ?leucocyten ? grampositieve coccen +?
>
> I want to split the strings such that I get the following result:
> c(?leucocyten +?,  ?gramnegatieve staven +++?,  ?grampositieve staven ++?)
> c(?leucocyten ??, ?grampositieve coccen +?)
>
> I have tried strsplit with a regular expression with a positive lookahead,
> but I am not able to achieve the results that I want.
>
> I have tried:
> as.list(strsplit(x, split = ?(?=[\\+-]{1,3}\\s)+, perl=TRUE)
>
> Which results in:
> c(?leucocyten ?, ?+?,  ?gramnegatieve staven ?, ?+?, ?+?, ?+?,
>  ?grampositieve staven ++?)
> c(?leucocyten ?, ???, ?grampositieve coccen +?)
>
>
> Is there a function or regular expression that will make this possible?
>
> Kind regards,
> Emily
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Apr 12 19:42:25 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 12 Apr 2023 17:42:25 +0000
Subject: [R] converting to date object...
In-Reply-To: <25654.51545.755495.929646@rob.eddelbuettel.com>
References: <PU4P216MB1568D10BC50C770D456412F6C89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <25654.51545.755495.929646@rob.eddelbuettel.com>
Message-ID: <PU4P216MB1568000A948D91464E751521C89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Dirk,
                   Thaks a lot...

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Dirk Eddelbuettel <edd at debian.org>
Sent: Wednesday, April 12, 2023 8:38 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] converting to date object...


That is what I wrote the anytime package for: effortless automatic
parsing.  Also works for dates:

   > library(anytime)
   > anydate("12 APR 2023")
   [1] "2023-04-12"
   >

Dirk

--
dirk.eddelbuettel.com | @eddelbuettel | edd at debian.org

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Apr 12 19:44:08 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 12 Apr 2023 17:44:08 +0000
Subject: [R] converting to date object...
In-Reply-To: <etPan.6436c837.6cb1a7f0.508@me.com>
References: <PU4P216MB1568D10BC50C770D456412F6C89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <etPan.6436c837.6cb1a7f0.508@me.com>
Message-ID: <PU4P216MB1568BF493639B75E6CFDD286C89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Hi Mark,
                 Thanks a lot...

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Marc Schwartz <marc_schwartz at me.com>
Sent: Wednesday, April 12, 2023 8:33 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] converting to date object...

Hi,

You do not need to use third party packages for date or date/time objects in R.

If you review ?as.Date, you will see that there are two default formats for Date objects that are specified in the 'tryFormats' argument:

  tryFormats = c("%Y-%m-%d", "%Y/%m/%d")

If your date character vector does not conform to either one, which it does not in this case, then you need to explicitly specify the input format, the details of which are specified in ?strptime.

Thus:

> as.Date("12 APR 2023", format = "%d %b %Y")
[1] "2023-04-12"

> str(as.Date("12 APR 2023", format = "%d %b %Y"))
 Date[1:1], format: "2023-04-12"

> class(as.Date("12 APR 2023", format = "%d %b %Y"))
[1] "Date"

where the %d defines the day of the month number, %b defines the abbreviated month and %Y defines the four digit year. The spaces in between each specifier in the format argument reflect that there are spaces in the source vector, as opposed to hyphens (e.g. 12-APR-2023) or slashes (e.g. 12/APR/2023).

Note that once your vector is a Date class object, you can then manipulate them as dates and perform various operations on them. You can then use format() to alter the output format as you may need for other purposes, in which case, the formatted output is coerced back to a character vector, even though the internal storage is still a Date class object.

Regards,

Marc Schwartz



On April 12, 2023 at 10:34:26 AM, akshay kulkarni (akshay_e4 at hotmail.com (mailto:akshay_e4 at hotmail.com)) wrote:

> dear members,
> I want to convert "12 APR 2023" into a Date object. I tried as_Date() from lubridate, but it is not working:
>
> > as_date("12 APR 2023")
> [1] NA
> Warning message:
> All formats failed to parse. No formats found.
> > as_date("12-APR-2023")
> [1] NA
> Warning message:
> All formats failed to parse. No formats found.
>
> I am looking for a shorthand way of doing it. Of course, one can convert APR to 4 and get the job done, but I ma looking for a short and elegant code
>
> please help...
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
> [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Apr 12 19:45:12 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 12 Apr 2023 17:45:12 +0000
Subject: [R] converting to date object...
In-Reply-To: <CAGgJW74TgEDuFtqKSDGU0XyEO5jOQ0ErkMseT3wU_vZOrOwV4Q@mail.gmail.com>
References: <PU4P216MB1568D10BC50C770D456412F6C89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGgJW74TgEDuFtqKSDGU0XyEO5jOQ0ErkMseT3wU_vZOrOwV4Q@mail.gmail.com>
Message-ID: <PU4P216MB15685792DD619444B5F6254BC89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Hi Eric,
              THanks a lot..

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Eric Berger <ericjberger at gmail.com>
Sent: Wednesday, April 12, 2023 8:20 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] converting to date object...

lubridate::dmy("12 APR 2023")


On Wed, Apr 12, 2023 at 5:34?PM akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
dear members,
                            I want to convert "12 APR 2023" into a Date object. I tried as_Date() from lubridate, but it is not working:

> as_date("12 APR 2023")
[1] NA
Warning message:
All formats failed to parse. No formats found.
> as_date("12-APR-2023")
[1] NA
Warning message:
All formats failed to parse. No formats found.

I am looking for a shorthand way of doing it. Of course, one can convert APR to 4 and get the job done, but I ma looking for a short and elegant code

please help...

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Apr 12 19:47:58 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 12 Apr 2023 20:47:58 +0300
Subject: [R] Split String in regex while Keeping Delimiter
In-Reply-To: <AM9P195MB096556D9607BF3E2A42B2E68BC969@AM9P195MB0965.EURP195.PROD.OUTLOOK.COM>
References: <AM9P195MB096556D9607BF3E2A42B2E68BC969@AM9P195MB0965.EURP195.PROD.OUTLOOK.COM>
Message-ID: <20230412204758.71af832c@Tarkus>

On Wed, 12 Apr 2023 08:29:50 +0000
Emily Bakker <emilybakker at outlook.com> wrote:

> Some example data:
> ?leucocyten + gramnegatieve staven +++ grampositieve staven ++?
> ?leucocyten ? grampositieve coccen +?
> ?
> I want to split the strings such that I get the following result:
> c(?leucocyten +?, ??gramnegatieve staven +++?,
> ??grampositieve staven ++?)
> c(?leucocyten ??, ?grampositieve coccen +?)
> ?
> I have tried strsplit with a regular expression with a positive
> lookahead, but I am not able to achieve the results that I want.

It sounds like you need positive look-behind, not look-ahead: split on
spaces only if they _follow_ one to three of '+' or '-'. Unfortunately,
repetition quantifiers like {n,m} or + are not directly supported in
look-behind expressions (nor in Perl itself). As a special case, you
can use \K, where anything to the left of \K is a zero-width positive
match:

x <- c(
 'leucocyten + gramnegatieve staven +++ grampositieve staven ++',
 'leucocyten - grampositieve coccen +'
)
strsplit(x, '[+-]{1,3}+\\K ', perl = TRUE)
# [[1]]
# [1] "leucocyten +"             "gramnegatieve staven +++"
#     "grampositieve staven ++" 
# 
# [[2]]
# [1] "leucocyten -"           "grampositieve coccen +"

-- 
Best regards,
Ivan

P.S. It looks like your e-mail client has transformed every quote
character into typographically-correct Unicode quotes ?? and every
minus into an en dash, which makes it slightly harder to work with your
code, since typographically correct Unicode quotes are not R string
delimiters. Is it really ? that you'd like to split upon, or is it -?


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Apr 12 20:04:55 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 12 Apr 2023 21:04:55 +0300
Subject: [R] R-error
In-Reply-To: <53f79172.f98b.187747f08bf.Coremail.wangdezhistudy@163.com>
References: <53f79172.f98b.187747f08bf.Coremail.wangdezhistudy@163.com>
Message-ID: <20230412210455.5812baea@Tarkus>

On Wed, 12 Apr 2023 16:04:55 +0800 (GMT+08:00)
"Dezhi Wang" <wangdezhistudy at 163.com> wrote:

> I run R 4.2.2 on CentOS-7.6.

Thank you for this useful information. Could you tell us how this build
of R was installed on this machine?

> > install.packages('sf')  
> --- Please select a CRAN mirror for use in this session ---
>  *** caught segfault ***
> address 0x60, cause 'memory not mapped'
> Traceback:
>  1: download.file(url, destfile = f, quiet = TRUE)

The text error is fine, there's no need for an additional screenshot.

Can you install the R development files (in particular, I'm interested
in the debugging symbols, which must live in the R-debuginfo package,
assuming you have installed R from a package) and the GNU debugger (gdb)
on this machine? Once you have done that, run R using the command 
R -d gdb, start R using the "r" command, reproduce the crash and then
post the backtrace that results from the "bt" command.

-- 
Best regards,
Ivan


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Apr 12 20:57:48 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 12 Apr 2023 18:57:48 +0000
Subject: [R] converting a character matrix into numeric....
Message-ID: <PU4P216MB156855073CBA03421F338B06C89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear members,
                            I have an xts object:

> head(INFYTX)
           INFY Historical Data INFY Historical Data.1 INFY Historical Data.2
2003-04-16 "47.26"              "44.28"                "47.56"
2003-04-17 "46.30"              "44.92"                "46.53"
2003-04-21 "45.82"              "47.27"                "47.50"
2003-04-22 "45.62"              "46.06"                "46.16"
2003-04-23 "45.05"              "46.28"                "46.50"
2003-04-24 "45.28"              "44.80"                "46.84"
           INFY Historical Data.3 INFY Historical Data.4
2003-04-16 "44.28"                "1805267"              "5.77%"
2003-04-17 "44.06"                "1536300"              "-2.03%"
2003-04-21 "45.63"                "887774"               "-1.04%"
2003-04-22 "44.73"                "944036"               "-0.44%"
2003-04-23 "44.77"                "759898"               "-1.25%"
2003-04-24 "44.53"                "1185402"              "0.51%"

But it is populated with character values and I want to convert them to numeric. THe following code doesn't work:

> head(coredata(INFYTX))
     INFY Historical Data INFY Historical Data.1 INFY Historical Data.2 INFY Historical Data.3
[1,] "47.26"              "44.28"                "47.56"                "44.28"
[2,] "46.30"              "44.92"                "46.53"                "44.06"
[3,] "45.82"              "47.27"                "47.50"                "45.63"
[4,] "45.62"              "46.06"                "46.16"                "44.73"
[5,] "45.05"              "46.28"                "46.50"                "44.77"
[6,] "45.28"              "44.80"                "46.84"                "44.53"
     INFY Historical Data.4
[1,] "1805267"              "5.77%"
[2,] "1536300"              "-2.03%"
[3,] "887774"               "-1.04%"
[4,] "944036"               "-0.44%"
[5,] "759898"               "-1.25%"
[6,] "1185402"              "0.51%"

> class(coredata(INFYTX))
[1] "matrix" "array"
> class(coredata(INFYTX)) <- "numeric"
Warning message:
In class(coredata(INFYTX)) <- "numeric" : NAs introduced by coercion
> class(coredata(INFYTX))
[1] "matrix" "array"
> head(coredata(INFYTX))
     INFY Historical Data INFY Historical Data.1 INFY Historical Data.2 INFY Historical Data.3
[1,] "47.26"              "44.28"                "47.56"                "44.28"
[2,] "46.3"               "44.92"                "46.53"                "44.06"
[3,] "45.82"              "47.27"                "47.5"                 "45.63"
[4,] "45.62"              "46.06"                "46.16"                "44.73"
[5,] "45.05"              "46.28"                "46.5"                 "44.77"
[6,] "45.28"              "44.8"                 "46.84"                "44.53"
     INFY Historical Data.4
[1,] "1805267"              NA
[2,] "1536300"              NA
[3,] "887774"               NA
[4,] "944036"               NA
[5,] "759898"               NA
[6,] "1185402"              NA

Why is the coredata matrix not changing to numeric when the class is changed to numeric? How else to convert coredata into numeric?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Apr 12 21:16:29 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 12 Apr 2023 20:16:29 +0100
Subject: [R] converting a character matrix into numeric....
In-Reply-To: <PU4P216MB156855073CBA03421F338B06C89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156855073CBA03421F338B06C89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <8f9ae35e-9351-d796-09e5-cd0aff10f37a@sapo.pt>

?s 19:57 de 12/04/2023, akshay kulkarni escreveu:
> Dear members,
>                              I have an xts object:
> 
>> head(INFYTX)
>             INFY Historical Data INFY Historical Data.1 INFY Historical Data.2
> 2003-04-16 "47.26"              "44.28"                "47.56"
> 2003-04-17 "46.30"              "44.92"                "46.53"
> 2003-04-21 "45.82"              "47.27"                "47.50"
> 2003-04-22 "45.62"              "46.06"                "46.16"
> 2003-04-23 "45.05"              "46.28"                "46.50"
> 2003-04-24 "45.28"              "44.80"                "46.84"
>             INFY Historical Data.3 INFY Historical Data.4
> 2003-04-16 "44.28"                "1805267"              "5.77%"
> 2003-04-17 "44.06"                "1536300"              "-2.03%"
> 2003-04-21 "45.63"                "887774"               "-1.04%"
> 2003-04-22 "44.73"                "944036"               "-0.44%"
> 2003-04-23 "44.77"                "759898"               "-1.25%"
> 2003-04-24 "44.53"                "1185402"              "0.51%"
> 
> But it is populated with character values and I want to convert them to numeric. THe following code doesn't work:
> 
>> head(coredata(INFYTX))
>       INFY Historical Data INFY Historical Data.1 INFY Historical Data.2 INFY Historical Data.3
> [1,] "47.26"              "44.28"                "47.56"                "44.28"
> [2,] "46.30"              "44.92"                "46.53"                "44.06"
> [3,] "45.82"              "47.27"                "47.50"                "45.63"
> [4,] "45.62"              "46.06"                "46.16"                "44.73"
> [5,] "45.05"              "46.28"                "46.50"                "44.77"
> [6,] "45.28"              "44.80"                "46.84"                "44.53"
>       INFY Historical Data.4
> [1,] "1805267"              "5.77%"
> [2,] "1536300"              "-2.03%"
> [3,] "887774"               "-1.04%"
> [4,] "944036"               "-0.44%"
> [5,] "759898"               "-1.25%"
> [6,] "1185402"              "0.51%"
> 
>> class(coredata(INFYTX))
> [1] "matrix" "array"
>> class(coredata(INFYTX)) <- "numeric"
> Warning message:
> In class(coredata(INFYTX)) <- "numeric" : NAs introduced by coercion
>> class(coredata(INFYTX))
> [1] "matrix" "array"
>> head(coredata(INFYTX))
>       INFY Historical Data INFY Historical Data.1 INFY Historical Data.2 INFY Historical Data.3
> [1,] "47.26"              "44.28"                "47.56"                "44.28"
> [2,] "46.3"               "44.92"                "46.53"                "44.06"
> [3,] "45.82"              "47.27"                "47.5"                 "45.63"
> [4,] "45.62"              "46.06"                "46.16"                "44.73"
> [5,] "45.05"              "46.28"                "46.5"                 "44.77"
> [6,] "45.28"              "44.8"                 "46.84"                "44.53"
>       INFY Historical Data.4
> [1,] "1805267"              NA
> [2,] "1536300"              NA
> [3,] "887774"               NA
> [4,] "944036"               NA
> [5,] "759898"               NA
> [6,] "1185402"              NA
> 
> Why is the coredata matrix not changing to numeric when the class is changed to numeric? How else to convert coredata into numeric?
> 
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Those NA come from trying to coerce character strings with "%" to numeric.

Try instead to first remove the unwanted characters.



mat <- matrix(c(0.1, 0.2, "5.77%", "-2.03%"), ncol = 2L)

mat[] <- apply(mat, 2, \(x) sub("%", "", x))
class(mat) <- "numeric"
mat
#>      [,1]  [,2]
#> [1,]  0.1  5.77
#> [2,]  0.2 -2.03


Hope this helps,

Rui Barradas


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Apr 12 21:29:49 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 12 Apr 2023 19:29:49 +0000
Subject: [R] converting a character matrix into numeric....
In-Reply-To: <8f9ae35e-9351-d796-09e5-cd0aff10f37a@sapo.pt>
References: <PU4P216MB156855073CBA03421F338B06C89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <8f9ae35e-9351-d796-09e5-cd0aff10f37a@sapo.pt>
Message-ID: <PU4P216MB156816EED7246F52DDBCBE4FC89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Rui,
                 Not working. I have entirely removed the column containing % but am still bootless:

> head(coredata(INFYTX))
     INFY Historical Data INFY Historical Data INFY Historical Data INFY Historical Data
[1,] "47.26"              "44.28"              "47.56"              "44.28"
[2,] "46.30"              "44.92"              "46.53"              "44.06"
[3,] "45.82"              "47.27"              "47.50"              "45.63"
[4,] "45.62"              "46.06"              "46.16"              "44.73"
[5,] "45.05"              "46.28"              "46.50"              "44.77"
[6,] "45.28"              "44.80"              "46.84"              "44.53"
     INFY Historical Data
[1,] "1805267"
[2,] "1536300"
[3,] "887774"
[4,] "944036"
[5,] "759898"
[6,] "1185402"
> class(coredata(INFYTX)) <- "numeric"
> head(coredata(INFYTX))
     INFY Historical Data INFY Historical Data INFY Historical Data INFY Historical Data
[1,] "47.26"              "44.28"              "47.56"              "44.28"
[2,] "46.3"               "44.92"              "46.53"              "44.06"
[3,] "45.82"              "47.27"              "47.5"               "45.63"
[4,] "45.62"              "46.06"              "46.16"              "44.73"
[5,] "45.05"              "46.28"              "46.5"               "44.77"
[6,] "45.28"              "44.8"               "46.84"              "44.53"
     INFY Historical Data
[1,] "1805267"
[2,] "1536300"
[3,] "887774"
[4,] "944036"
[5,] "759898"
[6,] "1185402"

THanking you,
Yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Rui Barradas <ruipbarradas at sapo.pt>
Sent: Thursday, April 13, 2023 12:46 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] converting a character matrix into numeric....

?s 19:57 de 12/04/2023, akshay kulkarni escreveu:
> Dear members,
>                              I have an xts object:
>
>> head(INFYTX)
>             INFY Historical Data INFY Historical Data.1 INFY Historical Data.2
> 2003-04-16 "47.26"              "44.28"                "47.56"
> 2003-04-17 "46.30"              "44.92"                "46.53"
> 2003-04-21 "45.82"              "47.27"                "47.50"
> 2003-04-22 "45.62"              "46.06"                "46.16"
> 2003-04-23 "45.05"              "46.28"                "46.50"
> 2003-04-24 "45.28"              "44.80"                "46.84"
>             INFY Historical Data.3 INFY Historical Data.4
> 2003-04-16 "44.28"                "1805267"              "5.77%"
> 2003-04-17 "44.06"                "1536300"              "-2.03%"
> 2003-04-21 "45.63"                "887774"               "-1.04%"
> 2003-04-22 "44.73"                "944036"               "-0.44%"
> 2003-04-23 "44.77"                "759898"               "-1.25%"
> 2003-04-24 "44.53"                "1185402"              "0.51%"
>
> But it is populated with character values and I want to convert them to numeric. THe following code doesn't work:
>
>> head(coredata(INFYTX))
>       INFY Historical Data INFY Historical Data.1 INFY Historical Data.2 INFY Historical Data.3
> [1,] "47.26"              "44.28"                "47.56"                "44.28"
> [2,] "46.30"              "44.92"                "46.53"                "44.06"
> [3,] "45.82"              "47.27"                "47.50"                "45.63"
> [4,] "45.62"              "46.06"                "46.16"                "44.73"
> [5,] "45.05"              "46.28"                "46.50"                "44.77"
> [6,] "45.28"              "44.80"                "46.84"                "44.53"
>       INFY Historical Data.4
> [1,] "1805267"              "5.77%"
> [2,] "1536300"              "-2.03%"
> [3,] "887774"               "-1.04%"
> [4,] "944036"               "-0.44%"
> [5,] "759898"               "-1.25%"
> [6,] "1185402"              "0.51%"
>
>> class(coredata(INFYTX))
> [1] "matrix" "array"
>> class(coredata(INFYTX)) <- "numeric"
> Warning message:
> In class(coredata(INFYTX)) <- "numeric" : NAs introduced by coercion
>> class(coredata(INFYTX))
> [1] "matrix" "array"
>> head(coredata(INFYTX))
>       INFY Historical Data INFY Historical Data.1 INFY Historical Data.2 INFY Historical Data.3
> [1,] "47.26"              "44.28"                "47.56"                "44.28"
> [2,] "46.3"               "44.92"                "46.53"                "44.06"
> [3,] "45.82"              "47.27"                "47.5"                 "45.63"
> [4,] "45.62"              "46.06"                "46.16"                "44.73"
> [5,] "45.05"              "46.28"                "46.5"                 "44.77"
> [6,] "45.28"              "44.8"                 "46.84"                "44.53"
>       INFY Historical Data.4
> [1,] "1805267"              NA
> [2,] "1536300"              NA
> [3,] "887774"               NA
> [4,] "944036"               NA
> [5,] "759898"               NA
> [6,] "1185402"              NA
>
> Why is the coredata matrix not changing to numeric when the class is changed to numeric? How else to convert coredata into numeric?
>
> THanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Those NA come from trying to coerce character strings with "%" to numeric.

Try instead to first remove the unwanted characters.



mat <- matrix(c(0.1, 0.2, "5.77%", "-2.03%"), ncol = 2L)

mat[] <- apply(mat, 2, \(x) sub("%", "", x))
class(mat) <- "numeric"
mat
#>      [,1]  [,2]
#> [1,]  0.1  5.77
#> [2,]  0.2 -2.03


Hope this helps,

Rui Barradas


	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Apr 12 21:38:41 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 12 Apr 2023 12:38:41 -0700
Subject: [R] converting a character matrix into numeric....
In-Reply-To: <PU4P216MB156816EED7246F52DDBCBE4FC89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156855073CBA03421F338B06C89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <8f9ae35e-9351-d796-09e5-cd0aff10f37a@sapo.pt>
 <PU4P216MB156816EED7246F52DDBCBE4FC89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CBC09008-18DF-454F-8DC5-25EDBEF63F38@dcn.davis.ca.us>

Isn't this like trying to tie up the horse after it has left the barn? Why not figure all this out _before_ converting to xts?

On April 12, 2023 12:29:49 PM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>Dear Rui,
>                 Not working. I have entirely removed the column containing % but am still bootless:
>
>> head(coredata(INFYTX))
>     INFY Historical Data INFY Historical Data INFY Historical Data INFY Historical Data
>[1,] "47.26"              "44.28"              "47.56"              "44.28"
>[2,] "46.30"              "44.92"              "46.53"              "44.06"
>[3,] "45.82"              "47.27"              "47.50"              "45.63"
>[4,] "45.62"              "46.06"              "46.16"              "44.73"
>[5,] "45.05"              "46.28"              "46.50"              "44.77"
>[6,] "45.28"              "44.80"              "46.84"              "44.53"
>     INFY Historical Data
>[1,] "1805267"
>[2,] "1536300"
>[3,] "887774"
>[4,] "944036"
>[5,] "759898"
>[6,] "1185402"
>> class(coredata(INFYTX)) <- "numeric"
>> head(coredata(INFYTX))
>     INFY Historical Data INFY Historical Data INFY Historical Data INFY Historical Data
>[1,] "47.26"              "44.28"              "47.56"              "44.28"
>[2,] "46.3"               "44.92"              "46.53"              "44.06"
>[3,] "45.82"              "47.27"              "47.5"               "45.63"
>[4,] "45.62"              "46.06"              "46.16"              "44.73"
>[5,] "45.05"              "46.28"              "46.5"               "44.77"
>[6,] "45.28"              "44.8"               "46.84"              "44.53"
>     INFY Historical Data
>[1,] "1805267"
>[2,] "1536300"
>[3,] "887774"
>[4,] "944036"
>[5,] "759898"
>[6,] "1185402"
>
>THanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>
>________________________________
>From: Rui Barradas <ruipbarradas at sapo.pt>
>Sent: Thursday, April 13, 2023 12:46 AM
>To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
>Subject: Re: [R] converting a character matrix into numeric....
>
>?s 19:57 de 12/04/2023, akshay kulkarni escreveu:
>> Dear members,
>>                              I have an xts object:
>>
>>> head(INFYTX)
>>             INFY Historical Data INFY Historical Data.1 INFY Historical Data.2
>> 2003-04-16 "47.26"              "44.28"                "47.56"
>> 2003-04-17 "46.30"              "44.92"                "46.53"
>> 2003-04-21 "45.82"              "47.27"                "47.50"
>> 2003-04-22 "45.62"              "46.06"                "46.16"
>> 2003-04-23 "45.05"              "46.28"                "46.50"
>> 2003-04-24 "45.28"              "44.80"                "46.84"
>>             INFY Historical Data.3 INFY Historical Data.4
>> 2003-04-16 "44.28"                "1805267"              "5.77%"
>> 2003-04-17 "44.06"                "1536300"              "-2.03%"
>> 2003-04-21 "45.63"                "887774"               "-1.04%"
>> 2003-04-22 "44.73"                "944036"               "-0.44%"
>> 2003-04-23 "44.77"                "759898"               "-1.25%"
>> 2003-04-24 "44.53"                "1185402"              "0.51%"
>>
>> But it is populated with character values and I want to convert them to numeric. THe following code doesn't work:
>>
>>> head(coredata(INFYTX))
>>       INFY Historical Data INFY Historical Data.1 INFY Historical Data.2 INFY Historical Data.3
>> [1,] "47.26"              "44.28"                "47.56"                "44.28"
>> [2,] "46.30"              "44.92"                "46.53"                "44.06"
>> [3,] "45.82"              "47.27"                "47.50"                "45.63"
>> [4,] "45.62"              "46.06"                "46.16"                "44.73"
>> [5,] "45.05"              "46.28"                "46.50"                "44.77"
>> [6,] "45.28"              "44.80"                "46.84"                "44.53"
>>       INFY Historical Data.4
>> [1,] "1805267"              "5.77%"
>> [2,] "1536300"              "-2.03%"
>> [3,] "887774"               "-1.04%"
>> [4,] "944036"               "-0.44%"
>> [5,] "759898"               "-1.25%"
>> [6,] "1185402"              "0.51%"
>>
>>> class(coredata(INFYTX))
>> [1] "matrix" "array"
>>> class(coredata(INFYTX)) <- "numeric"
>> Warning message:
>> In class(coredata(INFYTX)) <- "numeric" : NAs introduced by coercion
>>> class(coredata(INFYTX))
>> [1] "matrix" "array"
>>> head(coredata(INFYTX))
>>       INFY Historical Data INFY Historical Data.1 INFY Historical Data.2 INFY Historical Data.3
>> [1,] "47.26"              "44.28"                "47.56"                "44.28"
>> [2,] "46.3"               "44.92"                "46.53"                "44.06"
>> [3,] "45.82"              "47.27"                "47.5"                 "45.63"
>> [4,] "45.62"              "46.06"                "46.16"                "44.73"
>> [5,] "45.05"              "46.28"                "46.5"                 "44.77"
>> [6,] "45.28"              "44.8"                 "46.84"                "44.53"
>>       INFY Historical Data.4
>> [1,] "1805267"              NA
>> [2,] "1536300"              NA
>> [3,] "887774"               NA
>> [4,] "944036"               NA
>> [5,] "759898"               NA
>> [6,] "1185402"              NA
>>
>> Why is the coredata matrix not changing to numeric when the class is changed to numeric? How else to convert coredata into numeric?
>>
>> THanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>>
>>        [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>Hello,
>
>Those NA come from trying to coerce character strings with "%" to numeric.
>
>Try instead to first remove the unwanted characters.
>
>
>
>mat <- matrix(c(0.1, 0.2, "5.77%", "-2.03%"), ncol = 2L)
>
>mat[] <- apply(mat, 2, \(x) sub("%", "", x))
>class(mat) <- "numeric"
>mat
>#>      [,1]  [,2]
>#> [1,]  0.1  5.77
>#> [2,]  0.2 -2.03
>
>
>Hope this helps,
>
>Rui Barradas
>
>
>	[[alternative HTML version deleted]]
>

-- 
Sent from my phone. Please excuse my brevity.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Apr 12 21:44:35 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 12 Apr 2023 19:44:35 +0000
Subject: [R] converting a character matrix into numeric....
In-Reply-To: <CBC09008-18DF-454F-8DC5-25EDBEF63F38@dcn.davis.ca.us>
References: <PU4P216MB156855073CBA03421F338B06C89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <8f9ae35e-9351-d796-09e5-cd0aff10f37a@sapo.pt>
 <PU4P216MB156816EED7246F52DDBCBE4FC89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CBC09008-18DF-454F-8DC5-25EDBEF63F38@dcn.davis.ca.us>
Message-ID: <PU4P216MB1568D87243763774AD76CE67C89B9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Jeff,
                 Regrets for not trying that before...never knew that % was the culprit...!

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Sent: Thursday, April 13, 2023 1:08 AM
To: r-help at r-project.org <r-help at r-project.org>; akshay kulkarni <akshay_e4 at hotmail.com>; Rui Barradas <ruipbarradas at sapo.pt>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] converting a character matrix into numeric....

Isn't this like trying to tie up the horse after it has left the barn? Why not figure all this out _before_ converting to xts?

On April 12, 2023 12:29:49 PM PDT, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>Dear Rui,
>                 Not working. I have entirely removed the column containing % but am still bootless:
>
>> head(coredata(INFYTX))
>     INFY Historical Data INFY Historical Data INFY Historical Data INFY Historical Data
>[1,] "47.26"              "44.28"              "47.56"              "44.28"
>[2,] "46.30"              "44.92"              "46.53"              "44.06"
>[3,] "45.82"              "47.27"              "47.50"              "45.63"
>[4,] "45.62"              "46.06"              "46.16"              "44.73"
>[5,] "45.05"              "46.28"              "46.50"              "44.77"
>[6,] "45.28"              "44.80"              "46.84"              "44.53"
>     INFY Historical Data
>[1,] "1805267"
>[2,] "1536300"
>[3,] "887774"
>[4,] "944036"
>[5,] "759898"
>[6,] "1185402"
>> class(coredata(INFYTX)) <- "numeric"
>> head(coredata(INFYTX))
>     INFY Historical Data INFY Historical Data INFY Historical Data INFY Historical Data
>[1,] "47.26"              "44.28"              "47.56"              "44.28"
>[2,] "46.3"               "44.92"              "46.53"              "44.06"
>[3,] "45.82"              "47.27"              "47.5"               "45.63"
>[4,] "45.62"              "46.06"              "46.16"              "44.73"
>[5,] "45.05"              "46.28"              "46.5"               "44.77"
>[6,] "45.28"              "44.8"               "46.84"              "44.53"
>     INFY Historical Data
>[1,] "1805267"
>[2,] "1536300"
>[3,] "887774"
>[4,] "944036"
>[5,] "759898"
>[6,] "1185402"
>
>THanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>
>________________________________
>From: Rui Barradas <ruipbarradas at sapo.pt>
>Sent: Thursday, April 13, 2023 12:46 AM
>To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
>Subject: Re: [R] converting a character matrix into numeric....
>
>?s 19:57 de 12/04/2023, akshay kulkarni escreveu:
>> Dear members,
>>                              I have an xts object:
>>
>>> head(INFYTX)
>>             INFY Historical Data INFY Historical Data.1 INFY Historical Data.2
>> 2003-04-16 "47.26"              "44.28"                "47.56"
>> 2003-04-17 "46.30"              "44.92"                "46.53"
>> 2003-04-21 "45.82"              "47.27"                "47.50"
>> 2003-04-22 "45.62"              "46.06"                "46.16"
>> 2003-04-23 "45.05"              "46.28"                "46.50"
>> 2003-04-24 "45.28"              "44.80"                "46.84"
>>             INFY Historical Data.3 INFY Historical Data.4
>> 2003-04-16 "44.28"                "1805267"              "5.77%"
>> 2003-04-17 "44.06"                "1536300"              "-2.03%"
>> 2003-04-21 "45.63"                "887774"               "-1.04%"
>> 2003-04-22 "44.73"                "944036"               "-0.44%"
>> 2003-04-23 "44.77"                "759898"               "-1.25%"
>> 2003-04-24 "44.53"                "1185402"              "0.51%"
>>
>> But it is populated with character values and I want to convert them to numeric. THe following code doesn't work:
>>
>>> head(coredata(INFYTX))
>>       INFY Historical Data INFY Historical Data.1 INFY Historical Data.2 INFY Historical Data.3
>> [1,] "47.26"              "44.28"                "47.56"                "44.28"
>> [2,] "46.30"              "44.92"                "46.53"                "44.06"
>> [3,] "45.82"              "47.27"                "47.50"                "45.63"
>> [4,] "45.62"              "46.06"                "46.16"                "44.73"
>> [5,] "45.05"              "46.28"                "46.50"                "44.77"
>> [6,] "45.28"              "44.80"                "46.84"                "44.53"
>>       INFY Historical Data.4
>> [1,] "1805267"              "5.77%"
>> [2,] "1536300"              "-2.03%"
>> [3,] "887774"               "-1.04%"
>> [4,] "944036"               "-0.44%"
>> [5,] "759898"               "-1.25%"
>> [6,] "1185402"              "0.51%"
>>
>>> class(coredata(INFYTX))
>> [1] "matrix" "array"
>>> class(coredata(INFYTX)) <- "numeric"
>> Warning message:
>> In class(coredata(INFYTX)) <- "numeric" : NAs introduced by coercion
>>> class(coredata(INFYTX))
>> [1] "matrix" "array"
>>> head(coredata(INFYTX))
>>       INFY Historical Data INFY Historical Data.1 INFY Historical Data.2 INFY Historical Data.3
>> [1,] "47.26"              "44.28"                "47.56"                "44.28"
>> [2,] "46.3"               "44.92"                "46.53"                "44.06"
>> [3,] "45.82"              "47.27"                "47.5"                 "45.63"
>> [4,] "45.62"              "46.06"                "46.16"                "44.73"
>> [5,] "45.05"              "46.28"                "46.5"                 "44.77"
>> [6,] "45.28"              "44.8"                 "46.84"                "44.53"
>>       INFY Historical Data.4
>> [1,] "1805267"              NA
>> [2,] "1536300"              NA
>> [3,] "887774"               NA
>> [4,] "944036"               NA
>> [5,] "759898"               NA
>> [6,] "1185402"              NA
>>
>> Why is the coredata matrix not changing to numeric when the class is changed to numeric? How else to convert coredata into numeric?
>>
>> THanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>>
>>        [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>Hello,
>
>Those NA come from trying to coerce character strings with "%" to numeric.
>
>Try instead to first remove the unwanted characters.
>
>
>
>mat <- matrix(c(0.1, 0.2, "5.77%", "-2.03%"), ncol = 2L)
>
>mat[] <- apply(mat, 2, \(x) sub("%", "", x))
>class(mat) <- "numeric"
>mat
>#>      [,1]  [,2]
>#> [1,]  0.1  5.77
>#> [2,]  0.2 -2.03
>
>
>Hope this helps,
>
>Rui Barradas
>
>
>       [[alternative HTML version deleted]]
>

--
Sent from my phone. Please excuse my brevity.

	[[alternative HTML version deleted]]


From dw|n@em|u@ @end|ng |rom comc@@t@net  Thu Apr 13 00:03:29 2023
From: dw|n@em|u@ @end|ng |rom comc@@t@net (David Winsemius)
Date: Wed, 12 Apr 2023 16:03:29 -0600
Subject: [R] Split String in regex while Keeping Delimiter
In-Reply-To: <AM9P195MB096556D9607BF3E2A42B2E68BC969@AM9P195MB0965.EURP195.PROD.OUTLOOK.COM>
References: <AM9P195MB096556D9607BF3E2A42B2E68BC969@AM9P195MB0965.EURP195.PROD.OUTLOOK.COM>
Message-ID: <B50FD948-EA7D-4C7D-A81C-146F057D6B72@comcast.net>

I thought replacing the spaces following instances of +++,++,+,- with "\n" and then reading with scan should succeed. Like Ivan Krylov I was fairly sure that you meant the minus sign to be "-" rather than "?", but perhaps your were using MS Word as an editor which is inconsistent with effective use of R. If so, learn to use a proper programming editor, and in any case learn to post to rhelp in plain text.

-- 
David

scan(text=gsub("([-+]){1}\\s", "\\1\n", dat), what="", sep="\n")



> On Apr 12, 2023, at 2:29 AM, Emily Bakker <emilybakker at outlook.com> wrote:
> 
> Hello List,
>  
> I have a dataset consisting of strings that I want to split while saving the delimiter.
>  
> Some example data:
> ?leucocyten + gramnegatieve staven +++ grampositieve staven ++?
> ?leucocyten ? grampositieve coccen +?
>  
> I want to split the strings such that I get the following result:
> c(?leucocyten +?,  ?gramnegatieve staven +++?,  ?grampositieve staven ++?)
> c(?leucocyten ??, ?grampositieve coccen +?)
>  
> I have tried strsplit with a regular expression with a positive lookahead, but I am not able to achieve the results that I want.
>  
> I have tried:
> as.list(strsplit(x, split = ?(?=[\\+-]{1,3}\\s)+, perl=TRUE)
>  
> Which results in:
> c(?leucocyten ?, ?+?,  ?gramnegatieve staven ?, ?+?, ?+?, ?+?,  ?grampositieve staven ++?)
> c(?leucocyten ?, ???, ?grampositieve coccen +?)
>  
>  
> Is there a function or regular expression that will make this possible?
>  
> Kind regards,
> Emily 
>  
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @vi@e@gross m@iii@g oii gm@ii@com  Thu Apr 13 01:12:28 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Wed, 12 Apr 2023 19:12:28 -0400
Subject: [R] Split String in regex while Keeping Delimiter
In-Reply-To: <B50FD948-EA7D-4C7D-A81C-146F057D6B72@comcast.net>
References: <AM9P195MB096556D9607BF3E2A42B2E68BC969@AM9P195MB0965.EURP195.PROD.OUTLOOK.COM>
 <B50FD948-EA7D-4C7D-A81C-146F057D6B72@comcast.net>
Message-ID: <005801d96d94$40d50530$c27f0f90$@gmail.com>

Sometimes you need to NOT use a regular expression and do things simpler. You have a fairly simple example that not only does not need great power but may be a pain to do using a very powerful technique, especially if you want to play with look-ahead and look behind.

Assuming you have a line with repeated runs on non-plussed text followed by one to three contiguous runs of a plus sign, can you write a short function that scans along till it finds a plus sign, then looks ahead till it sees a space or the end of the line. It then wraps up all the text till the last plus and adds a copy to a growing list or other structure. It then continues from the space(s) it ignores and repeats.

When done, you have what you want in the format you want.

A variant on this is to start from the end and scan backwards and stop at any plus sign. Keep what follows but strip any whitespace to the left of it. The result is the list in backwards order unless you used a stack to hold it.

There are quite a few variants that might apply and perhaps use of functions in modules. A dumb example might be to preprocess the string and replace all instances of 1 to 3 plus signs and an optional space  with itself and an added letter like a ":" and then a second pass using a regular expression becomes trivial as the colons disappear.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of David Winsemius
Sent: Wednesday, April 12, 2023 6:03 PM
To: Emily Bakker <emilybakker at outlook.com>
Cc: r-help at r-project.org
Subject: Re: [R] Split String in regex while Keeping Delimiter

I thought replacing the spaces following instances of +++,++,+,- with "\n" and then reading with scan should succeed. Like Ivan Krylov I was fairly sure that you meant the minus sign to be "-" rather than "?", but perhaps your were using MS Word as an editor which is inconsistent with effective use of R. If so, learn to use a proper programming editor, and in any case learn to post to rhelp in plain text.

-- 
David

scan(text=gsub("([-+]){1}\\s", "\\1\n", dat), what="", sep="\n")



> On Apr 12, 2023, at 2:29 AM, Emily Bakker <emilybakker at outlook.com> wrote:
> 
> Hello List,
>  
> I have a dataset consisting of strings that I want to split while saving the delimiter.
>  
> Some example data:
> ?leucocyten + gramnegatieve staven +++ grampositieve staven ++?
> ?leucocyten ? grampositieve coccen +?
>  
> I want to split the strings such that I get the following result:
> c(?leucocyten +?,  ?gramnegatieve staven +++?,  ?grampositieve staven ++?)
> c(?leucocyten ??, ?grampositieve coccen +?)
>  
> I have tried strsplit with a regular expression with a positive lookahead, but I am not able to achieve the results that I want.
>  
> I have tried:
> as.list(strsplit(x, split = ?(?=[\\+-]{1,3}\\s)+, perl=TRUE)
>  
> Which results in:
> c(?leucocyten ?, ?+?,  ?gramnegatieve staven ?, ?+?, ?+?, ?+?,  ?grampositieve staven ++?)
> c(?leucocyten ?, ???, ?grampositieve coccen +?)
>  
>  
> Is there a function or regular expression that will make this possible?
>  
> Kind regards,
> Emily 
>  
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Thu Apr 13 01:19:32 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 12 Apr 2023 16:19:32 -0700
Subject: [R] Split String in regex while Keeping Delimiter
In-Reply-To: <B50FD948-EA7D-4C7D-A81C-146F057D6B72@comcast.net>
References: <AM9P195MB096556D9607BF3E2A42B2E68BC969@AM9P195MB0965.EURP195.PROD.OUTLOOK.COM>
 <B50FD948-EA7D-4C7D-A81C-146F057D6B72@comcast.net>
Message-ID: <CAGxFJbTcFA2Vxgb-BBYqERJ02ouK4GRpCUgRe0Pa789X0JnQpw@mail.gmail.com>

I always find regex puzzles amusing, so after changing the unicode
typo quotes and dashes to ascii, the following simple prescription,
similar to those proffered by others, seems to produce what you
requested with your example:

x <- c("leucocyten + gramnegatieve staven +++ grampositieve staven ++",
 "leucocyten - grampositieve coccen +")

strsplit(gsub("([^[:alnum:]]) ","\\1>>",x),">>")

(You can use unlist on this if you wish).

My slight variant uses character classes and a backreference to
identify where you want to split. The substitute '>>' split expression
is purely arbitrary of course. Instead of [^[:alnum:]] you could
probably use [+-], but I only wished to assume some sort of
non-alphanumeric.

I mention in passing that the above also seemed to work when I kept
the en dash instead of a minus sign, but I make no claim for
superiority -- or even noninferiority --  to the solutions proposed by
others.

Cheers,
Bert


On Wed, Apr 12, 2023 at 2:52?PM David Winsemius <dwinsemius at comcast.net> wrote:
>
> I thought replacing the spaces following instances of +++,++,+,- with "\n" and then reading with scan should succeed. Like Ivan Krylov I was fairly sure that you meant the minus sign to be "-" rather than "?", but perhaps your were using MS Word as an editor which is inconsistent with effective use of R. If so, learn to use a proper programming editor, and in any case learn to post to rhelp in plain text.
>
> --
> David
>
> scan(text=gsub("([-+]){1}\\s", "\\1\n", dat), what="", sep="\n")
>
>
>
> > On Apr 12, 2023, at 2:29 AM, Emily Bakker <emilybakker at outlook.com> wrote:
> >
> > Hello List,
> >
> > I have a dataset consisting of strings that I want to split while saving the delimiter.
> >
> > Some example data:
> > ?leucocyten + gramnegatieve staven +++ grampositieve staven ++?
> > ?leucocyten ? grampositieve coccen +?
> >
> > I want to split the strings such that I get the following result:
> > c(?leucocyten +?,  ?gramnegatieve staven +++?,  ?grampositieve staven ++?)
> > c(?leucocyten ??, ?grampositieve coccen +?)
> >
> > I have tried strsplit with a regular expression with a positive lookahead, but I am not able to achieve the results that I want.
> >
> > I have tried:
> > as.list(strsplit(x, split = ?(?=[\\+-]{1,3}\\s)+, perl=TRUE)
> >
> > Which results in:
> > c(?leucocyten ?, ?+?,  ?gramnegatieve staven ?, ?+?, ?+?, ?+?,  ?grampositieve staven ++?)
> > c(?leucocyten ?, ???, ?grampositieve coccen +?)
> >
> >
> > Is there a function or regular expression that will make this possible?
> >
> > Kind regards,
> > Emily
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Apr 13 09:27:10 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 13 Apr 2023 10:27:10 +0300
Subject: [R] R-error
In-Reply-To: <110993f6.3006.1877963c748.Coremail.wangdezhistudy@163.com>
References: <53f79172.f98b.187747f08bf.Coremail.wangdezhistudy@163.com>
 <20230412210455.5812baea@Tarkus>
 <110993f6.3006.1877963c748.Coremail.wangdezhistudy@163.com>
Message-ID: <20230413102710.0f4f6f98@Tarkus>

On Thu, 13 Apr 2023 14:53:14 +0800 (GMT+08:00)
"Dezhi Wang" <wangdezhistudy at 163.com> wrote:

> [New Thread 0x7fffe660a700 (LWP 3791)]
> [Thread 0x7fffe660a700 (LWP 3791) exited]
> Program received signal SIGSEGV, Segmentation fault.
> 0x00007fffe50c0fe5 in intel_aes_gcmAAD () from
> /lib64/libfreeblpriv3.so

You didn't post the backtrace, so I don't have the full picture, but
the crash seems to be happening in your TLS implementation (NSS), most
likely because the AES GCM context pointer somehow turned out to be
NULL. Is there a way to install a libcurl build linked with a different
TLS back-end (e.g. OpenSSL)?

How exactly did you install R?

Please keep the Cc: r-help at R-project.org header in your e-mails (in
order to let others find their solutions through the publicly available
R-help archive).

Please post in plain text, not HTML:
https://www.r-project.org/mail.html#general-instructions

-- 
Best regards,
Ivan


From r@oknz @end|ng |rom gm@||@com  Thu Apr 13 13:57:04 2023
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Thu, 13 Apr 2023 23:57:04 +1200
Subject: [R] Matrix scalar operation that saves memory?
In-Reply-To: <ffb42d6c-b3b5-ac6d-f06e-1e6b0506cff1@ngs.gen-info.osaka-u.ac.jp>
References: <fc9ea9b9-f224-6de2-e184-dd9126c56f18@ngs.gen-info.osaka-u.ac.jp>
 <000401d96cf0$74cf6500$5e6e2f00$@gmail.com>
 <ffb42d6c-b3b5-ac6d-f06e-1e6b0506cff1@ngs.gen-info.osaka-u.ac.jp>
Message-ID: <CABcYAdK38AAKzBpD41Xci+9kyANBQMSeEG3U5MMSfW4Mqfqo0A@mail.gmail.com>

"wear your disc quite badly"?
If you can afford a computer with 512 GB of memory,
you can afford to pay $100 for a 2 TB external SSD,
use it as scratch space, and throw it away after a
month of use.  A hard drive is expected to last for
more than 40,000 hours of constant use.  Are you
sure that your own disc is so fragile?  Hard drives
are pretty cheap these days.  You could afford to
pay $50 for a 2 TB external hard drive, use it as
scratch space, and throw it away.

I've been around long enough to remember when the idea
of processing a 1000x1000 matrix in memory was greeted
with hysterical laughter and a recommendation to stop
smoking whatever I was smoking.   (But not old enough
to remember shuffling matrices around on tape.  Shudder.)

If you want to work on two 300GB matrices using a machine
with 512GB of RAM, you are going to be using a disc or
SSD, like it or not.  You can leave it up to the paging
subsystem of your OS, which will do its poor best, or you
can explicitly schedule reads and writes in your program,
and if you use asynchronous I/O it might overlap quite nicely.

Assuming for the sake of arithmetic that your matrix
elements are complex numbers represented as pairs of
double precision floats, that's 16 bytes per element,
or 300e9/16 = 1.975e10 elements = n^2 elements where n = 136,930.
Other than adding, subtracting, and multiplying by a scalar,
there's not much you can do with an nxn matrix that won't take
time proportional to n^3.

Is there any way you can divide the matrix into (possibly
overlapping) blocks and do the work on a cluster?  Or a
block at a time?


On Wed, 12 Apr 2023 at 15:54, Shunran Zhang <
szhang at ngs.gen-info.osaka-u.ac.jp> wrote:

> Thanks for the info.
>
> For the data type, my matrix as of now is indeed a matrix in a perfect
> square shape filled in a previous segment of code, but I believe I could
> extract one row/column at a time to do some processing. I can also
> change that previous part of code to change the data type of it to
> something else if that helps.
>
> Saving it to a file for manipulation and reading it back seems to be
> quite IO intensive - writing 600G of data and reading 300G back from a
> hard drive would make the code extremely heavy as well as wear my disk
> quite badly.
>
> For now I'll try the row-by-row method and hope it works...
>
> Sincerely,
> S. Zhang
>
>
> On 2023/04/12 12:39, avi.e.gross at gmail.com wrote:
> > The example given does not leave room for even a single copy of your
> matrix
> > so, yes, you need alternatives.
> >
> > Your example was fairly trivial as all you wanted to do is subtract each
> > value from 100 and replace it. Obviously something like squaring a matrix
> > has no trivial way to do without multiple copies out there that won't
> fit.
> >
> > One technique that might work is a nested loop that changes one cell of
> the
> > matrix at a time and in-place. A variant of this might be a singe loop
> that
> > changes a single row (or column) at a time and in place.
> >
> > Another odd concept is to save your matrix in a file with some format you
> > can read back in such as a line or row at a time, and then do the
> > subtraction from 100 and write it back to disk in another file. If you
> need
> > it again, I assume you can read it in but perhaps you should consider
> how to
> > increase some aspects of your "memory".
> >
> > Is your matrix a real matrix type or something like a list of lists or a
> > data.frame? You may do better with some data structures that are more
> > efficient than others.
> >
> > Some OS allow you to use virtual memory that is mapped in and out from
> the
> > disk that allows larger things to be done, albeit often much slower. I
> also
> > note that you can remove some things you are not using and hope garbage
> > collection happens soon enough.
> >
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Shunran Zhang
> > Sent: Tuesday, April 11, 2023 10:21 PM
> > To: r-help at r-project.org
> > Subject: [R] Matrix scalar operation that saves memory?
> >
> > Hi all,
> >
> > I am currently working with a quite large matrix that takes 300G of
> > memory. My computer only has 512G of memory. I would need to do a few
> > arithmetic on it with a scalar value. My current code looks like this:
> >
> > mat <- 100 - mat
> >
> > However such code quickly uses up all of the remaining memory and got
> > the R script killed by OOM killer.
> >
> > Are there any more memory-efficient way of doing such operation?
> >
> > Thanks,
> >
> > S. Zhang
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From 538280 @end|ng |rom gm@||@com  Thu Apr 13 18:09:03 2023
From: 538280 @end|ng |rom gm@||@com (Greg Snow)
Date: Thu, 13 Apr 2023 10:09:03 -0600
Subject: [R] Split String in regex while Keeping Delimiter
In-Reply-To: <20230412204758.71af832c@Tarkus>
References: <AM9P195MB096556D9607BF3E2A42B2E68BC969@AM9P195MB0965.EURP195.PROD.OUTLOOK.COM>
 <20230412204758.71af832c@Tarkus>
Message-ID: <CAFEqCdwdAGQp84ziid6SDZaXrvijh3rBG0aeay5iGLzqBgtrcQ@mail.gmail.com>

Since any space that follows 2 or 3 + signs (or - signs) also follows
a single + (or -), this can be done with positive look behind, which
may be a little simpler:

x <- c(
  'leucocyten + gramnegatieve staven +++ grampositieve staven ++',
  'leucocyten - grampositieve coccen +'
)
strsplit(x, "(?<=[+-])\\s+", perl=TRUE)

An alternative is to use the strapply function(s) in the gsubfn
package which focus on what you want to keep for each piece rather
than what to split on.

Here is an example that says to keep a sequence of characters that are
not + or -, followed by 1 to 3 + or - characters:

library(gsubfn)
strapplyc(x, "[^+-]+[+-]{1,3}")

This includes the spaces at the beginning of the return strings after
the first, a couple of options that drop these spaces as well are:

strapply(x, "([^+-]+[+-]{1,3}) *", backref = -1)
strapply(x, "[^ +-][^+-]+[+-]{1,3}")

On Wed, Apr 12, 2023 at 11:54?AM Ivan Krylov <krylov.r00t at gmail.com> wrote:
>
> On Wed, 12 Apr 2023 08:29:50 +0000
> Emily Bakker <emilybakker at outlook.com> wrote:
>
> > Some example data:
> > ?leucocyten + gramnegatieve staven +++ grampositieve staven ++?
> > ?leucocyten ? grampositieve coccen +?
> >
> > I want to split the strings such that I get the following result:
> > c(?leucocyten +?,  ?gramnegatieve staven +++?,
> >  ?grampositieve staven ++?)
> > c(?leucocyten ??, ?grampositieve coccen +?)
> >
> > I have tried strsplit with a regular expression with a positive
> > lookahead, but I am not able to achieve the results that I want.
>
> It sounds like you need positive look-behind, not look-ahead: split on
> spaces only if they _follow_ one to three of '+' or '-'. Unfortunately,
> repetition quantifiers like {n,m} or + are not directly supported in
> look-behind expressions (nor in Perl itself). As a special case, you
> can use \K, where anything to the left of \K is a zero-width positive
> match:
>
> x <- c(
>  'leucocyten + gramnegatieve staven +++ grampositieve staven ++',
>  'leucocyten - grampositieve coccen +'
> )
> strsplit(x, '[+-]{1,3}+\\K ', perl = TRUE)
> # [[1]]
> # [1] "leucocyten +"             "gramnegatieve staven +++"
> #     "grampositieve staven ++"
> #
> # [[2]]
> # [1] "leucocyten -"           "grampositieve coccen +"
>
> --
> Best regards,
> Ivan
>
> P.S. It looks like your e-mail client has transformed every quote
> character into typographically-correct Unicode quotes ?? and every
> minus into an en dash, which makes it slightly harder to work with your
> code, since typographically correct Unicode quotes are not R string
> delimiters. Is it really ? that you'd like to split upon, or is it -?
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From |eo@m@d@ @end|ng |rom @yon|c@eu  Thu Apr 13 20:40:24 2023
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leonard Mada)
Date: Thu, 13 Apr 2023 21:40:24 +0300
Subject: [R] Split String in regex while Keeping Delimiter
Message-ID: <40adca2d-6412-934f-9a47-977537641e93@syonic.eu>

Dear Emily,

Using a look-behind solves the split problem in this case. (Note: Using 
Regex is in most/many cases the simplest solution.)

str = c("leucocyten + gramnegatieve staven +++ grampositieve staven ++",
"leucocyten ? grampositieve coccen +")

tokens = strsplit(str, "(?<=[-+])\\s++", perl=TRUE)

PROBLEM
The current expression does NOT work for a different reason: the "-" is 
coded using a NON-ASCII character.

I have written a small utility function to approximately extract 
"non-standard" characters:
### Identify non-ASCII Characters
# beware: the filtering and the sorting may break the codes;
extract.nonLetters = function(x, rm.space = TRUE, sort=FALSE) {
 ?? ?code = as.numeric(unique(unlist(lapply(x, charToRaw))));
 ?? ?isLetter =
 ?? ???? (code >= 97 & code <= 122) |
 ?? ???? (code >= 65 & code <= 90);
 ?? ?code = code[ ! isLetter];
 ?? ?if(rm.space) {
 ?? ???? # removes only simple space!
 ?? ???? code = code[code != 32];
 ?? ?}
 ?? ?if(sort) code = sort(code);
 ?? ?return(code);
}
extract.nonLetters(str, sort = FALSE)
# 43 226 128 147

Note:
- the code for "+" is 43, and for simple "-" is 45: as.numeric 
(charToRaw("+-"));
- "226 128 147" codes something else, but it is not trivial to get the 
Unicode code Point;
https://www.utf8-chartable.de/unicode-utf8-table.pl?start=8192&number=128&utf8=dec

The following is a more comprehensive Regex expression, which accepts 
many variants of "-":
tokens = strsplit(str, "(?<=[-+\u2010-\u2014])\\s++", perl=TRUE)

Sincerely,

Leonard


From |eo@m@d@ @end|ng |rom @yon|c@eu  Thu Apr 13 21:15:32 2023
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leonard Mada)
Date: Thu, 13 Apr 2023 22:15:32 +0300
Subject: [R] Split String in regex while Keeping Delimiter
In-Reply-To: <40adca2d-6412-934f-9a47-977537641e93@syonic.eu>
References: <40adca2d-6412-934f-9a47-977537641e93@syonic.eu>
Message-ID: <e0d3a471-7c07-43ca-cfba-a4abcb065ad9@syonic.eu>

Dear Emily,

I have written a more robust version of the function:
extract.nonLetters = function(x, rm.space = TRUE, normalize=TRUE, 
sort=TRUE) {
 ?? ?if(normalize) str = stringi::stri_trans_nfc(str);
 ?? ?ch = strsplit(str, "", fixed = TRUE);
 ?? ?ch = unique(unlist(ch));
 ?? ?if(sort) ch = sort(ch);
 ?? ?pat = if(rm.space) "^[a-zA-Z ]" else "^[a-zA-Z]";
 ?? ?isLetter = grepl(pat, ch);
 ?? ?ch = ch[ ! isLetter];
 ?? ?return(stringi::stri_escape_unicode(ch));
}
extract.nonLetters(str)
# "\\u2013" "+"

This code ("\u2013") is included in the expanded Regex expression:
tokens = strsplit(str, "(?<=[-+\u2010-\u2014])\\s++", perl=TRUE)


Sincerely,

Leonard


On 4/13/2023 9:40 PM, Leonard Mada wrote:
> Dear Emily,
>
> Using a look-behind solves the split problem in this case. (Note: 
> Using Regex is in most/many cases the simplest solution.)
>
> str = c("leucocyten + gramnegatieve staven +++ grampositieve staven ++",
> "leucocyten ? grampositieve coccen +")
>
> tokens = strsplit(str, "(?<=[-+])\\s++", perl=TRUE)
>
> PROBLEM
> The current expression does NOT work for a different reason: the "-" 
> is coded using a NON-ASCII character.
>
> I have written a small utility function to approximately extract 
> "non-standard" characters:
> ### Identify non-ASCII Characters
> # beware: the filtering and the sorting may break the codes;
> extract.nonLetters = function(x, rm.space = TRUE, sort=FALSE) {
> ?? ?code = as.numeric(unique(unlist(lapply(x, charToRaw))));
> ?? ?isLetter =
> ?? ???? (code >= 97 & code <= 122) |
> ?? ???? (code >= 65 & code <= 90);
> ?? ?code = code[ ! isLetter];
> ?? ?if(rm.space) {
> ?? ???? # removes only simple space!
> ?? ???? code = code[code != 32];
> ?? ?}
> ?? ?if(sort) code = sort(code);
> ?? ?return(code);
> }
> extract.nonLetters(str, sort = FALSE)
> # 43 226 128 147
>
> Note:
> - the code for "+" is 43, and for simple "-" is 45: as.numeric 
> (charToRaw("+-"));
> - "226 128 147" codes something else, but it is not trivial to get the 
> Unicode code Point;
> https://www.utf8-chartable.de/unicode-utf8-table.pl?start=8192&number=128&utf8=dec 
>
>
> The following is a more comprehensive Regex expression, which accepts 
> many variants of "-":
> tokens = strsplit(str, "(?<=[-+\u2010-\u2014])\\s++", perl=TRUE)
>
> Sincerely,
>
> Leonard
>
>


From @erk@nd|ngec @end|ng |rom gm@||@com  Thu Apr 13 22:40:47 2023
From: @erk@nd|ngec @end|ng |rom gm@||@com (=?utf-8?B?U0VSS0FOIETEsE5HRcOH?=)
Date: Thu, 13 Apr 2023 23:40:47 +0300
Subject: [R] Dowland mistake
Message-ID: <52D3C9AC-B0BC-4BED-A699-A2A0CFB66DE2@gmail.com>

I am having difficulty downloading the R software program to my macbook(ventura) personal computer.
Looking at the information on your download page, I could not download the xquartz program separately.

Additional info=R studio program is now installed on my computer
Thank you - thank you.

