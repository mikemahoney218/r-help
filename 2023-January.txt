From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Jan  1 12:16:19 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 1 Jan 2023 11:16:19 +0000
Subject: [R] CRAN Packages By Date
In-Reply-To: <CAGQHekw0dJ3EBdvwmNVAGMHzdX4i7YsX_CtNNsHL7+A_yHQnLw@mail.gmail.com>
References: <CAGQHekw0dJ3EBdvwmNVAGMHzdX4i7YsX_CtNNsHL7+A_yHQnLw@mail.gmail.com>
Message-ID: <7084e077-7a00-879c-80d9-bb54070594d5@sapo.pt>

?s 08:45 de 31/12/2022, Marco Scazzocchio escreveu:
> Hi,
> 
> why the list of "Available CRAN Packages By Date of Publication" is stopped
> at 2022-12-25 ?
> 
> Regards
> 
> Marco Scazzocchio
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

 From CRAN's main page [1], *in red* after the title:

Submitting to CRAN

CRAN submission will be offline from Dec 22, 2022 to Jan 5, 2023 (CRAN 
team vacation and maintenance work).


[1] https://cran.r-project.org/

Hope this helps,

Rui Barradas


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Jan  2 09:56:21 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 02 Jan 2023 00:56:21 -0800
Subject: [R] R Certification
In-Reply-To: <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
Message-ID: <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>

I think this request is like saying "I want a unicorn." There are many organizations that will enter your name into a certificate form for a fee, possibly with some credibility... but if they put "r-project.org" down as the name of the organization granting this "certificate" then you are probably getting fooled.

On December 30, 2022 8:33:09 AM PST, Mukesh Ghanshyamdas Lekhrajani via R-help <r-help at r-project.org> wrote:
>Hello R Support Team,
>
> 
>
>I want to do R certification, could you help me with the list of
>certificates with their prices so it helps me to register.
>
> 
>
>I want to do the certification directly from the governing body
>"r-project.org" and not from any 3rd party.
>
> 
>
>Please help.
>
> 
>
> 
>
> 
>
>Mukesh
>
>+91 9819285174
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From mukesh@iekhr@j@@i m@iii@g oii y@hoo@com  Mon Jan  2 13:03:56 2023
From: mukesh@iekhr@j@@i m@iii@g oii y@hoo@com (mukesh@iekhr@j@@i m@iii@g oii y@hoo@com)
Date: Mon, 2 Jan 2023 17:33:56 +0530
Subject: [R] R Certification
In-Reply-To: <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
Message-ID: <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>

Hello Jeff !

Yes, you are right.. and that?s why I am asking this question - just like other governing bodies that issue certification on their respective technologies, does "r-project.org" also have a learning path ? and then a certification.

Say - Microsoft issues certificate for C#, .Net, etc..
Then, Oracle issues certificates for Java, DB etc..

These are authentic governing bodies for learning and issuing certificates 

On exactly similar lines -  "r-project.org" would also be having some learning path and then let "r-project" take the proctored exam and issue a certificate...

I am not looking at any external institute for certifying me on "R" - but, the governing body itself..

So, the question again is - "does r-project provide a learning path and issue certificate after taking exams"

Thanks, Mukesh
9819285174



-----Original Message-----
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us> 
Sent: Monday, January 2, 2023 2:26 PM
To: mukesh.lekhrajani at yahoo.com; Mukesh Ghanshyamdas Lekhrajani via R-help <r-help at r-project.org>; r-help at r-project.org
Subject: Re: [R] R Certification

I think this request is like saying "I want a unicorn." There are many organizations that will enter your name into a certificate form for a fee, possibly with some credibility... but if they put "r-project.org" down as the name of the organization granting this "certificate" then you are probably getting fooled.

On December 30, 2022 8:33:09 AM PST, Mukesh Ghanshyamdas Lekhrajani via R-help <r-help at r-project.org> wrote:
>Hello R Support Team,
>
> 
>
>I want to do R certification, could you help me with the list of 
>certificates with their prices so it helps me to register.
>
> 
>
>I want to do the certification directly from the governing body 
>"r-project.org" and not from any 3rd party.
>
> 
>
>Please help.
>
> 
>
> 
>
> 
>
>Mukesh
>
>+91 9819285174
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide 
>http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Jan  2 13:43:11 2023
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 2 Jan 2023 12:43:11 +0000
Subject: [R] R Certification
In-Reply-To: <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
Message-ID: <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>

Hallo Mukesh

R project is not Microsoft or Oracle AFAIK. But if you need some certificate you could take courses on Coursera, they are offering certificates.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Mukesh
> Ghanshyamdas Lekhrajani via R-help
> Sent: Monday, January 2, 2023 1:04 PM
> To: 'Jeff Newmiller' <jdnewmil at dcn.davis.ca.us>; 'Mukesh Ghanshyamdas
> Lekhrajani via R-help' <r-help at r-project.org>; r-help at r-project.org
> Subject: Re: [R] R Certification
> 
> Hello Jeff !
> 
> Yes, you are right.. and that?s why I am asking this question - just like other
> governing bodies that issue certification on their respective technologies, does
> "r-project.org" also have a learning path ? and then a certification.
> 
> Say - Microsoft issues certificate for C#, .Net, etc..
> Then, Oracle issues certificates for Java, DB etc..
> 
> These are authentic governing bodies for learning and issuing certificates
> 
> On exactly similar lines -  "r-project.org" would also be having some learning
> path and then let "r-project" take the proctored exam and issue a certificate...
> 
> I am not looking at any external institute for certifying me on "R" - but, the
> governing body itself..
> 
> So, the question again is - "does r-project provide a learning path and issue
> certificate after taking exams"
> 
> Thanks, Mukesh
> 9819285174
> 
> 
> 
> -----Original Message-----
> From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> Sent: Monday, January 2, 2023 2:26 PM
> To: mukesh.lekhrajani at yahoo.com; Mukesh Ghanshyamdas Lekhrajani via R-
> help <r-help at r-project.org>; r-help at r-project.org
> Subject: Re: [R] R Certification
> 
> I think this request is like saying "I want a unicorn." There are many
> organizations that will enter your name into a certificate form for a fee, possibly
> with some credibility... but if they put "r-project.org" down as the name of the
> organization granting this "certificate" then you are probably getting fooled.
> 
> On December 30, 2022 8:33:09 AM PST, Mukesh Ghanshyamdas Lekhrajani via
> R-help <r-help at r-project.org> wrote:
> >Hello R Support Team,
> >
> >
> >
> >I want to do R certification, could you help me with the list of
> >certificates with their prices so it helps me to register.
> >
> >
> >
> >I want to do the certification directly from the governing body
> >"r-project.org" and not from any 3rd party.
> >
> >
> >
> >Please help.
> >
> >
> >
> >
> >
> >
> >
> >Mukesh
> >
> >+91 9819285174
> >
> >
> >	[[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
> 
> --
> Sent from my phone. Please excuse my brevity.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From mukesh@iekhr@j@@i m@iii@g oii y@hoo@com  Mon Jan  2 14:17:43 2023
From: mukesh@iekhr@j@@i m@iii@g oii y@hoo@com (mukesh@iekhr@j@@i m@iii@g oii y@hoo@com)
Date: Mon, 2 Jan 2023 18:47:43 +0530
Subject: [R] R Certification
In-Reply-To: <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
Message-ID: <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>

Thanks Petr !

I will look at other training bodies as Coursera, or few others... but I was just wondering if there could be a  certificate from the "originators" itself, I mean an "R" certificate from "r-project" itself and that would carry more importance than external / unauthorized certificate bodies.

But, if you suggest there is no such certification provided by "r-project", then the only option for me is to search else where like - Coursera or few others.

I now have got my answers, but later the day - if ever "r-project" comes up with "R Language" certifications, do keep me informed.


Thanks, Mukesh
9819285174.


-----Original Message-----
From: PIKAL Petr <petr.pikal at precheza.cz> 
Sent: Monday, January 2, 2023 6:13 PM
To: mukesh.lekhrajani at yahoo.com; R-help Mailing List <r-help at r-project.org>
Subject: RE: [R] R Certification

Hallo Mukesh

R project is not Microsoft or Oracle AFAIK. But if you need some certificate you could take courses on Coursera, they are offering certificates.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Mukesh
> Ghanshyamdas Lekhrajani via R-help
> Sent: Monday, January 2, 2023 1:04 PM
> To: 'Jeff Newmiller' <jdnewmil at dcn.davis.ca.us>; 'Mukesh Ghanshyamdas
> Lekhrajani via R-help' <r-help at r-project.org>; r-help at r-project.org
> Subject: Re: [R] R Certification
> 
> Hello Jeff !
> 
> Yes, you are right.. and that?s why I am asking this question - just like other
> governing bodies that issue certification on their respective technologies, does
> "r-project.org" also have a learning path ? and then a certification.
> 
> Say - Microsoft issues certificate for C#, .Net, etc..
> Then, Oracle issues certificates for Java, DB etc..
> 
> These are authentic governing bodies for learning and issuing certificates
> 
> On exactly similar lines -  "r-project.org" would also be having some learning
> path and then let "r-project" take the proctored exam and issue a certificate...
> 
> I am not looking at any external institute for certifying me on "R" - but, the
> governing body itself..
> 
> So, the question again is - "does r-project provide a learning path and issue
> certificate after taking exams"
> 
> Thanks, Mukesh
> 9819285174
> 
> 
> 
> -----Original Message-----
> From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> Sent: Monday, January 2, 2023 2:26 PM
> To: mukesh.lekhrajani at yahoo.com; Mukesh Ghanshyamdas Lekhrajani via R-
> help <r-help at r-project.org>; r-help at r-project.org
> Subject: Re: [R] R Certification
> 
> I think this request is like saying "I want a unicorn." There are many
> organizations that will enter your name into a certificate form for a fee, possibly
> with some credibility... but if they put "r-project.org" down as the name of the
> organization granting this "certificate" then you are probably getting fooled.
> 
> On December 30, 2022 8:33:09 AM PST, Mukesh Ghanshyamdas Lekhrajani via
> R-help <r-help at r-project.org> wrote:
> >Hello R Support Team,
> >
> >
> >
> >I want to do R certification, could you help me with the list of
> >certificates with their prices so it helps me to register.
> >
> >
> >
> >I want to do the certification directly from the governing body
> >"r-project.org" and not from any 3rd party.
> >
> >
> >
> >Please help.
> >
> >
> >
> >
> >
> >
> >
> >Mukesh
> >
> >+91 9819285174
> >
> >
> >	[[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
> 
> --
> Sent from my phone. Please excuse my brevity.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From gm@|om@ok|1980 @end|ng |rom gm@||@com  Mon Jan  2 17:50:09 2023
From: gm@|om@ok|1980 @end|ng |rom gm@||@com (=?UTF-8?Q?G=C3=A1bor_Malomsoki?=)
Date: Mon, 2 Jan 2023 17:50:09 +0100
Subject: [R] Stepmax in Neuralnet
Message-ID: <CAEJRAFY2V_DhAuhAXuGXE8ZkmhK8tC+9C8yJjAAoqXP10pp=pw@mail.gmail.com>

Dear all,

if i set the stepmax parameter higher then i increase the performance of
the neuralnet?
Would be my prediction more accurate?

thanks
Best regards
Gabor

	[[alternative HTML version deleted]]


From jrkr|de@u @end|ng |rom gm@||@com  Mon Jan  2 18:24:03 2023
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Mon, 2 Jan 2023 12:24:03 -0500
Subject: [R] R Certification
In-Reply-To: <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
Message-ID: <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>

Hi Mukesh,

Have a look at the blurb that prints at the start-up of R.

"R is free software and comes with ABSOLUTELY NO WARRANTY."

This is a hint that the R-Project is unlikely to be issuing certificates.



On Mon, 2 Jan 2023 at 08:18, Mukesh Ghanshyamdas Lekhrajani via R-help <
r-help at r-project.org> wrote:

> Thanks Petr !
>
> I will look at other training bodies as Coursera, or few others... but I
> was just wondering if there could be a  certificate from the "originators"
> itself, I mean an "R" certificate from "r-project" itself and that would
> carry more importance than external / unauthorized certificate bodies.
>
> But, if you suggest there is no such certification provided by
> "r-project", then the only option for me is to search else where like -
> Coursera or few others.
>
> I now have got my answers, but later the day - if ever "r-project" comes
> up with "R Language" certifications, do keep me informed.
>
>
> Thanks, Mukesh
> 9819285174.
>
>
> -----Original Message-----
> From: PIKAL Petr <petr.pikal at precheza.cz>
> Sent: Monday, January 2, 2023 6:13 PM
> To: mukesh.lekhrajani at yahoo.com; R-help Mailing List <r-help at r-project.org
> >
> Subject: RE: [R] R Certification
>
> Hallo Mukesh
>
> R project is not Microsoft or Oracle AFAIK. But if you need some
> certificate you could take courses on Coursera, they are offering
> certificates.
>
> Cheers
> Petr
>
> > -----Original Message-----
> > From: R-help <r-help-bounces at r-project.org> On Behalf Of Mukesh
> > Ghanshyamdas Lekhrajani via R-help
> > Sent: Monday, January 2, 2023 1:04 PM
> > To: 'Jeff Newmiller' <jdnewmil at dcn.davis.ca.us>; 'Mukesh Ghanshyamdas
> > Lekhrajani via R-help' <r-help at r-project.org>; r-help at r-project.org
> > Subject: Re: [R] R Certification
> >
> > Hello Jeff !
> >
> > Yes, you are right.. and that?s why I am asking this question - just
> like other
> > governing bodies that issue certification on their respective
> technologies, does
> > "r-project.org" also have a learning path ? and then a certification.
> >
> > Say - Microsoft issues certificate for C#, .Net, etc..
> > Then, Oracle issues certificates for Java, DB etc..
> >
> > These are authentic governing bodies for learning and issuing
> certificates
> >
> > On exactly similar lines -  "r-project.org" would also be having some
> learning
> > path and then let "r-project" take the proctored exam and issue a
> certificate...
> >
> > I am not looking at any external institute for certifying me on "R" -
> but, the
> > governing body itself..
> >
> > So, the question again is - "does r-project provide a learning path and
> issue
> > certificate after taking exams"
> >
> > Thanks, Mukesh
> > 9819285174
> >
> >
> >
> > -----Original Message-----
> > From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
> > Sent: Monday, January 2, 2023 2:26 PM
> > To: mukesh.lekhrajani at yahoo.com; Mukesh Ghanshyamdas Lekhrajani via R-
> > help <r-help at r-project.org>; r-help at r-project.org
> > Subject: Re: [R] R Certification
> >
> > I think this request is like saying "I want a unicorn." There are many
> > organizations that will enter your name into a certificate form for a
> fee, possibly
> > with some credibility... but if they put "r-project.org" down as the
> name of the
> > organization granting this "certificate" then you are probably getting
> fooled.
> >
> > On December 30, 2022 8:33:09 AM PST, Mukesh Ghanshyamdas Lekhrajani via
> > R-help <r-help at r-project.org> wrote:
> > >Hello R Support Team,
> > >
> > >
> > >
> > >I want to do R certification, could you help me with the list of
> > >certificates with their prices so it helps me to register.
> > >
> > >
> > >
> > >I want to do the certification directly from the governing body
> > >"r-project.org" and not from any 3rd party.
> > >
> > >
> > >
> > >Please help.
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > >Mukesh
> > >
> > >+91 9819285174
> > >
> > >
> > >     [[alternative HTML version deleted]]
> > >
> > >______________________________________________
> > >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >https://stat.ethz.ch/mailman/listinfo/r-help
> > >PLEASE do read the posting guide
> > >http://www.R-project.org/posting-guide.html
> > >and provide commented, minimal, self-contained, reproducible code.
> >
> > --
> > Sent from my phone. Please excuse my brevity.
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Mon Jan  2 19:07:03 2023
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Mon, 2 Jan 2023 12:07:03 -0600
Subject: [R] R Certification
In-Reply-To: <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
Message-ID: <14282363-a5b0-c5a5-2886-a1e351bc50ca@effectivedefense.org>

	  If you go to "https://cran.r-project.org" and click, "Download R for 
macOS", you will find several versions that you can download and that 
have a "digital signature".


	  After downloading, you can "check the integrity of the downloaded 
package by checking the signature: pkgutil --check-signature R-4.2.2.pkg".


	  Beyond that, RStudio and other companies will happily sell you a 
maintenance contract, which will get you more polite answers than from a 
list serve like this ;-)


	  Spencer Graves


On 1/2/23 11:24 AM, John Kane wrote:
> Hi Mukesh,
> 
> Have a look at the blurb that prints at the start-up of R.
> 
> "R is free software and comes with ABSOLUTELY NO WARRANTY."
> 
> This is a hint that the R-Project is unlikely to be issuing certificates.
> 
> 
> 
> On Mon, 2 Jan 2023 at 08:18, Mukesh Ghanshyamdas Lekhrajani via R-help <
> r-help at r-project.org> wrote:
> 
>> Thanks Petr !
>>
>> I will look at other training bodies as Coursera, or few others... but I
>> was just wondering if there could be a  certificate from the "originators"
>> itself, I mean an "R" certificate from "r-project" itself and that would
>> carry more importance than external / unauthorized certificate bodies.
>>
>> But, if you suggest there is no such certification provided by
>> "r-project", then the only option for me is to search else where like -
>> Coursera or few others.
>>
>> I now have got my answers, but later the day - if ever "r-project" comes
>> up with "R Language" certifications, do keep me informed.
>>
>>
>> Thanks, Mukesh
>> 9819285174.
>>
>>
>> -----Original Message-----
>> From: PIKAL Petr <petr.pikal at precheza.cz>
>> Sent: Monday, January 2, 2023 6:13 PM
>> To: mukesh.lekhrajani at yahoo.com; R-help Mailing List <r-help at r-project.org
>>>
>> Subject: RE: [R] R Certification
>>
>> Hallo Mukesh
>>
>> R project is not Microsoft or Oracle AFAIK. But if you need some
>> certificate you could take courses on Coursera, they are offering
>> certificates.
>>
>> Cheers
>> Petr
>>
>>> -----Original Message-----
>>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Mukesh
>>> Ghanshyamdas Lekhrajani via R-help
>>> Sent: Monday, January 2, 2023 1:04 PM
>>> To: 'Jeff Newmiller' <jdnewmil at dcn.davis.ca.us>; 'Mukesh Ghanshyamdas
>>> Lekhrajani via R-help' <r-help at r-project.org>; r-help at r-project.org
>>> Subject: Re: [R] R Certification
>>>
>>> Hello Jeff !
>>>
>>> Yes, you are right.. and that?s why I am asking this question - just
>> like other
>>> governing bodies that issue certification on their respective
>> technologies, does
>>> "r-project.org" also have a learning path ? and then a certification.
>>>
>>> Say - Microsoft issues certificate for C#, .Net, etc..
>>> Then, Oracle issues certificates for Java, DB etc..
>>>
>>> These are authentic governing bodies for learning and issuing
>> certificates
>>>
>>> On exactly similar lines -  "r-project.org" would also be having some
>> learning
>>> path and then let "r-project" take the proctored exam and issue a
>> certificate...
>>>
>>> I am not looking at any external institute for certifying me on "R" -
>> but, the
>>> governing body itself..
>>>
>>> So, the question again is - "does r-project provide a learning path and
>> issue
>>> certificate after taking exams"
>>>
>>> Thanks, Mukesh
>>> 9819285174
>>>
>>>
>>>
>>> -----Original Message-----
>>> From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
>>> Sent: Monday, January 2, 2023 2:26 PM
>>> To: mukesh.lekhrajani at yahoo.com; Mukesh Ghanshyamdas Lekhrajani via R-
>>> help <r-help at r-project.org>; r-help at r-project.org
>>> Subject: Re: [R] R Certification
>>>
>>> I think this request is like saying "I want a unicorn." There are many
>>> organizations that will enter your name into a certificate form for a
>> fee, possibly
>>> with some credibility... but if they put "r-project.org" down as the
>> name of the
>>> organization granting this "certificate" then you are probably getting
>> fooled.
>>>
>>> On December 30, 2022 8:33:09 AM PST, Mukesh Ghanshyamdas Lekhrajani via
>>> R-help <r-help at r-project.org> wrote:
>>>> Hello R Support Team,
>>>>
>>>>
>>>>
>>>> I want to do R certification, could you help me with the list of
>>>> certificates with their prices so it helps me to register.
>>>>
>>>>
>>>>
>>>> I want to do the certification directly from the governing body
>>>> "r-project.org" and not from any 3rd party.
>>>>
>>>>
>>>>
>>>> Please help.
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> Mukesh
>>>>
>>>> +91 9819285174
>>>>
>>>>
>>>>      [[alternative HTML version deleted]]
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> --
>>> Sent from my phone. Please excuse my brevity.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
>


From mukesh@iekhr@j@@i m@iii@g oii y@hoo@com  Mon Jan  2 19:09:21 2023
From: mukesh@iekhr@j@@i m@iii@g oii y@hoo@com (mukesh@iekhr@j@@i m@iii@g oii y@hoo@com)
Date: Mon, 2 Jan 2023 23:39:21 +0530
Subject: [R] R Certification
In-Reply-To: <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
Message-ID: <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>

Thanks John, 

 

Will surely do.

 

 

Thanks, Mukesh

9819285174

 

From: John Kane <jrkrideau at gmail.com> 
Sent: Monday, January 2, 2023 10:54 PM
To: mukesh.lekhrajani at yahoo.com
Cc: PIKAL Petr <petr.pikal at precheza.cz>; R-help Mailing List <r-help at r-project.org>
Subject: Re: [R] R Certification

 

Hi Mukesh,

 

Have a look at the blurb that prints at the start-up of R.


"R is free software and comes with ABSOLUTELY NO WARRANTY."

 

This is a hint that the R-Project is unlikely to be issuing certificates.  

 

 

On Mon, 2 Jan 2023 at 08:18, Mukesh Ghanshyamdas Lekhrajani via R-help <r-help at r-project.org <mailto:r-help at r-project.org> > wrote:

Thanks Petr !

I will look at other training bodies as Coursera, or few others... but I was just wondering if there could be a  certificate from the "originators" itself, I mean an "R" certificate from "r-project" itself and that would carry more importance than external / unauthorized certificate bodies.

But, if you suggest there is no such certification provided by "r-project", then the only option for me is to search else where like - Coursera or few others.

I now have got my answers, but later the day - if ever "r-project" comes up with "R Language" certifications, do keep me informed.


Thanks, Mukesh
9819285174.


-----Original Message-----
From: PIKAL Petr <petr.pikal at precheza.cz <mailto:petr.pikal at precheza.cz> > 
Sent: Monday, January 2, 2023 6:13 PM
To: mukesh.lekhrajani at yahoo.com <mailto:mukesh.lekhrajani at yahoo.com> ; R-help Mailing List <r-help at r-project.org <mailto:r-help at r-project.org> >
Subject: RE: [R] R Certification

Hallo Mukesh

R project is not Microsoft or Oracle AFAIK. But if you need some certificate you could take courses on Coursera, they are offering certificates.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org <mailto:r-help-bounces at r-project.org> > On Behalf Of Mukesh
> Ghanshyamdas Lekhrajani via R-help
> Sent: Monday, January 2, 2023 1:04 PM
> To: 'Jeff Newmiller' <jdnewmil at dcn.davis.ca.us <mailto:jdnewmil at dcn.davis.ca.us> >; 'Mukesh Ghanshyamdas
> Lekhrajani via R-help' <r-help at r-project.org <mailto:r-help at r-project.org> >; r-help at r-project.org <mailto:r-help at r-project.org> 
> Subject: Re: [R] R Certification
> 
> Hello Jeff !
> 
> Yes, you are right.. and that?s why I am asking this question - just like other
> governing bodies that issue certification on their respective technologies, does
> "r-project.org <http://r-project.org> " also have a learning path ? and then a certification.
> 
> Say - Microsoft issues certificate for C#, .Net, etc..
> Then, Oracle issues certificates for Java, DB etc..
> 
> These are authentic governing bodies for learning and issuing certificates
> 
> On exactly similar lines -  "r-project.org <http://r-project.org> " would also be having some learning
> path and then let "r-project" take the proctored exam and issue a certificate...
> 
> I am not looking at any external institute for certifying me on "R" - but, the
> governing body itself..
> 
> So, the question again is - "does r-project provide a learning path and issue
> certificate after taking exams"
> 
> Thanks, Mukesh
> 9819285174
> 
> 
> 
> -----Original Message-----
> From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us <mailto:jdnewmil at dcn.davis.ca.us> >
> Sent: Monday, January 2, 2023 2:26 PM
> To: mukesh.lekhrajani at yahoo.com <mailto:mukesh.lekhrajani at yahoo.com> ; Mukesh Ghanshyamdas Lekhrajani via R-
> help <r-help at r-project.org <mailto:r-help at r-project.org> >; r-help at r-project.org <mailto:r-help at r-project.org> 
> Subject: Re: [R] R Certification
> 
> I think this request is like saying "I want a unicorn." There are many
> organizations that will enter your name into a certificate form for a fee, possibly
> with some credibility... but if they put "r-project.org <http://r-project.org> " down as the name of the
> organization granting this "certificate" then you are probably getting fooled.
> 
> On December 30, 2022 8:33:09 AM PST, Mukesh Ghanshyamdas Lekhrajani via
> R-help <r-help at r-project.org <mailto:r-help at r-project.org> > wrote:
> >Hello R Support Team,
> >
> >
> >
> >I want to do R certification, could you help me with the list of
> >certificates with their prices so it helps me to register.
> >
> >
> >
> >I want to do the certification directly from the governing body
> >"r-project.org <http://r-project.org> " and not from any 3rd party.
> >
> >
> >
> >Please help.
> >
> >
> >
> >
> >
> >
> >
> >Mukesh
> >
> >+91 9819285174
> >
> >
> >     [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide
> >http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
> 
> --
> Sent from my phone. Please excuse my brevity.
> 
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.



-- 

John Kane
Kingston ON Canada


	[[alternative HTML version deleted]]


From m|ke|@ch @end|ng |rom @@@@upenn@edu  Mon Jan  2 18:59:21 2023
From: m|ke|@ch @end|ng |rom @@@@upenn@edu (Michael Lachanski)
Date: Mon, 2 Jan 2023 12:59:21 -0500
Subject: [R] 
 Functional Programming Problem Using purr and R's data.table
 shift function
In-Reply-To: <a8139e35-06d6-36fa-a732-c097f7c03f19@kogentum.hu>
References: <CAJKr4LMDHwqpJ5_pOswEfdKKQrU+wx+kcwHWq2T0pAjLcebDFA@mail.gmail.com>
 <2374d4d9-f2f2-1736-6814-bc606c41d4ad@sapo.pt>
 <a8139e35-06d6-36fa-a732-c097f7c03f19@kogentum.hu>
Message-ID: <CAJKr4LP6XA0h+Pz2cfNVcQREeT1yS2LOQ6iPpM94BKZFqZGmow@mail.gmail.com>

D?nes, thank you for the guidance - which is well-taken.

Your side note raises an interesting question: I find the piping %>%
operator readable. Is there any downside to it? Or is the side note meant
to tell me to drop the last: "%>% `[`"?

Thank you,


==
Michael Lachanski
PhD Student in Demography and Sociology
MA Candidate in Statistics
University of Pennsylvania
mikelach at sas.upenn.edu


On Sat, Dec 31, 2022 at 9:22 AM D?nes T?th <toth.denes at kogentum.hu> wrote:

> Hi Michael,
>
> Note that you have to be very careful when using by-reference operations
> in data.table (see `?data.table::set`), especially in a functional
> programming approach. In your function, you avoid this problem by
> calling `data.table(A)` which makes a copy of A even if it is already a
> data.table. However, for large data.table-s, copying can be a very
> expensive operation (esp. in terms of RAM usage), which can be totally
> eliminated by using data.tables in the data.table-way (e.g., joining,
> grouping, and aggregating in the same step by performing these
> operations within `[`, see `?data.table`).
>
> So instead of blindly functionalizing all your code, try to be
> pragmatic. Functional programming is not about using pure functions in
> *every* part of your code base, because it is unfeasible in 99.9% of
> real-world problems. Even Haskell has `IO` and `do`; the point is that
> the  imperative and functional parts of the code are clearly separated
> and imperative components are (tried to be) as top-level as possible.
>
> So when using data.table, a good strategy is to use pure functions for
> performing within-data.table operations, e.g., `DT[, lapply(.SD, mean),
> .SDcols = is.numeric]`, and when these operations alter `DT` by
> reference, invoke the chains of these operations in "pure" wrappers -
> e.g., calling `A <- copy(A)` on the top and then modifying `A` directly.
>
> Cheers,
> Denes
>
> Side note: You do not need to use `DT[ , A:= shift(A, fill = NA, type =
> "lag", n = 1)] %>% `[`(return(DT))`. `[.data.table` returns the result
> (the modified DT) invisibly. If you want to let auto-print work, you can
> just use `DT[ , A:= shift(A, fill = NA, type = "lag", n = 1)][]`.
>
> Note that this also means you usually you do not need to use magrittr's
> or base-R pipe when transforming data.table-s. You can do this instead:
> ```
> DT[
>    ## filter rows where 'x' column equals "a"
>    x == "a"
> ][
>    ## calculate the mean of `z` for each gender and assign it to `y`
>    , y := mean(z), by = "gender"
> ][
>    ## do whatever you want
>    ...
> ]
> ```
>
>
> On 12/31/22 13:39, Rui Barradas wrote:
> > ?s 06:50 de 31/12/2022, Michael Lachanski escreveu:
> >> Hello,
> >>
> >> I am trying to make a habit of "functionalizing" all of my code as
> >> recommended by Hadley Wickham. I have found it surprisingly difficult
> >> to do
> >> so because several intermediate features from data.table break or give
> >> unexpected results using purrr and its data.table adaptation, tidytable.
> >> Here is the a minimal working example of what has stumped me most
> >> recently:
> >>
> >> ===
> >>
> >> library(data.table); library(tidytable)
> >>
> >> minimal_failing_function <- function(A){
> >>    DT <- data.table(A)
> >>    DT[ , A:= shift(A, fill = NA, type = "lag", n = 1)] %>% `[`
> >>    return(DT)}
> >> # works
> >> minimal_failing_function(c(1,2))
> >> # fails
> >> tidytable::pmap_dfr(.l = list(c(1,2)),
> >>                      .f = minimal_failing_function)
> >>
> >>
> >> ===
> >> These should ideally give the same output, but do not. This also fails
> >> using purrr::pmap_dfr rather than tidytable. I am using R 4.2.2 and I
> >> am on
> >> Mac OS Ventura 13.1.
> >>
> >> Thank you for any help you can provide or general guidance.
> >>
> >>
> >> ==
> >> Michael Lachanski
> >> PhD Student in Demography and Sociology
> >> MA Candidate in Statistics
> >> University of Pennsylvania
> >> mikelach at sas.upenn.edu
> >>
> >>     [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!IBzWLUs!VdfzdJ15GLScUok_hiqL3DvTJ20Ce8JMBkQ1NosBfyOvu68iuQkh9nsPZuUBbB9BtrsZBh86OjGyyj3lAB2g_xXCvB6t$
> >> PLEASE do read the posting guide
> >>
> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!IBzWLUs!VdfzdJ15GLScUok_hiqL3DvTJ20Ce8JMBkQ1NosBfyOvu68iuQkh9nsPZuUBbB9BtrsZBh86OjGyyj3lAB2g_3rS2yQK$
> >> and provide commented, minimal, self-contained, reproducible code.
> > Hello,
> >
> > Use map_dfr instead of pmap_dfr.
> >
> >
> > library(data.table)
> > library(tidytable)
> >
> > minimal_failing_function <- function(A) {
> >    DT <- data.table(A)
> >    DT[ , A:= shift(A, fill = NA, type = "lag", n = 1)] %>% `[`
> >    return(DT)
> > }
> >
> > # works
> > tidytable::map_dfr(.x = list(c(1,2)),
> >                     .f = minimal_failing_function)
> > #> # A tidytable: 2 ? 1
> > #>       A
> > #>   <dbl>
> > #> 1    NA
> > #> 2     1
> >
> >
> > Hope this helps,
> >
> > Rui Barradas
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >
> https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!IBzWLUs!VdfzdJ15GLScUok_hiqL3DvTJ20Ce8JMBkQ1NosBfyOvu68iuQkh9nsPZuUBbB9BtrsZBh86OjGyyj3lAB2g_xXCvB6t$
> > PLEASE do read the posting guide
> >
> https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!IBzWLUs!VdfzdJ15GLScUok_hiqL3DvTJ20Ce8JMBkQ1NosBfyOvu68iuQkh9nsPZuUBbB9BtrsZBh86OjGyyj3lAB2g_3rS2yQK$
> > and provide commented, minimal, self-contained, reproducible code.
> >
>

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Jan  3 11:20:50 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Tue, 3 Jan 2023 13:20:50 +0300
Subject: [R] Stepmax in Neuralnet
In-Reply-To: <CAEJRAFY2V_DhAuhAXuGXE8ZkmhK8tC+9C8yJjAAoqXP10pp=pw@mail.gmail.com>
References: <CAEJRAFY2V_DhAuhAXuGXE8ZkmhK8tC+9C8yJjAAoqXP10pp=pw@mail.gmail.com>
Message-ID: <20230103132050.14c53878@Tarkus>

On Mon, 2 Jan 2023 17:50:09 +0100
G?bor Malomsoki <gmalomsoki1980 at gmail.com> wrote:

> if i set the stepmax parameter higher then i increase the performance
> of the neuralnet?
> Would be my prediction more accurate?

Unfortunately, it's very hard to give a good answer to this question as
stated. If the model is underfitted, giving it more iterations might
result in performance increase. If the model is not underfitted, giving
it more iterations may improve its training set performance while
worsening its ability to predict non-training samples.

Have you tried it yourself?

-- 
Best regards,
Ivan


From gm@|om@ok|1980 @end|ng |rom gm@||@com  Tue Jan  3 11:41:18 2023
From: gm@|om@ok|1980 @end|ng |rom gm@||@com (=?UTF-8?Q?G=C3=A1bor_Malomsoki?=)
Date: Tue, 3 Jan 2023 11:41:18 +0100
Subject: [R] Stepmax in Neuralnet
In-Reply-To: <20230103132050.14c53878@Tarkus>
References: <CAEJRAFY2V_DhAuhAXuGXE8ZkmhK8tC+9C8yJjAAoqXP10pp=pw@mail.gmail.com>
 <20230103132050.14c53878@Tarkus>
Message-ID: <CAEJRAFb92UZEGXumcwQqRMq5N=LMFeMqm=Gy==zSq2K4A57Eww@mail.gmail.com>

thanks,
i have not tried yet, because the memory of my computer is too small, and i
have to wait for the result ca 1 day.



Am Di., 3. Jan. 2023 um 11:21 Uhr schrieb Ivan Krylov <krylov.r00t at gmail.com
>:

> On Mon, 2 Jan 2023 17:50:09 +0100
> G?bor Malomsoki <gmalomsoki1980 at gmail.com> wrote:
>
> > if i set the stepmax parameter higher then i increase the performance
> > of the neuralnet?
> > Would be my prediction more accurate?
>
> Unfortunately, it's very hard to give a good answer to this question as
> stated. If the model is underfitted, giving it more iterations might
> result in performance increase. If the model is not underfitted, giving
> it more iterations may improve its training set performance while
> worsening its ability to predict non-training samples.
>
> Have you tried it yourself?
>
> --
> Best regards,
> Ivan
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From toth@dene@ @end|ng |rom kogentum@hu  Tue Jan  3 11:48:54 2023
From: toth@dene@ @end|ng |rom kogentum@hu (=?UTF-8?B?RMOpbmVzIFTDs3Ro?=)
Date: Tue, 3 Jan 2023 11:48:54 +0100
Subject: [R] 
 Functional Programming Problem Using purr and R's data.table
 shift function
In-Reply-To: <CAJKr4LP6XA0h+Pz2cfNVcQREeT1yS2LOQ6iPpM94BKZFqZGmow@mail.gmail.com>
References: <CAJKr4LMDHwqpJ5_pOswEfdKKQrU+wx+kcwHWq2T0pAjLcebDFA@mail.gmail.com>
 <2374d4d9-f2f2-1736-6814-bc606c41d4ad@sapo.pt>
 <a8139e35-06d6-36fa-a732-c097f7c03f19@kogentum.hu>
 <CAJKr4LP6XA0h+Pz2cfNVcQREeT1yS2LOQ6iPpM94BKZFqZGmow@mail.gmail.com>
Message-ID: <b5bb833d-18c8-a2f8-eef9-ddb69bdf3bbc@kogentum.hu>

Hi Michael,

R returns the result of the last evaluated expression by default:
```
add_2 <- function(x) {
   x + 2L
}
```

is the same as and preferred over
```
add_2_return <- function(x) {
   out <- x + 2L
   return(out)
}
```

In the idiomatic use of R, one uses explicit `return` when one wants to 
break the control flow, e.g.:
```
add_2_if_number <- function(x) {
   ## early return if x is not numeric
   if (!is.numeric(x)) {
     return(x)
   }
   ## process otherwise (usually more complicated steps)
   ## note: this part will not be reached for non-numeric x
   x + 2L
}
```

So yes, you should drop the last "%>% `[`" altogether as `[.data.table` 
already returns the whole (modified) data.table when `:=` is used.

Side note:: If you use >=R4.1.0 and you do not use special features of 
`%>%`, try the native `|>` operator first (see `?pipeOp`). 1) You do not 
depend an a user-contributed package, and 2) it works at the parser level.

Cheers,
Denes

On 1/2/23 18:59, Michael Lachanski wrote:
> D?nes, thank you for the guidance - which is well-taken.
> 
> Your side note raises an interesting question: I find the piping %>% 
> operator readable. Is there any downside to it? Or is the side note 
> meant to tell me to drop the last: "%>% `[`"?
> 
> Thank you,
> 
> 
> ==
> Michael Lachanski
> PhD Student in Demography and Sociology
> MA Candidate in Statistics
> University of Pennsylvania
> mikelach at sas.upenn.edu <mailto:mikelach at sas.upenn.edu>
> 
> 
> On Sat, Dec 31, 2022 at 9:22 AM D?nes T?th <toth.denes at kogentum.hu 
> <mailto:toth.denes at kogentum.hu>> wrote:
> 
>     Hi Michael,
> 
>     Note that you have to be very careful when using by-reference
>     operations
>     in data.table (see `?data.table::set`), especially in a functional
>     programming approach. In your function, you avoid this problem by
>     calling `data.table(A)` which makes a copy of A even if it is already a
>     data.table. However, for large data.table-s, copying can be a very
>     expensive operation (esp. in terms of RAM usage), which can be totally
>     eliminated by using data.tables in the data.table-way (e.g., joining,
>     grouping, and aggregating in the same step by performing these
>     operations within `[`, see `?data.table`).
> 
>     So instead of blindly functionalizing all your code, try to be
>     pragmatic. Functional programming is not about using pure functions in
>     *every* part of your code base, because it is unfeasible in 99.9% of
>     real-world problems. Even Haskell has `IO` and `do`; the point is that
>     the? imperative and functional parts of the code are clearly separated
>     and imperative components are (tried to be) as top-level as possible.
> 
>     So when using data.table, a good strategy is to use pure functions for
>     performing within-data.table operations, e.g., `DT[, lapply(.SD, mean),
>     .SDcols = is.numeric]`, and when these operations alter `DT` by
>     reference, invoke the chains of these operations in "pure" wrappers -
>     e.g., calling `A <- copy(A)` on the top and then modifying `A` directly.
> 
>     Cheers,
>     Denes
> 
>     Side note: You do not need to use `DT[ , A:= shift(A, fill = NA, type =
>     "lag", n = 1)] %>% `[`(return(DT))`. `[.data.table` returns the result
>     (the modified DT) invisibly. If you want to let auto-print work, you
>     can
>     just use `DT[ , A:= shift(A, fill = NA, type = "lag", n = 1)][]`.
> 
>     Note that this also means you usually you do not need to use magrittr's
>     or base-R pipe when transforming data.table-s. You can do this instead:
>     ```
>     DT[
>      ? ?## filter rows where 'x' column equals "a"
>      ? ?x == "a"
>     ][
>      ? ?## calculate the mean of `z` for each gender and assign it to `y`
>      ? ?, y := mean(z), by = "gender"
>     ][
>      ? ?## do whatever you want
>      ? ?...
>     ]
>     ```
> 
> 
>     On 12/31/22 13:39, Rui Barradas wrote:
>      > ?s 06:50 de 31/12/2022, Michael Lachanski escreveu:
>      >> Hello,
>      >>
>      >> I am trying to make a habit of "functionalizing" all of my code as
>      >> recommended by Hadley Wickham. I have found it surprisingly
>     difficult
>      >> to do
>      >> so because several intermediate features from data.table break
>     or give
>      >> unexpected results using purrr and its data.table adaptation,
>     tidytable.
>      >> Here is the a minimal working example of what has stumped me most
>      >> recently:
>      >>
>      >> ===
>      >>
>      >> library(data.table); library(tidytable)
>      >>
>      >> minimal_failing_function <- function(A){
>      >> ?? DT <- data.table(A)
>      >> ?? DT[ , A:= shift(A, fill = NA, type = "lag", n = 1)] %>% `[`
>      >> ?? return(DT)}
>      >> # works
>      >> minimal_failing_function(c(1,2))
>      >> # fails
>      >> tidytable::pmap_dfr(.l = list(c(1,2)),
>      >> ???????????????????? .f = minimal_failing_function)
>      >>
>      >>
>      >> ===
>      >> These should ideally give the same output, but do not. This also
>     fails
>      >> using purrr::pmap_dfr rather than tidytable. I am using R 4.2.2
>     and I
>      >> am on
>      >> Mac OS Ventura 13.1.
>      >>
>      >> Thank you for any help you can provide or general guidance.
>      >>
>      >>
>      >> ==
>      >> Michael Lachanski
>      >> PhD Student in Demography and Sociology
>      >> MA Candidate in Statistics
>      >> University of Pennsylvania
>      >> mikelach at sas.upenn.edu <mailto:mikelach at sas.upenn.edu>
>      >>
>      >> ????[[alternative HTML version deleted]]
>      >>
>      >> ______________________________________________
>      >> R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>     -- To UNSUBSCRIBE and more, see
>      >>
>     https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!IBzWLUs!VdfzdJ15GLScUok_hiqL3DvTJ20Ce8JMBkQ1NosBfyOvu68iuQkh9nsPZuUBbB9BtrsZBh86OjGyyj3lAB2g_xXCvB6t$ <https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!IBzWLUs!VdfzdJ15GLScUok_hiqL3DvTJ20Ce8JMBkQ1NosBfyOvu68iuQkh9nsPZuUBbB9BtrsZBh86OjGyyj3lAB2g_xXCvB6t$>
>      >> PLEASE do read the posting guide
>      >>
>     https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!IBzWLUs!VdfzdJ15GLScUok_hiqL3DvTJ20Ce8JMBkQ1NosBfyOvu68iuQkh9nsPZuUBbB9BtrsZBh86OjGyyj3lAB2g_3rS2yQK$ <https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!IBzWLUs!VdfzdJ15GLScUok_hiqL3DvTJ20Ce8JMBkQ1NosBfyOvu68iuQkh9nsPZuUBbB9BtrsZBh86OjGyyj3lAB2g_3rS2yQK$>
>      >> and provide commented, minimal, self-contained, reproducible code.
>      > Hello,
>      >
>      > Use map_dfr instead of pmap_dfr.
>      >
>      >
>      > library(data.table)
>      > library(tidytable)
>      >
>      > minimal_failing_function <- function(A) {
>      >? ? DT <- data.table(A)
>      >? ? DT[ , A:= shift(A, fill = NA, type = "lag", n = 1)] %>% `[`
>      >? ? return(DT)
>      > }
>      >
>      > # works
>      > tidytable::map_dfr(.x = list(c(1,2)),
>      >? ?????????????????? .f = minimal_failing_function)
>      > #> # A tidytable: 2 ? 1
>      > #>?????? A
>      > #>?? <dbl>
>      > #> 1??? NA
>      > #> 2???? 1
>      >
>      >
>      > Hope this helps,
>      >
>      > Rui Barradas
>      >
>      > ______________________________________________
>      > R-help at r-project.org <mailto:R-help at r-project.org> mailing list
>     -- To UNSUBSCRIBE and more, see
>      >
>     https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!IBzWLUs!VdfzdJ15GLScUok_hiqL3DvTJ20Ce8JMBkQ1NosBfyOvu68iuQkh9nsPZuUBbB9BtrsZBh86OjGyyj3lAB2g_xXCvB6t$ <https://urldefense.com/v3/__https://stat.ethz.ch/mailman/listinfo/r-help__;!!IBzWLUs!VdfzdJ15GLScUok_hiqL3DvTJ20Ce8JMBkQ1NosBfyOvu68iuQkh9nsPZuUBbB9BtrsZBh86OjGyyj3lAB2g_xXCvB6t$>
>      > PLEASE do read the posting guide
>      >
>     https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!IBzWLUs!VdfzdJ15GLScUok_hiqL3DvTJ20Ce8JMBkQ1NosBfyOvu68iuQkh9nsPZuUBbB9BtrsZBh86OjGyyj3lAB2g_3rS2yQK$ <https://urldefense.com/v3/__http://www.R-project.org/posting-guide.html__;!!IBzWLUs!VdfzdJ15GLScUok_hiqL3DvTJ20Ce8JMBkQ1NosBfyOvu68iuQkh9nsPZuUBbB9BtrsZBh86OjGyyj3lAB2g_3rS2yQK$>
>      > and provide commented, minimal, self-contained, reproducible code.
>      >
>


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Tue Jan  3 17:48:30 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Tue, 3 Jan 2023 16:48:30 +0000
Subject: [R] Pipe operator
In-Reply-To: <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
Message-ID: <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>

I am trying to understand the reason for existence of the pipe operator, %>%, and when one should use it. It is my understanding that the operator sends the file to the left of the operator to the function immediately to the right of the operator:

c(1:10) %>% mean results in a value of 5.5 which is exactly the same as the result one obtains using the mean function directly, viz. mean(c(1:10)). What is the reason for having two syntactically different but semantically identical ways to call a function? Is one more efficient than the other? Does one use less memory than the other? 

P.S. Please forgive what might seem to be a question with an obvious answer. I am a programmer dinosaur. I have been programming for more than 50 years. When I started programming in the 1960s the only pipe one spoke about was a bong.  

John


From cry@n @end|ng |rom b|ngh@mton@edu  Tue Jan  3 17:57:24 2023
From: cry@n @end|ng |rom b|ngh@mton@edu (Christopher Ryan)
Date: Tue, 3 Jan 2023 11:57:24 -0500
Subject: [R] [External Email]  Pipe operator
In-Reply-To: <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <CAM+rpYm5GaG+0Ed04meDaWNhihJGXTHZqgPUKnD8avODQt=J2A@mail.gmail.com>

I think there are probably a number of purposes for (advantages to?)
the pipe operator. One is that it can avoid nested operations:

plot(mean(sqrt(c(1:10))))  ## this is my silly example code

which can get difficult to read.  This is arguably easier to read and
understand:

c(1:10) %>% sqrt() %>% mean() %>% plot()

As the chain of operations become longer, and as each "link" in the
chain becomes more complex, the value of the pipe approach, compared
to deep nesting in parentheses, increases, in my view.

--Chris Ryan

On Tue, Jan 3, 2023 at 11:48 AM Sorkin, John <jsorkin at som.umaryland.edu> wrote:
>
> I am trying to understand the reason for existence of the pipe operator, %>%, and when one should use it. It is my understanding that the operator sends the file to the left of the operator to the function immediately to the right of the operator:
>
> c(1:10) %>% mean results in a value of 5.5 which is exactly the same as the result one obtains using the mean function directly, viz. mean(c(1:10)). What is the reason for having two syntactically different but semantically identical ways to call a function? Is one more efficient than the other? Does one use less memory than the other?
>
> P.S. Please forgive what might seem to be a question with an obvious answer. I am a programmer dinosaur. I have been programming for more than 50 years. When I started programming in the 1960s the only pipe one spoke about was a bong.
>
> John
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Tue Jan  3 18:07:52 2023
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Tue, 3 Jan 2023 17:07:52 +0000
Subject: [R] Pipe operator
In-Reply-To: <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <BN6PR2201MB1553BE35AD212F0C0E07874ACFF49@BN6PR2201MB1553.namprd22.prod.outlook.com>

The pipe shortens code and results in fewer variables because you do not have to save intermediate steps. Once you get used to the idea it is useful. Note that there is also the |> pipe that is part of base R. As far as I know it does the same thing as %>%, or at my level of programing I have not encountered a difference.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
Sent: Tuesday, January 3, 2023 11:49 AM
To: 'R-help Mailing List' <r-help at r-project.org>
Subject: [R] Pipe operator

[External Email]

I am trying to understand the reason for existence of the pipe operator, %>%, and when one should use it. It is my understanding that the operator sends the file to the left of the operator to the function immediately to the right of the operator:

c(1:10) %>% mean results in a value of 5.5 which is exactly the same as the result one obtains using the mean function directly, viz. mean(c(1:10)). What is the reason for having two syntactically different but semantically identical ways to call a function? Is one more efficient than the other? Does one use less memory than the other?

P.S. Please forgive what might seem to be a question with an obvious answer. I am a programmer dinosaur. I have been programming for more than 50 years. When I started programming in the 1960s the only pipe one spoke about was a bong.

John

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C73edce5d4e084253a39008daedaa653f%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638083613362415015%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=fV9Ca3OAleDX%2BwuPJIONYStrAdaQhXTsq61jh2pLtDY%3D&reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C73edce5d4e084253a39008daedaa653f%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638083613362415015%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=YUnV9kE1RcbB3BwM5gKwKwc3qNKhIVNFtxOxKmpbGrQ%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Tue Jan  3 18:13:22 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Tue, 3 Jan 2023 17:13:22 +0000
Subject: [R] Pipe operator
In-Reply-To: <BN6PR2201MB1553BE35AD212F0C0E07874ACFF49@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
 <BN6PR2201MB1553BE35AD212F0C0E07874ACFF49@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <MW4PR03MB63630F7F3EA776AB218EFD2AE2F49@MW4PR03MB6363.namprd03.prod.outlook.com>

Tim,

Thank you for your reply. I did not know about the |> operator. Do both %>% and |> work in base R?

You suggested that the pipe operator can produce code with fewer variables. May I ask you to send a short example in which the pipe operator saves variables. Does said saving of variables speed up processing or result in less memory usage?

Thank you,
John

________________________________________
From: Ebert,Timothy Aaron <tebert at ufl.edu>
Sent: Tuesday, January 3, 2023 12:07 PM
To: Sorkin, John; 'R-help Mailing List'
Subject: RE: Pipe operator

The pipe shortens code and results in fewer variables because you do not have to save intermediate steps. Once you get used to the idea it is useful. Note that there is also the |> pipe that is part of base R. As far as I know it does the same thing as %>%, or at my level of programing I have not encountered a difference.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
Sent: Tuesday, January 3, 2023 11:49 AM
To: 'R-help Mailing List' <r-help at r-project.org>
Subject: [R] Pipe operator

[External Email]

I am trying to understand the reason for existence of the pipe operator, %>%, and when one should use it. It is my understanding that the operator sends the file to the left of the operator to the function immediately to the right of the operator:

c(1:10) %>% mean results in a value of 5.5 which is exactly the same as the result one obtains using the mean function directly, viz. mean(c(1:10)). What is the reason for having two syntactically different but semantically identical ways to call a function? Is one more efficient than the other? Does one use less memory than the other?

P.S. Please forgive what might seem to be a question with an obvious answer. I am a programmer dinosaur. I have been programming for more than 50 years. When I started programming in the 1960s the only pipe one spoke about was a bong.

John

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Cjsorkin%40som.umaryland.edu%7Cdc0d677272114cf6ba2808daedad0ec5%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638083624783034240%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=7dDMSg%2FmPQ5xXP6zu6MWLmARdtdlrYWb3mXPZQj0La0%3D&reserved=0
PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Cjsorkin%40som.umaryland.edu%7Cdc0d677272114cf6ba2808daedad0ec5%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638083624783034240%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=l5BZyjup%2Bho%2FijE1zQMxb5JE3F5VfKBZpUKHYW4k4Fg%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Tue Jan  3 18:34:37 2023
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Tue, 3 Jan 2023 17:34:37 +0000
Subject: [R] Pipe operator
In-Reply-To: <MW4PR03MB63630F7F3EA776AB218EFD2AE2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
 <BN6PR2201MB1553BE35AD212F0C0E07874ACFF49@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <MW4PR03MB63630F7F3EA776AB218EFD2AE2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <BN6PR2201MB155378D68586F7781F2EEA60CFF49@BN6PR2201MB1553.namprd22.prod.outlook.com>

Christopher Ryan sent this example
c(1:10) %>% sqrt() %>% mean() %>% plot()
I could code this as

A <- c(1:10)
B <- sqrt(A)
C<- mean(B)
plot(C)

I can then clean up by removing variables that I have no further use for.
rm(A, B, C)

The %>% operator is from the magriter package. It can be installed directly, or it is also installed if you use the tidyverse package (and possibly many others). The |> is base R, but it was added in R version 4.1.0.

I do not know if it increases processing speed.
It can save memory usage, especially if one is a messy programmer and does not tidy up after each task.
If you wanted to test execution times for bits of code there is the microbenchmark package.

Tim

-----Original Message-----
From: Sorkin, John <jsorkin at som.umaryland.edu> 
Sent: Tuesday, January 3, 2023 12:13 PM
To: Ebert,Timothy Aaron <tebert at ufl.edu>; 'R-help Mailing List' <r-help at r-project.org>
Subject: Re: Pipe operator

[External Email]

Tim,

Thank you for your reply. I did not know about the |> operator. Do both %>% and |> work in base R?

You suggested that the pipe operator can produce code with fewer variables. May I ask you to send a short example in which the pipe operator saves variables. Does said saving of variables speed up processing or result in less memory usage?

Thank you,
John

________________________________________
From: Ebert,Timothy Aaron <tebert at ufl.edu>
Sent: Tuesday, January 3, 2023 12:07 PM
To: Sorkin, John; 'R-help Mailing List'
Subject: RE: Pipe operator

The pipe shortens code and results in fewer variables because you do not have to save intermediate steps. Once you get used to the idea it is useful. Note that there is also the |> pipe that is part of base R. As far as I know it does the same thing as %>%, or at my level of programing I have not encountered a difference.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
Sent: Tuesday, January 3, 2023 11:49 AM
To: 'R-help Mailing List' <r-help at r-project.org>
Subject: [R] Pipe operator

[External Email]

I am trying to understand the reason for existence of the pipe operator, %>%, and when one should use it. It is my understanding that the operator sends the file to the left of the operator to the function immediately to the right of the operator:

c(1:10) %>% mean results in a value of 5.5 which is exactly the same as the result one obtains using the mean function directly, viz. mean(c(1:10)). What is the reason for having two syntactically different but semantically identical ways to call a function? Is one more efficient than the other? Does one use less memory than the other?

P.S. Please forgive what might seem to be a question with an obvious answer. I am a programmer dinosaur. I have been programming for more than 50 years. When I started programming in the 1960s the only pipe one spoke about was a bong.

John

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7Cfa39e74a28354e3b3f6c08daedadd2ab%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638083628073049849%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=qCK4H%2BtClknwzT9sQpQAUeei9I6dFz7vP904X0n39cw%3D&reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7Cfa39e74a28354e3b3f6c08daedadd2ab%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638083628073049849%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=%2F75VhIpUPDD1VjEHWJ5HBKcQO6cYciTJSMPJ9nETmMQ%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.


From 538280 @end|ng |rom gm@||@com  Tue Jan  3 18:35:29 2023
From: 538280 @end|ng |rom gm@||@com (Greg Snow)
Date: Tue, 3 Jan 2023 10:35:29 -0700
Subject: [R] Pipe operator
In-Reply-To: <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <CAFEqCdzdZmy2WrCFDKbh018rhTuODzav27TRJpOm3DwTdLe7bA@mail.gmail.com>

To expand a little on Christopher's answer.

The short answer is that having the different syntaxes can lead to
more readable code (when used properly).

Note that there are now 2 different (but somewhat similar) pipes
available in R (there could be more in some package(s) that I don't
know about, but will just talk about the main 2).

The %>% pipe comes from the magrittr package, but many other packages
now import that package.  But you need to load the magrittr package,
either directly or indirectly, before you can use that pipe.  The
magrittr pipe is a function call, so there is small increase in time
and memory for using it, but it is a small fraction of a second and a
few bytes of memory, so you probably will not notice the increased
usage.

The core R language now has a built in pipe |> which is handled by the
parser, so no extra function calls and you do not need to load any
extra packages (though you need a somewhat recent version of R, within
the last year or so).

The built-in |> pipe is a little pickier, you need to include the
parentheses in a function call, e.g. 1:10 |> mean() where the magrittr
pipe can work with that call or the function without parentheses, e.g.
1:10 %>% mean or 1:10 %>% mean(), this makes %>% a little easier to
work with anonymous functions.  If the previous return needs to be
passed to an argument other than the first, then %>% uses "." and |>
uses "_".

The magrittr package has additional versions of the pipe and some
functions that wrap around common operators to make it easier to use
them with pipes, so there are still advantages to loading that package
if any of those are helpful.

For a simple case like your example, the pipe probably does not help
with readability much, but as we string more function calls together.
For example, here are 3 ways to compute the geometric mean of the data
in a vector "x":

exp(mean(log(x)))

logx <- log(x)
mlx <- mean(logx)
exp(mtx)

x |>
   log() |>
   mean() |>
   exp()

These all do the same thing, but the first option is read from the
middle outward (which can be tricky) and is even more complicated if
you use additional arguments to any of the functions.
The second option reads top down, but requires creating intermediate
variables.  The last reads similar to the second, but without the
extra variables.  Spreading the series of function calls across
multiple rows makes it easier to read and easily lets you insert a
line like `print() |>` for debugging or checking intermediate results,
and single lines can easily be commented out to skip that step.

I have found myself using code like the following to compute a table,
print it, and compute the proportions all in one step:

table(f, g) |>
  print() |>
  prop.table()

The pipes also work very well with the tidyverse, or even the tidy
data ideas without those packages where we use a single function for
each change, e.g. start with a data frame, select a subset of the
columns, filter to a subset of the rows, mutate a column, join to
another data frame, then pass the final result to a modeling function
like `lm` (and then pass that result to a summary function).  This is
nicely readable when each step is its own line.

On Tue, Jan 3, 2023 at 9:49 AM Sorkin, John <jsorkin at som.umaryland.edu> wrote:
>
> I am trying to understand the reason for existence of the pipe operator, %>%, and when one should use it. It is my understanding that the operator sends the file to the left of the operator to the function immediately to the right of the operator:
>
> c(1:10) %>% mean results in a value of 5.5 which is exactly the same as the result one obtains using the mean function directly, viz. mean(c(1:10)). What is the reason for having two syntactically different but semantically identical ways to call a function? Is one more efficient than the other? Does one use less memory than the other?
>
> P.S. Please forgive what might seem to be a question with an obvious answer. I am a programmer dinosaur. I have been programming for more than 50 years. When I started programming in the 1960s the only pipe one spoke about was a bong.
>
> John
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From @vi@e@gross m@iii@g oii gm@ii@com  Tue Jan  3 18:40:44 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Tue, 3 Jan 2023 12:40:44 -0500
Subject: [R] Pipe operator
In-Reply-To: <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <004b01d91f9a$822dbb00$86893100$@gmail.com>

John,

The topic has indeed been discussed here endlessly but new people still
stumble upon it.

Until recently, the formal R language did not have a built-in pipe
functionality. It was widely used through an assortment of packages and
there are quite a few variations on the theme including different
implementations.

Most existing code does use the operator %>% but there is now a built-in |>
operator that is generally faster but is not as easy to use in a few cases.

Please forget the use of the word FILE here. Pipes are a form of syntactic
sugar that generally is about the FIRST argument to a function. They are NOT
meant to be used just for the trivial case you mention where indeed there is
an easy way to do things. Yes, they work in such situations. But consider a
deeply nested expression like this:

Result <- round(max(cos(x), 3.14159/4), 3)

There are MANY deeper nested expressions like this commonly used. The above
can be written linearly as in

Temp1 <- cos(x)
Temp2 <- max(Temp1, 3.14159/4)
Result <- round(Temp2, 3)

Translation, for some variable x, calculate the cosine and take the maximum
value of it as compared to pi/4 and round the result to three decimal
places. Not an uncommon kind of thing to do and sometimes you can nest such
things many layers deep and get hopelessly confused if not done somewhat
linearly.

What pipes allow is to write this closer to the second way while not seeing
or keeping any temporary variables around. The goal is to replace the FIRST
argument to a function with whatever resulted as the value of the previous
expression. That is often a vector or data.frame or list or any kind of
object but can also be fairly complex as in a list of lists of matrices.

So you can still start with cos(x) OR you can write this where the x is
removed from within and leaves cos() empty:

x %>% cos
or
x |> cos()

In the previous version of pipes the parentheses after cos() are optional if
there are no additional arguments but the new pipe requires them.

So continuing the above, using multiple lines, the pipe looks like:

Result <-
  x %>%
  cos() %>%
  max(3.14159/4) %>%
  round(3)

This gives the same result but is arguably easier for some to read and
follow. Nobody forces you to use it and for simple cases, most people don't.

There is a grouping of packages called the tidyverse that makes heavy use of
pipes routine as they made most or all their functions such that the first
argument is the one normally piped to and it can be very handy to write code
that says, read in your data into a variable (a data.frame or tibble often)
and PIPE IT to a function that renames some columns and PIPE the resulting
modified object to a function that retains only selected rows and pipe that
to a function that drops some of the columns and pipe that to a function
that groups the items or sorts them and pipe that to a function that does a
join with another object or generates a report or so many other things.

So the real answer is that piping is another WAY of doing things from a
programmers perspective. Underneath it all, it is mostly syntactic sugar and
the interpreter rearranges your code and performs the steps in what seems
like a different order at times. Generally, you do not need to care.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
Sent: Tuesday, January 3, 2023 11:49 AM
To: 'R-help Mailing List' <r-help at r-project.org>
Subject: [R] Pipe operator

I am trying to understand the reason for existence of the pipe operator,
%>%, and when one should use it. It is my understanding that the operator
sends the file to the left of the operator to the function immediately to
the right of the operator:

c(1:10) %>% mean results in a value of 5.5 which is exactly the same as the
result one obtains using the mean function directly, viz. mean(c(1:10)).
What is the reason for having two syntactically different but semantically
identical ways to call a function? Is one more efficient than the other?
Does one use less memory than the other? 

P.S. Please forgive what might seem to be a question with an obvious answer.
I am a programmer dinosaur. I have been programming for more than 50 years.
When I started programming in the 1960s the only pipe one spoke about was a
bong.  

John

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From @vi@e@gross m@iii@g oii gm@ii@com  Tue Jan  3 19:34:25 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Tue, 3 Jan 2023 13:34:25 -0500
Subject: [R] Pipe operator
In-Reply-To: <BN6PR2201MB1553BE35AD212F0C0E07874ACFF49@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
 <BN6PR2201MB1553BE35AD212F0C0E07874ACFF49@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <004d01d91fa2$01931640$04b942c0$@gmail.com>

Tim,

There are differences and this one can be huge.

The other pipe operators let you pass the current object to a later argument
instead of the first by using a period to represent where to put it. The new
one has a harder albeit flexible method by creating an anonymous function.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Ebert,Timothy Aaron
Sent: Tuesday, January 3, 2023 12:08 PM
To: Sorkin, John <jsorkin at som.umaryland.edu>; 'R-help Mailing List'
<r-help at r-project.org>
Subject: Re: [R] Pipe operator

The pipe shortens code and results in fewer variables because you do not
have to save intermediate steps. Once you get used to the idea it is useful.
Note that there is also the |> pipe that is part of base R. As far as I know
it does the same thing as %>%, or at my level of programing I have not
encountered a difference.

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
Sent: Tuesday, January 3, 2023 11:49 AM
To: 'R-help Mailing List' <r-help at r-project.org>
Subject: [R] Pipe operator

[External Email]

I am trying to understand the reason for existence of the pipe operator,
%>%, and when one should use it. It is my understanding that the operator
sends the file to the left of the operator to the function immediately to
the right of the operator:

c(1:10) %>% mean results in a value of 5.5 which is exactly the same as the
result one obtains using the mean function directly, viz. mean(c(1:10)).
What is the reason for having two syntactically different but semantically
identical ways to call a function? Is one more efficient than the other?
Does one use less memory than the other?

P.S. Please forgive what might seem to be a question with an obvious answer.
I am a programmer dinosaur. I have been programming for more than 50 years.
When I started programming in the 1960s the only pipe one spoke about was a
bong.

John

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.
ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C73edce5d4
e084253a39008daedaa653f%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C6380836
13362415015%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJB
TiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=fV9Ca3OAleDX%2BwuPJIONYStrA
daQhXTsq61jh2pLtDY%3D&reserved=0
PLEASE do read the posting guide
https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-proje
ct.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C73edce5d4e0842
53a39008daedaa653f%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638083613362
415015%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6I
k1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=YUnV9kE1RcbB3BwM5gKwKwc3qNKhIVNF
txOxKmpbGrQ%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From bor|@@@te|pe @end|ng |rom utoronto@c@  Tue Jan  3 20:00:46 2023
From: bor|@@@te|pe @end|ng |rom utoronto@c@ (Boris Steipe)
Date: Tue, 3 Jan 2023 19:00:46 +0000
Subject: [R] Pipe operator
In-Reply-To: <004b01d91f9a$822dbb00$86893100$@gmail.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
 <004b01d91f9a$822dbb00$86893100$@gmail.com>
Message-ID: <8E39C1BA-5CCE-4C36-A64E-C6BF6CBA1967@utoronto.ca>

Working off Avi's example - would:

  x |> cos() |> max(pi/4) |> round(3) |> assign("x", value = _)

...be even more intuitive to read? Or are there hidden problems with that?



Cheers,
Boris


> On 2023-01-03, at 12:40, avi.e.gross at gmail.com wrote:
> 
> John,
> 
> The topic has indeed been discussed here endlessly but new people still
> stumble upon it.
> 
> Until recently, the formal R language did not have a built-in pipe
> functionality. It was widely used through an assortment of packages and
> there are quite a few variations on the theme including different
> implementations.
> 
> Most existing code does use the operator %>% but there is now a built-in |>
> operator that is generally faster but is not as easy to use in a few cases.
> 
> Please forget the use of the word FILE here. Pipes are a form of syntactic
> sugar that generally is about the FIRST argument to a function. They are NOT
> meant to be used just for the trivial case you mention where indeed there is
> an easy way to do things. Yes, they work in such situations. But consider a
> deeply nested expression like this:
> 
> Result <- round(max(cos(x), 3.14159/4), 3)
> 
> There are MANY deeper nested expressions like this commonly used. The above
> can be written linearly as in
> 
> Temp1 <- cos(x)
> Temp2 <- max(Temp1, 3.14159/4)
> Result <- round(Temp2, 3)
> 
> Translation, for some variable x, calculate the cosine and take the maximum
> value of it as compared to pi/4 and round the result to three decimal
> places. Not an uncommon kind of thing to do and sometimes you can nest such
> things many layers deep and get hopelessly confused if not done somewhat
> linearly.
> 
> What pipes allow is to write this closer to the second way while not seeing
> or keeping any temporary variables around. The goal is to replace the FIRST
> argument to a function with whatever resulted as the value of the previous
> expression. That is often a vector or data.frame or list or any kind of
> object but can also be fairly complex as in a list of lists of matrices.
> 
> So you can still start with cos(x) OR you can write this where the x is
> removed from within and leaves cos() empty:
> 
> x %>% cos
> or
> x |> cos()
> 
> In the previous version of pipes the parentheses after cos() are optional if
> there are no additional arguments but the new pipe requires them.
> 
> So continuing the above, using multiple lines, the pipe looks like:
> 
> Result <-
>  x %>%
>  cos() %>%
>  max(3.14159/4) %>%
>  round(3)
> 
> This gives the same result but is arguably easier for some to read and
> follow. Nobody forces you to use it and for simple cases, most people don't.
> 
> There is a grouping of packages called the tidyverse that makes heavy use of
> pipes routine as they made most or all their functions such that the first
> argument is the one normally piped to and it can be very handy to write code
> that says, read in your data into a variable (a data.frame or tibble often)
> and PIPE IT to a function that renames some columns and PIPE the resulting
> modified object to a function that retains only selected rows and pipe that
> to a function that drops some of the columns and pipe that to a function
> that groups the items or sorts them and pipe that to a function that does a
> join with another object or generates a report or so many other things.
> 
> So the real answer is that piping is another WAY of doing things from a
> programmers perspective. Underneath it all, it is mostly syntactic sugar and
> the interpreter rearranges your code and performs the steps in what seems
> like a different order at times. Generally, you do not need to care.
> 
> 
> 
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
> Sent: Tuesday, January 3, 2023 11:49 AM
> To: 'R-help Mailing List' <r-help at r-project.org>
> Subject: [R] Pipe operator
> 
> I am trying to understand the reason for existence of the pipe operator,
> %>%, and when one should use it. It is my understanding that the operator
> sends the file to the left of the operator to the function immediately to
> the right of the operator:
> 
> c(1:10) %>% mean results in a value of 5.5 which is exactly the same as the
> result one obtains using the mean function directly, viz. mean(c(1:10)).
> What is the reason for having two syntactically different but semantically
> identical ways to call a function? Is one more efficient than the other?
> Does one use less memory than the other? 
> 
> P.S. Please forgive what might seem to be a question with an obvious answer.
> I am a programmer dinosaur. I have been programming for more than 50 years.
> When I started programming in the 1960s the only pipe one spoke about was a
> bong.  
> 
> John
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


--
Boris Steipe MD, PhD

Professor em.
Department of Biochemistry 
Temerty Faculty of Medicine
University of Toronto


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Jan  3 20:07:35 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 03 Jan 2023 11:07:35 -0800
Subject: [R] Pipe operator
In-Reply-To: <MW4PR03MB63630F7F3EA776AB218EFD2AE2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
 <BN6PR2201MB1553BE35AD212F0C0E07874ACFF49@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <MW4PR03MB63630F7F3EA776AB218EFD2AE2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <C57F1CA3-8A75-4929-AAAB-B09229D86B60@dcn.davis.ca.us>

The other responses here have been very good, but I felt it necessary to point out that the concept of a pipe originated around when you started programming [1] (text based). It did take awhile for it to migrate into programming languages such as OCaml, but Powershell makes extensive use of (object-based) pipes.

Re memory use: not so much. Variables are small... it is the data they point to that is large, and it is not possible to analyze data without storing it somewhere. But when the variables are numerous they can interfere with our ability to understand the program... using pipes lets us focus on results obtained after several steps so fewer intermediate values clutter the variable space.

Re speed: the magrittr pipe (%>%) is much slower than the built-in pipe at coordinating the transfer of data from left to right, but that is not usually significant compared to the computation speed on the actual data in the functions.

 [1] https://en.m.wikipedia.org/wiki/Pipeline_(Unix)#:~:text=The%20concept%20of%20pipelines%20was,Ritchie%20%26%20Thompson%2C%201974).

On January 3, 2023 9:13:22 AM PST, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>Tim,
>
>Thank you for your reply. I did not know about the |> operator. Do both %>% and |> work in base R?
>
>You suggested that the pipe operator can produce code with fewer variables. May I ask you to send a short example in which the pipe operator saves variables. Does said saving of variables speed up processing or result in less memory usage?
>
>Thank you,
>John
>
>________________________________________
>From: Ebert,Timothy Aaron <tebert at ufl.edu>
>Sent: Tuesday, January 3, 2023 12:07 PM
>To: Sorkin, John; 'R-help Mailing List'
>Subject: RE: Pipe operator
>
>The pipe shortens code and results in fewer variables because you do not have to save intermediate steps. Once you get used to the idea it is useful. Note that there is also the |> pipe that is part of base R. As far as I know it does the same thing as %>%, or at my level of programing I have not encountered a difference.
>
>Tim
>
>-----Original Message-----
>From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
>Sent: Tuesday, January 3, 2023 11:49 AM
>To: 'R-help Mailing List' <r-help at r-project.org>
>Subject: [R] Pipe operator
>
>[External Email]
>
>I am trying to understand the reason for existence of the pipe operator, %>%, and when one should use it. It is my understanding that the operator sends the file to the left of the operator to the function immediately to the right of the operator:
>
>c(1:10) %>% mean results in a value of 5.5 which is exactly the same as the result one obtains using the mean function directly, viz. mean(c(1:10)). What is the reason for having two syntactically different but semantically identical ways to call a function? Is one more efficient than the other? Does one use less memory than the other?
>
>P.S. Please forgive what might seem to be a question with an obvious answer. I am a programmer dinosaur. I have been programming for more than 50 years. When I started programming in the 1960s the only pipe one spoke about was a bong.
>
>John
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Cjsorkin%40som.umaryland.edu%7Cdc0d677272114cf6ba2808daedad0ec5%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638083624783034240%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=7dDMSg%2FmPQ5xXP6zu6MWLmARdtdlrYWb3mXPZQj0La0%3D&reserved=0
>PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Cjsorkin%40som.umaryland.edu%7Cdc0d677272114cf6ba2808daedad0ec5%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638083624783034240%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=l5BZyjup%2Bho%2FijE1zQMxb5JE3F5VfKBZpUKHYW4k4Fg%3D&reserved=0
>and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Jan  3 20:14:49 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 3 Jan 2023 19:14:49 +0000
Subject: [R] Pipe operator
In-Reply-To: <CAFEqCdzdZmy2WrCFDKbh018rhTuODzav27TRJpOm3DwTdLe7bA@mail.gmail.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
 <CAFEqCdzdZmy2WrCFDKbh018rhTuODzav27TRJpOm3DwTdLe7bA@mail.gmail.com>
Message-ID: <e1d6c5fb-6885-f9ce-8bf4-5c64d0a0e8e7@sapo.pt>

?s 17:35 de 03/01/2023, Greg Snow escreveu:
> To expand a little on Christopher's answer.
> 
> The short answer is that having the different syntaxes can lead to
> more readable code (when used properly).
> 
> Note that there are now 2 different (but somewhat similar) pipes
> available in R (there could be more in some package(s) that I don't
> know about, but will just talk about the main 2).
> 
> The %>% pipe comes from the magrittr package, but many other packages
> now import that package.  But you need to load the magrittr package,
> either directly or indirectly, before you can use that pipe.  The
> magrittr pipe is a function call, so there is small increase in time
> and memory for using it, but it is a small fraction of a second and a
> few bytes of memory, so you probably will not notice the increased
> usage.
> 
> The core R language now has a built in pipe |> which is handled by the
> parser, so no extra function calls and you do not need to load any
> extra packages (though you need a somewhat recent version of R, within
> the last year or so).
> 
> The built-in |> pipe is a little pickier, you need to include the
> parentheses in a function call, e.g. 1:10 |> mean() where the magrittr
> pipe can work with that call or the function without parentheses, e.g.
> 1:10 %>% mean or 1:10 %>% mean(), this makes %>% a little easier to
> work with anonymous functions.  If the previous return needs to be
> passed to an argument other than the first, then %>% uses "." and |>
> uses "_".
> 
> The magrittr package has additional versions of the pipe and some
> functions that wrap around common operators to make it easier to use
> them with pipes, so there are still advantages to loading that package
> if any of those are helpful.
> 
> For a simple case like your example, the pipe probably does not help
> with readability much, but as we string more function calls together.
> For example, here are 3 ways to compute the geometric mean of the data
> in a vector "x":
> 
> exp(mean(log(x)))
> 
> logx <- log(x)
> mlx <- mean(logx)
> exp(mtx)
> 
> x |>
>     log() |>
>     mean() |>
>     exp()
> 
> These all do the same thing, but the first option is read from the
> middle outward (which can be tricky) and is even more complicated if
> you use additional arguments to any of the functions.
> The second option reads top down, but requires creating intermediate
> variables.  The last reads similar to the second, but without the
> extra variables.  Spreading the series of function calls across
> multiple rows makes it easier to read and easily lets you insert a
> line like `print() |>` for debugging or checking intermediate results,
> and single lines can easily be commented out to skip that step.
> 
> I have found myself using code like the following to compute a table,
> print it, and compute the proportions all in one step:
> 
> table(f, g) |>
>    print() |>
>    prop.table()
> 
> The pipes also work very well with the tidyverse, or even the tidy
> data ideas without those packages where we use a single function for
> each change, e.g. start with a data frame, select a subset of the
> columns, filter to a subset of the rows, mutate a column, join to
> another data frame, then pass the final result to a modeling function
> like `lm` (and then pass that result to a summary function).  This is
> nicely readable when each step is its own line.
> 
> On Tue, Jan 3, 2023 at 9:49 AM Sorkin, John <jsorkin at som.umaryland.edu> wrote:
>>
>> I am trying to understand the reason for existence of the pipe operator, %>%, and when one should use it. It is my understanding that the operator sends the file to the left of the operator to the function immediately to the right of the operator:
>>
>> c(1:10) %>% mean results in a value of 5.5 which is exactly the same as the result one obtains using the mean function directly, viz. mean(c(1:10)). What is the reason for having two syntactically different but semantically identical ways to call a function? Is one more efficient than the other? Does one use less memory than the other?
>>
>> P.S. Please forgive what might seem to be a question with an obvious answer. I am a programmer dinosaur. I have been programming for more than 50 years. When I started programming in the 1960s the only pipe one spoke about was a bong.
>>
>> John
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> 
> 

Hello,

Not a long time ago, there was (very) relevant post to r-devel [1] by 
Paul Murrell linking to a YouTube video [2].

[1] https://stat.ethz.ch/pipermail/r-devel/2022-September/081959.html
[2] https://youtu.be/IMpXB30MP48

Hope this helps,

Rui Barradas


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Jan  3 20:15:11 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 03 Jan 2023 11:15:11 -0800
Subject: [R] Pipe operator
In-Reply-To: <8E39C1BA-5CCE-4C36-A64E-C6BF6CBA1967@utoronto.ca>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
 <004b01d91f9a$822dbb00$86893100$@gmail.com>
 <8E39C1BA-5CCE-4C36-A64E-C6BF6CBA1967@utoronto.ca>
Message-ID: <C1BDF935-9594-45D4-BB57-2E1DA7EC6FA8@dcn.davis.ca.us>

Ick.

Some people like

x |> cos() |> max(pi/4) |> round(3) -> x

but I much prefer

x <- x |> cos() |> max(pi/4) |> round(3)

On January 3, 2023 11:00:46 AM PST, Boris Steipe <boris.steipe at utoronto.ca> wrote:
>Working off Avi's example - would:
>
>  x |> cos() |> max(pi/4) |> round(3) |> assign("x", value = _)
>
>...be even more intuitive to read? Or are there hidden problems with that?
>
>
>
>Cheers,
>Boris
>
>
>> On 2023-01-03, at 12:40, avi.e.gross at gmail.com wrote:
>> 
>> John,
>> 
>> The topic has indeed been discussed here endlessly but new people still
>> stumble upon it.
>> 
>> Until recently, the formal R language did not have a built-in pipe
>> functionality. It was widely used through an assortment of packages and
>> there are quite a few variations on the theme including different
>> implementations.
>> 
>> Most existing code does use the operator %>% but there is now a built-in |>
>> operator that is generally faster but is not as easy to use in a few cases.
>> 
>> Please forget the use of the word FILE here. Pipes are a form of syntactic
>> sugar that generally is about the FIRST argument to a function. They are NOT
>> meant to be used just for the trivial case you mention where indeed there is
>> an easy way to do things. Yes, they work in such situations. But consider a
>> deeply nested expression like this:
>> 
>> Result <- round(max(cos(x), 3.14159/4), 3)
>> 
>> There are MANY deeper nested expressions like this commonly used. The above
>> can be written linearly as in
>> 
>> Temp1 <- cos(x)
>> Temp2 <- max(Temp1, 3.14159/4)
>> Result <- round(Temp2, 3)
>> 
>> Translation, for some variable x, calculate the cosine and take the maximum
>> value of it as compared to pi/4 and round the result to three decimal
>> places. Not an uncommon kind of thing to do and sometimes you can nest such
>> things many layers deep and get hopelessly confused if not done somewhat
>> linearly.
>> 
>> What pipes allow is to write this closer to the second way while not seeing
>> or keeping any temporary variables around. The goal is to replace the FIRST
>> argument to a function with whatever resulted as the value of the previous
>> expression. That is often a vector or data.frame or list or any kind of
>> object but can also be fairly complex as in a list of lists of matrices.
>> 
>> So you can still start with cos(x) OR you can write this where the x is
>> removed from within and leaves cos() empty:
>> 
>> x %>% cos
>> or
>> x |> cos()
>> 
>> In the previous version of pipes the parentheses after cos() are optional if
>> there are no additional arguments but the new pipe requires them.
>> 
>> So continuing the above, using multiple lines, the pipe looks like:
>> 
>> Result <-
>>  x %>%
>>  cos() %>%
>>  max(3.14159/4) %>%
>>  round(3)
>> 
>> This gives the same result but is arguably easier for some to read and
>> follow. Nobody forces you to use it and for simple cases, most people don't.
>> 
>> There is a grouping of packages called the tidyverse that makes heavy use of
>> pipes routine as they made most or all their functions such that the first
>> argument is the one normally piped to and it can be very handy to write code
>> that says, read in your data into a variable (a data.frame or tibble often)
>> and PIPE IT to a function that renames some columns and PIPE the resulting
>> modified object to a function that retains only selected rows and pipe that
>> to a function that drops some of the columns and pipe that to a function
>> that groups the items or sorts them and pipe that to a function that does a
>> join with another object or generates a report or so many other things.
>> 
>> So the real answer is that piping is another WAY of doing things from a
>> programmers perspective. Underneath it all, it is mostly syntactic sugar and
>> the interpreter rearranges your code and performs the steps in what seems
>> like a different order at times. Generally, you do not need to care.
>> 
>> 
>> 
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
>> Sent: Tuesday, January 3, 2023 11:49 AM
>> To: 'R-help Mailing List' <r-help at r-project.org>
>> Subject: [R] Pipe operator
>> 
>> I am trying to understand the reason for existence of the pipe operator,
>> %>%, and when one should use it. It is my understanding that the operator
>> sends the file to the left of the operator to the function immediately to
>> the right of the operator:
>> 
>> c(1:10) %>% mean results in a value of 5.5 which is exactly the same as the
>> result one obtains using the mean function directly, viz. mean(c(1:10)).
>> What is the reason for having two syntactically different but semantically
>> identical ways to call a function? Is one more efficient than the other?
>> Does one use less memory than the other? 
>> 
>> P.S. Please forgive what might seem to be a question with an obvious answer.
>> I am a programmer dinosaur. I have been programming for more than 50 years.
>> When I started programming in the 1960s the only pipe one spoke about was a
>> bong.  
>> 
>> John
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>
>--
>Boris Steipe MD, PhD
>
>Professor em.
>Department of Biochemistry 
>Temerty Faculty of Medicine
>University of Toronto
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Jan  3 20:22:36 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 3 Jan 2023 19:22:36 +0000
Subject: [R] Pipe operator
In-Reply-To: <e1d6c5fb-6885-f9ce-8bf4-5c64d0a0e8e7@sapo.pt>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
 <CAFEqCdzdZmy2WrCFDKbh018rhTuODzav27TRJpOm3DwTdLe7bA@mail.gmail.com>
 <e1d6c5fb-6885-f9ce-8bf4-5c64d0a0e8e7@sapo.pt>
Message-ID: <12a40452-f736-ad88-5bd3-c673aafbf2d7@sapo.pt>

?s 19:14 de 03/01/2023, Rui Barradas escreveu:
> ?s 17:35 de 03/01/2023, Greg Snow escreveu:
>> To expand a little on Christopher's answer.
>>
>> The short answer is that having the different syntaxes can lead to
>> more readable code (when used properly).
>>
>> Note that there are now 2 different (but somewhat similar) pipes
>> available in R (there could be more in some package(s) that I don't
>> know about, but will just talk about the main 2).
>>
>> The %>% pipe comes from the magrittr package, but many other packages
>> now import that package.? But you need to load the magrittr package,
>> either directly or indirectly, before you can use that pipe.? The
>> magrittr pipe is a function call, so there is small increase in time
>> and memory for using it, but it is a small fraction of a second and a
>> few bytes of memory, so you probably will not notice the increased
>> usage.
>>
>> The core R language now has a built in pipe |> which is handled by the
>> parser, so no extra function calls and you do not need to load any
>> extra packages (though you need a somewhat recent version of R, within
>> the last year or so).
>>
>> The built-in |> pipe is a little pickier, you need to include the
>> parentheses in a function call, e.g. 1:10 |> mean() where the magrittr
>> pipe can work with that call or the function without parentheses, e.g.
>> 1:10 %>% mean or 1:10 %>% mean(), this makes %>% a little easier to
>> work with anonymous functions.? If the previous return needs to be
>> passed to an argument other than the first, then %>% uses "." and |>
>> uses "_".
>>
>> The magrittr package has additional versions of the pipe and some
>> functions that wrap around common operators to make it easier to use
>> them with pipes, so there are still advantages to loading that package
>> if any of those are helpful.
>>
>> For a simple case like your example, the pipe probably does not help
>> with readability much, but as we string more function calls together.
>> For example, here are 3 ways to compute the geometric mean of the data
>> in a vector "x":
>>
>> exp(mean(log(x)))
>>
>> logx <- log(x)
>> mlx <- mean(logx)
>> exp(mtx)
>>
>> x |>
>> ??? log() |>
>> ??? mean() |>
>> ??? exp()
>>
>> These all do the same thing, but the first option is read from the
>> middle outward (which can be tricky) and is even more complicated if
>> you use additional arguments to any of the functions.
>> The second option reads top down, but requires creating intermediate
>> variables.? The last reads similar to the second, but without the
>> extra variables.? Spreading the series of function calls across
>> multiple rows makes it easier to read and easily lets you insert a
>> line like `print() |>` for debugging or checking intermediate results,
>> and single lines can easily be commented out to skip that step.
>>
>> I have found myself using code like the following to compute a table,
>> print it, and compute the proportions all in one step:
>>
>> table(f, g) |>
>> ?? print() |>
>> ?? prop.table()
>>
>> The pipes also work very well with the tidyverse, or even the tidy
>> data ideas without those packages where we use a single function for
>> each change, e.g. start with a data frame, select a subset of the
>> columns, filter to a subset of the rows, mutate a column, join to
>> another data frame, then pass the final result to a modeling function
>> like `lm` (and then pass that result to a summary function).? This is
>> nicely readable when each step is its own line.
>>
>> On Tue, Jan 3, 2023 at 9:49 AM Sorkin, John 
>> <jsorkin at som.umaryland.edu> wrote:
>>>
>>> I am trying to understand the reason for existence of the pipe 
>>> operator, %>%, and when one should use it. It is my understanding 
>>> that the operator sends the file to the left of the operator to the 
>>> function immediately to the right of the operator:
>>>
>>> c(1:10) %>% mean results in a value of 5.5 which is exactly the same 
>>> as the result one obtains using the mean function directly, viz. 
>>> mean(c(1:10)). What is the reason for having two syntactically 
>>> different but semantically identical ways to call a function? Is one 
>>> more efficient than the other? Does one use less memory than the other?
>>>
>>> P.S. Please forgive what might seem to be a question with an obvious 
>>> answer. I am a programmer dinosaur. I have been programming for more 
>>> than 50 years. When I started programming in the 1960s the only pipe 
>>> one spoke about was a bong.
>>>
>>> John
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
>>
> 
> Hello,
> 
> Not a long time ago, there was (very) relevant post to r-devel [1] by 
> Paul Murrell linking to a YouTube video [2].
> 
> [1] https://stat.ethz.ch/pipermail/r-devel/2022-September/081959.html
> [2] https://youtu.be/IMpXB30MP48
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Sorry, I forgot the link to the beginning of that r-devel thread.

https://stat.ethz.ch/pipermail/r-devel/2022-April/081636.html

Rui Barradas


From @h@rt @end|ng |rom d|m@uch||e@c|  Tue Jan  3 20:21:37 2023
From: @h@rt @end|ng |rom d|m@uch||e@c| (Andrew Hart)
Date: Tue, 3 Jan 2023 16:21:37 -0300
Subject: [R] Pipe operator
In-Reply-To: <8E39C1BA-5CCE-4C36-A64E-C6BF6CBA1967@utoronto.ca>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
 <004b01d91f9a$822dbb00$86893100$@gmail.com>
 <8E39C1BA-5CCE-4C36-A64E-C6BF6CBA1967@utoronto.ca>
Message-ID: <7c96c95f-35e3-0fc5-2853-3f3c5db8f291@dim.uchile.cl>

Keep in mind that in thie example you're processing x and placing the 
result back in x (so x must already exist). You can write this a bit 
more cleanly using the -> variant of the assignment operator as follows:

   x |> cos() |> max(pi/4) |> round(3) -> x

Hth,
Andrew.

On 3/01/2023 16:00, Boris Steipe wrote:
> Working off Avi's example - would:
> 
>    x |> cos() |> max(pi/4) |> round(3) |> assign("x", value = _)
> 
> ...be even more intuitive to read? Or are there hidden problems with that?
> 
> 
> 
> Cheers,
> Boris
> 
> 
>> On 2023-01-03, at 12:40, avi.e.gross at gmail.com wrote:
>>
>> John,
>>
>> The topic has indeed been discussed here endlessly but new people still
>> stumble upon it.
>>
>> Until recently, the formal R language did not have a built-in pipe
>> functionality. It was widely used through an assortment of packages and
>> there are quite a few variations on the theme including different
>> implementations.
>>
>> Most existing code does use the operator %>% but there is now a built-in |>
>> operator that is generally faster but is not as easy to use in a few cases.
>>
>> Please forget the use of the word FILE here. Pipes are a form of syntactic
>> sugar that generally is about the FIRST argument to a function. They are NOT
>> meant to be used just for the trivial case you mention where indeed there is
>> an easy way to do things. Yes, they work in such situations. But consider a
>> deeply nested expression like this:
>>
>> Result <- round(max(cos(x), 3.14159/4), 3)
>>
>> There are MANY deeper nested expressions like this commonly used. The above
>> can be written linearly as in
>>
>> Temp1 <- cos(x)
>> Temp2 <- max(Temp1, 3.14159/4)
>> Result <- round(Temp2, 3)
>>
>> Translation, for some variable x, calculate the cosine and take the maximum
>> value of it as compared to pi/4 and round the result to three decimal
>> places. Not an uncommon kind of thing to do and sometimes you can nest such
>> things many layers deep and get hopelessly confused if not done somewhat
>> linearly.
>>
>> What pipes allow is to write this closer to the second way while not seeing
>> or keeping any temporary variables around. The goal is to replace the FIRST
>> argument to a function with whatever resulted as the value of the previous
>> expression. That is often a vector or data.frame or list or any kind of
>> object but can also be fairly complex as in a list of lists of matrices.
>>
>> So you can still start with cos(x) OR you can write this where the x is
>> removed from within and leaves cos() empty:
>>
>> x %>% cos
>> or
>> x |> cos()
>>
>> In the previous version of pipes the parentheses after cos() are optional if
>> there are no additional arguments but the new pipe requires them.
>>
>> So continuing the above, using multiple lines, the pipe looks like:
>>
>> Result <-
>>   x %>%
>>   cos() %>%
>>   max(3.14159/4) %>%
>>   round(3)
>>
>> This gives the same result but is arguably easier for some to read and
>> follow. Nobody forces you to use it and for simple cases, most people don't.
>>
>> There is a grouping of packages called the tidyverse that makes heavy use of
>> pipes routine as they made most or all their functions such that the first
>> argument is the one normally piped to and it can be very handy to write code
>> that says, read in your data into a variable (a data.frame or tibble often)
>> and PIPE IT to a function that renames some columns and PIPE the resulting
>> modified object to a function that retains only selected rows and pipe that
>> to a function that drops some of the columns and pipe that to a function
>> that groups the items or sorts them and pipe that to a function that does a
>> join with another object or generates a report or so many other things.
>>
>> So the real answer is that piping is another WAY of doing things from a
>> programmers perspective. Underneath it all, it is mostly syntactic sugar and
>> the interpreter rearranges your code and performs the steps in what seems
>> like a different order at times. Generally, you do not need to care.
>>
>>
>>
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
>> Sent: Tuesday, January 3, 2023 11:49 AM
>> To: 'R-help Mailing List' <r-help at r-project.org>
>> Subject: [R] Pipe operator
>>
>> I am trying to understand the reason for existence of the pipe operator,
>> %>%, and when one should use it. It is my understanding that the operator
>> sends the file to the left of the operator to the function immediately to
>> the right of the operator:
>>
>> c(1:10) %>% mean results in a value of 5.5 which is exactly the same as the
>> result one obtains using the mean function directly, viz. mean(c(1:10)).
>> What is the reason for having two syntactically different but semantically
>> identical ways to call a function? Is one more efficient than the other?
>> Does one use less memory than the other?
>>
>> P.S. Please forgive what might seem to be a question with an obvious answer.
>> I am a programmer dinosaur. I have been programming for more than 50 years.
>> When I started programming in the 1960s the only pipe one spoke about was a
>> bong.
>>
>> John
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> 
> --
> Boris Steipe MD, PhD
> 
> Professor em.
> Department of Biochemistry
> Temerty Faculty of Medicine
> University of Toronto
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


From |v@n@c@|@ndr@ @end|ng |rom |e|z@@de  Tue Jan  3 17:58:56 2023
From: |v@n@c@|@ndr@ @end|ng |rom |e|z@@de (Ivan Calandra)
Date: Tue, 3 Jan 2023 17:58:56 +0100
Subject: [R] Pipe operator
In-Reply-To: <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <0a7e860f-5f8b-53eb-8ecf-9378960e4e78@leiza.de>

Dear John,

some more experienced users might give you a different and more helpful 
answer, but I was not really convinced by the pipe operator until I 
tried it out, for the same reasons as you.

In my opinion, the pipe operator is there only to improve the 
readability of your code. Think about e.g. format()ing or round()ing the 
example you gave: you start having a lot of imbricated functions and it 
becomes difficult to read (because of lots of brackets, commas and so 
on, and it gets worse when adding arguments). The pipe operator makes it 
clearer.
An alternative to the pipe operator with good readability is creating 
intermediary objects, but you create a lot of useless objects. Depending 
on the size of the objects, it could become problematic.

Somehow, I just ended up paraphrasing Wickham & Grolemund 
(https://r4ds.had.co.nz/pipes.html); they explain the advantages much 
better than I can.

In any case, once I started using it, I realized that all the pros for 
the pipe operator are real and now I like using it!

Best,
Ivan




	*LEIBNIZ-ZENTRUM*
*F?R ARCH?OLOGIE*

*Dr. Ivan CALANDRA*
**Imaging Lab

MONREPOS Archaeological Research Centre, Schloss Monrepos
56567 Neuwied, Germany

T: +49 2631 9772 243
T: +49 6131 8885 543
ivan.calandra at leiza.de

leiza.de <http://www.leiza.de/>
<http://www.leiza.de/>
ORCID <https://orcid.org/0000-0003-3816-6359>
ResearchGate
<https://www.researchgate.net/profile/Ivan_Calandra>

LEIZA is a foundation under public law of the State of 
Rhineland-Palatinate and the City of Mainz. Its headquarters are in 
Mainz. Supervision is carried out by the Ministry of Science and Health 
of the State of Rhineland-Palatinate. LEIZA is a research museum of the 
Leibniz Association.

On 03/01/2023 17:48, Sorkin, John wrote:
> I am trying to understand the reason for existence of the pipe operator, %>%, and when one should use it. It is my understanding that the operator sends the file to the left of the operator to the function immediately to the right of the operator:
>
> c(1:10) %>% mean results in a value of 5.5 which is exactly the same as the result one obtains using the mean function directly, viz. mean(c(1:10)). What is the reason for having two syntactically different but semantically identical ways to call a function? Is one more efficient than the other? Does one use less memory than the other?
>
> P.S. Please forgive what might seem to be a question with an obvious answer. I am a programmer dinosaur. I have been programming for more than 50 years. When I started programming in the 1960s the only pipe one spoke about was a bong.
>
> John
>
> ______________________________________________
> R-help at r-project.org  mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guidehttp://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Jan  3 23:32:17 2023
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 3 Jan 2023 23:32:17 +0100
Subject: [R] Pipe operator
In-Reply-To: <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <ad6cd2c2-8dcb-9863-c5c9-93d20e6f42a3@statistik.tu-dortmund.de>

R is a functional language, hence the pipe operator is not needed.
Also it makes the code unreadable as it is less obvious how a call stack 
looks like and what the arguments to the function calls are.

It is relevant for a shell for piping text streams.

If people cannot live without the pipe operator (and I wonder why you 
want to add a level of complexity, as it is more obfuscated what the 
actual function calls are), please use R's internal one, as it is known 
by the parser and hence debugging etc is better integrated.

Best,
Uwe Ligges



On 03.01.2023 17:48, Sorkin, John wrote:
> I am trying to understand the reason for existence of the pipe operator, %>%, and when one should use it. It is my understanding that the operator sends the file to the left of the operator to the function immediately to the right of the operator:
> 
> c(1:10) %>% mean results in a value of 5.5 which is exactly the same as the result one obtains using the mean function directly, viz. mean(c(1:10)). What is the reason for having two syntactically different but semantically identical ways to call a function? Is one more efficient than the other? Does one use less memory than the other?
> 
> P.S. Please forgive what might seem to be a question with an obvious answer. I am a programmer dinosaur. I have been programming for more than 50 years. When I started programming in the 1960s the only pipe one spoke about was a bong.
> 
> John
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jan  4 00:10:50 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Tue, 03 Jan 2023 15:10:50 -0800
Subject: [R] Pipe operator
In-Reply-To: <ad6cd2c2-8dcb-9863-c5c9-93d20e6f42a3@statistik.tu-dortmund.de>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
 <ad6cd2c2-8dcb-9863-c5c9-93d20e6f42a3@statistik.tu-dortmund.de>
Message-ID: <E9FB3D00-2347-4826-841E-5FACBBE7C063@dcn.davis.ca.us>

> R is a functional language, hence the pipe operator is not needed.

Not factual... just opinion. Please be conscious of your biases and preface opinion with a disclaimer.

I heard identical complaints from embedded assembly language programmers when C became all the rage... "don't need another way to say the same thing."

>Also it makes the code unreadable as it is less obvious how a call stack looks like and what the arguments to the function calls are.

How can it make the code unreadable if there is a 1:1 mapping between nested function calls and a pipe?

If _you_ don't like pipes, that is your opinion, but that statement is factually incorrect... both the parser equivalence and the popularity of the syntax prove you wrong. Many people find it more readable than nested prefix notation.

>It is relevant for a shell for piping text streams.

So you are willing to allow that it makes sense in shell script but not in R script? This is not a self-consistent position. The same expressive principles can apply in both shell and in R.

On January 3, 2023 2:32:17 PM PST, Uwe Ligges <ligges at statistik.tu-dortmund.de> wrote:
>R is a functional language, hence the pipe operator is not needed.
>Also it makes the code unreadable as it is less obvious how a call stack looks like and what the arguments to the function calls are.
>
>It is relevant for a shell for piping text streams.
>
>If people cannot live without the pipe operator (and I wonder why you want to add a level of complexity, as it is more obfuscated what the actual function calls are), please use R's internal one, as it is known by the parser and hence debugging etc is better integrated.
>
>Best,
>Uwe Ligges
>
>
>
>On 03.01.2023 17:48, Sorkin, John wrote:
>> I am trying to understand the reason for existence of the pipe operator, %>%, and when one should use it. It is my understanding that the operator sends the file to the left of the operator to the function immediately to the right of the operator:
>> 
>> c(1:10) %>% mean results in a value of 5.5 which is exactly the same as the result one obtains using the mean function directly, viz. mean(c(1:10)). What is the reason for having two syntactically different but semantically identical ways to call a function? Is one more efficient than the other? Does one use less memory than the other?
>> 
>> P.S. Please forgive what might seem to be a question with an obvious answer. I am a programmer dinosaur. I have been programming for more than 50 years. When I started programming in the 1960s the only pipe one spoke about was a bong.
>> 
>> John
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Wed Jan  4 01:05:01 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Wed, 4 Jan 2023 00:05:01 +0000
Subject: [R] Pipe operator
In-Reply-To: <C57F1CA3-8A75-4929-AAAB-B09229D86B60@dcn.davis.ca.us>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
 <BN6PR2201MB1553BE35AD212F0C0E07874ACFF49@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <MW4PR03MB63630F7F3EA776AB218EFD2AE2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
 <C57F1CA3-8A75-4929-AAAB-B09229D86B60@dcn.davis.ca.us>
Message-ID: <MW4PR03MB636330816A139BCED751CD7CE2F49@MW4PR03MB6363.namprd03.prod.outlook.com>

Jeff,
Thank you for contributing important information to this thread. 

________________________________________
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Sent: Tuesday, January 3, 2023 2:07 PM
To: r-help at r-project.org; Sorkin, John; Ebert,Timothy Aaron; 'R-help Mailing List'
Subject: Re: [R] Pipe operator

The other responses here have been very good, but I felt it necessary to point out that the concept of a pipe originated around when you started programming [1] (text based). It did take awhile for it to migrate into programming languages such as OCaml, but Powershell makes extensive use of (object-based) pipes.

Re memory use: not so much. Variables are small... it is the data they point to that is large, and it is not possible to analyze data without storing it somewhere. But when the variables are numerous they can interfere with our ability to understand the program... using pipes lets us focus on results obtained after several steps so fewer intermediate values clutter the variable space.

Re speed: the magrittr pipe (%>%) is much slower than the built-in pipe at coordinating the transfer of data from left to right, but that is not usually significant compared to the computation speed on the actual data in the functions.

 [1] https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fen.m.wikipedia.org%2Fwiki%2FPipeline_&data=05%7C01%7Cjsorkin%40som.umaryland.edu%7C94e1ec7b93c642286aae08daedbdc79f%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638083696601759531%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=gdooVKcK8iDNN0X6ZaYmDNk9pQ1Pe%2BgQiUGioPGB%2Fps%3D&reserved=0(Unix)#:~:text=The%20concept%20of%20pipelines%20was,Ritchie%20%26%20Thompson%2C%201974).

On January 3, 2023 9:13:22 AM PST, "Sorkin, John" <jsorkin at som.umaryland.edu> wrote:
>Tim,
>
>Thank you for your reply. I did not know about the |> operator. Do both %>% and |> work in base R?
>
>You suggested that the pipe operator can produce code with fewer variables. May I ask you to send a short example in which the pipe operator saves variables. Does said saving of variables speed up processing or result in less memory usage?
>
>Thank you,
>John
>
>________________________________________
>From: Ebert,Timothy Aaron <tebert at ufl.edu>
>Sent: Tuesday, January 3, 2023 12:07 PM
>To: Sorkin, John; 'R-help Mailing List'
>Subject: RE: Pipe operator
>
>The pipe shortens code and results in fewer variables because you do not have to save intermediate steps. Once you get used to the idea it is useful. Note that there is also the |> pipe that is part of base R. As far as I know it does the same thing as %>%, or at my level of programing I have not encountered a difference.
>
>Tim
>
>-----Original Message-----
>From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
>Sent: Tuesday, January 3, 2023 11:49 AM
>To: 'R-help Mailing List' <r-help at r-project.org>
>Subject: [R] Pipe operator
>
>[External Email]
>
>I am trying to understand the reason for existence of the pipe operator, %>%, and when one should use it. It is my understanding that the operator sends the file to the left of the operator to the function immediately to the right of the operator:
>
>c(1:10) %>% mean results in a value of 5.5 which is exactly the same as the result one obtains using the mean function directly, viz. mean(c(1:10)). What is the reason for having two syntactically different but semantically identical ways to call a function? Is one more efficient than the other? Does one use less memory than the other?
>
>P.S. Please forgive what might seem to be a question with an obvious answer. I am a programmer dinosaur. I have been programming for more than 50 years. When I started programming in the 1960s the only pipe one spoke about was a bong.
>
>John
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Cjsorkin%40som.umaryland.edu%7C94e1ec7b93c642286aae08daedbdc79f%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638083696601759531%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=jQx8iLm1i%2BQky6NTJ05AmhH6Fb6gJScFuafmEEFs2nM%3D&reserved=0
>PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Cjsorkin%40som.umaryland.edu%7C94e1ec7b93c642286aae08daedbdc79f%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638083696601759531%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=jHwquXRkVY6hOIB7dKo4jcEiuA%2F5lz%2FiFeAle2CrBbY%3D&reserved=0
>and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Cjsorkin%40som.umaryland.edu%7C94e1ec7b93c642286aae08daedbdc79f%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638083696601759531%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=jQx8iLm1i%2BQky6NTJ05AmhH6Fb6gJScFuafmEEFs2nM%3D&reserved=0
>PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Cjsorkin%40som.umaryland.edu%7C94e1ec7b93c642286aae08daedbdc79f%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638083696601759531%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=jHwquXRkVY6hOIB7dKo4jcEiuA%2F5lz%2FiFeAle2CrBbY%3D&reserved=0
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.


From r@oknz @end|ng |rom gm@||@com  Wed Jan  4 01:37:46 2023
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Wed, 4 Jan 2023 13:37:46 +1300
Subject: [R] Pipe operator
In-Reply-To: <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <CABcYAdKCwViTa2+kdw-rOcXLWCtx_iydo4P9jyfH4OMdFB-XEQ@mail.gmail.com>

The simplest and best answer is "fashion".
In FSharp,
> (|>);;
val it: ('a -> ('a -> 'b) -> 'b)
The ability to turn f x y into y |> f x
makes perfect sense in a programming language
where Currying (representing a function of n
arguments as a function of 1 argument that
returns a function of n-1 arguments, similarly
represented) is a way of life.  It can result
in code that is more readable.  And it is
pretty much unavoidable:
let x |> f = f x
is definable in the language.

In programming languages like Erlang and R,
where Currying is *not* a way of life, the
matter is otherwise.

Really, it's all about whether you talk like Luke
or like Yoda talk, it's not about what you say or
efficiency or anything but perceived readability.


On Wed, 4 Jan 2023 at 05:49, Sorkin, John <jsorkin at som.umaryland.edu> wrote:

> I am trying to understand the reason for existence of the pipe operator,
> %>%, and when one should use it. It is my understanding that the operator
> sends the file to the left of the operator to the function immediately to
> the right of the operator:
>
> c(1:10) %>% mean results in a value of 5.5 which is exactly the same as
> the result one obtains using the mean function directly, viz.
> mean(c(1:10)). What is the reason for having two syntactically different
> but semantically identical ways to call a function? Is one more efficient
> than the other? Does one use less memory than the other?
>
> P.S. Please forgive what might seem to be a question with an obvious
> answer. I am a programmer dinosaur. I have been programming for more than
> 50 years. When I started programming in the 1960s the only pipe one spoke
> about was a bong.
>
> John
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @vi@e@gross m@iii@g oii gm@ii@com  Wed Jan  4 01:44:46 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Tue, 3 Jan 2023 19:44:46 -0500
Subject: [R] Pipe operator
In-Reply-To: <8E39C1BA-5CCE-4C36-A64E-C6BF6CBA1967@utoronto.ca>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
 <004b01d91f9a$822dbb00$86893100$@gmail.com>
 <8E39C1BA-5CCE-4C36-A64E-C6BF6CBA1967@utoronto.ca>
Message-ID: <006f01d91fd5$be848030$3b8d8090$@gmail.com>

Boris,

There are MANY variations possible and yours does not seem that common or
useful albeit perfectly useful.

I am not talking about making it a one-liner, albeit I find the multi-line
version more useful.

The pipeline concept seems sort of atomic in the following sense. R allows
several in-line variants of assignment besides something like:

    Assign("string", value)

And, variations on the above that are more useful when making multiple
assignments in a loop or using other environments.

What is more common is:

    Name <- Expression

And of course occasionally:

    Expression -> Name

So back to pipelines, you have two perfectly valid ways to do a pipeline and
assign the result. I showed a version like:

Name <-
    Variable |>
    Pipeline.item(...) |>
    ... |>
    Pipeline.item(...)


But you can equally well assign it at the end:

    Variable |>
    Pipeline.item(...) |>
    ... |>
    Pipeline.item(...) -> Name


I think a more valid use of assign is in mid-pipeline as one way to save an
intermediate result in a variable or perhaps in another environment, such as
may be useful when debugging:

Name <-
    Variable |>
    Pipeline.item(...) |>
    assign("temp1", _) |>
    ... |>
    Pipeline.item(...)

This works because assign(), like print() also returns a copy of the
argument that can be passed along the pipeline and thus captured for a side
effect. When done debugging, removing some lines makes it continue working
seamlessly.

BTW, your example does something I am not sure you intended:

  x |> cos() |> max(pi/4) |> round(3) |> assign("x", value = _)

I prefer showing it like this:

     x |> 
    cos() |> 
    max(pi/4) |> 
    round(3) |> 
    assign("x", value = _)

Did you notice you changed "x" by assigning a new value to the one you
started with? That is perfectly legal but may not have been intended.

And, yes, for completeness, there are two more assignment operators I
generally have no use for of <<- and ->> that work in a global sense.

And for even more completeness you can also use the operators above like
this:

> z = `<-`("x", 7)
> z
[1] 7
> x
[1] 7

For even more completeness, the example we are using can use the above
notation with a silly twist. Placing the results in z instead, I find the
new pipe INSISTS _ can only be used with a named argument. Duh, `<-` does
not have named arguments, just positional. So I see any valid name is just
ignored and the following works!

x |> cos() |> max(pi/4) |> round(3) |> `<-`("z", any.identifier = _)

And, frankly, many functions that need the pipe to feed a second or later
position can easily be changed to use the first argument. If you feel the
need to use "assign" make this function before using the pipeline:

assignyx <- function(x, y) assign(y, x)

Then your code can save a variable without an underscore and keyword:

x |> cos() |> max(pi/4) |> round(3) |> assignyx("x")

Or use the new lambda function somewhat designed for this case use which I
find a bit ugly but it is a matter of taste.

But to end this, there is no reason to make things complex in situations
like this. Just use a simple assignment pre or post as meets your needs.





-----Original Message-----
From: Boris Steipe <boris.steipe at utoronto.ca> 
Sent: Tuesday, January 3, 2023 2:01 PM
To: R-help Mailing List <r-help at r-project.org>
Cc: avi.e.gross at gmail.com
Subject: Re: [R] Pipe operator

Working off Avi's example - would:

  x |> cos() |> max(pi/4) |> round(3) |> assign("x", value = _)

...be even more intuitive to read? Or are there hidden problems with that?



Cheers,
Boris


> On 2023-01-03, at 12:40, avi.e.gross at gmail.com wrote:
> 
> John,
> 
> The topic has indeed been discussed here endlessly but new people 
> still stumble upon it.
> 
> Until recently, the formal R language did not have a built-in pipe 
> functionality. It was widely used through an assortment of packages 
> and there are quite a few variations on the theme including different 
> implementations.
> 
> Most existing code does use the operator %>% but there is now a 
> built-in |> operator that is generally faster but is not as easy to use in
a few cases.
> 
> Please forget the use of the word FILE here. Pipes are a form of 
> syntactic sugar that generally is about the FIRST argument to a 
> function. They are NOT meant to be used just for the trivial case you 
> mention where indeed there is an easy way to do things. Yes, they work 
> in such situations. But consider a deeply nested expression like this:
> 
> Result <- round(max(cos(x), 3.14159/4), 3)
> 
> There are MANY deeper nested expressions like this commonly used. The 
> above can be written linearly as in
> 
> Temp1 <- cos(x)
> Temp2 <- max(Temp1, 3.14159/4)
> Result <- round(Temp2, 3)
> 
> Translation, for some variable x, calculate the cosine and take the 
> maximum value of it as compared to pi/4 and round the result to three 
> decimal places. Not an uncommon kind of thing to do and sometimes you 
> can nest such things many layers deep and get hopelessly confused if 
> not done somewhat linearly.
> 
> What pipes allow is to write this closer to the second way while not 
> seeing or keeping any temporary variables around. The goal is to 
> replace the FIRST argument to a function with whatever resulted as the 
> value of the previous expression. That is often a vector or data.frame 
> or list or any kind of object but can also be fairly complex as in a list
of lists of matrices.
> 
> So you can still start with cos(x) OR you can write this where the x 
> is removed from within and leaves cos() empty:
> 
> x %>% cos
> or
> x |> cos()
> 
> In the previous version of pipes the parentheses after cos() are 
> optional if there are no additional arguments but the new pipe requires
them.
> 
> So continuing the above, using multiple lines, the pipe looks like:
> 
> Result <-
>  x %>%
>  cos() %>%
>  max(3.14159/4) %>%
>  round(3)
> 
> This gives the same result but is arguably easier for some to read and 
> follow. Nobody forces you to use it and for simple cases, most people
don't.
> 
> There is a grouping of packages called the tidyverse that makes heavy 
> use of pipes routine as they made most or all their functions such 
> that the first argument is the one normally piped to and it can be 
> very handy to write code that says, read in your data into a variable 
> (a data.frame or tibble often) and PIPE IT to a function that renames 
> some columns and PIPE the resulting modified object to a function that 
> retains only selected rows and pipe that to a function that drops some 
> of the columns and pipe that to a function that groups the items or 
> sorts them and pipe that to a function that does a join with another
object or generates a report or so many other things.
> 
> So the real answer is that piping is another WAY of doing things from 
> a programmers perspective. Underneath it all, it is mostly syntactic 
> sugar and the interpreter rearranges your code and performs the steps 
> in what seems like a different order at times. Generally, you do not need
to care.
> 
> 
> 
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
> Sent: Tuesday, January 3, 2023 11:49 AM
> To: 'R-help Mailing List' <r-help at r-project.org>
> Subject: [R] Pipe operator
> 
> I am trying to understand the reason for existence of the pipe 
> operator, %>%, and when one should use it. It is my understanding that 
> the operator sends the file to the left of the operator to the 
> function immediately to the right of the operator:
> 
> c(1:10) %>% mean results in a value of 5.5 which is exactly the same 
> as the result one obtains using the mean function directly, viz.
mean(c(1:10)).
> What is the reason for having two syntactically different but 
> semantically identical ways to call a function? Is one more efficient than
the other?
> Does one use less memory than the other? 
> 
> P.S. Please forgive what might seem to be a question with an obvious
answer.
> I am a programmer dinosaur. I have been programming for more than 50
years.
> When I started programming in the 1960s the only pipe one spoke about 
> was a bong.
> 
> John
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


--
Boris Steipe MD, PhD

Professor em.
Department of Biochemistry
Temerty Faculty of Medicine
University of Toronto


From r@oknz @end|ng |rom gm@||@com  Wed Jan  4 01:50:11 2023
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Wed, 4 Jan 2023 13:50:11 +1300
Subject: [R] Pipe operator
In-Reply-To: <MW4PR03MB63630F7F3EA776AB218EFD2AE2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
 <BN6PR2201MB1553BE35AD212F0C0E07874ACFF49@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <MW4PR03MB63630F7F3EA776AB218EFD2AE2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <CABcYAdLiqbfTJzZrDerjh2X18unwCf1fSYYdV01qguY91_X5zw@mail.gmail.com>

"Does saving of variables speed up processing" no
"or save memory" no.
The manual is quite explicit:
> ?"|>"
...
Currently, pipe operations are implemented as syntax
transformations.  So an expression written as 'x |> f(y)' is
parsed as 'f(x, y)'.

Strictly speaking, using |> *doesn't* save any variables.
x |> f(y) |> g() |> h(1,z)
simply is h(g(f(x,y)),1,z) in which precisely the same
variables appear.  All that changes is the order in which
you write the function names; the order in which things are
evaluated does not change (the manual is explicit about
that too).

I personally find |> in R extremely confusing because
in x |> f(y) |> g() |> h(1,z)
it LOOKS as if there are calls to f(f), to g(), and to
h(1,z) and in Haskell or F# that would be true, but in
R the expressions f(y), g(), and h(1,z) are NOT
evaluated.  |> is and has to be special syntax with a
very restricted right-hand side.

Eliminating well-chosen variables can of course make
code much less readable.  It's funny how my code seems
prettier using |> but other people's code seems hopelessly
obscure...


On Wed, 4 Jan 2023 at 06:19, Sorkin, John <jsorkin at som.umaryland.edu> wrote:

> Tim,
>
> Thank you for your reply. I did not know about the |> operator. Do both
> %>% and |> work in base R?
>
> You suggested that the pipe operator can produce code with fewer
> variables. May I ask you to send a short example in which the pipe operator
> saves variables. Does said saving of variables speed up processing or
> result in less memory usage?
>
> Thank you,
> John
>
> ________________________________________
> From: Ebert,Timothy Aaron <tebert at ufl.edu>
> Sent: Tuesday, January 3, 2023 12:07 PM
> To: Sorkin, John; 'R-help Mailing List'
> Subject: RE: Pipe operator
>
> The pipe shortens code and results in fewer variables because you do not
> have to save intermediate steps. Once you get used to the idea it is
> useful. Note that there is also the |> pipe that is part of base R. As far
> as I know it does the same thing as %>%, or at my level of programing I
> have not encountered a difference.
>
> Tim
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
> Sent: Tuesday, January 3, 2023 11:49 AM
> To: 'R-help Mailing List' <r-help at r-project.org>
> Subject: [R] Pipe operator
>
> [External Email]
>
> I am trying to understand the reason for existence of the pipe operator,
> %>%, and when one should use it. It is my understanding that the operator
> sends the file to the left of the operator to the function immediately to
> the right of the operator:
>
> c(1:10) %>% mean results in a value of 5.5 which is exactly the same as
> the result one obtains using the mean function directly, viz.
> mean(c(1:10)). What is the reason for having two syntactically different
> but semantically identical ways to call a function? Is one more efficient
> than the other? Does one use less memory than the other?
>
> P.S. Please forgive what might seem to be a question with an obvious
> answer. I am a programmer dinosaur. I have been programming for more than
> 50 years. When I started programming in the 1960s the only pipe one spoke
> about was a bong.
>
> John
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Cjsorkin%40som.umaryland.edu%7Cdc0d677272114cf6ba2808daedad0ec5%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638083624783034240%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=7dDMSg%2FmPQ5xXP6zu6MWLmARdtdlrYWb3mXPZQj0La0%3D&reserved=0
> PLEASE do read the posting guide
> https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Cjsorkin%40som.umaryland.edu%7Cdc0d677272114cf6ba2808daedad0ec5%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638083624783034240%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=l5BZyjup%2Bho%2FijE1zQMxb5JE3F5VfKBZpUKHYW4k4Fg%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From new@ @end|ng |rom m||@ng|@c|er@com  Wed Jan  4 05:45:56 2023
From: new@ @end|ng |rom m||@ng|@c|er@com (Milan Glacier)
Date: Tue, 3 Jan 2023 23:45:56 -0500
Subject: [R] Pipe operator
In-Reply-To: <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <20230104044543.v37ctmwpvajd55wk@zoho.com>

With 50 years of programming experience, just think about how useful
pipe operator is in shell scripting. The output of previous call becomes
the input of next call... Genious idea from our beloved unix
conversion...


On 01/03/23 16:48, Sorkin, John wrote:
>I am trying to understand the reason for existence of the pipe operator, %>%, and when one should use it. It is my understanding that the operator sends the file to the left of the operator to the function immediately to the right of the operator:
>
>c(1:10) %>% mean results in a value of 5.5 which is exactly the same as the result one obtains using the mean function directly, viz. mean(c(1:10)). What is the reason for having two syntactically different but semantically identical ways to call a function? Is one more efficient than the other? Does one use less memory than the other?
>
>P.S. Please forgive what might seem to be a question with an obvious answer. I am a programmer dinosaur. I have been programming for more than 50 years. When I started programming in the 1960s the only pipe one spoke about was a bong.
>
>John


From r@oknz @end|ng |rom gm@||@com  Wed Jan  4 07:55:45 2023
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Wed, 4 Jan 2023 19:55:45 +1300
Subject: [R] Pipe operator
In-Reply-To: <20230104044543.v37ctmwpvajd55wk@zoho.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
 <20230104044543.v37ctmwpvajd55wk@zoho.com>
Message-ID: <CABcYAdJL8Whk9c9i-hWbySyqeS8-kSpFn0reBHYz_HHJn4SW0g@mail.gmail.com>

This is both true and misleading.
The shell pipe operation came from functional
programming.  In fact the shell pipe operation
is NOT "flip apply", which is what |> is, but
it is functional composition.  That is
<in command = command(in)
command >out = let out = command
cmd1 | cmd2 = \x.cmd2(cmd1(x)).

Pragmatically, the Unix shell pipe operator does
something very important, which |> (and even
functional composition doesn't in F#):
<in cmd1 | cmd2 > out *interleaves* the computation
of cmd1 and cmd2, streaming the data.  But in R,
x |> f() |> g()
is by definition g(f(x)), and if g needs the value
of its argument, the *whole* of f(x) is evaluated
before g resumes.  This is much closer to what the
pipe syntax in the MS-DOS shell did, if I recall
correctly.



On Wed, 4 Jan 2023 at 17:46, Milan Glacier <news at milanglacier.com> wrote:

> With 50 years of programming experience, just think about how useful
> pipe operator is in shell scripting. The output of previous call becomes
> the input of next call... Genious idea from our beloved unix
> conversion...
>
>
> On 01/03/23 16:48, Sorkin, John wrote:
> >I am trying to understand the reason for existence of the pipe operator,
> %>%, and when one should use it. It is my understanding that the operator
> sends the file to the left of the operator to the function immediately to
> the right of the operator:
> >
> >c(1:10) %>% mean results in a value of 5.5 which is exactly the same as
> the result one obtains using the mean function directly, viz.
> mean(c(1:10)). What is the reason for having two syntactically different
> but semantically identical ways to call a function? Is one more efficient
> than the other? Does one use less memory than the other?
> >
> >P.S. Please forgive what might seem to be a question with an obvious
> answer. I am a programmer dinosaur. I have been programming for more than
> 50 years. When I started programming in the 1960s the only pipe one spoke
> about was a bong.
> >
> >John
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |v@n@c@|@ndr@ @end|ng |rom |e|z@@de  Wed Jan  4 08:20:50 2023
From: |v@n@c@|@ndr@ @end|ng |rom |e|z@@de (Ivan Calandra)
Date: Wed, 4 Jan 2023 08:20:50 +0100
Subject: [R] Pipe operator
In-Reply-To: <004d01d91fa2$01931640$04b942c0$@gmail.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
 <BN6PR2201MB1553BE35AD212F0C0E07874ACFF49@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <004d01d91fa2$01931640$04b942c0$@gmail.com>
Message-ID: <53cf54ed-43d4-fa66-f816-0080802b388d@leiza.de>

Maybe I missed it in the whole discussion, but since R 4.2.0 the base R 
pipe operator also has a placeholder '_' to specify where the result of 
the left-hand side should be used in the right-hand side (see 
https://stat.ethz.ch/pipermail/r-announce/2022/000683.html).

So the only difference in usage between >%> and |> is that the 
placeholder '.' of the magrittr pipe can appear several times.
It would also be nice if R/Rstudio had a default keyboard shortcut to 
insert the base R pipe like for the magrittr pipe (Ctrl+Shift+M or 
Cmd+Shift+M). The vertical bar is not always easy to find (especially 
when you switch between Mac, Windows and different languages).

Ivan


On 03/01/2023 19:34, avi.e.gross at gmail.com wrote:

> Tim,
>
> There are differences and this one can be huge.
>
> The other pipe operators let you pass the current object to a later argument
> instead of the first by using a period to represent where to put it. The new
> one has a harder albeit flexible method by creating an anonymous function.
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Ebert,Timothy Aaron
> Sent: Tuesday, January 3, 2023 12:08 PM
> To: Sorkin, John <jsorkin at som.umaryland.edu>; 'R-help Mailing List'
> <r-help at r-project.org>
> Subject: Re: [R] Pipe operator
>
> The pipe shortens code and results in fewer variables because you do not
> have to save intermediate steps. Once you get used to the idea it is useful.
> Note that there is also the |> pipe that is part of base R. As far as I know
> it does the same thing as %>%, or at my level of programing I have not
> encountered a difference.
>
> Tim
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
> Sent: Tuesday, January 3, 2023 11:49 AM
> To: 'R-help Mailing List' <r-help at r-project.org>
> Subject: [R] Pipe operator
>
> [External Email]
>
> I am trying to understand the reason for existence of the pipe operator,
> %>%, and when one should use it. It is my understanding that the operator
> sends the file to the left of the operator to the function immediately to
> the right of the operator:
>
> c(1:10) %>% mean results in a value of 5.5 which is exactly the same as the
> result one obtains using the mean function directly, viz. mean(c(1:10)).
> What is the reason for having two syntactically different but semantically
> identical ways to call a function? Is one more efficient than the other?
> Does one use less memory than the other?
>
> P.S. Please forgive what might seem to be a question with an obvious answer.
> I am a programmer dinosaur. I have been programming for more than 50 years.
> When I started programming in the 1960s the only pipe one spoke about was a
> bong.
>
> John
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.
> ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C73edce5d4
> e084253a39008daedaa653f%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C6380836
> 13362415015%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJB
> TiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=fV9Ca3OAleDX%2BwuPJIONYStrA
> daQhXTsq61jh2pLtDY%3D&reserved=0
> PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-proje
> ct.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C73edce5d4e0842
> 53a39008daedaa653f%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638083613362
> 415015%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6I
> k1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=YUnV9kE1RcbB3BwM5gKwKwc3qNKhIVNF
> txOxKmpbGrQ%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From r@oknz @end|ng |rom gm@||@com  Wed Jan  4 09:19:07 2023
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Wed, 4 Jan 2023 21:19:07 +1300
Subject: [R] R Certification
In-Reply-To: <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
Message-ID: <CABcYAdKZq2qg4xVGzKVDfvRyxekJaCnDYuTexVvBNbbTbm6Ucw@mail.gmail.com>

I note that Java, for example, has changed a LOT and
a certificate from, say, 10 years ago, wouldn't impress
me much today.  The same can be said of C#, and of R.
So the question would be, "what VALUE would a certificate
about R provide?"

Well, for one thing, it would be a certificate of
proficiency in the core R programming language and
the contents of the 'base' and 'stats' packages.
But there is a huge number of packages serving a
huge number of needs.  If, for example, I needed
someone who understood how to exchange data between
R and a GIS system like GRASS, how to do spatial
analysis with R, and how to produce a report with
knitr, that's at least three packages that would NOT
be covered by an 'R' certificate.  And honestly, if
I were in the happy position of being able to hire a
data analyst for the region-scale data I have in
mind, I wouldn't *care* whether they used R, SciPy,
or Julia.

So if you want to show potential employers a
certificate to persuade them that you know something
useful, I suggest that you ask some of them what
they would like such a certificate to be *about*.
It would not surprise me if they said "how about a
degree in statistics, or in data science, or in
data visualisation" or something of the sort.



On Mon, 2 Jan 2023 at 21:33, Mukesh Ghanshyamdas Lekhrajani via R-help <
r-help at r-project.org> wrote:

> Hello R Support Team,
>
>
>
> I want to do R certification, could you help me with the list of
> certificates with their prices so it helps me to register.
>
>
>
> I want to do the certification directly from the governing body
> "r-project.org" and not from any 3rd party.
>
>
>
> Please help.
>
>
>
>
>
>
>
> Mukesh
>
> +91 9819285174
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From mukesh@iekhr@j@@i m@iii@g oii y@hoo@com  Wed Jan  4 10:07:55 2023
From: mukesh@iekhr@j@@i m@iii@g oii y@hoo@com (mukesh@iekhr@j@@i m@iii@g oii y@hoo@com)
Date: Wed, 4 Jan 2023 14:37:55 +0530
Subject: [R] R Certification
In-Reply-To: <CABcYAdKZq2qg4xVGzKVDfvRyxekJaCnDYuTexVvBNbbTbm6Ucw@mail.gmail.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <CABcYAdKZq2qg4xVGzKVDfvRyxekJaCnDYuTexVvBNbbTbm6Ucw@mail.gmail.com>
Message-ID: <00c201d9201c$08c06560$1a413020$@yahoo.com>

Hey Rich, 

 

Out of all the help that I have received so far on my email, this email (below) resolves 95% of my query, the remaining 5% is to justify a few things?.

 

"what VALUE would a certificate

about R provide?"

*	Few of my prospect employers are looking at data analyst with specialization in ?R? so, they want ?R? only, and not SciPy or Julia..
*	They think that a person with ?R? knowledge and another candidate with ?R? knowledge + ?R? Certification will fit the position more.. (Human Mentality Vs. Law Of Fitment) ?

 

proficiency in the core R programming language and

the contents of the 'base' and 'stats' packages.

But there is a huge number of packages serving a

huge number of needs. 

*	In my example it would be ? {abc} is a Certified ?R? Developer With Specialization in ?Package 1? , ?Package 2? and ?Package 3? or ?Stats? set of packages with reporting (Prospect employers love to see certificates of these sorts)

 

I were in the happy position of being able to hire a

data analyst for the region-scale data I have in

mind, I wouldn't *care* whether they used R, SciPy,

or Julia.

*	Few employers want ready stuff, so if they hire someone with Julia, but the employers them selves are using ?R? as their specialization for solutions to their customer, they would prefer to hire someone who already is a champion at ?R? ? such employers will not want to invest in training cost for their employees/candidates.

 

 

 

 

From: Richard O'Keefe <raoknz at gmail.com> 
Sent: Wednesday, January 4, 2023 1:49 PM
To: mukesh.lekhrajani at yahoo.com
Cc: r-help at r-project.org
Subject: Re: [R] R Certification

 

I note that Java, for example, has changed a LOT and

a certificate from, say, 10 years ago, wouldn't impress

me much today.  The same can be said of C#, and of R.

So the question would be, "what VALUE would a certificate

about R provide?"

 

Well, for one thing, it would be a certificate of

proficiency in the core R programming language and

the contents of the 'base' and 'stats' packages.

But there is a huge number of packages serving a

huge number of needs.  If, for example, I needed

someone who understood how to exchange data between

R and a GIS system like GRASS, how to do spatial

analysis with R, and how to produce a report with

knitr, that's at least three packages that would NOT

be covered by an 'R' certificate.  And honestly, if

I were in the happy position of being able to hire a

data analyst for the region-scale data I have in

mind, I wouldn't *care* whether they used R, SciPy,

or Julia.

 

So if you want to show potential employers a

certificate to persuade them that you know something

useful, I suggest that you ask some of them what

they would like such a certificate to be *about*.

It would not surprise me if they said "how about a

degree in statistics, or in data science, or in

data visualisation" or something of the sort.

 

 

 

On Mon, 2 Jan 2023 at 21:33, Mukesh Ghanshyamdas Lekhrajani via R-help <r-help at r-project.org <mailto:r-help at r-project.org> > wrote:

Hello R Support Team,



I want to do R certification, could you help me with the list of
certificates with their prices so it helps me to register.



I want to do the certification directly from the governing body
"r-project.org <http://r-project.org> " and not from any 3rd party.



Please help.







Mukesh

+91 9819285174


        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From cry@n @end|ng |rom b|ngh@mton@edu  Wed Jan  4 16:29:34 2023
From: cry@n @end|ng |rom b|ngh@mton@edu (Christopher Ryan)
Date: Wed, 4 Jan 2023 10:29:34 -0500
Subject: [R] [External Email] Re:  R Certification
In-Reply-To: <00c201d9201c$08c06560$1a413020$@yahoo.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <CABcYAdKZq2qg4xVGzKVDfvRyxekJaCnDYuTexVvBNbbTbm6Ucw@mail.gmail.com>
 <00c201d9201c$08c06560$1a413020$@yahoo.com>
Message-ID: <CAM+rpYndPpgf895U+5PBPBPznh7+GaN97-5k7f8Y9cVGDUAF6w@mail.gmail.com>

Couldn't one just show prospective employers some impressive things
one has done in R? Seems to me that would be more meaningful than any
sort of certificate.

--Chris Ryan

On Wed, Jan 4, 2023 at 4:08 AM Mukesh Ghanshyamdas Lekhrajani via
R-help <r-help at r-project.org> wrote:
>
> Hey Rich,
>
>
>
> Out of all the help that I have received so far on my email, this email (below) resolves 95% of my query, the remaining 5% is to justify a few things?.
>
>
>
> "what VALUE would a certificate
>
> about R provide?"
>
> *       Few of my prospect employers are looking at data analyst with specialization in ?R? so, they want ?R? only, and not SciPy or Julia..
> *       They think that a person with ?R? knowledge and another candidate with ?R? knowledge + ?R? Certification will fit the position more.. (Human Mentality Vs. Law Of Fitment) ?
>
>
>
> proficiency in the core R programming language and
>
> the contents of the 'base' and 'stats' packages.
>
> But there is a huge number of packages serving a
>
> huge number of needs.
>
> *       In my example it would be ? {abc} is a Certified ?R? Developer With Specialization in ?Package 1? , ?Package 2? and ?Package 3? or ?Stats? set of packages with reporting (Prospect employers love to see certificates of these sorts)
>
>
>
> I were in the happy position of being able to hire a
>
> data analyst for the region-scale data I have in
>
> mind, I wouldn't *care* whether they used R, SciPy,
>
> or Julia.
>
> *       Few employers want ready stuff, so if they hire someone with Julia, but the employers them selves are using ?R? as their specialization for solutions to their customer, they would prefer to hire someone who already is a champion at ?R? ? such employers will not want to invest in training cost for their employees/candidates.
>
>
>
>
>
>
>
>
>
> From: Richard O'Keefe <raoknz at gmail.com>
> Sent: Wednesday, January 4, 2023 1:49 PM
> To: mukesh.lekhrajani at yahoo.com
> Cc: r-help at r-project.org
> Subject: Re: [R] R Certification
>
>
>
> I note that Java, for example, has changed a LOT and
>
> a certificate from, say, 10 years ago, wouldn't impress
>
> me much today.  The same can be said of C#, and of R.
>
> So the question would be, "what VALUE would a certificate
>
> about R provide?"
>
>
>
> Well, for one thing, it would be a certificate of
>
> proficiency in the core R programming language and
>
> the contents of the 'base' and 'stats' packages.
>
> But there is a huge number of packages serving a
>
> huge number of needs.  If, for example, I needed
>
> someone who understood how to exchange data between
>
> R and a GIS system like GRASS, how to do spatial
>
> analysis with R, and how to produce a report with
>
> knitr, that's at least three packages that would NOT
>
> be covered by an 'R' certificate.  And honestly, if
>
> I were in the happy position of being able to hire a
>
> data analyst for the region-scale data I have in
>
> mind, I wouldn't *care* whether they used R, SciPy,
>
> or Julia.
>
>
>
> So if you want to show potential employers a
>
> certificate to persuade them that you know something
>
> useful, I suggest that you ask some of them what
>
> they would like such a certificate to be *about*.
>
> It would not surprise me if they said "how about a
>
> degree in statistics, or in data science, or in
>
> data visualisation" or something of the sort.
>
>
>
>
>
>
>
> On Mon, 2 Jan 2023 at 21:33, Mukesh Ghanshyamdas Lekhrajani via R-help <r-help at r-project.org <mailto:r-help at r-project.org> > wrote:
>
> Hello R Support Team,
>
>
>
> I want to do R certification, could you help me with the list of
> certificates with their prices so it helps me to register.
>
>
>
> I want to do the certification directly from the governing body
> "r-project.org <http://r-project.org> " and not from any 3rd party.
>
>
>
> Please help.
>
>
>
>
>
>
>
> Mukesh
>
> +91 9819285174
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From y@ngk@|9999 @end|ng |rom y@hoo@com  Wed Jan  4 17:18:48 2023
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Wed, 4 Jan 2023 16:18:48 +0000 (UTC)
Subject: [R] is it possible to run multiple rmd files together
References: <2132794730.4116158.1672849128376.ref@mail.yahoo.com>
Message-ID: <2132794730.4116158.1672849128376@mail.yahoo.com>

Hi Team,I have multiple rmd files (~50) for difference study report. I did try the source command to run them together, but it seems doesn't work.Is there a way to run those rmd files from one script?Thanks,Kai
	[[alternative HTML version deleted]]


From @nder@@|ex @end|ng |rom gm@||@com  Wed Jan  4 18:31:11 2023
From: @nder@@|ex @end|ng |rom gm@||@com (Anders Alexandersson)
Date: Wed, 4 Jan 2023 12:31:11 -0500
Subject: [R] is it possible to run multiple rmd files together
In-Reply-To: <2132794730.4116158.1672849128376@mail.yahoo.com>
References: <2132794730.4116158.1672849128376.ref@mail.yahoo.com>
 <2132794730.4116158.1672849128376@mail.yahoo.com>
Message-ID: <CAKJpBt+=mnoessTbcqgBxDhdAS4yF6PkAF8iC6AkyeZQ0MCVgw@mail.gmail.com>

Try the bookdown package:

https://bookdown.org/yihui/bookdown/usage.html

On Wed, Jan 4, 2023 at 11:19 AM Kai Yang via R-help <r-help at r-project.org>
wrote:

> Hi Team,I have multiple rmd files (~50) for difference study report. I did
> try the source command to run them together, but it seems doesn't work.Is
> there a way to run those rmd files from one script?Thanks,Kai
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @vi@e@gross m@iii@g oii gm@ii@com  Wed Jan  4 19:59:44 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Wed, 4 Jan 2023 13:59:44 -0500
Subject: [R] Pipe operator
In-Reply-To: <CABcYAdJL8Whk9c9i-hWbySyqeS8-kSpFn0reBHYz_HHJn4SW0g@mail.gmail.com>
References: <02b901d91c6c$6759e2d0$360da870$.ref@yahoo.com>
 <02b901d91c6c$6759e2d0$360da870$@yahoo.com>
 <4B42882F-8DBA-4D3F-8B5E-DF33772052D9@dcn.davis.ca.us>
 <023f01d91ea2$4b1e6a40$e15b3ec0$@yahoo.com>
 <7bf767b8da4744f8932de0d16dfc787b@SRVEXCHCM1302.precheza.cz>
 <026301d91eac$99e5e950$cdb1bbf0$@yahoo.com>
 <CAKZQJMDpo2-GDTxJULgmkJ7Cd3RTr26k+rg20WwWEbYZL+krYQ@mail.gmail.com>
 <047e01d91ed5$577e42a0$067ac7e0$@yahoo.com>
 <MW4PR03MB63630F75F8C75E3448161E00E2F49@MW4PR03MB6363.namprd03.prod.outlook.com>
 <20230104044543.v37ctmwpvajd55wk@zoho.com>
 <CABcYAdJL8Whk9c9i-hWbySyqeS8-kSpFn0reBHYz_HHJn4SW0g@mail.gmail.com>
Message-ID: <004a01d9206e$b59e1d70$20da5850$@gmail.com>

Yes, not every use of a word has the same meaning. The UNIX pipe was in many
ways a very different animal where the PIPE was a very real thing and looked
like a sort of temporary file in the file system with special properties.
Basically it was a fixed-size buffer that effectively was written into by a
process that was paused when the buffer was getting full and allowed to
continue when it was drained by a second process reading from it that also
was similarly managed. It assured many things that a temporary file would
not have supplied including uniqueness and privacy. Later they created a
related animal with persistence called a NAMED PIPE.

So the pipelines we are discussing in R do indeed run very synchronously in
whatever order they need to be run so one finishes producing an output into
an anonymous variable that can then be handed to the next function in the
pipeline. 

If you look at a language like Python or perhaps JavaScript, there are ways
to simulate a relatively asynchronous way to run functions on whatever data
is available from other functions, using ideas like generators and iterators
and more. You can create functions that call other functions just to get one
item such as the next prime number, and do some work and call it again so it
yields just one more value and so on. You can build these in chains so that
lots of functions stay resident in memory and only keep producing data just
in time as needed and perhaps even running on multiple processors in even
more parallelism.

R can possibly add such things and it has elements with things not being
evaluated till needed that can have interesting results and of course it is
possible to spawn additional processes, as with many languages, that are
linked together to run at once, but all such speculation is beyond the
bounds of what operators we call PIPES, such as %>% and |> are doing. It
remains very much syntactic sugar that makes life easier for some and annoys
others.

I note some code I see has people hedging their bets a bit about the missing
first argument. They harmlessly keep the first argument and call it a period
as in:
mutate(mydata, ...) %>%
    filter( ., ...) %>%
    group_by( ., ...) %>%
    summarize( ., ...)


In the above, "..." means fill it in and not an alternate meaning, and the
point is the first argument is a period which is replaced by the
passed-along object but that would have been done without it by default. It
remains a reminder that there still is that first argument and I guess it
could be helpful in some ways too and avoids some potential confusion if
others read your code and look up a man page and understand what the second
and subsequent arguments match up to.


-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Richard O'Keefe
Sent: Wednesday, January 4, 2023 1:56 AM
To: Milan Glacier <news at milanglacier.com>
Cc: R-help Mailing List <r-help at r-project.org>
Subject: Re: [R] Pipe operator

This is both true and misleading.
The shell pipe operation came from functional programming.  In fact the
shell pipe operation is NOT "flip apply", which is what |> is, but it is
functional composition.  That is <in command = command(in) command >out =
let out = command
cmd1 | cmd2 = \x.cmd2(cmd1(x)).

Pragmatically, the Unix shell pipe operator does something very important,
which |> (and even functional composition doesn't in F#):
<in cmd1 | cmd2 > out *interleaves* the computation of cmd1 and cmd2,
streaming the data.  But in R, x |> f() |> g() is by definition g(f(x)), and
if g needs the value of its argument, the *whole* of f(x) is evaluated
before g resumes.  This is much closer to what the pipe syntax in the MS-DOS
shell did, if I recall correctly.



On Wed, 4 Jan 2023 at 17:46, Milan Glacier <news at milanglacier.com> wrote:

> With 50 years of programming experience, just think about how useful 
> pipe operator is in shell scripting. The output of previous call 
> becomes the input of next call... Genious idea from our beloved unix 
> conversion...
>
>
> On 01/03/23 16:48, Sorkin, John wrote:
> >I am trying to understand the reason for existence of the pipe 
> >operator,
> %>%, and when one should use it. It is my understanding that the 
> operator sends the file to the left of the operator to the function 
> immediately to the right of the operator:
> >
> >c(1:10) %>% mean results in a value of 5.5 which is exactly the same 
> >as
> the result one obtains using the mean function directly, viz.
> mean(c(1:10)). What is the reason for having two syntactically 
> different but semantically identical ways to call a function? Is one 
> more efficient than the other? Does one use less memory than the other?
> >
> >P.S. Please forgive what might seem to be a question with an obvious
> answer. I am a programmer dinosaur. I have been programming for more 
> than
> 50 years. When I started programming in the 1960s the only pipe one 
> spoke about was a bong.
> >
> >John
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From thom@@@@ub|@ @end|ng |rom |m|ndu@tr|e@@com  Wed Jan  4 22:08:20 2023
From: thom@@@@ub|@ @end|ng |rom |m|ndu@tr|e@@com (Thomas Subia)
Date: Wed, 4 Jan 2023 21:08:20 +0000
Subject: [R] Date order question
Message-ID: <BY5PR12MB5512AA7ADEE6A85B5E97A4E0ECF59@BY5PR12MB5512.namprd12.prod.outlook.com>

Colleagues,

date<-c("12-29","12-30","01-01")
PT <- c(.106,.130,.121)
data <- data.frame(date,PT)
ggplot(data, aes(x=date,y=PT,group=1))+
  geom_point(size=4)+
  geom_line()+
  geom_hline(yintercept =c(1,.60,0,.30,.25,.2))+
  scale_y_continuous(label=scales::label_percent(),breaks=c(1,0.6,0,.3,0.25,0.2))+
  annotate("text", x=2.5, y=.1, label="Very Good",size=5,fontface="bold")+
  annotate("text", x=2.5, y=.225, label="Good",size=5,fontface="bold")+
  annotate("text", x=2.5, y=.28, label="Marginal",size=5,fontface="bold") +
  annotate("text", x=2.5, y=.45, label="Inadequate",size=6,fontface="bold")+
  annotate("text", x=2.5, y=.8, label="OOC",size=6,fontface="bold")+
  annotate("text", x=2.5, y=-.05, label="PT Not Done",size=5,fontface="bold")+
  theme_cowplot()

The plot has the wrong date order.
What is desired is 12-29, 12-30 and 01-01.

Some feedback would be appreciated.

All the best,
Thomas Subia

"De quoi devenir chevre? Des donnees"


From @kw@|mmo @end|ng |rom gm@||@com  Wed Jan  4 22:15:51 2023
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Wed, 4 Jan 2023 16:15:51 -0500
Subject: [R] Date order question
In-Reply-To: <BY5PR12MB5512AA7ADEE6A85B5E97A4E0ECF59@BY5PR12MB5512.namprd12.prod.outlook.com>
References: <BY5PR12MB5512AA7ADEE6A85B5E97A4E0ECF59@BY5PR12MB5512.namprd12.prod.outlook.com>
Message-ID: <CAPcHnpR2Kx0kwWv9+rXhR=zUXoe7J3JAhqwfhNkb8Gd-ivLYRQ@mail.gmail.com>

I converted `date` to a factor and it seemed to work:


```
library(ggplot2)
library(cowplot)
date <- c("12-29","12-30","01-01")
date <- factor(date, labels = unique(date))
PT <- c(.106,.130,.121)
data <- data.frame(date,PT)
ggplot(data, aes(x=date,y=PT,group=1))+
  geom_point(size=4)+
  geom_line()+
  geom_hline(yintercept =c(1,.60,0,.30,.25,.2))+
  scale_y_continuous(label=scales::label_percent(),breaks=c(1,0.6,0,.3,0.25,0.2))+
  annotate("text", x=2.5, y=.1, label="Very Good",size=5,fontface="bold")+
  annotate("text", x=2.5, y=.225, label="Good",size=5,fontface="bold")+
  annotate("text", x=2.5, y=.28, label="Marginal",size=5,fontface="bold") +
  annotate("text", x=2.5, y=.45, label="Inadequate",size=6,fontface="bold")+
  annotate("text", x=2.5, y=.8, label="OOC",size=6,fontface="bold")+
  annotate("text", x=2.5, y=-.05, label="PT Not Done",size=5,fontface="bold")+
  theme_cowplot()
```

On Wed, Jan 4, 2023 at 4:09 PM Thomas Subia
<thomas.subia at fmindustries.com> wrote:
>
> Colleagues,
>
> date<-c("12-29","12-30","01-01")
> PT <- c(.106,.130,.121)
> data <- data.frame(date,PT)
> ggplot(data, aes(x=date,y=PT,group=1))+
>   geom_point(size=4)+
>   geom_line()+
>   geom_hline(yintercept =c(1,.60,0,.30,.25,.2))+
>   scale_y_continuous(label=scales::label_percent(),breaks=c(1,0.6,0,.3,0.25,0.2))+
>   annotate("text", x=2.5, y=.1, label="Very Good",size=5,fontface="bold")+
>   annotate("text", x=2.5, y=.225, label="Good",size=5,fontface="bold")+
>   annotate("text", x=2.5, y=.28, label="Marginal",size=5,fontface="bold") +
>   annotate("text", x=2.5, y=.45, label="Inadequate",size=6,fontface="bold")+
>   annotate("text", x=2.5, y=.8, label="OOC",size=6,fontface="bold")+
>   annotate("text", x=2.5, y=-.05, label="PT Not Done",size=5,fontface="bold")+
>   theme_cowplot()
>
> The plot has the wrong date order.
> What is desired is 12-29, 12-30 and 01-01.
>
> Some feedback would be appreciated.
>
> All the best,
> Thomas Subia
>
> "De quoi devenir chevre? Des donnees"
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Wed Jan  4 22:20:03 2023
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Wed, 4 Jan 2023 21:20:03 +0000
Subject: [R] Date order question
In-Reply-To: <BY5PR12MB5512AA7ADEE6A85B5E97A4E0ECF59@BY5PR12MB5512.namprd12.prod.outlook.com>
References: <BY5PR12MB5512AA7ADEE6A85B5E97A4E0ECF59@BY5PR12MB5512.namprd12.prod.outlook.com>
Message-ID: <BN6PR2201MB15538EF366D4F448311D73D0CFF59@BN6PR2201MB1553.namprd22.prod.outlook.com>

1) Your "dates" are not being processed as dates. They are strings.
2) As written your date "01-01" comes first because year is not specified and January comes before December.
3) A library statement is missing. I tried running the program and theme_cowplot() was not found.

As you are plotting strings, you could put a space character in front of the December dates so that they are first. 
date<-c(" 12-29"," 12-30","01-01")
That fixes the problem in this example. You can order all the dates by putting more spaces in front of earlier years. That will get messy.


Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Thomas Subia
Sent: Wednesday, January 4, 2023 4:08 PM
To: r-help at r-project.org
Subject: [R] Date order question

[External Email]

Colleagues,

date<-c("12-29","12-30","01-01")
PT <- c(.106,.130,.121)
data <- data.frame(date,PT)
ggplot(data, aes(x=date,y=PT,group=1))+
  geom_point(size=4)+
  geom_line()+
  geom_hline(yintercept =c(1,.60,0,.30,.25,.2))+
  scale_y_continuous(label=scales::label_percent(),breaks=c(1,0.6,0,.3,0.25,0.2))+
  annotate("text", x=2.5, y=.1, label="Very Good",size=5,fontface="bold")+
  annotate("text", x=2.5, y=.225, label="Good",size=5,fontface="bold")+
  annotate("text", x=2.5, y=.28, label="Marginal",size=5,fontface="bold") +
  annotate("text", x=2.5, y=.45, label="Inadequate",size=6,fontface="bold")+
  annotate("text", x=2.5, y=.8, label="OOC",size=6,fontface="bold")+
  annotate("text", x=2.5, y=-.05, label="PT Not Done",size=5,fontface="bold")+
  theme_cowplot()

The plot has the wrong date order.
What is desired is 12-29, 12-30 and 01-01.

Some feedback would be appreciated.

All the best,
Thomas Subia

"De quoi devenir chevre? Des donnees"

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C9f58ce4e64d04d2b3f0908daee97dcb5%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638084633565926697%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=y7Co7Ae8RJG4AWxjwLLNcvopfUt7fGRBguUovhYaxl8%3D&reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C9f58ce4e64d04d2b3f0908daee97dcb5%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638084633565926697%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=pTYhbgrmoAu6g3%2FDepzJJt45Euazik4D6UJKByOZKuQ%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.


From po|c1410 @end|ng |rom gm@||@com  Wed Jan  4 23:26:48 2023
From: po|c1410 @end|ng |rom gm@||@com (CALUM POLWART)
Date: Wed, 4 Jan 2023 22:26:48 +0000
Subject: [R] is it possible to run multiple rmd files together
In-Reply-To: <2132794730.4116158.1672849128376@mail.yahoo.com>
References: <2132794730.4116158.1672849128376.ref@mail.yahoo.com>
 <2132794730.4116158.1672849128376@mail.yahoo.com>
Message-ID: <CA+etgPkrwrWUGcvv=LuR3KZ5EqQX=0vYYLA27_XddWuX1kgziA@mail.gmail.com>

I get frustrated by our peers who reply "please provide a worked example"
but OMG... Please provide a worked example!

You can't use:

source("filename.Rmd") as it isn't a simple set of R code.

You can do:

Rmarkdown::render("filename.Rmd")

You can also knit child files. But it is completely unclear what you have
tried, what you want to happen or what your expected outcome is.

On Wed, 4 Jan 2023, 16:19 Kai Yang via R-help, <r-help at r-project.org> wrote:

> Hi Team,I have multiple rmd files (~50) for difference study report. I did
> try the source command to run them together, but it seems doesn't work.Is
> there a way to run those rmd files from one script?Thanks,Kai
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Jan  4 23:36:39 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 4 Jan 2023 22:36:39 +0000
Subject: [R] Date order question
In-Reply-To: <BY5PR12MB5512AA7ADEE6A85B5E97A4E0ECF59@BY5PR12MB5512.namprd12.prod.outlook.com>
References: <BY5PR12MB5512AA7ADEE6A85B5E97A4E0ECF59@BY5PR12MB5512.namprd12.prod.outlook.com>
Message-ID: <f04ef387-132f-bbf7-1192-de335f5afc2d@sapo.pt>

?s 21:08 de 04/01/2023, Thomas Subia escreveu:
> Colleagues,
> 
> date<-c("12-29","12-30","01-01")
> PT <- c(.106,.130,.121)
> data <- data.frame(date,PT)
> ggplot(data, aes(x=date,y=PT,group=1))+
>    geom_point(size=4)+
>    geom_line()+
>    geom_hline(yintercept =c(1,.60,0,.30,.25,.2))+
>    scale_y_continuous(label=scales::label_percent(),breaks=c(1,0.6,0,.3,0.25,0.2))+
>    annotate("text", x=2.5, y=.1, label="Very Good",size=5,fontface="bold")+
>    annotate("text", x=2.5, y=.225, label="Good",size=5,fontface="bold")+
>    annotate("text", x=2.5, y=.28, label="Marginal",size=5,fontface="bold") +
>    annotate("text", x=2.5, y=.45, label="Inadequate",size=6,fontface="bold")+
>    annotate("text", x=2.5, y=.8, label="OOC",size=6,fontface="bold")+
>    annotate("text", x=2.5, y=-.05, label="PT Not Done",size=5,fontface="bold")+
>    theme_cowplot()
> 
> The plot has the wrong date order.
> What is desired is 12-29, 12-30 and 01-01.
> 
> Some feedback would be appreciated.
> 
> All the best,
> Thomas Subia
> 
> "De quoi devenir chevre? Des donnees"
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Transform `date` into a real date column in a dplyr pipe so that the 
original data remains unchanged and plot with scale_x_date which will 
allow for control over the axis breaks and labels.

The only problem are now the text annotations. The x coordinate is 
numeric and it must also be a date object. Below I solve this by 
creating a annotations data set ann_data. In geom_text the data argument 
is now another one, but one layer only annotates all areas.


library(ggplot2)
library(cowplot)
library(dplyr)

date<-c("12-29","12-30","01-01")
PT <- c(.106,.130,.121)
data <- data.frame(date,PT)

ann_data <- data.frame(
   y = c(0.1, 0.225, 0.28, 0.45, 0.8, -0.05),
   text = c("Very Good", "Good", "Marginal", "Inadequate", "OOC", "PT 
Not Done")
)
ann_data$x <- as.Date("2022-12-31")


data %>%
   mutate(newyear = ifelse(substr(date, 1, 2) > "01", "2022-", "2023-"),
          date = as.Date(paste0(newyear, date))) %>%
   ggplot(aes(x = date, y = PT)) +
   geom_point(size = 4) +
   geom_line() +
   geom_hline(yintercept = c(1,.60,0,.30,.25,.2)) +
   #
   geom_text(
     data = ann_data,
     mapping = aes(x = x, y = y, label = text),
     size = 5, fontface = "bold"
   ) +
   scale_x_date(date_breaks = "1 day", date_labels = "%m-%d") +
   #
 
scale_y_continuous(label=scales::label_percent(),breaks=c(1,0.6,0,.3,0.25,0.2))+
   theme_cowplot()



Hope this helps,

Rui Barradas


From po|c1410 @end|ng |rom gm@||@com  Wed Jan  4 23:51:02 2023
From: po|c1410 @end|ng |rom gm@||@com (CALUM POLWART)
Date: Wed, 4 Jan 2023 22:51:02 +0000
Subject: [R] Date order question
In-Reply-To: <BN6PR2201MB15538EF366D4F448311D73D0CFF59@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <BY5PR12MB5512AA7ADEE6A85B5E97A4E0ECF59@BY5PR12MB5512.namprd12.prod.outlook.com>
 <BN6PR2201MB15538EF366D4F448311D73D0CFF59@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <CA+etgPnUSSxsaTsn3Dc6TAtLjY1uRhon_HXRp5x-TjdJG_ofAg@mail.gmail.com>

On Wed, 4 Jan 2023, 21:29 Ebert,Timothy Aaron, <tebert at ufl.edu> wrote:

>
> As you are plotting strings, you could put a space character in front of
> the December dates so that they are first.
> date<-c(" 12-29"," 12-30","01-01")
> That fixes the problem in this example. You can order all the dates by
> putting more spaces in front of earlier years. That will get messy.
>

Put the year in front +/- apply as.Date() and you would be fine...

date<-c("2022-12-29","2022-12-30","2023-01-01") |> as.Date()

It may be that the source data doesn't have a year and the example given is
to show us dummy data.  You could 'automate' the addition along the lines
of:

require(tidyverse)
#if you have up to date Tidyverse this includes lubridate
current_date <- sys.Date()
current_month <- month(current_date)
current_year <- year(current_date)
date<-c("12-29","12-30","01-01")
PT <- c(.106,.130,.121)
data <- data.frame(date,PT)
data |>
  # separate the date into month and day column
  separate (date, c("Month", "Day"), sep="-") |>
  # add a year if month is > current month must be last year
 mutate (year = if_else(Month > current_month, current_year - 1,
current_year)) |>
  #rebuild the date
  unite (date, c("Year", "Month", "Day"), sep="-") |>
  mutate(date = as.Date(date)) -> data

If you don't want year on the axis of the graph, that should be dealt with
in ggplot not in the data carpentry

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Thu Jan  5 08:06:34 2023
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Thu, 5 Jan 2023 07:06:34 +0000
Subject: [R] Date order question
In-Reply-To: <BY5PR12MB5512AA7ADEE6A85B5E97A4E0ECF59@BY5PR12MB5512.namprd12.prod.outlook.com>
References: <BY5PR12MB5512AA7ADEE6A85B5E97A4E0ECF59@BY5PR12MB5512.namprd12.prod.outlook.com>
Message-ID: <8c216c1b7bba41b4a4bcf2028b4d840a@SRVEXCHCM1302.precheza.cz>

Hallo Thomas

Similar as suggested by Rui, you shall change your date to real date e.g. by

library(lubridate)
date <- paste(date, c(rep(2022,2), 2023), sep="-")
date <- mdy(date)

and you need to change also x coordinate in annotate.

ggplot(data, aes(x=date,y=PT,group=1))+
  geom_point(size=4)+
  geom_line()+
  geom_hline(yintercept =c(1,.60,0,.30,.25,.2))+
 
scale_y_continuous(label=scales::label_percent(),breaks=c(1,0.6,0,.3,0.25,0.
2))+
  annotate("text", x=date[2], y=.1, label="Very
Good",size=5,fontface="bold")+
  annotate("text", x=date[2], y=.225, label="Good",size=5,fontface="bold")+
  annotate("text", x=date[2], y=.28,
label="Marginal",size=5,fontface="bold") +
  annotate("text", x=date[2], y=.45,
label="Inadequate",size=6,fontface="bold")+
  annotate("text", x=date[2], y=.8, label="OOC",size=6,fontface="bold")+
  annotate("text", x=date[2], y=-.05, label="PT Not
Done",size=5,fontface="bold")

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Thomas Subia
> Sent: Wednesday, January 4, 2023 10:08 PM
> To: r-help at r-project.org
> Subject: [R] Date order question
> 
> Colleagues,
> 
> date<-c("12-29","12-30","01-01")
> PT <- c(.106,.130,.121)
> data <- data.frame(date,PT)
> ggplot(data, aes(x=date,y=PT,group=1))+
>   geom_point(size=4)+
>   geom_line()+
>   geom_hline(yintercept =c(1,.60,0,.30,.25,.2))+
> 
>
scale_y_continuous(label=scales::label_percent(),breaks=c(1,0.6,0,.3,0.25,0.
2))
> +
>   annotate("text", x=2.5, y=.1, label="Very Good",size=5,fontface="bold")+
>   annotate("text", x=2.5, y=.225, label="Good",size=5,fontface="bold")+
>   annotate("text", x=2.5, y=.28, label="Marginal",size=5,fontface="bold")
+
>   annotate("text", x=2.5, y=.45,
label="Inadequate",size=6,fontface="bold")+
>   annotate("text", x=2.5, y=.8, label="OOC",size=6,fontface="bold")+
>   annotate("text", x=2.5, y=-.05, label="PT Not
Done",size=5,fontface="bold")+
>   theme_cowplot()
> 
> The plot has the wrong date order.
> What is desired is 12-29, 12-30 and 01-01.
> 
> Some feedback would be appreciated.
> 
> All the best,
> Thomas Subia
> 
> "De quoi devenir chevre? Des donnees"
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From Steph@ne@P|@|@@nce @end|ng |rom v|b@be  Thu Jan  5 09:23:52 2023
From: Steph@ne@P|@|@@nce @end|ng |rom v|b@be (=?utf-8?B?U3TDqXBoYW5lIFBsYWlzYW5jZQ==?=)
Date: Thu, 5 Jan 2023 08:23:52 +0000
Subject: [R] Issue building from source on RHEL7
Message-ID: <1589E032-2163-4A52-B2E8-40817EB861A3@contoso.com>

Dear,

After trying other methods, I finally went for the build from source as detailed on the RStudio site (https://docs.posit.co/resources/install-r-source/).

################
I did the following as per the info on the Posit page:

sudo yum-builddep R

export R_VERSION=4.2.2

curl -O https://cran.rstudio.com/src/base/R-4/R-${R_VERSION}.tar.gz<https://cran.rstudio.com/src/base/R-4/R-$%7bR_VERSION%7d.tar.gz>
$ tar -xzvf R-${R_VERSION}.tar.gz
$ cd R-${R_VERSION}

$ ./configure \
    --prefix=/opt/R \
    --enable-memory-profiling \
    --enable-R-shlib \
    --with-blas \
    --with-lapack

$ make
$ make check
$ sudo make install

I could build R from source and the tests report success


$ make check

make[1]: Entering directory `/home/splaisan/Downloads/R-4.2.2/tests'

make[2]: Entering directory `/home/splaisan/Downloads/R-4.2.2/tests'

make[3]: Entering directory `/home/splaisan/Downloads/R-4.2.2/tests/Examples'

Testing examples for package ?base?

Testing examples for package ?tools?

  comparing ?tools-Ex.Rout? to ?tools-Ex.Rout.save? ... OK

Testing examples for package ?utils?

Testing examples for package ?grDevices?

  comparing ?grDevices-Ex.Rout? to ?grDevices-Ex.Rout.save? ... OK

Testing examples for package ?graphics?

  comparing ?graphics-Ex.Rout? to ?graphics-Ex.Rout.save? ... OK

Testing examples for package ?stats?

  comparing ?stats-Ex.Rout? to ?stats-Ex.Rout.save? ... OK

Testing examples for package ?datasets?

  comparing ?datasets-Ex.Rout? to ?datasets-Ex.Rout.save? ... OK

Testing examples for package ?methods?

Testing examples for package ?grid?

  comparing ?grid-Ex.Rout? to ?grid-Ex.Rout.save? ... OK

Testing examples for package ?splines?

  comparing ?splines-Ex.Rout? to ?splines-Ex.Rout.save? ... OK

Testing examples for package ?stats4?

  comparing ?stats4-Ex.Rout? to ?stats4-Ex.Rout.save? ... OK

Testing examples for package ?tcltk?

Testing examples for package ?compiler?

Testing examples for package ?parallel?

make[3]: Leaving directory `/home/splaisan/Downloads/R-4.2.2/tests/Examples'

make[2]: Leaving directory `/home/splaisan/Downloads/R-4.2.2/tests'

make[2]: Entering directory `/home/splaisan/Downloads/R-4.2.2/tests'

running strict specific tests

make[3]: Entering directory `/home/splaisan/Downloads/R-4.2.2/tests'

running code in 'eval-etc.R' ... OK

  comparing 'eval-etc.Rout' to './eval-etc.Rout.save' ... OK

running code in 'simple-true.R' ... OK

  comparing 'simple-true.Rout' to './simple-true.Rout.save' ... OK

running code in 'arith-true.R' ... OK

  comparing 'arith-true.Rout' to './arith-true.Rout.save' ... OK

running code in 'arith.R' ... OK

  comparing 'arith.Rout' to './arith.Rout.save' ... OK

running code in 'lm-tests.R' ... OK

  comparing 'lm-tests.Rout' to './lm-tests.Rout.save' ... OK

running code in 'ok-errors.R' ... OK

  comparing 'ok-errors.Rout' to './ok-errors.Rout.save' ... OK

running code in 'method-dispatch.R' ... OK

  comparing 'method-dispatch.Rout' to './method-dispatch.Rout.save' ... OK

running code in 'any-all.R' ... OK

  comparing 'any-all.Rout' to './any-all.Rout.save' ... OK

running code in 'structure.R' ... OK

  comparing 'structure.Rout' to './structure.Rout.save' ... OK

running code in 'd-p-q-r-tests.R' ... OK

  comparing 'd-p-q-r-tests.Rout' to './d-p-q-r-tests.Rout.save' ... OK

make[3]: Leaving directory `/home/splaisan/Downloads/R-4.2.2/tests'

running sloppy specific tests

make[3]: Entering directory `/home/splaisan/Downloads/R-4.2.2/tests'

running code in 'complex.R' ... OK

  comparing 'complex.Rout' to './complex.Rout.save' ... OK

running code in 'print-tests.R' ... OK

  comparing 'print-tests.Rout' to './print-tests.Rout.save' ... OK

running code in 'lapack.R' ... OK

  comparing 'lapack.Rout' to './lapack.Rout.save' ... OK

running code in 'datasets.R' ... OK

  comparing 'datasets.Rout' to './datasets.Rout.save' ... OK

running code in 'datetime.R' ... OK

  comparing 'datetime.Rout' to './datetime.Rout.save' ... OK

running code in 'iec60559.R' ... OK

  comparing 'iec60559.Rout' to './iec60559.Rout.save' ... OK

running code in 'eval-etc-2.R' ... OK

  comparing 'eval-etc-2.Rout' to './eval-etc-2.Rout.save' ... OK

make[3]: Leaving directory `/home/splaisan/Downloads/R-4.2.2/tests'

make[3]: Entering directory `/home/splaisan/Downloads/R-4.2.2/tests'

checking Sys.timezone ...

make[4]: Entering directory `/home/splaisan/Downloads/R-4.2.2/tests'

running code in 'timezone.R' ... OK

make[4]: Leaving directory `/home/splaisan/Downloads/R-4.2.2/tests'

make[3]: Leaving directory `/home/splaisan/Downloads/R-4.2.2/tests'

make[2]: Leaving directory `/home/splaisan/Downloads/R-4.2.2/tests'

make[2]: Entering directory `/home/splaisan/Downloads/R-4.2.2/tests'

running regression tests ...

make[3]: Entering directory `/home/splaisan/Downloads/R-4.2.2/tests'

running code in 'array-subset.R' ... OK

running code in 'reg-tests-1a.R' ... OK

running code in 'reg-tests-1b.R' ... OK

running code in 'reg-tests-1c.R' ... OK

running code in 'reg-tests-1d.R' ... OK

running code in 'reg-tests-2.R' ... OK

  comparing 'reg-tests-2.Rout' to './reg-tests-2.Rout.save' ... OK

running code in 'reg-examples1.R' ... OK

running code in 'reg-examples2.R' ... OK

running code in 'reg-packages.R' ... OK

running code in 'p-qbeta-strict-tst.R' ... OK

running code in 'd-p-q-r-tst-2.R' ... OK

running code in 'r-strict-tst.R' ... OK

running code in 'reg-IO.R' ... OK

  comparing 'reg-IO.Rout' to './reg-IO.Rout.save' ... OK

running code in 'reg-IO2.R' ... OK

  comparing 'reg-IO2.Rout' to './reg-IO2.Rout.save' ... OK

running code in 'reg-plot.R' ... OK

  comparing 'reg-plot.pdf' to './reg-plot.pdf.save' ... OK

running code in 'reg-S4-examples.R' ... OK

running code in 'reg-BLAS.R' ... OK

make[3]: Leaving directory `/home/splaisan/Downloads/R-4.2.2/tests'

make[3]: Entering directory `/home/splaisan/Downloads/R-4.2.2/tests'

running code in 'reg-tests-3.R' ... OK

  comparing 'reg-tests-3.Rout' to './reg-tests-3.Rout.save' ... OK

running code in 'reg-examples3.R' ... OK

  comparing 'reg-examples3.Rout' to './reg-examples3.Rout.save' ... OK

running tests of plotting Latin-1

  expect failure or some differences if not in a Latin-1 or UTF-8 locale

running code in 'reg-plot-latin1.R' ... OK

  comparing 'reg-plot-latin1.pdf' to './reg-plot-latin1.pdf.save' ... OK

running code in 'reg-S4.R' ... OK

  comparing 'reg-S4.Rout' to './reg-S4.Rout.save' ... OK

make[3]: Leaving directory `/home/splaisan/Downloads/R-4.2.2/tests'

make[2]: Leaving directory `/home/splaisan/Downloads/R-4.2.2/tests'

make[2]: Entering directory `/home/splaisan/Downloads/R-4.2.2/tests'

running tests of Internet functions

make[3]: Entering directory `/home/splaisan/Downloads/R-4.2.2/tests'

running code in 'internet.R' ... OK

  comparing 'internet.Rout' to './internet.Rout.save' ...39d38

< [24] "</html>"

 OK

make[3]: Leaving directory `/home/splaisan/Downloads/R-4.2.2/tests'

make[2]: Leaving directory `/home/splaisan/Downloads/R-4.2.2/tests'

make[1]: Leaving directory `/home/splaisan/Downloads/R-4.2.2/tests'

R almost works when run from the build /bin folder (besides a couple of warnings which I do not understand)


$ bin/R

Error in gzfile(file, "rb") : cannot open the connection

In addition: Warning message:

In gzfile(file, "rb") :

  cannot open compressed file '/usr/lib64/R/library/base/R/base.rdx', probable reason 'No such file or directory'

Error: could not find function "attach"



R version 4.2.2 (2022-10-31) -- "Innocent and Trusting"

Copyright (C) 2022 The R Foundation for Statistical Computing

Platform: x86_64-pc-linux-gnu (64-bit)



R is free software and comes with ABSOLUTELY NO WARRANTY.

You are welcome to redistribute it under certain conditions.

Type 'license()' or 'licence()' for distribution details.



  Natural language support but running in an English locale



R is a collaborative project with many contributors.

Type 'contributors()' for more information and

'citation()' on how to cite R or R packages in publications.



Type 'demo()' for some demos, 'help()' for on-line help, or

'help.start()' for an HTML browser interface to help.

Type 'q()' to quit R.



Error: object '.ArgsEnv' not found

Fatal error: unable to initialize the JIT


Then when I run ?sudo make install?, the prefix path only gets part of the expected folders and the resulting collection is not functional (it lacks even the library folder)

Can you please help me fix this?

Thanks in advance

Stephane


####################################
The resulting opt/R/ folder contains:


$ ll /opt/R/

total 4.0K

drwxr-xr-x.  5 root root   40 Jan  4 17:22 .

drwxr-xr-x. 18 root root 4.0K Jan  4 14:30 ..

drwxr-xr-x.  2 root root   28 Jan  4 17:22 bin

drwxr-xr-x.  4 root root   30 Jan  4 17:22 lib64

drwxr-xr-x.  3 root root   16 Jan  4 17:22 share

which is far from what I have on a functional different server (ubuntu 20)

$ ll /usr/lib/R
total 44K
drwxr-xr-x   8 root root 4.0K Nov 14 09:28 .
drwxr-xr-x 158 root root  12K Nov 18 06:20 ..
drwxr-xr-x   3 root root 4.0K Nov 14 09:28 bin
lrwxrwxrwx   1 root root   33 Nov 12 17:12 COPYING -> ../../share/common-licenses/GPL-2
drwxr-xr-x   2 root root 4.0K Nov 14 09:28 etc
drwxr-xr-x   2 root root 4.0K Nov 14 09:28 lib
drwxr-xr-x  32 root root 4.0K Sep  6 13:07 library
drwxr-xr-x   2 root root 4.0K Nov 14 09:28 modules
drwxr-xr-x   2 root root 4.0K Aug 11 02:31 site-library
-rw-r--r--   1 root root   46 Nov 12 17:12 SVN-REVISION




	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Jan  5 17:52:32 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 5 Jan 2023 19:52:32 +0300
Subject: [R] Issue building from source on RHEL7
In-Reply-To: <1589E032-2163-4A52-B2E8-40817EB861A3@contoso.com>
References: <1589E032-2163-4A52-B2E8-40817EB861A3@contoso.com>
Message-ID: <20230105195232.6c75f5f3@Tarkus>

On Thu, 5 Jan 2023 08:23:52 +0000
St?phane Plaisance <Stephane.Plaisance at vib.be> wrote:

> I finally went for the build from source as detailed on the RStudio
> site (https://docs.posit.co/resources/install-r-source/).

The official installation manual can be found at
<https://cran.r-project.org/doc/manuals/r-release/R-admin.html>, not at
the Posit website.

> $ ./configure \
>     --prefix=/opt/R \
>     --enable-memory-profiling \
>     --enable-R-shlib \
>     --with-blas \
>     --with-lapack
> $ make
> $ make check
> $ sudo make install

This should have worked. In fact, I cannot reproduce your problem on my
own: with the same command line, R passes the check and runs both from
the build directory as ./bin/R and (after a `make install`) from the
prefix I specified.

> $ bin/R
> Error in gzfile(file, "rb") : cannot open the connection
> In addition: Warning message:
> In gzfile(file, "rb") :
> cannot open compressed file '/usr/lib64/R/library/base/R/base.rdx',
> probable reason 'No such file or directory'

Something about remembering the prefix must have gone horribly wrong,
making your build of R confused enough to go looking for its files in
the wrong directory. Do you have any lingering R-related environment
variables set? Does `env | grep R` show anything useful? Is there
anything useful about the prefix in config.log? Do the generated files
src/scripts/R.fe and bin/R contain the right value of the R_HOME_DIR
variable?

> 	[[alternative HTML version deleted]]

When you compose your messages in HTML, we only get the plain text
version automatically generated by your mailer. This transformation is
sometimes lossy:
https://stat.ethz.ch/pipermail/r-help/2023-January/476610.html

-- 
Best regards,
Ivan


From Steph@ne@P|@|@@nce @end|ng |rom v|b@be  Thu Jan  5 18:49:34 2023
From: Steph@ne@P|@|@@nce @end|ng |rom v|b@be (=?utf-8?B?U3TDqXBoYW5lIFBsYWlzYW5jZQ==?=)
Date: Thu, 5 Jan 2023 17:49:34 +0000
Subject: [R] Issue building from source on RHEL7
In-Reply-To: <20230105195232.6c75f5f3@Tarkus>
References: <1589E032-2163-4A52-B2E8-40817EB861A3@contoso.com>
 <20230105195232.6c75f5f3@Tarkus>
Message-ID: <FED10FAD-13C1-40EF-9B43-A3D8A69D2372@vib.be>

Thanks Ivan,

The instruction on Posit are almost identical to those in R except they add a version folder to be able to instyall multiple R's in parallel. I do not think this is the reason.

I apparently fixed my 4.1.3 issue by adding a symlink R in /usr/lib64/ pointing to /opt/R/${R_VERSION}/lib64/R folder
This additional symlink is not detailed in the doc(s) and apparently takes care of re-establishing the link to lib and source files when running R.

I now do not have errors anymore and it even works inside RStudio

Thanks a lot for your help, hoep this can help others with the same issue.

Stephane

=============

?On 05/01/2023, 17:52, "Ivan Krylov" <krylov.r00t at gmail.com> wrote:

    On Thu, 5 Jan 2023 08:23:52 +0000
    St?phane Plaisance <Stephane.Plaisance at vib.be> wrote:

    > I finally went for the build from source as detailed on the RStudio
    > site (https://docs.posit.co/resources/install-r-source/).

    The official installation manual can be found at
    <https://cran.r-project.org/doc/manuals/r-release/R-admin.html>, not at
    the Posit website.

    > $ ./configure \
    >     --prefix=/opt/R \
    >     --enable-memory-profiling \
    >     --enable-R-shlib \
    >     --with-blas \
    >     --with-lapack
    > $ make
    > $ make check
    > $ sudo make install

    This should have worked. In fact, I cannot reproduce your problem on my
    own: with the same command line, R passes the check and runs both from
    the build directory as ./bin/R and (after a `make install`) from the
    prefix I specified.

    > $ bin/R
    > Error in gzfile(file, "rb") : cannot open the connection
    > In addition: Warning message:
    > In gzfile(file, "rb") :
    > cannot open compressed file '/usr/lib64/R/library/base/R/base.rdx',
    > probable reason 'No such file or directory'

    Something about remembering the prefix must have gone horribly wrong,
    making your build of R confused enough to go looking for its files in
    the wrong directory. Do you have any lingering R-related environment
    variables set? Does `env | grep R` show anything useful? Is there
    anything useful about the prefix in config.log? Do the generated files
    src/scripts/R.fe and bin/R contain the right value of the R_HOME_DIR
    variable?

    > 	[[alternative HTML version deleted]]

    When you compose your messages in HTML, we only get the plain text
    version automatically generated by your mailer. This transformation is
    sometimes lossy:
    https://stat.ethz.ch/pipermail/r-help/2023-January/476610.html

    -- 
    Best regards,
    Ivan


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Jan  5 19:25:31 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 5 Jan 2023 21:25:31 +0300
Subject: [R] Issue building from source on RHEL7
In-Reply-To: <FED10FAD-13C1-40EF-9B43-A3D8A69D2372@vib.be>
References: <1589E032-2163-4A52-B2E8-40817EB861A3@contoso.com>
 <20230105195232.6c75f5f3@Tarkus>
 <FED10FAD-13C1-40EF-9B43-A3D8A69D2372@vib.be>
Message-ID: <20230105212531.77171771@Tarkus>

On Thu, 5 Jan 2023 17:49:34 +0000
St?phane Plaisance <Stephane.Plaisance at vib.be> wrote:

> The instruction on Posit are almost identical to those in R except
> they add a version folder to be able to instyall multiple R's in
> parallel. I do not think this is the reason.

You're right. I don't currently see anything in Posit's instruction
that could have caused this.

> I apparently fixed my 4.1.3 issue by adding a symlink R in
> /usr/lib64/ pointing to /opt/R/${R_VERSION}/lib64/R folder
> This additional symlink is not detailed in the doc(s) and
> apparently takes care of re-establishing the link to lib and source
> files when running R.

Congratulations on getting R running!

I'm afraid that's not the way R is intended to be working. I think
there's something else currently broken in your R installation, though
feel free to ignore me if you don't want to deal with this right now.

There should be no need to create such symlinks when installing R: if
told to run from under a given prefix, it should be entirely possible
to avoid touching the rest of the filesystem. Are you sure you didn't
have R_HOME or some other environment variables interfering with the
workings of R? Was the R-4.1.3 installation also built from source the
same way you were building R-4.2.2, or did it come from an RPM?

-- 
Best regards,
Ivan


From rremed|o @end|ng |rom hotm@||@com  Thu Jan  5 20:52:25 2023
From: rremed|o @end|ng |rom hotm@||@com (=?UTF-8?Q?Rodrigo_Ribeiro_Rem=c3=a9dio?=)
Date: Thu, 5 Jan 2023 16:52:25 -0300
Subject: [R] R 'arima' discrepancies
Message-ID: <CP4P284MB1650D7A2FB5FE08CB81E51B6C0FA9@CP4P284MB1650.BRAP284.PROD.OUTLOOK.COM>

Rob J Hyndman gives great explanation here 
(https://robjhyndman.com/hyndsight/estimation/) for reasons why results 
from R's arima may differ from other softwares.

@iacobus, to cite one, 'Major discrepancies between R and Stata for 
ARIMA' 
(https://stackoverflow.com/questions/22443395/major-discrepancies-between-r-and-stata-for-arima), 
assign the, sometimes, big diferences from R and other softwares to 
different optimization algorithms. However, I think this is overstate 
the reason.

I explain better. I fit arima models regularly using |forecast| or 
|fable| packages, besides using Stata, Eviews and Gretl. All these 
packages, except for R, give very consistent results with each other. 
I'll give one example using R, Eviews and Gretl. I'll use "BFGS" 
algorithm and observed hessian based standard errors (in Gretl and in 
Eviews).


    |library(GetBCBData) library(lubridate) library(tsibble)
    library(tsbox) library(forecast) library(tidyr) library(dplyr)
    #============================================================# #Data
    ---- #============================================================#
    #Brazilian CPI and analytical components ipca <-
    gbcbd_get_series(c(433, 4449, 10844, 11428, 27863, 27864),
    first.date = dmy("01/01/2004")) ipca <- ipca %>% mutate(series.name
    = case_when(id.num == 433 ~ "ipca", id.num == 4449 ~
    "administrados", id.num == 10844 ~ "servicos", id.num == 11428 ~
    "livres", id.num == 27863 ~ "industriais", id.num == 27864 ~
    "alimentos", TRUE ~ series.name)) ipca <- ipca %>% select(data =
    ref.date, valor = value, series.name) %>% pivot_wider(names_from =
    "series.name", values_from = "valor") ipca_tsb <- ipca %>%
    mutate(data = yearmonth(data)) %>% arrange(data) %>% as_tsibble()
    ipca_ts <- ipca_tsb %>% ts_ts() ##Eviews and Gretl can easily import
    'dta' files ---- ipca %>% foreign::write.dta("ipca.dta")
    #============================================================#
    #Model ----
    #============================================================#
    #ARIMA(2,0,1)(2,0,2)[12] modelo <- ipca_ts %>% .[, "servicos"] %>%
    Arima(order = c(2, 0, 1), seasonal = c(2, 0, 2), include.mean = T,
    method = "ML", optim.method = "BFGS", optim.control = list(maxit =
    1000)) #'fable' gives identical results: ipca_tsb%>%
    model(ARIMA(servicos ~ 1 + pdq(2, 0, 1) + PDQ(2, 0, 2), method =
    "ML", optim.method = "BFGS", optim.control = list(maxit = 1000)))
    %>% report() summary(modelo) |*|Series: . ARIMA(2,0,1)(2,0,2)[12]
    with non-zero mean Coefficients: ar1 ar2 ma1 sar1 sar2 sma1 sma2
    mean 0.7534 0.0706 -0.5705 0.1759 0.7511 0.3533 -0.6283 0.5001 s.e.
    NaN NaN 0.0011 NaN NaN NaN NaN 0.1996 sigma^2 = 0.05312: log
    likelihood = 1.75 AIC=14.5 AICc=15.33 BIC=45.33 Training set error
    measures: ME RMSE MAE MPE MAPE MASE ACF1 Training set -0.006082139
    0.2263897 0.1678378 -33.39711 79.74708 0.7674419 0.01342733 Warning
    message: In sqrt(diag(x$var.coef)) : NaNs produce|*


|Gretl||output: 
https://drive.google.com/file/d/1T_thtM0mRXvlJbPrgkwqlc_tLqCbsXYe/view?usp=sharing|

|Eviews output: 
https://drive.google.com/file/d/1Ta8b5vPwftRFhZpb3Pg95aVRfvhl01vO/view?usp=sharing|


Coefficients comparisson: 
https://docs.google.com/spreadsheets/d/1TfXmQaCEOtOX6e0foSHI9gTAHJ1vW6Ui/edit?usp=sharing&ouid=104001235447994085528&rtpof=true&sd=true


Both Eviews and Gretl give results that differ after a few decimal 
places, which is expected. R, by its turn, gives completlely different 
results. Again, all of them used "BFGS" algorithm. Even the standard 
erros, which I'm not questioning here, are very similar between Gretl 
and Eviews. In this example, the major difference is in AR(1) coefficient.

I know this is just only one example, but I see these kind of divergent 
results everyday. Not to mention situations where including a single 
observation messes up the entire result, or when R cannot calculate 
standard errors ("In sqrt(diag(best$var.coef))").

All that make me wonder: as results may differ greatly from other 
software, is |arima| from R truly reliable? Is |optim| the problem or 
other intricacies inside |arima| function and its methodology? Or are 
all the other softwares making mistakes (converging when they shouldn't, 
for example)?

In a summary, the question is: is R's base |arima| (which |Arima|, from 
'forecast', and |ARIMA| from 'fable' are based on) really reliable?


Edit: Stata gives the same results as did Gretl and Eviews. Stata 
output: 
https://drive.google.com/file/d/1TeKfj59aJNjxaWx0Uslke4y8RJWqMxRl/view?usp=sharing


Rodrigo Rem?dio

rremedio at hotmail.com


||*||*||


From pro|jcn@@h @end|ng |rom gm@||@com  Fri Jan  6 15:37:08 2023
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Fri, 6 Jan 2023 09:37:08 -0500
Subject: [R] R 'arima' discrepancies
In-Reply-To: <CP4P284MB1650D7A2FB5FE08CB81E51B6C0FA9@CP4P284MB1650.BRAP284.PROD.OUTLOOK.COM>
References: <CP4P284MB1650D7A2FB5FE08CB81E51B6C0FA9@CP4P284MB1650.BRAP284.PROD.OUTLOOK.COM>
Message-ID: <85c133f9-9d95-ff90-e2e4-944364bd21c0@gmail.com>

As the original author of what became "BFGS" in optim(), I would point out that BFGS is a catch-all
phrase that should be applied only to the formula used to update EITHER (my emphasis) the approximate
Hessian or the INVERSE approximate Hessian. The starting approximation can vary as well, along with
choices of the line search based on a search direction the approximate (inverse?) Hessian generates.

The optim::BFGS starts with a unit matrix approximation to the inverse hessian and uses a backtrack
line search. There are some choices of how fast to backtrack and the stopping criteria. Also optim::BFGS
allows a relatively crude gradient approximation to be used.

Rvmmin (now part of optimx) is an all-R implementation of the same ideas, but with some changes in local
strategies. Even putting in what I believe are the same choices, I don't get identical iterates to
optim::BFGS, likely due to some ways in which C works. The "vm" in the name is for the original
"Variable Metric" algorithm of Fletcher (1970). I sat with Roger in Dundee in Jan. 1976 and we used a red
pencil and simplified his Fortran code. I made just 1 more change when I returned to Ottawa -- my approach
always tries a steepest descent (i.e., new unit inverse Hessian) before quitting.

One choice I have made with Rvmmin is to insist on a gradient function. I've found approximations don't
work so well, not for speed but for knowing that an answer has a nearly zero gradient.

There is likely a useful but modest project to explore the differences Rodrigo has pointed out. It should not
be too difficult to set up the optimization to try different optimizers. I'll be happy to collaborate in
this. Note that Google Summer of Code is a possibility, but prospective students and mentors need to be
starting now.

Cheers,

John Nash

On 2023-01-05 14:52, Rodrigo Ribeiro Rem?dio wrote:
> Rob J Hyndman gives great explanation here (https://robjhyndman.com/hyndsight/estimation/) for reasons why results from 
> R's arima may differ from other softwares.
> 
> @iacobus, to cite one, 'Major discrepancies between R and Stata for ARIMA' 
> (https://stackoverflow.com/questions/22443395/major-discrepancies-between-r-and-stata-for-arima), assign the, sometimes, 
> big diferences from R and other softwares to different optimization algorithms. However, I think this is overstate the 
> reason.
> 
> I explain better. I fit arima models regularly using |forecast| or |fable| packages, besides using Stata, Eviews and 
> Gretl. All these packages, except for R, give very consistent results with each other. I'll give one example using R, 
> Eviews and Gretl. I'll use "BFGS" algorithm and observed hessian based standard errors (in Gretl and in Eviews).
> 
> 
>  ?? |library(GetBCBData) library(lubridate) library(tsibble)
>  ?? library(tsbox) library(forecast) library(tidyr) library(dplyr)
>  ?? #============================================================# #Data
>  ?? ---- #============================================================#
>  ?? #Brazilian CPI and analytical components ipca <-
>  ?? gbcbd_get_series(c(433, 4449, 10844, 11428, 27863, 27864),
>  ?? first.date = dmy("01/01/2004")) ipca <- ipca %>% mutate(series.name
>  ?? = case_when(id.num == 433 ~ "ipca", id.num == 4449 ~
>  ?? "administrados", id.num == 10844 ~ "servicos", id.num == 11428 ~
>  ?? "livres", id.num == 27863 ~ "industriais", id.num == 27864 ~
>  ?? "alimentos", TRUE ~ series.name)) ipca <- ipca %>% select(data =
>  ?? ref.date, valor = value, series.name) %>% pivot_wider(names_from =
>  ?? "series.name", values_from = "valor") ipca_tsb <- ipca %>%
>  ?? mutate(data = yearmonth(data)) %>% arrange(data) %>% as_tsibble()
>  ?? ipca_ts <- ipca_tsb %>% ts_ts() ##Eviews and Gretl can easily import
>  ?? 'dta' files ---- ipca %>% foreign::write.dta("ipca.dta")
>  ?? #============================================================#
>  ?? #Model ----
>  ?? #============================================================#
>  ?? #ARIMA(2,0,1)(2,0,2)[12] modelo <- ipca_ts %>% .[, "servicos"] %>%
>  ?? Arima(order = c(2, 0, 1), seasonal = c(2, 0, 2), include.mean = T,
>  ?? method = "ML", optim.method = "BFGS", optim.control = list(maxit =
>  ?? 1000)) #'fable' gives identical results: ipca_tsb%>%
>  ?? model(ARIMA(servicos ~ 1 + pdq(2, 0, 1) + PDQ(2, 0, 2), method =
>  ?? "ML", optim.method = "BFGS", optim.control = list(maxit = 1000)))
>  ?? %>% report() summary(modelo) |*|Series: . ARIMA(2,0,1)(2,0,2)[12]
>  ?? with non-zero mean Coefficients: ar1 ar2 ma1 sar1 sar2 sma1 sma2
>  ?? mean 0.7534 0.0706 -0.5705 0.1759 0.7511 0.3533 -0.6283 0.5001 s.e.
>  ?? NaN NaN 0.0011 NaN NaN NaN NaN 0.1996 sigma^2 = 0.05312: log
>  ?? likelihood = 1.75 AIC=14.5 AICc=15.33 BIC=45.33 Training set error
>  ?? measures: ME RMSE MAE MPE MAPE MASE ACF1 Training set -0.006082139
>  ?? 0.2263897 0.1678378 -33.39711 79.74708 0.7674419 0.01342733 Warning
>  ?? message: In sqrt(diag(x$var.coef)) : NaNs produce|*
> 
> 
> |Gretl||output: https://drive.google.com/file/d/1T_thtM0mRXvlJbPrgkwqlc_tLqCbsXYe/view?usp=sharing|
> 
> |Eviews output: https://drive.google.com/file/d/1Ta8b5vPwftRFhZpb3Pg95aVRfvhl01vO/view?usp=sharing|
> 
> 
> Coefficients comparisson: 
> https://docs.google.com/spreadsheets/d/1TfXmQaCEOtOX6e0foSHI9gTAHJ1vW6Ui/edit?usp=sharing&ouid=104001235447994085528&rtpof=true&sd=true
> 
> 
> Both Eviews and Gretl give results that differ after a few decimal places, which is expected. R, by its turn, gives 
> completlely different results. Again, all of them used "BFGS" algorithm. Even the standard erros, which I'm not 
> questioning here, are very similar between Gretl and Eviews. In this example, the major difference is in AR(1) coefficient.
> 
> I know this is just only one example, but I see these kind of divergent results everyday. Not to mention situations 
> where including a single observation messes up the entire result, or when R cannot calculate standard errors ("In 
> sqrt(diag(best$var.coef))").
> 
> All that make me wonder: as results may differ greatly from other software, is |arima| from R truly reliable? Is |optim| 
> the problem or other intricacies inside |arima| function and its methodology? Or are all the other softwares making 
> mistakes (converging when they shouldn't, for example)?
> 
> In a summary, the question is: is R's base |arima| (which |Arima|, from 'forecast', and |ARIMA| from 'fable' are based 
> on) really reliable?
> 
> 
> Edit: Stata gives the same results as did Gretl and Eviews. Stata output: 
> https://drive.google.com/file/d/1TeKfj59aJNjxaWx0Uslke4y8RJWqMxRl/view?usp=sharing
> 
> 
> Rodrigo Rem?dio
> 
> rremedio at hotmail.com
> 
> 
> ||*||*||
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @|gbert @end|ng |rom w|w|@hu-ber||n@de  Sat Jan  7 17:29:35 2023
From: @|gbert @end|ng |rom w|w|@hu-ber||n@de (Sigbert Klinke)
Date: Sat, 7 Jan 2023 17:29:35 +0100
Subject: [R] gmp::bigq vs. MASS::fractions
Message-ID: <6c8a775d-b141-edc0-c222-fbeea1d5cb95@wiwi.hu-berlin.de>

Hi,

has someone experience which routine should be used for creating 
fractional numbers? The two conversion routines deliver different results

 > x <- (0:7)/7

 > MASS::fractions(x)

[1]   0 1/7 2/7 3/7 4/7 5/7 6/7   1

 > gmp::as.bigq(x)

Big Rational ('bigq') object of length 8:

[1] 0 
2573485501354569/18014398509481984 2573485501354569/9007199254740992

[4] 7720456504063707/18014398509481984 2573485501354569/4503599627370496 
  6433713753386423/9007199254740992

[7] 7720456504063707/9007199254740992  1

Following the example I would compute my fractional numbers with 
MASS::fractions and store them for further processing as Big Rational.

Thanks Sigbert


From kry|ov@r00t @end|ng |rom gm@||@com  Sat Jan  7 17:55:00 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sat, 7 Jan 2023 19:55:00 +0300
Subject: [R] gmp::bigq vs. MASS::fractions
In-Reply-To: <6c8a775d-b141-edc0-c222-fbeea1d5cb95@wiwi.hu-berlin.de>
References: <6c8a775d-b141-edc0-c222-fbeea1d5cb95@wiwi.hu-berlin.de>
Message-ID: <20230107195500.3ceb4d83@Tarkus>

On Sat, 7 Jan 2023 17:29:35 +0100
Sigbert Klinke <sigbert at wiwi.hu-berlin.de> wrote:

>  > x <- (0:7)/7  
> 
>  > MASS::fractions(x)  
> 
> [1]   0 1/7 2/7 3/7 4/7 5/7 6/7   1
> 
>  > gmp::as.bigq(x)  
> 
> Big Rational ('bigq') object of length 8:
> 
> [1] 0 
> 2573485501354569/18014398509481984 2573485501354569/9007199254740992
> 
> [4] 7720456504063707/18014398509481984
> 2573485501354569/4503599627370496 6433713753386423/9007199254740992
> 
> [7] 7720456504063707/9007199254740992  1

That's a consequence of the way fractions are internally represented
inside most modern processors. In short, gmp::as.bigq takes the red
pill and shows you the reality as it is (all fractions have a limited
number of significant digits -- 52 binary digits -- and are required to
have a denominator that's a power of two), while MASS::fractions tries
to guess what the original number might have been before an imprecise
approximation of k/7 had been computed. (Since 7 is not a power of 2,
only 0 and 1 have an exact representation in your example.)

For more information, see R FAQ 7.31:
https://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f

What do you need the fractions for?

-- 
Best regards,
Ivan


From |eo@m@d@ @end|ng |rom @yon|c@eu  Sun Jan  8 04:24:05 2023
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leonard Mada)
Date: Sun, 8 Jan 2023 05:24:05 +0200
Subject: [R] Problem with integrate(function(x) x^3 / sin(x), -pi/2, pi/2)
Message-ID: <9b342177-ce55-b234-0b4f-699b4ca81b20@syonic.eu>

Dear List-Members,

I encounter a problem while trying to integrate the following function:

integrate(function(x) x^3 / sin(x), -pi/2, pi/2)
# Error in integrate(function(x) x^3/sin(x), -pi/2, pi/2) :
#? non-finite function value

# the value should be finite:
curve(x^3 / sin(x), -pi/2, pi/2)
integrate(function(x) x^3 / sin(x), -pi/2, 0)
integrate(function(x) x^3 / sin(x), 0, pi/2)
# but this does NOT work:
integrate(function(x) x^3 / sin(x), -pi/2, pi/2, subdivisions=4096)
integrate(function(x) x^3 / sin(x), -pi/2, pi/2, subdivisions=4097)
# works:
integrate(function(x) x^3 / sin(x), -pi/2, pi/2 + 1E-10)


# Note: works directly with other packages

pracma::integral(function(x) x^3 / sin(x), -pi/2, pi/2 )
# 3.385985


I hope that integrate() gets improved in base R as well.


Sincerely,


Leonard


From @kw@|mmo @end|ng |rom gm@||@com  Sun Jan  8 04:32:25 2023
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Sat, 7 Jan 2023 22:32:25 -0500
Subject: [R] 
 Problem with integrate(function(x) x^3 / sin(x), -pi/2, pi/2)
In-Reply-To: <9b342177-ce55-b234-0b4f-699b4ca81b20@syonic.eu>
References: <9b342177-ce55-b234-0b4f-699b4ca81b20@syonic.eu>
Message-ID: <CAPcHnpS5eLjZ9UsB+H9PqD6PjoyVwN5=2T9JmM3BfdYg+qiBXQ@mail.gmail.com>

You're dividing 0 by 0, giving you NaN, perhaps you should try

function(x) ifelse(x == 0, 0, x^3/sin(x))

On Sat, Jan 7, 2023, 22:24 Leonard Mada via R-help <r-help at r-project.org>
wrote:

> Dear List-Members,
>
> I encounter a problem while trying to integrate the following function:
>
> integrate(function(x) x^3 / sin(x), -pi/2, pi/2)
> # Error in integrate(function(x) x^3/sin(x), -pi/2, pi/2) :
> #  non-finite function value
>
> # the value should be finite:
> curve(x^3 / sin(x), -pi/2, pi/2)
> integrate(function(x) x^3 / sin(x), -pi/2, 0)
> integrate(function(x) x^3 / sin(x), 0, pi/2)
> # but this does NOT work:
> integrate(function(x) x^3 / sin(x), -pi/2, pi/2, subdivisions=4096)
> integrate(function(x) x^3 / sin(x), -pi/2, pi/2, subdivisions=4097)
> # works:
> integrate(function(x) x^3 / sin(x), -pi/2, pi/2 + 1E-10)
>
>
> # Note: works directly with other packages
>
> pracma::integral(function(x) x^3 / sin(x), -pi/2, pi/2 )
> # 3.385985
>
>
> I hope that integrate() gets improved in base R as well.
>
>
> Sincerely,
>
>
> Leonard
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Sun Jan  8 05:02:09 2023
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Sat, 7 Jan 2023 23:02:09 -0500
Subject: [R] 
 Problem with integrate(function(x) x^3 / sin(x), -pi/2, pi/2)
In-Reply-To: <8d1cba31-d670-c019-1700-60ceb64f2e2d@syonic.eu>
References: <9b342177-ce55-b234-0b4f-699b4ca81b20@syonic.eu>
 <CAPcHnpS5eLjZ9UsB+H9PqD6PjoyVwN5=2T9JmM3BfdYg+qiBXQ@mail.gmail.com>
 <8d1cba31-d670-c019-1700-60ceb64f2e2d@syonic.eu>
Message-ID: <CAPcHnpQGSk2oQ2xgZdMivoMsNNB9EeSWwVV0-0QZ3tKgn9WP-A@mail.gmail.com>

`subdivisions` is the maximum number of subintervals. Looking here

https://github.com/wch/r-source/blob/79298c499218846d14500255efd622b5021c10ec/src/appl/integrate.c#L1275

I'm not surprised that changing `subdivisions` has no effect on the
outcome. The integration method from {pracma} might work, maybe it
never calculates the function at 0, maybe it's using some alternate
method. Or maybe it did calculate f(0) and got NaN and just assumed
that the limit converged. Maybe that's a fair assumption, and maybe
it's not.

However:

integrate(function(x) ifelse(x == 0, 0, x^3/sin(x), -pi/2, pi/2)

works perfectly fine and is a better function definition anyway.
`integrate` in the {stats} package is unlikely to change, so use the
alternate function definition or use {pracma}.

On Sat, Jan 7, 2023 at 10:41 PM Leonard Mada <leo.mada at syonic.eu> wrote:
>
> Dear Andrew,
>
>
> The limit when x approaches 0 is 0. I think most integration algorithms handle this situation.
>
>
> This actually works, and it "includes" formally the point x = 0:
>
> integrate(function(x) x^3 / sin(x), -pi/2, pi/2 + 1E-10)
>
>
> Trying to "bypass" the 0 using subdivisions unfortunately did not work:
>
> integrate(function(x) x^3 / sin(x), -pi/2, pi/2, subdivisions=4097) # or 4096
>
>
> Sincerely,
>
>
> Leonard
>
>
> On 1/8/2023 5:32 AM, Andrew Simmons wrote:
>
> You're dividing 0 by 0, giving you NaN, perhaps you should try
>
> function(x) ifelse(x == 0, 0, x^3/sin(x))
>
> On Sat, Jan 7, 2023, 22:24 Leonard Mada via R-help <r-help at r-project.org> wrote:
>>
>> Dear List-Members,
>>
>> I encounter a problem while trying to integrate the following function:
>>
>> integrate(function(x) x^3 / sin(x), -pi/2, pi/2)
>> # Error in integrate(function(x) x^3/sin(x), -pi/2, pi/2) :
>> #  non-finite function value
>>
>> # the value should be finite:
>> curve(x^3 / sin(x), -pi/2, pi/2)
>> integrate(function(x) x^3 / sin(x), -pi/2, 0)
>> integrate(function(x) x^3 / sin(x), 0, pi/2)
>> # but this does NOT work:
>> integrate(function(x) x^3 / sin(x), -pi/2, pi/2, subdivisions=4096)
>> integrate(function(x) x^3 / sin(x), -pi/2, pi/2, subdivisions=4097)
>> # works:
>> integrate(function(x) x^3 / sin(x), -pi/2, pi/2 + 1E-10)
>>
>>
>> # Note: works directly with other packages
>>
>> pracma::integral(function(x) x^3 / sin(x), -pi/2, pi/2 )
>> # 3.385985
>>
>>
>> I hope that integrate() gets improved in base R as well.
>>
>>
>> Sincerely,
>>
>>
>> Leonard
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From kry|ov@r00t @end|ng |rom gm@||@com  Sun Jan  8 08:27:05 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Sun, 8 Jan 2023 10:27:05 +0300
Subject: [R] 
 Problem with integrate(function(x) x^3 / sin(x), -pi/2, pi/2)
In-Reply-To: <9b342177-ce55-b234-0b4f-699b4ca81b20@syonic.eu>
References: <9b342177-ce55-b234-0b4f-699b4ca81b20@syonic.eu>
Message-ID: <20230108102705.348ae5c4@Tarkus>

On Sun, 8 Jan 2023 05:24:05 +0200
Leonard Mada via R-help <r-help at r-project.org> wrote:

> pracma::integral(function(x) x^3 / sin(x), -pi/2, pi/2 )
> # 3.385985

Note that at least one implementation used by pracma::integral has the
same problem:

pracma::integral(function(x) x^3/sin(x), -pi/2, pi/2, no_intervals=7)
# [1] NaN
# Warning:
# In .gkadpt(f, a, b, tol = tol) : Infinite or NA function value
# encountered.

You just have to be less lucky to have it evaluate the function at 0.
By default, the subdivision strategy used by pracma::integral combined
with the default number of intervals leaves the special point on the
edge of the interval, where the function happens not to be evaluated.

-- 
Best regards,
Ivan


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Jan  8 09:59:58 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 8 Jan 2023 08:59:58 +0000
Subject: [R] extracting a table from pdf file....
Message-ID: <PU4P216MB156880E6BD28FFC8405882F8C8F99@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

dear members,
                            I am extracting a pdf table into a data frame from this URL:

https://www.canmoney.in/pdf/INTRADAYLEVERAGE-20220531-latest.pdf

I am using extract_table() from the tabulizer package (it is archived and have installed it from github)

IDTpdf <- extract_tables("https://www.canmoney.in/pdf/INTRADAYLEVERAGE-20220531-latest.pdf",output="data.frame")

But IDTpdf consists of four different dfs, and I want to collapse them into one. The dput of IDTpdf:

list(structure(list(SCRIPS.AVAILABLE.FOR.INTRADAY.WITH.LEVERAGES.PROVIDED.ON.THEM = c("S.No.",
"times)", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10",
"11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21",
"22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32",
"33", "34", "35", "36", "37", "38", "39", "40", "41", "42", "43",
"44", "45", "46", "47", "48", "49", "50", "51", "52", "53"),
    X = c("Scrip Name", "", "ALKEM LABORATORIES LTD.", "ATUL LTD",
    "ABB INDIA LIMITED", "AARTI INDUSTRIES LTD", "ABBOTT INDIA LIMITED",
    "ADITYA BIRLA CAPITAL LTD.", "ADITYA BIRLA FASHION & RT",
    "ACC LIMITED", "ADANI ENTERPRISES LIMITED", "ADANI PORT & SEZ LTD",
    "AMARA RAJA BATTERIES LTD.", "ASTRAL LIMITED", "AMBUJA CEMENTS LTD",
    "ALEMBIC PHARMA LTD", "APOLLO HOSPITALS ENTER. L", "APOLLO TYRES LTD",
    "ASHOK LEYLAND LTD", "ASIAN PAINTS LIMITED", "AU SMALL FINANCE BANK LTD",
    "AUROBINDO PHARMA LTD", "AXIS BANK LIMITED", "BAJAJ AUTO LIMITED",
    "BAJAJ FINSERV LTD.", "BAJAJ FINANCE LIMITED", "BALRAMPUR CHINI MILLS LTD",
    "BANDHAN BANK LIMITED", "BANK OF BARODA", "BATA INDIA LTD",
    "BHARAT ELECTRONICS LTD", "BERGER PAINTS (I) LTD", "BHARTI AIRTEL LIMITED",
    "BHEL", "BIOCON LIMITED.", "BOSCH LIMITED", "BRITANNIA INDUSTRIES LTD",
    "BIRLASOFT LIMITED", "ZYDUS LIFESCIENCES LTD", "CANARA BANK",
    "CAN FIN HOMES LTD", "CHAMBAL FERTILIZERS LTD", "CHOLAMANDALAM IN & FIN CO",
    "CIPLA LTD", "COAL INDIA LTD", "COFORGE LIMITED", "COLGATE PALMOLIVE LTD.",
    "CONTAINER CORP OF IND LTD", "COROMANDEL INTERNTL. LTD",
    "CROMPT GREA CON ELEC LTD", "CITY UNION BANK LTD", "CUMMINS INDIA LTD",
    "DABUR INDIA LTD", "DEEPAK NITRITE LTD", "DELTA CORP LIMITED"
    ), X.1 = c("Symbol Series", "", "ALKEM", "ATUL", "ABB", "AARTIIND",
    "ABBOTINDIA", "ABCAPITAL", "ABFRL", "ACC", "ADANIENT", "ADANIPORTS",
    "AMARAJABAT", "ASTRAL", "AMBUJACEM", "APLLTD", "APOLLOHOSP",
    "APOLLOTYRE", "ASHOKLEY", "ASIANPAINT", "AUBANK", "AUROPHARMA",
    "AXISBANK", "BAJAJ-AUTO", "BAJAJFINSV", "BAJFINANCE", "BALRAMCHIN",
    "BANDHANBNK", "BANKBARODA", "BATAINDIA", "BEL", "BERGEPAINT",
    "BHARTIARTL", "BHEL", "BIOCON", "BOSCHLTD", "BRITANNIA",
    "BSOFT", "ZYDUSLIFE", "CANBK", "CANFINHOME", "CHAMBLFERT",
    "CHOLAFIN", "CIPLA", "COALINDIA", "COFORGE", "COLPAL", "CONCOR",
    "COROMANDEL", "CROMPTON", "CUB", "CUMMINSIND", "DABUR", "DEEPAKNTR",
    "DELTACORP"), X.2 = c("Leverage (in", "", "4.5", "4.5", "4.5",
    "4.5", "4.5", "4.5", "4.5", "4.5", "4", "4.5", "4.5", "4.5",
    "4.5", "4.5", "4.5", "4.5", "4.5", "4.5", "4.5", "4.5", "4.5",
    "4.5", "4.5", "4.5", "4", "4", "4.5", "4.5", "4.5", "4.5",
    "4.5", "4", "4.5", "4.5", "4.5", "4", "4.5", "4", "4.5",
    "4", "4", "4.5", "4.5", "4", "4.5", "4.5", "4.5", "4.5",
    "4.5", "4.5", "4.5", "4.5", "4")), class = "data.frame", row.names = c(NA,
-55L)), structure(list(X54 = 55:110, DIVI.S.LABORATORIES.LTD = c("DIXON TECHNO (INDIA) LTD",
"DLF LIMITED", "DR. REDDY S LABORATORIES", "ESCORTS INDIA LTD",
"EXIDE INDUSTRIES LTD", "FEDERAL BANK LTD", "FIRSTSOURCE SOLU. LTD.",
"GAIL (INDIA) LTD", "GLENMARK PHARMACEUTICALS", "GMR INFRASTRUCTURE LTD.",
"GUJ NAR VAL FER & CHEM L", "DALMIA BHARAT LIMITED", "GODREJ CONSUMER PRODUCTS",
"GRANULES INDIA LIMITED", "GRASIM INDUSTRIES LTD", "GUJARAT STATE PETRO LTD",
"GUJARAT GAS LIMITED", "HINDUSTAN AERONAUTICS LTD", "HAVELLS INDIA LIMITED",
"HCL TECHNOLOGIES LTD", "HDFC LTD", "HDFC AMC LIMITED", "HDFC BANK LTD",
"HDFC LIFE INS CO LTD", "HERO MOTOCORP LIMITED", "HINDALCO INDUSTRIES LTD",
"HINDUSTAN COPPER LTD", "HONEYWELL AUTOMATION IND", "ICICI BANK LTD.",
"ICICI LOMBARD GIC LIMITED", "ICICI PRU LIFE INS CO LTD", "IDFC LIMITED",
"IDFC FIRST BANK LIMITED", "INDIAN ENERGY EXC LTD", "INDRAPRASTHA GAS LTD",
"THE INDIAN HOTELS CO. LTD", "THE INDIA CEMENTS LIMITED", "INDIAMART INTERMESH LTD",
"INTERGLOBE AVIATION LTD", "INDUSIND BANK LIMITED", "INDUS TOWERS LIMITED",
"INFOSYS LIMITED", "INTELLECT DESIGN ARENA", "INDIAN OIL CORP LTD",
"IPCA LABORATORIES LTD", "INDIAN RAIL TOUR CORP LTD", "ITC LTD",
"JINDAL STEEL & POWER LTD", "JSW STEEL LIMITED", "JUBILANT FOODWORKS LTD",
"KOTAK MAHINDRA BANK LTD", "L&T FINANCE HOLDINGS LTD", "DR. LAL PATH LABS LTD.",
"LAURUS LABS LIMITED", "LIC HOUSING FINANCE LTD", "LARSEN & TOUBRO LTD."
), DIVISLAB = c("DIXON", "DLF", "DRREDDY", "ESCORTS", "EXIDEIND",
"FEDERALBNK", "FSL", "GAIL", "GLENMARK", "GMRINFRA", "GNFC",
"DALBHARAT", "GODREJCP", "GRANULES", "GRASIM", "GSPL", "GUJGASLTD",
"HAL", "HAVELLS", "HCLTECH", "HDFC", "HDFCAMC", "HDFCBANK", "HDFCLIFE",
"HEROMOTOCO", "HINDALCO", "HINDCOPPER", "HONAUT", "ICICIBANK",
"ICICIGI", "ICICIPRULI", "IDFC", "IDFCFIRSTB", "IEX", "IGL",
"INDHOTEL", "INDIACEM", "INDIAMART", "INDIGO", "INDUSINDBK",
"INDUSTOWER", "INFY", "INTELLECT", "IOC", "IPCALAB", "IRCTC",
"ITC", "JINDALSTEL", "JSWSTEEL", "JUBLFOOD", "KOTAKBANK", "L&TFH",
"LALPATHLAB", "LAURUSLABS", "LICHSGFIN", "LT"), X4.5 = c(4.5,
4, 4.5, 4.5, 4.5, 4.5, 4, 4.5, 4.5, 4.5, 4, 4.5, 4.5, 4.5, 4.5,
4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4, 4.5,
4.5, 4.5, 4.5, 4, 4.5, 4.5, 4.5, 4.5, 4, 4, 4.5, 4, 4, 4.5, 4,
4.5, 4.5, 4, 4.5, 4, 4.5, 4.5, 4.5, 4, 4.5, 4.5, 4.5, 4.5)), class = "data.frame", row.names = c(NA,
-56L)), structure(list(X111 = 112:167, L.T.INFOTECH.LIMITED = c("L&T TECHNOLOGY SER. LTD.",
"LUPIN LIMITED", "MAHINDRA & MAHINDRA LTD", "M&M FIN. SERVICES LTD",
"MANAPPURAM FINANCE LTD", "MARICO LIMITED", "MARUTI SUZUKI INDIA LTD.",
"UNITED SPIRITS LIMITED", "MULTI COMMODITY EXCHANGE", "MAX FINANCIAL SERV LTD",
"MAHANAGAR GAS LTD.", "MINDTREE LIMITED", "MOTHERSON SUMI SYSTEMS LT",
"MPHASIS LIMITED", "MRF LTD", "MUTHOOT FINANCE LIMITED", "NATIONAL ALUMINIUM CO LTD",
"INFO EDGE (I) LTD", "NAVIN FLUORINE INT. LTD", "NBCC (INDIA) LIMITED",
"NMDC LTD.", "NTPC LTD", "OBEROI REALTY LIMITED", "ORACLE FIN SERV SOFT LTD.",
"OIL AND NATURAL GAS CORP.", "PAGE INDUSTRIES LTD", "PIRAMAL ENTERPRISES LTD",
"PERSISTENT SYSTEMS LTD", "PETRONET LNG LIMITED", "POWER FIN CORP LTD.",
"PIDILITE INDUSTRIES LTD", "PI INDUSTRIES LTD", "PUNJAB NATIONAL BANK",
"POLYCAB INDIA LIMITED", "POWER GRID CORP. LTD.", "PVR LIMITED",
"RAIN INDUSTRIES LIMITED", "THE RAMCO CEMENTS LIMITED", "RBL BANK LIMITED",
"REC LIMITED", "RELIANCE INDUSTRIES LTD", "STEEL AUTHORITY OF INDIA",
"SBI CARDS & PAY SER LTD", "SBI LIFE INSURANCE CO LTD", "STATE BANK OF INDIA",
"SHREE CEMENT LIMITED", "SIEMENS LTD", "SRF LTD", "SHRIRAM TRANSPORT FIN CO.",
"STRIDES PHARMA SCI LTD", "SUN PHARMACEUTICAL IND L", "SUN TV NETWORK LIMITED",
"SYNGENE INTERNATIONAL LTD", "TATA CHEMICALS LTD", "TATA COMMUNICATIONS LTD",
"TATA CONSUMER PRODUCT LTD"), LTI = c("LTTS", "LUPIN", "M&M",
"M&MFIN", "MANAPPURAM", "MARICO", "MARUTI", "MCDOWELL-N", "MCX",
"MFSL", "MGL", "MINDTREE", "MOTHERSUMI", "MPHASIS", "MRF", "MUTHOOTFIN",
"NATIONALUM", "NAUKRI", "NAVINFLUOR", "NBCC", "NMDC", "NTPC",
"OBEROIRLTY", "OFSS", "ONGC", "PAGEIND", "PEL", "PERSISTENT",
"PETRONET", "PFC", "PIDILITIND", "PIIND", "PNB", "POLYCAB", "POWERGRID",
"PVR", "RAIN", "RAMCOCEM", "RBLBANK", "RECLTD", "RELIANCE", "SAIL",
"SBICARD", "SBILIFE", "SBIN", "SHREECEM", "SIEMENS", "SRF", "SRTRANSFIN",
"STAR", "SUNPHARMA", "SUNTV", "SYNGENE", "TATACHEM", "TATACOMM",
"TATACONSUM"), X4.5 = c(4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5,
4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4, 4.5,
4.5, 4.5, 4.5, 4.5, 4.5, 4, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5,
4.5, 4.5, 4, 4.5, 4, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5,
4.5, 4, 4, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5)), class = "data.frame", row.names = c(NA,
-56L)), structure(list(X168 = 169:198, TATA.MOTORS.LIMITED = c("TATA POWER CO LTD",
"TATA STEEL LIMITED", "TATA CONSULTANCY SERV LT", "TECH MAHINDRA LIMITED",
"TITAN COMPANY LIMITED", "TORRENT PHARMACEUTICALS L", "TORRENT POWER LTD",
"TRENT LTD", "TVS MOTOR COMPANY  LTD", "UNITED BREWERIES LTD",
"ULTRATECH CEMENT LIMITED", "UPL LIMITED", "VEDANTA LIMITED",
"VOLTAS LTD", "WHIRLPOOL OF INDIA LTD", "WIPRO LTD", "ZEE ENTERTAINMENT ENT LTD",
"BALKRISHNA IND. LTD", "BHARAT FORGE LTD", "BHARAT PETROLEUM CORP  LT",
"EICHER MOTORS LTD", "GODREJ PROPERTIES LTD", "HINDUSTAN PETROLEUM CORP",
"JK CEMENT LIMITED", "NESTLE INDIA LIMITED", "METROPOLIS HEALTHCARE LTD",
"HINDUSTAN UNILEVER LTD.", "VODAFONE IDEA LIMITED", "NIPPON L I A M LTD",
"INDIABULLS HSG FIN LTD"), TATAMOTORS = c("TATAPOWER", "TATASTEEL",
"TCS", "TECHM", "TITAN", "TORNTPHARM", "TORNTPOWER", "TRENT",
"TVSMOTOR", "UBL", "ULTRACEMCO", "UPL", "VEDL", "VOLTAS", "WHIRLPOOL",
"WIPRO", "ZEEL", "BALKRISIND", "BHARATFORG", "BPCL", "EICHERMOT",
"GODREJPROP", "HINDPETRO", "JKCEMENT", "NESTLEIND", "METROPOLIS",
"HINDUNILVR", "IDEA", "NAM-INDIA", "IBULHSGFIN"), X4 = c(4.5,
4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5,
4.5, 4.5, 3, 4.5, 4.5, 4.5, 4.5, 4, 4.5, 4.5, 4.5, 4.5, 4.5,
4.5, 4.5, 3)), class = "data.frame", row.names = c(NA, -30L)))

unlist(IDTpdf) is not working. It makes IDTpdf a lot messier...

I want IDTpdf to be one data frame combining all the four pages in the above url...

ANy help will be greatly appreciated...

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI


	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sun Jan  8 11:29:19 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 08 Jan 2023 02:29:19 -0800
Subject: [R] extracting a table from pdf file....
In-Reply-To: <PU4P216MB156880E6BD28FFC8405882F8C8F99@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156880E6BD28FFC8405882F8C8F99@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <E354499F-1297-4EA5-A35B-30E7139969A1@dcn.davis.ca.us>

Here is a start for two of them... PDF files are actually programs written in the Postscript language... there are a lot of ways to write a program to put marks on a page, so this mess is actually not as bad a result as you might have encountered.

str(IDTpdf)

DF <- IDTpdf[[1]][ -(1:2), ]
names( DF ) <- c( "SNo", "Scrip", "Symbol", "Leverage" )
DF$SNo <- as.integer( DF$SNo )
DF$Leverage <- as.numeric( DF$Leverage )
IDTpdf[[ 1 ]] <- DF

DF <- IDTpdf[[2]]
names( DF ) <- c( "SNo", "Scrip", "Symbol", "Leverage" )
DF <- rbind(
  data.frame(
    SNo = 54
  , Symbol = "DIVISLAB"
  , Scrip = "DIVIS LABORATORIES LTD"
  , Leverage = 4.5
  )
, DF
)
IDTpdf[[ 2 ]] <- DF

do.call( rbind, IDTpdf[ 1:2 ] )

On January 8, 2023 12:59:58 AM PST, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>dear members,
>                            I am extracting a pdf table into a data frame from this URL:
>
>https://www.canmoney.in/pdf/INTRADAYLEVERAGE-20220531-latest.pdf
>
>I am using extract_table() from the tabulizer package (it is archived and have installed it from github)
>
>IDTpdf <- extract_tables("https://www.canmoney.in/pdf/INTRADAYLEVERAGE-20220531-latest.pdf",output="data.frame")
>
>But IDTpdf consists of four different dfs, and I want to collapse them into one. The dput of IDTpdf:
>
>list(structure(list(SCRIPS.AVAILABLE.FOR.INTRADAY.WITH.LEVERAGES.PROVIDED.ON.THEM = c("S.No.",
>"times)", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10",
>"11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21",
>"22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32",
>"33", "34", "35", "36", "37", "38", "39", "40", "41", "42", "43",
>"44", "45", "46", "47", "48", "49", "50", "51", "52", "53"),
>    X = c("Scrip Name", "", "ALKEM LABORATORIES LTD.", "ATUL LTD",
>    "ABB INDIA LIMITED", "AARTI INDUSTRIES LTD", "ABBOTT INDIA LIMITED",
>    "ADITYA BIRLA CAPITAL LTD.", "ADITYA BIRLA FASHION & RT",
>    "ACC LIMITED", "ADANI ENTERPRISES LIMITED", "ADANI PORT & SEZ LTD",
>    "AMARA RAJA BATTERIES LTD.", "ASTRAL LIMITED", "AMBUJA CEMENTS LTD",
>    "ALEMBIC PHARMA LTD", "APOLLO HOSPITALS ENTER. L", "APOLLO TYRES LTD",
>    "ASHOK LEYLAND LTD", "ASIAN PAINTS LIMITED", "AU SMALL FINANCE BANK LTD",
>    "AUROBINDO PHARMA LTD", "AXIS BANK LIMITED", "BAJAJ AUTO LIMITED",
>    "BAJAJ FINSERV LTD.", "BAJAJ FINANCE LIMITED", "BALRAMPUR CHINI MILLS LTD",
>    "BANDHAN BANK LIMITED", "BANK OF BARODA", "BATA INDIA LTD",
>    "BHARAT ELECTRONICS LTD", "BERGER PAINTS (I) LTD", "BHARTI AIRTEL LIMITED",
>    "BHEL", "BIOCON LIMITED.", "BOSCH LIMITED", "BRITANNIA INDUSTRIES LTD",
>    "BIRLASOFT LIMITED", "ZYDUS LIFESCIENCES LTD", "CANARA BANK",
>    "CAN FIN HOMES LTD", "CHAMBAL FERTILIZERS LTD", "CHOLAMANDALAM IN & FIN CO",
>    "CIPLA LTD", "COAL INDIA LTD", "COFORGE LIMITED", "COLGATE PALMOLIVE LTD.",
>    "CONTAINER CORP OF IND LTD", "COROMANDEL INTERNTL. LTD",
>    "CROMPT GREA CON ELEC LTD", "CITY UNION BANK LTD", "CUMMINS INDIA LTD",
>    "DABUR INDIA LTD", "DEEPAK NITRITE LTD", "DELTA CORP LIMITED"
>    ), X.1 = c("Symbol Series", "", "ALKEM", "ATUL", "ABB", "AARTIIND",
>    "ABBOTINDIA", "ABCAPITAL", "ABFRL", "ACC", "ADANIENT", "ADANIPORTS",
>    "AMARAJABAT", "ASTRAL", "AMBUJACEM", "APLLTD", "APOLLOHOSP",
>    "APOLLOTYRE", "ASHOKLEY", "ASIANPAINT", "AUBANK", "AUROPHARMA",
>    "AXISBANK", "BAJAJ-AUTO", "BAJAJFINSV", "BAJFINANCE", "BALRAMCHIN",
>    "BANDHANBNK", "BANKBARODA", "BATAINDIA", "BEL", "BERGEPAINT",
>    "BHARTIARTL", "BHEL", "BIOCON", "BOSCHLTD", "BRITANNIA",
>    "BSOFT", "ZYDUSLIFE", "CANBK", "CANFINHOME", "CHAMBLFERT",
>    "CHOLAFIN", "CIPLA", "COALINDIA", "COFORGE", "COLPAL", "CONCOR",
>    "COROMANDEL", "CROMPTON", "CUB", "CUMMINSIND", "DABUR", "DEEPAKNTR",
>    "DELTACORP"), X.2 = c("Leverage (in", "", "4.5", "4.5", "4.5",
>    "4.5", "4.5", "4.5", "4.5", "4.5", "4", "4.5", "4.5", "4.5",
>    "4.5", "4.5", "4.5", "4.5", "4.5", "4.5", "4.5", "4.5", "4.5",
>    "4.5", "4.5", "4.5", "4", "4", "4.5", "4.5", "4.5", "4.5",
>    "4.5", "4", "4.5", "4.5", "4.5", "4", "4.5", "4", "4.5",
>    "4", "4", "4.5", "4.5", "4", "4.5", "4.5", "4.5", "4.5",
>    "4.5", "4.5", "4.5", "4.5", "4")), class = "data.frame", row.names = c(NA,
>-55L)), structure(list(X54 = 55:110, DIVI.S.LABORATORIES.LTD = c("DIXON TECHNO (INDIA) LTD",
>"DLF LIMITED", "DR. REDDY S LABORATORIES", "ESCORTS INDIA LTD",
>"EXIDE INDUSTRIES LTD", "FEDERAL BANK LTD", "FIRSTSOURCE SOLU. LTD.",
>"GAIL (INDIA) LTD", "GLENMARK PHARMACEUTICALS", "GMR INFRASTRUCTURE LTD.",
>"GUJ NAR VAL FER & CHEM L", "DALMIA BHARAT LIMITED", "GODREJ CONSUMER PRODUCTS",
>"GRANULES INDIA LIMITED", "GRASIM INDUSTRIES LTD", "GUJARAT STATE PETRO LTD",
>"GUJARAT GAS LIMITED", "HINDUSTAN AERONAUTICS LTD", "HAVELLS INDIA LIMITED",
>"HCL TECHNOLOGIES LTD", "HDFC LTD", "HDFC AMC LIMITED", "HDFC BANK LTD",
>"HDFC LIFE INS CO LTD", "HERO MOTOCORP LIMITED", "HINDALCO INDUSTRIES LTD",
>"HINDUSTAN COPPER LTD", "HONEYWELL AUTOMATION IND", "ICICI BANK LTD.",
>"ICICI LOMBARD GIC LIMITED", "ICICI PRU LIFE INS CO LTD", "IDFC LIMITED",
>"IDFC FIRST BANK LIMITED", "INDIAN ENERGY EXC LTD", "INDRAPRASTHA GAS LTD",
>"THE INDIAN HOTELS CO. LTD", "THE INDIA CEMENTS LIMITED", "INDIAMART INTERMESH LTD",
>"INTERGLOBE AVIATION LTD", "INDUSIND BANK LIMITED", "INDUS TOWERS LIMITED",
>"INFOSYS LIMITED", "INTELLECT DESIGN ARENA", "INDIAN OIL CORP LTD",
>"IPCA LABORATORIES LTD", "INDIAN RAIL TOUR CORP LTD", "ITC LTD",
>"JINDAL STEEL & POWER LTD", "JSW STEEL LIMITED", "JUBILANT FOODWORKS LTD",
>"KOTAK MAHINDRA BANK LTD", "L&T FINANCE HOLDINGS LTD", "DR. LAL PATH LABS LTD.",
>"LAURUS LABS LIMITED", "LIC HOUSING FINANCE LTD", "LARSEN & TOUBRO LTD."
>), DIVISLAB = c("DIXON", "DLF", "DRREDDY", "ESCORTS", "EXIDEIND",
>"FEDERALBNK", "FSL", "GAIL", "GLENMARK", "GMRINFRA", "GNFC",
>"DALBHARAT", "GODREJCP", "GRANULES", "GRASIM", "GSPL", "GUJGASLTD",
>"HAL", "HAVELLS", "HCLTECH", "HDFC", "HDFCAMC", "HDFCBANK", "HDFCLIFE",
>"HEROMOTOCO", "HINDALCO", "HINDCOPPER", "HONAUT", "ICICIBANK",
>"ICICIGI", "ICICIPRULI", "IDFC", "IDFCFIRSTB", "IEX", "IGL",
>"INDHOTEL", "INDIACEM", "INDIAMART", "INDIGO", "INDUSINDBK",
>"INDUSTOWER", "INFY", "INTELLECT", "IOC", "IPCALAB", "IRCTC",
>"ITC", "JINDALSTEL", "JSWSTEEL", "JUBLFOOD", "KOTAKBANK", "L&TFH",
>"LALPATHLAB", "LAURUSLABS", "LICHSGFIN", "LT"), X4.5 = c(4.5,
>4, 4.5, 4.5, 4.5, 4.5, 4, 4.5, 4.5, 4.5, 4, 4.5, 4.5, 4.5, 4.5,
>4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4, 4.5,
>4.5, 4.5, 4.5, 4, 4.5, 4.5, 4.5, 4.5, 4, 4, 4.5, 4, 4, 4.5, 4,
>4.5, 4.5, 4, 4.5, 4, 4.5, 4.5, 4.5, 4, 4.5, 4.5, 4.5, 4.5)), class = "data.frame", row.names = c(NA,
>-56L)), structure(list(X111 = 112:167, L.T.INFOTECH.LIMITED = c("L&T TECHNOLOGY SER. LTD.",
>"LUPIN LIMITED", "MAHINDRA & MAHINDRA LTD", "M&M FIN. SERVICES LTD",
>"MANAPPURAM FINANCE LTD", "MARICO LIMITED", "MARUTI SUZUKI INDIA LTD.",
>"UNITED SPIRITS LIMITED", "MULTI COMMODITY EXCHANGE", "MAX FINANCIAL SERV LTD",
>"MAHANAGAR GAS LTD.", "MINDTREE LIMITED", "MOTHERSON SUMI SYSTEMS LT",
>"MPHASIS LIMITED", "MRF LTD", "MUTHOOT FINANCE LIMITED", "NATIONAL ALUMINIUM CO LTD",
>"INFO EDGE (I) LTD", "NAVIN FLUORINE INT. LTD", "NBCC (INDIA) LIMITED",
>"NMDC LTD.", "NTPC LTD", "OBEROI REALTY LIMITED", "ORACLE FIN SERV SOFT LTD.",
>"OIL AND NATURAL GAS CORP.", "PAGE INDUSTRIES LTD", "PIRAMAL ENTERPRISES LTD",
>"PERSISTENT SYSTEMS LTD", "PETRONET LNG LIMITED", "POWER FIN CORP LTD.",
>"PIDILITE INDUSTRIES LTD", "PI INDUSTRIES LTD", "PUNJAB NATIONAL BANK",
>"POLYCAB INDIA LIMITED", "POWER GRID CORP. LTD.", "PVR LIMITED",
>"RAIN INDUSTRIES LIMITED", "THE RAMCO CEMENTS LIMITED", "RBL BANK LIMITED",
>"REC LIMITED", "RELIANCE INDUSTRIES LTD", "STEEL AUTHORITY OF INDIA",
>"SBI CARDS & PAY SER LTD", "SBI LIFE INSURANCE CO LTD", "STATE BANK OF INDIA",
>"SHREE CEMENT LIMITED", "SIEMENS LTD", "SRF LTD", "SHRIRAM TRANSPORT FIN CO.",
>"STRIDES PHARMA SCI LTD", "SUN PHARMACEUTICAL IND L", "SUN TV NETWORK LIMITED",
>"SYNGENE INTERNATIONAL LTD", "TATA CHEMICALS LTD", "TATA COMMUNICATIONS LTD",
>"TATA CONSUMER PRODUCT LTD"), LTI = c("LTTS", "LUPIN", "M&M",
>"M&MFIN", "MANAPPURAM", "MARICO", "MARUTI", "MCDOWELL-N", "MCX",
>"MFSL", "MGL", "MINDTREE", "MOTHERSUMI", "MPHASIS", "MRF", "MUTHOOTFIN",
>"NATIONALUM", "NAUKRI", "NAVINFLUOR", "NBCC", "NMDC", "NTPC",
>"OBEROIRLTY", "OFSS", "ONGC", "PAGEIND", "PEL", "PERSISTENT",
>"PETRONET", "PFC", "PIDILITIND", "PIIND", "PNB", "POLYCAB", "POWERGRID",
>"PVR", "RAIN", "RAMCOCEM", "RBLBANK", "RECLTD", "RELIANCE", "SAIL",
>"SBICARD", "SBILIFE", "SBIN", "SHREECEM", "SIEMENS", "SRF", "SRTRANSFIN",
>"STAR", "SUNPHARMA", "SUNTV", "SYNGENE", "TATACHEM", "TATACOMM",
>"TATACONSUM"), X4.5 = c(4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5,
>4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4, 4.5,
>4.5, 4.5, 4.5, 4.5, 4.5, 4, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5,
>4.5, 4.5, 4, 4.5, 4, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5,
>4.5, 4, 4, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5)), class = "data.frame", row.names = c(NA,
>-56L)), structure(list(X168 = 169:198, TATA.MOTORS.LIMITED = c("TATA POWER CO LTD",
>"TATA STEEL LIMITED", "TATA CONSULTANCY SERV LT", "TECH MAHINDRA LIMITED",
>"TITAN COMPANY LIMITED", "TORRENT PHARMACEUTICALS L", "TORRENT POWER LTD",
>"TRENT LTD", "TVS MOTOR COMPANY  LTD", "UNITED BREWERIES LTD",
>"ULTRATECH CEMENT LIMITED", "UPL LIMITED", "VEDANTA LIMITED",
>"VOLTAS LTD", "WHIRLPOOL OF INDIA LTD", "WIPRO LTD", "ZEE ENTERTAINMENT ENT LTD",
>"BALKRISHNA IND. LTD", "BHARAT FORGE LTD", "BHARAT PETROLEUM CORP  LT",
>"EICHER MOTORS LTD", "GODREJ PROPERTIES LTD", "HINDUSTAN PETROLEUM CORP",
>"JK CEMENT LIMITED", "NESTLE INDIA LIMITED", "METROPOLIS HEALTHCARE LTD",
>"HINDUSTAN UNILEVER LTD.", "VODAFONE IDEA LIMITED", "NIPPON L I A M LTD",
>"INDIABULLS HSG FIN LTD"), TATAMOTORS = c("TATAPOWER", "TATASTEEL",
>"TCS", "TECHM", "TITAN", "TORNTPHARM", "TORNTPOWER", "TRENT",
>"TVSMOTOR", "UBL", "ULTRACEMCO", "UPL", "VEDL", "VOLTAS", "WHIRLPOOL",
>"WIPRO", "ZEEL", "BALKRISIND", "BHARATFORG", "BPCL", "EICHERMOT",
>"GODREJPROP", "HINDPETRO", "JKCEMENT", "NESTLEIND", "METROPOLIS",
>"HINDUNILVR", "IDEA", "NAM-INDIA", "IBULHSGFIN"), X4 = c(4.5,
>4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5,
>4.5, 4.5, 3, 4.5, 4.5, 4.5, 4.5, 4, 4.5, 4.5, 4.5, 4.5, 4.5,
>4.5, 4.5, 3)), class = "data.frame", row.names = c(NA, -30L)))
>
>unlist(IDTpdf) is not working. It makes IDTpdf a lot messier...
>
>I want IDTpdf to be one data frame combining all the four pages in the above url...
>
>ANy help will be greatly appreciated...
>
>Thanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Jan  8 12:54:45 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 8 Jan 2023 11:54:45 +0000
Subject: [R] extracting a table from pdf file....
In-Reply-To: <E354499F-1297-4EA5-A35B-30E7139969A1@dcn.davis.ca.us>
References: <PU4P216MB156880E6BD28FFC8405882F8C8F99@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <E354499F-1297-4EA5-A35B-30E7139969A1@dcn.davis.ca.us>
Message-ID: <PU4P216MB156834688CD4CCC8910B686EC8F99@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear jeff,
                  Thanks a lot....

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Sent: Sunday, January 8, 2023 3:59 PM
To: r-help at r-project.org <r-help at r-project.org>; akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] extracting a table from pdf file....

Here is a start for two of them... PDF files are actually programs written in the Postscript language... there are a lot of ways to write a program to put marks on a page, so this mess is actually not as bad a result as you might have encountered.

str(IDTpdf)

DF <- IDTpdf[[1]][ -(1:2), ]
names( DF ) <- c( "SNo", "Scrip", "Symbol", "Leverage" )
DF$SNo <- as.integer( DF$SNo )
DF$Leverage <- as.numeric( DF$Leverage )
IDTpdf[[ 1 ]] <- DF

DF <- IDTpdf[[2]]
names( DF ) <- c( "SNo", "Scrip", "Symbol", "Leverage" )
DF <- rbind(
  data.frame(
    SNo = 54
  , Symbol = "DIVISLAB"
  , Scrip = "DIVIS LABORATORIES LTD"
  , Leverage = 4.5
  )
, DF
)
IDTpdf[[ 2 ]] <- DF

do.call( rbind, IDTpdf[ 1:2 ] )

On January 8, 2023 12:59:58 AM PST, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>dear members,
>                            I am extracting a pdf table into a data frame from this URL:
>
>https://www.canmoney.in/pdf/INTRADAYLEVERAGE-20220531-latest.pdf
>
>I am using extract_table() from the tabulizer package (it is archived and have installed it from github)
>
>IDTpdf <- extract_tables("https://www.canmoney.in/pdf/INTRADAYLEVERAGE-20220531-latest.pdf",output="data.frame")
>
>But IDTpdf consists of four different dfs, and I want to collapse them into one. The dput of IDTpdf:
>
>list(structure(list(SCRIPS.AVAILABLE.FOR.INTRADAY.WITH.LEVERAGES.PROVIDED.ON.THEM = c("S.No.",
>"times)", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10",
>"11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21",
>"22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32",
>"33", "34", "35", "36", "37", "38", "39", "40", "41", "42", "43",
>"44", "45", "46", "47", "48", "49", "50", "51", "52", "53"),
>    X = c("Scrip Name", "", "ALKEM LABORATORIES LTD.", "ATUL LTD",
>    "ABB INDIA LIMITED", "AARTI INDUSTRIES LTD", "ABBOTT INDIA LIMITED",
>    "ADITYA BIRLA CAPITAL LTD.", "ADITYA BIRLA FASHION & RT",
>    "ACC LIMITED", "ADANI ENTERPRISES LIMITED", "ADANI PORT & SEZ LTD",
>    "AMARA RAJA BATTERIES LTD.", "ASTRAL LIMITED", "AMBUJA CEMENTS LTD",
>    "ALEMBIC PHARMA LTD", "APOLLO HOSPITALS ENTER. L", "APOLLO TYRES LTD",
>    "ASHOK LEYLAND LTD", "ASIAN PAINTS LIMITED", "AU SMALL FINANCE BANK LTD",
>    "AUROBINDO PHARMA LTD", "AXIS BANK LIMITED", "BAJAJ AUTO LIMITED",
>    "BAJAJ FINSERV LTD.", "BAJAJ FINANCE LIMITED", "BALRAMPUR CHINI MILLS LTD",
>    "BANDHAN BANK LIMITED", "BANK OF BARODA", "BATA INDIA LTD",
>    "BHARAT ELECTRONICS LTD", "BERGER PAINTS (I) LTD", "BHARTI AIRTEL LIMITED",
>    "BHEL", "BIOCON LIMITED.", "BOSCH LIMITED", "BRITANNIA INDUSTRIES LTD",
>    "BIRLASOFT LIMITED", "ZYDUS LIFESCIENCES LTD", "CANARA BANK",
>    "CAN FIN HOMES LTD", "CHAMBAL FERTILIZERS LTD", "CHOLAMANDALAM IN & FIN CO",
>    "CIPLA LTD", "COAL INDIA LTD", "COFORGE LIMITED", "COLGATE PALMOLIVE LTD.",
>    "CONTAINER CORP OF IND LTD", "COROMANDEL INTERNTL. LTD",
>    "CROMPT GREA CON ELEC LTD", "CITY UNION BANK LTD", "CUMMINS INDIA LTD",
>    "DABUR INDIA LTD", "DEEPAK NITRITE LTD", "DELTA CORP LIMITED"
>    ), X.1 = c("Symbol Series", "", "ALKEM", "ATUL", "ABB", "AARTIIND",
>    "ABBOTINDIA", "ABCAPITAL", "ABFRL", "ACC", "ADANIENT", "ADANIPORTS",
>    "AMARAJABAT", "ASTRAL", "AMBUJACEM", "APLLTD", "APOLLOHOSP",
>    "APOLLOTYRE", "ASHOKLEY", "ASIANPAINT", "AUBANK", "AUROPHARMA",
>    "AXISBANK", "BAJAJ-AUTO", "BAJAJFINSV", "BAJFINANCE", "BALRAMCHIN",
>    "BANDHANBNK", "BANKBARODA", "BATAINDIA", "BEL", "BERGEPAINT",
>    "BHARTIARTL", "BHEL", "BIOCON", "BOSCHLTD", "BRITANNIA",
>    "BSOFT", "ZYDUSLIFE", "CANBK", "CANFINHOME", "CHAMBLFERT",
>    "CHOLAFIN", "CIPLA", "COALINDIA", "COFORGE", "COLPAL", "CONCOR",
>    "COROMANDEL", "CROMPTON", "CUB", "CUMMINSIND", "DABUR", "DEEPAKNTR",
>    "DELTACORP"), X.2 = c("Leverage (in", "", "4.5", "4.5", "4.5",
>    "4.5", "4.5", "4.5", "4.5", "4.5", "4", "4.5", "4.5", "4.5",
>    "4.5", "4.5", "4.5", "4.5", "4.5", "4.5", "4.5", "4.5", "4.5",
>    "4.5", "4.5", "4.5", "4", "4", "4.5", "4.5", "4.5", "4.5",
>    "4.5", "4", "4.5", "4.5", "4.5", "4", "4.5", "4", "4.5",
>    "4", "4", "4.5", "4.5", "4", "4.5", "4.5", "4.5", "4.5",
>    "4.5", "4.5", "4.5", "4.5", "4")), class = "data.frame", row.names = c(NA,
>-55L)), structure(list(X54 = 55:110, DIVI.S.LABORATORIES.LTD = c("DIXON TECHNO (INDIA) LTD",
>"DLF LIMITED", "DR. REDDY S LABORATORIES", "ESCORTS INDIA LTD",
>"EXIDE INDUSTRIES LTD", "FEDERAL BANK LTD", "FIRSTSOURCE SOLU. LTD.",
>"GAIL (INDIA) LTD", "GLENMARK PHARMACEUTICALS", "GMR INFRASTRUCTURE LTD.",
>"GUJ NAR VAL FER & CHEM L", "DALMIA BHARAT LIMITED", "GODREJ CONSUMER PRODUCTS",
>"GRANULES INDIA LIMITED", "GRASIM INDUSTRIES LTD", "GUJARAT STATE PETRO LTD",
>"GUJARAT GAS LIMITED", "HINDUSTAN AERONAUTICS LTD", "HAVELLS INDIA LIMITED",
>"HCL TECHNOLOGIES LTD", "HDFC LTD", "HDFC AMC LIMITED", "HDFC BANK LTD",
>"HDFC LIFE INS CO LTD", "HERO MOTOCORP LIMITED", "HINDALCO INDUSTRIES LTD",
>"HINDUSTAN COPPER LTD", "HONEYWELL AUTOMATION IND", "ICICI BANK LTD.",
>"ICICI LOMBARD GIC LIMITED", "ICICI PRU LIFE INS CO LTD", "IDFC LIMITED",
>"IDFC FIRST BANK LIMITED", "INDIAN ENERGY EXC LTD", "INDRAPRASTHA GAS LTD",
>"THE INDIAN HOTELS CO. LTD", "THE INDIA CEMENTS LIMITED", "INDIAMART INTERMESH LTD",
>"INTERGLOBE AVIATION LTD", "INDUSIND BANK LIMITED", "INDUS TOWERS LIMITED",
>"INFOSYS LIMITED", "INTELLECT DESIGN ARENA", "INDIAN OIL CORP LTD",
>"IPCA LABORATORIES LTD", "INDIAN RAIL TOUR CORP LTD", "ITC LTD",
>"JINDAL STEEL & POWER LTD", "JSW STEEL LIMITED", "JUBILANT FOODWORKS LTD",
>"KOTAK MAHINDRA BANK LTD", "L&T FINANCE HOLDINGS LTD", "DR. LAL PATH LABS LTD.",
>"LAURUS LABS LIMITED", "LIC HOUSING FINANCE LTD", "LARSEN & TOUBRO LTD."
>), DIVISLAB = c("DIXON", "DLF", "DRREDDY", "ESCORTS", "EXIDEIND",
>"FEDERALBNK", "FSL", "GAIL", "GLENMARK", "GMRINFRA", "GNFC",
>"DALBHARAT", "GODREJCP", "GRANULES", "GRASIM", "GSPL", "GUJGASLTD",
>"HAL", "HAVELLS", "HCLTECH", "HDFC", "HDFCAMC", "HDFCBANK", "HDFCLIFE",
>"HEROMOTOCO", "HINDALCO", "HINDCOPPER", "HONAUT", "ICICIBANK",
>"ICICIGI", "ICICIPRULI", "IDFC", "IDFCFIRSTB", "IEX", "IGL",
>"INDHOTEL", "INDIACEM", "INDIAMART", "INDIGO", "INDUSINDBK",
>"INDUSTOWER", "INFY", "INTELLECT", "IOC", "IPCALAB", "IRCTC",
>"ITC", "JINDALSTEL", "JSWSTEEL", "JUBLFOOD", "KOTAKBANK", "L&TFH",
>"LALPATHLAB", "LAURUSLABS", "LICHSGFIN", "LT"), X4.5 = c(4.5,
>4, 4.5, 4.5, 4.5, 4.5, 4, 4.5, 4.5, 4.5, 4, 4.5, 4.5, 4.5, 4.5,
>4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4, 4.5,
>4.5, 4.5, 4.5, 4, 4.5, 4.5, 4.5, 4.5, 4, 4, 4.5, 4, 4, 4.5, 4,
>4.5, 4.5, 4, 4.5, 4, 4.5, 4.5, 4.5, 4, 4.5, 4.5, 4.5, 4.5)), class = "data.frame", row.names = c(NA,
>-56L)), structure(list(X111 = 112:167, L.T.INFOTECH.LIMITED = c("L&T TECHNOLOGY SER. LTD.",
>"LUPIN LIMITED", "MAHINDRA & MAHINDRA LTD", "M&M FIN. SERVICES LTD",
>"MANAPPURAM FINANCE LTD", "MARICO LIMITED", "MARUTI SUZUKI INDIA LTD.",
>"UNITED SPIRITS LIMITED", "MULTI COMMODITY EXCHANGE", "MAX FINANCIAL SERV LTD",
>"MAHANAGAR GAS LTD.", "MINDTREE LIMITED", "MOTHERSON SUMI SYSTEMS LT",
>"MPHASIS LIMITED", "MRF LTD", "MUTHOOT FINANCE LIMITED", "NATIONAL ALUMINIUM CO LTD",
>"INFO EDGE (I) LTD", "NAVIN FLUORINE INT. LTD", "NBCC (INDIA) LIMITED",
>"NMDC LTD.", "NTPC LTD", "OBEROI REALTY LIMITED", "ORACLE FIN SERV SOFT LTD.",
>"OIL AND NATURAL GAS CORP.", "PAGE INDUSTRIES LTD", "PIRAMAL ENTERPRISES LTD",
>"PERSISTENT SYSTEMS LTD", "PETRONET LNG LIMITED", "POWER FIN CORP LTD.",
>"PIDILITE INDUSTRIES LTD", "PI INDUSTRIES LTD", "PUNJAB NATIONAL BANK",
>"POLYCAB INDIA LIMITED", "POWER GRID CORP. LTD.", "PVR LIMITED",
>"RAIN INDUSTRIES LIMITED", "THE RAMCO CEMENTS LIMITED", "RBL BANK LIMITED",
>"REC LIMITED", "RELIANCE INDUSTRIES LTD", "STEEL AUTHORITY OF INDIA",
>"SBI CARDS & PAY SER LTD", "SBI LIFE INSURANCE CO LTD", "STATE BANK OF INDIA",
>"SHREE CEMENT LIMITED", "SIEMENS LTD", "SRF LTD", "SHRIRAM TRANSPORT FIN CO.",
>"STRIDES PHARMA SCI LTD", "SUN PHARMACEUTICAL IND L", "SUN TV NETWORK LIMITED",
>"SYNGENE INTERNATIONAL LTD", "TATA CHEMICALS LTD", "TATA COMMUNICATIONS LTD",
>"TATA CONSUMER PRODUCT LTD"), LTI = c("LTTS", "LUPIN", "M&M",
>"M&MFIN", "MANAPPURAM", "MARICO", "MARUTI", "MCDOWELL-N", "MCX",
>"MFSL", "MGL", "MINDTREE", "MOTHERSUMI", "MPHASIS", "MRF", "MUTHOOTFIN",
>"NATIONALUM", "NAUKRI", "NAVINFLUOR", "NBCC", "NMDC", "NTPC",
>"OBEROIRLTY", "OFSS", "ONGC", "PAGEIND", "PEL", "PERSISTENT",
>"PETRONET", "PFC", "PIDILITIND", "PIIND", "PNB", "POLYCAB", "POWERGRID",
>"PVR", "RAIN", "RAMCOCEM", "RBLBANK", "RECLTD", "RELIANCE", "SAIL",
>"SBICARD", "SBILIFE", "SBIN", "SHREECEM", "SIEMENS", "SRF", "SRTRANSFIN",
>"STAR", "SUNPHARMA", "SUNTV", "SYNGENE", "TATACHEM", "TATACOMM",
>"TATACONSUM"), X4.5 = c(4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5,
>4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4, 4.5,
>4.5, 4.5, 4.5, 4.5, 4.5, 4, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5,
>4.5, 4.5, 4, 4.5, 4, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5,
>4.5, 4, 4, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5)), class = "data.frame", row.names = c(NA,
>-56L)), structure(list(X168 = 169:198, TATA.MOTORS.LIMITED = c("TATA POWER CO LTD",
>"TATA STEEL LIMITED", "TATA CONSULTANCY SERV LT", "TECH MAHINDRA LIMITED",
>"TITAN COMPANY LIMITED", "TORRENT PHARMACEUTICALS L", "TORRENT POWER LTD",
>"TRENT LTD", "TVS MOTOR COMPANY  LTD", "UNITED BREWERIES LTD",
>"ULTRATECH CEMENT LIMITED", "UPL LIMITED", "VEDANTA LIMITED",
>"VOLTAS LTD", "WHIRLPOOL OF INDIA LTD", "WIPRO LTD", "ZEE ENTERTAINMENT ENT LTD",
>"BALKRISHNA IND. LTD", "BHARAT FORGE LTD", "BHARAT PETROLEUM CORP  LT",
>"EICHER MOTORS LTD", "GODREJ PROPERTIES LTD", "HINDUSTAN PETROLEUM CORP",
>"JK CEMENT LIMITED", "NESTLE INDIA LIMITED", "METROPOLIS HEALTHCARE LTD",
>"HINDUSTAN UNILEVER LTD.", "VODAFONE IDEA LIMITED", "NIPPON L I A M LTD",
>"INDIABULLS HSG FIN LTD"), TATAMOTORS = c("TATAPOWER", "TATASTEEL",
>"TCS", "TECHM", "TITAN", "TORNTPHARM", "TORNTPOWER", "TRENT",
>"TVSMOTOR", "UBL", "ULTRACEMCO", "UPL", "VEDL", "VOLTAS", "WHIRLPOOL",
>"WIPRO", "ZEEL", "BALKRISIND", "BHARATFORG", "BPCL", "EICHERMOT",
>"GODREJPROP", "HINDPETRO", "JKCEMENT", "NESTLEIND", "METROPOLIS",
>"HINDUNILVR", "IDEA", "NAM-INDIA", "IBULHSGFIN"), X4 = c(4.5,
>4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5, 4.5,
>4.5, 4.5, 3, 4.5, 4.5, 4.5, 4.5, 4, 4.5, 4.5, 4.5, 4.5, 4.5,
>4.5, 4.5, 3)), class = "data.frame", row.names = c(NA, -30L)))
>
>unlist(IDTpdf) is not working. It makes IDTpdf a lot messier...
>
>I want IDTpdf to be one data frame combining all the four pages in the above url...
>
>ANy help will be greatly appreciated...
>
>Thanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>
>
>       [[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

	[[alternative HTML version deleted]]


From n|ckmwr@y @end|ng |rom gm@||@com  Sun Jan  8 19:04:19 2023
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Sun, 8 Jan 2023 18:04:19 +0000
Subject: [R] getting information out of Rao test output
Message-ID: <CABxY9BOF4k10GedwPr0f_awO2Dpwsu_+qZ67_Zri4Dro2wetUQ@mail.gmail.com>

Hello  I'm using the Rao Spacing test from the circular package on a series
of (circular) data vectors but I can't find a way of simply recording
whether the null is rejected or not for each vector in the series - the
test gives me an individual result but unlike with other tests in R (say
MannKendall or pettitt etc) I can't find a way of delving into the guts of
the output to extract either1)both the test statistic and critical value
or 2)the status of ejection or not of the null eg as T/F

I''ve tried various things including str(rao) and rao[[1]]
as.character(rao) etc

rao<-rao.spacing.test(pi_data,alpha=0.05) ## my input


 Rao's Spacing Test of Uniformity

Test Statistic = 169.6952
Level 0.05 critical value = 155.19
Reject null hypothesis of uniformity-- can't break this down

Des anyone know how I could do this?

Thanks, Nick Wray

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Jan  8 19:37:10 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 8 Jan 2023 18:37:10 +0000
Subject: [R] getting information out of Rao test output
In-Reply-To: <CABxY9BOF4k10GedwPr0f_awO2Dpwsu_+qZ67_Zri4Dro2wetUQ@mail.gmail.com>
References: <CABxY9BOF4k10GedwPr0f_awO2Dpwsu_+qZ67_Zri4Dro2wetUQ@mail.gmail.com>
Message-ID: <080dcdba-6084-0e98-3ba9-1f9d2d4ba63a@sapo.pt>

?s 18:04 de 08/01/2023, Nick Wray escreveu:
> Hello  I'm using the Rao Spacing test from the circular package on a series
> of (circular) data vectors but I can't find a way of simply recording
> whether the null is rejected or not for each vector in the series - the
> test gives me an individual result but unlike with other tests in R (say
> MannKendall or pettitt etc) I can't find a way of delving into the guts of
> the output to extract either1)both the test statistic and critical value
> or 2)the status of ejection or not of the null eg as T/F
> 
> I''ve tried various things including str(rao) and rao[[1]]
> as.character(rao) etc
> 
> rao<-rao.spacing.test(pi_data,alpha=0.05) ## my input
> 
> 
>   Rao's Spacing Test of Uniformity
> 
> Test Statistic = 169.6952
> Level 0.05 critical value = 155.19
> Reject null hypothesis of uniformity-- can't break this down
> 
> Des anyone know how I could do this?
> 
> Thanks, Nick Wray
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

This test returns a non-standard object, meaning, not an object of class 
"htest" and its print method creates and invisibly returns an object 
with the value you want.



library(circular)
#>
#> Attaching package: 'circular'
#> The following objects are masked from 'package:stats':
#>
#>     sd, var

# data
x <- circular(runif(200, 0, 2*pi))
# run the test
test_result <- rao.spacing.test(x, alpha=0.1)
# save the print method result
print_result <- print(test_result)
#>
#>        Rao's Spacing Test of Uniformity
#>
#> Test Statistic = 135.2864
#> Level 0.1 critical value = 140.06
#> Do not reject null hypothesis of uniformity
print_result$accepted
#> [1] TRUE



If you run

getAnywhere("print.rao.spacing.test")

you will see that the printing is made by a series of cat instructions 
so to get the TRUE/FALSE above you will need to print the result like above.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Jan  8 20:35:09 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 8 Jan 2023 19:35:09 +0000
Subject: [R] free_port returning only one port...
Message-ID: <PU4P216MB156874B71B5E8932902B9064C8F99@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear members,
                            I am using free_port from the netstat package, but it is returning only one value:

> library(netstat)
> free_port()
[1] 14415

This is occurring in both Linux and Windows. Previously it used to output thousands of ports. What has gone wrong?

thanking you,
Yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From djnord|und @end|ng |rom gm@||@com  Sun Jan  8 21:05:32 2023
From: djnord|und @end|ng |rom gm@||@com (Daniel Nordlund)
Date: Sun, 8 Jan 2023 12:05:32 -0800
Subject: [R] free_port returning only one port...
In-Reply-To: <PU4P216MB156874B71B5E8932902B9064C8F99@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB156874B71B5E8932902B9064C8F99@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <7f87fbfe-456f-ef28-b95a-c6c5d1aabc85@gmail.com>

On 1/8/2023 11:35 AM, akshay kulkarni wrote:
> Dear members,
>                              I am using free_port from the netstat package, but it is returning only one value:
>
>> library(netstat)
>> free_port()
> [1] 14415
>
> This is occurring in both Linux and Windows. Previously it used to output thousands of ports. What has gone wrong?
>
> thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

I haven't used that function before, and I don't know what you 
previously experienced, but if you set the parameter random=TRUE you 
will get a different port on each invocation

free_port(random=TRUE)


Hope this is helpful,

Dan

-- 
Daniel Nordlund
Port Townsend, WA  USA


-- 
This email has been checked for viruses by Avast antivirus software.
www.avast.com


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Jan  8 21:09:43 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 8 Jan 2023 20:09:43 +0000
Subject: [R] free_port returning only one port...
In-Reply-To: <7f87fbfe-456f-ef28-b95a-c6c5d1aabc85@gmail.com>
References: <PU4P216MB156874B71B5E8932902B9064C8F99@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <7f87fbfe-456f-ef28-b95a-c6c5d1aabc85@gmail.com>
Message-ID: <PU4P216MB1568262F3505A0C218CF733AC8F99@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

dear Dan,
                   Yes, i just read the documentation...Previously i was using it with RSelenium package and never got to know that the argument random defaulted to FALSE. I was just using it blindly...only now I got to know that you must set random = TRUE to get different values across invocations...
Thanks anyways...

Thanking you,
Yours sincerely
AKSHAY M KULKARNI

________________________________
From: Daniel Nordlund <djnordlund at gmail.com>
Sent: Monday, January 9, 2023 1:35 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] free_port returning only one port...

On 1/8/2023 11:35 AM, akshay kulkarni wrote:
> Dear members,
>                              I am using free_port from the netstat package, but it is returning only one value:
>
>> library(netstat)
>> free_port()
> [1] 14415
>

 thousands of ports. What has gone wrong?
>
> thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

I haven't used that function before, and I don't know what you
previously experienced, but if you set the parameter random=TRUE you
will get a different port on each invocation

free_port(random=TRUE)


Hope this is helpful,

Dan

--
Daniel Nordlund
Port Townsend, WA  USA


--
This email has been checked for viruses by Avast antivirus software.
www.avast.com<http://www.avast.com>

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Jan  8 21:44:20 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 8 Jan 2023 20:44:20 +0000
Subject: [R] on parallel package.....
Message-ID: <PU4P216MB1568757F5BCD02CA859BA4D4C8F99@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

dear members,
                            I want to parallelize a scraping code. Is mclapply() and clusterApplyLB() similar in functionality? I read the documentation and noted that there is copious information on clusyterApplyLB(), but not much on mclapply (it just says that on Unix alikes mclapply "uses parallel oprations"). I have a AWS EC2 Linux instance. Can I substitute mclapply() for clusterApplyLB()? Where can I get more information on mclapply()?

any help will be greatly appreciated
Thanking you,
Yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From m@pjg @end|ng |rom br|@to|@@c@uk  Sun Jan  8 15:13:52 2023
From: m@pjg @end|ng |rom br|@to|@@c@uk (Peter Green)
Date: Sun, 8 Jan 2023 14:13:52 +0000
Subject: [R] [R-pkgs] gRaven package - Bayes Nets: 'RHugin' Emulation with
 'gRain'
Message-ID: <3877ec85-3309-fec1-5cd5-579f291d401f@bristol.ac.uk>

Dear all,

I am pleased to announce that CRAN now hosts my package gRaven.

This provides wrappers for functions in the 'gRain' package to emulate 
some 'RHugin' functionality, allowing the building of Bayesian networks 
consisting of discrete chance nodes incrementally - through adding 
nodes, edges and conditional probability tables, the setting of 
evidence, whether 'hard' (boolean) or 'soft' (likelihoods), and querying 
marginal joint probabilities and normalizing constants.

Computations will typically not be so fast as they are with 'RHugin', 
but this package should assist users without access to the commercial 
package 'Hugin' to use existing code written to use 'RHugin'.

I am open to extending the functionality of the package in future, in 
response to user demand.

regards,

Peter Green

-- 
Peter Green, p.j.green at bristol.ac.uk
-- 
Emeritus Professor of Statistics & Professorial Research Fellow
University of Bristol, Bristol BS8 1UG, UK
T: +44 117 455 2611; W: https://petergreenweb.wordpress.com/

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From e@ @end|ng |rom enr|co@chum@nn@net  Mon Jan  9 11:18:24 2023
From: e@ @end|ng |rom enr|co@chum@nn@net (Enrico Schumann)
Date: Mon, 09 Jan 2023 11:18:24 +0100
Subject: [R] gmp::bigq vs. MASS::fractions
In-Reply-To: <6c8a775d-b141-edc0-c222-fbeea1d5cb95@wiwi.hu-berlin.de> (Sigbert
 Klinke's message of "Sat, 7 Jan 2023 17:29:35 +0100")
References: <6c8a775d-b141-edc0-c222-fbeea1d5cb95@wiwi.hu-berlin.de>
Message-ID: <87pmboko3z.fsf@enricoschumann.net>

On Sat, 07 Jan 2023, Sigbert Klinke writes:

> Hi,
>
> has someone experience which routine should be used for
> creating fractional numbers? The two conversion
> routines deliver different results
>
>> x <- (0:7)/7
>
>> MASS::fractions(x)
>
> [1]   0 1/7 2/7 3/7 4/7 5/7 6/7   1
>
>> gmp::as.bigq(x)
>
> Big Rational ('bigq') object of length 8:
>
> [1] 0 2573485501354569/18014398509481984
> 2573485501354569/9007199254740992
>
> [4] 7720456504063707/18014398509481984
> 2573485501354569/4503599627370496
> 6433713753386423/9007199254740992
>
> [7] 7720456504063707/9007199254740992  1
>
> Following the example I would compute my fractional
> numbers with MASS::fractions and store them for further
> processing as Big Rational.
>
> Thanks Sigbert
>

'gmp' allows you to create the fractions directly:

    gmp::as.bigq(n = 0:7, d = 7)
    ## Big Rational ('bigq') object of length 8:
    ## [1] 0   1/7 2/7 3/7 4/7 5/7 6/7 1  



-- 
Enrico Schumann
Lucerne, Switzerland
http://enricoschumann.net


From grond @end|ng |rom number|@nd@de  Mon Jan  9 14:58:02 2023
From: grond @end|ng |rom number|@nd@de (Wolfgang Grond)
Date: Mon, 9 Jan 2023 14:58:02 +0100
Subject: [R] Interactive 3D Plot with non-numeric axis tick labels
Message-ID: <24275806-7ac5-fc74-5d6e-505b886a834e@numberland.de>

Dear all,

What I want to create is an interactive 3D plot from a data frame like this:

#: number
TLD: Countrycode
Date: date
String: a label

Because plot3d can only deal with numbers I converted Date to Year and
TLD as well as String to a numeric value like this:

numTLD <- as.numeric(factor(df$TLD))



#   	TLD	Date		String	Year	numTLD	numString
1	DE	1988-11-07	B23K	1988	3	74
2	DE	1984-09-06	B23K	1984	3	74
3	DE	1996-03-21	B23K	1996	3	74
4	DE	1996-03-21	B23K	1996	3	74
5	DE	1996-03-21	B23K	1996	3	74
6	DE	1996-03-21	B23K	1996	3	74
7	DE	1996-03-21	B23K	1996	3	74
8	DE	1996-03-21	B23K	1996	3	74
9	DE	1996-03-21	B23K	1996	3	74

To create an interactive 3D plot I use:

plot3d(df$numTLD, df$Year, df$numString)

The plot then shows numeric axis ticks labels, which is what I want to 
get in the case of Year. But for numTLD and numString I want to have

- DE instead of 3 for TLD
- B23K instead of 74 for String

(axis ticks labeled with strings, not with numbers).

I didn't succeed to figure out how this can be reached.

Thanks in advance for any help.

Regards


From @k@h@y_e4 @end|ng |rom hotm@||@com  Mon Jan  9 15:47:21 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Mon, 9 Jan 2023 14:47:21 +0000
Subject: [R] return value of {....}
Message-ID: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear members,
                             I have the following code:

> TB <- {x <- 3;y <- 5}
> TB
[1] 5

It is consistent with the documentation: For {, the result of the last expression evaluated. This has the visibility of the last evaluation.

But both x AND y are created, but the "return value" is y. How can this be advantageous for solving practical problems? Specifically, consider the following code:

F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}

Both expr5 and expr7 are created, and are accessible by the code outside of the nested braces right? But the "return value" of the nested braces is expr7. So doesn't this mean that only expr7 should be accessible? Please help me entangle this (of course the return value of F is expr10, and all the other objects created by the preceding expressions are deleted. But expr5 is not, after the control passes outside of the nested braces!)

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Jan  9 17:18:11 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 9 Jan 2023 16:18:11 +0000
Subject: [R] return value of {....}
In-Reply-To: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <47c2883a-d4c0-211a-02ab-a916f829292f@sapo.pt>

?s 14:47 de 09/01/2023, akshay kulkarni escreveu:
> Dear members,
>                               I have the following code:
> 
>> TB <- {x <- 3;y <- 5}
>> TB
> [1] 5
> 
> It is consistent with the documentation: For {, the result of the last expression evaluated. This has the visibility of the last evaluation.
> 
> But both x AND y are created, but the "return value" is y. How can this be advantageous for solving practical problems? Specifically, consider the following code:
> 
> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
> 
> Both expr5 and expr7 are created, and are accessible by the code outside of the nested braces right? But the "return value" of the nested braces is expr7. So doesn't this mean that only expr7 should be accessible? Please help me entangle this (of course the return value of F is expr10, and all the other objects created by the preceding expressions are deleted. But expr5 is not, after the control passes outside of the nested braces!)
> 
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

Hello,

Everything happens as you have described it, expr5 is accessible outside 
{}. Whether it is advantageous to solve pratical problems is another 
thing. The way f() is called creates variable `input` and this can be 
seen in many places of the R sources. Personally, I find it harder to 
read and prefer to break that one-liner into two instructions.

The code below shows a seldom pratical feature, if ever, put to work.


f <- function(X) {
   x <- X; y <- x*2
   u <- {
     z <- y     # expr5 creates a variable by assigning it a value
     z*pi       # expr7's value is assigned to u
   }
   v <- u + z   # expr5's value is accessible
   10 * v
}

# the call also creates input
f(input <- 1)
#> [1] 82.83185
.Last.value / 10
#> [1] 0.1
.Last.value - input*2
#> [1] -1
.Last.value / pi
#> [1] 0.3183099
.Last.value / 2
#> [1] 0.5
.Last.value == input
#> [1] TRUE


Hoep this helps,

Rui Barradas


From bgunter@4567 @end|ng |rom gm@||@com  Mon Jan  9 17:29:41 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 9 Jan 2023 08:29:41 -0800
Subject: [R] return value of {....}
In-Reply-To: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAGxFJbQAE2Na=+LFTjHch=9==O-UXwpLhyrW=Z-R_QDX7ZirDA@mail.gmail.com>

Unless you do something special within a function, only the value(s)
returned are available to the caller. That is the essence of
functional-type programming languages.

You need to read up on (function) environments in R . You can search on
this. ?function and its links also contain useful information, but it may
too terse to be explicable to you. There are of course many available
references on the internet.

I believe your mental model for how R works is flawed, and you have some
homework to do to correct it. I may be wrong, naturally, but you can judge
by looking at some tutorials.

-- Bert

On Mon, Jan 9, 2023 at 6:47 AM akshay kulkarni <akshay_e4 at hotmail.com>
wrote:

> Dear members,
>                              I have the following code:
>
> > TB <- {x <- 3;y <- 5}
> > TB
> [1] 5
>
> It is consistent with the documentation: For {, the result of the last
> expression evaluated. This has the visibility of the last evaluation.
>
> But both x AND y are created, but the "return value" is y. How can this be
> advantageous for solving practical problems? Specifically, consider the
> following code:
>
> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
>
> Both expr5 and expr7 are created, and are accessible by the code outside
> of the nested braces right? But the "return value" of the nested braces is
> expr7. So doesn't this mean that only expr7 should be accessible? Please
> help me entangle this (of course the return value of F is expr10, and all
> the other objects created by the preceding expressions are deleted. But
> expr5 is not, after the control passes outside of the nested braces!)
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Mon Jan  9 17:54:38 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Mon, 9 Jan 2023 16:54:38 +0000
Subject: [R] return value of {....}
In-Reply-To: <CAGxFJbQAE2Na=+LFTjHch=9==O-UXwpLhyrW=Z-R_QDX7ZirDA@mail.gmail.com>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbQAE2Na=+LFTjHch=9==O-UXwpLhyrW=Z-R_QDX7ZirDA@mail.gmail.com>
Message-ID: <PU4P216MB15687CC331A108D736437955C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

dear Bert,
                   Thanks a lot...

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Bert Gunter <bgunter.4567 at gmail.com>
Sent: Monday, January 9, 2023 9:59 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] return value of {....}

Unless you do something special within a function, only the value(s) returned are available to the caller. That is the essence of functional-type programming languages.

You need to read up on (function) environments in R . You can search on this. ?function and its links also contain useful information, but it may too terse to be explicable to you. There are of course many available references on the internet.

I believe your mental model for how R works is flawed, and you have some homework to do to correct it. I may be wrong, naturally, but you can judge by looking at some tutorials.

-- Bert

On Mon, Jan 9, 2023 at 6:47 AM akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
Dear members,
                             I have the following code:

> TB <- {x <- 3;y <- 5}
> TB
[1] 5

It is consistent with the documentation: For {, the result of the last expression evaluated. This has the visibility of the last evaluation.

But both x AND y are created, but the "return value" is y. How can this be advantageous for solving practical problems? Specifically, consider the following code:

F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}

Both expr5 and expr7 are created, and are accessible by the code outside of the nested braces right? But the "return value" of the nested braces is expr7. So doesn't this mean that only expr7 should be accessible? Please help me entangle this (of course the return value of F is expr10, and all the other objects created by the preceding expressions are deleted. But expr5 is not, after the control passes outside of the nested braces!)

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Mon Jan  9 17:59:12 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 9 Jan 2023 08:59:12 -0800
Subject: [R] return value of {....}
In-Reply-To: <CAGxFJbQAE2Na=+LFTjHch=9==O-UXwpLhyrW=Z-R_QDX7ZirDA@mail.gmail.com>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbQAE2Na=+LFTjHch=9==O-UXwpLhyrW=Z-R_QDX7ZirDA@mail.gmail.com>
Message-ID: <CAGxFJbTdNF277j02uZbeKwYLg=5+S8zOSH1BfNJiEkKzwk4NwQ@mail.gmail.com>

Perhaps the following may be of use to you.

Consider:

> f <- function(){ x <- 3; function(y) x+y}
> x <- 5

##What does this give?
> f()
## Why?
## How about this?
>f()(10)
## Why?

## If you remove "x <- 3" from the above, what will you get when you repeat
the exercise?

-- Bert

On Mon, Jan 9, 2023 at 8:29 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:

> Unless you do something special within a function, only the value(s)
> returned are available to the caller. That is the essence of
> functional-type programming languages.
>
> You need to read up on (function) environments in R . You can search on
> this. ?function and its links also contain useful information, but it may
> too terse to be explicable to you. There are of course many available
> references on the internet.
>
> I believe your mental model for how R works is flawed, and you have some
> homework to do to correct it. I may be wrong, naturally, but you can judge
> by looking at some tutorials.
>
> -- Bert
>
> On Mon, Jan 9, 2023 at 6:47 AM akshay kulkarni <akshay_e4 at hotmail.com>
> wrote:
>
>> Dear members,
>>                              I have the following code:
>>
>> > TB <- {x <- 3;y <- 5}
>> > TB
>> [1] 5
>>
>> It is consistent with the documentation: For {, the result of the last
>> expression evaluated. This has the visibility of the last evaluation.
>>
>> But both x AND y are created, but the "return value" is y. How can this
>> be advantageous for solving practical problems? Specifically, consider the
>> following code:
>>
>> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
>>
>> Both expr5 and expr7 are created, and are accessible by the code outside
>> of the nested braces right? But the "return value" of the nested braces is
>> expr7. So doesn't this mean that only expr7 should be accessible? Please
>> help me entangle this (of course the return value of F is expr10, and all
>> the other objects created by the preceding expressions are deleted. But
>> expr5 is not, after the control passes outside of the nested braces!)
>>
>> Thanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Mon Jan  9 17:57:21 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Mon, 9 Jan 2023 16:57:21 +0000
Subject: [R] return value of {....}
In-Reply-To: <47c2883a-d4c0-211a-02ab-a916f829292f@sapo.pt>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <47c2883a-d4c0-211a-02ab-a916f829292f@sapo.pt>
Message-ID: <PU4P216MB1568AAE0B25AF6B2ADF47EC8C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

dear Rui,
                 Thanks a lot....

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Rui Barradas <ruipbarradas at sapo.pt>
Sent: Monday, January 9, 2023 9:48 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] return value of {....}

?s 14:47 de 09/01/2023, akshay kulkarni escreveu:
> Dear members,
>                               I have the following code:
>
>> TB <- {x <- 3;y <- 5}
>> TB
> [1] 5
>
> It is consistent with the documentation: For {, the result of the last expression evaluated. This has the visibility of the last evaluation.
>
> But both x AND y are created, but the "return value" is y. How can this be advantageous for solving practical problems? Specifically, consider the following code:
>
> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
>
> Both expr5 and expr7 are created, and are accessible by the code outside of the nested braces right? But the "return value" of the nested braces is expr7. So doesn't this mean that only expr7 should be accessible? Please help me entangle this (of course the return value of F is expr10, and all the other objects created by the preceding expressions are deleted. But expr5 is not, after the control passes outside of the nested braces!)
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

Hello,

Everything happens as you have described it, expr5 is accessible outside
{}. Whether it is advantageous to solve pratical problems is another
thing. The way f() is called creates variable `input` and this can be
seen in many places of the R sources. Personally, I find it harder to
read and prefer to break that one-liner into two instructions.

The code below shows a seldom pratical feature, if ever, put to work.


f <- function(X) {
   x <- X; y <- x*2
   u <- {
     z <- y     # expr5 creates a variable by assigning it a value
     z*pi       # expr7's value is assigned to u
   }
   v <- u + z   # expr5's value is accessible
   10 * v
}

# the call also creates input
f(input <- 1)
#> [1] 82.83185
.Last.value / 10
#> [1] 0.1
.Last.value - input*2
#> [1] -1
.Last.value / pi
#> [1] 0.3183099
.Last.value / 2
#> [1] 0.5
.Last.value == input
#> [1] TRUE


Hoep this helps,

Rui Barradas


	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Mon Jan  9 18:05:47 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Mon, 9 Jan 2023 17:05:47 +0000
Subject: [R] return value of {....}
In-Reply-To: <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
Message-ID: <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Valentin,
                          But why should {....} "return" a value? It could just as well evaluate all the expressions and store the resulting objects in whatever environment the interpreter chooses, and then it would be left to the user to manipulate any object he chooses. Don't you think returning the last, or any value, is redundant? We are living in the 21st century world, and the R-core team might,I suppose, have a definite reason for"returning" the last value. Any comments?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Valentin Petzel <valentin at petzel.at>
Sent: Monday, January 9, 2023 9:18 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] return value of {....}

Hello Akshai,

I think you are confusing {...} with local({...}). This one will evaluate the expression in a separate environment, returning the last expression.

{...} simply evaluates multiple expressions as one and returns the result of the last line, but it still evaluates each expression.

Assignment returns the assigned value, so we can chain assignments like this

a <- 1 + (b <- 2)

conveniently.

So when is {...} useful? Well, anyplace where you want to execute complex stuff in a function argument. E.g. you might do:

data %>% group_by(x) %>% summarise(y = {if(x[1] > 10) sum(y) else mean(y)})

Regards,
Valentin Petzel

09.01.2023 15:47:53 akshay kulkarni <akshay_e4 at hotmail.com>:

> Dear members,
>                              I have the following code:
>
>> TB <- {x <- 3;y <- 5}
>> TB
> [1] 5
>
> It is consistent with the documentation: For {, the result of the last expression evaluated. This has the visibility of the last evaluation.
>
> But both x AND y are created, but the "return value" is y. How can this be advantageous for solving practical problems? Specifically, consider the following code:
>
> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
>
> Both expr5 and expr7 are created, and are accessible by the code outside of the nested braces right? But the "return value" of the nested braces is expr7. So doesn't this mean that only expr7 should be accessible? Please help me entangle this (of course the return value of F is expr10, and all the other objects created by the preceding expressions are deleted. But expr5 is not, after the control passes outside of the nested braces!)
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>     [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Mon Jan  9 18:22:40 2023
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Mon, 9 Jan 2023 12:22:40 -0500
Subject: [R] return value of {....}
In-Reply-To: <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
 <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAPcHnpR0va+Ouk=Ur6GRS7uuvOFTn76e_MO81i3nMJzTCHuamQ@mail.gmail.com>

Returning the last value of { is the basis of functions not needing a
return statement. Before R invokes a function (specifically a closure), it
creates a new context. When R evaluates a call to return, it looks for a
context to return from and finds the context of function, ending the
context and the evaluation of the function body early. However, if you
don't use return, R just returns the value from evaluating the function
body, and if your function body starts with {, it will return the last
expression from the function body, as desired.

On Mon, Jan 9, 2023, 12:15 akshay kulkarni <akshay_e4 at hotmail.com> wrote:

> Dear Valentin,
>                           But why should {....} "return" a value? It could
> just as well evaluate all the expressions and store the resulting objects
> in whatever environment the interpreter chooses, and then it would be left
> to the user to manipulate any object he chooses. Don't you think returning
> the last, or any value, is redundant? We are living in the 21st century
> world, and the R-core team might,I suppose, have a definite reason
> for"returning" the last value. Any comments?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
> ________________________________
> From: Valentin Petzel <valentin at petzel.at>
> Sent: Monday, January 9, 2023 9:18 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] return value of {....}
>
> Hello Akshai,
>
> I think you are confusing {...} with local({...}). This one will evaluate
> the expression in a separate environment, returning the last expression.
>
> {...} simply evaluates multiple expressions as one and returns the result
> of the last line, but it still evaluates each expression.
>
> Assignment returns the assigned value, so we can chain assignments like
> this
>
> a <- 1 + (b <- 2)
>
> conveniently.
>
> So when is {...} useful? Well, anyplace where you want to execute complex
> stuff in a function argument. E.g. you might do:
>
> data %>% group_by(x) %>% summarise(y = {if(x[1] > 10) sum(y) else mean(y)})
>
> Regards,
> Valentin Petzel
>
> 09.01.2023 15:47:53 akshay kulkarni <akshay_e4 at hotmail.com>:
>
> > Dear members,
> >                              I have the following code:
> >
> >> TB <- {x <- 3;y <- 5}
> >> TB
> > [1] 5
> >
> > It is consistent with the documentation: For {, the result of the last
> expression evaluated. This has the visibility of the last evaluation.
> >
> > But both x AND y are created, but the "return value" is y. How can this
> be advantageous for solving practical problems? Specifically, consider the
> following code:
> >
> > F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
> >
> > Both expr5 and expr7 are created, and are accessible by the code outside
> of the nested braces right? But the "return value" of the nested braces is
> expr7. So doesn't this mean that only expr7 should be accessible? Please
> help me entangle this (of course the return value of F is expr10, and all
> the other objects created by the preceding expressions are deleted. But
> expr5 is not, after the control passes outside of the nested braces!)
> >
> > Thanking you,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> >
> >     [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Mon Jan  9 18:27:53 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Mon, 9 Jan 2023 17:27:53 +0000
Subject: [R] return value of {....}
In-Reply-To: <CAPcHnpR0va+Ouk=Ur6GRS7uuvOFTn76e_MO81i3nMJzTCHuamQ@mail.gmail.com>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
 <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAPcHnpR0va+Ouk=Ur6GRS7uuvOFTn76e_MO81i3nMJzTCHuamQ@mail.gmail.com>
Message-ID: <PU4P216MB1568A89AE9169F39BB15E50CC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Andrew,
                          Nice point.....

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Andrew Simmons <akwsimmo at gmail.com>
Sent: Monday, January 9, 2023 10:52 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: Valentin Petzel <valentin at petzel.at>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] return value of {....}

Returning the last value of { is the basis of functions not needing a return statement. Before R invokes a function (specifically a closure), it creates a new context. When R evaluates a call to return, it looks for a context to return from and finds the context of function, ending the context and the evaluation of the function body early. However, if you don't use return, R just returns the value from evaluating the function body, and if your function body starts with {, it will return the last expression from the function body, as desired.

On Mon, Jan 9, 2023, 12:15 akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
Dear Valentin,
                          But why should {....} "return" a value? It could just as well evaluate all the expressions and store the resulting objects in whatever environment the interpreter chooses, and then it would be left to the user to manipulate any object he chooses. Don't you think returning the last, or any value, is redundant? We are living in the 21st century world, and the R-core team might,I suppose, have a definite reason for"returning" the last value. Any comments?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Valentin Petzel <valentin at petzel.at<mailto:valentin at petzel.at>>
Sent: Monday, January 9, 2023 9:18 PM
To: akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>>
Cc: R help Mailing list <r-help at r-project.org<mailto:r-help at r-project.org>>
Subject: Re: [R] return value of {....}

Hello Akshai,

I think you are confusing {...} with local({...}). This one will evaluate the expression in a separate environment, returning the last expression.

{...} simply evaluates multiple expressions as one and returns the result of the last line, but it still evaluates each expression.

Assignment returns the assigned value, so we can chain assignments like this

a <- 1 + (b <- 2)

conveniently.

So when is {...} useful? Well, anyplace where you want to execute complex stuff in a function argument. E.g. you might do:

data %>% group_by(x) %>% summarise(y = {if(x[1] > 10) sum(y) else mean(y)})

Regards,
Valentin Petzel

09.01.2023 15:47:53 akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>>:

> Dear members,
>                              I have the following code:
>
>> TB <- {x <- 3;y <- 5}
>> TB
> [1] 5
>
> It is consistent with the documentation: For {, the result of the last expression evaluated. This has the visibility of the last evaluation.
>
> But both x AND y are created, but the "return value" is y. How can this be advantageous for solving practical problems? Specifically, consider the following code:
>
> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
>
> Both expr5 and expr7 are created, and are accessible by the code outside of the nested braces right? But the "return value" of the nested braces is expr7. So doesn't this mean that only expr7 should be accessible? Please help me entangle this (of course the return value of F is expr10, and all the other objects created by the preceding expressions are deleted. But expr5 is not, after the control passes outside of the nested braces!)
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>     [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @vi@e@gross m@iii@g oii gm@ii@com  Tue Jan 10 00:09:57 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Mon, 9 Jan 2023 18:09:57 -0500
Subject: [R] return value of {....}
In-Reply-To: <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
 <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <009401d9247f$7e426fb0$7ac74f10$@gmail.com>

Akshay,

Your question seems a tad mysterious to me as you are complaining about
NOTHING.

R was designed to return single values. The last statement executed in a
function body, for example, is the value returned even when not at the end.

Scoping is another issue entirely. What is visible is another discussion.

So, yes, if you can see ALL the variables, you might see the last one BUT
there often is no variable at the end. There is an expression that evaluates
to a value with no NAME attached. You cannot reference that unless the block
in curly braces returns that value.

You can design your own language any way you want. The people who designed R
did it this way. Mind you, the most common use of curly braces is probably
in function bodies, or if/else blocks and loops, not quite what you are
looking at and complaining about. The design is what it is.

Others require things like an explicit return() statement. R chose not to.

And if the value is redundant for you, who cares?

Did you know that when running a program in the interpreter the last value
is stored in a variable like this:

> x <- 6
> .Last.value
[1] 6

Why would that duplicate be needed or useful?

Consider a partial calculation you want to reuse in another context:

> y = x*2 + 2*x -3
> z <- .Last.value/2
> z
[1] 10.5

Yes, you could have used "y" ...




-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of akshay kulkarni
Sent: Monday, January 9, 2023 12:06 PM
To: Valentin Petzel <valentin at petzel.at>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] return value of {....}

Dear Valentin,
                          But why should {....} "return" a value? It could
just as well evaluate all the expressions and store the resulting objects in
whatever environment the interpreter chooses, and then it would be left to
the user to manipulate any object he chooses. Don't you think returning the
last, or any value, is redundant? We are living in the 21st century world,
and the R-core team might,I suppose, have a definite reason for"returning"
the last value. Any comments?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Valentin Petzel <valentin at petzel.at>
Sent: Monday, January 9, 2023 9:18 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] return value of {....}

Hello Akshai,

I think you are confusing {...} with local({...}). This one will evaluate
the expression in a separate environment, returning the last expression.

{...} simply evaluates multiple expressions as one and returns the result of
the last line, but it still evaluates each expression.

Assignment returns the assigned value, so we can chain assignments like this

a <- 1 + (b <- 2)

conveniently.

So when is {...} useful? Well, anyplace where you want to execute complex
stuff in a function argument. E.g. you might do:

data %>% group_by(x) %>% summarise(y = {if(x[1] > 10) sum(y) else mean(y)})

Regards,
Valentin Petzel

09.01.2023 15:47:53 akshay kulkarni <akshay_e4 at hotmail.com>:

> Dear members,
>                              I have the following code:
>
>> TB <- {x <- 3;y <- 5}
>> TB
> [1] 5
>
> It is consistent with the documentation: For {, the result of the last
expression evaluated. This has the visibility of the last evaluation.
>
> But both x AND y are created, but the "return value" is y. How can this be
advantageous for solving practical problems? Specifically, consider the
following code:
>
> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
>
> Both expr5 and expr7 are created, and are accessible by the code 
> outside of the nested braces right? But the "return value" of the 
> nested braces is expr7. So doesn't this mean that only expr7 should be 
> accessible? Please help me entangle this (of course the return value 
> of F is expr10, and all the other objects created by the preceding 
> expressions are deleted. But expr5 is not, after the control passes 
> outside of the nested braces!)
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>     [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Tue Jan 10 00:16:03 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 09 Jan 2023 15:16:03 -0800
Subject: [R] return value of {....}
In-Reply-To: <CAGxFJbTdNF277j02uZbeKwYLg=5+S8zOSH1BfNJiEkKzwk4NwQ@mail.gmail.com>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbQAE2Na=+LFTjHch=9==O-UXwpLhyrW=Z-R_QDX7ZirDA@mail.gmail.com>
 <CAGxFJbTdNF277j02uZbeKwYLg=5+S8zOSH1BfNJiEkKzwk4NwQ@mail.gmail.com>
Message-ID: <960758A2-98A2-41A1-9169-458AE62156AE@dcn.davis.ca.us>

I suspect akshay is (or was? Not sure) unclear about what braces do. They are not closures... they create an expression that wraps multiple expressions into one expression... they are a little more like parentheses than closures. They are not intrinsically associated with creation of environments for holding variables.

Functions are closures... they run in a call-specific environment that inherits from the environment where the function was defined. Blocks (created with braces) simply work with the environment in which they are constructed directly. If you want a block that creates a new local environment without defining a new function then pass your code block to the ?local function.

On January 9, 2023 8:59:12 AM PST, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>Perhaps the following may be of use to you.
>
>Consider:
>
>> f <- function(){ x <- 3; function(y) x+y}
>> x <- 5
>
>##What does this give?
>> f()
>## Why?
>## How about this?
>>f()(10)
>## Why?
>
>## If you remove "x <- 3" from the above, what will you get when you repeat
>the exercise?
>
>-- Bert
>
>On Mon, Jan 9, 2023 at 8:29 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
>> Unless you do something special within a function, only the value(s)
>> returned are available to the caller. That is the essence of
>> functional-type programming languages.
>>
>> You need to read up on (function) environments in R . You can search on
>> this. ?function and its links also contain useful information, but it may
>> too terse to be explicable to you. There are of course many available
>> references on the internet.
>>
>> I believe your mental model for how R works is flawed, and you have some
>> homework to do to correct it. I may be wrong, naturally, but you can judge
>> by looking at some tutorials.
>>
>> -- Bert
>>
>> On Mon, Jan 9, 2023 at 6:47 AM akshay kulkarni <akshay_e4 at hotmail.com>
>> wrote:
>>
>>> Dear members,
>>>                              I have the following code:
>>>
>>> > TB <- {x <- 3;y <- 5}
>>> > TB
>>> [1] 5
>>>
>>> It is consistent with the documentation: For {, the result of the last
>>> expression evaluated. This has the visibility of the last evaluation.
>>>
>>> But both x AND y are created, but the "return value" is y. How can this
>>> be advantageous for solving practical problems? Specifically, consider the
>>> following code:
>>>
>>> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
>>>
>>> Both expr5 and expr7 are created, and are accessible by the code outside
>>> of the nested braces right? But the "return value" of the nested braces is
>>> expr7. So doesn't this mean that only expr7 should be accessible? Please
>>> help me entangle this (of course the return value of F is expr10, and all
>>> the other objects created by the preceding expressions are deleted. But
>>> expr5 is not, after the control passes outside of the nested braces!)
>>>
>>> Thanking you,
>>> Yours sincerely,
>>> AKSHAY M KULKARNI
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jan 10 00:48:31 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Mon, 9 Jan 2023 15:48:31 -0800
Subject: [R] return value of {....}
In-Reply-To: <960758A2-98A2-41A1-9169-458AE62156AE@dcn.davis.ca.us>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAGxFJbQAE2Na=+LFTjHch=9==O-UXwpLhyrW=Z-R_QDX7ZirDA@mail.gmail.com>
 <CAGxFJbTdNF277j02uZbeKwYLg=5+S8zOSH1BfNJiEkKzwk4NwQ@mail.gmail.com>
 <960758A2-98A2-41A1-9169-458AE62156AE@dcn.davis.ca.us>
Message-ID: <CAGxFJbQyFL=-EKSsrEQ=dcws8ko-YqNK596mzKp6EwT3idKmcw@mail.gmail.com>

"I suspect akshay is (or was? Not sure) unclear about what braces do.
They are not closures... they create an expression that wraps multiple
expressions into one expression... they are a little more like
parentheses than closures. They are not **intrinsically associated**
with creation of environments for holding variables."

Perhaps confusion comes from this behavior described in ?body:
"The bodies of all but the simplest are braced expressions, that is
calls to {: see the ?Examples? section for how to create such a call."

and

"body returns the body of the function specified. This is normally a
language object, most often a call to {, but it can also be a symbol
such as pi or a constant (e.g., 3 or "R") to be the return value of
the function."

So braces are needed to demarcate the code/expressions within a
function, but as you said, they do not themselves create closures.
More technically, '{' is primitive, not a closure.

Bert







On Mon, Jan 9, 2023 at 3:16 PM Jeff Newmiller <jdnewmil at dcn.davis.ca.us> wrote:
>
> I suspect akshay is (or was? Not sure) unclear about what braces do. They are not closures... they create an expression that wraps multiple expressions into one expression... they are a little more like parentheses than closures. They are not intrinsically associated with creation of environments for holding variables.
>
> Functions are closures... they run in a call-specific environment that inherits from the environment where the function was defined. Blocks (created with braces) simply work with the environment in which they are constructed directly. If you want a block that creates a new local environment without defining a new function then pass your code block to the ?local function.
>
> On January 9, 2023 8:59:12 AM PST, Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >Perhaps the following may be of use to you.
> >
> >Consider:
> >
> >> f <- function(){ x <- 3; function(y) x+y}
> >> x <- 5
> >
> >##What does this give?
> >> f()
> >## Why?
> >## How about this?
> >>f()(10)
> >## Why?
> >
> >## If you remove "x <- 3" from the above, what will you get when you repeat
> >the exercise?
> >
> >-- Bert
> >
> >On Mon, Jan 9, 2023 at 8:29 AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >
> >> Unless you do something special within a function, only the value(s)
> >> returned are available to the caller. That is the essence of
> >> functional-type programming languages.
> >>
> >> You need to read up on (function) environments in R . You can search on
> >> this. ?function and its links also contain useful information, but it may
> >> too terse to be explicable to you. There are of course many available
> >> references on the internet.
> >>
> >> I believe your mental model for how R works is flawed, and you have some
> >> homework to do to correct it. I may be wrong, naturally, but you can judge
> >> by looking at some tutorials.
> >>
> >> -- Bert
> >>
> >> On Mon, Jan 9, 2023 at 6:47 AM akshay kulkarni <akshay_e4 at hotmail.com>
> >> wrote:
> >>
> >>> Dear members,
> >>>                              I have the following code:
> >>>
> >>> > TB <- {x <- 3;y <- 5}
> >>> > TB
> >>> [1] 5
> >>>
> >>> It is consistent with the documentation: For {, the result of the last
> >>> expression evaluated. This has the visibility of the last evaluation.
> >>>
> >>> But both x AND y are created, but the "return value" is y. How can this
> >>> be advantageous for solving practical problems? Specifically, consider the
> >>> following code:
> >>>
> >>> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
> >>>
> >>> Both expr5 and expr7 are created, and are accessible by the code outside
> >>> of the nested braces right? But the "return value" of the nested braces is
> >>> expr7. So doesn't this mean that only expr7 should be accessible? Please
> >>> help me entangle this (of course the return value of F is expr10, and all
> >>> the other objects created by the preceding expressions are deleted. But
> >>> expr5 is not, after the control passes outside of the nested braces!)
> >>>
> >>> Thanking you,
> >>> Yours sincerely,
> >>> AKSHAY M KULKARNI
> >>>
> >>>         [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> >>> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>>
> >>
> >
> >       [[alternative HTML version deleted]]
> >
> >______________________________________________
> >R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >https://stat.ethz.ch/mailman/listinfo/r-help
> >PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> >and provide commented, minimal, self-contained, reproducible code.
>
> --
> Sent from my phone. Please excuse my brevity.


From v@|ent|n @end|ng |rom petze|@@t  Mon Jan  9 16:48:09 2023
From: v@|ent|n @end|ng |rom petze|@@t (Valentin Petzel)
Date: Mon, 9 Jan 2023 16:48:09 +0100 (GMT+01:00)
Subject: [R] return value of {....}
In-Reply-To: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>

Hello Akshai,

I think you are confusing {...} with local({...}). This one will evaluate the expression in a separate environment, returning the last expression.

{...} simply evaluates multiple expressions as one and returns the result of the last line, but it still evaluates each expression.

Assignment returns the assigned value, so we can chain assignments like this

a <- 1 + (b <- 2)

conveniently.

So when is {...} useful? Well, anyplace where you want to execute complex stuff in a function argument. E.g. you might do:

data %>% group_by(x) %>% summarise(y = {if(x[1] > 10) sum(y) else mean(y)})

Regards,
Valentin Petzel

09.01.2023 15:47:53 akshay kulkarni <akshay_e4 at hotmail.com>:

> Dear members,
> ???????????????????????????? I have the following code:
> 
>> TB <- {x <- 3;y <- 5}
>> TB
> [1] 5
> 
> It is consistent with the documentation: For {, the result of the last expression evaluated. This has the visibility of the last evaluation.
> 
> But both x AND y are created, but the "return value" is y. How can this be advantageous for solving practical problems? Specifically, consider the following code:
> 
> F <- function(X) {? expr; expr2; { expr5; expr7}; expr8;expr10}
> 
> Both expr5 and expr7 are created, and are accessible by the code outside of the nested braces right? But the "return value" of the nested braces is expr7. So doesn't this mean that only expr7 should be accessible? Please help me entangle this (of course the return value of F is expr10, and all the other objects created by the preceding expressions are deleted. But expr5 is not, after the control passes outside of the nested braces!)
> 
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> 
> ??? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Jan 10 15:32:48 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 10 Jan 2023 14:32:48 +0000
Subject: [R] return value of {....}
In-Reply-To: <009401d9247f$7e426fb0$7ac74f10$@gmail.com>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
 <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <009401d9247f$7e426fb0$7ac74f10$@gmail.com>
Message-ID: <PU4P216MB15680CE40E939E34B5671D4BC8FF9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Avi,
                 Thanks for your reply...your exhortations are indeed justified...! But one caveat: I was not complaining about anything...just was curious of the rationale of a particular design....Thanks again...

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of avi.e.gross at gmail.com <avi.e.gross at gmail.com>
Sent: Tuesday, January 10, 2023 4:39 AM
Cc: 'R help Mailing list' <r-help at r-project.org>
Subject: Re: [R] return value of {....}

Akshay,

Your question seems a tad mysterious to me as you are complaining about
NOTHING.

R was designed to return single values. The last statement executed in a
function body, for example, is the value returned even when not at the end.

Scoping is another issue entirely. What is visible is another discussion.

So, yes, if you can see ALL the variables, you might see the last one BUT
there often is no variable at the end. There is an expression that evaluates
to a value with no NAME attached. You cannot reference that unless the block
in curly braces returns that value.

You can design your own language any way you want. The people who designed R
did it this way. Mind you, the most common use of curly braces is probably
in function bodies, or if/else blocks and loops, not quite what you are
looking at and complaining about. The design is what it is.

Others require things like an explicit return() statement. R chose not to.

And if the value is redundant for you, who cares?

Did you know that when running a program in the interpreter the last value
is stored in a variable like this:

> x <- 6
> .Last.value
[1] 6

Why would that duplicate be needed or useful?

Consider a partial calculation you want to reuse in another context:

> y = x*2 + 2*x -3
> z <- .Last.value/2
> z
[1] 10.5

Yes, you could have used "y" ...




-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of akshay kulkarni
Sent: Monday, January 9, 2023 12:06 PM
To: Valentin Petzel <valentin at petzel.at>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] return value of {....}

Dear Valentin,
                          But why should {....} "return" a value? It could
just as well evaluate all the expressions and store the resulting objects in
whatever environment the interpreter chooses, and then it would be left to
the user to manipulate any object he chooses. Don't you think returning the
last, or any value, is redundant? We are living in the 21st century world,
and the R-core team might,I suppose, have a definite reason for"returning"
the last value. Any comments?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Valentin Petzel <valentin at petzel.at>
Sent: Monday, January 9, 2023 9:18 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] return value of {....}

Hello Akshai,

I think you are confusing {...} with local({...}). This one will evaluate
the expression in a separate environment, returning the last expression.

{...} simply evaluates multiple expressions as one and returns the result of
the last line, but it still evaluates each expression.

Assignment returns the assigned value, so we can chain assignments like this

a <- 1 + (b <- 2)

conveniently.

So when is {...} useful? Well, anyplace where you want to execute complex
stuff in a function argument. E.g. you might do:

data %>% group_by(x) %>% summarise(y = {if(x[1] > 10) sum(y) else mean(y)})

Regards,
Valentin Petzel

09.01.2023 15:47:53 akshay kulkarni <akshay_e4 at hotmail.com>:

> Dear members,
>                              I have the following code:
>
>> TB <- {x <- 3;y <- 5}
>> TB
> [1] 5
>
> It is consistent with the documentation: For {, the result of the last
expression evaluated. This has the visibility of the last evaluation.
>
> But both x AND y are created, but the "return value" is y. How can this be
advantageous for solving practical problems? Specifically, consider the
following code:
>
> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
>
> Both expr5 and expr7 are created, and are accessible by the code
> outside of the nested braces right? But the "return value" of the
> nested braces is expr7. So doesn't this mean that only expr7 should be
> accessible? Please help me entangle this (of course the return value
> of F is expr10, and all the other objects created by the preceding
> expressions are deleted. But expr5 is not, after the control passes
> outside of the nested braces!)
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>     [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From k@hun|ny@@h@13296 @end|ng |rom gm@||@com  Sat Jan  7 08:03:12 2023
From: k@hun|ny@@h@13296 @end|ng |rom gm@||@com (Nyasha)
Date: Sat, 7 Jan 2023 09:03:12 +0200
Subject: [R] 
 MLE Estimation of Gamma Distribution Parameters for data with
 'zeros'
Message-ID: <CAPO0VmZxiSzzpsKVQPpsMSodKM1qisXNCfR1Zm32T9=70se_MQ@mail.gmail.com>

Please how can one go about this one? I don't know how to go about it.

	[[alternative HTML version deleted]]


From mn@||z@deh @end|ng |rom y@hoo@com  Tue Jan 10 13:30:53 2023
From: mn@||z@deh @end|ng |rom y@hoo@com (Fahimeh Alizadeh)
Date: Tue, 10 Jan 2023 12:30:53 +0000 (UTC)
Subject: [R] My forest plot is not fit to windows in R software
References: <1899380576.9643212.1673353853414.ref@mail.yahoo.com>
Message-ID: <1899380576.9643212.1673353853414@mail.yahoo.com>

Dear Prof.?My forest plot is not fit to windows in R software, I have 49 studies but forest plot only show from 9 to 42.?
forest.meta(hidemeta, layout="RevMan5", xlab="Proportion", comb.r=T, comb.f=F, xlim = c(0,1), fontsize=10, digits=3)


Whould you please help me to access full forest plot??Thank you

Sincerely,Fahimeh

Dr. Fahimeh AlizadehPost-Doctorate Fellow and Ph.DMicrobial Biotechnology
Islamic Azad University
? ? ? ? ? ? ? ? ? ?
 
 ?
? ? ? ? ? ? ? ? ? ??
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 1673296370309blob.jpg
Type: image/png
Size: 78623 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20230110/2bd45762/attachment.png>

From @vi@e@gross m@iii@g oii gm@ii@com  Tue Jan 10 17:53:46 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Tue, 10 Jan 2023 11:53:46 -0500
Subject: [R] return value of {....}
In-Reply-To: <PU4P216MB15680CE40E939E34B5671D4BC8FF9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
 <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <009401d9247f$7e426fb0$7ac74f10$@gmail.com>
 <PU4P216MB15680CE40E939E34B5671D4BC8FF9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <005a01d92514$1b5eedc0$521cc940$@gmail.com>

Fair enough, Akshay. Wondering why a design was chosen is reasonable.

 

There are languages like python that allow unpacking multiple values and it
is not uncommon to return multiple things from some constructs as in this:

 

>>> a,b,c = { 4, 5, 6 }

>>> a

4

>>> b

5

>>> c

6

 

But that is a bit of an illusion as the thing in curly braces is a very
different creature called a set with three items.  Python does not need or
use curly braces for the purposes used in R as indentation levels group
things.

 

It is different in design. I do not know what other computer languages you
have used, but R is NOT them and must be approached for what it is, and it
is a fairly simple paradigm for the last item in a sequence to be the value
of the sequence. You can return multiple things, if you wish, in other ways.
Such as making a list:

 

vals <- list(1+2, sin(.7), cos(.7))

 

> vals[2:3]

[[1]]

[1] 0.6442177

 

[[2]]

[1] 0.7648422

 

You get the idea. R returns ONE thing and it ca have parts, named or not.

 

 

From: akshay kulkarni <akshay_e4 at hotmail.com> 
Sent: Tuesday, January 10, 2023 9:33 AM
To: avi.e.gross at gmail.com
Cc: 'R help Mailing list' <r-help at r-project.org>
Subject: Re: [R] return value of {....}

 

Dear Avi,

                 Thanks for your reply...your exhortations are indeed
justified...! But one caveat: I was not complaining about anything...just
was curious of the rationale of a particular design....Thanks again...

 

Thanking you,

Yours sincerely,

AKSHAY M KULKARNI   

  _____  

From: R-help <r-help-bounces at r-project.org
<mailto:r-help-bounces at r-project.org> > on behalf of avi.e.gross at gmail.com
<mailto:avi.e.gross at gmail.com>  <avi.e.gross at gmail.com
<mailto:avi.e.gross at gmail.com> >
Sent: Tuesday, January 10, 2023 4:39 AM
Cc: 'R help Mailing list' <r-help at r-project.org
<mailto:r-help at r-project.org> >
Subject: Re: [R] return value of {....} 

 

Akshay,

Your question seems a tad mysterious to me as you are complaining about
NOTHING.

R was designed to return single values. The last statement executed in a
function body, for example, is the value returned even when not at the end.

Scoping is another issue entirely. What is visible is another discussion.

So, yes, if you can see ALL the variables, you might see the last one BUT
there often is no variable at the end. There is an expression that evaluates
to a value with no NAME attached. You cannot reference that unless the block
in curly braces returns that value.

You can design your own language any way you want. The people who designed R
did it this way. Mind you, the most common use of curly braces is probably
in function bodies, or if/else blocks and loops, not quite what you are
looking at and complaining about. The design is what it is.

Others require things like an explicit return() statement. R chose not to.

And if the value is redundant for you, who cares?

Did you know that when running a program in the interpreter the last value
is stored in a variable like this:

> x <- 6
> .Last.value
[1] 6

Why would that duplicate be needed or useful?

Consider a partial calculation you want to reuse in another context:

> y = x*2 + 2*x -3
> z <- .Last.value/2
> z
[1] 10.5

Yes, you could have used "y" ...




-----Original Message-----
From: R-help <r-help-bounces at r-project.org
<mailto:r-help-bounces at r-project.org> > On Behalf Of akshay kulkarni
Sent: Monday, January 9, 2023 12:06 PM
To: Valentin Petzel <valentin at petzel.at <mailto:valentin at petzel.at> >
Cc: R help Mailing list <r-help at r-project.org <mailto:r-help at r-project.org>
>
Subject: Re: [R] return value of {....}

Dear Valentin,
                          But why should {....} "return" a value? It could
just as well evaluate all the expressions and store the resulting objects in
whatever environment the interpreter chooses, and then it would be left to
the user to manipulate any object he chooses. Don't you think returning the
last, or any value, is redundant? We are living in the 21st century world,
and the R-core team might,I suppose, have a definite reason for"returning"
the last value. Any comments?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Valentin Petzel <valentin at petzel.at <mailto:valentin at petzel.at> >
Sent: Monday, January 9, 2023 9:18 PM
To: akshay kulkarni <akshay_e4 at hotmail.com <mailto:akshay_e4 at hotmail.com> >
Cc: R help Mailing list <r-help at r-project.org <mailto:r-help at r-project.org>
>
Subject: Re: [R] return value of {....}

Hello Akshai,

I think you are confusing {...} with local({...}). This one will evaluate
the expression in a separate environment, returning the last expression.

{...} simply evaluates multiple expressions as one and returns the result of
the last line, but it still evaluates each expression.

Assignment returns the assigned value, so we can chain assignments like this

a <- 1 + (b <- 2)

conveniently.

So when is {...} useful? Well, anyplace where you want to execute complex
stuff in a function argument. E.g. you might do:

data %>% group_by(x) %>% summarise(y = {if(x[1] > 10) sum(y) else mean(y)})

Regards,
Valentin Petzel

09.01.2023 15:47:53 akshay kulkarni <akshay_e4 at hotmail.com
<mailto:akshay_e4 at hotmail.com> >:

> Dear members,
>                              I have the following code:
>
>> TB <- {x <- 3;y <- 5}
>> TB
> [1] 5
>
> It is consistent with the documentation: For {, the result of the last
expression evaluated. This has the visibility of the last evaluation.
>
> But both x AND y are created, but the "return value" is y. How can this be
advantageous for solving practical problems? Specifically, consider the
following code:
>
> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
>
> Both expr5 and expr7 are created, and are accessible by the code 
> outside of the nested braces right? But the "return value" of the 
> nested braces is expr7. So doesn't this mean that only expr7 should be 
> accessible? Please help me entangle this (of course the return value 
> of F is expr10, and all the other objects created by the preceding 
> expressions are deleted. But expr5 is not, after the control passes 
> outside of the nested braces!)
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>     [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To
UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To
UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To
UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Tue Jan 10 18:09:51 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Tue, 10 Jan 2023 17:09:51 +0000
Subject: [R] return value of {....}
In-Reply-To: <005a01d92514$1b5eedc0$521cc940$@gmail.com>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
 <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <009401d9247f$7e426fb0$7ac74f10$@gmail.com>
 <PU4P216MB15680CE40E939E34B5671D4BC8FF9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <005a01d92514$1b5eedc0$521cc940$@gmail.com>
Message-ID: <PU4P216MB15684D5D6851C277AD7FAA41C8FF9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Avi,
                 THanks a lot..much of the "rationale" is explained ....!

Thanking you,
Yours sincerely
AKSHAY M KULKARNI
________________________________
From: avi.e.gross at gmail.com <avi.e.gross at gmail.com>
Sent: Tuesday, January 10, 2023 10:23 PM
To: 'akshay kulkarni' <akshay_e4 at hotmail.com>
Cc: 'R help Mailing list' <r-help at r-project.org>
Subject: RE: [R] return value of {....}


Fair enough, Akshay. Wondering why a design was chosen is reasonable.



There are languages like python that allow unpacking multiple values and it is not uncommon to return multiple things from some constructs as in this:



>>> a,b,c = { 4, 5, 6 }

>>> a

4

>>> b

5

>>> c

6



But that is a bit of an illusion as the thing in curly braces is a very different creature called a set with three items.  Python does not need or use curly braces for the purposes used in R as indentation levels group things.



It is different in design. I do not know what other computer languages you have used, but R is NOT them and must be approached for what it is, and it is a fairly simple paradigm for the last item in a sequence to be the value of the sequence. You can return multiple things, if you wish, in other ways. Such as making a list:



vals <- list(1+2, sin(.7), cos(.7))



> vals[2:3]

[[1]]

[1] 0.6442177



[[2]]

[1] 0.7648422



You get the idea. R returns ONE thing and it ca have parts, named or not.





From: akshay kulkarni <akshay_e4 at hotmail.com>
Sent: Tuesday, January 10, 2023 9:33 AM
To: avi.e.gross at gmail.com
Cc: 'R help Mailing list' <r-help at r-project.org>
Subject: Re: [R] return value of {....}



Dear Avi,

                 Thanks for your reply...your exhortations are indeed justified...! But one caveat: I was not complaining about anything...just was curious of the rationale of a particular design....Thanks again...



Thanking you,

Yours sincerely,

AKSHAY M KULKARNI

________________________________

From: R-help <r-help-bounces at r-project.org<mailto:r-help-bounces at r-project.org>> on behalf of avi.e.gross at gmail.com<mailto:avi.e.gross at gmail.com> <avi.e.gross at gmail.com<mailto:avi.e.gross at gmail.com>>
Sent: Tuesday, January 10, 2023 4:39 AM
Cc: 'R help Mailing list' <r-help at r-project.org<mailto:r-help at r-project.org>>
Subject: Re: [R] return value of {....}



Akshay,

Your question seems a tad mysterious to me as you are complaining about
NOTHING.

R was designed to return single values. The last statement executed in a
function body, for example, is the value returned even when not at the end.

Scoping is another issue entirely. What is visible is another discussion.

So, yes, if you can see ALL the variables, you might see the last one BUT
there often is no variable at the end. There is an expression that evaluates
to a value with no NAME attached. You cannot reference that unless the block
in curly braces returns that value.

You can design your own language any way you want. The people who designed R
did it this way. Mind you, the most common use of curly braces is probably
in function bodies, or if/else blocks and loops, not quite what you are
looking at and complaining about. The design is what it is.

Others require things like an explicit return() statement. R chose not to.

And if the value is redundant for you, who cares?

Did you know that when running a program in the interpreter the last value
is stored in a variable like this:

> x <- 6
> .Last.value
[1] 6

Why would that duplicate be needed or useful?

Consider a partial calculation you want to reuse in another context:

> y = x*2 + 2*x -3
> z <- .Last.value/2
> z
[1] 10.5

Yes, you could have used "y" ...




-----Original Message-----
From: R-help <r-help-bounces at r-project.org<mailto:r-help-bounces at r-project.org>> On Behalf Of akshay kulkarni
Sent: Monday, January 9, 2023 12:06 PM
To: Valentin Petzel <valentin at petzel.at<mailto:valentin at petzel.at>>
Cc: R help Mailing list <r-help at r-project.org<mailto:r-help at r-project.org>>
Subject: Re: [R] return value of {....}

Dear Valentin,
                          But why should {....} "return" a value? It could
just as well evaluate all the expressions and store the resulting objects in
whatever environment the interpreter chooses, and then it would be left to
the user to manipulate any object he chooses. Don't you think returning the
last, or any value, is redundant? We are living in the 21st century world,
and the R-core team might,I suppose, have a definite reason for"returning"
the last value. Any comments?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Valentin Petzel <valentin at petzel.at<mailto:valentin at petzel.at>>
Sent: Monday, January 9, 2023 9:18 PM
To: akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>>
Cc: R help Mailing list <r-help at r-project.org<mailto:r-help at r-project.org>>
Subject: Re: [R] return value of {....}

Hello Akshai,

I think you are confusing {...} with local({...}). This one will evaluate
the expression in a separate environment, returning the last expression.

{...} simply evaluates multiple expressions as one and returns the result of
the last line, but it still evaluates each expression.

Assignment returns the assigned value, so we can chain assignments like this

a <- 1 + (b <- 2)

conveniently.

So when is {...} useful? Well, anyplace where you want to execute complex
stuff in a function argument. E.g. you might do:

data %>% group_by(x) %>% summarise(y = {if(x[1] > 10) sum(y) else mean(y)})

Regards,
Valentin Petzel

09.01.2023 15:47:53 akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>>:

> Dear members,
>                              I have the following code:
>
>> TB <- {x <- 3;y <- 5}
>> TB
> [1] 5
>
> It is consistent with the documentation: For {, the result of the last
expression evaluated. This has the visibility of the last evaluation.
>
> But both x AND y are created, but the "return value" is y. How can this be
advantageous for solving practical problems? Specifically, consider the
following code:
>
> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
>
> Both expr5 and expr7 are created, and are accessible by the code
> outside of the nested braces right? But the "return value" of the
> nested braces is expr7. So doesn't this mean that only expr7 should be
> accessible? Please help me entangle this (of course the return value
> of F is expr10, and all the other objects created by the preceding
> expressions are deleted. But expr5 is not, after the control passes
> outside of the nested braces!)
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>     [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jan 10 18:42:35 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 10 Jan 2023 09:42:35 -0800
Subject: [R] 
 MLE Estimation of Gamma Distribution Parameters for data with
 'zeros'
In-Reply-To: <CAPO0VmZxiSzzpsKVQPpsMSodKM1qisXNCfR1Zm32T9=70se_MQ@mail.gmail.com>
References: <CAPO0VmZxiSzzpsKVQPpsMSodKM1qisXNCfR1Zm32T9=70se_MQ@mail.gmail.com>
Message-ID: <CAGxFJbT3HZLWs9V0NpMcdz6EPP1KbDzBmP5jmwYDFp_6=4LNng@mail.gmail.com>

Is this homework? This list has a no-homework policy.


-- Bert

On Tue, Jan 10, 2023 at 8:13 AM Nyasha <kahuninyasha13296 at gmail.com> wrote:
>
> Please how can one go about this one? I don't know how to go about it.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Tue Jan 10 19:16:32 2023
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Tue, 10 Jan 2023 18:16:32 +0000
Subject: [R] My forest plot is not fit to windows in R software
In-Reply-To: <1899380576.9643212.1673353853414@mail.yahoo.com>
References: <1899380576.9643212.1673353853414.ref@mail.yahoo.com>
 <1899380576.9643212.1673353853414@mail.yahoo.com>
Message-ID: <5c10ff47-3a4a-ba1b-526b-2b0babdddb02@dewey.myzen.co.uk>

Dear Fahimeh

It would help if you also told us what package you are using as there 
are several which perform forest plots. I assume it is meta.

Your plot is cropped on three side as far as I can see. What parameters 
did you give to the call of the graphics device? What happens if you use 
a different graphics format like pdf? Then we may be able to see where 
the issue lies.

Michael

On 10/01/2023 12:30, Fahimeh Alizadeh via R-help wrote:
> Dear Prof.?My forest plot is not fit to windows in R software, I have 49 studies but forest plot only show from 9 to 42.
> forest.meta(hidemeta, layout="RevMan5", xlab="Proportion", comb.r=T, comb.f=F, xlim = c(0,1), fontsize=10, digits=3)
> 
> 
> Whould you please help me to access full forest plot??Thank you
> 
> Sincerely,Fahimeh
> 
> Dr. Fahimeh AlizadehPost-Doctorate Fellow and Ph.DMicrobial Biotechnology
> Islamic Azad University
>                     
>   
>    
>                      
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From mn@||z@deh @end|ng |rom y@hoo@com  Tue Jan 10 20:37:08 2023
From: mn@||z@deh @end|ng |rom y@hoo@com (Fahimeh Alizadeh)
Date: Tue, 10 Jan 2023 19:37:08 +0000 (UTC)
Subject: [R] My forest plot is not fit to windows in R software
In-Reply-To: <5c10ff47-3a4a-ba1b-526b-2b0babdddb02@dewey.myzen.co.uk>
References: <1899380576.9643212.1673353853414.ref@mail.yahoo.com>
 <1899380576.9643212.1673353853414@mail.yahoo.com>
 <5c10ff47-3a4a-ba1b-526b-2b0babdddb02@dewey.myzen.co.uk>
Message-ID: <176828580.10152576.1673379428214@mail.yahoo.com>

Dear Prof.Thank you for your kind response. I have only used:
install.packages("tidyverse")

install.packages("meta")

install.packages("metafor")

library(tidyverse)

library(meta)
library(metafor)and then,forest.meta(hidemeta, layout="RevMan5", xlab="Proportion", comb.r=T, comb.f=F, xlim = c(0,1), fontsize=10, digits=3)Unfortunately I am not familiar to R software, I have not chosen graphics device. could you please help me to choose graphics format like pdf?
All the best for you
Sincerely,Fahimeh Alizadeh



Dr. Fahimeh AlizadehPost-Doctorate Fellow and Ph.DMicrobial Biotechnology
Islamic Azad University
? ? ? ? ? ? ? ? ? ?
 
 ?
? ? ? ? ? ? ? ? ? ?? 

    On Tuesday, January 10, 2023 at 09:46:40 PM GMT+3:30, Michael Dewey <lists at dewey.myzen.co.uk> wrote:  
 
 Dear Fahimeh

It would help if you also told us what package you are using as there 
are several which perform forest plots. I assume it is meta.

Your plot is cropped on three side as far as I can see. What parameters 
did you give to the call of the graphics device? What happens if you use 
a different graphics format like pdf? Then we may be able to see where 
the issue lies.

Michael

On 10/01/2023 12:30, Fahimeh Alizadeh via R-help wrote:
> Dear Prof.?My forest plot is not fit to windows in R software, I have 49 studies but forest plot only show from 9 to 42.
> forest.meta(hidemeta, layout="RevMan5", xlab="Proportion", comb.r=T, comb.f=F, xlim = c(0,1), fontsize=10, digits=3)
> 
> 
> Whould you please help me to access full forest plot??Thank you
> 
> Sincerely,Fahimeh
> 
> Dr. Fahimeh AlizadehPost-Doctorate Fellow and Ph.DMicrobial Biotechnology
> Islamic Azad University
>? ? ? ? ? ? ? ? ? ? 
>? 
>? ? 
>? ? ? ? ? ? ? ? ? ? ? 
> 
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Michael
http://www.dewey.myzen.co.uk/home.html
  
	[[alternative HTML version deleted]]


From r@oknz @end|ng |rom gm@||@com  Wed Jan 11 04:01:03 2023
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Wed, 11 Jan 2023 16:01:03 +1300
Subject: [R] return value of {....}
In-Reply-To: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CABcYAdKVMuvyg8ss8PTqDaGP4Pt6kmdfTYFnLgfLhQhF7dst_Q@mail.gmail.com>

I am more than a little puzzled by your question.
In the construct {expr1; expr2; expr3} all of the
expressions expr1, expr2, and expr3 are evaluated,
in that order.  That's what curly braces are FOR.
When you want some expressions evaluated in a
specific order, that's why and when you use curly
braces.  If that's not what you want, don't use them.
Complaining about it is like complaining that + adds.


On Tue, 10 Jan 2023 at 03:47, akshay kulkarni <akshay_e4 at hotmail.com> wrote:

> Dear members,
>                              I have the following code:
>
> > TB <- {x <- 3;y <- 5}
> > TB
> [1] 5
>
> It is consistent with the documentation: For {, the result of the last
> expression evaluated. This has the visibility of the last evaluation.
>
> But both x AND y are created, but the "return value" is y. How can this be
> advantageous for solving practical problems? Specifically, consider the
> following code:
>
> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
>
> Both expr5 and expr7 are created, and are accessible by the code outside
> of the nested braces right? But the "return value" of the nested braces is
> expr7. So doesn't this mean that only expr7 should be accessible? Please
> help me entangle this (of course the return value of F is expr10, and all
> the other objects created by the preceding expressions are deleted. But
> expr5 is not, after the control passes outside of the nested braces!)
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ||@t@ @end|ng |rom dewey@myzen@co@uk  Wed Jan 11 11:30:12 2023
From: ||@t@ @end|ng |rom dewey@myzen@co@uk (Michael Dewey)
Date: Wed, 11 Jan 2023 10:30:12 +0000
Subject: [R] My forest plot is not fit to windows in R software
In-Reply-To: <176828580.10152576.1673379428214@mail.yahoo.com>
References: <1899380576.9643212.1673353853414.ref@mail.yahoo.com>
 <1899380576.9643212.1673353853414@mail.yahoo.com>
 <5c10ff47-3a4a-ba1b-526b-2b0babdddb02@dewey.myzen.co.uk>
 <176828580.10152576.1673379428214@mail.yahoo.com>
Message-ID: <c0769532-bf08-7193-f24f-59b874ea3dbe@dewey.myzen.co.uk>

Dear Fahimeh

Try preceding your call of forest.meta with

pdf("myplot.pdf")
forest.meta(..............)
dev.off()

Why did you set xlim to c(0, 1)

Michael

On 10/01/2023 19:37, Fahimeh Alizadeh wrote:
> Dear Prof.
> Thank you for your kind response. I have only used:
> 
> install.packages("tidyverse")
> 
> install.packages("meta")
> 
> install.packages("metafor")
> 
> library(tidyverse)
> 
> library(meta)
> 
> library(metafor)
> and then,
> 
> forest.meta(hidemeta, layout="|RevMan5|", xlab="Proportion", comb.r=T, comb.f=F, xlim = c(0,1), fontsize=10, 
> digits=3)
> 
> Unfortunately I am not familiar to R software, I have not chosen graphics device. could you please help me to choosegraphics format like pdf?
> 
> 
> All the best for you
> 
> 
> Sincerely,
> 
> Fahimeh Alizadeh
> 
> 
> 
> 
> 
> Dr. Fahimeh Alizadeh
> Post-Doctorate Fellow and Ph.D
> Microbial Biotechnology
> Islamic Azad University
> 
> 
> 
> 
> 
> 
> On Tuesday, January 10, 2023 at 09:46:40 PM GMT+3:30, Michael Dewey 
> <lists at dewey.myzen.co.uk> wrote:
> 
> 
> Dear Fahimeh
> 
> It would help if you also told us what package you are using as there
> are several which perform forest plots. I assume it is meta.
> 
> Your plot is cropped on three side as far as I can see. What parameters
> did you give to the call of the graphics device? What happens if you use
> a different graphics format like pdf? Then we may be able to see where
> the issue lies.
> 
> Michael
> 
> On 10/01/2023 12:30, Fahimeh Alizadeh via R-help wrote:
>  > Dear Prof.?My forest plot is not fit to windows in R software, I have 
> 49 studies but forest plot only show from 9 to 42.
>  > forest.meta(hidemeta, layout="RevMan5", xlab="Proportion", comb.r=T, 
> comb.f=F, xlim = c(0,1), fontsize=10, digits=3)
>  >
>  >
>  > Whould you please help me to access full forest plot??Thank you
>  >
>  > Sincerely,Fahimeh
>  >
>  > Dr. Fahimeh AlizadehPost-Doctorate Fellow and Ph.DMicrobial Biotechnology
>  > Islamic Azad University
> 
>  >
>  >
>  >
>  >
>  >
>  >
>  > ______________________________________________
>  > R-help at r-project.org <mailto:R-help at r-project.org> mailing list -- To 
> UNSUBSCRIBE and more, see
>  > https://stat.ethz.ch/mailman/listinfo/r-help 
> <https://stat.ethz.ch/mailman/listinfo/r-help>
>  > PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html 
> <http://www.R-project.org/posting-guide.html>
>  > and provide commented, minimal, self-contained, reproducible code.
> 
> -- 
> Michael
> http://www.dewey.myzen.co.uk/home.html 
> <http://www.dewey.myzen.co.uk/home.html>
> 
> 
> <http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient>	Virus-free.www.avg.com <http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient>
> 
> <#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>

-- 
Michael
http://www.dewey.myzen.co.uk/home.html


From up@n@nd@@p@n| @end|ng |rom gm@||@com  Wed Jan 11 12:38:20 2023
From: up@n@nd@@p@n| @end|ng |rom gm@||@com (Upananda Pani)
Date: Wed, 11 Jan 2023 17:08:20 +0530
Subject: [R] Reg: ggplot error
Message-ID: <CAEezrQQ-Y81MZfX5OOYLvH5ZGioJ2aZ3q-=pusWKPeEBTuL2eA@mail.gmail.com>

Dear All,

I am using roptest  function of package "ROptEst" (Kohl and Ruckdeschel
(2019)) to find out the ML, CvM-MD, and the RMX estimator and their
asymptotic confidence intervals. I am assuming 1-5% of erroneous data for
the RMX estimator.

Then I am trying to Plot the data in the form of a histogram and add the
three Gamma distribution densities with the estimated parameters and
validate the three models additionally with pp- and qq-plots.

I have tried to code it. I have attached the code and data. I am getting
error while fitting ggplot to plot the distribution densities.

I am doing some error which I am not able to correct. Please help me to
find out my error.

With sincere regards,
Upananda Pani

From er|cjberger @end|ng |rom gm@||@com  Wed Jan 11 13:01:38 2023
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 11 Jan 2023 14:01:38 +0200
Subject: [R] Reg: ggplot error
In-Reply-To: <CAEezrQQ-Y81MZfX5OOYLvH5ZGioJ2aZ3q-=pusWKPeEBTuL2eA@mail.gmail.com>
References: <CAEezrQQ-Y81MZfX5OOYLvH5ZGioJ2aZ3q-=pusWKPeEBTuL2eA@mail.gmail.com>
Message-ID: <CAGgJW7657DZxsAgqAcT4B7_CrSv7cGWwz2QQszGObRGrpL_R7w@mail.gmail.com>

No code or data came through.
Please read the posting guidelines.


On Wed, Jan 11, 2023 at 1:38 PM Upananda Pani <upananda.pani at gmail.com> wrote:
>
> Dear All,
>
> I am using roptest  function of package "ROptEst" (Kohl and Ruckdeschel
> (2019)) to find out the ML, CvM-MD, and the RMX estimator and their
> asymptotic confidence intervals. I am assuming 1-5% of erroneous data for
> the RMX estimator.
>
> Then I am trying to Plot the data in the form of a histogram and add the
> three Gamma distribution densities with the estimated parameters and
> validate the three models additionally with pp- and qq-plots.
>
> I have tried to code it. I have attached the code and data. I am getting
> error while fitting ggplot to plot the distribution densities.
>
> I am doing some error which I am not able to correct. Please help me to
> find out my error.
>
> With sincere regards,
> Upananda Pani
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From up@n@nd@@p@n| @end|ng |rom gm@||@com  Wed Jan 11 13:05:54 2023
From: up@n@nd@@p@n| @end|ng |rom gm@||@com (Upananda Pani)
Date: Wed, 11 Jan 2023 17:35:54 +0530
Subject: [R] Reg: ggplot error
In-Reply-To: <CAGgJW7657DZxsAgqAcT4B7_CrSv7cGWwz2QQszGObRGrpL_R7w@mail.gmail.com>
References: <CAEezrQQ-Y81MZfX5OOYLvH5ZGioJ2aZ3q-=pusWKPeEBTuL2eA@mail.gmail.com>
 <CAGgJW7657DZxsAgqAcT4B7_CrSv7cGWwz2QQszGObRGrpL_R7w@mail.gmail.com>
Message-ID: <CAEezrQSaqVWPu-t7xUsSW_reKY42=pZQxUb4Qi6ywCBT_VoxBQ@mail.gmail.com>

I am sorry.

On Wed, Jan 11, 2023 at 5:32 PM Eric Berger <ericjberger at gmail.com> wrote:

> No code or data came through.
> Please read the posting guidelines.
>
>
> On Wed, Jan 11, 2023 at 1:38 PM Upananda Pani <upananda.pani at gmail.com>
> wrote:
> >
> > Dear All,
> >
> > I am using roptest  function of package "ROptEst" (Kohl and Ruckdeschel
> > (2019)) to find out the ML, CvM-MD, and the RMX estimator and their
> > asymptotic confidence intervals. I am assuming 1-5% of erroneous data for
> > the RMX estimator.
> >
> > Then I am trying to Plot the data in the form of a histogram and add the
> > three Gamma distribution densities with the estimated parameters and
> > validate the three models additionally with pp- and qq-plots.
> >
> > I have tried to code it. I have attached the code and data. I am getting
> > error while fitting ggplot to plot the distribution densities.
> >
> > I am doing some error which I am not able to correct. Please help me to
> > find out my error.
> >
> > With sincere regards,
> > Upananda Pani
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Wed Jan 11 13:37:01 2023
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Wed, 11 Jan 2023 12:37:01 +0000
Subject: [R] Reg: ggplot error
In-Reply-To: <CAEezrQSaqVWPu-t7xUsSW_reKY42=pZQxUb4Qi6ywCBT_VoxBQ@mail.gmail.com>
References: <CAEezrQQ-Y81MZfX5OOYLvH5ZGioJ2aZ3q-=pusWKPeEBTuL2eA@mail.gmail.com>
 <CAGgJW7657DZxsAgqAcT4B7_CrSv7cGWwz2QQszGObRGrpL_R7w@mail.gmail.com>
 <CAEezrQSaqVWPu-t7xUsSW_reKY42=pZQxUb4Qi6ywCBT_VoxBQ@mail.gmail.com>
Message-ID: <b83e8f46715b492798c7cd0cae17f2ca@SRVEXCHCM1302.precheza.cz>

Hi

Attachments are mostly removed from emails so they probably will not reach
r-help.

You said you get an error, which is the first place you should look at. It
can navigate you to the source of the error if you read it carefully.

Anyway, if your code is complicated it is difficult to understand and
decipher. So think about simplification and maybe you will find the error
source yourself during this simplification.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Upananda Pani
> Sent: Wednesday, January 11, 2023 1:06 PM
> To: Eric Berger <ericjberger at gmail.com>
> Cc: r-help <r-help at r-project.org>
> Subject: Re: [R] Reg: ggplot error
> 
> I am sorry.
> 
> On Wed, Jan 11, 2023 at 5:32 PM Eric Berger <ericjberger at gmail.com> wrote:
> 
> > No code or data came through.
> > Please read the posting guidelines.
> >
> >
> > On Wed, Jan 11, 2023 at 1:38 PM Upananda Pani
> > <upananda.pani at gmail.com>
> > wrote:
> > >
> > > Dear All,
> > >
> > > I am using roptest  function of package "ROptEst" (Kohl and
> > > Ruckdeschel
> > > (2019)) to find out the ML, CvM-MD, and the RMX estimator and their
> > > asymptotic confidence intervals. I am assuming 1-5% of erroneous
> > > data for the RMX estimator.
> > >
> > > Then I am trying to Plot the data in the form of a histogram and add
> > > the three Gamma distribution densities with the estimated parameters
> > > and validate the three models additionally with pp- and qq-plots.
> > >
> > > I have tried to code it. I have attached the code and data. I am
> > > getting error while fitting ggplot to plot the distribution densities.
> > >
> > > I am doing some error which I am not able to correct. Please help me
> > > to find out my error.
> > >
> > > With sincere regards,
> > > Upananda Pani
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From n|ckmwr@y @end|ng |rom gm@||@com  Wed Jan 11 13:47:39 2023
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Wed, 11 Jan 2023 12:47:39 +0000
Subject: [R] Topological network Map
Message-ID: <CABxY9BOoZV-NUmcwZ5xqWYmH=Ez=OS5x7yV3Q=_WK9SF8MwNPg@mail.gmail.com>

Hello I'd like to create a simple topological map of a river system, ie all
the waterways, where they join and points on them such as gauging stations
so that it looks something like the London Tube map - where distances are
not important but the relationships of the nodes are.
I could probably Heath-Robinson something together but I wondered whether
there was any kind of package already out there to save me reinventing the
wheel.  I've had a look but I can't find anything which seems to do this.
Does anyone know whether there is already such a thing or is this an
opportunity to create my first candidate R package?
Thanks Nick Wray

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Wed Jan 11 13:54:47 2023
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Wed, 11 Jan 2023 14:54:47 +0200
Subject: [R] Topological network Map
In-Reply-To: <CABxY9BOoZV-NUmcwZ5xqWYmH=Ez=OS5x7yV3Q=_WK9SF8MwNPg@mail.gmail.com>
References: <CABxY9BOoZV-NUmcwZ5xqWYmH=Ez=OS5x7yV3Q=_WK9SF8MwNPg@mail.gmail.com>
Message-ID: <CAGgJW75T7vzEwBaT_YjD9LejMQzpvi=_uzXsnWKWOkW4n3n1Wg@mail.gmail.com>

Google using "R package subway map"
produced
https://www.r-bloggers.com/2021/01/non-hierarchical-edge-bundling-flow-maps-and-metro-maps-in-r/

which looks promising

On Wed, Jan 11, 2023 at 2:48 PM Nick Wray <nickmwray at gmail.com> wrote:
>
> Hello I'd like to create a simple topological map of a river system, ie all
> the waterways, where they join and points on them such as gauging stations
> so that it looks something like the London Tube map - where distances are
> not important but the relationships of the nodes are.
> I could probably Heath-Robinson something together but I wondered whether
> there was any kind of package already out there to save me reinventing the
> wheel.  I've had a look but I can't find anything which seems to do this.
> Does anyone know whether there is already such a thing or is this an
> opportunity to create my first candidate R package?
> Thanks Nick Wray
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @|gbert @end|ng |rom w|w|@hu-ber||n@de  Wed Jan 11 17:13:57 2023
From: @|gbert @end|ng |rom w|w|@hu-ber||n@de (Sigbert Klinke)
Date: Wed, 11 Jan 2023 17:13:57 +0100
Subject: [R] gmp::bigq vs. MASS::fractions
In-Reply-To: <20230107195500.3ceb4d83@Tarkus>
References: <6c8a775d-b141-edc0-c222-fbeea1d5cb95@wiwi.hu-berlin.de>
 <20230107195500.3ceb4d83@Tarkus>
Message-ID: <9abe8ed4-6f3d-0f6d-0184-be70256de25c@wiwi.hu-berlin.de>

Hello,

Am 07.01.23 um 17:55 schrieb Ivan Krylov:
 > What do you need the fractions for?
 >

When writing tasks for statistics exams, I try to avoid non-terminal 
intermediate results. Students might round them and arrive at a final 
result that might be slightly different from the true value. Although 
the exam package supports a tolerance for checking the result, this 
could be problematic. To check if a number is non-terminal, I calculate 
a fraction representation and check if the denominator can be expressed 
by 2^p 5^q.

@Enrico: When I started developing assignments a few years ago, I was 
not familiar with gmp. :(

Thanks Sigbert


From @k@h@y_e4 @end|ng |rom hotm@||@com  Wed Jan 11 18:04:41 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Wed, 11 Jan 2023 17:04:41 +0000
Subject: [R] return value of {....}
In-Reply-To: <CABcYAdKVMuvyg8ss8PTqDaGP4Pt6kmdfTYFnLgfLhQhF7dst_Q@mail.gmail.com>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CABcYAdKVMuvyg8ss8PTqDaGP4Pt6kmdfTYFnLgfLhQhF7dst_Q@mail.gmail.com>
Message-ID: <PU4P216MB1568AC749BD19CFC3A19BC6CC8FC9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Richard,
                        Thanks for your reply. As replied to Avi, i was not complaining, just inquiring: was just curious to know the rationale for the design of {...}, thas all...!

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Richard O'Keefe <raoknz at gmail.com>
Sent: Wednesday, January 11, 2023 8:31 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] return value of {....}

I am more than a little puzzled by your question.
In the construct {expr1; expr2; expr3} all of the
expressions expr1, expr2, and expr3 are evaluated,
in that order.  That's what curly braces are FOR.
When you want some expressions evaluated in a
specific order, that's why and when you use curly
braces.  If that's not what you want, don't use them.
Complaining about it is like complaining that + adds.


On Tue, 10 Jan 2023 at 03:47, akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
Dear members,
                             I have the following code:

> TB <- {x <- 3;y <- 5}
> TB
[1] 5

It is consistent with the documentation: For {, the result of the last expression evaluated. This has the visibility of the last evaluation.

But both x AND y are created, but the "return value" is y. How can this be advantageous for solving practical problems? Specifically, consider the following code:

F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}

Both expr5 and expr7 are created, and are accessible by the code outside of the nested braces right? But the "return value" of the nested braces is expr7. So doesn't this mean that only expr7 should be accessible? Please help me entangle this (of course the return value of F is expr10, and all the other objects created by the preceding expressions are deleted. But expr5 is not, after the control passes outside of the nested braces!)

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From petr@p|k@| @end|ng |rom prechez@@cz  Thu Jan 12 06:48:54 2023
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Thu, 12 Jan 2023 05:48:54 +0000
Subject: [R] Reg: ggplot error
In-Reply-To: <CAEezrQR-fp+9+cbF3s7KLSoORFLXCO+JpE+pqvwE51EOXcuKig@mail.gmail.com>
References: <CAEezrQQ-Y81MZfX5OOYLvH5ZGioJ2aZ3q-=pusWKPeEBTuL2eA@mail.gmail.com>
 <CAGgJW7657DZxsAgqAcT4B7_CrSv7cGWwz2QQszGObRGrpL_R7w@mail.gmail.com>
 <CAEezrQSaqVWPu-t7xUsSW_reKY42=pZQxUb4Qi6ywCBT_VoxBQ@mail.gmail.com>
 <b83e8f46715b492798c7cd0cae17f2ca@SRVEXCHCM1302.precheza.cz>
 <CAEezrQR-fp+9+cbF3s7KLSoORFLXCO+JpE+pqvwE51EOXcuKig@mail.gmail.com>
Message-ID: <ea9c7d0cf8e940e1a7388f96dce02e9b@SRVEXCHCM1302.precheza.cz>

Hallo

I am not familiar with any of packages you use (except of MASS and ggplot2) and the code is too complicated without any hint where the error could come from and what is the message you get. I wonder if anybody would like to go through your whole code.

1. data seems to be read correctly
ICUData <- read.csv(file = "ICUData.csv", stringsAsFactors = TRUE)
ICUData.neuro <- ICUData[ICUData$surgery == "neuro",]

2. ggplot(ICUData, aes(x=ICUData.neuro$LOS)) +
  geom_histogram(aes(y=after_stat(density)), binwidth = 5, 
                 fill = "darkgrey")

gives me error

Error in `check_aesthetics()`:
! Aesthetics must be either length 1 or the same as the data (500): x
Run `]8;;rstudio:run:rlang::last_error()rlang::last_error()]8;;` to see where the error occurred.

which, I believe, resulted from using whole ICUData in ggplot but only ICUData.neuro as aes value. Compare:

ggplot(ICUData.neuro, aes(x=ICUData.neuro$LOS)) +
  geom_histogram(aes(y=after_stat(density)), binwidth = 5,
                 fill = "darkgrey")

with

ggplot(ICUData, aes(x=ICUData.neuro$LOS)) +
  geom_histogram(aes(y=after_stat(density)), binwidth = 5,
                 fill = "darkgrey")

Cheers
Petr

And I do not provide private consulting so keep your posts to R help. Others may have much more insightful answers.


From: Upananda Pani <upananda.pani at gmail.com> 
Sent: Wednesday, January 11, 2023 2:43 PM
To: PIKAL Petr <petr.pikal at precheza.cz>
Subject: Re: [R] Reg: ggplot error

Hi Respected Member,

Please find attached.

Regards,
Upananda Pani

On Wed, Jan 11, 2023 at 6:07 PM PIKAL Petr <mailto:petr.pikal at precheza.cz> wrote:
Hi

Attachments are mostly removed from emails so they probably will not reach
r-help.

You said you get an error, which is the first place you should look at. It
can navigate you to the source of the error if you read it carefully.

Anyway, if your code is complicated it is difficult to understand and
decipher. So think about simplification and maybe you will find the error
source yourself during this simplification.

Cheers
Petr

> -----Original Message-----
> From: R-help <mailto:r-help-bounces at r-project.org> On Behalf Of Upananda Pani
> Sent: Wednesday, January 11, 2023 1:06 PM
> To: Eric Berger <mailto:ericjberger at gmail.com>
> Cc: r-help <mailto:r-help at r-project.org>
> Subject: Re: [R] Reg: ggplot error
> 
> I am sorry.
> 
> On Wed, Jan 11, 2023 at 5:32 PM Eric Berger <mailto:ericjberger at gmail.com> wrote:
> 
> > No code or data came through.
> > Please read the posting guidelines.
> >
> >
> > On Wed, Jan 11, 2023 at 1:38 PM Upananda Pani
> > <mailto:upananda.pani at gmail.com>
> > wrote:
> > >
> > > Dear All,
> > >
> > > I am using roptest  function of package "ROptEst" (Kohl and
> > > Ruckdeschel
> > > (2019)) to find out the ML, CvM-MD, and the RMX estimator and their
> > > asymptotic confidence intervals. I am assuming 1-5% of erroneous
> > > data for the RMX estimator.
> > >
> > > Then I am trying to Plot the data in the form of a histogram and add
> > > the three Gamma distribution densities with the estimated parameters
> > > and validate the three models additionally with pp- and qq-plots.
> > >
> > > I have tried to code it. I have attached the code and data. I am
> > > getting error while fitting ggplot to plot the distribution densities.
> > >
> > > I am doing some error which I am not able to correct. Please help me
> > > to find out my error.
> > >
> > > With sincere regards,
> > > Upananda Pani
> > > ______________________________________________
> > > mailto:R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> >
> 
>       [[alternative HTML version deleted]]
> 
> ______________________________________________
> mailto:R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From @tyen @end|ng |rom ntu@edu@tw  Thu Jan 12 07:15:23 2023
From: @tyen @end|ng |rom ntu@edu@tw (Steven T. Yen)
Date: Thu, 12 Jan 2023 14:15:23 +0800
Subject: [R] Background for word
Message-ID: <3363b692-7cd7-e24b-f8bd-464e92b8a7f4@ntu.edu.tw>

Dear,

I am having a lucky day. I am programming in RStudio and when I type 
"black" (quotation signs included, the word turn into a word with black 
ground. Couldn't get rid of the background----copying to Word, Excel, 
text editor and paste back to Rstudio, the word is still in black 
background? Help!

 ??? dv.group<-c("black","othrrace"); cat.ref<-"white"


From bor|@@@te|pe @end|ng |rom utoronto@c@  Thu Jan 12 08:17:15 2023
From: bor|@@@te|pe @end|ng |rom utoronto@c@ (Boris Steipe)
Date: Thu, 12 Jan 2023 07:17:15 +0000
Subject: [R] Background for word
In-Reply-To: <3363b692-7cd7-e24b-f8bd-464e92b8a7f4@ntu.edu.tw>
References: <3363b692-7cd7-e24b-f8bd-464e92b8a7f4@ntu.edu.tw>
Message-ID: <D6227D7D-E2A8-4092-8804-32D654997D88@utoronto.ca>

It's a new editor feature: see the release notes:

https://dailies.rstudio.com/version/2022.12.0+353.pro20/
? Code editor can show previews of color in strings (R named colors e.g. ?tomato3? or of the forms ?#rgb?, ?#rrggbb?, ?#rrggbbaa?) when Options > Code > Display > [ ] enable preview of named and hexadecimal colors is checked.

You can turn it off in the global preferences if it bothers you.
Tools > Global Options ... > Code > Display ... there is the checkbox mentioned above

I like it, it's really useful to set up colour ramps. 


Cheers,
Boris 


> On 2023-01-12, at 01:15, Steven T. Yen <styen at ntu.edu.tw> wrote:
> 
> Dear,
> 
> I am having a lucky day. I am programming in RStudio and when I type "black" (quotation signs included, the word turn into a word with black ground. Couldn't get rid of the background----copying to Word, Excel, text editor and paste back to Rstudio, the word is still in black background? Help!
> 
>     dv.group<-c("black","othrrace"); cat.ref<-"white"
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Jan 12 08:51:11 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 12 Jan 2023 07:51:11 +0000
Subject: [R] Reg: ggplot error
In-Reply-To: <ea9c7d0cf8e940e1a7388f96dce02e9b@SRVEXCHCM1302.precheza.cz>
References: <CAEezrQQ-Y81MZfX5OOYLvH5ZGioJ2aZ3q-=pusWKPeEBTuL2eA@mail.gmail.com>
 <CAGgJW7657DZxsAgqAcT4B7_CrSv7cGWwz2QQszGObRGrpL_R7w@mail.gmail.com>
 <CAEezrQSaqVWPu-t7xUsSW_reKY42=pZQxUb4Qi6ywCBT_VoxBQ@mail.gmail.com>
 <b83e8f46715b492798c7cd0cae17f2ca@SRVEXCHCM1302.precheza.cz>
 <CAEezrQR-fp+9+cbF3s7KLSoORFLXCO+JpE+pqvwE51EOXcuKig@mail.gmail.com>
 <ea9c7d0cf8e940e1a7388f96dce02e9b@SRVEXCHCM1302.precheza.cz>
Message-ID: <0637e55d-21f2-3f7e-cae7-d4cbc8f0f8d4@sapo.pt>

?s 05:48 de 12/01/2023, PIKAL Petr escreveu:
> Hallo
> 
> I am not familiar with any of packages you use (except of MASS and ggplot2) and the code is too complicated without any hint where the error could come from and what is the message you get. I wonder if anybody would like to go through your whole code.
> 
> 1. data seems to be read correctly
> ICUData <- read.csv(file = "ICUData.csv", stringsAsFactors = TRUE)
> ICUData.neuro <- ICUData[ICUData$surgery == "neuro",]
> 
> 2. ggplot(ICUData, aes(x=ICUData.neuro$LOS)) +
>    geom_histogram(aes(y=after_stat(density)), binwidth = 5,
>                   fill = "darkgrey")
> 
> gives me error
> 
> Error in `check_aesthetics()`:
> ! Aesthetics must be either length 1 or the same as the data (500): x
> Run `]8;;rstudio:run:rlang::last_error()rlang::last_error()]8;;` to see where the error occurred.
> 
> which, I believe, resulted from using whole ICUData in ggplot but only ICUData.neuro as aes value. Compare:
> 
> ggplot(ICUData.neuro, aes(x=ICUData.neuro$LOS)) +
>    geom_histogram(aes(y=after_stat(density)), binwidth = 5,
>                   fill = "darkgrey")
> 
> with
> 
> ggplot(ICUData, aes(x=ICUData.neuro$LOS)) +
>    geom_histogram(aes(y=after_stat(density)), binwidth = 5,
>                   fill = "darkgrey")
> 
> Cheers
> Petr
> 
> And I do not provide private consulting so keep your posts to R help. Others may have much more insightful answers.
> 
> 
> From: Upananda Pani <upananda.pani at gmail.com>
> Sent: Wednesday, January 11, 2023 2:43 PM
> To: PIKAL Petr <petr.pikal at precheza.cz>
> Subject: Re: [R] Reg: ggplot error
> 
> Hi Respected Member,
> 
> Please find attached.
> 
> Regards,
> Upananda Pani
> 
> On Wed, Jan 11, 2023 at 6:07 PM PIKAL Petr <mailto:petr.pikal at precheza.cz> wrote:
> Hi
> 
> Attachments are mostly removed from emails so they probably will not reach
> r-help.
> 
> You said you get an error, which is the first place you should look at. It
> can navigate you to the source of the error if you read it carefully.
> 
> Anyway, if your code is complicated it is difficult to understand and
> decipher. So think about simplification and maybe you will find the error
> source yourself during this simplification.
> 
> Cheers
> Petr
> 
>> -----Original Message-----
>> From: R-help <mailto:r-help-bounces at r-project.org> On Behalf Of Upananda Pani
>> Sent: Wednesday, January 11, 2023 1:06 PM
>> To: Eric Berger <mailto:ericjberger at gmail.com>
>> Cc: r-help <mailto:r-help at r-project.org>
>> Subject: Re: [R] Reg: ggplot error
>>
>> I am sorry.
>>
>> On Wed, Jan 11, 2023 at 5:32 PM Eric Berger <mailto:ericjberger at gmail.com> wrote:
>>
>>> No code or data came through.
>>> Please read the posting guidelines.
>>>
>>>
>>> On Wed, Jan 11, 2023 at 1:38 PM Upananda Pani
>>> <mailto:upananda.pani at gmail.com>
>>> wrote:
>>>>
>>>> Dear All,
>>>>
>>>> I am using roptest  function of package "ROptEst" (Kohl and
>>>> Ruckdeschel
>>>> (2019)) to find out the ML, CvM-MD, and the RMX estimator and their
>>>> asymptotic confidence intervals. I am assuming 1-5% of erroneous
>>>> data for the RMX estimator.
>>>>
>>>> Then I am trying to Plot the data in the form of a histogram and add
>>>> the three Gamma distribution densities with the estimated parameters
>>>> and validate the three models additionally with pp- and qq-plots.
>>>>
>>>> I have tried to code it. I have attached the code and data. I am
>>>> getting error while fitting ggplot to plot the distribution densities.
>>>>
>>>> I am doing some error which I am not able to correct. Please help me
>>>> to find out my error.
>>>>
>>>> With sincere regards,
>>>> Upananda Pani
>>>> ______________________________________________
>>>> mailto:R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>
>>        [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> mailto:R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
Hello,

This seems to be solvable with only the column name in aes().


ggplot(ICUData.neuro, aes(x = LOS)) +
   geom_histogram(aes(y = after_stat(density)), binwidth = 5, fill = 
"darkgrey")


Hope this helps,

Rui Barradas


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Jan 12 09:00:06 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 12 Jan 2023 08:00:06 +0000
Subject: [R] Background for word
In-Reply-To: <3363b692-7cd7-e24b-f8bd-464e92b8a7f4@ntu.edu.tw>
References: <3363b692-7cd7-e24b-f8bd-464e92b8a7f4@ntu.edu.tw>
Message-ID: <f04c0396-71cb-9a27-92f9-9b410f022462@sapo.pt>

?s 06:15 de 12/01/2023, Steven T. Yen escreveu:
> Dear,
> 
> I am having a lucky day. I am programming in RStudio and when I type 
> "black" (quotation signs included, the word turn into a word with black 
> ground. Couldn't get rid of the background----copying to Word, Excel, 
> text editor and paste back to Rstudio, the word is still in black 
> background? Help!
> 
>  ??? dv.group<-c("black","othrrace"); cat.ref<-"white"
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

I had the same problem and asked the RStudio Community about it. The 
answer solved the problem.


https://community.rstudio.com/t/after-updating-rstudio-color-names-are-highlighted/155600


Hope this helps,

Rui Barradas


From r-p@ck@ge@ @end|ng |rom r-project@org  Wed Jan 11 19:41:56 2023
From: r-p@ck@ge@ @end|ng |rom r-project@org (Vivek Atal via R-packages)
Date: Wed, 11 Jan 2023 18:41:56 +0000 (UTC)
Subject: [R] [R-pkgs] New CRAN package announcement: azlogr
References: <1506840172.8984.1673462516211.ref@mail.yahoo.com>
Message-ID: <1506840172.8984.1673462516211@mail.yahoo.com>

I am excited to announce that `azlogr` is published on CRAN!
This package?enables logging in 'R' by extending the functionality of 'logger' package. There is an option to add additional custom meta-data while logging, which can sometimes be helpful.?Logging messages are displayed on console and optionally they are sent to 'Azure Log Analytics' workspace in real-time.
The package comes with a vignette, How to use azlogr, that (hopefully) provides a good introduction to using the functions for easy logging. Example usage below:
# Azure Log Analytics workspace id and shared key are fetched
# from environment variables.
Sys.setenv(AZ_LOG_ID = "<enter-your-Azure-Log-Analytics-workspace-id>")
Sys.setenv(AZ_LOG_KEY = "<enter-your-Azure-Log-Analytics-shared-key>")

library(azlogr)

# Optionally, add additional meta-data, `country` and `id`, to be collected
# while logging, on top of the default fields - 'level', 'time', 'msg'.
set_log_config(
  log_fields = c("level", "time", "msg"),
  additional_fields = list(country = "in", id = 123)
)

# Use logger_* functions with appropriate logging level to log.
# If POST is successful, then it will be available in custom log table on
# Azure Log Analytics, by default table name will be `log_from_r`_CL (_CL is
# added by Azure for any custom log table)
logger_info("log info sent to Azure")
#> {"level":"INFO","time":"2023-01-11 13:15:04","msg":"log info sent to Azure","country":"in","id":123}

# If the POST request is unsuccessful due to Azure credential issue, then log
# message is displayed on console and a warning is generated with error details.
logger_info("log info sent to Azure")
#> {"level":"INFO","time":"2023-01-11 13:15:04","msg":"log info sent to Azure","country":"in","id":123}
#> Warning message:
#> In logger_level(logger::INFO, ...) :
#>   Some error happened while sending POST request to 'Azure Log Analytics' workspace.
#> Error message: Error in curl::curl_fetch_memory(url, handle = handle) :
#>   Could not resolve host: abcd.ods.opinsights.azure.com
Many thanks to the author of?'logger' package,?and to the CRAN team for a speedy onboarding!

RegardsVivek Atal
	[[alternative HTML version deleted]]

_______________________________________________
R-packages mailing list
R-packages at r-project.org
https://stat.ethz.ch/mailman/listinfo/r-packages


From |eo@m@d@ @end|ng |rom @yon|c@eu  Thu Jan 12 21:14:45 2023
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leonard Mada)
Date: Thu, 12 Jan 2023 22:14:45 +0200
Subject: [R] return value of {....}
Message-ID: <bf2b6310-a43e-c46b-ff91-72e11f014f1b@syonic.eu>

Dear Akshay,

The best response was given by Andrew. "{...}" is not a closure.

This is unusual for someone used to C-type languages. But I will try to 
explain some of the rationale.

In the case that "{...}" was a closure, then external variables would 
need to be explicitly declared before the closure (in order to reuse 
those values):
intermediate = c()
{
 ??? intermediate = ...;
 ??? result = someFUN(intermediate);
}

1.) Interactive Sessions
This is cumbersome in interactive sessions. For example: you often 
compute the mean or the variance as intermediary results, and will need 
them later on as well. They could have been computed outside the 
"closure", but writing code in interactive sessions may not always be 
straightforward.

2.) Missing arguments
f = function(x, y) {
 ??? if(missing(y)) {
 ?? ?? ? # assuming x = matrix
 ??? ??? y = x[,2]; x = x[,1];
 ??? }
}
It would be much more cumbersome to define/use a temporary tempY.

I hope this gives a better perspective why this is indeed a useful 
feature - even if it is counterintuitive.

Sincerely,

Leonard


From ro@||n@ump @end|ng |rom gm@||@com  Fri Jan 13 06:11:30 2023
From: ro@||n@ump @end|ng |rom gm@||@com (roslinazairimah zakaria)
Date: Fri, 13 Jan 2023 13:11:30 +0800
Subject: [R] Customise Plot tick label on time series plot using date series
Message-ID: <CANTvJZKHgwQA+CzXhnfSd3zfnFG4hx7mA_mr7zkpCGvLLrBJug@mail.gmail.com>

Hi,

I would like to customise my date series on the plot. I tried this:

dt_ts <- ts(dt)
autoplot(dt_ts[,2]) + ylab("Charge counts") + xlab("Daily")

but the label is not the date series.

Tqvm for any help given.


> dput(dt)
structure(list(time = c("1/1/2014", "2/1/2014", "3/1/2014", "4/1/2014",
"5/1/2014", "6/1/2014", "7/1/2014", "8/1/2014", "9/1/2014", "10/1/2014",
"11/1/2014", "12/1/2014", "13/1/2014", "14/1/2014", "15/1/2014",
"16/1/2014", "17/1/2014", "18/1/2014", "19/1/2014", "20/1/2014",
"21/1/2014", "22/1/2014", "23/1/2014", "24/1/2014", "25/1/2014",
"26/1/2014", "27/1/2014", "28/1/2014", "29/1/2014", "30/1/2014",
"31/1/2014", "1/2/2014", "2/2/2014", "3/2/2014", "4/2/2014",
"5/2/2014", "6/2/2014", "7/2/2014", "8/2/2014", "9/2/2014", "10/2/2014",
"11/2/2014", "12/2/2014", "13/2/2014", "14/2/2014", "15/2/2014",
"16/2/2014", "17/2/2014", "18/2/2014", "19/2/2014", "20/2/2014",
"21/2/2014", "22/2/2014", "23/2/2014", "24/2/2014", "25/2/2014",
"26/2/2014", "27/2/2014", "28/2/2014", "1/3/2014", "2/3/2014",
"3/3/2014", "4/3/2014", "5/3/2014", "6/3/2014", "7/3/2014", "8/3/2014",
"9/3/2014", "10/3/2014", "11/3/2014", "12/3/2014", "13/3/2014",
"14/3/2014", "15/3/2014", "16/3/2014", "17/3/2014", "18/3/2014",
"19/3/2014", "20/3/2014", "21/3/2014", "22/3/2014", "23/3/2014",
"24/3/2014", "25/3/2014", "26/3/2014", "27/3/2014", "28/3/2014",
"29/3/2014", "30/3/2014", "31/3/2014", "1/4/2014", "2/4/2014",
"3/4/2014", "4/4/2014", "5/4/2014", "6/4/2014", "7/4/2014", "8/4/2014",
"9/4/2014", "10/4/2014", "11/4/2014", "12/4/2014", "13/4/2014",
"14/4/2014", "15/4/2014", "16/4/2014", "17/4/2014", "18/4/2014",
"19/4/2014", "20/4/2014", "21/4/2014", "22/4/2014", "23/4/2014",
"24/4/2014", "25/4/2014", "26/4/2014", "27/4/2014", "28/4/2014",
"29/4/2014", "30/4/2014", "1/5/2014", "2/5/2014", "3/5/2014",
"4/5/2014", "5/5/2014", "6/5/2014", "7/5/2014", "8/5/2014", "9/5/2014",
"10/5/2014", "11/5/2014", "12/5/2014", "13/5/2014", "14/5/2014",
"15/5/2014", "16/5/2014", "17/5/2014", "18/5/2014", "19/5/2014",
"20/5/2014", "21/5/2014", "22/5/2014", "23/5/2014", "24/5/2014",
"25/5/2014", "26/5/2014", "27/5/2014", "28/5/2014", "29/5/2014",
"30/5/2014", "31/5/2014", "1/6/2014", "2/6/2014", "3/6/2014",
"4/6/2014", "5/6/2014", "6/6/2014", "7/6/2014", "8/6/2014", "9/6/2014",
"10/6/2014", "11/6/2014", "12/6/2014", "13/6/2014", "14/6/2014",
"15/6/2014", "16/6/2014", "17/6/2014", "18/6/2014", "19/6/2014",
"20/6/2014", "21/6/2014", "22/6/2014", "23/6/2014", "24/6/2014",
"25/6/2014", "26/6/2014", "27/6/2014", "28/6/2014", "29/6/2014",
"30/6/2014", "1/7/2014", "2/7/2014", "3/7/2014", "4/7/2014",
"5/7/2014", "6/7/2014", "7/7/2014", "8/7/2014", "9/7/2014", "10/7/2014",
"11/7/2014", "12/7/2014", "13/7/2014", "14/7/2014", "15/7/2014",
"16/7/2014", "17/7/2014", "18/7/2014", "19/7/2014", "20/7/2014",
"21/7/2014", "22/7/2014", "23/7/2014", "24/7/2014", "25/7/2014",
"26/7/2014", "27/7/2014", "28/7/2014", "29/7/2014", "30/7/2014",
"31/7/2014", "1/8/2014", "2/8/2014", "3/8/2014", "4/8/2014",
"5/8/2014", "6/8/2014", "7/8/2014", "8/8/2014", "9/8/2014", "10/8/2014",
"11/8/2014", "12/8/2014", "13/8/2014", "14/8/2014", "15/8/2014",
"16/8/2014", "17/8/2014", "18/8/2014", "19/8/2014", "20/8/2014",
"21/8/2014", "22/8/2014", "23/8/2014", "24/8/2014", "25/8/2014",
"26/8/2014", "27/8/2014", "28/8/2014", "29/8/2014", "30/8/2014",
"31/8/2014", "1/9/2014", "2/9/2014", "3/9/2014", "4/9/2014",
"5/9/2014", "6/9/2014", "7/9/2014", "8/9/2014", "9/9/2014", "10/9/2014",
"11/9/2014", "12/9/2014", "13/9/2014", "14/9/2014", "15/9/2014",
"16/9/2014", "17/9/2014", "18/9/2014", "19/9/2014", "20/9/2014",
"21/9/2014", "22/9/2014", "23/9/2014", "24/9/2014", "25/9/2014",
"26/9/2014", "27/9/2014", "28/9/2014", "29/9/2014", "30/9/2014",
"1/10/2014", "2/10/2014", "3/10/2014", "4/10/2014", "5/10/2014",
"6/10/2014", "7/10/2014", "8/10/2014", "9/10/2014", "10/10/2014",
"11/10/2014", "12/10/2014", "13/10/2014", "14/10/2014", "15/10/2014",
"16/10/2014", "17/10/2014", "18/10/2014", "19/10/2014", "20/10/2014",
"21/10/2014", "22/10/2014", "23/10/2014", "24/10/2014", "25/10/2014",
"26/10/2014", "27/10/2014", "28/10/2014", "29/10/2014", "30/10/2014",
"31/10/2014", "1/11/2014", "2/11/2014", "3/11/2014", "4/11/2014",
"5/11/2014", "6/11/2014", "7/11/2014", "8/11/2014", "9/11/2014",
"10/11/2014", "11/11/2014", "12/11/2014", "13/11/2014", "14/11/2014",
"15/11/2014", "16/11/2014", "17/11/2014", "18/11/2014", "19/11/2014",
"20/11/2014", "21/11/2014", "22/11/2014", "23/11/2014", "24/11/2014",
"25/11/2014", "26/11/2014", "27/11/2014", "28/11/2014", "29/11/2014",
"30/11/2014", "1/12/2014", "2/12/2014", "3/12/2014", "4/12/2014",
"5/12/2014", "6/12/2014", "7/12/2014", "8/12/2014", "9/12/2014",
"10/12/2014", "11/12/2014", "12/12/2014", "13/12/2014", "14/12/2014",
"15/12/2014"), cnt_charge_events = c(2L, 3L, 4L, 3L, 5L, 6L,
3L, 5L, 4L, 4L, 6L, 5L, 3L, 3L, 3L, 4L, 7L, 5L, 5L, 5L, 5L, 5L,
4L, 5L, 5L, 6L, 8L, 7L, 4L, 4L, 5L, 4L, 9L, 7L, 7L, 5L, 6L, 10L,
8L, 7L, 10L, 8L, 8L, 10L, 12L, 8L, 10L, 13L, 11L, 9L, 14L, 9L,
11L, 11L, 15L, 15L, 15L, 13L, 17L, 14L, 12L, 20L, 13L, 16L, 16L,
10L, 11L, 12L, 16L, 12L, 15L, 18L, 14L, 9L, 15L, 15L, 16L, 16L,
15L, 15L, 22L, 15L, 16L, 21L, 22L, 19L, 18L, 15L, 17L, 19L, 24L,
23L, 21L, 22L, 15L, 18L, 15L, 17L, 20L, 16L, 13L, 12L, 17L, 14L,
15L, 15L, 19L, 13L, 18L, 11L, 17L, 20L, 23L, 19L, 22L, 20L, 19L,
25L, 21L, 32L, 24L, 20L, 14L, 18L, 17L, 22L, 24L, 24L, 23L, 21L,
21L, 21L, 29L, 25L, 22L, 22L, 17L, 19L, 27L, 28L, 29L, 33L, 28L,
20L, 15L, 16L, 21L, 36L, 28L, 24L, 21L, 21L, 24L, 34L, 29L, 36L,
28L, 23L, 25L, 29L, 28L, 38L, 29L, 23L, 23L, 29L, 25L, 36L, 33L,
26L, 23L, 17L, 20L, 33L, 28L, 33L, 31L, 24L, 17L, 29L, 28L, 32L,
43L, 31L, 27L, 21L, 23L, 26L, 32L, 31L, 34L, 26L, 24L, 24L, 26L,
35L, 34L, 33L, 27L, 23L, 25L, 27L, 31L, 34L, 38L, 24L, 23L, 27L,
40L, 32L, 27L, 34L, 33L, 28L, 23L, 30L, 33L, 28L, 33L, 30L, 23L,
31L, 29L, 34L, 33L, 33L, 27L, 23L, 24L, 38L, 33L, 32L, 39L, 35L,
24L, 28L, 27L, 40L, 42L, 37L, 30L, 21L, 22L, 41L, 36L, 41L, 37L,
36L, 26L, 29L, 35L, 39L, 39L, 48L, 38L, 27L, 34L, 49L, 45L, 52L,
42L, 40L, 27L, 36L, 42L, 51L, 46L, 52L, 39L, 29L, 33L, 39L, 48L,
39L, 50L, 39L, 36L, 37L, 52L, 51L, 50L, 49L, 38L, 33L, 38L, 59L,
55L, 43L, 43L, 37L, 25L, 31L, 32L, 48L, 51L, 49L, 37L, 33L, 23L,
40L, 39L, 49L, 43L, 37L, 30L, 41L, 56L, 54L, 53L, 51L, 46L, 37L,
34L, 56L, 59L, 54L, 50L, 48L, 40L, 39L, 49L, 57L, 51L, 54L, 51L,
37L, 48L, 55L, 64L, 56L, 51L, 47L, 37L, 37L, 55L, 59L, 52L, 57L,
52L, 45L, 42L, 55L, 66L, 59L, 53L, 50L, 40L, 39L, 53L)), class =
"data.frame", row.names = c(NA,
-349L))
-- 
*Roslina Zakaria*

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Jan 13 08:35:52 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 13 Jan 2023 07:35:52 +0000
Subject: [R] 
 Customise Plot tick label on time series plot using date series
In-Reply-To: <CANTvJZKHgwQA+CzXhnfSd3zfnFG4hx7mA_mr7zkpCGvLLrBJug@mail.gmail.com>
References: <CANTvJZKHgwQA+CzXhnfSd3zfnFG4hx7mA_mr7zkpCGvLLrBJug@mail.gmail.com>
Message-ID: <3861885d-d25d-3de8-2cc0-5d962cfb3745@sapo.pt>

?s 05:11 de 13/01/2023, roslinazairimah zakaria escreveu:
> Hi,
> 
> I would like to customise my date series on the plot. I tried this:
> 
> dt_ts <- ts(dt)
> autoplot(dt_ts[,2]) + ylab("Charge counts") + xlab("Daily")
> 
> but the label is not the date series.
> 
> Tqvm for any help given.
> 
> 
>> dput(dt)
> structure(list(time = c("1/1/2014", "2/1/2014", "3/1/2014", "4/1/2014",
> "5/1/2014", "6/1/2014", "7/1/2014", "8/1/2014", "9/1/2014", "10/1/2014",
> "11/1/2014", "12/1/2014", "13/1/2014", "14/1/2014", "15/1/2014",
> "16/1/2014", "17/1/2014", "18/1/2014", "19/1/2014", "20/1/2014",
> "21/1/2014", "22/1/2014", "23/1/2014", "24/1/2014", "25/1/2014",
> "26/1/2014", "27/1/2014", "28/1/2014", "29/1/2014", "30/1/2014",
> "31/1/2014", "1/2/2014", "2/2/2014", "3/2/2014", "4/2/2014",
> "5/2/2014", "6/2/2014", "7/2/2014", "8/2/2014", "9/2/2014", "10/2/2014",
> "11/2/2014", "12/2/2014", "13/2/2014", "14/2/2014", "15/2/2014",
> "16/2/2014", "17/2/2014", "18/2/2014", "19/2/2014", "20/2/2014",
> "21/2/2014", "22/2/2014", "23/2/2014", "24/2/2014", "25/2/2014",
> "26/2/2014", "27/2/2014", "28/2/2014", "1/3/2014", "2/3/2014",
> "3/3/2014", "4/3/2014", "5/3/2014", "6/3/2014", "7/3/2014", "8/3/2014",
> "9/3/2014", "10/3/2014", "11/3/2014", "12/3/2014", "13/3/2014",
> "14/3/2014", "15/3/2014", "16/3/2014", "17/3/2014", "18/3/2014",
> "19/3/2014", "20/3/2014", "21/3/2014", "22/3/2014", "23/3/2014",
> "24/3/2014", "25/3/2014", "26/3/2014", "27/3/2014", "28/3/2014",
> "29/3/2014", "30/3/2014", "31/3/2014", "1/4/2014", "2/4/2014",
> "3/4/2014", "4/4/2014", "5/4/2014", "6/4/2014", "7/4/2014", "8/4/2014",
> "9/4/2014", "10/4/2014", "11/4/2014", "12/4/2014", "13/4/2014",
> "14/4/2014", "15/4/2014", "16/4/2014", "17/4/2014", "18/4/2014",
> "19/4/2014", "20/4/2014", "21/4/2014", "22/4/2014", "23/4/2014",
> "24/4/2014", "25/4/2014", "26/4/2014", "27/4/2014", "28/4/2014",
> "29/4/2014", "30/4/2014", "1/5/2014", "2/5/2014", "3/5/2014",
> "4/5/2014", "5/5/2014", "6/5/2014", "7/5/2014", "8/5/2014", "9/5/2014",
> "10/5/2014", "11/5/2014", "12/5/2014", "13/5/2014", "14/5/2014",
> "15/5/2014", "16/5/2014", "17/5/2014", "18/5/2014", "19/5/2014",
> "20/5/2014", "21/5/2014", "22/5/2014", "23/5/2014", "24/5/2014",
> "25/5/2014", "26/5/2014", "27/5/2014", "28/5/2014", "29/5/2014",
> "30/5/2014", "31/5/2014", "1/6/2014", "2/6/2014", "3/6/2014",
> "4/6/2014", "5/6/2014", "6/6/2014", "7/6/2014", "8/6/2014", "9/6/2014",
> "10/6/2014", "11/6/2014", "12/6/2014", "13/6/2014", "14/6/2014",
> "15/6/2014", "16/6/2014", "17/6/2014", "18/6/2014", "19/6/2014",
> "20/6/2014", "21/6/2014", "22/6/2014", "23/6/2014", "24/6/2014",
> "25/6/2014", "26/6/2014", "27/6/2014", "28/6/2014", "29/6/2014",
> "30/6/2014", "1/7/2014", "2/7/2014", "3/7/2014", "4/7/2014",
> "5/7/2014", "6/7/2014", "7/7/2014", "8/7/2014", "9/7/2014", "10/7/2014",
> "11/7/2014", "12/7/2014", "13/7/2014", "14/7/2014", "15/7/2014",
> "16/7/2014", "17/7/2014", "18/7/2014", "19/7/2014", "20/7/2014",
> "21/7/2014", "22/7/2014", "23/7/2014", "24/7/2014", "25/7/2014",
> "26/7/2014", "27/7/2014", "28/7/2014", "29/7/2014", "30/7/2014",
> "31/7/2014", "1/8/2014", "2/8/2014", "3/8/2014", "4/8/2014",
> "5/8/2014", "6/8/2014", "7/8/2014", "8/8/2014", "9/8/2014", "10/8/2014",
> "11/8/2014", "12/8/2014", "13/8/2014", "14/8/2014", "15/8/2014",
> "16/8/2014", "17/8/2014", "18/8/2014", "19/8/2014", "20/8/2014",
> "21/8/2014", "22/8/2014", "23/8/2014", "24/8/2014", "25/8/2014",
> "26/8/2014", "27/8/2014", "28/8/2014", "29/8/2014", "30/8/2014",
> "31/8/2014", "1/9/2014", "2/9/2014", "3/9/2014", "4/9/2014",
> "5/9/2014", "6/9/2014", "7/9/2014", "8/9/2014", "9/9/2014", "10/9/2014",
> "11/9/2014", "12/9/2014", "13/9/2014", "14/9/2014", "15/9/2014",
> "16/9/2014", "17/9/2014", "18/9/2014", "19/9/2014", "20/9/2014",
> "21/9/2014", "22/9/2014", "23/9/2014", "24/9/2014", "25/9/2014",
> "26/9/2014", "27/9/2014", "28/9/2014", "29/9/2014", "30/9/2014",
> "1/10/2014", "2/10/2014", "3/10/2014", "4/10/2014", "5/10/2014",
> "6/10/2014", "7/10/2014", "8/10/2014", "9/10/2014", "10/10/2014",
> "11/10/2014", "12/10/2014", "13/10/2014", "14/10/2014", "15/10/2014",
> "16/10/2014", "17/10/2014", "18/10/2014", "19/10/2014", "20/10/2014",
> "21/10/2014", "22/10/2014", "23/10/2014", "24/10/2014", "25/10/2014",
> "26/10/2014", "27/10/2014", "28/10/2014", "29/10/2014", "30/10/2014",
> "31/10/2014", "1/11/2014", "2/11/2014", "3/11/2014", "4/11/2014",
> "5/11/2014", "6/11/2014", "7/11/2014", "8/11/2014", "9/11/2014",
> "10/11/2014", "11/11/2014", "12/11/2014", "13/11/2014", "14/11/2014",
> "15/11/2014", "16/11/2014", "17/11/2014", "18/11/2014", "19/11/2014",
> "20/11/2014", "21/11/2014", "22/11/2014", "23/11/2014", "24/11/2014",
> "25/11/2014", "26/11/2014", "27/11/2014", "28/11/2014", "29/11/2014",
> "30/11/2014", "1/12/2014", "2/12/2014", "3/12/2014", "4/12/2014",
> "5/12/2014", "6/12/2014", "7/12/2014", "8/12/2014", "9/12/2014",
> "10/12/2014", "11/12/2014", "12/12/2014", "13/12/2014", "14/12/2014",
> "15/12/2014"), cnt_charge_events = c(2L, 3L, 4L, 3L, 5L, 6L,
> 3L, 5L, 4L, 4L, 6L, 5L, 3L, 3L, 3L, 4L, 7L, 5L, 5L, 5L, 5L, 5L,
> 4L, 5L, 5L, 6L, 8L, 7L, 4L, 4L, 5L, 4L, 9L, 7L, 7L, 5L, 6L, 10L,
> 8L, 7L, 10L, 8L, 8L, 10L, 12L, 8L, 10L, 13L, 11L, 9L, 14L, 9L,
> 11L, 11L, 15L, 15L, 15L, 13L, 17L, 14L, 12L, 20L, 13L, 16L, 16L,
> 10L, 11L, 12L, 16L, 12L, 15L, 18L, 14L, 9L, 15L, 15L, 16L, 16L,
> 15L, 15L, 22L, 15L, 16L, 21L, 22L, 19L, 18L, 15L, 17L, 19L, 24L,
> 23L, 21L, 22L, 15L, 18L, 15L, 17L, 20L, 16L, 13L, 12L, 17L, 14L,
> 15L, 15L, 19L, 13L, 18L, 11L, 17L, 20L, 23L, 19L, 22L, 20L, 19L,
> 25L, 21L, 32L, 24L, 20L, 14L, 18L, 17L, 22L, 24L, 24L, 23L, 21L,
> 21L, 21L, 29L, 25L, 22L, 22L, 17L, 19L, 27L, 28L, 29L, 33L, 28L,
> 20L, 15L, 16L, 21L, 36L, 28L, 24L, 21L, 21L, 24L, 34L, 29L, 36L,
> 28L, 23L, 25L, 29L, 28L, 38L, 29L, 23L, 23L, 29L, 25L, 36L, 33L,
> 26L, 23L, 17L, 20L, 33L, 28L, 33L, 31L, 24L, 17L, 29L, 28L, 32L,
> 43L, 31L, 27L, 21L, 23L, 26L, 32L, 31L, 34L, 26L, 24L, 24L, 26L,
> 35L, 34L, 33L, 27L, 23L, 25L, 27L, 31L, 34L, 38L, 24L, 23L, 27L,
> 40L, 32L, 27L, 34L, 33L, 28L, 23L, 30L, 33L, 28L, 33L, 30L, 23L,
> 31L, 29L, 34L, 33L, 33L, 27L, 23L, 24L, 38L, 33L, 32L, 39L, 35L,
> 24L, 28L, 27L, 40L, 42L, 37L, 30L, 21L, 22L, 41L, 36L, 41L, 37L,
> 36L, 26L, 29L, 35L, 39L, 39L, 48L, 38L, 27L, 34L, 49L, 45L, 52L,
> 42L, 40L, 27L, 36L, 42L, 51L, 46L, 52L, 39L, 29L, 33L, 39L, 48L,
> 39L, 50L, 39L, 36L, 37L, 52L, 51L, 50L, 49L, 38L, 33L, 38L, 59L,
> 55L, 43L, 43L, 37L, 25L, 31L, 32L, 48L, 51L, 49L, 37L, 33L, 23L,
> 40L, 39L, 49L, 43L, 37L, 30L, 41L, 56L, 54L, 53L, 51L, 46L, 37L,
> 34L, 56L, 59L, 54L, 50L, 48L, 40L, 39L, 49L, 57L, 51L, 54L, 51L,
> 37L, 48L, 55L, 64L, 56L, 51L, 47L, 37L, 37L, 55L, 59L, 52L, 57L,
> 52L, 45L, 42L, 55L, 66L, 59L, 53L, 50L, 40L, 39L, 53L)), class =
> "data.frame", row.names = c(NA,
> -349L))

Hello,

There are two main problems with your code:

1. The time column is not a date, it's a character column. Start by 
coercing it to a real date class.

2. autoplot is a ggplot2 function and it does not support objects of 
class "ts", you should first coerce the data set dt to class "zoo" or to 
class "xts". In the code below I will coerce to class "zoo".


# When calling non-base functions
# always start the scripts by loading
# the packages where those functions
# can be found
library(ggplot2)
library(zoo)

# coerce the time column to class "Date"
dt$time <- as.Date(dt$time, "%d/%m/%Y")
str(dt)
# 'data.frame':	349 obs. of  2 variables:
#  $ time             : Date, format: "2014-01-01" ...
#  $ cnt_charge_events: int  2 3 4 3 5 6 3 5 4 4 ...


# now coerce the time series to a "zoo" time series
dt_ts <- zoo(dt$cnt_charge_events, order.by = dt$time)

# the x axis labels are right, quarterly date breaks are automatic
# and plot the object dt_ts, not its second column dt_ts[,2]
autoplot(dt_ts) +
   xlab("Daily") +
   ylab("Charge counts")


# scale_x_date allows for custom breaks and labels,
# here monthly breaks and the same labels format
# with more axis labels they need to be rotated in order to be readable
# (as a side note I have displayed the axis labels in one instruction only)
autoplot(dt_ts) +
   labs(x = "Daily", y = "Charge counts") +
   scale_x_date(date_breaks = "1 month", date_labels = "%b %Y") +
   theme(axis.text.x = element_text(angle = 60, vjust = 1, hjust = 1))



Hope this helps,

Rui Barradas


From ro@||n@ump @end|ng |rom gm@||@com  Fri Jan 13 10:34:34 2023
From: ro@||n@ump @end|ng |rom gm@||@com (roslinazairimah zakaria)
Date: Fri, 13 Jan 2023 17:34:34 +0800
Subject: [R] 
 Customise Plot tick label on time series plot using date series
In-Reply-To: <3861885d-d25d-3de8-2cc0-5d962cfb3745@sapo.pt>
References: <CANTvJZKHgwQA+CzXhnfSd3zfnFG4hx7mA_mr7zkpCGvLLrBJug@mail.gmail.com>
 <3861885d-d25d-3de8-2cc0-5d962cfb3745@sapo.pt>
Message-ID: <CANTvJZ+zqC2NdvFu7A-LjAdr_gnz7y-ac5zZpEUH7dkEM6zTXw@mail.gmail.com>

Hi Rui,

Thank you very much. It works beautifully.

On Fri, Jan 13, 2023 at 3:36 PM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> ?s 05:11 de 13/01/2023, roslinazairimah zakaria escreveu:
> > Hi,
> >
> > I would like to customise my date series on the plot. I tried this:
> >
> > dt_ts <- ts(dt)
> > autoplot(dt_ts[,2]) + ylab("Charge counts") + xlab("Daily")
> >
> > but the label is not the date series.
> >
> > Tqvm for any help given.
> >
> >
> >> dput(dt)
> > structure(list(time = c("1/1/2014", "2/1/2014", "3/1/2014", "4/1/2014",
> > "5/1/2014", "6/1/2014", "7/1/2014", "8/1/2014", "9/1/2014", "10/1/2014",
> > "11/1/2014", "12/1/2014", "13/1/2014", "14/1/2014", "15/1/2014",
> > "16/1/2014", "17/1/2014", "18/1/2014", "19/1/2014", "20/1/2014",
> > "21/1/2014", "22/1/2014", "23/1/2014", "24/1/2014", "25/1/2014",
> > "26/1/2014", "27/1/2014", "28/1/2014", "29/1/2014", "30/1/2014",
> > "31/1/2014", "1/2/2014", "2/2/2014", "3/2/2014", "4/2/2014",
> > "5/2/2014", "6/2/2014", "7/2/2014", "8/2/2014", "9/2/2014", "10/2/2014",
> > "11/2/2014", "12/2/2014", "13/2/2014", "14/2/2014", "15/2/2014",
> > "16/2/2014", "17/2/2014", "18/2/2014", "19/2/2014", "20/2/2014",
> > "21/2/2014", "22/2/2014", "23/2/2014", "24/2/2014", "25/2/2014",
> > "26/2/2014", "27/2/2014", "28/2/2014", "1/3/2014", "2/3/2014",
> > "3/3/2014", "4/3/2014", "5/3/2014", "6/3/2014", "7/3/2014", "8/3/2014",
> > "9/3/2014", "10/3/2014", "11/3/2014", "12/3/2014", "13/3/2014",
> > "14/3/2014", "15/3/2014", "16/3/2014", "17/3/2014", "18/3/2014",
> > "19/3/2014", "20/3/2014", "21/3/2014", "22/3/2014", "23/3/2014",
> > "24/3/2014", "25/3/2014", "26/3/2014", "27/3/2014", "28/3/2014",
> > "29/3/2014", "30/3/2014", "31/3/2014", "1/4/2014", "2/4/2014",
> > "3/4/2014", "4/4/2014", "5/4/2014", "6/4/2014", "7/4/2014", "8/4/2014",
> > "9/4/2014", "10/4/2014", "11/4/2014", "12/4/2014", "13/4/2014",
> > "14/4/2014", "15/4/2014", "16/4/2014", "17/4/2014", "18/4/2014",
> > "19/4/2014", "20/4/2014", "21/4/2014", "22/4/2014", "23/4/2014",
> > "24/4/2014", "25/4/2014", "26/4/2014", "27/4/2014", "28/4/2014",
> > "29/4/2014", "30/4/2014", "1/5/2014", "2/5/2014", "3/5/2014",
> > "4/5/2014", "5/5/2014", "6/5/2014", "7/5/2014", "8/5/2014", "9/5/2014",
> > "10/5/2014", "11/5/2014", "12/5/2014", "13/5/2014", "14/5/2014",
> > "15/5/2014", "16/5/2014", "17/5/2014", "18/5/2014", "19/5/2014",
> > "20/5/2014", "21/5/2014", "22/5/2014", "23/5/2014", "24/5/2014",
> > "25/5/2014", "26/5/2014", "27/5/2014", "28/5/2014", "29/5/2014",
> > "30/5/2014", "31/5/2014", "1/6/2014", "2/6/2014", "3/6/2014",
> > "4/6/2014", "5/6/2014", "6/6/2014", "7/6/2014", "8/6/2014", "9/6/2014",
> > "10/6/2014", "11/6/2014", "12/6/2014", "13/6/2014", "14/6/2014",
> > "15/6/2014", "16/6/2014", "17/6/2014", "18/6/2014", "19/6/2014",
> > "20/6/2014", "21/6/2014", "22/6/2014", "23/6/2014", "24/6/2014",
> > "25/6/2014", "26/6/2014", "27/6/2014", "28/6/2014", "29/6/2014",
> > "30/6/2014", "1/7/2014", "2/7/2014", "3/7/2014", "4/7/2014",
> > "5/7/2014", "6/7/2014", "7/7/2014", "8/7/2014", "9/7/2014", "10/7/2014",
> > "11/7/2014", "12/7/2014", "13/7/2014", "14/7/2014", "15/7/2014",
> > "16/7/2014", "17/7/2014", "18/7/2014", "19/7/2014", "20/7/2014",
> > "21/7/2014", "22/7/2014", "23/7/2014", "24/7/2014", "25/7/2014",
> > "26/7/2014", "27/7/2014", "28/7/2014", "29/7/2014", "30/7/2014",
> > "31/7/2014", "1/8/2014", "2/8/2014", "3/8/2014", "4/8/2014",
> > "5/8/2014", "6/8/2014", "7/8/2014", "8/8/2014", "9/8/2014", "10/8/2014",
> > "11/8/2014", "12/8/2014", "13/8/2014", "14/8/2014", "15/8/2014",
> > "16/8/2014", "17/8/2014", "18/8/2014", "19/8/2014", "20/8/2014",
> > "21/8/2014", "22/8/2014", "23/8/2014", "24/8/2014", "25/8/2014",
> > "26/8/2014", "27/8/2014", "28/8/2014", "29/8/2014", "30/8/2014",
> > "31/8/2014", "1/9/2014", "2/9/2014", "3/9/2014", "4/9/2014",
> > "5/9/2014", "6/9/2014", "7/9/2014", "8/9/2014", "9/9/2014", "10/9/2014",
> > "11/9/2014", "12/9/2014", "13/9/2014", "14/9/2014", "15/9/2014",
> > "16/9/2014", "17/9/2014", "18/9/2014", "19/9/2014", "20/9/2014",
> > "21/9/2014", "22/9/2014", "23/9/2014", "24/9/2014", "25/9/2014",
> > "26/9/2014", "27/9/2014", "28/9/2014", "29/9/2014", "30/9/2014",
> > "1/10/2014", "2/10/2014", "3/10/2014", "4/10/2014", "5/10/2014",
> > "6/10/2014", "7/10/2014", "8/10/2014", "9/10/2014", "10/10/2014",
> > "11/10/2014", "12/10/2014", "13/10/2014", "14/10/2014", "15/10/2014",
> > "16/10/2014", "17/10/2014", "18/10/2014", "19/10/2014", "20/10/2014",
> > "21/10/2014", "22/10/2014", "23/10/2014", "24/10/2014", "25/10/2014",
> > "26/10/2014", "27/10/2014", "28/10/2014", "29/10/2014", "30/10/2014",
> > "31/10/2014", "1/11/2014", "2/11/2014", "3/11/2014", "4/11/2014",
> > "5/11/2014", "6/11/2014", "7/11/2014", "8/11/2014", "9/11/2014",
> > "10/11/2014", "11/11/2014", "12/11/2014", "13/11/2014", "14/11/2014",
> > "15/11/2014", "16/11/2014", "17/11/2014", "18/11/2014", "19/11/2014",
> > "20/11/2014", "21/11/2014", "22/11/2014", "23/11/2014", "24/11/2014",
> > "25/11/2014", "26/11/2014", "27/11/2014", "28/11/2014", "29/11/2014",
> > "30/11/2014", "1/12/2014", "2/12/2014", "3/12/2014", "4/12/2014",
> > "5/12/2014", "6/12/2014", "7/12/2014", "8/12/2014", "9/12/2014",
> > "10/12/2014", "11/12/2014", "12/12/2014", "13/12/2014", "14/12/2014",
> > "15/12/2014"), cnt_charge_events = c(2L, 3L, 4L, 3L, 5L, 6L,
> > 3L, 5L, 4L, 4L, 6L, 5L, 3L, 3L, 3L, 4L, 7L, 5L, 5L, 5L, 5L, 5L,
> > 4L, 5L, 5L, 6L, 8L, 7L, 4L, 4L, 5L, 4L, 9L, 7L, 7L, 5L, 6L, 10L,
> > 8L, 7L, 10L, 8L, 8L, 10L, 12L, 8L, 10L, 13L, 11L, 9L, 14L, 9L,
> > 11L, 11L, 15L, 15L, 15L, 13L, 17L, 14L, 12L, 20L, 13L, 16L, 16L,
> > 10L, 11L, 12L, 16L, 12L, 15L, 18L, 14L, 9L, 15L, 15L, 16L, 16L,
> > 15L, 15L, 22L, 15L, 16L, 21L, 22L, 19L, 18L, 15L, 17L, 19L, 24L,
> > 23L, 21L, 22L, 15L, 18L, 15L, 17L, 20L, 16L, 13L, 12L, 17L, 14L,
> > 15L, 15L, 19L, 13L, 18L, 11L, 17L, 20L, 23L, 19L, 22L, 20L, 19L,
> > 25L, 21L, 32L, 24L, 20L, 14L, 18L, 17L, 22L, 24L, 24L, 23L, 21L,
> > 21L, 21L, 29L, 25L, 22L, 22L, 17L, 19L, 27L, 28L, 29L, 33L, 28L,
> > 20L, 15L, 16L, 21L, 36L, 28L, 24L, 21L, 21L, 24L, 34L, 29L, 36L,
> > 28L, 23L, 25L, 29L, 28L, 38L, 29L, 23L, 23L, 29L, 25L, 36L, 33L,
> > 26L, 23L, 17L, 20L, 33L, 28L, 33L, 31L, 24L, 17L, 29L, 28L, 32L,
> > 43L, 31L, 27L, 21L, 23L, 26L, 32L, 31L, 34L, 26L, 24L, 24L, 26L,
> > 35L, 34L, 33L, 27L, 23L, 25L, 27L, 31L, 34L, 38L, 24L, 23L, 27L,
> > 40L, 32L, 27L, 34L, 33L, 28L, 23L, 30L, 33L, 28L, 33L, 30L, 23L,
> > 31L, 29L, 34L, 33L, 33L, 27L, 23L, 24L, 38L, 33L, 32L, 39L, 35L,
> > 24L, 28L, 27L, 40L, 42L, 37L, 30L, 21L, 22L, 41L, 36L, 41L, 37L,
> > 36L, 26L, 29L, 35L, 39L, 39L, 48L, 38L, 27L, 34L, 49L, 45L, 52L,
> > 42L, 40L, 27L, 36L, 42L, 51L, 46L, 52L, 39L, 29L, 33L, 39L, 48L,
> > 39L, 50L, 39L, 36L, 37L, 52L, 51L, 50L, 49L, 38L, 33L, 38L, 59L,
> > 55L, 43L, 43L, 37L, 25L, 31L, 32L, 48L, 51L, 49L, 37L, 33L, 23L,
> > 40L, 39L, 49L, 43L, 37L, 30L, 41L, 56L, 54L, 53L, 51L, 46L, 37L,
> > 34L, 56L, 59L, 54L, 50L, 48L, 40L, 39L, 49L, 57L, 51L, 54L, 51L,
> > 37L, 48L, 55L, 64L, 56L, 51L, 47L, 37L, 37L, 55L, 59L, 52L, 57L,
> > 52L, 45L, 42L, 55L, 66L, 59L, 53L, 50L, 40L, 39L, 53L)), class =
> > "data.frame", row.names = c(NA,
> > -349L))
>
> Hello,
>
> There are two main problems with your code:
>
> 1. The time column is not a date, it's a character column. Start by
> coercing it to a real date class.
>
> 2. autoplot is a ggplot2 function and it does not support objects of
> class "ts", you should first coerce the data set dt to class "zoo" or to
> class "xts". In the code below I will coerce to class "zoo".
>
>
> # When calling non-base functions
> # always start the scripts by loading
> # the packages where those functions
> # can be found
> library(ggplot2)
> library(zoo)
>
> # coerce the time column to class "Date"
> dt$time <- as.Date(dt$time, "%d/%m/%Y")
> str(dt)
> # 'data.frame': 349 obs. of  2 variables:
> #  $ time             : Date, format: "2014-01-01" ...
> #  $ cnt_charge_events: int  2 3 4 3 5 6 3 5 4 4 ...
>
>
> # now coerce the time series to a "zoo" time series
> dt_ts <- zoo(dt$cnt_charge_events, order.by = dt$time)
>
> # the x axis labels are right, quarterly date breaks are automatic
> # and plot the object dt_ts, not its second column dt_ts[,2]
> autoplot(dt_ts) +
>    xlab("Daily") +
>    ylab("Charge counts")
>
>
> # scale_x_date allows for custom breaks and labels,
> # here monthly breaks and the same labels format
> # with more axis labels they need to be rotated in order to be readable
> # (as a side note I have displayed the axis labels in one instruction only)
> autoplot(dt_ts) +
>    labs(x = "Daily", y = "Charge counts") +
>    scale_x_date(date_breaks = "1 month", date_labels = "%b %Y") +
>    theme(axis.text.x = element_text(angle = 60, vjust = 1, hjust = 1))
>
>
>
> Hope this helps,
>
> Rui Barradas
>
>

-- 
*Roslinazairimah Zakaria*
*Tel: +609-5492370; Fax. No.+609-5492766*

*Email: roslinazairimah at ump.edu.my <roslinazairimah at ump.edu.my>;
roslinaump at gmail.com <roslinaump at gmail.com>*
Faculty of Industrial Sciences & Technology
University Malaysia Pahang
Lebuhraya Tun Razak, 26300 Gambang, Pahang, Malaysia

	[[alternative HTML version deleted]]


From v@|ent|n @end|ng |rom petze|@@t  Fri Jan 13 00:18:28 2023
From: v@|ent|n @end|ng |rom petze|@@t (Valentin Petzel)
Date: Fri, 13 Jan 2023 00:18:28 +0100 (GMT+01:00)
Subject: [R] return value of {....}
In-Reply-To: <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
 <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <cf027dca-4bde-4c05-a964-1522025d6532@petzel.at>

Hello Akshay,

R is quite inspired by LISP, where this is a common thing. It is not in fact that {...} returned something, rather any expression evalulates to some value, and for a compound statement that is the last evaluated expression.

{...} might be seen as similar to LISPs (begin ...).

Now this is a very different thing compared to {...} in something like C, even if it looks or behaves similarly. But in R {...} is in fact an expression and thus has evaluate to some value. This also comes with some nice benefits.

You do not need to use {...} for anything that is a single statement. But you can in each possible place use {...} to turn multiple statements into one.

Now think about a statement like this

f <- function(n) {
x <- runif(n)
x**2
}

Then we can do

y <- f(10)

Now, you suggested way would look like this:

f <- function(n) {
x <- runif(n)
y <- x**2
}

And we'd need to do something like:

f(10)
y <- somehow_get_last_env_of_f$y

So having a compound statement evaluate to a value clearly has a benefit.

Best Regards,
Valentin

09.01.2023 18:05:58 akshay kulkarni <akshay_e4 at hotmail.com>:

> Dear Valentin,
> ? ? ? ? ? ? ? ? ? ? ? ? ? But why should {....} "return" a value? It could just as well evaluate all the expressions and store the resulting objects in whatever environment the interpreter chooses, and then it would be left to the user to manipulate any object he chooses. Don't you think returning the last, or any value, is redundant? We are living in the 21st?century world, and the R-core team might,I suppose, have a definite reason for"returning" the last value. Any comments?
> 
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
> 
> ----------------------------------------
> *From:* Valentin Petzel <valentin at petzel.at>
> *Sent:* Monday, January 9, 2023 9:18 PM
> *To:* akshay kulkarni <akshay_e4 at hotmail.com>
> *Cc:* R help Mailing list <r-help at r-project.org>
> *Subject:* Re: [R] return value of {....}
> ?
> Hello Akshai,
> 
> I think you are confusing {...} with local({...}). This one will evaluate the expression in a separate environment, returning the last expression.
> 
> {...} simply evaluates multiple expressions as one and returns the result of the last line, but it still evaluates each expression.
> 
> Assignment returns the assigned value, so we can chain assignments like this
> 
> a <- 1 + (b <- 2)
> 
> conveniently.
> 
> So when is {...} useful? Well, anyplace where you want to execute complex stuff in a function argument. E.g. you might do:
> 
> data %>% group_by(x) %>% summarise(y = {if(x[1] > 10) sum(y) else mean(y)})
> 
> Regards,
> Valentin Petzel
> 
> 09.01.2023 15:47:53 akshay kulkarni <akshay_e4 at hotmail.com>:
> 
>> Dear members,
>> ???????????????????????????? I have the following code:
>>
>>> TB <- {x <- 3;y <- 5}
>>> TB
>> [1] 5
>>
>> It is consistent with the documentation: For {, the result of the last expression evaluated. This has the visibility of the last evaluation.
>>
>> But both x AND y are created, but the "return value" is y. How can this be advantageous for solving practical problems? Specifically, consider the following code:
>>
>> F <- function(X) {? expr; expr2; { expr5; expr7}; expr8;expr10}
>>
>> Both expr5 and expr7 are created, and are accessible by the code outside of the nested braces right? But the "return value" of the nested braces is expr7. So doesn't this mean that only expr7 should be accessible? Please help me entangle this (of course the return value of F is expr10, and all the other objects created by the preceding expressions are deleted. But expr5 is not, after the control passes outside of the nested braces!)
>>
>> Thanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>>
>> ??? [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From tuech|er @end|ng |rom gmx@@t  Fri Jan 13 12:00:19 2023
From: tuech|er @end|ng |rom gmx@@t (Heinz Tuechler)
Date: Fri, 13 Jan 2023 12:00:19 +0100
Subject: [R] return value of {....}
In-Reply-To: <cf027dca-4bde-4c05-a964-1522025d6532@petzel.at>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
 <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <cf027dca-4bde-4c05-a964-1522025d6532@petzel.at>
Message-ID: <d201ecea-b28d-ad26-75a4-311edf335c48@gmx.at>

> 09.01.2023 18:05:58 akshay kulkarni <akshay_e4 at hotmail.com>:
>
> We are living in the 21st century world, and the R-core team might,I suppose, have a definite reason ...
>

Maybe compatibility reasons with S and R-versions from the 20st century?
But maybe, you would have expected some reason even then.

best regards,

Heinz


From w||||@mwdun|@p @end|ng |rom gm@||@com  Fri Jan 13 18:18:34 2023
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Fri, 13 Jan 2023 09:18:34 -0800
Subject: [R] return value of {....}
In-Reply-To: <cf027dca-4bde-4c05-a964-1522025d6532@petzel.at>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
 <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <cf027dca-4bde-4c05-a964-1522025d6532@petzel.at>
Message-ID: <CAHqSRuQRYv1fii+F6VHd8qxAmWtu45xFTE7sJMO9KG6FH9yyXQ@mail.gmail.com>

R's
   { expr1; expr2; expr3}
acts much like C's
   ( expr1, expr2, expr3)

E.g.,

$ cat a.c
#include <stdio.h>

int main(int argc, char* argv[])
{
    double y = 10 ;
    double x = (printf("Starting... "), y = y + 100, y * 20);
    printf("Done: x=%g, y=%g\n", x, y);
    return 0;
}
$ gcc -Wall a.c
$ ./a.out
Starting... Done: x=2200, y=110

I don't like that syntax (e.g., commas between expressions instead of the
usual semicolons after expressions).  Perhaps John Chambers et all didn't
either.

-Bill

On Fri, Jan 13, 2023 at 2:28 AM Valentin Petzel <valentin at petzel.at> wrote:

> Hello Akshay,
>
> R is quite inspired by LISP, where this is a common thing. It is not in
> fact that {...} returned something, rather any expression evalulates to
> some value, and for a compound statement that is the last evaluated
> expression.
>
> {...} might be seen as similar to LISPs (begin ...).
>
> Now this is a very different thing compared to {...} in something like C,
> even if it looks or behaves similarly. But in R {...} is in fact an
> expression and thus has evaluate to some value. This also comes with some
> nice benefits.
>
> You do not need to use {...} for anything that is a single statement. But
> you can in each possible place use {...} to turn multiple statements into
> one.
>
> Now think about a statement like this
>
> f <- function(n) {
> x <- runif(n)
> x**2
> }
>
> Then we can do
>
> y <- f(10)
>
> Now, you suggested way would look like this:
>
> f <- function(n) {
> x <- runif(n)
> y <- x**2
> }
>
> And we'd need to do something like:
>
> f(10)
> y <- somehow_get_last_env_of_f$y
>
> So having a compound statement evaluate to a value clearly has a benefit.
>
> Best Regards,
> Valentin
>
> 09.01.2023 18:05:58 akshay kulkarni <akshay_e4 at hotmail.com>:
>
> > Dear Valentin,
> >                           But why should {....} "return" a value? It
> could just as well evaluate all the expressions and store the resulting
> objects in whatever environment the interpreter chooses, and then it would
> be left to the user to manipulate any object he chooses. Don't you think
> returning the last, or any value, is redundant? We are living in the
> 21st century world, and the R-core team might,I suppose, have a definite
> reason for"returning" the last value. Any comments?
> >
> > Thanking you,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> >
> > ----------------------------------------
> > *From:* Valentin Petzel <valentin at petzel.at>
> > *Sent:* Monday, January 9, 2023 9:18 PM
> > *To:* akshay kulkarni <akshay_e4 at hotmail.com>
> > *Cc:* R help Mailing list <r-help at r-project.org>
> > *Subject:* Re: [R] return value of {....}
> >
> > Hello Akshai,
> >
> > I think you are confusing {...} with local({...}). This one will
> evaluate the expression in a separate environment, returning the last
> expression.
> >
> > {...} simply evaluates multiple expressions as one and returns the
> result of the last line, but it still evaluates each expression.
> >
> > Assignment returns the assigned value, so we can chain assignments like
> this
> >
> > a <- 1 + (b <- 2)
> >
> > conveniently.
> >
> > So when is {...} useful? Well, anyplace where you want to execute
> complex stuff in a function argument. E.g. you might do:
> >
> > data %>% group_by(x) %>% summarise(y = {if(x[1] > 10) sum(y) else
> mean(y)})
> >
> > Regards,
> > Valentin Petzel
> >
> > 09.01.2023 15:47:53 akshay kulkarni <akshay_e4 at hotmail.com>:
> >
> >> Dear members,
> >>                              I have the following code:
> >>
> >>> TB <- {x <- 3;y <- 5}
> >>> TB
> >> [1] 5
> >>
> >> It is consistent with the documentation: For {, the result of the last
> expression evaluated. This has the visibility of the last evaluation.
> >>
> >> But both x AND y are created, but the "return value" is y. How can this
> be advantageous for solving practical problems? Specifically, consider the
> following code:
> >>
> >> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
> >>
> >> Both expr5 and expr7 are created, and are accessible by the code
> outside of the nested braces right? But the "return value" of the nested
> braces is expr7. So doesn't this mean that only expr7 should be accessible?
> Please help me entangle this (of course the return value of F is expr10,
> and all the other objects created by the preceding expressions are deleted.
> But expr5 is not, after the control passes outside of the nested braces!)
> >>
> >> Thanking you,
> >> Yours sincerely,
> >> AKSHAY M KULKARNI
> >>
> >>     [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @tyen @end|ng |rom ntu@edu@tw  Sat Jan 14 07:56:25 2023
From: @tyen @end|ng |rom ntu@edu@tw (Steven T. Yen)
Date: Sat, 14 Jan 2023 14:56:25 +0800
Subject: [R] Removing variables from data frame with a wile card
Message-ID: <198c7d58-c94b-3043-96d8-4e964cd7f843@ntu.edu.tw>

I have a data frame containing variables "yr3",...,"yr28".

How do I remove them with a wild card----something similar to "del yr*" 
in Windows/doc? Thank you.

 > colnames(mydata)
 ? [1] "year"?????? "weight"???? "confeduc"?? "confothr" "college"
 ? [6] ...
 ?[41] "yr3"??????? "yr4"??????? "yr5"??????? "yr6" "yr7"
 ?[46] "yr8"??????? "yr9"??????? "yr10"?????? "yr11" "yr12"
 ?[51] "yr13"?????? "yr14"?????? "yr15"?????? "yr16" "yr17"
 ?[56] "yr18"?????? "yr19"?????? "yr20"?????? "yr21" "yr22"
 ?[61] "yr23"?????? "yr24"?????? "yr25"?????? "yr26" "yr27"
 ?[66] "yr28"...


From er|cjberger @end|ng |rom gm@||@com  Sat Jan 14 08:06:55 2023
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Sat, 14 Jan 2023 09:06:55 +0200
Subject: [R] Removing variables from data frame with a wile card
In-Reply-To: <198c7d58-c94b-3043-96d8-4e964cd7f843@ntu.edu.tw>
References: <198c7d58-c94b-3043-96d8-4e964cd7f843@ntu.edu.tw>
Message-ID: <CAGgJW77=pb7CR1ifs2Ns8EFfX-y6OzphHNK2BAVaA_TayXM2yw@mail.gmail.com>

mydata[, -grep("^yr",colnames(mydata))]

On Sat, Jan 14, 2023 at 8:57 AM Steven T. Yen <styen at ntu.edu.tw> wrote:

> I have a data frame containing variables "yr3",...,"yr28".
>
> How do I remove them with a wild card----something similar to "del yr*"
> in Windows/doc? Thank you.
>
>  > colnames(mydata)
>    [1] "year"       "weight"     "confeduc"   "confothr" "college"
>    [6] ...
>   [41] "yr3"        "yr4"        "yr5"        "yr6" "yr7"
>   [46] "yr8"        "yr9"        "yr10"       "yr11" "yr12"
>   [51] "yr13"       "yr14"       "yr15"       "yr16" "yr17"
>   [56] "yr18"       "yr19"       "yr20"       "yr21" "yr22"
>   [61] "yr23"       "yr24"       "yr25"       "yr26" "yr27"
>   [66] "yr28"...
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Sat Jan 14 08:08:29 2023
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Sat, 14 Jan 2023 02:08:29 -0500
Subject: [R] Removing variables from data frame with a wile card
In-Reply-To: <198c7d58-c94b-3043-96d8-4e964cd7f843@ntu.edu.tw>
References: <198c7d58-c94b-3043-96d8-4e964cd7f843@ntu.edu.tw>
Message-ID: <CAPcHnpS==8tWHya+C=K1kTQf1jE5f7oRmyf-PL137_C4h-sOYA@mail.gmail.com>

You'll want to use grep() or grepl(). By default, grep() uses extended
regular expressions to find matches, but you can also use perl regular
expressions and globbing (after converting to a regular expression).
For example:

grepl("^yr", colnames(mydata))

will tell you which 'colnames' start with "yr". If you'd rather you
use globbing:

grepl(glob2rx("yr*"), colnames(mydata))

Then you might write something like this to remove the columns starting with yr:

mydata <- mydata[, !grepl("^yr", colnames(mydata)), drop = FALSE]

On Sat, Jan 14, 2023 at 1:56 AM Steven T. Yen <styen at ntu.edu.tw> wrote:
>
> I have a data frame containing variables "yr3",...,"yr28".
>
> How do I remove them with a wild card----something similar to "del yr*"
> in Windows/doc? Thank you.
>
>  > colnames(mydata)
>    [1] "year"       "weight"     "confeduc"   "confothr" "college"
>    [6] ...
>   [41] "yr3"        "yr4"        "yr5"        "yr6" "yr7"
>   [46] "yr8"        "yr9"        "yr10"       "yr11" "yr12"
>   [51] "yr13"       "yr14"       "yr15"       "yr16" "yr17"
>   [56] "yr18"       "yr19"       "yr20"       "yr21" "yr22"
>   [61] "yr23"       "yr24"       "yr25"       "yr26" "yr27"
>   [66] "yr28"...
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @tyen @end|ng |rom ntu@edu@tw  Sat Jan 14 13:48:50 2023
From: @tyen @end|ng |rom ntu@edu@tw (Steven Yen)
Date: Sat, 14 Jan 2023 20:48:50 +0800
Subject: [R] Removing variables from data frame with a wile card
In-Reply-To: <CAPcHnpS==8tWHya+C=K1kTQf1jE5f7oRmyf-PL137_C4h-sOYA@mail.gmail.com>
References: <CAPcHnpS==8tWHya+C=K1kTQf1jE5f7oRmyf-PL137_C4h-sOYA@mail.gmail.com>
Message-ID: <20A1D131-4907-4D54-A624-ED53B0325CAC@ntu.edu.tw>

Thanks to all. Very helpful.

Steven from iPhone

> On Jan 14, 2023, at 3:08 PM, Andrew Simmons <akwsimmo at gmail.com> wrote:
> 
> ?You'll want to use grep() or grepl(). By default, grep() uses extended
> regular expressions to find matches, but you can also use perl regular
> expressions and globbing (after converting to a regular expression).
> For example:
> 
> grepl("^yr", colnames(mydata))
> 
> will tell you which 'colnames' start with "yr". If you'd rather you
> use globbing:
> 
> grepl(glob2rx("yr*"), colnames(mydata))
> 
> Then you might write something like this to remove the columns starting with yr:
> 
> mydata <- mydata[, !grepl("^yr", colnames(mydata)), drop = FALSE]
> 
>> On Sat, Jan 14, 2023 at 1:56 AM Steven T. Yen <styen at ntu.edu.tw> wrote:
>> 
>> I have a data frame containing variables "yr3",...,"yr28".
>> 
>> How do I remove them with a wild card----something similar to "del yr*"
>> in Windows/doc? Thank you.
>> 
>>> colnames(mydata)
>>   [1] "year"       "weight"     "confeduc"   "confothr" "college"
>>   [6] ...
>>  [41] "yr3"        "yr4"        "yr5"        "yr6" "yr7"
>>  [46] "yr8"        "yr9"        "yr10"       "yr11" "yr12"
>>  [51] "yr13"       "yr14"       "yr15"       "yr16" "yr17"
>>  [56] "yr18"       "yr19"       "yr20"       "yr21" "yr22"
>>  [61] "yr23"       "yr24"       "yr25"       "yr26" "yr27"
>>  [66] "yr28"...
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From w||||@mwdun|@p @end|ng |rom gm@||@com  Sat Jan 14 16:36:40 2023
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Sat, 14 Jan 2023 07:36:40 -0800
Subject: [R] Removing variables from data frame with a wile card
In-Reply-To: <CAGgJW77=pb7CR1ifs2Ns8EFfX-y6OzphHNK2BAVaA_TayXM2yw@mail.gmail.com>
References: <198c7d58-c94b-3043-96d8-4e964cd7f843@ntu.edu.tw>
 <CAGgJW77=pb7CR1ifs2Ns8EFfX-y6OzphHNK2BAVaA_TayXM2yw@mail.gmail.com>
Message-ID: <CAHqSRuQtSdHWnxsV=99ktBDSuYEtUQLULwMS4PSwAZ1962FsAA@mail.gmail.com>

The -grep(pattern,colnames) as a subscript is a bit dangerous.  If no
colname matches the pattern then all columns will be omitted (because -0 is
the same as 0, which means no column). !grepl(pattern,colnames) avoids this
problem.

> mydata <- data.frame(A=1:3,B=11:13)
> mydata[, -grep("^yr", colnames(mydata))]
data frame with 0 columns and 3 rows
> mydata[, !grepl("^yr", colnames(mydata))]
  A  B
1 1 11
2 2 12
3 3 13

-Bill

On Fri, Jan 13, 2023 at 11:07 PM Eric Berger <ericjberger at gmail.com> wrote:

> mydata[, -grep("^yr",colnames(mydata))]
>
> On Sat, Jan 14, 2023 at 8:57 AM Steven T. Yen <styen at ntu.edu.tw> wrote:
>
> > I have a data frame containing variables "yr3",...,"yr28".
> >
> > How do I remove them with a wild card----something similar to "del yr*"
> > in Windows/doc? Thank you.
> >
> >  > colnames(mydata)
> >    [1] "year"       "weight"     "confeduc"   "confothr" "college"
> >    [6] ...
> >   [41] "yr3"        "yr4"        "yr5"        "yr6" "yr7"
> >   [46] "yr8"        "yr9"        "yr10"       "yr11" "yr12"
> >   [51] "yr13"       "yr14"       "yr15"       "yr16" "yr17"
> >   [56] "yr18"       "yr19"       "yr20"       "yr21" "yr22"
> >   [61] "yr23"       "yr24"       "yr25"       "yr26" "yr27"
> >   [66] "yr28"...
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @vi@e@gross m@iii@g oii gm@ii@com  Sat Jan 14 18:27:57 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Sat, 14 Jan 2023 12:27:57 -0500
Subject: [R] Removing variables from data frame with a wile card
In-Reply-To: <20A1D131-4907-4D54-A624-ED53B0325CAC@ntu.edu.tw>
References: <CAPcHnpS==8tWHya+C=K1kTQf1jE5f7oRmyf-PL137_C4h-sOYA@mail.gmail.com>
 <20A1D131-4907-4D54-A624-ED53B0325CAC@ntu.edu.tw>
Message-ID: <004101d9283d$8b9b30e0$a2d192a0$@gmail.com>

Steven,

Just want to add a few things to what people wrote.

In base R, the methods mentioned will let you make a copy of your original DF that is missing the items you are selecting that match your pattern.

That is fine.

For some purposes, you want to keep the original data.frame and remove a column within it. You can do that in several ways but the simplest is something where you sat the column to NULL as in:

mydata$NAME <- NULL

using the mydata["NAME"] notation can do that for you by using a loop of unctional programming method that does that with all components of your grep.

R does have optimizations that make this less useful as a partial copy of a data.frame retains common parts till things change.

For those who like to use the tidyverse, it comes with lots of tools that let you select columns that start with or end with or contain some pattern and I find that way easier.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Steven Yen
Sent: Saturday, January 14, 2023 7:49 AM
To: Andrew Simmons <akwsimmo at gmail.com>
Cc: R-help Mailing List <r-help at r-project.org>
Subject: Re: [R] Removing variables from data frame with a wile card

Thanks to all. Very helpful.

Steven from iPhone

> On Jan 14, 2023, at 3:08 PM, Andrew Simmons <akwsimmo at gmail.com> wrote:
> 
> ?You'll want to use grep() or grepl(). By default, grep() uses 
> extended regular expressions to find matches, but you can also use 
> perl regular expressions and globbing (after converting to a regular expression).
> For example:
> 
> grepl("^yr", colnames(mydata))
> 
> will tell you which 'colnames' start with "yr". If you'd rather you 
> use globbing:
> 
> grepl(glob2rx("yr*"), colnames(mydata))
> 
> Then you might write something like this to remove the columns starting with yr:
> 
> mydata <- mydata[, !grepl("^yr", colnames(mydata)), drop = FALSE]
> 
>> On Sat, Jan 14, 2023 at 1:56 AM Steven T. Yen <styen at ntu.edu.tw> wrote:
>> 
>> I have a data frame containing variables "yr3",...,"yr28".
>> 
>> How do I remove them with a wild card----something similar to "del yr*"
>> in Windows/doc? Thank you.
>> 
>>> colnames(mydata)
>>   [1] "year"       "weight"     "confeduc"   "confothr" "college"
>>   [6] ...
>>  [41] "yr3"        "yr4"        "yr5"        "yr6" "yr7"
>>  [46] "yr8"        "yr9"        "yr10"       "yr11" "yr12"
>>  [51] "yr13"       "yr14"       "yr15"       "yr16" "yr17"
>>  [56] "yr18"       "yr19"       "yr20"       "yr21" "yr22"
>>  [61] "yr23"       "yr24"       "yr25"       "yr26" "yr27"
>>  [66] "yr28"...
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From jrkr|de@u @end|ng |rom gm@||@com  Sat Jan 14 22:07:16 2023
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Sat, 14 Jan 2023 16:07:16 -0500
Subject: [R] Removing variables from data frame with a wile card
In-Reply-To: <004101d9283d$8b9b30e0$a2d192a0$@gmail.com>
References: <CAPcHnpS==8tWHya+C=K1kTQf1jE5f7oRmyf-PL137_C4h-sOYA@mail.gmail.com>
 <20A1D131-4907-4D54-A624-ED53B0325CAC@ntu.edu.tw>
 <004101d9283d$8b9b30e0$a2d192a0$@gmail.com>
Message-ID: <CAKZQJMDtryyt9UaL6AzCF3jNYN6trU9B_ZeG3E03ewm_xCvFqA@mail.gmail.com>

You rang sir?

library(tidyverse)
xx = 1:10
yr1 = yr2 = yr3 = rnorm(10)
dat1 <- data.frame(xx , yr1, yr2, y3)

dat1  %>%  select(!starts_with("yr"))

or for something a bit more exotic as I have been trying to learn a bit
about the "data.table package

library(data.table)

xx = 1:10
yr1 = yr2 = yr3 = rnorm(10)

dat2 <- data.table(xx , yr1, yr2, yr3)

dat2[, !names(dat2) %like% "yr", with=FALSE ]



On Sat, 14 Jan 2023 at 12:28, <avi.e.gross at gmail.com> wrote:

> Steven,
>
> Just want to add a few things to what people wrote.
>
> In base R, the methods mentioned will let you make a copy of your original
> DF that is missing the items you are selecting that match your pattern.
>
> That is fine.
>
> For some purposes, you want to keep the original data.frame and remove a
> column within it. You can do that in several ways but the simplest is
> something where you sat the column to NULL as in:
>
> mydata$NAME <- NULL
>
> using the mydata["NAME"] notation can do that for you by using a loop of
> unctional programming method that does that with all components of your
> grep.
>
> R does have optimizations that make this less useful as a partial copy of
> a data.frame retains common parts till things change.
>
> For those who like to use the tidyverse, it comes with lots of tools that
> let you select columns that start with or end with or contain some pattern
> and I find that way easier.
>
>
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Steven Yen
> Sent: Saturday, January 14, 2023 7:49 AM
> To: Andrew Simmons <akwsimmo at gmail.com>
> Cc: R-help Mailing List <r-help at r-project.org>
> Subject: Re: [R] Removing variables from data frame with a wile card
>
> Thanks to all. Very helpful.
>
> Steven from iPhone
>
> > On Jan 14, 2023, at 3:08 PM, Andrew Simmons <akwsimmo at gmail.com> wrote:
> >
> > ?You'll want to use grep() or grepl(). By default, grep() uses
> > extended regular expressions to find matches, but you can also use
> > perl regular expressions and globbing (after converting to a regular
> expression).
> > For example:
> >
> > grepl("^yr", colnames(mydata))
> >
> > will tell you which 'colnames' start with "yr". If you'd rather you
> > use globbing:
> >
> > grepl(glob2rx("yr*"), colnames(mydata))
> >
> > Then you might write something like this to remove the columns starting
> with yr:
> >
> > mydata <- mydata[, !grepl("^yr", colnames(mydata)), drop = FALSE]
> >
> >> On Sat, Jan 14, 2023 at 1:56 AM Steven T. Yen <styen at ntu.edu.tw> wrote:
> >>
> >> I have a data frame containing variables "yr3",...,"yr28".
> >>
> >> How do I remove them with a wild card----something similar to "del yr*"
> >> in Windows/doc? Thank you.
> >>
> >>> colnames(mydata)
> >>   [1] "year"       "weight"     "confeduc"   "confothr" "college"
> >>   [6] ...
> >>  [41] "yr3"        "yr4"        "yr5"        "yr6" "yr7"
> >>  [46] "yr8"        "yr9"        "yr10"       "yr11" "yr12"
> >>  [51] "yr13"       "yr14"       "yr15"       "yr16" "yr17"
> >>  [56] "yr18"       "yr19"       "yr20"       "yr21" "yr22"
> >>  [61] "yr23"       "yr24"       "yr25"       "yr26" "yr27"
> >>  [66] "yr28"...
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> >> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From @vi@e@gross m@iii@g oii gm@ii@com  Sun Jan 15 02:03:19 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Sat, 14 Jan 2023 20:03:19 -0500
Subject: [R] Removing variables from data frame with a wile card
In-Reply-To: <cc30deac-3dbe-4250-b239-35df614ac418@petzel.at>
References: <CAPcHnpS==8tWHya+C=K1kTQf1jE5f7oRmyf-PL137_C4h-sOYA@mail.gmail.com>
 <20A1D131-4907-4D54-A624-ED53B0325CAC@ntu.edu.tw>
 <004101d9283d$8b9b30e0$a2d192a0$@gmail.com>
 <cc30deac-3dbe-4250-b239-35df614ac418@petzel.at>
Message-ID: <001101d9287d$289cd490$79d67db0$@gmail.com>

Valentin,

You are correct that R does many things largely behind the scenes that make some operations fairly efficient.

>From a programming point of view, though, many people might make a data.frame and not think of it as a list of vectors of the same length that are kept that way.

So if they made a copy of the original data with fewer columns, they might be tempted to think the original item was completely copied and the original is either around or if the identifier was re-used, will be garbage collected. As you note, the only thinks collected are the columns you chose not to include.

For some it seems cleaner to set a list item to NULL, which seems to remove it immediately. 

The real point I hoped to make is that using base R, you can indeed approach removing (multiple) columns in two logical ways. One is to seemingly remove them in the original object, even if your point is valid. The other is to make a copy of just what you want and ignore the rest and it may be kept around or not.

If someone really wanted to get down to the basics, they could get a reference to all the columns they want to keep, as in col1 <- mydata[["col1"] ] and use those to make a new data.frame, or many other variants on these methods.  

Many programming languages have some qualms (I mean designers and programmers, and just plain purists) about when "pointers" of sorts are used and whether things should be mutable and so on so I prefer to avoid religious wars.

-----Original Message-----
From: Valentin Petzel <valentin at petzel.at> 
Sent: Saturday, January 14, 2023 1:21 PM
To: avi.e.gross at gmail.com
Cc: 'R-help Mailing List' <r-help at r-project.org>
Subject: Re: [R] Removing variables from data frame with a wile card

Hello Avi,

while something like d$something <- ... may seem like you're directly modifying the data it does not actually do so. Most R objects try to be immutable, that is, the object may not change after creation. This guarantees that if you have a binding for same object the object won't change sneakily.

There is a data structure that is in fact mutable which are environments. For example compare

L <- list()
local({L$a <- 3})
L$a

with

E <- new.env()
local({E$a <- 3})
E$a

The latter will in fact work, as the same Environment is modified, while in the first one a modified copy of the list is made.

Under the hood we have a parser trick: If R sees something like

f(a) <- ...

it will look for a function f<- and call

a <- f<-(a, ...)

(this also happens for example when you do names(x) <- ...)

So in fact in our case this is equivalent to creating a copy with removed columns and rebind the symbol in the current environment to the result.

The data.table package breaks with this convention and uses C based routines that allow changing of data without copying the object. Doing

d[, (cols_to_remove) := NULL]

will actually change the data.

Regards,
Valentin

14.01.2023 18:28:33 avi.e.gross at gmail.com:

> Steven,
> 
> Just want to add a few things to what people wrote.
> 
> In base R, the methods mentioned will let you make a copy of your original DF that is missing the items you are selecting that match your pattern.
> 
> That is fine.
> 
> For some purposes, you want to keep the original data.frame and remove a column within it. You can do that in several ways but the simplest is something where you sat the column to NULL as in:
> 
> mydata$NAME <- NULL
> 
> using the mydata["NAME"] notation can do that for you by using a loop of unctional programming method that does that with all components of your grep.
> 
> R does have optimizations that make this less useful as a partial copy of a data.frame retains common parts till things change.
> 
> For those who like to use the tidyverse, it comes with lots of tools that let you select columns that start with or end with or contain some pattern and I find that way easier.
> 
> 
> 
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Steven Yen
> Sent: Saturday, January 14, 2023 7:49 AM
> To: Andrew Simmons <akwsimmo at gmail.com>
> Cc: R-help Mailing List <r-help at r-project.org>
> Subject: Re: [R] Removing variables from data frame with a wile card
> 
> Thanks to all. Very helpful.
> 
> Steven from iPhone
> 
>> On Jan 14, 2023, at 3:08 PM, Andrew Simmons <akwsimmo at gmail.com> wrote:
>> 
>> ?You'll want to use grep() or grepl(). By default, grep() uses 
>> extended regular expressions to find matches, but you can also use 
>> perl regular expressions and globbing (after converting to a regular expression).
>> For example:
>> 
>> grepl("^yr", colnames(mydata))
>> 
>> will tell you which 'colnames' start with "yr". If you'd rather you 
>> use globbing:
>> 
>> grepl(glob2rx("yr*"), colnames(mydata))
>> 
>> Then you might write something like this to remove the columns starting with yr:
>> 
>> mydata <- mydata[, !grepl("^yr", colnames(mydata)), drop = FALSE]
>> 
>>> On Sat, Jan 14, 2023 at 1:56 AM Steven T. Yen <styen at ntu.edu.tw> wrote:
>>> 
>>> I have a data frame containing variables "yr3",...,"yr28".
>>> 
>>> How do I remove them with a wild card----something similar to "del yr*"
>>> in Windows/doc? Thank you.
>>> 
>>>> colnames(mydata)
>>>   [1] "year"       "weight"     "confeduc"   "confothr" "college"
>>>   [6] ...
>>> [41] "yr3"        "yr4"        "yr5"        "yr6" "yr7"
>>> [46] "yr8"        "yr9"        "yr10"       "yr11" "yr12"
>>> [51] "yr13"       "yr14"       "yr15"       "yr16" "yr17"
>>> [56] "yr18"       "yr19"       "yr20"       "yr21" "yr22"
>>> [61] "yr23"       "yr24"       "yr25"       "yr26" "yr27"
>>> [66] "yr28"...
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> 
>     [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @vi@e@gross m@iii@g oii gm@ii@com  Sun Jan 15 02:12:39 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Sat, 14 Jan 2023 20:12:39 -0500
Subject: [R] Removing variables from data frame with a wile card
In-Reply-To: <CAKZQJMDtryyt9UaL6AzCF3jNYN6trU9B_ZeG3E03ewm_xCvFqA@mail.gmail.com>
References: <CAPcHnpS==8tWHya+C=K1kTQf1jE5f7oRmyf-PL137_C4h-sOYA@mail.gmail.com>
 <20A1D131-4907-4D54-A624-ED53B0325CAC@ntu.edu.tw>
 <004101d9283d$8b9b30e0$a2d192a0$@gmail.com>
 <CAKZQJMDtryyt9UaL6AzCF3jNYN6trU9B_ZeG3E03ewm_xCvFqA@mail.gmail.com>
Message-ID: <001b01d9287e$760a5800$621f0800$@gmail.com>

John,

 

I am very familiar with the evolving tidyverse and some messages a while back included people who wanted this forum to mainly stick to base R, so I leave out examples.

 

Indeed, the tidyverse is designed to make it easy to select columns with all kinds of conditions including using regular expressions that allow more precision (as does grep) so you want to match ?yr? followed by exactly one or two digits. Some of the answers suggest starting with ?yr? was enough. They also allow selecting on arbitrary considerations like whether the column contains numeric data. You can do most things in base R, albeit I find the tidyverse method easier most of the time and also able to do some extremely complicated things with some care, such as creating multiple new columns form a set of columns that each implement a different function like mean, and mode and standard deviation and make the new columns the same names as the one they are derived from but a different suffix reflecting what transformation was done.

 

One nice feature is the ideas behind how data streams through multiple steps with one or a few transformations in each step, and the intermediate parts you do not want, simply melt away. The part about selecting or deselecting columns can often be used in many of the verbs.

 

From: John Kane <jrkrideau at gmail.com> 
Sent: Saturday, January 14, 2023 4:07 PM
To: avi.e.gross at gmail.com
Cc: R-help Mailing List <r-help at r-project.org>
Subject: Re: [R] Removing variables from data frame with a wile card

 

You rang sir?

 

library(tidyverse)
xx = 1:10 
yr1 = yr2 = yr3 = rnorm(10)
dat1 <- data.frame(xx , yr1, yr2, y3)

 

dat1  %>%  select(!starts_with("yr"))

 

or for something a bit more exotic as I have been trying to learn a bit about the "data.table package

 

library(data.table)

xx = 1:10 
yr1 = yr2 = yr3 = rnorm(10)

dat2 <- data.table(xx , yr1, yr2, yr3)

dat2[, !names(dat2) %like% "yr", with=FALSE ]
 

 

 

On Sat, 14 Jan 2023 at 12:28, <avi.e.gross at gmail.com <mailto:avi.e.gross at gmail.com> > wrote:

Steven,

Just want to add a few things to what people wrote.

In base R, the methods mentioned will let you make a copy of your original DF that is missing the items you are selecting that match your pattern.

That is fine.

For some purposes, you want to keep the original data.frame and remove a column within it. You can do that in several ways but the simplest is something where you sat the column to NULL as in:

mydata$NAME <- NULL

using the mydata["NAME"] notation can do that for you by using a loop of unctional programming method that does that with all components of your grep.

R does have optimizations that make this less useful as a partial copy of a data.frame retains common parts till things change.

For those who like to use the tidyverse, it comes with lots of tools that let you select columns that start with or end with or contain some pattern and I find that way easier.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org <mailto:r-help-bounces at r-project.org> > On Behalf Of Steven Yen
Sent: Saturday, January 14, 2023 7:49 AM
To: Andrew Simmons <akwsimmo at gmail.com <mailto:akwsimmo at gmail.com> >
Cc: R-help Mailing List <r-help at r-project.org <mailto:r-help at r-project.org> >
Subject: Re: [R] Removing variables from data frame with a wile card

Thanks to all. Very helpful.

Steven from iPhone

> On Jan 14, 2023, at 3:08 PM, Andrew Simmons <akwsimmo at gmail.com <mailto:akwsimmo at gmail.com> > wrote:
> 
> ?You'll want to use grep() or grepl(). By default, grep() uses 
> extended regular expressions to find matches, but you can also use 
> perl regular expressions and globbing (after converting to a regular expression).
> For example:
> 
> grepl("^yr", colnames(mydata))
> 
> will tell you which 'colnames' start with "yr". If you'd rather you 
> use globbing:
> 
> grepl(glob2rx("yr*"), colnames(mydata))
> 
> Then you might write something like this to remove the columns starting with yr:
> 
> mydata <- mydata[, !grepl("^yr", colnames(mydata)), drop = FALSE]
> 
>> On Sat, Jan 14, 2023 at 1:56 AM Steven T. Yen <styen at ntu.edu.tw <mailto:styen at ntu.edu.tw> > wrote:
>> 
>> I have a data frame containing variables "yr3",...,"yr28".
>> 
>> How do I remove them with a wild card----something similar to "del yr*"
>> in Windows/doc? Thank you.
>> 
>>> colnames(mydata)
>>   [1] "year"       "weight"     "confeduc"   "confothr" "college"
>>   [6] ...
>>  [41] "yr3"        "yr4"        "yr5"        "yr6" "yr7"
>>  [46] "yr8"        "yr9"        "yr10"       "yr11" "yr12"
>>  [51] "yr13"       "yr14"       "yr15"       "yr16" "yr17"
>>  [56] "yr18"       "yr19"       "yr20"       "yr21" "yr22"
>>  [61] "yr23"       "yr24"       "yr25"       "yr26" "yr27"
>>  [66] "yr28"...
>> 
>> ______________________________________________
>> R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see 
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.



-- 

John Kane
Kingston ON Canada


	[[alternative HTML version deleted]]


From v@|ent|n @end|ng |rom petze|@@t  Sat Jan 14 19:21:07 2023
From: v@|ent|n @end|ng |rom petze|@@t (Valentin Petzel)
Date: Sat, 14 Jan 2023 19:21:07 +0100 (GMT+01:00)
Subject: [R] Removing variables from data frame with a wile card
In-Reply-To: <004101d9283d$8b9b30e0$a2d192a0$@gmail.com>
References: <CAPcHnpS==8tWHya+C=K1kTQf1jE5f7oRmyf-PL137_C4h-sOYA@mail.gmail.com>
 <20A1D131-4907-4D54-A624-ED53B0325CAC@ntu.edu.tw>
 <004101d9283d$8b9b30e0$a2d192a0$@gmail.com>
Message-ID: <cc30deac-3dbe-4250-b239-35df614ac418@petzel.at>

Hello Avi,

while something like d$something <- ... may seem like you're directly modifying the data it does not actually do so. Most R objects try to be immutable, that is, the object may not change after creation. This guarantees that if you have a binding for same object the object won't change sneakily.

There is a data structure that is in fact mutable which are environments. For example compare

L <- list()
local({L$a <- 3})
L$a

with

E <- new.env()
local({E$a <- 3})
E$a

The latter will in fact work, as the same Environment is modified, while in the first one a modified copy of the list is made.

Under the hood we have a parser trick: If R sees something like

f(a) <- ...

it will look for a function f<- and call

a <- f<-(a, ...)

(this also happens for example when you do names(x) <- ...)

So in fact in our case this is equivalent to creating a copy with removed columns and rebind the symbol in the current environment to the result.

The data.table package breaks with this convention and uses C based routines that allow changing of data without copying the object. Doing

d[, (cols_to_remove) := NULL]

will actually change the data.

Regards,
Valentin

14.01.2023 18:28:33 avi.e.gross at gmail.com:

> Steven,
> 
> Just want to add a few things to what people wrote.
> 
> In base R, the methods mentioned will let you make a copy of your original DF that is missing the items you are selecting that match your pattern.
> 
> That is fine.
> 
> For some purposes, you want to keep the original data.frame and remove a column within it. You can do that in several ways but the simplest is something where you sat the column to NULL as in:
> 
> mydata$NAME <- NULL
> 
> using the mydata["NAME"] notation can do that for you by using a loop of unctional programming method that does that with all components of your grep.
> 
> R does have optimizations that make this less useful as a partial copy of a data.frame retains common parts till things change.
> 
> For those who like to use the tidyverse, it comes with lots of tools that let you select columns that start with or end with or contain some pattern and I find that way easier.
> 
> 
> 
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Steven Yen
> Sent: Saturday, January 14, 2023 7:49 AM
> To: Andrew Simmons <akwsimmo at gmail.com>
> Cc: R-help Mailing List <r-help at r-project.org>
> Subject: Re: [R] Removing variables from data frame with a wile card
> 
> Thanks to all. Very helpful.
> 
> Steven from iPhone
> 
>> On Jan 14, 2023, at 3:08 PM, Andrew Simmons <akwsimmo at gmail.com> wrote:
>> 
>> ?You'll want to use grep() or grepl(). By default, grep() uses
>> extended regular expressions to find matches, but you can also use
>> perl regular expressions and globbing (after converting to a regular expression).
>> For example:
>> 
>> grepl("^yr", colnames(mydata))
>> 
>> will tell you which 'colnames' start with "yr". If you'd rather you
>> use globbing:
>> 
>> grepl(glob2rx("yr*"), colnames(mydata))
>> 
>> Then you might write something like this to remove the columns starting with yr:
>> 
>> mydata <- mydata[, !grepl("^yr", colnames(mydata)), drop = FALSE]
>> 
>>> On Sat, Jan 14, 2023 at 1:56 AM Steven T. Yen <styen at ntu.edu.tw> wrote:
>>> 
>>> I have a data frame containing variables "yr3",...,"yr28".
>>> 
>>> How do I remove them with a wild card----something similar to "del yr*"
>>> in Windows/doc? Thank you.
>>> 
>>>> colnames(mydata)
>>> ? [1] "year"?????? "weight"???? "confeduc"?? "confothr" "college"
>>> ? [6] ...
>>> [41] "yr3"??????? "yr4"??????? "yr5"??????? "yr6" "yr7"
>>> [46] "yr8"??????? "yr9"??????? "yr10"?????? "yr11" "yr12"
>>> [51] "yr13"?????? "yr14"?????? "yr15"?????? "yr16" "yr17"
>>> [56] "yr18"?????? "yr19"?????? "yr20"?????? "yr21" "yr22"
>>> [61] "yr23"?????? "yr24"?????? "yr25"?????? "yr26" "yr27"
>>> [66] "yr28"...
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
> 
> ??? [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Jan 15 16:30:37 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 15 Jan 2023 15:30:37 +0000
Subject: [R] return value of {....}
In-Reply-To: <bf2b6310-a43e-c46b-ff91-72e11f014f1b@syonic.eu>
References: <bf2b6310-a43e-c46b-ff91-72e11f014f1b@syonic.eu>
Message-ID: <PU4P216MB1568ACF90C25826FDB7DABDFC8C09@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear leonard,
                         I think Avi's repsonse was best...it's just a design...as he said, there are other possibilities in other programming languages which augments this design...thanks anyways for your reply...

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Leonard Mada <leo.mada at syonic.eu>
Sent: Friday, January 13, 2023 1:44 AM
To: Akshay Kulkarni <akshay_e4 at hotmail.com>
Cc: R-help Mailing List <r-help at r-project.org>
Subject: Re: [R] return value of {....}

Dear Akshay,

The best response was given by Andrew. "{...}" is not a closure.

This is unusual for someone used to C-type languages. But I will try to
explain some of the rationale.

In the case that "{...}" was a closure, then external variables would
need to be explicitly declared before the closure (in order to reuse
those values):
intermediate = c()
{
     intermediate = ...;
     result = someFUN(intermediate);
}

1.) Interactive Sessions
This is cumbersome in interactive sessions. For example: you often
compute the mean or the variance as intermediary results, and will need
them later on as well. They could have been computed outside the
"closure", but writing code in interactive sessions may not always be
straightforward.

2.) Missing arguments
f = function(x, y) {
     if(missing(y)) {
         # assuming x = matrix
         y = x[,2]; x = x[,1];
     }
}
It would be much more cumbersome to define/use a temporary tempY.

I hope this gives a better perspective why this is indeed a useful
feature - even if it is counterintuitive.

Sincerely,

Leonard



	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Jan 15 16:33:18 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 15 Jan 2023 15:33:18 +0000
Subject: [R] return value of {....}
In-Reply-To: <d201ecea-b28d-ad26-75a4-311edf335c48@gmx.at>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
 <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <cf027dca-4bde-4c05-a964-1522025d6532@petzel.at>
 <d201ecea-b28d-ad26-75a4-311edf335c48@gmx.at>
Message-ID: <PU4P216MB15683B8CDDAA65F62BAF1010C8C09@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

dear Heinz,
                     Thanks for your reply....reason is as old as the Sun..!

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Heinz Tuechler <tuechler at gmx.at>
Sent: Friday, January 13, 2023 4:30 PM
To: r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] return value of {....}

> 09.01.2023 18:05:58 akshay kulkarni <akshay_e4 at hotmail.com>:
>
> We are living in the 21st century world, and the R-core team might,I suppose, have a definite reason ...
>

Maybe compatibility reasons with S and R-versions from the 20st century?
But maybe, you would have expected some reason even then.

best regards,

Heinz

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Jan 15 16:34:40 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 15 Jan 2023 15:34:40 +0000
Subject: [R] return value of {....}
In-Reply-To: <CAHqSRuQRYv1fii+F6VHd8qxAmWtu45xFTE7sJMO9KG6FH9yyXQ@mail.gmail.com>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
 <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <cf027dca-4bde-4c05-a964-1522025d6532@petzel.at>
 <CAHqSRuQRYv1fii+F6VHd8qxAmWtu45xFTE7sJMO9KG6FH9yyXQ@mail.gmail.com>
Message-ID: <PU4P216MB1568DF914499E2505DB1F3C2C8C09@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Bill,
                 Thanks for your reply.....

thanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Bill Dunlap <williamwdunlap at gmail.com>
Sent: Friday, January 13, 2023 10:48 PM
To: Valentin Petzel <valentin at petzel.at>
Cc: akshay kulkarni <akshay_e4 at hotmail.com>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] return value of {....}

R's
   { expr1; expr2; expr3}
acts much like C's
   ( expr1, expr2, expr3)

E.g.,

$ cat a.c
#include <stdio.h>

int main(int argc, char* argv[])
{
    double y = 10 ;
    double x = (printf("Starting... "), y = y + 100, y * 20);
    printf("Done: x=%g, y=%g\n", x, y);
    return 0;
}
$ gcc -Wall a.c
$ ./a.out
Starting... Done: x=2200, y=110

I don't like that syntax (e.g., commas between expressions instead of the usual semicolons after expressions).  Perhaps John Chambers et all didn't either.

-Bill

On Fri, Jan 13, 2023 at 2:28 AM Valentin Petzel <valentin at petzel.at<mailto:valentin at petzel.at>> wrote:
Hello Akshay,

R is quite inspired by LISP, where this is a common thing. It is not in fact that {...} returned something, rather any expression evalulates to some value, and for a compound statement that is the last evaluated expression.

{...} might be seen as similar to LISPs (begin ...).

Now this is a very different thing compared to {...} in something like C, even if it looks or behaves similarly. But in R {...} is in fact an expression and thus has evaluate to some value. This also comes with some nice benefits.

You do not need to use {...} for anything that is a single statement. But you can in each possible place use {...} to turn multiple statements into one.

Now think about a statement like this

f <- function(n) {
x <- runif(n)
x**2
}

Then we can do

y <- f(10)

Now, you suggested way would look like this:

f <- function(n) {
x <- runif(n)
y <- x**2
}

And we'd need to do something like:

f(10)
y <- somehow_get_last_env_of_f$y

So having a compound statement evaluate to a value clearly has a benefit.

Best Regards,
Valentin

09.01.2023 18:05:58 akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>>:

> Dear Valentin,
>                           But why should {....} "return" a value? It could just as well evaluate all the expressions and store the resulting objects in whatever environment the interpreter chooses, and then it would be left to the user to manipulate any object he chooses. Don't you think returning the last, or any value, is redundant? We are living in the 21st century world, and the R-core team might,I suppose, have a definite reason for"returning" the last value. Any comments?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
> ----------------------------------------
> *From:* Valentin Petzel <valentin at petzel.at<mailto:valentin at petzel.at>>
> *Sent:* Monday, January 9, 2023 9:18 PM
> *To:* akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>>
> *Cc:* R help Mailing list <r-help at r-project.org<mailto:r-help at r-project.org>>
> *Subject:* Re: [R] return value of {....}
>
> Hello Akshai,
>
> I think you are confusing {...} with local({...}). This one will evaluate the expression in a separate environment, returning the last expression.
>
> {...} simply evaluates multiple expressions as one and returns the result of the last line, but it still evaluates each expression.
>
> Assignment returns the assigned value, so we can chain assignments like this
>
> a <- 1 + (b <- 2)
>
> conveniently.
>
> So when is {...} useful? Well, anyplace where you want to execute complex stuff in a function argument. E.g. you might do:
>
> data %>% group_by(x) %>% summarise(y = {if(x[1] > 10) sum(y) else mean(y)})
>
> Regards,
> Valentin Petzel
>
> 09.01.2023 15:47:53 akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>>:
>
>> Dear members,
>>                              I have the following code:
>>
>>> TB <- {x <- 3;y <- 5}
>>> TB
>> [1] 5
>>
>> It is consistent with the documentation: For {, the result of the last expression evaluated. This has the visibility of the last evaluation.
>>
>> But both x AND y are created, but the "return value" is y. How can this be advantageous for solving practical problems? Specifically, consider the following code:
>>
>> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
>>
>> Both expr5 and expr7 are created, and are accessible by the code outside of the nested braces right? But the "return value" of the nested braces is expr7. So doesn't this mean that only expr7 should be accessible? Please help me entangle this (of course the return value of F is expr10, and all the other objects created by the preceding expressions are deleted. But expr5 is not, after the control passes outside of the nested braces!)
>>
>> Thanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>>
>>     [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Jan 15 16:38:15 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 15 Jan 2023 15:38:15 +0000
Subject: [R] return value of {....}
In-Reply-To: <cf027dca-4bde-4c05-a964-1522025d6532@petzel.at>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
 <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <cf027dca-4bde-4c05-a964-1522025d6532@petzel.at>
Message-ID: <PU4P216MB1568744F79BAC3EF0ED1A802C8C09@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear valentin,
                          Thanks for a comprehensive background....

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Valentin Petzel <valentin at petzel.at>
Sent: Friday, January 13, 2023 4:48 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] return value of {....}

Hello Akshay,

R is quite inspired by LISP, where this is a common thing. It is not in fact that {...} returned something, rather any expression evalulates to some value, and for a compound statement that is the last evaluated expression.

{...} might be seen as similar to LISPs (begin ...).

Now this is a very different thing compared to {...} in something like C, even if it looks or behaves similarly. But in R {...} is in fact an expression and thus has evaluate to some value. This also comes with some nice benefits.

You do not need to use {...} for anything that is a single statement. But you can in each possible place use {...} to turn multiple statements into one.

Now think about a statement like this

f <- function(n) {
x <- runif(n)
x**2
}

Then we can do

y <- f(10)

Now, you suggested way would look like this:

f <- function(n) {
x <- runif(n)
y <- x**2
}

And we'd need to do something like:

f(10)
y <- somehow_get_last_env_of_f$y

So having a compound statement evaluate to a value clearly has a benefit.

Best Regards,
Valentin


09.01.2023 18:05:58 akshay kulkarni <akshay_e4 at hotmail.com>:

Dear Valentin,
                          But why should {....} "return" a value? It could just as well evaluate all the expressions and store the resulting objects in whatever environment the interpreter chooses, and then it would be left to the user to manipulate any object he chooses. Don't you think returning the last, or any value, is redundant? We are living in the 21st century world, and the R-core team might,I suppose, have a definite reason for"returning" the last value. Any comments?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI

________________________________
From: Valentin Petzel <valentin at petzel.at>
Sent: Monday, January 9, 2023 9:18 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] return value of {....}

Hello Akshai,

I think you are confusing {...} with local({...}). This one will evaluate the expression in a separate environment, returning the last expression.

{...} simply evaluates multiple expressions as one and returns the result of the last line, but it still evaluates each expression.

Assignment returns the assigned value, so we can chain assignments like this

a <- 1 + (b <- 2)

conveniently.

So when is {...} useful? Well, anyplace where you want to execute complex stuff in a function argument. E.g. you might do:

data %>% group_by(x) %>% summarise(y = {if(x[1] > 10) sum(y) else mean(y)})

Regards,
Valentin Petzel

09.01.2023 15:47:53 akshay kulkarni <akshay_e4 at hotmail.com>:

> Dear members,
>                              I have the following code:
>
>> TB <- {x <- 3;y <- 5}
>> TB
> [1] 5
>
> It is consistent with the documentation: For {, the result of the last expression evaluated. This has the visibility of the last evaluation.
>
> But both x AND y are created, but the "return value" is y. How can this be advantageous for solving practical problems? Specifically, consider the following code:
>
> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
>
> Both expr5 and expr7 are created, and are accessible by the code outside of the nested braces right? But the "return value" of the nested braces is expr7. So doesn't this mean that only expr7 should be accessible? Please help me entangle this (of course the return value of F is expr10, and all the other objects created by the preceding expressions are deleted. But expr5 is not, after the control passes outside of the nested braces!)
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>     [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Sun Jan 15 17:54:34 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Sun, 15 Jan 2023 16:54:34 +0000
Subject: [R] Removing variables from data frame with a wile card
In-Reply-To: <cc30deac-3dbe-4250-b239-35df614ac418@petzel.at>
References: <CAPcHnpS==8tWHya+C=K1kTQf1jE5f7oRmyf-PL137_C4h-sOYA@mail.gmail.com>
 <20A1D131-4907-4D54-A624-ED53B0325CAC@ntu.edu.tw>
 <004101d9283d$8b9b30e0$a2d192a0$@gmail.com>
 <cc30deac-3dbe-4250-b239-35df614ac418@petzel.at>
Message-ID: <SJ0PR03MB6360F7A2EBF1D3B32C0ECE2AE2C09@SJ0PR03MB6360.namprd03.prod.outlook.com>

I am new to this thread. At the risk of presenting something that has been shown before, below I demonstrate how a column in a data frame can be dropped using a wild card, i.e. a column whose name starts with "th" using nothing more than base r functions and base R syntax. While additions to R such as tidyverse can be very helpful, many things that they do can be accomplished simply using base R.  

# Create data frame with three columns
one <- rep(1,10)
one
two <- rep(2,10)
two
three <- rep(3,10)
three
mydata <- data.frame(one=one, two=two, three=three)
cat("Data frame with three columns\n")
mydata

# Drop the column whose name starts with th, i.e. column three
# Find the location of the column
ColumToDelete <- grep("th",colnames((mydata)))
cat("The colomumn to be dropped is the column called three, which is column",ColumToDelete,"\n")
ColumToDelete

# Drop the column whose name starts with "th"
newdata2 <- mydata[,-ColumnToDelete]
cat("Data frame after droping column whose name is three\n")
newdata2

I hope this helps.
John


________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Valentin Petzel <valentin at petzel.at>
Sent: Saturday, January 14, 2023 1:21 PM
To: avi.e.gross at gmail.com
Cc: 'R-help Mailing List'
Subject: Re: [R] Removing variables from data frame with a wile card

Hello Avi,

while something like d$something <- ... may seem like you're directly modifying the data it does not actually do so. Most R objects try to be immutable, that is, the object may not change after creation. This guarantees that if you have a binding for same object the object won't change sneakily.

There is a data structure that is in fact mutable which are environments. For example compare

L <- list()
local({L$a <- 3})
L$a

with

E <- new.env()
local({E$a <- 3})
E$a

The latter will in fact work, as the same Environment is modified, while in the first one a modified copy of the list is made.

Under the hood we have a parser trick: If R sees something like

f(a) <- ...

it will look for a function f<- and call

a <- f<-(a, ...)

(this also happens for example when you do names(x) <- ...)

So in fact in our case this is equivalent to creating a copy with removed columns and rebind the symbol in the current environment to the result.

The data.table package breaks with this convention and uses C based routines that allow changing of data without copying the object. Doing

d[, (cols_to_remove) := NULL]

will actually change the data.

Regards,
Valentin

14.01.2023 18:28:33 avi.e.gross at gmail.com:

> Steven,
>
> Just want to add a few things to what people wrote.
>
> In base R, the methods mentioned will let you make a copy of your original DF that is missing the items you are selecting that match your pattern.
>
> That is fine.
>
> For some purposes, you want to keep the original data.frame and remove a column within it. You can do that in several ways but the simplest is something where you sat the column to NULL as in:
>
> mydata$NAME <- NULL
>
> using the mydata["NAME"] notation can do that for you by using a loop of unctional programming method that does that with all components of your grep.
>
> R does have optimizations that make this less useful as a partial copy of a data.frame retains common parts till things change.
>
> For those who like to use the tidyverse, it comes with lots of tools that let you select columns that start with or end with or contain some pattern and I find that way easier.
>
>
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Steven Yen
> Sent: Saturday, January 14, 2023 7:49 AM
> To: Andrew Simmons <akwsimmo at gmail.com>
> Cc: R-help Mailing List <r-help at r-project.org>
> Subject: Re: [R] Removing variables from data frame with a wile card
>
> Thanks to all. Very helpful.
>
> Steven from iPhone
>
>> On Jan 14, 2023, at 3:08 PM, Andrew Simmons <akwsimmo at gmail.com> wrote:
>>
>> ?You'll want to use grep() or grepl(). By default, grep() uses
>> extended regular expressions to find matches, but you can also use
>> perl regular expressions and globbing (after converting to a regular expression).
>> For example:
>>
>> grepl("^yr", colnames(mydata))
>>
>> will tell you which 'colnames' start with "yr". If you'd rather you
>> use globbing:
>>
>> grepl(glob2rx("yr*"), colnames(mydata))
>>
>> Then you might write something like this to remove the columns starting with yr:
>>
>> mydata <- mydata[, !grepl("^yr", colnames(mydata)), drop = FALSE]
>>
>>> On Sat, Jan 14, 2023 at 1:56 AM Steven T. Yen <styen at ntu.edu.tw> wrote:
>>>
>>> I have a data frame containing variables "yr3",...,"yr28".
>>>
>>> How do I remove them with a wild card----something similar to "del yr*"
>>> in Windows/doc? Thank you.
>>>
>>>> colnames(mydata)
>>>   [1] "year"?????? "weight"???? "confeduc"?? "confothr" "college"
>>>   [6] ...
>>> [41] "yr3"??????? "yr4"??????? "yr5"??????? "yr6" "yr7"
>>> [46] "yr8"??????? "yr9"??????? "yr10"?????? "yr11" "yr12"
>>> [51] "yr13"?????? "yr14"?????? "yr15"?????? "yr16" "yr17"
>>> [56] "yr18"?????? "yr19"?????? "yr20"?????? "yr21" "yr22"
>>> [61] "yr23"?????? "yr24"?????? "yr25"?????? "yr26" "yr27"
>>> [66] "yr28"...
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=GP9WF81MtvF%2FYi8LoWQt0W0VInk2WsPAgB0zHsu5aRQ%3D&reserved=0
>>> PLEASE do read the posting guide
>>> https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=h6SEOa8rBxjsq%2FQirtXACss4DdfseradQm9FFhDhbVw%3D&reserved=0
>>> and provide commented, minimal, self-contained, reproducible code.
>
>     [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=GP9WF81MtvF%2FYi8LoWQt0W0VInk2WsPAgB0zHsu5aRQ%3D&reserved=0
> PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=h6SEOa8rBxjsq%2FQirtXACss4DdfseradQm9FFhDhbVw%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=GP9WF81MtvF%2FYi8LoWQt0W0VInk2WsPAgB0zHsu5aRQ%3D&reserved=0
> PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=h6SEOa8rBxjsq%2FQirtXACss4DdfseradQm9FFhDhbVw%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=GP9WF81MtvF%2FYi8LoWQt0W0VInk2WsPAgB0zHsu5aRQ%3D&reserved=0
PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=h6SEOa8rBxjsq%2FQirtXACss4DdfseradQm9FFhDhbVw%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.

From @vi@e@gross m@iii@g oii gm@ii@com  Sun Jan 15 20:39:58 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Sun, 15 Jan 2023 14:39:58 -0500
Subject: [R] Removing variables from data frame with a wile card
In-Reply-To: <SJ0PR03MB6360F7A2EBF1D3B32C0ECE2AE2C09@SJ0PR03MB6360.namprd03.prod.outlook.com>
References: <CAPcHnpS==8tWHya+C=K1kTQf1jE5f7oRmyf-PL137_C4h-sOYA@mail.gmail.com>
 <20A1D131-4907-4D54-A624-ED53B0325CAC@ntu.edu.tw>
 <004101d9283d$8b9b30e0$a2d192a0$@gmail.com>
 <cc30deac-3dbe-4250-b239-35df614ac418@petzel.at>
 <SJ0PR03MB6360F7A2EBF1D3B32C0ECE2AE2C09@SJ0PR03MB6360.namprd03.prod.outlook.com>
Message-ID: <004401d92919$272d9440$7588bcc0$@gmail.com>

John,

As you said, you are new to the discussion so let me catch you up.

The original question was about removing many columns that shared a similar feature in the naming convention while leaving other columns in-place. Quite a few replies were given on how to do that including how to use a regular expression to gather the column names you want to remove.

It was only afterwards that the topic changed a bit to mention that some people used additional ways both in base R and also using packages like dplyr in the tidyverse.

As a general rule, most packages out there provide functionality that can be done in base R if you wish, and some are written purely in R while some augment that with parts re-done in C or something. If a package is well built and frequently used, it may well make your life as a programmer easier as the code need not be re-invented and debugged. Of course some packages are of poorer quality.

So we fully agree that unless asked for, the base R answers should be the focus HERE. Then again, languages are not static and sometimes we see things like pipes moved in a modified version into the main language.

Avi

-----Original Message-----
From: Sorkin, John <jsorkin at som.umaryland.edu> 
Sent: Sunday, January 15, 2023 11:55 AM
To: Valentin Petzel <valentin at petzel.at>; avi.e.gross at gmail.com
Cc: 'R-help Mailing List' <r-help at r-project.org>
Subject: Re: [R] Removing variables from data frame with a wile card

I am new to this thread. At the risk of presenting something that has been shown before, below I demonstrate how a column in a data frame can be dropped using a wild card, i.e. a column whose name starts with "th" using nothing more than base r functions and base R syntax. While additions to R such as tidyverse can be very helpful, many things that they do can be accomplished simply using base R.  

# Create data frame with three columns
one <- rep(1,10)
one
two <- rep(2,10)
two
three <- rep(3,10)
three
mydata <- data.frame(one=one, two=two, three=three) cat("Data frame with three columns\n") mydata

# Drop the column whose name starts with th, i.e. column three # Find the location of the column ColumToDelete <- grep("th",colnames((mydata))) cat("The colomumn to be dropped is the column called three, which is column",ColumToDelete,"\n") ColumToDelete

# Drop the column whose name starts with "th"
newdata2 <- mydata[,-ColumnToDelete]
cat("Data frame after droping column whose name is three\n")
newdata2

I hope this helps.
John


________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Valentin Petzel <valentin at petzel.at>
Sent: Saturday, January 14, 2023 1:21 PM
To: avi.e.gross at gmail.com
Cc: 'R-help Mailing List'
Subject: Re: [R] Removing variables from data frame with a wile card

Hello Avi,

while something like d$something <- ... may seem like you're directly modifying the data it does not actually do so. Most R objects try to be immutable, that is, the object may not change after creation. This guarantees that if you have a binding for same object the object won't change sneakily.

There is a data structure that is in fact mutable which are environments. For example compare

L <- list()
local({L$a <- 3})
L$a

with

E <- new.env()
local({E$a <- 3})
E$a

The latter will in fact work, as the same Environment is modified, while in the first one a modified copy of the list is made.

Under the hood we have a parser trick: If R sees something like

f(a) <- ...

it will look for a function f<- and call

a <- f<-(a, ...)

(this also happens for example when you do names(x) <- ...)

So in fact in our case this is equivalent to creating a copy with removed columns and rebind the symbol in the current environment to the result.

The data.table package breaks with this convention and uses C based routines that allow changing of data without copying the object. Doing

d[, (cols_to_remove) := NULL]

will actually change the data.

Regards,
Valentin

14.01.2023 18:28:33 avi.e.gross at gmail.com:

> Steven,
>
> Just want to add a few things to what people wrote.
>
> In base R, the methods mentioned will let you make a copy of your original DF that is missing the items you are selecting that match your pattern.
>
> That is fine.
>
> For some purposes, you want to keep the original data.frame and remove a column within it. You can do that in several ways but the simplest is something where you sat the column to NULL as in:
>
> mydata$NAME <- NULL
>
> using the mydata["NAME"] notation can do that for you by using a loop of unctional programming method that does that with all components of your grep.
>
> R does have optimizations that make this less useful as a partial copy of a data.frame retains common parts till things change.
>
> For those who like to use the tidyverse, it comes with lots of tools that let you select columns that start with or end with or contain some pattern and I find that way easier.
>
>
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Steven Yen
> Sent: Saturday, January 14, 2023 7:49 AM
> To: Andrew Simmons <akwsimmo at gmail.com>
> Cc: R-help Mailing List <r-help at r-project.org>
> Subject: Re: [R] Removing variables from data frame with a wile card
>
> Thanks to all. Very helpful.
>
> Steven from iPhone
>
>> On Jan 14, 2023, at 3:08 PM, Andrew Simmons <akwsimmo at gmail.com> wrote:
>>
>> ?You'll want to use grep() or grepl(). By default, grep() uses 
>> extended regular expressions to find matches, but you can also use 
>> perl regular expressions and globbing (after converting to a regular expression).
>> For example:
>>
>> grepl("^yr", colnames(mydata))
>>
>> will tell you which 'colnames' start with "yr". If you'd rather you 
>> use globbing:
>>
>> grepl(glob2rx("yr*"), colnames(mydata))
>>
>> Then you might write something like this to remove the columns starting with yr:
>>
>> mydata <- mydata[, !grepl("^yr", colnames(mydata)), drop = FALSE]
>>
>>> On Sat, Jan 14, 2023 at 1:56 AM Steven T. Yen <styen at ntu.edu.tw> wrote:
>>>
>>> I have a data frame containing variables "yr3",...,"yr28".
>>>
>>> How do I remove them with a wild card----something similar to "del yr*"
>>> in Windows/doc? Thank you.
>>>
>>>> colnames(mydata)
>>>   [1] "year"       "weight"     "confeduc"   "confothr" "college"
>>>   [6] ...
>>> [41] "yr3"        "yr4"        "yr5"        "yr6" "yr7"
>>> [46] "yr8"        "yr9"        "yr10"       "yr11" "yr12"
>>> [51] "yr13"       "yr14"       "yr15"       "yr16" "yr17"
>>> [56] "yr18"       "yr19"       "yr20"       "yr21" "yr22"
>>> [61] "yr23"       "yr24"       "yr25"       "yr26" "yr27"
>>> [66] "yr28"...
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst
>>> at.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40so
>>> m.umaryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461
>>> a88940312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb
>>> 3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3
>>> D%7C3000%7C%7C%7C&sdata=GP9WF81MtvF%2FYi8LoWQt0W0VInk2WsPAgB0zHsu5aR
>>> Q%3D&reserved=0
>>> PLEASE do read the posting guide
>>> https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww
>>> .r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.uma
>>> ryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a8894
>>> 0312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8ey
>>> JWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3
>>> 000%7C%7C%7C&sdata=h6SEOa8rBxjsq%2FQirtXACss4DdfseradQm9FFhDhbVw%3D&
>>> reserved=0 and provide commented, minimal, self-contained, 
>>> reproducible code.
>
>     [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.um
> aryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940
> 312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWI
> joiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7
> C%7C%7C&sdata=GP9WF81MtvF%2FYi8LoWQt0W0VInk2WsPAgB0zHsu5aRQ%3D&reserve
> d=0 PLEASE do read the posting guide 
> https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> -project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryla
> nd.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940312a3
> 95cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC
> 4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%
> 7C&sdata=h6SEOa8rBxjsq%2FQirtXACss4DdfseradQm9FFhDhbVw%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.um
> aryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940
> 312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWI
> joiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7
> C%7C%7C&sdata=GP9WF81MtvF%2FYi8LoWQt0W0VInk2WsPAgB0zHsu5aRQ%3D&reserve
> d=0 PLEASE do read the posting guide 
> https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> -project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryla
> nd.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940312a3
> 95cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC
> 4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%
> 7C&sdata=h6SEOa8rBxjsq%2FQirtXACss4DdfseradQm9FFhDhbVw%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=GP9WF81MtvF%2FYi8LoWQt0W0VInk2WsPAgB0zHsu5aRQ%3D&reserved=0
PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=h6SEOa8rBxjsq%2FQirtXACss4DdfseradQm9FFhDhbVw%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Sun Jan 15 21:59:04 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Sun, 15 Jan 2023 20:59:04 +0000
Subject: [R] Removing variables from data frame with a wile card
In-Reply-To: <SJ0PR03MB6360F7A2EBF1D3B32C0ECE2AE2C09@SJ0PR03MB6360.namprd03.prod.outlook.com>
References: <CAPcHnpS==8tWHya+C=K1kTQf1jE5f7oRmyf-PL137_C4h-sOYA@mail.gmail.com>
 <20A1D131-4907-4D54-A624-ED53B0325CAC@ntu.edu.tw>
 <004101d9283d$8b9b30e0$a2d192a0$@gmail.com>
 <cc30deac-3dbe-4250-b239-35df614ac418@petzel.at>
 <SJ0PR03MB6360F7A2EBF1D3B32C0ECE2AE2C09@SJ0PR03MB6360.namprd03.prod.outlook.com>
Message-ID: <bfb76048-01ad-3d69-a0ac-25faef952c61@sapo.pt>

?s 16:54 de 15/01/2023, Sorkin, John escreveu:
> I am new to this thread. At the risk of presenting something that has been shown before, below I demonstrate how a column in a data frame can be dropped using a wild card, i.e. a column whose name starts with "th" using nothing more than base r functions and base R syntax. While additions to R such as tidyverse can be very helpful, many things that they do can be accomplished simply using base R.
> 
> # Create data frame with three columns
> one <- rep(1,10)
> one
> two <- rep(2,10)
> two
> three <- rep(3,10)
> three
> mydata <- data.frame(one=one, two=two, three=three)
> cat("Data frame with three columns\n")
> mydata
> 
> # Drop the column whose name starts with th, i.e. column three
> # Find the location of the column
> ColumToDelete <- grep("th",colnames((mydata)))
> cat("The colomumn to be dropped is the column called three, which is column",ColumToDelete,"\n")
> ColumToDelete
> 
> # Drop the column whose name starts with "th"
> newdata2 <- mydata[,-ColumnToDelete]
> cat("Data frame after droping column whose name is three\n")
> newdata2
> 
> I hope this helps.
> John
> 
> 
> ________________________________________
> From: R-help <r-help-bounces at r-project.org> on behalf of Valentin Petzel <valentin at petzel.at>
> Sent: Saturday, January 14, 2023 1:21 PM
> To: avi.e.gross at gmail.com
> Cc: 'R-help Mailing List'
> Subject: Re: [R] Removing variables from data frame with a wile card
> 
> Hello Avi,
> 
> while something like d$something <- ... may seem like you're directly modifying the data it does not actually do so. Most R objects try to be immutable, that is, the object may not change after creation. This guarantees that if you have a binding for same object the object won't change sneakily.
> 
> There is a data structure that is in fact mutable which are environments. For example compare
> 
> L <- list()
> local({L$a <- 3})
> L$a
> 
> with
> 
> E <- new.env()
> local({E$a <- 3})
> E$a
> 
> The latter will in fact work, as the same Environment is modified, while in the first one a modified copy of the list is made.
> 
> Under the hood we have a parser trick: If R sees something like
> 
> f(a) <- ...
> 
> it will look for a function f<- and call
> 
> a <- f<-(a, ...)
> 
> (this also happens for example when you do names(x) <- ...)
> 
> So in fact in our case this is equivalent to creating a copy with removed columns and rebind the symbol in the current environment to the result.
> 
> The data.table package breaks with this convention and uses C based routines that allow changing of data without copying the object. Doing
> 
> d[, (cols_to_remove) := NULL]
> 
> will actually change the data.
> 
> Regards,
> Valentin
> 
> 14.01.2023 18:28:33 avi.e.gross at gmail.com:
> 
>> Steven,
>>
>> Just want to add a few things to what people wrote.
>>
>> In base R, the methods mentioned will let you make a copy of your original DF that is missing the items you are selecting that match your pattern.
>>
>> That is fine.
>>
>> For some purposes, you want to keep the original data.frame and remove a column within it. You can do that in several ways but the simplest is something where you sat the column to NULL as in:
>>
>> mydata$NAME <- NULL
>>
>> using the mydata["NAME"] notation can do that for you by using a loop of unctional programming method that does that with all components of your grep.
>>
>> R does have optimizations that make this less useful as a partial copy of a data.frame retains common parts till things change.
>>
>> For those who like to use the tidyverse, it comes with lots of tools that let you select columns that start with or end with or contain some pattern and I find that way easier.
>>
>>
>>
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Steven Yen
>> Sent: Saturday, January 14, 2023 7:49 AM
>> To: Andrew Simmons <akwsimmo at gmail.com>
>> Cc: R-help Mailing List <r-help at r-project.org>
>> Subject: Re: [R] Removing variables from data frame with a wile card
>>
>> Thanks to all. Very helpful.
>>
>> Steven from iPhone
>>
>>> On Jan 14, 2023, at 3:08 PM, Andrew Simmons <akwsimmo at gmail.com> wrote:
>>>
>>> ?You'll want to use grep() or grepl(). By default, grep() uses
>>> extended regular expressions to find matches, but you can also use
>>> perl regular expressions and globbing (after converting to a regular expression).
>>> For example:
>>>
>>> grepl("^yr", colnames(mydata))
>>>
>>> will tell you which 'colnames' start with "yr". If you'd rather you
>>> use globbing:
>>>
>>> grepl(glob2rx("yr*"), colnames(mydata))
>>>
>>> Then you might write something like this to remove the columns starting with yr:
>>>
>>> mydata <- mydata[, !grepl("^yr", colnames(mydata)), drop = FALSE]
>>>
>>>> On Sat, Jan 14, 2023 at 1:56 AM Steven T. Yen <styen at ntu.edu.tw> wrote:
>>>>
>>>> I have a data frame containing variables "yr3",...,"yr28".
>>>>
>>>> How do I remove them with a wild card----something similar to "del yr*"
>>>> in Windows/doc? Thank you.
>>>>
>>>>> colnames(mydata)
>>>>    [1] "year"?????? "weight"???? "confeduc"?? "confothr" "college"
>>>>    [6] ...
>>>> [41] "yr3"??????? "yr4"??????? "yr5"??????? "yr6" "yr7"
>>>> [46] "yr8"??????? "yr9"??????? "yr10"?????? "yr11" "yr12"
>>>> [51] "yr13"?????? "yr14"?????? "yr15"?????? "yr16" "yr17"
>>>> [56] "yr18"?????? "yr19"?????? "yr20"?????? "yr21" "yr22"
>>>> [61] "yr23"?????? "yr24"?????? "yr25"?????? "yr26" "yr27"
>>>> [66] "yr28"...
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=GP9WF81MtvF%2FYi8LoWQt0W0VInk2WsPAgB0zHsu5aRQ%3D&reserved=0
>>>> PLEASE do read the posting guide
>>>> https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=h6SEOa8rBxjsq%2FQirtXACss4DdfseradQm9FFhDhbVw%3D&reserved=0
>>>> and provide commented, minimal, self-contained, reproducible code.
>>
>>      [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=GP9WF81MtvF%2FYi8LoWQt0W0VInk2WsPAgB0zHsu5aRQ%3D&reserved=0
>> PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=h6SEOa8rBxjsq%2FQirtXACss4DdfseradQm9FFhDhbVw%3D&reserved=0
>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=GP9WF81MtvF%2FYi8LoWQt0W0VInk2WsPAgB0zHsu5aRQ%3D&reserved=0
>> PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=h6SEOa8rBxjsq%2FQirtXACss4DdfseradQm9FFhDhbVw%3D&reserved=0
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=GP9WF81MtvF%2FYi8LoWQt0W0VInk2WsPAgB0zHsu5aRQ%3D&reserved=0
> PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7Cca354e487c4e4b977f6b08daf6e2df29%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638093751546679426%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=h6SEOa8rBxjsq%2FQirtXACss4DdfseradQm9FFhDhbVw%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

Hello,

Actually, Bill had addressed this in his post yesterday [1].
With your example,


one <- rep(1,10)
two <- rep(2,10)
three <- rep(3,10)
mydata <- data.frame(one=one, two=two, three=three)

ColumToDelete <- grep("fo",colnames((mydata)))
ColumToDelete
#> integer(0)
ColumToDeleteLogical <- grepl("fo",colnames((mydata)))
ColumToDeleteLogical
#> [1] FALSE FALSE FALSE

# Drop the column whose name starts with "fo"
# empty data.frame
mydata[, -ColumToDelete]
#> data frame with 0 columns and 10 rows

# nothing is deleted
mydata[, !ColumToDeleteLogical]
#>    one two three
#> 1    1   2     3
#> 2    1   2     3
#> 3    1   2     3
#> 4    1   2     3
#> 5    1   2     3
#> 6    1   2     3
#> 7    1   2     3
#> 8    1   2     3
#> 9    1   2     3
#> 10   1   2     3



[1] https://stat.ethz.ch/pipermail/r-help/2023-January/476682.html


Hope this helps,

Rui Barradas


From r@oknz @end|ng |rom gm@||@com  Mon Jan 16 00:39:07 2023
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Mon, 16 Jan 2023 12:39:07 +1300
Subject: [R] return value of {....}
In-Reply-To: <cf027dca-4bde-4c05-a964-1522025d6532@petzel.at>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
 <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <cf027dca-4bde-4c05-a964-1522025d6532@petzel.at>
Message-ID: <CABcYAdL2WP87USzaSXNeLip2m_yMFRFRPrPq_7pXptW9AnsbZA@mail.gmail.com>

I wonder if the real confusino is not R's scope rules?
(begin .) is not Lisp, it's Scheme (a major Lisp dialect),
and in Scheme, (begin (define x ...) (define y ...) ...)
declares variables x and y that are local to the (begin ...)
form, just like Algol 68.  That's weirdness 1.  Javascript
had a similar weirdness, when the ECMAscript process eventually
addressed.  But the real weirdness in R is not just that the
existence of variables is indifferent to the presence of curly
braces, it's that it's *dynamic*.  In
f <- function (...) {
   ... use x ...
   x <- ...
   ... use x ...
}
the two occurrences of "use x" refer to DIFFERENT variables.
The first occurrence refers to the x that exists outside the
function.  It has to: the local variable does not exist yet.
The assignment *creates* the variable, so the second
occurrence of "use x" refers to the inner variable.
Here's an actual example.
> x <- 137
> f <- function () {
+     a <- x
+     x <- 42
+     b <- x
+     list(a=a, b=b)
+ }
> f()
$a
[1] 137
$b
[1] 42

Many years ago I set out to write a compiler for R, and this was
the issue that finally sank my attempt.  It's not whether the
occurrence of "use x" is *lexically* before the creation of x.
It's when the assignment is *executed* that makes the difference.
Different paths of execution through a function may result in it
arriving at its return point with different sets of local variables.
R is the only language I routinely use that does this.

So rule 1: whether an identifier in an R function refers to an
outer variable or a local variable depends on whether an assignment
creating that local variable has been executed yet.
And rule 2: the scope of a local variable is the whole function.

If the following transcript not only makes sense to you, but is
exactly what you expect, congratulations, you understand local
variables in R.

> x <- 0
> g <- function () {
+     n <- 10
+     r <- numeric(n)
+     for (i in 1:n) {
+         if (i == 6) x <- 100
+         r[i] <- x + i
+     }
+     r
+ }
> g()
 [1]   1   2   3   4   5 106 107 108 109 110


On Fri, 13 Jan 2023 at 23:28, Valentin Petzel <valentin at petzel.at> wrote:

> Hello Akshay,
>
> R is quite inspired by LISP, where this is a common thing. It is not in
> fact that {...} returned something, rather any expression evalulates to
> some value, and for a compound statement that is the last evaluated
> expression.
>
> {...} might be seen as similar to LISPs (begin ...).
>
> Now this is a very different thing compared to {...} in something like C,
> even if it looks or behaves similarly. But in R {...} is in fact an
> expression and thus has evaluate to some value. This also comes with some
> nice benefits.
>
> You do not need to use {...} for anything that is a single statement. But
> you can in each possible place use {...} to turn multiple statements into
> one.
>
> Now think about a statement like this
>
> f <- function(n) {
> x <- runif(n)
> x**2
> }
>
> Then we can do
>
> y <- f(10)
>
> Now, you suggested way would look like this:
>
> f <- function(n) {
> x <- runif(n)
> y <- x**2
> }
>
> And we'd need to do something like:
>
> f(10)
> y <- somehow_get_last_env_of_f$y
>
> So having a compound statement evaluate to a value clearly has a benefit.
>
> Best Regards,
> Valentin
>
> 09.01.2023 18:05:58 akshay kulkarni <akshay_e4 at hotmail.com>:
>
> > Dear Valentin,
> >                           But why should {....} "return" a value? It
> could just as well evaluate all the expressions and store the resulting
> objects in whatever environment the interpreter chooses, and then it would
> be left to the user to manipulate any object he chooses. Don't you think
> returning the last, or any value, is redundant? We are living in the
> 21st century world, and the R-core team might,I suppose, have a definite
> reason for"returning" the last value. Any comments?
> >
> > Thanking you,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> >
> > ----------------------------------------
> > *From:* Valentin Petzel <valentin at petzel.at>
> > *Sent:* Monday, January 9, 2023 9:18 PM
> > *To:* akshay kulkarni <akshay_e4 at hotmail.com>
> > *Cc:* R help Mailing list <r-help at r-project.org>
> > *Subject:* Re: [R] return value of {....}
> >
> > Hello Akshai,
> >
> > I think you are confusing {...} with local({...}). This one will
> evaluate the expression in a separate environment, returning the last
> expression.
> >
> > {...} simply evaluates multiple expressions as one and returns the
> result of the last line, but it still evaluates each expression.
> >
> > Assignment returns the assigned value, so we can chain assignments like
> this
> >
> > a <- 1 + (b <- 2)
> >
> > conveniently.
> >
> > So when is {...} useful? Well, anyplace where you want to execute
> complex stuff in a function argument. E.g. you might do:
> >
> > data %>% group_by(x) %>% summarise(y = {if(x[1] > 10) sum(y) else
> mean(y)})
> >
> > Regards,
> > Valentin Petzel
> >
> > 09.01.2023 15:47:53 akshay kulkarni <akshay_e4 at hotmail.com>:
> >
> >> Dear members,
> >>                              I have the following code:
> >>
> >>> TB <- {x <- 3;y <- 5}
> >>> TB
> >> [1] 5
> >>
> >> It is consistent with the documentation: For {, the result of the last
> expression evaluated. This has the visibility of the last evaluation.
> >>
> >> But both x AND y are created, but the "return value" is y. How can this
> be advantageous for solving practical problems? Specifically, consider the
> following code:
> >>
> >> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
> >>
> >> Both expr5 and expr7 are created, and are accessible by the code
> outside of the nested braces right? But the "return value" of the nested
> braces is expr7. So doesn't this mean that only expr7 should be accessible?
> Please help me entangle this (of course the return value of F is expr10,
> and all the other objects created by the preceding expressions are deleted.
> But expr5 is not, after the control passes outside of the nested braces!)
> >>
> >> Thanking you,
> >> Yours sincerely,
> >> AKSHAY M KULKARNI
> >>
> >>     [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Mon Jan 16 01:40:02 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Mon, 16 Jan 2023 00:40:02 +0000
Subject: [R] return value of {....}
In-Reply-To: <CABcYAdL2WP87USzaSXNeLip2m_yMFRFRPrPq_7pXptW9AnsbZA@mail.gmail.com>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
 <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <cf027dca-4bde-4c05-a964-1522025d6532@petzel.at>
 <CABcYAdL2WP87USzaSXNeLip2m_yMFRFRPrPq_7pXptW9AnsbZA@mail.gmail.com>
Message-ID: <MW4PR03MB636390FD5934FED2BFDD81D9E2C19@MW4PR03MB6363.namprd03.prod.outlook.com>

Richard,
A slight addition to your code shows an important aspect of R, local vs. global variables:

x <- 137
f <- function () {
       a <- x
       x <- 42
       b <- x
       list(a=a, b=b)
   }
 f()
print(x)

________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Richard O'Keefe <raoknz at gmail.com>
Sent: Sunday, January 15, 2023 6:39 PM
To: Valentin Petzel
Cc: R help Mailing list
Subject: Re: [R] return value of {....}

I wonder if the real confusino is not R's scope rules?
(begin .) is not Lisp, it's Scheme (a major Lisp dialect),
and in Scheme, (begin (define x ...) (define y ...) ...)
declares variables x and y that are local to the (begin ...)
form, just like Algol 68.  That's weirdness 1.  Javascript
had a similar weirdness, when the ECMAscript process eventually
addressed.  But the real weirdness in R is not just that the
existence of variables is indifferent to the presence of curly
braces, it's that it's *dynamic*.  In
f <- function (...) {
   ... use x ...
   x <- ...
   ... use x ...
}
the two occurrences of "use x" refer to DIFFERENT variables.
The first occurrence refers to the x that exists outside the
function.  It has to: the local variable does not exist yet.
The assignment *creates* the variable, so the second
occurrence of "use x" refers to the inner variable.
Here's an actual example.
> x <- 137
> f <- function () {
+     a <- x
+     x <- 42
+     b <- x
+     list(a=a, b=b)
+ }
> f()
$a
[1] 137
$b
[1] 42

Many years ago I set out to write a compiler for R, and this was
the issue that finally sank my attempt.  It's not whether the
occurrence of "use x" is *lexically* before the creation of x.
It's when the assignment is *executed* that makes the difference.
Different paths of execution through a function may result in it
arriving at its return point with different sets of local variables.
R is the only language I routinely use that does this.

So rule 1: whether an identifier in an R function refers to an
outer variable or a local variable depends on whether an assignment
creating that local variable has been executed yet.
And rule 2: the scope of a local variable is the whole function.

If the following transcript not only makes sense to you, but is
exactly what you expect, congratulations, you understand local
variables in R.

> x <- 0
> g <- function () {
+     n <- 10
+     r <- numeric(n)
+     for (i in 1:n) {
+         if (i == 6) x <- 100
+         r[i] <- x + i
+     }
+     r
+ }
> g()
 [1]   1   2   3   4   5 106 107 108 109 110


On Fri, 13 Jan 2023 at 23:28, Valentin Petzel <valentin at petzel.at> wrote:

> Hello Akshay,
>
> R is quite inspired by LISP, where this is a common thing. It is not in
> fact that {...} returned something, rather any expression evalulates to
> some value, and for a compound statement that is the last evaluated
> expression.
>
> {...} might be seen as similar to LISPs (begin ...).
>
> Now this is a very different thing compared to {...} in something like C,
> even if it looks or behaves similarly. But in R {...} is in fact an
> expression and thus has evaluate to some value. This also comes with some
> nice benefits.
>
> You do not need to use {...} for anything that is a single statement. But
> you can in each possible place use {...} to turn multiple statements into
> one.
>
> Now think about a statement like this
>
> f <- function(n) {
> x <- runif(n)
> x**2
> }
>
> Then we can do
>
> y <- f(10)
>
> Now, you suggested way would look like this:
>
> f <- function(n) {
> x <- runif(n)
> y <- x**2
> }
>
> And we'd need to do something like:
>
> f(10)
> y <- somehow_get_last_env_of_f$y
>
> So having a compound statement evaluate to a value clearly has a benefit.
>
> Best Regards,
> Valentin
>
> 09.01.2023 18:05:58 akshay kulkarni <akshay_e4 at hotmail.com>:
>
> > Dear Valentin,
> >                           But why should {....} "return" a value? It
> could just as well evaluate all the expressions and store the resulting
> objects in whatever environment the interpreter chooses, and then it would
> be left to the user to manipulate any object he chooses. Don't you think
> returning the last, or any value, is redundant? We are living in the
> 21st century world, and the R-core team might,I suppose, have a definite
> reason for"returning" the last value. Any comments?
> >
> > Thanking you,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> >
> > ----------------------------------------
> > *From:* Valentin Petzel <valentin at petzel.at>
> > *Sent:* Monday, January 9, 2023 9:18 PM
> > *To:* akshay kulkarni <akshay_e4 at hotmail.com>
> > *Cc:* R help Mailing list <r-help at r-project.org>
> > *Subject:* Re: [R] return value of {....}
> >
> > Hello Akshai,
> >
> > I think you are confusing {...} with local({...}). This one will
> evaluate the expression in a separate environment, returning the last
> expression.
> >
> > {...} simply evaluates multiple expressions as one and returns the
> result of the last line, but it still evaluates each expression.
> >
> > Assignment returns the assigned value, so we can chain assignments like
> this
> >
> > a <- 1 + (b <- 2)
> >
> > conveniently.
> >
> > So when is {...} useful? Well, anyplace where you want to execute
> complex stuff in a function argument. E.g. you might do:
> >
> > data %>% group_by(x) %>% summarise(y = {if(x[1] > 10) sum(y) else
> mean(y)})
> >
> > Regards,
> > Valentin Petzel
> >
> > 09.01.2023 15:47:53 akshay kulkarni <akshay_e4 at hotmail.com>:
> >
> >> Dear members,
> >>                              I have the following code:
> >>
> >>> TB <- {x <- 3;y <- 5}
> >>> TB
> >> [1] 5
> >>
> >> It is consistent with the documentation: For {, the result of the last
> expression evaluated. This has the visibility of the last evaluation.
> >>
> >> But both x AND y are created, but the "return value" is y. How can this
> be advantageous for solving practical problems? Specifically, consider the
> following code:
> >>
> >> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
> >>
> >> Both expr5 and expr7 are created, and are accessible by the code
> outside of the nested braces right? But the "return value" of the nested
> braces is expr7. So doesn't this mean that only expr7 should be accessible?
> Please help me entangle this (of course the return value of F is expr10,
> and all the other objects created by the preceding expressions are deleted.
> But expr5 is not, after the control passes outside of the nested braces!)
> >>
> >> Thanking you,
> >> Yours sincerely,
> >> AKSHAY M KULKARNI
> >>
> >>     [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C7667e3a25e004319a09408daf751c352%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094227808126030%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=DYZ1Jle5re1jwM%2F1pVrpS%2BwOeT%2BgjNXQZz0Fq8N4sIU%3D&reserved=0
> >> PLEASE do read the posting guide
> https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C7667e3a25e004319a09408daf751c352%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094227808126030%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=q1Gy%2FTQd0eXsa8fUKW3slt%2Byn7EUfqmOOqPGDoxYx4U%3D&reserved=0
> >> and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C7667e3a25e004319a09408daf751c352%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094227808126030%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=DYZ1Jle5re1jwM%2F1pVrpS%2BwOeT%2BgjNXQZz0Fq8N4sIU%3D&reserved=0
> PLEASE do read the posting guide
> https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C7667e3a25e004319a09408daf751c352%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094227808126030%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=q1Gy%2FTQd0eXsa8fUKW3slt%2Byn7EUfqmOOqPGDoxYx4U%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C7667e3a25e004319a09408daf751c352%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094227808126030%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=DYZ1Jle5re1jwM%2F1pVrpS%2BwOeT%2BgjNXQZz0Fq8N4sIU%3D&reserved=0
PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C7667e3a25e004319a09408daf751c352%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094227808126030%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=q1Gy%2FTQd0eXsa8fUKW3slt%2Byn7EUfqmOOqPGDoxYx4U%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Mon Jan 16 01:55:05 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 15 Jan 2023 16:55:05 -0800
Subject: [R] return value of {....}
In-Reply-To: <CABcYAdL2WP87USzaSXNeLip2m_yMFRFRPrPq_7pXptW9AnsbZA@mail.gmail.com>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
 <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <cf027dca-4bde-4c05-a964-1522025d6532@petzel.at>
 <CABcYAdL2WP87USzaSXNeLip2m_yMFRFRPrPq_7pXptW9AnsbZA@mail.gmail.com>
Message-ID: <CAGxFJbSmc1_f-P-YKM99pvVajx04+p3-gF_ydh_TJ-SE0V-VmQ@mail.gmail.com>

Well, weirdness is in the eyes of the beholder, I think.

In any case, R's scoping procedures are described in ?environment and
?assign and ?function, among other places; and in detail in the R
Language Definition. So no matter the behavior, as long as it is
clearly documented -- and consistent of course -- it's OK by me: it's
my job to learn it. Perhaps this just reflects my ignorance of what
might be considered "better" alternatives.

And of course, someone *did* write a compiler for R.

Cheers,
Bert

On Sun, Jan 15, 2023 at 3:39 PM Richard O'Keefe <raoknz at gmail.com> wrote:
>
> I wonder if the real confusino is not R's scope rules?
> (begin .) is not Lisp, it's Scheme (a major Lisp dialect),
> and in Scheme, (begin (define x ...) (define y ...) ...)
> declares variables x and y that are local to the (begin ...)
> form, just like Algol 68.  That's weirdness 1.  Javascript
> had a similar weirdness, when the ECMAscript process eventually
> addressed.  But the real weirdness in R is not just that the
> existence of variables is indifferent to the presence of curly
> braces, it's that it's *dynamic*.  In
> f <- function (...) {
>    ... use x ...
>    x <- ...
>    ... use x ...
> }
> the two occurrences of "use x" refer to DIFFERENT variables.
> The first occurrence refers to the x that exists outside the
> function.  It has to: the local variable does not exist yet.
> The assignment *creates* the variable, so the second
> occurrence of "use x" refers to the inner variable.
> Here's an actual example.
> > x <- 137
> > f <- function () {
> +     a <- x
> +     x <- 42
> +     b <- x
> +     list(a=a, b=b)
> + }
> > f()
> $a
> [1] 137
> $b
> [1] 42
>
> Many years ago I set out to write a compiler for R, and this was
> the issue that finally sank my attempt.  It's not whether the
> occurrence of "use x" is *lexically* before the creation of x.
> It's when the assignment is *executed* that makes the difference.
> Different paths of execution through a function may result in it
> arriving at its return point with different sets of local variables.
> R is the only language I routinely use that does this.
>
> So rule 1: whether an identifier in an R function refers to an
> outer variable or a local variable depends on whether an assignment
> creating that local variable has been executed yet.
> And rule 2: the scope of a local variable is the whole function.
>
> If the following transcript not only makes sense to you, but is
> exactly what you expect, congratulations, you understand local
> variables in R.
>
> > x <- 0
> > g <- function () {
> +     n <- 10
> +     r <- numeric(n)
> +     for (i in 1:n) {
> +         if (i == 6) x <- 100
> +         r[i] <- x + i
> +     }
> +     r
> + }
> > g()
>  [1]   1   2   3   4   5 106 107 108 109 110
>
>
> On Fri, 13 Jan 2023 at 23:28, Valentin Petzel <valentin at petzel.at> wrote:
>
> > Hello Akshay,
> >
> > R is quite inspired by LISP, where this is a common thing. It is not in
> > fact that {...} returned something, rather any expression evalulates to
> > some value, and for a compound statement that is the last evaluated
> > expression.
> >
> > {...} might be seen as similar to LISPs (begin ...).
> >
> > Now this is a very different thing compared to {...} in something like C,
> > even if it looks or behaves similarly. But in R {...} is in fact an
> > expression and thus has evaluate to some value. This also comes with some
> > nice benefits.
> >
> > You do not need to use {...} for anything that is a single statement. But
> > you can in each possible place use {...} to turn multiple statements into
> > one.
> >
> > Now think about a statement like this
> >
> > f <- function(n) {
> > x <- runif(n)
> > x**2
> > }
> >
> > Then we can do
> >
> > y <- f(10)
> >
> > Now, you suggested way would look like this:
> >
> > f <- function(n) {
> > x <- runif(n)
> > y <- x**2
> > }
> >
> > And we'd need to do something like:
> >
> > f(10)
> > y <- somehow_get_last_env_of_f$y
> >
> > So having a compound statement evaluate to a value clearly has a benefit.
> >
> > Best Regards,
> > Valentin
> >
> > 09.01.2023 18:05:58 akshay kulkarni <akshay_e4 at hotmail.com>:
> >
> > > Dear Valentin,
> > >                           But why should {....} "return" a value? It
> > could just as well evaluate all the expressions and store the resulting
> > objects in whatever environment the interpreter chooses, and then it would
> > be left to the user to manipulate any object he chooses. Don't you think
> > returning the last, or any value, is redundant? We are living in the
> > 21st century world, and the R-core team might,I suppose, have a definite
> > reason for"returning" the last value. Any comments?
> > >
> > > Thanking you,
> > > Yours sincerely,
> > > AKSHAY M KULKARNI
> > >
> > > ----------------------------------------
> > > *From:* Valentin Petzel <valentin at petzel.at>
> > > *Sent:* Monday, January 9, 2023 9:18 PM
> > > *To:* akshay kulkarni <akshay_e4 at hotmail.com>
> > > *Cc:* R help Mailing list <r-help at r-project.org>
> > > *Subject:* Re: [R] return value of {....}
> > >
> > > Hello Akshai,
> > >
> > > I think you are confusing {...} with local({...}). This one will
> > evaluate the expression in a separate environment, returning the last
> > expression.
> > >
> > > {...} simply evaluates multiple expressions as one and returns the
> > result of the last line, but it still evaluates each expression.
> > >
> > > Assignment returns the assigned value, so we can chain assignments like
> > this
> > >
> > > a <- 1 + (b <- 2)
> > >
> > > conveniently.
> > >
> > > So when is {...} useful? Well, anyplace where you want to execute
> > complex stuff in a function argument. E.g. you might do:
> > >
> > > data %>% group_by(x) %>% summarise(y = {if(x[1] > 10) sum(y) else
> > mean(y)})
> > >
> > > Regards,
> > > Valentin Petzel
> > >
> > > 09.01.2023 15:47:53 akshay kulkarni <akshay_e4 at hotmail.com>:
> > >
> > >> Dear members,
> > >>                              I have the following code:
> > >>
> > >>> TB <- {x <- 3;y <- 5}
> > >>> TB
> > >> [1] 5
> > >>
> > >> It is consistent with the documentation: For {, the result of the last
> > expression evaluated. This has the visibility of the last evaluation.
> > >>
> > >> But both x AND y are created, but the "return value" is y. How can this
> > be advantageous for solving practical problems? Specifically, consider the
> > following code:
> > >>
> > >> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
> > >>
> > >> Both expr5 and expr7 are created, and are accessible by the code
> > outside of the nested braces right? But the "return value" of the nested
> > braces is expr7. So doesn't this mean that only expr7 should be accessible?
> > Please help me entangle this (of course the return value of F is expr10,
> > and all the other objects created by the preceding expressions are deleted.
> > But expr5 is not, after the control passes outside of the nested braces!)
> > >>
> > >> Thanking you,
> > >> Yours sincerely,
> > >> AKSHAY M KULKARNI
> > >>
> > >>     [[alternative HTML version deleted]]
> > >>
> > >> ______________________________________________
> > >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >> https://stat.ethz.ch/mailman/listinfo/r-help
> > >> PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > >> and provide commented, minimal, self-contained, reproducible code.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Mon Jan 16 02:07:34 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Mon, 16 Jan 2023 01:07:34 +0000
Subject: [R] return value of {....}
In-Reply-To: <MW4PR03MB636390FD5934FED2BFDD81D9E2C19@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
 <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <cf027dca-4bde-4c05-a964-1522025d6532@petzel.at>
 <CABcYAdL2WP87USzaSXNeLip2m_yMFRFRPrPq_7pXptW9AnsbZA@mail.gmail.com>
 <MW4PR03MB636390FD5934FED2BFDD81D9E2C19@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <MW4PR03MB63634102EDFD608D21BCE633E2C19@MW4PR03MB6363.namprd03.prod.outlook.com>

Richard,
I sent my prior email too quickly:

A slight addition to your code shows an important aspect of R, local vs. global variables:

x <- 137
f <- function () {
       a <- x
       x <- 42
       b <- x
       list(a=a, b=b)
   }
 f()
print(x)

When run the program produces the following:

> x <- 137
> f <- function () {
+        a <- x
+        x <- 42
+        b <- x
+        list(a=a, b=b)
+    }
>  f()
$a
[1] 137

$b
[1] 42

> print(x)
[1] 137

The fist x, a <- x, invokes an x variable that is GLOBAL. It is known both inside and outside the function.
The second x, x <- 42, defines an x that is LOCAL to the function, it is not known to the program that called the function. The LOCAL value of x is used in the expression  b <- x. As can be seen by the print(x) statement, the LOCAL value of x is NOT known by the program that calls the function. The class of a variable, scoping (i.e. local vs. variable) can be a source of subtle programming errors. A general recommendation is to AVOID use of a global variable in a function, i.e. don't use a variable in function that is not passed as a parameter to the function (as was done in the function above in the statment a <- x). If you need to use a variable in a function that is known by the program that calls the function, pass the variable as a argument to the function e.g. 

Use this code:

# Set values needed by function
y <- 2
b <- 30

myfunction <- function(a,b){
cat("a=",a,"b=",b,"\n")
  y <- a
  y2 <- y+b
  cat("y=",y,"y2=",y2,"\n")
}
# Call the function and pass all needed values to the function
myfunction(y,b)
 
Don't use the following code that depends on a global value that is known to the function, but not passed as a parameter to the function:

y <- 2
myNGfunction <- function(a){
  cat("a=",a,"b=",b,"\n")
  y <- a
  y2 <- y+b
  cat("y=",y,"y2=",y2,"\n")
}
# b is a global variable and will be know to the function, 
# but should be passed as a parameter as in example above.
b <- 100
myNGfunction(y)

John

________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Sorkin, John <jsorkin at som.umaryland.edu>
Sent: Sunday, January 15, 2023 7:40 PM
To: Richard O'Keefe; Valentin Petzel
Cc: R help Mailing list
Subject: Re: [R] return value of {....}

Richard,
A slight addition to your code shows an important aspect of R, local vs. global variables:

x <- 137
f <- function () {
       a <- x
       x <- 42
       b <- x
       list(a=a, b=b)
   }
 f()
print(x)

________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Richard O'Keefe <raoknz at gmail.com>
Sent: Sunday, January 15, 2023 6:39 PM
To: Valentin Petzel
Cc: R help Mailing list
Subject: Re: [R] return value of {....}

I wonder if the real confusino is not R's scope rules?
(begin .) is not Lisp, it's Scheme (a major Lisp dialect),
and in Scheme, (begin (define x ...) (define y ...) ...)
declares variables x and y that are local to the (begin ...)
form, just like Algol 68.  That's weirdness 1.  Javascript
had a similar weirdness, when the ECMAscript process eventually
addressed.  But the real weirdness in R is not just that the
existence of variables is indifferent to the presence of curly
braces, it's that it's *dynamic*.  In
f <- function (...) {
   ... use x ...
   x <- ...
   ... use x ...
}
the two occurrences of "use x" refer to DIFFERENT variables.
The first occurrence refers to the x that exists outside the
function.  It has to: the local variable does not exist yet.
The assignment *creates* the variable, so the second
occurrence of "use x" refers to the inner variable.
Here's an actual example.
> x <- 137
> f <- function () {
+     a <- x
+     x <- 42
+     b <- x
+     list(a=a, b=b)
+ }
> f()
$a
[1] 137
$b
[1] 42

Many years ago I set out to write a compiler for R, and this was
the issue that finally sank my attempt.  It's not whether the
occurrence of "use x" is *lexically* before the creation of x.
It's when the assignment is *executed* that makes the difference.
Different paths of execution through a function may result in it
arriving at its return point with different sets of local variables.
R is the only language I routinely use that does this.

So rule 1: whether an identifier in an R function refers to an
outer variable or a local variable depends on whether an assignment
creating that local variable has been executed yet.
And rule 2: the scope of a local variable is the whole function.

If the following transcript not only makes sense to you, but is
exactly what you expect, congratulations, you understand local
variables in R.

> x <- 0
> g <- function () {
+     n <- 10
+     r <- numeric(n)
+     for (i in 1:n) {
+         if (i == 6) x <- 100
+         r[i] <- x + i
+     }
+     r
+ }
> g()
 [1]   1   2   3   4   5 106 107 108 109 110


On Fri, 13 Jan 2023 at 23:28, Valentin Petzel <valentin at petzel.at> wrote:

> Hello Akshay,
>
> R is quite inspired by LISP, where this is a common thing. It is not in
> fact that {...} returned something, rather any expression evalulates to
> some value, and for a compound statement that is the last evaluated
> expression.
>
> {...} might be seen as similar to LISPs (begin ...).
>
> Now this is a very different thing compared to {...} in something like C,
> even if it looks or behaves similarly. But in R {...} is in fact an
> expression and thus has evaluate to some value. This also comes with some
> nice benefits.
>
> You do not need to use {...} for anything that is a single statement. But
> you can in each possible place use {...} to turn multiple statements into
> one.
>
> Now think about a statement like this
>
> f <- function(n) {
> x <- runif(n)
> x**2
> }
>
> Then we can do
>
> y <- f(10)
>
> Now, you suggested way would look like this:
>
> f <- function(n) {
> x <- runif(n)
> y <- x**2
> }
>
> And we'd need to do something like:
>
> f(10)
> y <- somehow_get_last_env_of_f$y
>
> So having a compound statement evaluate to a value clearly has a benefit.
>
> Best Regards,
> Valentin
>
> 09.01.2023 18:05:58 akshay kulkarni <akshay_e4 at hotmail.com>:
>
> > Dear Valentin,
> >                           But why should {....} "return" a value? It
> could just as well evaluate all the expressions and store the resulting
> objects in whatever environment the interpreter chooses, and then it would
> be left to the user to manipulate any object he chooses. Don't you think
> returning the last, or any value, is redundant? We are living in the
> 21st century world, and the R-core team might,I suppose, have a definite
> reason for"returning" the last value. Any comments?
> >
> > Thanking you,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> >
> > ----------------------------------------
> > *From:* Valentin Petzel <valentin at petzel.at>
> > *Sent:* Monday, January 9, 2023 9:18 PM
> > *To:* akshay kulkarni <akshay_e4 at hotmail.com>
> > *Cc:* R help Mailing list <r-help at r-project.org>
> > *Subject:* Re: [R] return value of {....}
> >
> > Hello Akshai,
> >
> > I think you are confusing {...} with local({...}). This one will
> evaluate the expression in a separate environment, returning the last
> expression.
> >
> > {...} simply evaluates multiple expressions as one and returns the
> result of the last line, but it still evaluates each expression.
> >
> > Assignment returns the assigned value, so we can chain assignments like
> this
> >
> > a <- 1 + (b <- 2)
> >
> > conveniently.
> >
> > So when is {...} useful? Well, anyplace where you want to execute
> complex stuff in a function argument. E.g. you might do:
> >
> > data %>% group_by(x) %>% summarise(y = {if(x[1] > 10) sum(y) else
> mean(y)})
> >
> > Regards,
> > Valentin Petzel
> >
> > 09.01.2023 15:47:53 akshay kulkarni <akshay_e4 at hotmail.com>:
> >
> >> Dear members,
> >>                              I have the following code:
> >>
> >>> TB <- {x <- 3;y <- 5}
> >>> TB
> >> [1] 5
> >>
> >> It is consistent with the documentation: For {, the result of the last
> expression evaluated. This has the visibility of the last evaluation.
> >>
> >> But both x AND y are created, but the "return value" is y. How can this
> be advantageous for solving practical problems? Specifically, consider the
> following code:
> >>
> >> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
> >>
> >> Both expr5 and expr7 are created, and are accessible by the code
> outside of the nested braces right? But the "return value" of the nested
> braces is expr7. So doesn't this mean that only expr7 should be accessible?
> Please help me entangle this (of course the return value of F is expr10,
> and all the other objects created by the preceding expressions are deleted.
> But expr5 is not, after the control passes outside of the nested braces!)
> >>
> >> Thanking you,
> >> Yours sincerely,
> >> AKSHAY M KULKARNI
> >>
> >>     [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Jp7JGV%2BVKkAx3SI%2Fak%2BiEIkUraGyQBTfSLWqRRUYmaQ%3D&reserved=0
> >> PLEASE do read the posting guide
> https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Got4ab%2BEO6LD%2FOXqp9j9ImnSn0zi8vhV6YZMD7OJ8WU%3D&reserved=0
> >> and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Jp7JGV%2BVKkAx3SI%2Fak%2BiEIkUraGyQBTfSLWqRRUYmaQ%3D&reserved=0
> PLEASE do read the posting guide
> https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Got4ab%2BEO6LD%2FOXqp9j9ImnSn0zi8vhV6YZMD7OJ8WU%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Jp7JGV%2BVKkAx3SI%2Fak%2BiEIkUraGyQBTfSLWqRRUYmaQ%3D&reserved=0
PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Got4ab%2BEO6LD%2FOXqp9j9ImnSn0zi8vhV6YZMD7OJ8WU%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Jp7JGV%2BVKkAx3SI%2Fak%2BiEIkUraGyQBTfSLWqRRUYmaQ%3D&reserved=0
PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Got4ab%2BEO6LD%2FOXqp9j9ImnSn0zi8vhV6YZMD7OJ8WU%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.


From bgunter@4567 @end|ng |rom gm@||@com  Mon Jan 16 02:49:52 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Sun, 15 Jan 2023 17:49:52 -0800
Subject: [R] return value of {....}
In-Reply-To: <MW4PR03MB63634102EDFD608D21BCE633E2C19@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
 <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <cf027dca-4bde-4c05-a964-1522025d6532@petzel.at>
 <CABcYAdL2WP87USzaSXNeLip2m_yMFRFRPrPq_7pXptW9AnsbZA@mail.gmail.com>
 <MW4PR03MB636390FD5934FED2BFDD81D9E2C19@MW4PR03MB6363.namprd03.prod.outlook.com>
 <MW4PR03MB63634102EDFD608D21BCE633E2C19@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <CAGxFJbQxEw+C6CG8OuEB_C3BH02fm92H+pZt_yD1ou_xaAm3cQ@mail.gmail.com>

Sorry, John. If I understand you correctly, R has no "Global
Variables" in the sense that you seem to indicate. It does have a
"Global environment", but variables referred to in a function but not
found in the function environment are *not* necessarily searched for
in the "Global Environment" -- they are searched for in the function's
enclosing (defining) environment, then in that environment's enclosing
environment if not found there, etc.

Consider:
f <- f <- function(){
   x <- 3
   g <- function() x  ## x not bound to a value in g's environment
   g ## f returns the function g
}
> environment()
<environment: R_GlobalEnv>
x <- 5 ## defined in the Global environment
g <- f()
## Now what do you think g() returns?

If I have misconstrued what you said, my apologies.
Even if I have not, none of the above is revelatory -- it's all
standard, documented R behavior.

Cheers,
Bert

Cheers,
Bert



while something like d$something <- ... may seem like you're directly
modifying the data it does not actually do so. Most R objects try to
be immutable, that is, the object may not change after creation. This
guarantees that if you have a binding for same object the object won't
change sneakily.

There is a data structure that is in fact mutable which are
environments. For example compare

L <- list()
local({L$a <- 3})
L$a

with

E <- new.env()
local({E$a <- 3})
E$

Valentin Petzel valentin at petzel.at via r-project.org

2:25 AM (5 hours ago)


to avi.e.gross, R-help

On Sun, Jan 15, 2023 at 5:07 PM Sorkin, John <jsorkin at som.umaryland.edu> wrote:
>
> Richard,
> I sent my prior email too quickly:
>
> A slight addition to your code shows an important aspect of R, local vs. global variables:
>
> x <- 137
> f <- function () {
>        a <- x
>        x <- 42
>        b <- x
>        list(a=a, b=b)
>    }
>  f()
> print(x)
>
> When run the program produces the following:
>
> > x <- 137
> > f <- function () {
> +        a <- x
> +        x <- 42
> +        b <- x
> +        list(a=a, b=b)
> +    }
> >  f()
> $a
> [1] 137
>
> $b
> [1] 42
>
> > print(x)
> [1] 137
>
> The fist x, a <- x, invokes an x variable that is GLOBAL. It is known both inside and outside the function.
> The second x, x <- 42, defines an x that is LOCAL to the function, it is not known to the program that called the function. The LOCAL value of x is used in the expression  b <- x. As can be seen by the print(x) statement, the LOCAL value of x is NOT known by the program that calls the function. The class of a variable, scoping (i.e. local vs. variable) can be a source of subtle programming errors. A general recommendation is to AVOID use of a global variable in a function, i.e. don't use a variable in function that is not passed as a parameter to the function (as was done in the function above in the statment a <- x). If you need to use a variable in a function that is known by the program that calls the function, pass the variable as a argument to the function e.g.
>
> Use this code:
>
> # Set values needed by function
> y <- 2
> b <- 30
>
> myfunction <- function(a,b){
> cat("a=",a,"b=",b,"\n")
>   y <- a
>   y2 <- y+b
>   cat("y=",y,"y2=",y2,"\n")
> }
> # Call the function and pass all needed values to the function
> myfunction(y,b)
>
> Don't use the following code that depends on a global value that is known to the function, but not passed as a parameter to the function:
>
> y <- 2
> myNGfunction <- function(a){
>   cat("a=",a,"b=",b,"\n")
>   y <- a
>   y2 <- y+b
>   cat("y=",y,"y2=",y2,"\n")
> }
> # b is a global variable and will be know to the function,
> # but should be passed as a parameter as in example above.
> b <- 100
> myNGfunction(y)
>
> John
>
> ________________________________________
> From: R-help <r-help-bounces at r-project.org> on behalf of Sorkin, John <jsorkin at som.umaryland.edu>
> Sent: Sunday, January 15, 2023 7:40 PM
> To: Richard O'Keefe; Valentin Petzel
> Cc: R help Mailing list
> Subject: Re: [R] return value of {....}
>
> Richard,
> A slight addition to your code shows an important aspect of R, local vs. global variables:
>
> x <- 137
> f <- function () {
>        a <- x
>        x <- 42
>        b <- x
>        list(a=a, b=b)
>    }
>  f()
> print(x)
>
> ________________________________________
> From: R-help <r-help-bounces at r-project.org> on behalf of Richard O'Keefe <raoknz at gmail.com>
> Sent: Sunday, January 15, 2023 6:39 PM
> To: Valentin Petzel
> Cc: R help Mailing list
> Subject: Re: [R] return value of {....}
>
> I wonder if the real confusino is not R's scope rules?
> (begin .) is not Lisp, it's Scheme (a major Lisp dialect),
> and in Scheme, (begin (define x ...) (define y ...) ...)
> declares variables x and y that are local to the (begin ...)
> form, just like Algol 68.  That's weirdness 1.  Javascript
> had a similar weirdness, when the ECMAscript process eventually
> addressed.  But the real weirdness in R is not just that the
> existence of variables is indifferent to the presence of curly
> braces, it's that it's *dynamic*.  In
> f <- function (...) {
>    ... use x ...
>    x <- ...
>    ... use x ...
> }
> the two occurrences of "use x" refer to DIFFERENT variables.
> The first occurrence refers to the x that exists outside the
> function.  It has to: the local variable does not exist yet.
> The assignment *creates* the variable, so the second
> occurrence of "use x" refers to the inner variable.
> Here's an actual example.
> > x <- 137
> > f <- function () {
> +     a <- x
> +     x <- 42
> +     b <- x
> +     list(a=a, b=b)
> + }
> > f()
> $a
> [1] 137
> $b
> [1] 42
>
> Many years ago I set out to write a compiler for R, and this was
> the issue that finally sank my attempt.  It's not whether the
> occurrence of "use x" is *lexically* before the creation of x.
> It's when the assignment is *executed* that makes the difference.
> Different paths of execution through a function may result in it
> arriving at its return point with different sets of local variables.
> R is the only language I routinely use that does this.
>
> So rule 1: whether an identifier in an R function refers to an
> outer variable or a local variable depends on whether an assignment
> creating that local variable has been executed yet.
> And rule 2: the scope of a local variable is the whole function.
>
> If the following transcript not only makes sense to you, but is
> exactly what you expect, congratulations, you understand local
> variables in R.
>
> > x <- 0
> > g <- function () {
> +     n <- 10
> +     r <- numeric(n)
> +     for (i in 1:n) {
> +         if (i == 6) x <- 100
> +         r[i] <- x + i
> +     }
> +     r
> + }
> > g()
>  [1]   1   2   3   4   5 106 107 108 109 110
>
>
> On Fri, 13 Jan 2023 at 23:28, Valentin Petzel <valentin at petzel.at> wrote:
>
> > Hello Akshay,
> >
> > R is quite inspired by LISP, where this is a common thing. It is not in
> > fact that {...} returned something, rather any expression evalulates to
> > some value, and for a compound statement that is the last evaluated
> > expression.
> >
> > {...} might be seen as similar to LISPs (begin ...).
> >
> > Now this is a very different thing compared to {...} in something like C,
> > even if it looks or behaves similarly. But in R {...} is in fact an
> > expression and thus has evaluate to some value. This also comes with some
> > nice benefits.
> >
> > You do not need to use {...} for anything that is a single statement. But
> > you can in each possible place use {...} to turn multiple statements into
> > one.
> >
> > Now think about a statement like this
> >
> > f <- function(n) {
> > x <- runif(n)
> > x**2
> > }
> >
> > Then we can do
> >
> > y <- f(10)
> >
> > Now, you suggested way would look like this:
> >
> > f <- function(n) {
> > x <- runif(n)
> > y <- x**2
> > }
> >
> > And we'd need to do something like:
> >
> > f(10)
> > y <- somehow_get_last_env_of_f$y
> >
> > So having a compound statement evaluate to a value clearly has a benefit.
> >
> > Best Regards,
> > Valentin
> >
> > 09.01.2023 18:05:58 akshay kulkarni <akshay_e4 at hotmail.com>:
> >
> > > Dear Valentin,
> > >                           But why should {....} "return" a value? It
> > could just as well evaluate all the expressions and store the resulting
> > objects in whatever environment the interpreter chooses, and then it would
> > be left to the user to manipulate any object he chooses. Don't you think
> > returning the last, or any value, is redundant? We are living in the
> > 21st century world, and the R-core team might,I suppose, have a definite
> > reason for"returning" the last value. Any comments?
> > >
> > > Thanking you,
> > > Yours sincerely,
> > > AKSHAY M KULKARNI
> > >
> > > ----------------------------------------
> > > *From:* Valentin Petzel <valentin at petzel.at>
> > > *Sent:* Monday, January 9, 2023 9:18 PM
> > > *To:* akshay kulkarni <akshay_e4 at hotmail.com>
> > > *Cc:* R help Mailing list <r-help at r-project.org>
> > > *Subject:* Re: [R] return value of {....}
> > >
> > > Hello Akshai,
> > >
> > > I think you are confusing {...} with local({...}). This one will
> > evaluate the expression in a separate environment, returning the last
> > expression.
> > >
> > > {...} simply evaluates multiple expressions as one and returns the
> > result of the last line, but it still evaluates each expression.
> > >
> > > Assignment returns the assigned value, so we can chain assignments like
> > this
> > >
> > > a <- 1 + (b <- 2)
> > >
> > > conveniently.
> > >
> > > So when is {...} useful? Well, anyplace where you want to execute
> > complex stuff in a function argument. E.g. you might do:
> > >
> > > data %>% group_by(x) %>% summarise(y = {if(x[1] > 10) sum(y) else
> > mean(y)})
> > >
> > > Regards,
> > > Valentin Petzel
> > >
> > > 09.01.2023 15:47:53 akshay kulkarni <akshay_e4 at hotmail.com>:
> > >
> > >> Dear members,
> > >>                              I have the following code:
> > >>
> > >>> TB <- {x <- 3;y <- 5}
> > >>> TB
> > >> [1] 5
> > >>
> > >> It is consistent with the documentation: For {, the result of the last
> > expression evaluated. This has the visibility of the last evaluation.
> > >>
> > >> But both x AND y are created, but the "return value" is y. How can this
> > be advantageous for solving practical problems? Specifically, consider the
> > following code:
> > >>
> > >> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
> > >>
> > >> Both expr5 and expr7 are created, and are accessible by the code
> > outside of the nested braces right? But the "return value" of the nested
> > braces is expr7. So doesn't this mean that only expr7 should be accessible?
> > Please help me entangle this (of course the return value of F is expr10,
> > and all the other objects created by the preceding expressions are deleted.
> > But expr5 is not, after the control passes outside of the nested braces!)
> > >>
> > >> Thanking you,
> > >> Yours sincerely,
> > >> AKSHAY M KULKARNI
> > >>
> > >>     [[alternative HTML version deleted]]
> > >>
> > >> ______________________________________________
> > >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > >> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Jp7JGV%2BVKkAx3SI%2Fak%2BiEIkUraGyQBTfSLWqRRUYmaQ%3D&reserved=0
> > >> PLEASE do read the posting guide
> > https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Got4ab%2BEO6LD%2FOXqp9j9ImnSn0zi8vhV6YZMD7OJ8WU%3D&reserved=0
> > >> and provide commented, minimal, self-contained, reproducible code.
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Jp7JGV%2BVKkAx3SI%2Fak%2BiEIkUraGyQBTfSLWqRRUYmaQ%3D&reserved=0
> > PLEASE do read the posting guide
> > https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Got4ab%2BEO6LD%2FOXqp9j9ImnSn0zi8vhV6YZMD7OJ8WU%3D&reserved=0
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Jp7JGV%2BVKkAx3SI%2Fak%2BiEIkUraGyQBTfSLWqRRUYmaQ%3D&reserved=0
> PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Got4ab%2BEO6LD%2FOXqp9j9ImnSn0zi8vhV6YZMD7OJ8WU%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Jp7JGV%2BVKkAx3SI%2Fak%2BiEIkUraGyQBTfSLWqRRUYmaQ%3D&reserved=0
> PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Got4ab%2BEO6LD%2FOXqp9j9ImnSn0zi8vhV6YZMD7OJ8WU%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @vi@e@gross m@iii@g oii gm@ii@com  Mon Jan 16 03:20:26 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Sun, 15 Jan 2023 21:20:26 -0500
Subject: [R] return value of {....}
In-Reply-To: <CABcYAdL2WP87USzaSXNeLip2m_yMFRFRPrPq_7pXptW9AnsbZA@mail.gmail.com>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
 <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <cf027dca-4bde-4c05-a964-1522025d6532@petzel.at>
 <CABcYAdL2WP87USzaSXNeLip2m_yMFRFRPrPq_7pXptW9AnsbZA@mail.gmail.com>
Message-ID: <003401d92951$18e2b220$4aa81660$@gmail.com>

Richard,

I appreciate your observations. As regularly noted, there are many possible
forks in the road to designing a language and it seems someone is determined
to try every possible fork.

Yes, some languages that are compiled, or like JavaScript, read the entire
function before executing it and promote some parts written further down to
the top so all variable declarations, as one example, are done before
executing any remaining code. If you look at R, if you decide to use a
library, you can ask for it near the top or just before you want to use it.
I think they get executed as needed so if you only load it in one branch of
an IF statement, ...

We can debate good and bad subjective choices in language design BUT for
practical purposes, what matters is that a feature IS a certain way and you
use it consistently with what is documented, not what you wish it was like.
R has an interpreter that arguably may be simple and keep reading small
sections of code and executing them and then getting more. Much of the code
is not even evaluated till much later or never and thus it may not be
trivial to do any kind of look-ahead and adjustment.

Many languages now look a bit silly after some changes are made or things
added that make the earlier way look clumsy. Some features may even be
deprecated and eventually removed, or the language forks again and people
argue that everyone should upgrade to the new version 12.x and so on.

Do note R lets you use rm(x) and also supports multiple environments
including new dynamic ones  so your example might have a region where an x
is used in quite a few ways such as asking some function call to be
evaluated in a specific environment. This flexibility would be harder if you
asked the interpreter to do things like some other languages that may not
support much. However, lots of languages with scoping rules will indeed
allow you to use variables in outer scopes or hidden scopes and so on. To
each their own.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Richard O'Keefe
Sent: Sunday, January 15, 2023 6:39 PM
To: Valentin Petzel <valentin at petzel.at>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] return value of {....}

I wonder if the real confusino is not R's scope rules?
(begin .) is not Lisp, it's Scheme (a major Lisp dialect), and in Scheme,
(begin (define x ...) (define y ...) ...) declares variables x and y that
are local to the (begin ...) form, just like Algol 68.  That's weirdness 1.
Javascript had a similar weirdness, when the ECMAscript process eventually
addressed.  But the real weirdness in R is not just that the existence of
variables is indifferent to the presence of curly braces, it's that it's
*dynamic*.  In f <- function (...) {
   ... use x ...
   x <- ...
   ... use x ...
}
the two occurrences of "use x" refer to DIFFERENT variables.
The first occurrence refers to the x that exists outside the function.  It
has to: the local variable does not exist yet.
The assignment *creates* the variable, so the second occurrence of "use x"
refers to the inner variable.
Here's an actual example.
> x <- 137
> f <- function () {
+     a <- x
+     x <- 42
+     b <- x
+     list(a=a, b=b)
+ }
> f()
$a
[1] 137
$b
[1] 42

Many years ago I set out to write a compiler for R, and this was the issue
that finally sank my attempt.  It's not whether the occurrence of "use x" is
*lexically* before the creation of x.
It's when the assignment is *executed* that makes the difference.
Different paths of execution through a function may result in it arriving at
its return point with different sets of local variables.
R is the only language I routinely use that does this.

So rule 1: whether an identifier in an R function refers to an outer
variable or a local variable depends on whether an assignment creating that
local variable has been executed yet.
And rule 2: the scope of a local variable is the whole function.

If the following transcript not only makes sense to you, but is exactly what
you expect, congratulations, you understand local variables in R.

> x <- 0
> g <- function () {
+     n <- 10
+     r <- numeric(n)
+     for (i in 1:n) {
+         if (i == 6) x <- 100
+         r[i] <- x + i
+     }
+     r
+ }
> g()
 [1]   1   2   3   4   5 106 107 108 109 110


On Fri, 13 Jan 2023 at 23:28, Valentin Petzel <valentin at petzel.at> wrote:

> Hello Akshay,
>
> R is quite inspired by LISP, where this is a common thing. It is not 
> in fact that {...} returned something, rather any expression 
> evalulates to some value, and for a compound statement that is the 
> last evaluated expression.
>
> {...} might be seen as similar to LISPs (begin ...).
>
> Now this is a very different thing compared to {...} in something like 
> C, even if it looks or behaves similarly. But in R {...} is in fact an 
> expression and thus has evaluate to some value. This also comes with 
> some nice benefits.
>
> You do not need to use {...} for anything that is a single statement. 
> But you can in each possible place use {...} to turn multiple 
> statements into one.
>
> Now think about a statement like this
>
> f <- function(n) {
> x <- runif(n)
> x**2
> }
>
> Then we can do
>
> y <- f(10)
>
> Now, you suggested way would look like this:
>
> f <- function(n) {
> x <- runif(n)
> y <- x**2
> }
>
> And we'd need to do something like:
>
> f(10)
> y <- somehow_get_last_env_of_f$y
>
> So having a compound statement evaluate to a value clearly has a benefit.
>
> Best Regards,
> Valentin
>
> 09.01.2023 18:05:58 akshay kulkarni <akshay_e4 at hotmail.com>:
>
> > Dear Valentin,
> >                           But why should {....} "return" a value? It
> could just as well evaluate all the expressions and store the 
> resulting objects in whatever environment the interpreter chooses, and 
> then it would be left to the user to manipulate any object he chooses. 
> Don't you think returning the last, or any value, is redundant? We are 
> living in the 21st century world, and the R-core team might,I suppose, 
> have a definite reason for"returning" the last value. Any comments?
> >
> > Thanking you,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> >
> > ----------------------------------------
> > *From:* Valentin Petzel <valentin at petzel.at>
> > *Sent:* Monday, January 9, 2023 9:18 PM
> > *To:* akshay kulkarni <akshay_e4 at hotmail.com>
> > *Cc:* R help Mailing list <r-help at r-project.org>
> > *Subject:* Re: [R] return value of {....}
> >
> > Hello Akshai,
> >
> > I think you are confusing {...} with local({...}). This one will
> evaluate the expression in a separate environment, returning the last 
> expression.
> >
> > {...} simply evaluates multiple expressions as one and returns the
> result of the last line, but it still evaluates each expression.
> >
> > Assignment returns the assigned value, so we can chain assignments 
> > like
> this
> >
> > a <- 1 + (b <- 2)
> >
> > conveniently.
> >
> > So when is {...} useful? Well, anyplace where you want to execute
> complex stuff in a function argument. E.g. you might do:
> >
> > data %>% group_by(x) %>% summarise(y = {if(x[1] > 10) sum(y) else
> mean(y)})
> >
> > Regards,
> > Valentin Petzel
> >
> > 09.01.2023 15:47:53 akshay kulkarni <akshay_e4 at hotmail.com>:
> >
> >> Dear members,
> >>                              I have the following code:
> >>
> >>> TB <- {x <- 3;y <- 5}
> >>> TB
> >> [1] 5
> >>
> >> It is consistent with the documentation: For {, the result of the 
> >> last
> expression evaluated. This has the visibility of the last evaluation.
> >>
> >> But both x AND y are created, but the "return value" is y. How can 
> >> this
> be advantageous for solving practical problems? Specifically, consider 
> the following code:
> >>
> >> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
> >>
> >> Both expr5 and expr7 are created, and are accessible by the code
> outside of the nested braces right? But the "return value" of the 
> nested braces is expr7. So doesn't this mean that only expr7 should be
accessible?
> Please help me entangle this (of course the return value of F is 
> expr10, and all the other objects created by the preceding expressions are
deleted.
> But expr5 is not, after the control passes outside of the nested 
> braces!)
> >>
> >> Thanking you,
> >> Yours sincerely,
> >> AKSHAY M KULKARNI
> >>
> >>     [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From @vi@e@gross m@iii@g oii gm@ii@com  Mon Jan 16 04:53:17 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Sun, 15 Jan 2023 22:53:17 -0500
Subject: [R] return value of {....}
In-Reply-To: <MW4PR03MB63634102EDFD608D21BCE633E2C19@MW4PR03MB6363.namprd03.prod.outlook.com>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
 <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <cf027dca-4bde-4c05-a964-1522025d6532@petzel.at>
 <CABcYAdL2WP87USzaSXNeLip2m_yMFRFRPrPq_7pXptW9AnsbZA@mail.gmail.com>
 <MW4PR03MB636390FD5934FED2BFDD81D9E2C19@MW4PR03MB6363.namprd03.prod.outlook.com>
 <MW4PR03MB63634102EDFD608D21BCE633E2C19@MW4PR03MB6363.namprd03.prod.outlook.com>
Message-ID: <003d01d9295e$11925e50$34b71af0$@gmail.com>

Again, John, we are comparing different designs in languages that are often
decades old and partially retrofitted selectively over the years.

Is it poor form to use global variables? Many think so. Discussions have
been had on how to use variables hidden in various ways that are not global,
such as within a package.

But note R still has global assignment operators like <<- and its partner
->> that explicitly can even create a global variable that did not exist
before the function began and that persists for that session. This is
perhaps a special case of the assign() function which can do the same for
any designated environment.

Although it may sometimes be better form to avoid things like this, it can
also be worse form when you want to do something decentralized with no
control over passing additional arguments to all kinds of functions.  

Some languages try to finesse their way past this by creating concepts like
closures that hold values and can even change the values without them being
globally visible. Some may use singleton objects or variables that are part
of a class rather than a single object (which is again a singleton.)

So is the way R allows really a bad thing, especially if rarely used?

All I know is MANY languages use scoping including functions that declare a
variable then create an inner function or many and return the inner
function(s) to the outside where the one getting it can later use that
function and access the variable and even use it as a way to communicate
with the multiple functions it got that were created in that incubator.
Nifty stuff but arguably not always as easy to comprehend!

This forum is not intended for BASHING any language, certainly not R. There
are many other languages to choose from and every one of them will have some
things others consider flaws. How many opted out of say a ++ operator as in
y = x++ for fairly good reasons and later added something like the Walrus
operator so you can now write y = (x := x + 1) as a way to do the same thing
and other things besides?

But to address your point, about a variable outside a function as defined in
a set of environments to search that includes a global context, I want to
note that it is just a set of maskings and your variable "x" can appear in
EVERY environment above you and you can get in real trouble if the order the
environments are put in place changes in some way. The arguably safer way
would be to get a specific value of x would be to not ask for it directly
but as get("x", envir=...) and specify the specific environment that ideally
is in existence at that time. Other arguments to get() let you specify a few
more things such as whether to search other places or supply a default.

Is it then poor technique to re-use the same name "x" in the same code for
some independent use? Probably, albeit if the new value plays a similar
role, just in another stretch of code, maybe not. I would comment it
carefully, and spell that out.

S first came out and before I even decided to become a Computer Scientist in
the mid to late  70's  and evolved multiple times. I first noticed it at
Bell Labs in the 80's. To a certain extent, R started as heavily influenced
by S and many programs could run on both. It too has changed over about
three decades. What kind of perfection can anyone expect over more recent
languages carefully produced with little concern about backward
compatibility?

And it remains very useful not necessarily based on the original language or
even the evolving core, but because of changes that maintained compatibility
as well as so many packages that met needs. Making changes, even if
"improvements" is likely to break all kinds of code unless it is something
like the new pipe operator that simply uses aspects that nobody would have
used before such as the new "|>" operator. 

The answer to too many questions about R remains BECAUSE that is how it was
done and whether you like it or not, may not change much any time soon. That
is why so many people like packages such as in the tidyverse because they
manage to make some changes, for better and often for verse.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
Sent: Sunday, January 15, 2023 8:08 PM
To: Richard O'Keefe <raoknz at gmail.com>; Valentin Petzel <valentin at petzel.at>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] return value of {....}

Richard,
I sent my prior email too quickly:

A slight addition to your code shows an important aspect of R, local vs.
global variables:

x <- 137
f <- function () {
       a <- x
       x <- 42
       b <- x
       list(a=a, b=b)
   }
 f()
print(x)

When run the program produces the following:

> x <- 137
> f <- function () {
+        a <- x
+        x <- 42
+        b <- x
+        list(a=a, b=b)
+    }
>  f()
$a
[1] 137

$b
[1] 42

> print(x)
[1] 137

The fist x, a <- x, invokes an x variable that is GLOBAL. It is known both
inside and outside the function.
The second x, x <- 42, defines an x that is LOCAL to the function, it is not
known to the program that called the function. The LOCAL value of x is used
in the expression  b <- x. As can be seen by the print(x) statement, the
LOCAL value of x is NOT known by the program that calls the function. The
class of a variable, scoping (i.e. local vs. variable) can be a source of
subtle programming errors. A general recommendation is to AVOID use of a
global variable in a function, i.e. don't use a variable in function that is
not passed as a parameter to the function (as was done in the function above
in the statment a <- x). If you need to use a variable in a function that is
known by the program that calls the function, pass the variable as a
argument to the function e.g. 

Use this code:

# Set values needed by function
y <- 2
b <- 30

myfunction <- function(a,b){
cat("a=",a,"b=",b,"\n")
  y <- a
  y2 <- y+b
  cat("y=",y,"y2=",y2,"\n")
}
# Call the function and pass all needed values to the function
myfunction(y,b)
 
Don't use the following code that depends on a global value that is known to
the function, but not passed as a parameter to the function:

y <- 2
myNGfunction <- function(a){
  cat("a=",a,"b=",b,"\n")
  y <- a
  y2 <- y+b
  cat("y=",y,"y2=",y2,"\n")
}
# b is a global variable and will be know to the function, # but should be
passed as a parameter as in example above.
b <- 100
myNGfunction(y)

John

________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Sorkin, John
<jsorkin at som.umaryland.edu>
Sent: Sunday, January 15, 2023 7:40 PM
To: Richard O'Keefe; Valentin Petzel
Cc: R help Mailing list
Subject: Re: [R] return value of {....}

Richard,
A slight addition to your code shows an important aspect of R, local vs.
global variables:

x <- 137
f <- function () {
       a <- x
       x <- 42
       b <- x
       list(a=a, b=b)
   }
 f()
print(x)

________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Richard O'Keefe
<raoknz at gmail.com>
Sent: Sunday, January 15, 2023 6:39 PM
To: Valentin Petzel
Cc: R help Mailing list
Subject: Re: [R] return value of {....}

I wonder if the real confusino is not R's scope rules?
(begin .) is not Lisp, it's Scheme (a major Lisp dialect), and in Scheme,
(begin (define x ...) (define y ...) ...) declares variables x and y that
are local to the (begin ...) form, just like Algol 68.  That's weirdness 1.
Javascript had a similar weirdness, when the ECMAscript process eventually
addressed.  But the real weirdness in R is not just that the existence of
variables is indifferent to the presence of curly braces, it's that it's
*dynamic*.  In f <- function (...) {
   ... use x ...
   x <- ...
   ... use x ...
}
the two occurrences of "use x" refer to DIFFERENT variables.
The first occurrence refers to the x that exists outside the function.  It
has to: the local variable does not exist yet.
The assignment *creates* the variable, so the second occurrence of "use x"
refers to the inner variable.
Here's an actual example.
> x <- 137
> f <- function () {
+     a <- x
+     x <- 42
+     b <- x
+     list(a=a, b=b)
+ }
> f()
$a
[1] 137
$b
[1] 42

Many years ago I set out to write a compiler for R, and this was the issue
that finally sank my attempt.  It's not whether the occurrence of "use x" is
*lexically* before the creation of x.
It's when the assignment is *executed* that makes the difference.
Different paths of execution through a function may result in it arriving at
its return point with different sets of local variables.
R is the only language I routinely use that does this.

So rule 1: whether an identifier in an R function refers to an outer
variable or a local variable depends on whether an assignment creating that
local variable has been executed yet.
And rule 2: the scope of a local variable is the whole function.

If the following transcript not only makes sense to you, but is exactly what
you expect, congratulations, you understand local variables in R.

> x <- 0
> g <- function () {
+     n <- 10
+     r <- numeric(n)
+     for (i in 1:n) {
+         if (i == 6) x <- 100
+         r[i] <- x + i
+     }
+     r
+ }
> g()
 [1]   1   2   3   4   5 106 107 108 109 110


On Fri, 13 Jan 2023 at 23:28, Valentin Petzel <valentin at petzel.at> wrote:

> Hello Akshay,
>
> R is quite inspired by LISP, where this is a common thing. It is not 
> in fact that {...} returned something, rather any expression 
> evalulates to some value, and for a compound statement that is the 
> last evaluated expression.
>
> {...} might be seen as similar to LISPs (begin ...).
>
> Now this is a very different thing compared to {...} in something like 
> C, even if it looks or behaves similarly. But in R {...} is in fact an 
> expression and thus has evaluate to some value. This also comes with 
> some nice benefits.
>
> You do not need to use {...} for anything that is a single statement. 
> But you can in each possible place use {...} to turn multiple 
> statements into one.
>
> Now think about a statement like this
>
> f <- function(n) {
> x <- runif(n)
> x**2
> }
>
> Then we can do
>
> y <- f(10)
>
> Now, you suggested way would look like this:
>
> f <- function(n) {
> x <- runif(n)
> y <- x**2
> }
>
> And we'd need to do something like:
>
> f(10)
> y <- somehow_get_last_env_of_f$y
>
> So having a compound statement evaluate to a value clearly has a benefit.
>
> Best Regards,
> Valentin
>
> 09.01.2023 18:05:58 akshay kulkarni <akshay_e4 at hotmail.com>:
>
> > Dear Valentin,
> >                           But why should {....} "return" a value? It
> could just as well evaluate all the expressions and store the 
> resulting objects in whatever environment the interpreter chooses, and 
> then it would be left to the user to manipulate any object he chooses. 
> Don't you think returning the last, or any value, is redundant? We are 
> living in the 21st century world, and the R-core team might,I suppose, 
> have a definite reason for"returning" the last value. Any comments?
> >
> > Thanking you,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> >
> > ----------------------------------------
> > *From:* Valentin Petzel <valentin at petzel.at>
> > *Sent:* Monday, January 9, 2023 9:18 PM
> > *To:* akshay kulkarni <akshay_e4 at hotmail.com>
> > *Cc:* R help Mailing list <r-help at r-project.org>
> > *Subject:* Re: [R] return value of {....}
> >
> > Hello Akshai,
> >
> > I think you are confusing {...} with local({...}). This one will
> evaluate the expression in a separate environment, returning the last 
> expression.
> >
> > {...} simply evaluates multiple expressions as one and returns the
> result of the last line, but it still evaluates each expression.
> >
> > Assignment returns the assigned value, so we can chain assignments 
> > like
> this
> >
> > a <- 1 + (b <- 2)
> >
> > conveniently.
> >
> > So when is {...} useful? Well, anyplace where you want to execute
> complex stuff in a function argument. E.g. you might do:
> >
> > data %>% group_by(x) %>% summarise(y = {if(x[1] > 10) sum(y) else
> mean(y)})
> >
> > Regards,
> > Valentin Petzel
> >
> > 09.01.2023 15:47:53 akshay kulkarni <akshay_e4 at hotmail.com>:
> >
> >> Dear members,
> >>                              I have the following code:
> >>
> >>> TB <- {x <- 3;y <- 5}
> >>> TB
> >> [1] 5
> >>
> >> It is consistent with the documentation: For {, the result of the 
> >> last
> expression evaluated. This has the visibility of the last evaluation.
> >>
> >> But both x AND y are created, but the "return value" is y. How can 
> >> this
> be advantageous for solving practical problems? Specifically, consider 
> the following code:
> >>
> >> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
> >>
> >> Both expr5 and expr7 are created, and are accessible by the code
> outside of the nested braces right? But the "return value" of the 
> nested braces is expr7. So doesn't this mean that only expr7 should be
accessible?
> Please help me entangle this (of course the return value of F is 
> expr10, and all the other objects created by the preceding expressions are
deleted.
> But expr5 is not, after the control passes outside of the nested 
> braces!)
> >>
> >> Thanking you,
> >> Yours sincerely,
> >> AKSHAY M KULKARNI
> >>
> >>     [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fs
> >> tat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40
> >> som.umaryland.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de
> >> 461a88940312a395cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpb
> >> GZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6
> >> Mn0%3D%7C3000%7C%7C%7C&sdata=Jp7JGV%2BVKkAx3SI%2Fak%2BiEIkUraGyQBTf
> >> SLWqRRUYmaQ%3D&reserved=0
> >> PLEASE do read the posting guide
> https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> -project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryla
> nd.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a3
> 95cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC
> 4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%
> 7C&sdata=Got4ab%2BEO6LD%2FOXqp9j9ImnSn0zi8vhV6YZMD7OJ8WU%3D&reserved=0
> >> and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.um
> aryland.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940
> 312a395cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWI
> joiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7
> C%7C%7C&sdata=Jp7JGV%2BVKkAx3SI%2Fak%2BiEIkUraGyQBTfSLWqRRUYmaQ%3D&res
> erved=0
> PLEASE do read the posting guide
> https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> -project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryla
> nd.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a3
> 95cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC
> 4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%
> 7C&sdata=Got4ab%2BEO6LD%2FOXqp9j9ImnSn0zi8vhV6YZMD7OJ8WU%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.
ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%
7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C
0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV
2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Jp7JGV%2BVKkAx3S
I%2Fak%2BiEIkUraGyQBTfSLWqRRUYmaQ%3D&reserved=0
PLEASE do read the posting guide
https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-proje
ct.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C75c
2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C0%7C6
38094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMz
IiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Got4ab%2BEO6LD%2FOXqp
9j9ImnSn0zi8vhV6YZMD7OJ8WU%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.
ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%
7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C
0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV
2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Jp7JGV%2BVKkAx3S
I%2Fak%2BiEIkUraGyQBTfSLWqRRUYmaQ%3D&reserved=0
PLEASE do read the posting guide
https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-proje
ct.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C75c
2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C0%7C6
38094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMz
IiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Got4ab%2BEO6LD%2FOXqp
9j9ImnSn0zi8vhV6YZMD7OJ8WU%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From j@ork|n @end|ng |rom @om@um@ry|@nd@edu  Mon Jan 16 05:26:26 2023
From: j@ork|n @end|ng |rom @om@um@ry|@nd@edu (Sorkin, John)
Date: Mon, 16 Jan 2023 04:26:26 +0000
Subject: [R] return value of {....}
In-Reply-To: <003d01d9295e$11925e50$34b71af0$@gmail.com>
References: <PU4P216MB15683AFF29648D6DD2470B8DC8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <f2d42675-571d-4644-b31b-7371fa105b23@petzel.at>
 <PU4P216MB1568A92CDAD4B5CC59014CE3C8FE9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <cf027dca-4bde-4c05-a964-1522025d6532@petzel.at>
 <CABcYAdL2WP87USzaSXNeLip2m_yMFRFRPrPq_7pXptW9AnsbZA@mail.gmail.com>
 <MW4PR03MB636390FD5934FED2BFDD81D9E2C19@MW4PR03MB6363.namprd03.prod.outlook.com>
 <MW4PR03MB63634102EDFD608D21BCE633E2C19@MW4PR03MB6363.namprd03.prod.outlook.com>
 <003d01d9295e$11925e50$34b71af0$@gmail.com>
Message-ID: <MW4PR03MB6363895EBC8C929B5906FAD5E2C19@MW4PR03MB6363.namprd03.prod.outlook.com>

Avi,

Please do not mistake my posting as being a BASHING of R. I greatly admire R and the progress it has made from its roots in S. I thank the may people who contribute to the development and growth of R. 

Just because a language allows a given syntax does not mean (1) that the language is bad or (2) that the syntax should be used (except in rare occasions). There may well be a few occasions when using a global variable in a function makes sense and in that instance the global variable should be used, and the usage should be documented in the comments that are part of the source code. Please note that I stated "A general recommendation  use of a global variable in a function"; I used the words "recommendation is to AVOID". I did not, and would not forbid the use of a global variable in a function. 

English has the word "or" which is not clearly defined; is it an exclusive or or an inclusive or? I don't bash English because of this semantic ambiguity. What I try to do is make certain that when it is essential to understand if the "or" I use in a sentence in exclusive vs. inclusive (or conversely) I make certain my meaning is clear. e.g. You can use bleach or ammonia to clean the stain, but NEVER use ammonia and bleach together as the combination produces a deadly gas. I try to follow this philosophy when I program. I don't use global variables in a function unless there is an overwhelming reason to do so. When I do, I indicate that that a global variable has been used in my comments. In the same vane, I rarely use call by reference in my programs (when this is allowed by a programming language); I try to use call by value whenever possible as call by reference can be fraught. On the other hand when working with extremely large data objects (especially in the old days when I had perhaps 20k of memory rather than 100 gig), I have used call by reference to save storage. Despite this, I know that call by reference is not recommended just as using a global variable in a function is not recommended, but can, and should be used when needed.

John 
________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of avi.e.gross at gmail.com <avi.e.gross at gmail.com>
Sent: Sunday, January 15, 2023 10:53 PM
Cc: 'R help Mailing list'
Subject: Re: [R] return value of {....}

Again, John, we are comparing different designs in languages that are often
decades old and partially retrofitted selectively over the years.

Is it poor form to use global variables? Many think so. Discussions have
been had on how to use variables hidden in various ways that are not global,
such as within a package.

But note R still has global assignment operators like <<- and its partner
->> that explicitly can even create a global variable that did not exist
before the function began and that persists for that session. This is
perhaps a special case of the assign() function which can do the same for
any designated environment.

Although it may sometimes be better form to avoid things like this, it can
also be worse form when you want to do something decentralized with no
control over passing additional arguments to all kinds of functions.

Some languages try to finesse their way past this by creating concepts like
closures that hold values and can even change the values without them being
globally visible. Some may use singleton objects or variables that are part
of a class rather than a single object (which is again a singleton.)

So is the way R allows really a bad thing, especially if rarely used?

All I know is MANY languages use scoping including functions that declare a
variable then create an inner function or many and return the inner
function(s) to the outside where the one getting it can later use that
function and access the variable and even use it as a way to communicate
with the multiple functions it got that were created in that incubator.
Nifty stuff but arguably not always as easy to comprehend!

This forum is not intended for BASHING any language, certainly not R. There
are many other languages to choose from and every one of them will have some
things others consider flaws. How many opted out of say a ++ operator as in
y = x++ for fairly good reasons and later added something like the Walrus
operator so you can now write y = (x := x + 1) as a way to do the same thing
and other things besides?

But to address your point, about a variable outside a function as defined in
a set of environments to search that includes a global context, I want to
note that it is just a set of maskings and your variable "x" can appear in
EVERY environment above you and you can get in real trouble if the order the
environments are put in place changes in some way. The arguably safer way
would be to get a specific value of x would be to not ask for it directly
but as get("x", envir=...) and specify the specific environment that ideally
is in existence at that time. Other arguments to get() let you specify a few
more things such as whether to search other places or supply a default.

Is it then poor technique to re-use the same name "x" in the same code for
some independent use? Probably, albeit if the new value plays a similar
role, just in another stretch of code, maybe not. I would comment it
carefully, and spell that out.

S first came out and before I even decided to become a Computer Scientist in
the mid to late  70's  and evolved multiple times. I first noticed it at
Bell Labs in the 80's. To a certain extent, R started as heavily influenced
by S and many programs could run on both. It too has changed over about
three decades. What kind of perfection can anyone expect over more recent
languages carefully produced with little concern about backward
compatibility?

And it remains very useful not necessarily based on the original language or
even the evolving core, but because of changes that maintained compatibility
as well as so many packages that met needs. Making changes, even if
"improvements" is likely to break all kinds of code unless it is something
like the new pipe operator that simply uses aspects that nobody would have
used before such as the new "|>" operator.

The answer to too many questions about R remains BECAUSE that is how it was
done and whether you like it or not, may not change much any time soon. That
is why so many people like packages such as in the tidyverse because they
manage to make some changes, for better and often for verse.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Sorkin, John
Sent: Sunday, January 15, 2023 8:08 PM
To: Richard O'Keefe <raoknz at gmail.com>; Valentin Petzel <valentin at petzel.at>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] return value of {....}

Richard,
I sent my prior email too quickly:

A slight addition to your code shows an important aspect of R, local vs.
global variables:

x <- 137
f <- function () {
       a <- x
       x <- 42
       b <- x
       list(a=a, b=b)
   }
 f()
print(x)

When run the program produces the following:

> x <- 137
> f <- function () {
+        a <- x
+        x <- 42
+        b <- x
+        list(a=a, b=b)
+    }
>  f()
$a
[1] 137

$b
[1] 42

> print(x)
[1] 137

The fist x, a <- x, invokes an x variable that is GLOBAL. It is known both
inside and outside the function.
The second x, x <- 42, defines an x that is LOCAL to the function, it is not
known to the program that called the function. The LOCAL value of x is used
in the expression  b <- x. As can be seen by the print(x) statement, the
LOCAL value of x is NOT known by the program that calls the function. The
class of a variable, scoping (i.e. local vs. variable) can be a source of
subtle programming errors. A general recommendation is to AVOID use of a
global variable in a function, i.e. don't use a variable in function that is
not passed as a parameter to the function (as was done in the function above
in the statment a <- x). If you need to use a variable in a function that is
known by the program that calls the function, pass the variable as a
argument to the function e.g.

Use this code:

# Set values needed by function
y <- 2
b <- 30

myfunction <- function(a,b){
cat("a=",a,"b=",b,"\n")
  y <- a
  y2 <- y+b
  cat("y=",y,"y2=",y2,"\n")
}
# Call the function and pass all needed values to the function
myfunction(y,b)

Don't use the following code that depends on a global value that is known to
the function, but not passed as a parameter to the function:

y <- 2
myNGfunction <- function(a){
  cat("a=",a,"b=",b,"\n")
  y <- a
  y2 <- y+b
  cat("y=",y,"y2=",y2,"\n")
}
# b is a global variable and will be know to the function, # but should be
passed as a parameter as in example above.
b <- 100
myNGfunction(y)

John

________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Sorkin, John
<jsorkin at som.umaryland.edu>
Sent: Sunday, January 15, 2023 7:40 PM
To: Richard O'Keefe; Valentin Petzel
Cc: R help Mailing list
Subject: Re: [R] return value of {....}

Richard,
A slight addition to your code shows an important aspect of R, local vs.
global variables:

x <- 137
f <- function () {
       a <- x
       x <- 42
       b <- x
       list(a=a, b=b)
   }
 f()
print(x)

________________________________________
From: R-help <r-help-bounces at r-project.org> on behalf of Richard O'Keefe
<raoknz at gmail.com>
Sent: Sunday, January 15, 2023 6:39 PM
To: Valentin Petzel
Cc: R help Mailing list
Subject: Re: [R] return value of {....}

I wonder if the real confusino is not R's scope rules?
(begin .) is not Lisp, it's Scheme (a major Lisp dialect), and in Scheme,
(begin (define x ...) (define y ...) ...) declares variables x and y that
are local to the (begin ...) form, just like Algol 68.  That's weirdness 1.
Javascript had a similar weirdness, when the ECMAscript process eventually
addressed.  But the real weirdness in R is not just that the existence of
variables is indifferent to the presence of curly braces, it's that it's
*dynamic*.  In f <- function (...) {
   ... use x ...
   x <- ...
   ... use x ...
}
the two occurrences of "use x" refer to DIFFERENT variables.
The first occurrence refers to the x that exists outside the function.  It
has to: the local variable does not exist yet.
The assignment *creates* the variable, so the second occurrence of "use x"
refers to the inner variable.
Here's an actual example.
> x <- 137
> f <- function () {
+     a <- x
+     x <- 42
+     b <- x
+     list(a=a, b=b)
+ }
> f()
$a
[1] 137
$b
[1] 42

Many years ago I set out to write a compiler for R, and this was the issue
that finally sank my attempt.  It's not whether the occurrence of "use x" is
*lexically* before the creation of x.
It's when the assignment is *executed* that makes the difference.
Different paths of execution through a function may result in it arriving at
its return point with different sets of local variables.
R is the only language I routinely use that does this.

So rule 1: whether an identifier in an R function refers to an outer
variable or a local variable depends on whether an assignment creating that
local variable has been executed yet.
And rule 2: the scope of a local variable is the whole function.

If the following transcript not only makes sense to you, but is exactly what
you expect, congratulations, you understand local variables in R.

> x <- 0
> g <- function () {
+     n <- 10
+     r <- numeric(n)
+     for (i in 1:n) {
+         if (i == 6) x <- 100
+         r[i] <- x + i
+     }
+     r
+ }
> g()
 [1]   1   2   3   4   5 106 107 108 109 110


On Fri, 13 Jan 2023 at 23:28, Valentin Petzel <valentin at petzel.at> wrote:

> Hello Akshay,
>
> R is quite inspired by LISP, where this is a common thing. It is not
> in fact that {...} returned something, rather any expression
> evalulates to some value, and for a compound statement that is the
> last evaluated expression.
>
> {...} might be seen as similar to LISPs (begin ...).
>
> Now this is a very different thing compared to {...} in something like
> C, even if it looks or behaves similarly. But in R {...} is in fact an
> expression and thus has evaluate to some value. This also comes with
> some nice benefits.
>
> You do not need to use {...} for anything that is a single statement.
> But you can in each possible place use {...} to turn multiple
> statements into one.
>
> Now think about a statement like this
>
> f <- function(n) {
> x <- runif(n)
> x**2
> }
>
> Then we can do
>
> y <- f(10)
>
> Now, you suggested way would look like this:
>
> f <- function(n) {
> x <- runif(n)
> y <- x**2
> }
>
> And we'd need to do something like:
>
> f(10)
> y <- somehow_get_last_env_of_f$y
>
> So having a compound statement evaluate to a value clearly has a benefit.
>
> Best Regards,
> Valentin
>
> 09.01.2023 18:05:58 akshay kulkarni <akshay_e4 at hotmail.com>:
>
> > Dear Valentin,
> >                           But why should {....} "return" a value? It
> could just as well evaluate all the expressions and store the
> resulting objects in whatever environment the interpreter chooses, and
> then it would be left to the user to manipulate any object he chooses.
> Don't you think returning the last, or any value, is redundant? We are
> living in the 21st century world, and the R-core team might,I suppose,
> have a definite reason for"returning" the last value. Any comments?
> >
> > Thanking you,
> > Yours sincerely,
> > AKSHAY M KULKARNI
> >
> > ----------------------------------------
> > *From:* Valentin Petzel <valentin at petzel.at>
> > *Sent:* Monday, January 9, 2023 9:18 PM
> > *To:* akshay kulkarni <akshay_e4 at hotmail.com>
> > *Cc:* R help Mailing list <r-help at r-project.org>
> > *Subject:* Re: [R] return value of {....}
> >
> > Hello Akshai,
> >
> > I think you are confusing {...} with local({...}). This one will
> evaluate the expression in a separate environment, returning the last
> expression.
> >
> > {...} simply evaluates multiple expressions as one and returns the
> result of the last line, but it still evaluates each expression.
> >
> > Assignment returns the assigned value, so we can chain assignments
> > like
> this
> >
> > a <- 1 + (b <- 2)
> >
> > conveniently.
> >
> > So when is {...} useful? Well, anyplace where you want to execute
> complex stuff in a function argument. E.g. you might do:
> >
> > data %>% group_by(x) %>% summarise(y = {if(x[1] > 10) sum(y) else
> mean(y)})
> >
> > Regards,
> > Valentin Petzel
> >
> > 09.01.2023 15:47:53 akshay kulkarni <akshay_e4 at hotmail.com>:
> >
> >> Dear members,
> >>                              I have the following code:
> >>
> >>> TB <- {x <- 3;y <- 5}
> >>> TB
> >> [1] 5
> >>
> >> It is consistent with the documentation: For {, the result of the
> >> last
> expression evaluated. This has the visibility of the last evaluation.
> >>
> >> But both x AND y are created, but the "return value" is y. How can
> >> this
> be advantageous for solving practical problems? Specifically, consider
> the following code:
> >>
> >> F <- function(X) {  expr; expr2; { expr5; expr7}; expr8;expr10}
> >>
> >> Both expr5 and expr7 are created, and are accessible by the code
> outside of the nested braces right? But the "return value" of the
> nested braces is expr7. So doesn't this mean that only expr7 should be
accessible?
> Please help me entangle this (of course the return value of F is
> expr10, and all the other objects created by the preceding expressions are
deleted.
> But expr5 is not, after the control passes outside of the nested
> braces!)
> >>
> >> Thanking you,
> >> Yours sincerely,
> >> AKSHAY M KULKARNI
> >>
> >>     [[alternative HTML version deleted]]
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fs%2F&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C6522db410c7f4f77355f08daf7753e13%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094380183223600%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=iITNRDBSqiZR9wH3nBmPlEBL2YJ%2Fa3wAOnXFO5t86vc%3D&reserved=0
> >> tat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40
> >> som.umaryland.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de
> >> 461a88940312a395cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpb
> >> GZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6
> >> Mn0%3D%7C3000%7C%7C%7C&sdata=Jp7JGV%2BVKkAx3SI%2Fak%2BiEIkUraGyQBTf
> >> SLWqRRUYmaQ%3D&reserved=0
> >> PLEASE do read the posting guide
> https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r%2F&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C6522db410c7f4f77355f08daf7753e13%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094380183223600%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=xtsEfKOhvwt1AwN66CQjtmMMxBil6VjtTi5Jl5%2BBzw4%3D&reserved=0
> -project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryla
> nd.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a3
> 95cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC
> 4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%
> 7C&sdata=Got4ab%2BEO6LD%2FOXqp9j9ImnSn0zi8vhV6YZMD7OJ8WU%3D&reserved=0
> >> and provide commented, minimal, self-contained, reproducible code.
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat%2F&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C6522db410c7f4f77355f08daf7753e13%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094380183223600%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=lFPBCrwNEYB51JT%2FKolr6cGzf4djn0vMTZPouaxQXcc%3D&reserved=0
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.um
> aryland.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940
> 312a395cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWI
> joiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7
> C%7C%7C&sdata=Jp7JGV%2BVKkAx3SI%2Fak%2BiEIkUraGyQBTfSLWqRRUYmaQ%3D&res
> erved=0
> PLEASE do read the posting guide
> https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r%2F&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C6522db410c7f4f77355f08daf7753e13%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094380183223600%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=xtsEfKOhvwt1AwN66CQjtmMMxBil6VjtTi5Jl5%2BBzw4%3D&reserved=0
> -project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryla
> nd.edu%7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a3
> 95cac9%7C0%7C0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC
> 4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%
> 7C&sdata=Got4ab%2BEO6LD%2FOXqp9j9ImnSn0zi8vhV6YZMD7OJ8WU%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz%2F&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C6522db410c7f4f77355f08daf7753e13%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094380183223600%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=7d9nxo8q4ZbUYsv%2B81iYSMydFvK2dToIhdjseND8Nxc%3D&reserved=0.
ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%
7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C
0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV
2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Jp7JGV%2BVKkAx3S
I%2Fak%2BiEIkUraGyQBTfSLWqRRUYmaQ%3D&reserved=0
PLEASE do read the posting guide
https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-proje%2F&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C6522db410c7f4f77355f08daf7753e13%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094380183223600%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=I7m6vGh3r46%2FMwZGVqaiLIkdHYNVskuCjDG%2BTMnJh7I%3D&reserved=0
ct.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C75c
2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C0%7C6
38094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMz
IiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Got4ab%2BEO6LD%2FOXqp
9j9ImnSn0zi8vhV6YZMD7OJ8WU%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz%2F&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C6522db410c7f4f77355f08daf7753e13%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094380183223600%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=7d9nxo8q4ZbUYsv%2B81iYSMydFvK2dToIhdjseND8Nxc%3D&reserved=0.
ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%
7C75c2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C
0%7C638094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV
2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Jp7JGV%2BVKkAx3S
I%2Fak%2BiEIkUraGyQBTfSLWqRRUYmaQ%3D&reserved=0
PLEASE do read the posting guide
https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-proje%2F&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C6522db410c7f4f77355f08daf7753e13%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094380183223600%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=I7m6vGh3r46%2FMwZGVqaiLIkdHYNVskuCjDG%2BTMnJh7I%3D&reserved=0
ct.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C75c
2bc42c20b4c03601d08daf75a4405%7C717009a620de461a88940312a395cac9%7C0%7C0%7C6
38094264319036570%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMz
IiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Got4ab%2BEO6LD%2FOXqp
9j9ImnSn0zi8vhV6YZMD7OJ8WU%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C6522db410c7f4f77355f08daf7753e13%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094380183223600%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=hYMD0rT15XwKYOvX%2F71JXNahEoml%2BYVmuPoNK567p68%3D&reserved=0
PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C6522db410c7f4f77355f08daf7753e13%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094380183223600%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=qZmtlO5ifp0BjoWHfRbL8Vd4dGVBQ1DGByekCiBUYFw%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam11.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C6522db410c7f4f77355f08daf7753e13%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094380183223600%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=hYMD0rT15XwKYOvX%2F71JXNahEoml%2BYVmuPoNK567p68%3D&reserved=0
PLEASE do read the posting guide https://nam11.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7CJSorkin%40som.umaryland.edu%7C6522db410c7f4f77355f08daf7753e13%7C717009a620de461a88940312a395cac9%7C0%7C0%7C638094380183223600%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=qZmtlO5ifp0BjoWHfRbL8Vd4dGVBQ1DGByekCiBUYFw%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.


From ||@her @end|ng |rom p|e@@th@n@com  Mon Jan 16 09:18:48 2023
From: ||@her @end|ng |rom p|e@@th@n@com (Dennis Fisher)
Date: Mon, 16 Jan 2023 09:18:48 +0100
Subject: [R] Printing special characters
Message-ID: <36AF880A-F414-4D7D-99D6-EC10C86D7CC1@plessthan.com>

R 4.2.2
OS X

Colleagues

A file that I have read includes strings like this:
	"EVENT ? 30 sec"
When I include the string in a graphic using:
	mtext(STRING, ?)
it appears as:
	"EVENT ... 30 sec"

Is there a simple work-around (short of reformatting all the strings, then using plotmath)?

Dennis

Dennis Fisher MD
P < (The "P Less Than" Company)
Phone / Fax: 1-866-PLessThan (1-866-753-7784)
www.PLessThan.com


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Jan 16 09:31:48 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Mon, 16 Jan 2023 00:31:48 -0800
Subject: [R] Printing special characters
In-Reply-To: <36AF880A-F414-4D7D-99D6-EC10C86D7CC1@plessthan.com>
References: <36AF880A-F414-4D7D-99D6-EC10C86D7CC1@plessthan.com>
Message-ID: <DA53BD30-0F90-44F4-9CB7-BCEE0F9BB2B1@dcn.davis.ca.us>

Use the Cairo PDF device?

On January 16, 2023 12:18:48 AM PST, Dennis Fisher <fisher at plessthan.com> wrote:
>R 4.2.2
>OS X
>
>Colleagues
>
>A file that I have read includes strings like this:
>	"EVENT ? 30 sec"
>When I include the string in a graphic using:
>	mtext(STRING, ?)
>it appears as:
>	"EVENT ... 30 sec"
>
>Is there a simple work-around (short of reformatting all the strings, then using plotmath)?
>
>Dennis
>
>Dennis Fisher MD
>P < (The "P Less Than" Company)
>Phone / Fax: 1-866-PLessThan (1-866-753-7784)
>www.PLessThan.com
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From er|cjberger @end|ng |rom gm@||@com  Mon Jan 16 09:32:06 2023
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Mon, 16 Jan 2023 10:32:06 +0200
Subject: [R] Printing special characters
In-Reply-To: <36AF880A-F414-4D7D-99D6-EC10C86D7CC1@plessthan.com>
References: <36AF880A-F414-4D7D-99D6-EC10C86D7CC1@plessthan.com>
Message-ID: <CAGgJW75YPZ-C89=qQhLDGv8xzY737uoO8Y_2h0n41jUrCm8=Bg@mail.gmail.com>

How about  just 'EVENT > 30 sec' or 'EVENT > 29 sec' ?


On Mon, Jan 16, 2023 at 10:19 AM Dennis Fisher <fisher at plessthan.com> wrote:

> R 4.2.2
> OS X
>
> Colleagues
>
> A file that I have read includes strings like this:
>         "EVENT ? 30 sec"
> When I include the string in a graphic using:
>         mtext(STRING, ?)
> it appears as:
>         "EVENT ... 30 sec"
>
> Is there a simple work-around (short of reformatting all the strings, then
> using plotmath)?
>
> Dennis
>
> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> www.PLessThan.com
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Jan 16 09:46:43 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 16 Jan 2023 08:46:43 +0000
Subject: [R] Printing special characters
In-Reply-To: <DA53BD30-0F90-44F4-9CB7-BCEE0F9BB2B1@dcn.davis.ca.us>
References: <36AF880A-F414-4D7D-99D6-EC10C86D7CC1@plessthan.com>
 <DA53BD30-0F90-44F4-9CB7-BCEE0F9BB2B1@dcn.davis.ca.us>
Message-ID: <d62811e6-ed5c-59f6-ec6b-ea805542fa9f@sapo.pt>

?s 08:31 de 16/01/2023, Jeff Newmiller escreveu:
> Use the Cairo PDF device?
> 
> On January 16, 2023 12:18:48 AM PST, Dennis Fisher <fisher at plessthan.com> wrote:
>> R 4.2.2
>> OS X
>>
>> Colleagues
>>
>> A file that I have read includes strings like this:
>> 	"EVENT ? 30 sec"
>> When I include the string in a graphic using:
>> 	mtext(STRING, ?)
>> it appears as:
>> 	"EVENT ... 30 sec"
>>
>> Is there a simple work-around (short of reformatting all the strings, then using plotmath)?
>>
>> Dennis
>>
>> Dennis Fisher MD
>> P < (The "P Less Than" Company)
>> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
>> www.PLessThan.com
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
Hello,

I had no problems with


X11()
plot(1,1, pch = "")
text(1, 1, "EVENT ? 30 sec")
#dev.off()


Hope this helps,

Rui Barradas


From petr@p|k@| @end|ng |rom prechez@@cz  Mon Jan 16 10:39:57 2023
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Mon, 16 Jan 2023 09:39:57 +0000
Subject: [R] Printing special characters
In-Reply-To: <36AF880A-F414-4D7D-99D6-EC10C86D7CC1@plessthan.com>
References: <36AF880A-F414-4D7D-99D6-EC10C86D7CC1@plessthan.com>
Message-ID: <d667120233504311b585c3bb5c425cd2@SRVEXCHCM1302.precheza.cz>

Hallo Dennis

Is the STRING in R still containing **?** character?
Or it was converted during reading to R to ...?

What dput(STRING) result i?
 
Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Dennis Fisher
> Sent: Monday, January 16, 2023 9:19 AM
> To: r-help at r-project.org
> Subject: [R] Printing special characters
> 
> R 4.2.2
> OS X
> 
> Colleagues
> 
> A file that I have read includes strings like this:
> 	"EVENT ? 30 sec"
> When I include the string in a graphic using:
> 	mtext(STRING, ?)
> it appears as:
> 	"EVENT ... 30 sec"
> 
> Is there a simple work-around (short of reformatting all the strings, then using
> plotmath)?
> 
> Dennis
> 
> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone / Fax: 1-866-PLessThan (1-866-753-7784) www.PLessThan.com
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Mon Jan 16 11:15:45 2023
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Mon, 16 Jan 2023 11:15:45 +0100
Subject: [R] Printing special characters
In-Reply-To: <d62811e6-ed5c-59f6-ec6b-ea805542fa9f@sapo.pt>
References: <36AF880A-F414-4D7D-99D6-EC10C86D7CC1@plessthan.com>
 <DA53BD30-0F90-44F4-9CB7-BCEE0F9BB2B1@dcn.davis.ca.us>
 <d62811e6-ed5c-59f6-ec6b-ea805542fa9f@sapo.pt>
Message-ID: <25541.9169.124518.375870@stat.math.ethz.ch>

>>>>> Rui Barradas 
>>>>>     on Mon, 16 Jan 2023 08:46:43 +0000 writes:

    > ?s 08:31 de 16/01/2023, Jeff Newmiller escreveu:
    >> Use the Cairo PDF device?
    >> 
    >> On January 16, 2023 12:18:48 AM PST, Dennis Fisher
    >> <fisher at plessthan.com> wrote:
    >>> R 4.2.2 OS X
    >>> 
    >>> Colleagues
    >>> 
    >>> A file that I have read includes strings like this:
    >>> "EVENT ? 30 sec" When I include the string in a graphic
    >>> using: mtext(STRING, ?)  it appears as: "EVENT ... 30
    >>> sec"
    >>> 
    >>> Is there a simple work-around (short of reformatting all
    >>> the strings, then using plotmath)?
    >>> 
    >>> Dennis
    >>> 
    >>> Dennis Fisher MD P < (The "P Less Than" Company) Phone /
    >>> Fax: 1-866-PLessThan (1-866-753-7784) www.PLessThan.com
    >>> 
    >>> ______________________________________________
    >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
    >>> more, see https://stat.ethz.ch/mailman/listinfo/r-help
    >>> PLEASE do read the posting guide
    >>> http://www.R-project.org/posting-guide.html and provide
    >>> commented, minimal, self-contained, reproducible code.
    >> 
    > Hello,

    > I had no problems with

    > X11()
    > plot(1,1, pch = "") 
    > text(1, 1, "EVENT ? 30 sec")
    > #dev.off()

Yes, for me too.
X11() *is*  by default the "X11cairo" device and that works, the
same as the "Cairo PDF" device that Jeff mentioned above.

Indeed,
  cairo_pdf("utf8-ex.pdf")  # works nicely

whereas  pdf("utf8-ex.pdf") does not {for me, with default font
families etc}, but rather shows the "..." instead.

*and* gives warnings during the plot
  conversion failure on 'EVENT ? 30 sec' in 'mbcsToSbcs': dot substituted for <e2>
  conversion failure on 'EVENT ? 30 sec' in 'mbcsToSbcs': dot substituted for <89>
  conversion failure on 'EVENT ? 30 sec' in 'mbcsToSbcs': dot substituted for <a5>

BTW, a simple one liner for testing is

   plot(1, type="n", axes=FALSE, main = "EVENT ? 30 sec")

Note that help(pdf)  contains

   See Also:

        pdfFonts, pdf.options, embedFonts, Devices, postscript.

        cairo_pdf and (on macOS only) quartz for other devices that
        can produce PDF.

        More details of font families and encodings and especially
        handling text in a non-Latin-1 encoding and embedding fonts can be
        found in

        Paul Murrell and Brian Ripley (2006).  ?Non-standard fonts in
        PostScript and PDF graphics.? _R News_, *6*(2), 41-47.
        <https://www.r-project.org/doc/Rnews/Rnews_2006-2.pdf>.

-
Martin

    > Hope this helps,
    > Rui Barradas


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Jan 16 12:02:01 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 16 Jan 2023 11:02:01 +0000
Subject: [R] Printing special characters
In-Reply-To: <25541.9169.124518.375870@stat.math.ethz.ch>
References: <36AF880A-F414-4D7D-99D6-EC10C86D7CC1@plessthan.com>
 <DA53BD30-0F90-44F4-9CB7-BCEE0F9BB2B1@dcn.davis.ca.us>
 <d62811e6-ed5c-59f6-ec6b-ea805542fa9f@sapo.pt>
 <25541.9169.124518.375870@stat.math.ethz.ch>
Message-ID: <1ade6c42-0cfa-97fe-b7a9-6c47c8863f5d@sapo.pt>

?s 10:15 de 16/01/2023, Martin Maechler escreveu:
>>>>>> Rui Barradas
>>>>>>      on Mon, 16 Jan 2023 08:46:43 +0000 writes:
> 
>      > ?s 08:31 de 16/01/2023, Jeff Newmiller escreveu:
>      >> Use the Cairo PDF device?
>      >>
>      >> On January 16, 2023 12:18:48 AM PST, Dennis Fisher
>      >> <fisher at plessthan.com> wrote:
>      >>> R 4.2.2 OS X
>      >>>
>      >>> Colleagues
>      >>>
>      >>> A file that I have read includes strings like this:
>      >>> "EVENT ? 30 sec" When I include the string in a graphic
>      >>> using: mtext(STRING, ?)  it appears as: "EVENT ... 30
>      >>> sec"
>      >>>
>      >>> Is there a simple work-around (short of reformatting all
>      >>> the strings, then using plotmath)?
>      >>>
>      >>> Dennis
>      >>>
>      >>> Dennis Fisher MD P < (The "P Less Than" Company) Phone /
>      >>> Fax: 1-866-PLessThan (1-866-753-7784) www.PLessThan.com
>      >>>
>      >>> ______________________________________________
>      >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and
>      >>> more, see https://stat.ethz.ch/mailman/listinfo/r-help
>      >>> PLEASE do read the posting guide
>      >>> http://www.R-project.org/posting-guide.html and provide
>      >>> commented, minimal, self-contained, reproducible code.
>      >>
>      > Hello,
> 
>      > I had no problems with
> 
>      > X11()
>      > plot(1,1, pch = "")
>      > text(1, 1, "EVENT ? 30 sec")
>      > #dev.off()
> 
> Yes, for me too.
> X11() *is*  by default the "X11cairo" device and that works, the
> same as the "Cairo PDF" device that Jeff mentioned above.
> 
> Indeed,
>    cairo_pdf("utf8-ex.pdf")  # works nicely
> 
> whereas  pdf("utf8-ex.pdf") does not {for me, with default font
> families etc}, but rather shows the "..." instead.
> 
> *and* gives warnings during the plot
>    conversion failure on 'EVENT ? 30 sec' in 'mbcsToSbcs': dot substituted for <e2>
>    conversion failure on 'EVENT ? 30 sec' in 'mbcsToSbcs': dot substituted for <89>
>    conversion failure on 'EVENT ? 30 sec' in 'mbcsToSbcs': dot substituted for <a5>
> 
> BTW, a simple one liner for testing is
> 
>     plot(1, type="n", axes=FALSE, main = "EVENT ? 30 sec")
> 
> Note that help(pdf)  contains
> 
>     See Also:
> 
>          pdfFonts, pdf.options, embedFonts, Devices, postscript.
> 
>          cairo_pdf and (on macOS only) quartz for other devices that
>          can produce PDF.
> 
>          More details of font families and encodings and especially
>          handling text in a non-Latin-1 encoding and embedding fonts can be
>          found in
> 
>          Paul Murrell and Brian Ripley (2006).  ?Non-standard fonts in
>          PostScript and PDF graphics.? _R News_, *6*(2), 41-47.
>          <https://www.r-project.org/doc/Rnews/Rnews_2006-2.pdf>.
> 
> -
> Martin
> 
>      > Hope this helps,
>      > Rui Barradas
Hello,

I can confrim this behavior with cairo_pdf(), it works as expected 
printing "EVENT ? 30 sec".
But with pdf() I get an equal sign "EVENT = 30 sec" and no errors.
Full code:



cairo_pdf("~/Temp/cairo_pdf_utf8-ex.pdf")  # works
plot(1,1, pch = "")
text(1, 1, "EVENT ? 30 sec")
dev.off()
# null device
#           1

pdf("~/Temp/pdf_utf8-ex.pdf")              # prints "=", no warnings
plot(1,1, pch = "")
text(1, 1, "EVENT ? 30 sec")
dev.off()
# null device
#           1

sessionInfo()
# R version 4.2.1 (2022-06-23 ucrt)
# Platform: x86_64-w64-mingw32/x64 (64-bit)
# Running under: Windows 10 x64 (build 22621)
#
# Matrix products: default
#
# locale:
# [1] LC_COLLATE=Portuguese_Portugal.utf8  LC_CTYPE=Portuguese_Portugal.utf8
# [3] LC_MONETARY=Portuguese_Portugal.utf8 LC_NUMERIC=C
# [5] LC_TIME=Portuguese_Portugal.utf8
#
# attached base packages:
# [1] stats     graphics  grDevices utils     datasets  methods   base
#
# loaded via a namespace (and not attached):
# [1] compiler_4.2.1
#


Also, nice trick to print the text as plot title, I will remember that 
one-liner.

Hope this helps,

Rui Barradas


From up@n@nd@@p@n| @end|ng |rom gm@||@com  Mon Jan 16 17:39:20 2023
From: up@n@nd@@p@n| @end|ng |rom gm@||@com (Upananda Pani)
Date: Mon, 16 Jan 2023 22:09:20 +0530
Subject: [R] Reg: Frequency in declaring time series data
Message-ID: <CAEezrQTAmZvNQPTq7W3k_PY9YC_5M0VC-rE_x8EYJfFfcHxz_g@mail.gmail.com>

Dear All,

I have a time series daily data with date are stored ( %dd-%mm-%yy format )
from 22-01-20 to 03-08-21. In total I have 560 observations. I am using the
following command to declare as a time series object. Here the the data set
is 7 days a week.
oil <- read_xlsx("crudefinal.xlsx")
pricet=ts(oil$price, start = c(2020, 22), freq = 365)
roilt=ts(diff(log(oil$price))*100,start=c(2020,22), freq=365)

Shall I have to declare the dates here?  I want to know also if it is a 5
day trading a week, how to declare the frequency.

Looking forward to your reply

Regards,
Upananda Pani

Looking forward to your suggestions.

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Jan 16 21:09:56 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 16 Jan 2023 20:09:56 +0000
Subject: [R] Reg: Frequency in declaring time series data
In-Reply-To: <CAEezrQTAmZvNQPTq7W3k_PY9YC_5M0VC-rE_x8EYJfFfcHxz_g@mail.gmail.com>
References: <CAEezrQTAmZvNQPTq7W3k_PY9YC_5M0VC-rE_x8EYJfFfcHxz_g@mail.gmail.com>
Message-ID: <8ad14c34-ec70-8817-8477-114639f15638@sapo.pt>

?s 16:39 de 16/01/2023, Upananda Pani escreveu:
> Dear All,
> 
> I have a time series daily data with date are stored ( %dd-%mm-%yy format )
> from 22-01-20 to 03-08-21. In total I have 560 observations. I am using the
> following command to declare as a time series object. Here the the data set
> is 7 days a week.
> oil <- read_xlsx("crudefinal.xlsx")
> pricet=ts(oil$price, start = c(2020, 22), freq = 365)
> roilt=ts(diff(log(oil$price))*100,start=c(2020,22), freq=365)
> 
> Shall I have to declare the dates here?  I want to know also if it is a 5
> day trading a week, how to declare the frequency.
> 
> Looking forward to your reply
> 
> Regards,
> Upananda Pani
> 
> Looking forward to your suggestions.
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Package zoo is the best way of having dates in a time series. The 
package comes with several vignettes that can get you started quickly.
See the difference between classes ts and zoo below.

# make up some test data
oil <- data.frame(price = cumsum(rnorm(560)))
oil$date <- seq(as.Date("2020-01-22"), by = "1 day", length.out = 560)

# base R
pricet <- ts(oil$price, start = c(2020, 22), freq = 365)
time(pricet)
index(pricet)
plot(pricet)

#---

library(zoo)
library(ggplot2)

pricez <- zoo(oil$price, order.by = oil$date)
time(pricez)
index(pricez)
autoplot(pricez)

vignette(package = "zoo")


Hope this helps,

Rui Barradas


From up@n@nd@@p@n| @end|ng |rom gm@||@com  Mon Jan 16 21:55:22 2023
From: up@n@nd@@p@n| @end|ng |rom gm@||@com (Upananda Pani)
Date: Tue, 17 Jan 2023 02:25:22 +0530
Subject: [R] (no subject)
Message-ID: <CAEezrQR1K5fm-aL0TENW0Fxa2ieY3nH2_tTUfbhNjm97UA9BRg@mail.gmail.com>

Dear Members,



Greetings! I would like to know how to create the lag variable for my data.



# Load data and create time series object ----

oil <- read_xlsx("crudefinal.xlsx")



pricet=ts(oil$price, start = c(2020, 22), frequency = 365)

roilt=ts(diff(log(oil$price))*100,start=c(2020,22),freq=365)



# Fit MSW model ----

roilt.lag0 = window(roilt,start=c(2020,23),end=c(2021,215),freq=365) # get
al the lags right

roilt.lag1 = window(roilt,start=c(2020,22),end=c(2021,214),freq=365)

roilt.lag2 = window(roilt,start=c(2020,20),end=c(2021,213),freq=365)

roilt.lag3 = window(roilt,start=c(2020,20),end=c(2021,212),freq=365)

roilt.lag4 = window(roilt,start=c(2020,19),end=c(2021,211),freq=365)



I am getting error (length is not matching), while creating lag. I will
grateful to you if you can tell me where  I am making mistakes.



Regards,

Upananda Pani

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Jan 16 22:13:53 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 16 Jan 2023 21:13:53 +0000
Subject: [R] Reg: Frequency in declaring time series data
In-Reply-To: <CAEezrQTfXwdUdurL7qD5ZA_67iN=xAqj7SNnw8PCdeoUDGPxkw@mail.gmail.com>
References: <CAEezrQTAmZvNQPTq7W3k_PY9YC_5M0VC-rE_x8EYJfFfcHxz_g@mail.gmail.com>
 <8ad14c34-ec70-8817-8477-114639f15638@sapo.pt>
 <CAEezrQTfXwdUdurL7qD5ZA_67iN=xAqj7SNnw8PCdeoUDGPxkw@mail.gmail.com>
Message-ID: <8931072f-67dd-12d4-c3c7-602d51aff484@sapo.pt>

?s 20:52 de 16/01/2023, Upananda Pani escreveu:
> Hi Rui,
> 
> Thank you so much for your help. As I have to fit a Markov Switching Model
> using  MSwM package.
> 
> May I know whether i can convert from zoo object to a time series object.
> 
> As I have to use several packages which uses ts so I am not able to decide
> how to do it.
> 
> Grateful to you for your help and support.
> 
> With sincere regards,
> Upananda
> 
> On Tue, 17 Jan, 2023, 01:40 Rui Barradas, <ruipbarradas at sapo.pt> wrote:
> 
>> ?s 16:39 de 16/01/2023, Upananda Pani escreveu:
>>> Dear All,
>>>
>>> I have a time series daily data with date are stored ( %dd-%mm-%yy
>> format )
>>> from 22-01-20 to 03-08-21. In total I have 560 observations. I am using
>> the
>>> following command to declare as a time series object. Here the the data
>> set
>>> is 7 days a week.
>>> oil <- read_xlsx("crudefinal.xlsx")
>>> pricet=ts(oil$price, start = c(2020, 22), freq = 365)
>>> roilt=ts(diff(log(oil$price))*100,start=c(2020,22), freq=365)
>>>
>>> Shall I have to declare the dates here?  I want to know also if it is a 5
>>> day trading a week, how to declare the frequency.
>>>
>>> Looking forward to your reply
>>>
>>> Regards,
>>> Upananda Pani
>>>
>>> Looking forward to your suggestions.
>>>
>>>        [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> Hello,
>>
>> Package zoo is the best way of having dates in a time series. The
>> package comes with several vignettes that can get you started quickly.
>> See the difference between classes ts and zoo below.
>>
>> # make up some test data
>> oil <- data.frame(price = cumsum(rnorm(560)))
>> oil$date <- seq(as.Date("2020-01-22"), by = "1 day", length.out = 560)
>>
>> # base R
>> pricet <- ts(oil$price, start = c(2020, 22), freq = 365)
>> time(pricet)
>> index(pricet)
>> plot(pricet)
>>
>> #---
>>
>> library(zoo)
>> library(ggplot2)
>>
>> pricez <- zoo(oil$price, order.by = oil$date)
>> time(pricez)
>> index(pricez)
>> autoplot(pricez)
>>
>> vignette(package = "zoo")
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>>
>>
> 
Hello,

Please always cc the R-Help list.

I have no experience with package MSwM but according to the

vignette("example", package = "MSwM")

you first fit a regression model, say 'mod', and then fit an 
Autoregressive Markov Switching Model to mod. You don't need a time 
series, only a regression fit.

Hope this helps,

Rui Barradas


From jgvcq@ @end|ng |rom r|t@edu  Mon Jan 16 23:22:33 2023
From: jgvcq@ @end|ng |rom r|t@edu (Joseph Voelkel)
Date: Mon, 16 Jan 2023 22:22:33 +0000
Subject: [R] foreign package: unable to read S-Plus objects
Message-ID: <MW4PR16MB481421AF5CA072F44B22ECB1C7C19@MW4PR16MB4814.namprd16.prod.outlook.com>

Dear foreign maintainers and others,

I am trying to import a number of S-Plus objects into R. The only way I see how to do this is by using the foreign package.

However, when I try to do this I receive an error message. A snippet of code and the error message follows:

read.S(file.path(Spath, "nrand"))
Error in read.S(file.path(Spath, "nrand")) : not an S object

I no longer know the version of S-Plus in which these objects were created. I do know that I have printed documentation, dated July 2001, from S-Plus 6; and that all S-Plus objects were created in the 9/2004 -- 5/2005 range.

I am afraid that I simply have S-Plus objects that are not the S version 3 files that the foreign package can read, yes? But I am still hoping that it may be possible to read these in.

I am not attaching some sample S-Plus objects to this email, because I  believe they will be stripped away as binary files. However, a sample of these files may be found at

https://drive.google.com/drive/folders/1wFVa972ciP44Ob2YVWfqk8SGIodzAXPv?usp=sharing  (simdat is the largest file, at 469 KB)

Thank you for any assistance you may provide.

R 4.2.2
Microsoft Windows [Version 10.0.22000.1455]
foreign_0.8-83


Joe Voelkel
Professor Emeritus
RIT

	[[alternative HTML version deleted]]


From kev|n@thorpe @end|ng |rom utoronto@c@  Tue Jan 17 13:06:44 2023
From: kev|n@thorpe @end|ng |rom utoronto@c@ (Kevin Thorpe)
Date: Tue, 17 Jan 2023 12:06:44 +0000
Subject: [R] foreign package: unable to read S-Plus objects
In-Reply-To: <MW4PR16MB481421AF5CA072F44B22ECB1C7C19@MW4PR16MB4814.namprd16.prod.outlook.com>
References: <MW4PR16MB481421AF5CA072F44B22ECB1C7C19@MW4PR16MB4814.namprd16.prod.outlook.com>
Message-ID: <53E29231-D77F-4DE4-A9A0-A1AD29776BCB@utoronto.ca>

I think you may be right about the cause. From the, ?R Data Import/Export? document I find,

Function read.S which can read binary objects produced by S-PLUS 3.x, 4.x or 2000 on (32-bit) Unix or Windows (and can read them on a different OS). This is able to read many but not all S objects: in particular it can read vectors, matrices and data frames and lists containing those.

This suggests that the binary objects you have cannot be read by this function. The next two paragraphs read,

Function data.restore reads S-PLUS data dumps (created by data.dump) with the same restrictions (except that dumps from the Alpha platform can also be read). It should be possible to read data dumps from S-PLUS 5.x and later written with data.dump(oldStyle=T).

If you have access to S-PLUS, it is usually more reliable to dump the object(s) in S-PLUS and source the dump file in R. For S-PLUS 5.x and later you may need to use dump(..., oldStyle=T), and to read in very large objects it may be preferable to use the dump file as a batch script rather than use the source function.

I think this means that if you had dumped versions of the files you could read them back with data.restore() or source().


> On Jan 16, 2023, at 5:22 PM, Joseph Voelkel <jgvcqa at rit.edu> wrote:
> 
> [You don't often get email from jgvcqa at rit.edu. Learn why this is important at https://aka.ms/LearnAboutSenderIdentification ]
> 
> Dear foreign maintainers and others,
> 
> I am trying to import a number of S-Plus objects into R. The only way I see how to do this is by using the foreign package.
> 
> However, when I try to do this I receive an error message. A snippet of code and the error message follows:
> 
> read.S(file.path(Spath, "nrand"))
> Error in read.S(file.path(Spath, "nrand")) : not an S object
> 
> I no longer know the version of S-Plus in which these objects were created. I do know that I have printed documentation, dated July 2001, from S-Plus 6; and that all S-Plus objects were created in the 9/2004 -- 5/2005 range.
> 
> I am afraid that I simply have S-Plus objects that are not the S version 3 files that the foreign package can read, yes? But I am still hoping that it may be possible to read these in.
> 
> I am not attaching some sample S-Plus objects to this email, because I  believe they will be stripped away as binary files. However, a sample of these files may be found at
> 
> https://drive.google.com/drive/folders/1wFVa972ciP44Ob2YVWfqk8SGIodzAXPv?usp=sharing  (simdat is the largest file, at 469 KB)
> 
> Thank you for any assistance you may provide.
> 
> R 4.2.2
> Microsoft Windows [Version 10.0.22000.1455]
> foreign_0.8-83
> 
> 
> Joe Voelkel
> Professor Emeritus
> RIT
> 
>        [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Kevin E. Thorpe
Head of Biostatistics,  Applied Health Research Centre (AHRC)
Li Ka Shing Knowledge Institute of St. Michael?s Hospital
Assistant Professor, Dalla Lana School of Public Health
University of Toronto
email: kevin.thorpe at utoronto.ca  Tel: 416.864.5776  Fax: 416.864.3016


From wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n|  Tue Jan 17 14:21:03 2023
From: wo||g@ng@v|echtb@uer @end|ng |rom m@@@tr|chtun|ver@|ty@n| (Viechtbauer, Wolfgang (NP))
Date: Tue, 17 Jan 2023 13:21:03 +0000
Subject: [R] foreign package: unable to read S-Plus objects
In-Reply-To: <53E29231-D77F-4DE4-A9A0-A1AD29776BCB@utoronto.ca>
References: <MW4PR16MB481421AF5CA072F44B22ECB1C7C19@MW4PR16MB4814.namprd16.prod.outlook.com>
 <53E29231-D77F-4DE4-A9A0-A1AD29776BCB@utoronto.ca>
Message-ID: <519674e059214bf6b310c2fedaef47f4@UM-MAIL3214.unimaas.nl>

@Joe: I have S-Plus 6.0 ("Professional Edition Version 6.0.3 Release 2 for Microsoft Windows : 2001") running here and can't load them there either. Tried simdat and S-Plus apparently thinks it is a script and then you just get a garbled up mess. Tried to change it to simdat.sdd and a few other extensions, but this didn't help.

Also tried:

data.restore("simdat")

but this also didn't work:

Warning messages:
  file "simdat": incomplete last line
Problem: in reading invalid mode for data: [again a garbled mess] at line 2

Not sure how else these are supposed to be read into S-Plus (and if they are even compatible with this version, although version 6 was the current version between 2001 and 2005).

Best,
Wolfgang

>-----Original Message-----
>From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Kevin Thorpe
>Sent: Tuesday, 17 January, 2023 13:07
>To: Joseph Voelkel
>Cc: R Help Mailing List
>Subject: Re: [R] foreign package: unable to read S-Plus objects
>
>I think you may be right about the cause. From the, ?R Data Import/Export?
>document I find,
>
>Function read.S which can read binary objects produced by S-PLUS 3.x, 4.x or 2000
>on (32-bit) Unix or Windows (and can read them on a different OS). This is able
>to read many but not all S objects: in particular it can read vectors, matrices
>and data frames and lists containing those.
>
>This suggests that the binary objects you have cannot be read by this function.
>The next two paragraphs read,
>
>Function data.restore reads S-PLUS data dumps (created by data.dump) with the
>same restrictions (except that dumps from the Alpha platform can also be read).
>It should be possible to read data dumps from S-PLUS 5.x and later written with
>data.dump(oldStyle=T).
>
>If you have access to S-PLUS, it is usually more reliable to dump the object(s)
>in S-PLUS and source the dump file in R. For S-PLUS 5.x and later you may need to
>use dump(..., oldStyle=T), and to read in very large objects it may be preferable
>to use the dump file as a batch script rather than use the source function.
>
>I think this means that if you had dumped versions of the files you could read
>them back with data.restore() or source().
>
>> On Jan 16, 2023, at 5:22 PM, Joseph Voelkel <jgvcqa at rit.edu> wrote:
>>
>> [You don't often get email from jgvcqa at rit.edu. Learn why this is important at
>https://aka.ms/LearnAboutSenderIdentification ]
>>
>> Dear foreign maintainers and others,
>>
>> I am trying to import a number of S-Plus objects into R. The only way I see how
>to do this is by using the foreign package.
>>
>> However, when I try to do this I receive an error message. A snippet of code
>and the error message follows:
>>
>> read.S(file.path(Spath, "nrand"))
>> Error in read.S(file.path(Spath, "nrand")) : not an S object
>>
>> I no longer know the version of S-Plus in which these objects were created. I
>do know that I have printed documentation, dated July 2001, from S-Plus 6; and
>that all S-Plus objects were created in the 9/2004 -- 5/2005 range.
>>
>> I am afraid that I simply have S-Plus objects that are not the S version 3
>files that the foreign package can read, yes? But I am still hoping that it may
>be possible to read these in.
>>
>> I am not attaching some sample S-Plus objects to this email, because I  believe
>they will be stripped away as binary files. However, a sample of these files may
>be found at
>>
>>
>https://drive.google.com/drive/folders/1wFVa972ciP44Ob2YVWfqk8SGIodzAXPv?usp=shar
>ing  (simdat is the largest file, at 469 KB)
>>
>> Thank you for any assistance you may provide.
>>
>> R 4.2.2
>> Microsoft Windows [Version 10.0.22000.1455]
>> foreign_0.8-83
>>
>> Joe Voelkel
>> Professor Emeritus
>> RIT

From rhe|p @end|ng |rom eoo@@dd@@n|  Tue Jan 17 15:08:40 2023
From: rhe|p @end|ng |rom eoo@@dd@@n| (Jan van der Laan)
Date: Tue, 17 Jan 2023 15:08:40 +0100
Subject: [R] foreign package: unable to read S-Plus objects
In-Reply-To: <MW4PR16MB481421AF5CA072F44B22ECB1C7C19@MW4PR16MB4814.namprd16.prod.outlook.com>
References: <MW4PR16MB481421AF5CA072F44B22ECB1C7C19@MW4PR16MB4814.namprd16.prod.outlook.com>
Message-ID: <797d901d-054c-c9ae-8970-a0892713d1e9@eoos.dds.nl>

You could try to see what stattransfer can make of it. They have a free 
version that imports only part of the data. You could use that to see if 
stattransfer would help and perhaps discover what format it is in.

HTH
Jsn


On 16-01-2023 23:22, Joseph Voelkel wrote:
> Dear foreign maintainers and others,
> 
> I am trying to import a number of S-Plus objects into R. The only way I see how to do this is by using the foreign package.
> 
> However, when I try to do this I receive an error message. A snippet of code and the error message follows:
> 
> read.S(file.path(Spath, "nrand"))
> Error in read.S(file.path(Spath, "nrand")) : not an S object
> 
> I no longer know the version of S-Plus in which these objects were created. I do know that I have printed documentation, dated July 2001, from S-Plus 6; and that all S-Plus objects were created in the 9/2004 -- 5/2005 range.
> 
> I am afraid that I simply have S-Plus objects that are not the S version 3 files that the foreign package can read, yes? But I am still hoping that it may be possible to read these in.
> 
> I am not attaching some sample S-Plus objects to this email, because I  believe they will be stripped away as binary files. However, a sample of these files may be found at
> 
> https://drive.google.com/drive/folders/1wFVa972ciP44Ob2YVWfqk8SGIodzAXPv?usp=sharing  (simdat is the largest file, at 469 KB)
> 
> Thank you for any assistance you may provide.
> 
> R 4.2.2
> Microsoft Windows [Version 10.0.22000.1455]
> foreign_0.8-83
> 
> 
> Joe Voelkel
> Professor Emeritus
> RIT
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Tue Jan 17 16:04:12 2023
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Tue, 17 Jan 2023 16:04:12 +0100
Subject: [R] foreign package: unable to read S-Plus objects
In-Reply-To: <519674e059214bf6b310c2fedaef47f4@UM-MAIL3214.unimaas.nl>
References: <MW4PR16MB481421AF5CA072F44B22ECB1C7C19@MW4PR16MB4814.namprd16.prod.outlook.com>
 <53E29231-D77F-4DE4-A9A0-A1AD29776BCB@utoronto.ca>
 <519674e059214bf6b310c2fedaef47f4@UM-MAIL3214.unimaas.nl>
Message-ID: <a2fff60d-57ac-2757-d4b7-6a1cf688b3e1@statistik.tu-dortmund.de>

I just checked the header:

read.S from foreign expects:

  readheader <- function(s) {
         head <- readBin(s, "int", 8L, 1L)
         all(head == c(0L, 83L, 32L, 100L, 97L, 116L, 97L, 1L))
     }

but head is

[1]  0 83 32 86 52 45 77  3

i.e. similar but not identical, so a different format is used (S-PLUS 6 
or later).
Likely, it is not too hard to write some import function based on read.S 
if the file format is documented anywhere. Unfortunately, I do not find 
any web resources for it.


So simplest way would be to install the old S-PLUS version and export 
all data in a readable format.

Best,
Uwe Ligges



On 17.01.2023 14:21, Viechtbauer, Wolfgang (NP) wrote:
> @Joe: I have S-Plus 6.0 ("Professional Edition Version 6.0.3 Release 2 for Microsoft Windows : 2001") running here and can't load them there either. Tried simdat and S-Plus apparently thinks it is a script and then you just get a garbled up mess. Tried to change it to simdat.sdd and a few other extensions, but this didn't help.
> 
> Also tried:
> 
> data.restore("simdat")
> 
> but this also didn't work:
> 
> Warning messages:
>    file "simdat": incomplete last line
> Problem: in reading invalid mode for data: [again a garbled mess] at line 2
> 
> Not sure how else these are supposed to be read into S-Plus (and if they are even compatible with this version, although version 6 was the current version between 2001 and 2005).
> 
> Best,
> Wolfgang
> 
>> -----Original Message-----
>> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Kevin Thorpe
>> Sent: Tuesday, 17 January, 2023 13:07
>> To: Joseph Voelkel
>> Cc: R Help Mailing List
>> Subject: Re: [R] foreign package: unable to read S-Plus objects
>>
>> I think you may be right about the cause. From the, ?R Data Import/Export?
>> document I find,
>>
>> Function read.S which can read binary objects produced by S-PLUS 3.x, 4.x or 2000
>> on (32-bit) Unix or Windows (and can read them on a different OS). This is able
>> to read many but not all S objects: in particular it can read vectors, matrices
>> and data frames and lists containing those.
>>
>> This suggests that the binary objects you have cannot be read by this function.
>> The next two paragraphs read,
>>
>> Function data.restore reads S-PLUS data dumps (created by data.dump) with the
>> same restrictions (except that dumps from the Alpha platform can also be read).
>> It should be possible to read data dumps from S-PLUS 5.x and later written with
>> data.dump(oldStyle=T).
>>
>> If you have access to S-PLUS, it is usually more reliable to dump the object(s)
>> in S-PLUS and source the dump file in R. For S-PLUS 5.x and later you may need to
>> use dump(..., oldStyle=T), and to read in very large objects it may be preferable
>> to use the dump file as a batch script rather than use the source function.
>>
>> I think this means that if you had dumped versions of the files you could read
>> them back with data.restore() or source().
>>
>>> On Jan 16, 2023, at 5:22 PM, Joseph Voelkel <jgvcqa at rit.edu> wrote:
>>>
>>> [You don't often get email from jgvcqa at rit.edu. Learn why this is important at
>> https://aka.ms/LearnAboutSenderIdentification ]
>>>
>>> Dear foreign maintainers and others,
>>>
>>> I am trying to import a number of S-Plus objects into R. The only way I see how
>> to do this is by using the foreign package.
>>>
>>> However, when I try to do this I receive an error message. A snippet of code
>> and the error message follows:
>>>
>>> read.S(file.path(Spath, "nrand"))
>>> Error in read.S(file.path(Spath, "nrand")) : not an S object
>>>
>>> I no longer know the version of S-Plus in which these objects were created. I
>> do know that I have printed documentation, dated July 2001, from S-Plus 6; and
>> that all S-Plus objects were created in the 9/2004 -- 5/2005 range.
>>>
>>> I am afraid that I simply have S-Plus objects that are not the S version 3
>> files that the foreign package can read, yes? But I am still hoping that it may
>> be possible to read these in.
>>>
>>> I am not attaching some sample S-Plus objects to this email, because I  believe
>> they will be stripped away as binary files. However, a sample of these files may
>> be found at
>>>
>>>
>> https://drive.google.com/drive/folders/1wFVa972ciP44Ob2YVWfqk8SGIodzAXPv?usp=shar
>> ing  (simdat is the largest file, at 469 KB)
>>>
>>> Thank you for any assistance you may provide.
>>>
>>> R 4.2.2
>>> Microsoft Windows [Version 10.0.22000.1455]
>>> foreign_0.8-83
>>>
>>> Joe Voelkel
>>> Professor Emeritus
>>> RIT
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From up@n@nd@@p@n| @end|ng |rom gm@||@com  Tue Jan 17 17:28:54 2023
From: up@n@nd@@p@n| @end|ng |rom gm@||@com (Upananda Pani)
Date: Tue, 17 Jan 2023 21:58:54 +0530
Subject: [R] Fwd:  Reg: Frequency in declaring time series data
In-Reply-To: <CAEezrQTfXwdUdurL7qD5ZA_67iN=xAqj7SNnw8PCdeoUDGPxkw@mail.gmail.com>
References: <CAEezrQTAmZvNQPTq7W3k_PY9YC_5M0VC-rE_x8EYJfFfcHxz_g@mail.gmail.com>
 <8ad14c34-ec70-8817-8477-114639f15638@sapo.pt>
 <CAEezrQTfXwdUdurL7qD5ZA_67iN=xAqj7SNnw8PCdeoUDGPxkw@mail.gmail.com>
Message-ID: <CAEezrQTZyzSww+dUa2dwJt3gEc1C=cgR=DOgSmD+P=cf_9ffmw@mail.gmail.com>

Hi Rui,

Thank you so much for your help. As I have to fit a Markov Switching Model
using  MSwM package.

May I know whether i can convert from zoo object to a time series object.

As I have to use several packages which uses ts so I am not able to decide
how to do it.

Grateful to you for your help and support.

With sincere regards,
Upananda

On Tue, 17 Jan, 2023, 01:40 Rui Barradas, <ruipbarradas at sapo.pt> wrote:

> ?s 16:39 de 16/01/2023, Upananda Pani escreveu:
> > Dear All,
> >
> > I have a time series daily data with date are stored ( %dd-%mm-%yy
> format )
> > from 22-01-20 to 03-08-21. In total I have 560 observations. I am using
> the
> > following command to declare as a time series object. Here the the data
> set
> > is 7 days a week.
> > oil <- read_xlsx("crudefinal.xlsx")
> > pricet=ts(oil$price, start = c(2020, 22), freq = 365)
> > roilt=ts(diff(log(oil$price))*100,start=c(2020,22), freq=365)
> >
> > Shall I have to declare the dates here?  I want to know also if it is a 5
> > day trading a week, how to declare the frequency.
> >
> > Looking forward to your reply
> >
> > Regards,
> > Upananda Pani
> >
> > Looking forward to your suggestions.
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> Hello,
>
> Package zoo is the best way of having dates in a time series. The
> package comes with several vignettes that can get you started quickly.
> See the difference between classes ts and zoo below.
>
> # make up some test data
> oil <- data.frame(price = cumsum(rnorm(560)))
> oil$date <- seq(as.Date("2020-01-22"), by = "1 day", length.out = 560)
>
> # base R
> pricet <- ts(oil$price, start = c(2020, 22), freq = 365)
> time(pricet)
> index(pricet)
> plot(pricet)
>
> #---
>
> library(zoo)
> library(ggplot2)
>
> pricez <- zoo(oil$price, order.by = oil$date)
> time(pricez)
> index(pricez)
> autoplot(pricez)
>
> vignette(package = "zoo")
>
>
> Hope this helps,
>
> Rui Barradas
>
>
>

	[[alternative HTML version deleted]]


From up@n@nd@@p@n| @end|ng |rom gm@||@com  Tue Jan 17 17:31:04 2023
From: up@n@nd@@p@n| @end|ng |rom gm@||@com (Upananda Pani)
Date: Tue, 17 Jan 2023 22:01:04 +0530
Subject: [R] Reg: lag transformation of time series data
Message-ID: <CAEezrQS_PK6PXiE4rNFrF8je5QmpazOXf4pw9NyePixYDFA+VQ@mail.gmail.com>

Dear Members,



Greetings! I would like to know how to create the lag variable for my data.



# Load data and create time series object ----

oil <- read_xlsx("crudefinal.xlsx")



pricet=ts(oil$price, start = c(2020, 22), frequency = 365)

roilt=ts(diff(log(oil$price))*100,start=c(2020,22),freq=365)



# Fit MSW model ----

roilt.lag0 = window(roilt,start=c(2020,23),end=c(2021,215),freq=365) # get
al the lags right

roilt.lag1 = window(roilt,start=c(2020,22),end=c(2021,214),freq=365)

roilt.lag2 = window(roilt,start=c(2020,20),end=c(2021,213),freq=365)

roilt.lag3 = window(roilt,start=c(2020,20),end=c(2021,212),freq=365)

roilt.lag4 = window(roilt,start=c(2020,19),end=c(2021,211),freq=365)



I am getting error (length is not matching), while creating lag. I will
grateful to you if you can tell me where  I am making mistakes.



Regards,

Upananda Pani

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Tue Jan 17 17:51:59 2023
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Tue, 17 Jan 2023 18:51:59 +0200
Subject: [R] Fwd: Reg: Frequency in declaring time series data
In-Reply-To: <CAEezrQTZyzSww+dUa2dwJt3gEc1C=cgR=DOgSmD+P=cf_9ffmw@mail.gmail.com>
References: <CAEezrQTAmZvNQPTq7W3k_PY9YC_5M0VC-rE_x8EYJfFfcHxz_g@mail.gmail.com>
 <8ad14c34-ec70-8817-8477-114639f15638@sapo.pt>
 <CAEezrQTfXwdUdurL7qD5ZA_67iN=xAqj7SNnw8PCdeoUDGPxkw@mail.gmail.com>
 <CAEezrQTZyzSww+dUa2dwJt3gEc1C=cgR=DOgSmD+P=cf_9ffmw@mail.gmail.com>
Message-ID: <CAGgJW74CpFky40bZKn7Vp2V6DMNCRJxJRPBuUsT8_wkSSG_XvQ@mail.gmail.com>

Hi Upananda,
A few comments:
1. As you know, CRAN has thousands of packages. One of the ways to
learn about the packages you might care about is to use the CRAN
views. A 'view' is an attempt to provide some information on a certain
subset of the packages related to a particular area.
See a list of the views at: https://cran.r-project.org/web/views/
2. In your case, you might be interested in the 'Time Series' view:
https://cran.r-project.org/web/views/TimeSeries.html
3. On that page, the subsection 'Time Series Classes' mentions two
packages, 'tsbox' and 'timetk' which provide tools to convert between
different representations of time series used in different packages. I
have not used either of these packages, but perhaps they could be of
use to you.
4. For financial time series, it is often useful to have the exact
dates. Rui mentioned the zoo package. I often use the xts package.
xts = eXtensible Time Series. The xts package is an extension of the
zoo package.
5. If your data is coming from market prices, and you have daily data
corresponding to market prices, then presumably you don't have weekend
or holiday prices (when the markets are closed). This leads to about
250 or 252 trading days per year (52 weeks X 5 days/wk = 260, minus
8-10 holidays). It is standard in financial calculations to annualize
based on 250 or 252. So, you might want to specify a frequency of 250
or 252 in your time series when creating a ts object.

I hope that helps,
Eric


On Tue, Jan 17, 2023 at 6:29 PM Upananda Pani <upananda.pani at gmail.com> wrote:
>
> Hi Rui,
>
> Thank you so much for your help. As I have to fit a Markov Switching Model
> using  MSwM package.
>
> May I know whether i can convert from zoo object to a time series object.
>
> As I have to use several packages which uses ts so I am not able to decide
> how to do it.
>
> Grateful to you for your help and support.
>
> With sincere regards,
> Upananda
>
> On Tue, 17 Jan, 2023, 01:40 Rui Barradas, <ruipbarradas at sapo.pt> wrote:
>
> > ?s 16:39 de 16/01/2023, Upananda Pani escreveu:
> > > Dear All,
> > >
> > > I have a time series daily data with date are stored ( %dd-%mm-%yy
> > format )
> > > from 22-01-20 to 03-08-21. In total I have 560 observations. I am using
> > the
> > > following command to declare as a time series object. Here the the data
> > set
> > > is 7 days a week.
> > > oil <- read_xlsx("crudefinal.xlsx")
> > > pricet=ts(oil$price, start = c(2020, 22), freq = 365)
> > > roilt=ts(diff(log(oil$price))*100,start=c(2020,22), freq=365)
> > >
> > > Shall I have to declare the dates here?  I want to know also if it is a 5
> > > day trading a week, how to declare the frequency.
> > >
> > > Looking forward to your reply
> > >
> > > Regards,
> > > Upananda Pani
> > >
> > > Looking forward to your suggestions.
> > >
> > >       [[alternative HTML version deleted]]
> > >
> > > ______________________________________________
> > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > > and provide commented, minimal, self-contained, reproducible code.
> > Hello,
> >
> > Package zoo is the best way of having dates in a time series. The
> > package comes with several vignettes that can get you started quickly.
> > See the difference between classes ts and zoo below.
> >
> > # make up some test data
> > oil <- data.frame(price = cumsum(rnorm(560)))
> > oil$date <- seq(as.Date("2020-01-22"), by = "1 day", length.out = 560)
> >
> > # base R
> > pricet <- ts(oil$price, start = c(2020, 22), freq = 365)
> > time(pricet)
> > index(pricet)
> > plot(pricet)
> >
> > #---
> >
> > library(zoo)
> > library(ggplot2)
> >
> > pricez <- zoo(oil$price, order.by = oil$date)
> > time(pricez)
> > index(pricez)
> > autoplot(pricez)
> >
> > vignette(package = "zoo")
> >
> >
> > Hope this helps,
> >
> > Rui Barradas
> >
> >
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From @vi@e@gross m@iii@g oii gm@ii@com  Tue Jan 17 21:30:04 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Tue, 17 Jan 2023 15:30:04 -0500
Subject: [R] foreign package: unable to read S-Plus objects
In-Reply-To: <797d901d-054c-c9ae-8970-a0892713d1e9@eoos.dds.nl>
References: <MW4PR16MB481421AF5CA072F44B22ECB1C7C19@MW4PR16MB4814.namprd16.prod.outlook.com>
 <797d901d-054c-c9ae-8970-a0892713d1e9@eoos.dds.nl>
Message-ID: <001c01d92ab2$7bdd5b70$73981250$@gmail.com>

Just an idea if this is a one-time need to copy static data once used in
non-R to R. You are a bit vague about what you mean by "objects."

If you can find someone who uses S or S+ then maybe they can load the data
in and export it in some format usable for you and send you those files. If,
for example, your data is just a data.frame, they can send it as a .CSV file
or any format you want. Once you have it, you can read it into R and save it
any other way you wish.

If the data is something more complex like a dump of all kinds of variables,
this may not be practical but I have to wonder how much it and R have
diverged all these years and whether it would be something you can import
and continue running with.

I downloaded the files and they seem to be in a folder with 8 files that
have no suffixes with sizes ranging from 1KB to 469  KB so nothing gigantic.
The big files is simdata and two smaller files called simmax and simmean may
well be related  but I have to wonder if the way to view them is at the
folder level as a grouped entity or the individual file level.

I wonder if there is a trial version of the software you could get from
whoever sells it, like TIBCO.

Good luck with that. 

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jan van der Laan
Sent: Tuesday, January 17, 2023 9:09 AM
To: r-help at r-project.org
Subject: Re: [R] foreign package: unable to read S-Plus objects

You could try to see what stattransfer can make of it. They have a free
version that imports only part of the data. You could use that to see if
stattransfer would help and perhaps discover what format it is in.

HTH
Jsn


On 16-01-2023 23:22, Joseph Voelkel wrote:
> Dear foreign maintainers and others,
> 
> I am trying to import a number of S-Plus objects into R. The only way I
see how to do this is by using the foreign package.
> 
> However, when I try to do this I receive an error message. A snippet of
code and the error message follows:
> 
> read.S(file.path(Spath, "nrand"))
> Error in read.S(file.path(Spath, "nrand")) : not an S object
> 
> I no longer know the version of S-Plus in which these objects were
created. I do know that I have printed documentation, dated July 2001, from
S-Plus 6; and that all S-Plus objects were created in the 9/2004 -- 5/2005
range.
> 
> I am afraid that I simply have S-Plus objects that are not the S version 3
files that the foreign package can read, yes? But I am still hoping that it
may be possible to read these in.
> 
> I am not attaching some sample S-Plus objects to this email, because I  
> believe they will be stripped away as binary files. However, a sample 
> of these files may be found at
> 
> https://drive.google.com/drive/folders/1wFVa972ciP44Ob2YVWfqk8SGIodzAX
> Pv?usp=sharing  (simdat is the largest file, at 469 KB)
> 
> Thank you for any assistance you may provide.
> 
> R 4.2.2
> Microsoft Windows [Version 10.0.22000.1455]
> foreign_0.8-83
> 
> 
> Joe Voelkel
> Professor Emeritus
> RIT
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see 
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From jgvcq@ @end|ng |rom r|t@edu  Tue Jan 17 16:42:43 2023
From: jgvcq@ @end|ng |rom r|t@edu (Joseph Voelkel)
Date: Tue, 17 Jan 2023 15:42:43 +0000
Subject: [R] foreign package: unable to read S-Plus objects
In-Reply-To: <a2fff60d-57ac-2757-d4b7-6a1cf688b3e1@statistik.tu-dortmund.de>
References: <MW4PR16MB481421AF5CA072F44B22ECB1C7C19@MW4PR16MB4814.namprd16.prod.outlook.com>
 <53E29231-D77F-4DE4-A9A0-A1AD29776BCB@utoronto.ca>
 <519674e059214bf6b310c2fedaef47f4@UM-MAIL3214.unimaas.nl>
 <a2fff60d-57ac-2757-d4b7-6a1cf688b3e1@statistik.tu-dortmund.de>
Message-ID: <MW4PR16MB481410133D3FF7318720BC03C7C69@MW4PR16MB4814.namprd16.prod.outlook.com>

Thank you for the response, and the reasoning behind. I will try to do as you suggested.

Joe
________________________________
From: Uwe Ligges <ligges at statistik.tu-dortmund.de>
Sent: Tuesday, January 17, 2023 10:04 AM
To: Viechtbauer, Wolfgang (NP) <wolfgang.viechtbauer at maastrichtuniversity.nl>; Kevin Thorpe <kevin.thorpe at utoronto.ca>; Joseph Voelkel <jgvcqa at rit.edu>
Cc: R Help Mailing List <R-help at r-project.org>
Subject: Re: [R] foreign package: unable to read S-Plus objects

I just checked the header:

read.S from foreign expects:

  readheader <- function(s) {
         head <- readBin(s, "int", 8L, 1L)
         all(head == c(0L, 83L, 32L, 100L, 97L, 116L, 97L, 1L))
     }

but head is

[1]  0 83 32 86 52 45 77  3

i.e. similar but not identical, so a different format is used (S-PLUS 6
or later).
Likely, it is not too hard to write some import function based on read.S
if the file format is documented anywhere. Unfortunately, I do not find
any web resources for it.


So simplest way would be to install the old S-PLUS version and export
all data in a readable format.

Best,
Uwe Ligges



On 17.01.2023 14:21, Viechtbauer, Wolfgang (NP) wrote:
> @Joe: I have S-Plus 6.0 ("Professional Edition Version 6.0.3 Release 2 for Microsoft Windows : 2001") running here and can't load them there either. Tried simdat and S-Plus apparently thinks it is a script and then you just get a garbled up mess. Tried to change it to simdat.sdd and a few other extensions, but this didn't help.
>
> Also tried:
>
> data.restore("simdat")
>
> but this also didn't work:
>
> Warning messages:
>    file "simdat": incomplete last line
> Problem: in reading invalid mode for data: [again a garbled mess] at line 2
>
> Not sure how else these are supposed to be read into S-Plus (and if they are even compatible with this version, although version 6 was the current version between 2001 and 2005).
>
> Best,
> Wolfgang
>
>> -----Original Message-----
>> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Kevin Thorpe
>> Sent: Tuesday, 17 January, 2023 13:07
>> To: Joseph Voelkel
>> Cc: R Help Mailing List
>> Subject: Re: [R] foreign package: unable to read S-Plus objects
>>
>> I think you may be right about the cause. From the, ?R Data Import/Export?
>> document I find,
>>
>> Function read.S which can read binary objects produced by S-PLUS 3.x, 4.x or 2000
>> on (32-bit) Unix or Windows (and can read them on a different OS). This is able
>> to read many but not all S objects: in particular it can read vectors, matrices
>> and data frames and lists containing those.
>>
>> This suggests that the binary objects you have cannot be read by this function.
>> The next two paragraphs read,
>>
>> Function data.restore reads S-PLUS data dumps (created by data.dump) with the
>> same restrictions (except that dumps from the Alpha platform can also be read).
>> It should be possible to read data dumps from S-PLUS 5.x and later written with
>> data.dump(oldStyle=T).
>>
>> If you have access to S-PLUS, it is usually more reliable to dump the object(s)
>> in S-PLUS and source the dump file in R. For S-PLUS 5.x and later you may need to
>> use dump(..., oldStyle=T), and to read in very large objects it may be preferable
>> to use the dump file as a batch script rather than use the source function.
>>
>> I think this means that if you had dumped versions of the files you could read
>> them back with data.restore() or source().
>>
>>> On Jan 16, 2023, at 5:22 PM, Joseph Voelkel <jgvcqa at rit.edu> wrote:
>>>
>>> [You don't often get email from jgvcqa at rit.edu. Learn why this is important at
>> https://aka.ms/LearnAboutSenderIdentification ]
>>>
>>> Dear foreign maintainers and others,
>>>
>>> I am trying to import a number of S-Plus objects into R. The only way I see how
>> to do this is by using the foreign package.
>>>
>>> However, when I try to do this I receive an error message. A snippet of code
>> and the error message follows:
>>>
>>> read.S(file.path(Spath, "nrand"))
>>> Error in read.S(file.path(Spath, "nrand")) : not an S object
>>>
>>> I no longer know the version of S-Plus in which these objects were created. I
>> do know that I have printed documentation, dated July 2001, from S-Plus 6; and
>> that all S-Plus objects were created in the 9/2004 -- 5/2005 range.
>>>
>>> I am afraid that I simply have S-Plus objects that are not the S version 3
>> files that the foreign package can read, yes? But I am still hoping that it may
>> be possible to read these in.
>>>
>>> I am not attaching some sample S-Plus objects to this email, because I  believe
>> they will be stripped away as binary files. However, a sample of these files may
>> be found at
>>>
>>>
>> https://drive.google.com/drive/folders/1wFVa972ciP44Ob2YVWfqk8SGIodzAXPv?usp=shar
>> ing  (simdat is the largest file, at 469 KB)
>>>
>>> Thank you for any assistance you may provide.
>>>
>>> R 4.2.2
>>> Microsoft Windows [Version 10.0.22000.1455]
>>> foreign_0.8-83
>>>
>>> Joe Voelkel
>>> Professor Emeritus
>>> RIT
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From up@n@nd@@p@n| @end|ng |rom gm@||@com  Wed Jan 18 09:57:48 2023
From: up@n@nd@@p@n| @end|ng |rom gm@||@com (Upananda Pani)
Date: Wed, 18 Jan 2023 14:27:48 +0530
Subject: [R] Reg: Defining Lagged value of a time series variable
Message-ID: <CAEezrQQzS77NThsdx2gViv53SR3OFMWN9rmpf_WU_Yy4e4yLNA@mail.gmail.com>

Dear Members,


Greetings! I would like to know how to create the lag variable for my data.
# Load data and create time series object ----

oil <- read_xlsx("crudefinal.xlsx")


pricet=ts(oil$price, start = c(2020, 22), frequency = 365)

roilt=ts(diff(log(oil$price))*100,start=c(2020,22),freq=365)



# Fit MSW model ----

roilt.lag0 = window(roilt,start=c(2020,23),end=c(2021,215),freq=365) # get
al the lags right

roilt.lag1 = window(roilt,start=c(2020,22),end=c(2021,214),freq=365)

roilt.lag2 = window(roilt,start=c(2020,20),end=c(2021,213),freq=365)

roilt.lag3 = window(roilt,start=c(2020,20),end=c(2021,212),freq=365)

roilt.lag4 = window(roilt,start=c(2020,19),end=c(2021,211),freq=365)



I am getting error (length is not matching), while creating lag. I will
grateful to you if you can tell me where  I am making mistakes.



Regards,

Upananda Pani

	[[alternative HTML version deleted]]


From tr|ng @end|ng |rom gvdnet@dk  Thu Jan 19 10:41:22 2023
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Thu, 19 Jan 2023 10:41:22 +0100
Subject: [R] R emulation of FindRoot in Mathematica
Message-ID: <2db9a526-58e9-40c3-623f-ca8db99ba80b@gvdnet.dk>

Hi friends - I hope this is not a misplaced question. From the 
literature (Kushmerick AJP 1997;272:C1739-C1747) I have a series of 
Mathematica equations which are solved together to yield over different 
pH values the concentrations of metabolites in skeletal muscle using the 
Mathematica function FindRoot((E1,E2...),(V2,V2..)] where E is a list of 
equations and V list of variables.? Most of the equations are individual 
binding reactions of the form 10^6.494*atp*h == hatp and next 
10^9.944*hatp*h ==hhatp describing binding of singe protons or Mg or K 
to ATP or creatin for example, but we also have constraints giving total 
concentrations of say ATP i.e. ATP + ATPH, ATPH2..ATP.Mg

I have, without success, tried to find ways to do this in R - I have 36 
equations on 36 variables and 8 equations on total concentrations. As 
far as I can see from the definition of FindRoot in Wolfram, Newton 
search or secant search is employed.

I'm on Windows R 4.2.2

Best wishes
Troels Ring, MD
Aalborg, Denmark


From pd@|gd @end|ng |rom gm@||@com  Thu Jan 19 12:49:29 2023
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Thu, 19 Jan 2023 12:49:29 +0100
Subject: [R] 
 MLE Estimation of Gamma Distribution Parameters for data with
 'zeros'
In-Reply-To: <CAGxFJbT3HZLWs9V0NpMcdz6EPP1KbDzBmP5jmwYDFp_6=4LNng@mail.gmail.com>
References: <CAPO0VmZxiSzzpsKVQPpsMSodKM1qisXNCfR1Zm32T9=70se_MQ@mail.gmail.com>
 <CAGxFJbT3HZLWs9V0NpMcdz6EPP1KbDzBmP5jmwYDFp_6=4LNng@mail.gmail.com>
Message-ID: <3C467016-F2E5-413B-B893-2F25682AD587@gmail.com>

Not necessarily homework, Bert. There's a generic issue with MLE and rounded data, in that gamma densities may be 0 at the boundary but small numbers are represented as 0, making the log-likelihood -Inf. 

The cleanest way out is to switch to a discretized distribution in the likelihood, so that instead of log(dgamma(0,...)) you use log(pgamma(.005,..) - pgamma(0,...)) == pgamma(.005,..., log=TRUE). (For data rounded to nearest .01, that is). Cruder techniques would be to just add, like, .0025 to all the zeros. 

-pd

> On 10 Jan 2023, at 18:42 , Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
> Is this homework? This list has a no-homework policy.
> 
> 
> -- Bert
> 
> On Tue, Jan 10, 2023 at 8:13 AM Nyasha <kahuninyasha13296 at gmail.com> wrote:
>> 
>> Please how can one go about this one? I don't know how to go about it.
>> 
>>        [[alternative HTML version deleted]]
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jan 19 11:27:04 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Thu, 19 Jan 2023 05:27:04 -0500
Subject: [R] The rgl package update may affect your scripts
Message-ID: <886425b7-6dc3-4f1d-b277-a0d3d946a736@gmail.com>

To all users of the rgl package:

CRAN has just accepted an update of rgl to version 1.0.1.

This release deprecates a number of functions which have been in the 
package for a very long time, and this may affect your scripts.  Here 
are the news items about it:

  * The long promised deprecations of the rgl.* functions have happened. 
Now deprecated: rgl.abclines, rgl.bbox, rgl.bg, rgl.clear, 
rgl.clipplanes, rgl.close, rgl.light, rgl.lines, rgl.linestrips, 
rgl.material, rgl.open, rgl.planes, rgl.points, rgl.quads, rgl.select3d, 
rgl.set, rgl.setAxisCallback, rgl.sprites, rgl.surface, rgl.texts, 
rgl.triangles, and rgl.viewpoint.

  * A vignette ?Deprecating the rgl.* interface? has been added.

  * Also deprecated: elementId2Prefix, writeWebGL

I have notified all the CRAN and Bioconductor package maintainers who 
were using the old functions and have helped them to make updates, but I 
expect it will be a while before the updates are all published on CRAN. 
If you use the deprecated functions in your own scripts, or you use one 
of those packages before the updates are available, you will see 
warnings like this:

   Warning message:
   'rgl.points' is deprecated.
   Use 'points3d' instead.
   See help("Deprecated")

Those are just warnings:  the rgl.points function (and all the others) 
are still there with no changes except that they now issue these warnings.

In most cases, using the suggested replacement will just work with no 
other changes needed.  The exceptions to this that I know about are 
rgl.surface() and rgl.open(), where you might find the new defaults for 
colours and projections aren't what you want.  If that happens, feel 
free to contact me for advice on how to obtain the previous behaviour 
using the new functions.

For more details see the new vignette (online here: 
https://dmurdoch.github.io/rgl/articles/deprecation.html) for more 
details about the changes.

Duncan Murdoch


From v@|ent|n @end|ng |rom petze|@@t  Thu Jan 19 12:11:55 2023
From: v@|ent|n @end|ng |rom petze|@@t (Valentin Petzel)
Date: Thu, 19 Jan 2023 12:11:55 +0100
Subject: [R] R emulation of FindRoot in Mathematica
In-Reply-To: <2db9a526-58e9-40c3-623f-ca8db99ba80b@gvdnet.dk>
References: <2db9a526-58e9-40c3-623f-ca8db99ba80b@gvdnet.dk>
Message-ID: <3488657.iIbC2pHGDl@archbox>

Hello Troels,

As fair as I understand you attempt to numerically solve a system of non linear equations 
in multiple variables in R. R does not provide this functionality natively, but have you tried 
multiroot from the rootSolve package:

https://cran.r-project.org/web/packages/rootSolve/rootSolve.pdf[1]

multiroot is called like

multiroot(f, start, ...)

where f is a function of one argument which is a vector of n values (representing the n 
variables) and returning a vector of d values (symbolising the d equations) and start is a 
vector of length n.

E.g. if we want so solve

x^2 + y^2 + z^2 = 1
x^3-y^3 = 0
x - z = 0

(which is of course equivalent to x = y = z, x^2 + y^2 + z^2 = 1, so x = y = z = ?sqrt(1/3) ~ 0.577)

we?d enter

f <- function(x) c(x[1]**2 + x[2]**2 + x[3]**2 - 1, x[1]**3 - x[2]**3, x[1] - x[3])

multiroot(f, c(0,0,0))

which yields

$root
[1] 0.5773502 0.5773505 0.5773502

$f.root
[1]  1.412261e-07 -2.197939e-07  0.000000e+00

$iter
[1] 31

$estim.precis
[1] 1.2034e-07

Best regards,
Valentin

Am Donnerstag, 19. J?nner 2023, 10:41:22 CET schrieb Troels Ring:
> Hi friends - I hope this is not a misplaced question. From the
> literature (Kushmerick AJP 1997;272:C1739-C1747) I have a series of
> Mathematica equations which are solved together to yield over different
> pH values the concentrations of metabolites in skeletal muscle using the
> Mathematica function FindRoot((E1,E2...),(V2,V2..)] where E is a list of
> equations and V list of variables.  Most of the equations are individual
> binding reactions of the form 10^6.494*atp*h == hatp and next
> 10^9.944*hatp*h ==hhatp describing binding of singe protons or Mg or K
> to ATP or creatin for example, but we also have constraints giving total
> concentrations of say ATP i.e. ATP + ATPH, ATPH2..ATP.Mg
> 
> I have, without success, tried to find ways to do this in R - I have 36
> equations on 36 variables and 8 equations on total concentrations. As
> far as I can see from the definition of FindRoot in Wolfram, Newton
> search or secant search is employed.
> 
> I'm on Windows R 4.2.2
> 
> Best wishes
> Troels Ring, MD
> Aalborg, Denmark
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



--------
[1] https://cran.r-project.org/web/packages/rootSolve/rootSolve.pdf

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: This is a digitally signed message part.
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20230119/761f4ff7/attachment.sig>

From tr|ng @end|ng |rom gvdnet@dk  Thu Jan 19 15:17:54 2023
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Thu, 19 Jan 2023 15:17:54 +0100
Subject: [R] R emulation of FindRoot in Mathematica
In-Reply-To: <3488657.iIbC2pHGDl@archbox>
References: <2db9a526-58e9-40c3-623f-ca8db99ba80b@gvdnet.dk>
 <3488657.iIbC2pHGDl@archbox>
Message-ID: <7d242389-3f1a-a90b-3070-bd3ac9ce1642@gvdnet.dk>

Thanks, ? Valentin for the suggestion. I'm not sure I can go that way. I 
include below the statements from the paper containing the knowledge on 
the basis of which I would like to know at specified [H] the 
concentration of each of the many metabolites given the constraints. I 
have tried to contact the author to get the full code but it seems 
difficult.

BW Troels


hatp <- 10^6.494*H*atp
hhatp <- 10^3.944*H*hatp
hhhatp <- 10^1.9*H*hhatp
hhhhatp? <- 10*H*hhhatp
mgatp <- 10^4.363*atp*mg
mghatp <- 10^2.299*hatp*mg
mg2atp <- 10^1-7*mg*mgatp
katp <- 10^0.959*atp*k

hadp <- 10^6.349*adp*H
hhadp <- 10^3.819*hadp*H
hhhadp <- 10*H*hhadp
mgadp <- 10^3.294*mg*adp
mghadp <- 10^1.61*mg*hadp
mg2adp <- 10*mg*mgadp
kadp <- 10^0.82*k*adp

hpi <- 10^11.616*H*pi
hhpi <- 10^6.7*h*hpi
hhhpi <- 10^1.962*h*hhpi
mgpi <- 10^3.4*mg*pi
mghpi <- 10^1.946*mg*hpi
mghhpi <- 10^1.19*mg*hhpi
kpi <- 10^0.6*k*pi
khpi <- 10^1.218*k*hpi
khhpi <- 10^-0.2*k*hhpi

hpcr <- 10^14.3*h*pcr
hhpcr <- 10^4.5*h*hpcr
hhhpcr <- 10^2.7*h*hhpcr
hhhhpcr <- 100*h*hhhpcr
mghpcr <- 10^1.6*mg*hpcr
kpcr <- 10^0.74*k*pcr
khpcr <- 10^0.31*k*hpcr
khhpcr <- 10^-0.13*k*hhpcr

hcr <- 10^14.3*h*cr
hhcr <- 10^2.512*h*hcr

hlactate <- 10^3.66*h*lactate
mglactate <- 10^0.93*mg*lactate

tatp <- atp + hatp + hhatp + hhhatp + mgatp + mghatp + mg2atp + katp

tadp <- adp + hadp + hhadp + hhhadp + mghadp + mgadp + mg2adp + kadp

tpi <- pi + hpi + hhpi + hhhpi + mgpi + mghpi + mghhpi + kpi + khpi + khhpi

tpcr <- pcr + hpcr + hhpcr + hhhpcr + hhhhpcr + mghpcr + kpcr + khpcr + 
khhpcr

tcr <- cr + hcr + hhcr

tmg <- mg + mgatp + mghatp + mg2atp + mgadp + mghadp + mg2adp + mgpi + 
kghpi + mghhpi +
 ? mghpcr + mglactate

tk <- k + katp + kadp + kpi + khpi + khhpi + kpcr + khpcr + khhpcr

tlactate <- lactate + hlactate + mglactate

# conditions

tatp <- 0.008
tpcr <- 0.042
tcr <- 0.004
tadp <- 0.00001
tpi <- 0.003
tlactate <- 0.005

# free K and Mg constrained to be fixed
#
mg <- 0.0006
k <- 0.12

Den 19-01-2023 kl. 12:11 skrev Valentin Petzel:
>
> Hello Troels,
>
>
> As fair as I understand you attempt to numerically solve a system of 
> non linear equations in multiple variables in R. R does not provide 
> this functionality natively, but have you tried multiroot from the 
> rootSolve package:
>
>
> https://cran.r-project.org/web/packages/rootSolve/rootSolve.pdf
>
>
> multiroot is called like
>
>
> multiroot(f, start, ...)
>
>
> where f is a function of one argument which is a vector of n values 
> (representing the n variables) and returning a vector of d values 
> (symbolising the d equations) and start is a vector of length n.
>
>
> E.g. if we want so solve
>
>
> x^2 + y^2 + z^2 = 1
>
> x^3-y^3 = 0
>
> x - z = 0
>
>
> (which is of course equivalent to x = y = z, x^2 + y^2 + z^2 = 1, so x 
> = y = z = ?sqrt(1/3) ~ 0.577)
>
>
> we?d enter
>
>
> f <- function(x) c(x[1]**2 + x[2]**2 + x[3]**2 - 1, x[1]**3 - x[2]**3, 
> x[1] - x[3])
>
>
> multiroot(f, c(0,0,0))
>
>
> which yields
>
>
> $root
>
> [1] 0.5773502 0.5773505 0.5773502
>
>
> $f.root
>
> [1] 1.412261e-07 -2.197939e-07? 0.000000e+00
>
>
> $iter
>
> [1] 31
>
>
> $estim.precis
>
> [1] 1.2034e-07
>
>
> Best regards,
>
> Valentin
>
>
> Am Donnerstag, 19. J?nner 2023, 10:41:22 CET schrieb Troels Ring:
>
> > Hi friends - I hope this is not a misplaced question. From the
>
> > literature (Kushmerick AJP 1997;272:C1739-C1747) I have a series of
>
> > Mathematica equations which are solved together to yield over different
>
> > pH values the concentrations of metabolites in skeletal muscle using the
>
> > Mathematica function FindRoot((E1,E2...),(V2,V2..)] where E is a list of
>
> > equations and V list of variables.? Most of the equations are individual
>
> > binding reactions of the form 10^6.494*atp*h == hatp and next
>
> > 10^9.944*hatp*h ==hhatp describing binding of singe protons or Mg or K
>
> > to ATP or creatin for example, but we also have constraints giving total
>
> > concentrations of say ATP i.e. ATP + ATPH, ATPH2..ATP.Mg
>
> >
>
> > I have, without success, tried to find ways to do this in R - I have 36
>
> > equations on 36 variables and 8 equations on total concentrations. As
>
> > far as I can see from the definition of FindRoot in Wolfram, Newton
>
> > search or secant search is employed.
>
> >
>
> > I'm on Windows R 4.2.2
>
> >
>
> > Best wishes
>
> > Troels Ring, MD
>
> > Aalborg, Denmark
>
> >
>
> > ______________________________________________
>
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>
> > https://stat.ethz.ch/mailman/listinfo/r-help
>
> > PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
>
> > and provide commented, minimal, self-contained, reproducible code.
>
>
>
	[[alternative HTML version deleted]]


From tebert @end|ng |rom u||@edu  Thu Jan 19 15:28:53 2023
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Thu, 19 Jan 2023 14:28:53 +0000
Subject: [R] R emulation of FindRoot in Mathematica
In-Reply-To: <7d242389-3f1a-a90b-3070-bd3ac9ce1642@gvdnet.dk>
References: <2db9a526-58e9-40c3-623f-ca8db99ba80b@gvdnet.dk>
 <3488657.iIbC2pHGDl@archbox> <7d242389-3f1a-a90b-3070-bd3ac9ce1642@gvdnet.dk>
Message-ID: <BN6PR2201MB155386A591E76D72AE877936CFC49@BN6PR2201MB1553.namprd22.prod.outlook.com>

This is a poster child for why we like open source software. "I dump numbers into a black box and get numbers out but I cannot verify how the numbers out were calculated so they must be correct" approach to analysis does not really work for me.
Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Troels Ring
Sent: Thursday, January 19, 2023 9:18 AM
To: Valentin Petzel <valentin at petzel.at>; r-help mailing list <r-help at r-project.org>
Subject: Re: [R] R emulation of FindRoot in Mathematica

[External Email]

Thanks,   Valentin for the suggestion. I'm not sure I can go that way. I
include below the statements from the paper containing the knowledge on the basis of which I would like to know at specified [H] the concentration of each of the many metabolites given the constraints. I have tried to contact the author to get the full code but it seems difficult.

BW Troels


hatp <- 10^6.494*H*atp
hhatp <- 10^3.944*H*hatp
hhhatp <- 10^1.9*H*hhatp
hhhhatp  <- 10*H*hhhatp
mgatp <- 10^4.363*atp*mg
mghatp <- 10^2.299*hatp*mg
mg2atp <- 10^1-7*mg*mgatp
katp <- 10^0.959*atp*k

hadp <- 10^6.349*adp*H
hhadp <- 10^3.819*hadp*H
hhhadp <- 10*H*hhadp
mgadp <- 10^3.294*mg*adp
mghadp <- 10^1.61*mg*hadp
mg2adp <- 10*mg*mgadp
kadp <- 10^0.82*k*adp

hpi <- 10^11.616*H*pi
hhpi <- 10^6.7*h*hpi
hhhpi <- 10^1.962*h*hhpi
mgpi <- 10^3.4*mg*pi
mghpi <- 10^1.946*mg*hpi
mghhpi <- 10^1.19*mg*hhpi
kpi <- 10^0.6*k*pi
khpi <- 10^1.218*k*hpi
khhpi <- 10^-0.2*k*hhpi

hpcr <- 10^14.3*h*pcr
hhpcr <- 10^4.5*h*hpcr
hhhpcr <- 10^2.7*h*hhpcr
hhhhpcr <- 100*h*hhhpcr
mghpcr <- 10^1.6*mg*hpcr
kpcr <- 10^0.74*k*pcr
khpcr <- 10^0.31*k*hpcr
khhpcr <- 10^-0.13*k*hhpcr

hcr <- 10^14.3*h*cr
hhcr <- 10^2.512*h*hcr

hlactate <- 10^3.66*h*lactate
mglactate <- 10^0.93*mg*lactate

tatp <- atp + hatp + hhatp + hhhatp + mgatp + mghatp + mg2atp + katp

tadp <- adp + hadp + hhadp + hhhadp + mghadp + mgadp + mg2adp + kadp

tpi <- pi + hpi + hhpi + hhhpi + mgpi + mghpi + mghhpi + kpi + khpi + khhpi

tpcr <- pcr + hpcr + hhpcr + hhhpcr + hhhhpcr + mghpcr + kpcr + khpcr + khhpcr

tcr <- cr + hcr + hhcr

tmg <- mg + mgatp + mghatp + mg2atp + mgadp + mghadp + mg2adp + mgpi + kghpi + mghhpi +
   mghpcr + mglactate

tk <- k + katp + kadp + kpi + khpi + khhpi + kpcr + khpcr + khhpcr

tlactate <- lactate + hlactate + mglactate

# conditions

tatp <- 0.008
tpcr <- 0.042
tcr <- 0.004
tadp <- 0.00001
tpi <- 0.003
tlactate <- 0.005

# free K and Mg constrained to be fixed
#
mg <- 0.0006
k <- 0.12

Den 19-01-2023 kl. 12:11 skrev Valentin Petzel:
>
> Hello Troels,
>
>
> As fair as I understand you attempt to numerically solve a system of 
> non linear equations in multiple variables in R. R does not provide 
> this functionality natively, but have you tried multiroot from the 
> rootSolve package:
>
>
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran
> .r-project.org%2Fweb%2Fpackages%2FrootSolve%2FrootSolve.pdf&data=05%7C
> 01%7Ctebert%40ufl.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a3
> 14d76ace60a62331e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZ
> sb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3
> D%7C3000%7C%7C%7C&sdata=D9A3fwJ5x7GbEV4A01wncLUil7szTdSPul5vd0lsSBw%3D
> &reserved=0
>
>
> multiroot is called like
>
>
> multiroot(f, start, ...)
>
>
> where f is a function of one argument which is a vector of n values 
> (representing the n variables) and returning a vector of d values 
> (symbolising the d equations) and start is a vector of length n.
>
>
> E.g. if we want so solve
>
>
> x^2 + y^2 + z^2 = 1
>
> x^3-y^3 = 0
>
> x - z = 0
>
>
> (which is of course equivalent to x = y = z, x^2 + y^2 + z^2 = 1, so x 
> = y = z = ?sqrt(1/3) ~ 0.577)
>
>
> we'd enter
>
>
> f <- function(x) c(x[1]**2 + x[2]**2 + x[3]**2 - 1, x[1]**3 - x[2]**3, 
> x[1] - x[3])
>
>
> multiroot(f, c(0,0,0))
>
>
> which yields
>
>
> $root
>
> [1] 0.5773502 0.5773505 0.5773502
>
>
> $f.root
>
> [1] 1.412261e-07 -2.197939e-07  0.000000e+00
>
>
> $iter
>
> [1] 31
>
>
> $estim.precis
>
> [1] 1.2034e-07
>
>
> Best regards,
>
> Valentin
>
>
> Am Donnerstag, 19. J?nner 2023, 10:41:22 CET schrieb Troels Ring:
>
> > Hi friends - I hope this is not a misplaced question. From the
>
> > literature (Kushmerick AJP 1997;272:C1739-C1747) I have a series of
>
> > Mathematica equations which are solved together to yield over 
> > different
>
> > pH values the concentrations of metabolites in skeletal muscle using 
> > the
>
> > Mathematica function FindRoot((E1,E2...),(V2,V2..)] where E is a 
> > list of
>
> > equations and V list of variables.  Most of the equations are 
> > individual
>
> > binding reactions of the form 10^6.494*atp*h == hatp and next
>
> > 10^9.944*hatp*h ==hhatp describing binding of singe protons or Mg or 
> > K
>
> > to ATP or creatin for example, but we also have constraints giving 
> > total
>
> > concentrations of say ATP i.e. ATP + ATPH, ATPH2..ATP.Mg
>
> >
>
> > I have, without success, tried to find ways to do this in R - I have 
> > 36
>
> > equations on 36 variables and 8 equations on total concentrations. 
> > As
>
> > far as I can see from the definition of FindRoot in Wolfram, Newton
>
> > search or secant search is employed.
>
> >
>
> > I'm on Windows R 4.2.2
>
> >
>
> > Best wishes
>
> > Troels Ring, MD
>
> > Aalborg, Denmark
>
> >
>
> > ______________________________________________
>
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>
> > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst
> > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl
> > .edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a6233
> > 1e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoi
> > MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C
> > %7C%7C&sdata=7DTBQItdQpAqK%2FCS1%2BqQvYdlvjyJMjzTOXhoS6AY%2FJQ%3D&re
> > served=0
>
> > PLEASE do read the posting guide
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> -project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C7c
> b98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
> 7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
> CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=m0
> 0vZP75nk9icL6H8Gc0dH1bHhkRCS9I5N27uORQmQ0%3D&reserved=0
>
> > and provide commented, minimal, self-contained, reproducible code.
>
>
>
        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=7DTBQItdQpAqK%2FCS1%2BqQvYdlvjyJMjzTOXhoS6AY%2FJQ%3D&reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=m00vZP75nk9icL6H8Gc0dH1bHhkRCS9I5N27uORQmQ0%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.


From tr|ng @end|ng |rom gvdnet@dk  Thu Jan 19 15:42:35 2023
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Thu, 19 Jan 2023 15:42:35 +0100
Subject: [R] R emulation of FindRoot in Mathematica
In-Reply-To: <BN6PR2201MB155386A591E76D72AE877936CFC49@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <2db9a526-58e9-40c3-623f-ca8db99ba80b@gvdnet.dk>
 <3488657.iIbC2pHGDl@archbox> <7d242389-3f1a-a90b-3070-bd3ac9ce1642@gvdnet.dk>
 <BN6PR2201MB155386A591E76D72AE877936CFC49@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <adbb113a-2535-520b-e265-4295177c1b6d@gvdnet.dk>

Hi Tim? - the results from? this paper have had big impact on quite 
complicated problems of physiology so I thought I might like to 
understand how they came by, calculating them myself. Writing up the 
statements from which the inferences in the paper were generated using 
Mathematica were meant to inspire clever friends to suggest probably 
quite simple ways to handle the problem in R.

All best wishes
Troels

Den 19-01-2023 kl. 15:28 skrev Ebert,Timothy Aaron:
> This is a poster child for why we like open source software. "I dump numbers into a black box and get numbers out but I cannot verify how the numbers out were calculated so they must be correct" approach to analysis does not really work for me.
> Tim
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Troels Ring
> Sent: Thursday, January 19, 2023 9:18 AM
> To: Valentin Petzel <valentin at petzel.at>; r-help mailing list <r-help at r-project.org>
> Subject: Re: [R] R emulation of FindRoot in Mathematica
>
> [External Email]
>
> Thanks,   Valentin for the suggestion. I'm not sure I can go that way. I
> include below the statements from the paper containing the knowledge on the basis of which I would like to know at specified [H] the concentration of each of the many metabolites given the constraints. I have tried to contact the author to get the full code but it seems difficult.
>
> BW Troels
>
>
> hatp <- 10^6.494*H*atp
> hhatp <- 10^3.944*H*hatp
> hhhatp <- 10^1.9*H*hhatp
> hhhhatp  <- 10*H*hhhatp
> mgatp <- 10^4.363*atp*mg
> mghatp <- 10^2.299*hatp*mg
> mg2atp <- 10^1-7*mg*mgatp
> katp <- 10^0.959*atp*k
>
> hadp <- 10^6.349*adp*H
> hhadp <- 10^3.819*hadp*H
> hhhadp <- 10*H*hhadp
> mgadp <- 10^3.294*mg*adp
> mghadp <- 10^1.61*mg*hadp
> mg2adp <- 10*mg*mgadp
> kadp <- 10^0.82*k*adp
>
> hpi <- 10^11.616*H*pi
> hhpi <- 10^6.7*h*hpi
> hhhpi <- 10^1.962*h*hhpi
> mgpi <- 10^3.4*mg*pi
> mghpi <- 10^1.946*mg*hpi
> mghhpi <- 10^1.19*mg*hhpi
> kpi <- 10^0.6*k*pi
> khpi <- 10^1.218*k*hpi
> khhpi <- 10^-0.2*k*hhpi
>
> hpcr <- 10^14.3*h*pcr
> hhpcr <- 10^4.5*h*hpcr
> hhhpcr <- 10^2.7*h*hhpcr
> hhhhpcr <- 100*h*hhhpcr
> mghpcr <- 10^1.6*mg*hpcr
> kpcr <- 10^0.74*k*pcr
> khpcr <- 10^0.31*k*hpcr
> khhpcr <- 10^-0.13*k*hhpcr
>
> hcr <- 10^14.3*h*cr
> hhcr <- 10^2.512*h*hcr
>
> hlactate <- 10^3.66*h*lactate
> mglactate <- 10^0.93*mg*lactate
>
> tatp <- atp + hatp + hhatp + hhhatp + mgatp + mghatp + mg2atp + katp
>
> tadp <- adp + hadp + hhadp + hhhadp + mghadp + mgadp + mg2adp + kadp
>
> tpi <- pi + hpi + hhpi + hhhpi + mgpi + mghpi + mghhpi + kpi + khpi + khhpi
>
> tpcr <- pcr + hpcr + hhpcr + hhhpcr + hhhhpcr + mghpcr + kpcr + khpcr + khhpcr
>
> tcr <- cr + hcr + hhcr
>
> tmg <- mg + mgatp + mghatp + mg2atp + mgadp + mghadp + mg2adp + mgpi + kghpi + mghhpi +
>     mghpcr + mglactate
>
> tk <- k + katp + kadp + kpi + khpi + khhpi + kpcr + khpcr + khhpcr
>
> tlactate <- lactate + hlactate + mglactate
>
> # conditions
>
> tatp <- 0.008
> tpcr <- 0.042
> tcr <- 0.004
> tadp <- 0.00001
> tpi <- 0.003
> tlactate <- 0.005
>
> # free K and Mg constrained to be fixed
> #
> mg <- 0.0006
> k <- 0.12
>
> Den 19-01-2023 kl. 12:11 skrev Valentin Petzel:
>> Hello Troels,
>>
>>
>> As fair as I understand you attempt to numerically solve a system of
>> non linear equations in multiple variables in R. R does not provide
>> this functionality natively, but have you tried multiroot from the
>> rootSolve package:
>>
>>
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran
>> .r-project.org%2Fweb%2Fpackages%2FrootSolve%2FrootSolve.pdf&data=05%7C
>> 01%7Ctebert%40ufl.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a3
>> 14d76ace60a62331e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZ
>> sb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3
>> D%7C3000%7C%7C%7C&sdata=D9A3fwJ5x7GbEV4A01wncLUil7szTdSPul5vd0lsSBw%3D
>> &reserved=0
>>
>>
>> multiroot is called like
>>
>>
>> multiroot(f, start, ...)
>>
>>
>> where f is a function of one argument which is a vector of n values
>> (representing the n variables) and returning a vector of d values
>> (symbolising the d equations) and start is a vector of length n.
>>
>>
>> E.g. if we want so solve
>>
>>
>> x^2 + y^2 + z^2 = 1
>>
>> x^3-y^3 = 0
>>
>> x - z = 0
>>
>>
>> (which is of course equivalent to x = y = z, x^2 + y^2 + z^2 = 1, so x
>> = y = z = ?sqrt(1/3) ~ 0.577)
>>
>>
>> we'd enter
>>
>>
>> f <- function(x) c(x[1]**2 + x[2]**2 + x[3]**2 - 1, x[1]**3 - x[2]**3,
>> x[1] - x[3])
>>
>>
>> multiroot(f, c(0,0,0))
>>
>>
>> which yields
>>
>>
>> $root
>>
>> [1] 0.5773502 0.5773505 0.5773502
>>
>>
>> $f.root
>>
>> [1] 1.412261e-07 -2.197939e-07  0.000000e+00
>>
>>
>> $iter
>>
>> [1] 31
>>
>>
>> $estim.precis
>>
>> [1] 1.2034e-07
>>
>>
>> Best regards,
>>
>> Valentin
>>
>>
>> Am Donnerstag, 19. J?nner 2023, 10:41:22 CET schrieb Troels Ring:
>>
>>> Hi friends - I hope this is not a misplaced question. From the
>>> literature (Kushmerick AJP 1997;272:C1739-C1747) I have a series of
>>> Mathematica equations which are solved together to yield over
>>> different
>>> pH values the concentrations of metabolites in skeletal muscle using
>>> the
>>> Mathematica function FindRoot((E1,E2...),(V2,V2..)] where E is a
>>> list of
>>> equations and V list of variables.  Most of the equations are
>>> individual
>>> binding reactions of the form 10^6.494*atp*h == hatp and next
>>> 10^9.944*hatp*h ==hhatp describing binding of singe protons or Mg or
>>> K
>>> to ATP or creatin for example, but we also have constraints giving
>>> total
>>> concentrations of say ATP i.e. ATP + ATPH, ATPH2..ATP.Mg
>>> I have, without success, tried to find ways to do this in R - I have
>>> 36
>>> equations on 36 variables and 8 equations on total concentrations.
>>> As
>>> far as I can see from the definition of FindRoot in Wolfram, Newton
>>> search or secant search is employed.
>>> I'm on Windows R 4.2.2
>>> Best wishes
>>> Troels Ring, MD
>>> Aalborg, Denmark
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst
>>> at.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl
>>> .edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a6233
>>> 1e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoi
>>> MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C
>>> %7C%7C&sdata=7DTBQItdQpAqK%2FCS1%2BqQvYdlvjyJMjzTOXhoS6AY%2FJQ%3D&re
>>> served=0
>>> PLEASE do read the posting guide
>> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
>> -project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C7c
>> b98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
>> 7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
>> CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=m0
>> 0vZP75nk9icL6H8Gc0dH1bHhkRCS9I5N27uORQmQ0%3D&reserved=0
>>
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
>          [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=7DTBQItdQpAqK%2FCS1%2BqQvYdlvjyJMjzTOXhoS6AY%2FJQ%3D&reserved=0
> PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=m00vZP75nk9icL6H8Gc0dH1bHhkRCS9I5N27uORQmQ0%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Jan 19 15:54:24 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 19 Jan 2023 06:54:24 -0800
Subject: [R] R emulation of FindRoot in Mathematica
In-Reply-To: <BN6PR2201MB155386A591E76D72AE877936CFC49@BN6PR2201MB1553.namprd22.prod.outlook.com>
References: <2db9a526-58e9-40c3-623f-ca8db99ba80b@gvdnet.dk>
 <3488657.iIbC2pHGDl@archbox> <7d242389-3f1a-a90b-3070-bd3ac9ce1642@gvdnet.dk>
 <BN6PR2201MB155386A591E76D72AE877936CFC49@BN6PR2201MB1553.namprd22.prod.outlook.com>
Message-ID: <35CE739B-50F5-447D-B061-99B5A4F6E589@dcn.davis.ca.us>

But it is simultaneously an example of why some researchers like black box solvers... a system of dozens of nonlinear equations can potentially have many or even infinite solutions. If the researcher is weak in math, they may have no idea which solutions are possible and having a tool like FindRoot confidently return a solution lets them focus on other things. Sort of like ChatGPT.

TL;DR the author may have no idea about how to resolve this without relying on the opaque FindRoot.

On January 19, 2023 6:28:53 AM PST, "Ebert,Timothy Aaron" <tebert at ufl.edu> wrote:
>This is a poster child for why we like open source software. "I dump numbers into a black box and get numbers out but I cannot verify how the numbers out were calculated so they must be correct" approach to analysis does not really work for me.
>Tim
>
>-----Original Message-----
>From: R-help <r-help-bounces at r-project.org> On Behalf Of Troels Ring
>Sent: Thursday, January 19, 2023 9:18 AM
>To: Valentin Petzel <valentin at petzel.at>; r-help mailing list <r-help at r-project.org>
>Subject: Re: [R] R emulation of FindRoot in Mathematica
>
>[External Email]
>
>Thanks,   Valentin for the suggestion. I'm not sure I can go that way. I
>include below the statements from the paper containing the knowledge on the basis of which I would like to know at specified [H] the concentration of each of the many metabolites given the constraints. I have tried to contact the author to get the full code but it seems difficult.
>
>BW Troels
>
>
>hatp <- 10^6.494*H*atp
>hhatp <- 10^3.944*H*hatp
>hhhatp <- 10^1.9*H*hhatp
>hhhhatp  <- 10*H*hhhatp
>mgatp <- 10^4.363*atp*mg
>mghatp <- 10^2.299*hatp*mg
>mg2atp <- 10^1-7*mg*mgatp
>katp <- 10^0.959*atp*k
>
>hadp <- 10^6.349*adp*H
>hhadp <- 10^3.819*hadp*H
>hhhadp <- 10*H*hhadp
>mgadp <- 10^3.294*mg*adp
>mghadp <- 10^1.61*mg*hadp
>mg2adp <- 10*mg*mgadp
>kadp <- 10^0.82*k*adp
>
>hpi <- 10^11.616*H*pi
>hhpi <- 10^6.7*h*hpi
>hhhpi <- 10^1.962*h*hhpi
>mgpi <- 10^3.4*mg*pi
>mghpi <- 10^1.946*mg*hpi
>mghhpi <- 10^1.19*mg*hhpi
>kpi <- 10^0.6*k*pi
>khpi <- 10^1.218*k*hpi
>khhpi <- 10^-0.2*k*hhpi
>
>hpcr <- 10^14.3*h*pcr
>hhpcr <- 10^4.5*h*hpcr
>hhhpcr <- 10^2.7*h*hhpcr
>hhhhpcr <- 100*h*hhhpcr
>mghpcr <- 10^1.6*mg*hpcr
>kpcr <- 10^0.74*k*pcr
>khpcr <- 10^0.31*k*hpcr
>khhpcr <- 10^-0.13*k*hhpcr
>
>hcr <- 10^14.3*h*cr
>hhcr <- 10^2.512*h*hcr
>
>hlactate <- 10^3.66*h*lactate
>mglactate <- 10^0.93*mg*lactate
>
>tatp <- atp + hatp + hhatp + hhhatp + mgatp + mghatp + mg2atp + katp
>
>tadp <- adp + hadp + hhadp + hhhadp + mghadp + mgadp + mg2adp + kadp
>
>tpi <- pi + hpi + hhpi + hhhpi + mgpi + mghpi + mghhpi + kpi + khpi + khhpi
>
>tpcr <- pcr + hpcr + hhpcr + hhhpcr + hhhhpcr + mghpcr + kpcr + khpcr + khhpcr
>
>tcr <- cr + hcr + hhcr
>
>tmg <- mg + mgatp + mghatp + mg2atp + mgadp + mghadp + mg2adp + mgpi + kghpi + mghhpi +
>   mghpcr + mglactate
>
>tk <- k + katp + kadp + kpi + khpi + khhpi + kpcr + khpcr + khhpcr
>
>tlactate <- lactate + hlactate + mglactate
>
># conditions
>
>tatp <- 0.008
>tpcr <- 0.042
>tcr <- 0.004
>tadp <- 0.00001
>tpi <- 0.003
>tlactate <- 0.005
>
># free K and Mg constrained to be fixed
>#
>mg <- 0.0006
>k <- 0.12
>
>Den 19-01-2023 kl. 12:11 skrev Valentin Petzel:
>>
>> Hello Troels,
>>
>>
>> As fair as I understand you attempt to numerically solve a system of 
>> non linear equations in multiple variables in R. R does not provide 
>> this functionality natively, but have you tried multiroot from the 
>> rootSolve package:
>>
>>
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran
>> .r-project.org%2Fweb%2Fpackages%2FrootSolve%2FrootSolve.pdf&data=05%7C
>> 01%7Ctebert%40ufl.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a3
>> 14d76ace60a62331e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZ
>> sb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3
>> D%7C3000%7C%7C%7C&sdata=D9A3fwJ5x7GbEV4A01wncLUil7szTdSPul5vd0lsSBw%3D
>> &reserved=0
>>
>>
>> multiroot is called like
>>
>>
>> multiroot(f, start, ...)
>>
>>
>> where f is a function of one argument which is a vector of n values 
>> (representing the n variables) and returning a vector of d values 
>> (symbolising the d equations) and start is a vector of length n.
>>
>>
>> E.g. if we want so solve
>>
>>
>> x^2 + y^2 + z^2 = 1
>>
>> x^3-y^3 = 0
>>
>> x - z = 0
>>
>>
>> (which is of course equivalent to x = y = z, x^2 + y^2 + z^2 = 1, so x 
>> = y = z = ?sqrt(1/3) ~ 0.577)
>>
>>
>> we'd enter
>>
>>
>> f <- function(x) c(x[1]**2 + x[2]**2 + x[3]**2 - 1, x[1]**3 - x[2]**3, 
>> x[1] - x[3])
>>
>>
>> multiroot(f, c(0,0,0))
>>
>>
>> which yields
>>
>>
>> $root
>>
>> [1] 0.5773502 0.5773505 0.5773502
>>
>>
>> $f.root
>>
>> [1] 1.412261e-07 -2.197939e-07  0.000000e+00
>>
>>
>> $iter
>>
>> [1] 31
>>
>>
>> $estim.precis
>>
>> [1] 1.2034e-07
>>
>>
>> Best regards,
>>
>> Valentin
>>
>>
>> Am Donnerstag, 19. J?nner 2023, 10:41:22 CET schrieb Troels Ring:
>>
>> > Hi friends - I hope this is not a misplaced question. From the
>>
>> > literature (Kushmerick AJP 1997;272:C1739-C1747) I have a series of
>>
>> > Mathematica equations which are solved together to yield over 
>> > different
>>
>> > pH values the concentrations of metabolites in skeletal muscle using 
>> > the
>>
>> > Mathematica function FindRoot((E1,E2...),(V2,V2..)] where E is a 
>> > list of
>>
>> > equations and V list of variables.  Most of the equations are 
>> > individual
>>
>> > binding reactions of the form 10^6.494*atp*h == hatp and next
>>
>> > 10^9.944*hatp*h ==hhatp describing binding of singe protons or Mg or 
>> > K
>>
>> > to ATP or creatin for example, but we also have constraints giving 
>> > total
>>
>> > concentrations of say ATP i.e. ATP + ATPH, ATPH2..ATP.Mg
>>
>> >
>>
>> > I have, without success, tried to find ways to do this in R - I have 
>> > 36
>>
>> > equations on 36 variables and 8 equations on total concentrations. 
>> > As
>>
>> > far as I can see from the definition of FindRoot in Wolfram, Newton
>>
>> > search or secant search is employed.
>>
>> >
>>
>> > I'm on Windows R 4.2.2
>>
>> >
>>
>> > Best wishes
>>
>> > Troels Ring, MD
>>
>> > Aalborg, Denmark
>>
>> >
>>
>> > ______________________________________________
>>
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>
>> > https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst
>> > at.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl
>> > .edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a6233
>> > 1e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoi
>> > MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C
>> > %7C%7C&sdata=7DTBQItdQpAqK%2FCS1%2BqQvYdlvjyJMjzTOXhoS6AY%2FJQ%3D&re
>> > served=0
>>
>> > PLEASE do read the posting guide
>> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
>> -project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C7c
>> b98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
>> 7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
>> CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=m0
>> 0vZP75nk9icL6H8Gc0dH1bHhkRCS9I5N27uORQmQ0%3D&reserved=0
>>
>> > and provide commented, minimal, self-contained, reproducible code.
>>
>>
>>
>        [[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=7DTBQItdQpAqK%2FCS1%2BqQvYdlvjyJMjzTOXhoS6AY%2FJQ%3D&reserved=0
>PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=m00vZP75nk9icL6H8Gc0dH1bHhkRCS9I5N27uORQmQ0%3D&reserved=0
>and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From pro|jcn@@h @end|ng |rom gm@||@com  Thu Jan 19 16:07:02 2023
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Thu, 19 Jan 2023 10:07:02 -0500
Subject: [R] R emulation of FindRoot in Mathematica
In-Reply-To: <35CE739B-50F5-447D-B061-99B5A4F6E589@dcn.davis.ca.us>
References: <2db9a526-58e9-40c3-623f-ca8db99ba80b@gvdnet.dk>
 <3488657.iIbC2pHGDl@archbox> <7d242389-3f1a-a90b-3070-bd3ac9ce1642@gvdnet.dk>
 <BN6PR2201MB155386A591E76D72AE877936CFC49@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <35CE739B-50F5-447D-B061-99B5A4F6E589@dcn.davis.ca.us>
Message-ID: <924235ed-dd42-23bd-92b6-f33eb8ba0302@gmail.com>

A crude but often informative approach is to treat the nonlinear equations as a
nonlinear least squared problem. This is NOT a generally recommended solution technique,
but can help to show some of the multiple solutions. Moreover, it forces some attention
to the problem. Unfortunately, it often does not fall into the "modeling" structure of
nls() or the numerically more stable nlsr of Duncan and I that tries to generate the
Jacobian by automatic differentiation.

JN


On 2023-01-19 09:54, Jeff Newmiller wrote:
> But it is simultaneously an example of why some researchers like black box solvers... a system of dozens of nonlinear equations can potentially have many or even infinite solutions. If the researcher is weak in math, they may have no idea which solutions are possible and having a tool like FindRoot confidently return a solution lets them focus on other things. Sort of like ChatGPT.
> 
> TL;DR the author may have no idea about how to resolve this without relying on the opaque FindRoot.
> 
> On January 19, 2023 6:28:53 AM PST, "Ebert,Timothy Aaron" <tebert at ufl.edu> wrote:
>> This is a poster child for why we like open source software. "I dump numbers into a black box and get numbers out but I cannot verify how the numbers out were calculated so they must be correct" approach to analysis does not really work for me.
>> Tim
>>
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Troels Ring
>> Sent: Thursday, January 19, 2023 9:18 AM
>> To: Valentin Petzel <valentin at petzel.at>; r-help mailing list <r-help at r-project.org>
>> Subject: Re: [R] R emulation of FindRoot in Mathematica
>>
>> [External Email]
>>
>> Thanks,   Valentin for the suggestion. I'm not sure I can go that way. I
>> include below the statements from the paper containing the knowledge on the basis of which I would like to know at specified [H] the concentration of each of the many metabolites given the constraints. I have tried to contact the author to get the full code but it seems difficult.
>>
>> BW Troels
>>
>>
>> hatp <- 10^6.494*H*atp
>> hhatp <- 10^3.944*H*hatp
>> hhhatp <- 10^1.9*H*hhatp
>> hhhhatp  <- 10*H*hhhatp
>> mgatp <- 10^4.363*atp*mg
>> mghatp <- 10^2.299*hatp*mg
>> mg2atp <- 10^1-7*mg*mgatp
>> katp <- 10^0.959*atp*k
>>
>> hadp <- 10^6.349*adp*H
>> hhadp <- 10^3.819*hadp*H
>> hhhadp <- 10*H*hhadp
>> mgadp <- 10^3.294*mg*adp
>> mghadp <- 10^1.61*mg*hadp
>> mg2adp <- 10*mg*mgadp
>> kadp <- 10^0.82*k*adp
>>
>> hpi <- 10^11.616*H*pi
>> hhpi <- 10^6.7*h*hpi
>> hhhpi <- 10^1.962*h*hhpi
>> mgpi <- 10^3.4*mg*pi
>> mghpi <- 10^1.946*mg*hpi
>> mghhpi <- 10^1.19*mg*hhpi
>> kpi <- 10^0.6*k*pi
>> khpi <- 10^1.218*k*hpi
>> khhpi <- 10^-0.2*k*hhpi
>>
>> hpcr <- 10^14.3*h*pcr
>> hhpcr <- 10^4.5*h*hpcr
>> hhhpcr <- 10^2.7*h*hhpcr
>> hhhhpcr <- 100*h*hhhpcr
>> mghpcr <- 10^1.6*mg*hpcr
>> kpcr <- 10^0.74*k*pcr
>> khpcr <- 10^0.31*k*hpcr
>> khhpcr <- 10^-0.13*k*hhpcr
>>
>> hcr <- 10^14.3*h*cr
>> hhcr <- 10^2.512*h*hcr
>>
>> hlactate <- 10^3.66*h*lactate
>> mglactate <- 10^0.93*mg*lactate
>>
>> tatp <- atp + hatp + hhatp + hhhatp + mgatp + mghatp + mg2atp + katp
>>
>> tadp <- adp + hadp + hhadp + hhhadp + mghadp + mgadp + mg2adp + kadp
>>
>> tpi <- pi + hpi + hhpi + hhhpi + mgpi + mghpi + mghhpi + kpi + khpi + khhpi
>>
>> tpcr <- pcr + hpcr + hhpcr + hhhpcr + hhhhpcr + mghpcr + kpcr + khpcr + khhpcr
>>
>> tcr <- cr + hcr + hhcr
>>
>> tmg <- mg + mgatp + mghatp + mg2atp + mgadp + mghadp + mg2adp + mgpi + kghpi + mghhpi +
>>    mghpcr + mglactate
>>
>> tk <- k + katp + kadp + kpi + khpi + khhpi + kpcr + khpcr + khhpcr
>>
>> tlactate <- lactate + hlactate + mglactate
>>
>> # conditions
>>
>> tatp <- 0.008
>> tpcr <- 0.042
>> tcr <- 0.004
>> tadp <- 0.00001
>> tpi <- 0.003
>> tlactate <- 0.005
>>
>> # free K and Mg constrained to be fixed
>> #
>> mg <- 0.0006
>> k <- 0.12
>>
>> Den 19-01-2023 kl. 12:11 skrev Valentin Petzel:
>>>
>>> Hello Troels,
>>>
>>>
>>> As fair as I understand you attempt to numerically solve a system of
>>> non linear equations in multiple variables in R. R does not provide
>>> this functionality natively, but have you tried multiroot from the
>>> rootSolve package:
>>>
>>>
>>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran
>>> .r-project.org%2Fweb%2Fpackages%2FrootSolve%2FrootSolve.pdf&data=05%7C
>>> 01%7Ctebert%40ufl.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a3
>>> 14d76ace60a62331e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZ
>>> sb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3
>>> D%7C3000%7C%7C%7C&sdata=D9A3fwJ5x7GbEV4A01wncLUil7szTdSPul5vd0lsSBw%3D
>>> &reserved=0
>>>
>>>
>>> multiroot is called like
>>>
>>>
>>> multiroot(f, start, ...)
>>>
>>>
>>> where f is a function of one argument which is a vector of n values
>>> (representing the n variables) and returning a vector of d values
>>> (symbolising the d equations) and start is a vector of length n.
>>>
>>>
>>> E.g. if we want so solve
>>>
>>>
>>> x^2 + y^2 + z^2 = 1
>>>
>>> x^3-y^3 = 0
>>>
>>> x - z = 0
>>>
>>>
>>> (which is of course equivalent to x = y = z, x^2 + y^2 + z^2 = 1, so x
>>> = y = z = ?sqrt(1/3) ~ 0.577)
>>>
>>>
>>> we'd enter
>>>
>>>
>>> f <- function(x) c(x[1]**2 + x[2]**2 + x[3]**2 - 1, x[1]**3 - x[2]**3,
>>> x[1] - x[3])
>>>
>>>
>>> multiroot(f, c(0,0,0))
>>>
>>>
>>> which yields
>>>
>>>
>>> $root
>>>
>>> [1] 0.5773502 0.5773505 0.5773502
>>>
>>>
>>> $f.root
>>>
>>> [1] 1.412261e-07 -2.197939e-07  0.000000e+00
>>>
>>>
>>> $iter
>>>
>>> [1] 31
>>>
>>>
>>> $estim.precis
>>>
>>> [1] 1.2034e-07
>>>
>>>
>>> Best regards,
>>>
>>> Valentin
>>>
>>>
>>> Am Donnerstag, 19. J?nner 2023, 10:41:22 CET schrieb Troels Ring:
>>>
>>>> Hi friends - I hope this is not a misplaced question. From the
>>>
>>>> literature (Kushmerick AJP 1997;272:C1739-C1747) I have a series of
>>>
>>>> Mathematica equations which are solved together to yield over
>>>> different
>>>
>>>> pH values the concentrations of metabolites in skeletal muscle using
>>>> the
>>>
>>>> Mathematica function FindRoot((E1,E2...),(V2,V2..)] where E is a
>>>> list of
>>>
>>>> equations and V list of variables.  Most of the equations are
>>>> individual
>>>
>>>> binding reactions of the form 10^6.494*atp*h == hatp and next
>>>
>>>> 10^9.944*hatp*h ==hhatp describing binding of singe protons or Mg or
>>>> K
>>>
>>>> to ATP or creatin for example, but we also have constraints giving
>>>> total
>>>
>>>> concentrations of say ATP i.e. ATP + ATPH, ATPH2..ATP.Mg
>>>
>>>>
>>>
>>>> I have, without success, tried to find ways to do this in R - I have
>>>> 36
>>>
>>>> equations on 36 variables and 8 equations on total concentrations.
>>>> As
>>>
>>>> far as I can see from the definition of FindRoot in Wolfram, Newton
>>>
>>>> search or secant search is employed.
>>>
>>>>
>>>
>>>> I'm on Windows R 4.2.2
>>>
>>>>
>>>
>>>> Best wishes
>>>
>>>> Troels Ring, MD
>>>
>>>> Aalborg, Denmark
>>>
>>>>
>>>
>>>> ______________________________________________
>>>
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>
>>>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst
>>>> at.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl
>>>> .edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a6233
>>>> 1e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoi
>>>> MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C
>>>> %7C%7C&sdata=7DTBQItdQpAqK%2FCS1%2BqQvYdlvjyJMjzTOXhoS6AY%2FJQ%3D&re
>>>> served=0
>>>
>>>> PLEASE do read the posting guide
>>> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
>>> -project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C7c
>>> b98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
>>> 7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
>>> CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=m0
>>> 0vZP75nk9icL6H8Gc0dH1bHhkRCS9I5N27uORQmQ0%3D&reserved=0
>>>
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>
>>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=7DTBQItdQpAqK%2FCS1%2BqQvYdlvjyJMjzTOXhoS6AY%2FJQ%3D&reserved=0
>> PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=m00vZP75nk9icL6H8Gc0dH1bHhkRCS9I5N27uORQmQ0%3D&reserved=0
>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Jan 19 16:14:48 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 19 Jan 2023 07:14:48 -0800
Subject: [R] 
 MLE Estimation of Gamma Distribution Parameters for data with
 'zeros'
In-Reply-To: <3C467016-F2E5-413B-B893-2F25682AD587@gmail.com>
References: <CAPO0VmZxiSzzpsKVQPpsMSodKM1qisXNCfR1Zm32T9=70se_MQ@mail.gmail.com>
 <CAGxFJbT3HZLWs9V0NpMcdz6EPP1KbDzBmP5jmwYDFp_6=4LNng@mail.gmail.com>
 <3C467016-F2E5-413B-B893-2F25682AD587@gmail.com>
Message-ID: <51BBA0DF-14E3-41F9-B3B9-AF666583C981@dcn.davis.ca.us>

Beware of adding a constant... the magnitude of the constant used can have an outsized impact on the answer obtained. See e.g. https://gist.github.com/jdnewmil/99301a88de702ad2fcbaef33326b08b4

On January 19, 2023 3:49:29 AM PST, peter dalgaard <pdalgd at gmail.com> wrote:
>Not necessarily homework, Bert. There's a generic issue with MLE and rounded data, in that gamma densities may be 0 at the boundary but small numbers are represented as 0, making the log-likelihood -Inf. 
>
>The cleanest way out is to switch to a discretized distribution in the likelihood, so that instead of log(dgamma(0,...)) you use log(pgamma(.005,..) - pgamma(0,...)) == pgamma(.005,..., log=TRUE). (For data rounded to nearest .01, that is). Cruder techniques would be to just add, like, .0025 to all the zeros. 
>
>-pd
>
>> On 10 Jan 2023, at 18:42 , Bert Gunter <bgunter.4567 at gmail.com> wrote:
>> 
>> Is this homework? This list has a no-homework policy.
>> 
>> 
>> -- Bert
>> 
>> On Tue, Jan 10, 2023 at 8:13 AM Nyasha <kahuninyasha13296 at gmail.com> wrote:
>>> 
>>> Please how can one go about this one? I don't know how to go about it.
>>> 
>>>        [[alternative HTML version deleted]]
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>

-- 
Sent from my phone. Please excuse my brevity.


From tr|ng @end|ng |rom gvdnet@dk  Thu Jan 19 16:18:57 2023
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Thu, 19 Jan 2023 16:18:57 +0100
Subject: [R] R emulation of FindRoot in Mathematica
In-Reply-To: <35CE739B-50F5-447D-B061-99B5A4F6E589@dcn.davis.ca.us>
References: <2db9a526-58e9-40c3-623f-ca8db99ba80b@gvdnet.dk>
 <3488657.iIbC2pHGDl@archbox> <7d242389-3f1a-a90b-3070-bd3ac9ce1642@gvdnet.dk>
 <BN6PR2201MB155386A591E76D72AE877936CFC49@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <35CE739B-50F5-447D-B061-99B5A4F6E589@dcn.davis.ca.us>
Message-ID: <39939baf-3821-cef4-a887-cad77bfd1993@gvdnet.dk>

Hi Jeff - that is definitely not fair, this is a highly respected 
scientist but old me are probably not clever enough to explain problem 
which I think is not too difficult. Basically, it is a series of 
consecutive statements of H and Mg and K combining to ATP and ADP, 
creatin and creatinP under assumption og known total inorganic phosphate 
(pi), total ATP total ADP, creatin and creatinphosphate. It was written 
in 1997 when R was less mature - and if we know how to do it in R so not 
to depend on black box operations it would be fun. For the moment, I'm 
not even sure I understand why there is now focus on the problem being 
nonlinear, since I want to evaluate at given H or pH.? hatp <- 10^6.494 
* H * ATP ?

BW Troels


Den 19-01-2023 kl. 15:54 skrev Jeff Newmiller:
> But it is simultaneously an example of why some researchers like black box solvers... a system of dozens of nonlinear equations can potentially have many or even infinite solutions. If the researcher is weak in math, they may have no idea which solutions are possible and having a tool like FindRoot confidently return a solution lets them focus on other things. Sort of like ChatGPT.
>
> TL;DR the author may have no idea about how to resolve this without relying on the opaque FindRoot.
>
> On January 19, 2023 6:28:53 AM PST, "Ebert,Timothy Aaron" <tebert at ufl.edu> wrote:
>> This is a poster child for why we like open source software. "I dump numbers into a black box and get numbers out but I cannot verify how the numbers out were calculated so they must be correct" approach to analysis does not really work for me.
>> Tim
>>
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Troels Ring
>> Sent: Thursday, January 19, 2023 9:18 AM
>> To: Valentin Petzel <valentin at petzel.at>; r-help mailing list <r-help at r-project.org>
>> Subject: Re: [R] R emulation of FindRoot in Mathematica
>>
>> [External Email]
>>
>> Thanks,   Valentin for the suggestion. I'm not sure I can go that way. I
>> include below the statements from the paper containing the knowledge on the basis of which I would like to know at specified [H] the concentration of each of the many metabolites given the constraints. I have tried to contact the author to get the full code but it seems difficult.
>>
>> BW Troels
>>
>>
>> hatp <- 10^6.494*H*atp
>> hhatp <- 10^3.944*H*hatp
>> hhhatp <- 10^1.9*H*hhatp
>> hhhhatp  <- 10*H*hhhatp
>> mgatp <- 10^4.363*atp*mg
>> mghatp <- 10^2.299*hatp*mg
>> mg2atp <- 10^1-7*mg*mgatp
>> katp <- 10^0.959*atp*k
>>
>> hadp <- 10^6.349*adp*H
>> hhadp <- 10^3.819*hadp*H
>> hhhadp <- 10*H*hhadp
>> mgadp <- 10^3.294*mg*adp
>> mghadp <- 10^1.61*mg*hadp
>> mg2adp <- 10*mg*mgadp
>> kadp <- 10^0.82*k*adp
>>
>> hpi <- 10^11.616*H*pi
>> hhpi <- 10^6.7*h*hpi
>> hhhpi <- 10^1.962*h*hhpi
>> mgpi <- 10^3.4*mg*pi
>> mghpi <- 10^1.946*mg*hpi
>> mghhpi <- 10^1.19*mg*hhpi
>> kpi <- 10^0.6*k*pi
>> khpi <- 10^1.218*k*hpi
>> khhpi <- 10^-0.2*k*hhpi
>>
>> hpcr <- 10^14.3*h*pcr
>> hhpcr <- 10^4.5*h*hpcr
>> hhhpcr <- 10^2.7*h*hhpcr
>> hhhhpcr <- 100*h*hhhpcr
>> mghpcr <- 10^1.6*mg*hpcr
>> kpcr <- 10^0.74*k*pcr
>> khpcr <- 10^0.31*k*hpcr
>> khhpcr <- 10^-0.13*k*hhpcr
>>
>> hcr <- 10^14.3*h*cr
>> hhcr <- 10^2.512*h*hcr
>>
>> hlactate <- 10^3.66*h*lactate
>> mglactate <- 10^0.93*mg*lactate
>>
>> tatp <- atp + hatp + hhatp + hhhatp + mgatp + mghatp + mg2atp + katp
>>
>> tadp <- adp + hadp + hhadp + hhhadp + mghadp + mgadp + mg2adp + kadp
>>
>> tpi <- pi + hpi + hhpi + hhhpi + mgpi + mghpi + mghhpi + kpi + khpi + khhpi
>>
>> tpcr <- pcr + hpcr + hhpcr + hhhpcr + hhhhpcr + mghpcr + kpcr + khpcr + khhpcr
>>
>> tcr <- cr + hcr + hhcr
>>
>> tmg <- mg + mgatp + mghatp + mg2atp + mgadp + mghadp + mg2adp + mgpi + kghpi + mghhpi +
>>    mghpcr + mglactate
>>
>> tk <- k + katp + kadp + kpi + khpi + khhpi + kpcr + khpcr + khhpcr
>>
>> tlactate <- lactate + hlactate + mglactate
>>
>> # conditions
>>
>> tatp <- 0.008
>> tpcr <- 0.042
>> tcr <- 0.004
>> tadp <- 0.00001
>> tpi <- 0.003
>> tlactate <- 0.005
>>
>> # free K and Mg constrained to be fixed
>> #
>> mg <- 0.0006
>> k <- 0.12
>>
>> Den 19-01-2023 kl. 12:11 skrev Valentin Petzel:
>>> Hello Troels,
>>>
>>>
>>> As fair as I understand you attempt to numerically solve a system of
>>> non linear equations in multiple variables in R. R does not provide
>>> this functionality natively, but have you tried multiroot from the
>>> rootSolve package:
>>>
>>>
>>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran
>>> .r-project.org%2Fweb%2Fpackages%2FrootSolve%2FrootSolve.pdf&data=05%7C
>>> 01%7Ctebert%40ufl.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a3
>>> 14d76ace60a62331e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZ
>>> sb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3
>>> D%7C3000%7C%7C%7C&sdata=D9A3fwJ5x7GbEV4A01wncLUil7szTdSPul5vd0lsSBw%3D
>>> &reserved=0
>>>
>>>
>>> multiroot is called like
>>>
>>>
>>> multiroot(f, start, ...)
>>>
>>>
>>> where f is a function of one argument which is a vector of n values
>>> (representing the n variables) and returning a vector of d values
>>> (symbolising the d equations) and start is a vector of length n.
>>>
>>>
>>> E.g. if we want so solve
>>>
>>>
>>> x^2 + y^2 + z^2 = 1
>>>
>>> x^3-y^3 = 0
>>>
>>> x - z = 0
>>>
>>>
>>> (which is of course equivalent to x = y = z, x^2 + y^2 + z^2 = 1, so x
>>> = y = z = ?sqrt(1/3) ~ 0.577)
>>>
>>>
>>> we'd enter
>>>
>>>
>>> f <- function(x) c(x[1]**2 + x[2]**2 + x[3]**2 - 1, x[1]**3 - x[2]**3,
>>> x[1] - x[3])
>>>
>>>
>>> multiroot(f, c(0,0,0))
>>>
>>>
>>> which yields
>>>
>>>
>>> $root
>>>
>>> [1] 0.5773502 0.5773505 0.5773502
>>>
>>>
>>> $f.root
>>>
>>> [1] 1.412261e-07 -2.197939e-07  0.000000e+00
>>>
>>>
>>> $iter
>>>
>>> [1] 31
>>>
>>>
>>> $estim.precis
>>>
>>> [1] 1.2034e-07
>>>
>>>
>>> Best regards,
>>>
>>> Valentin
>>>
>>>
>>> Am Donnerstag, 19. J?nner 2023, 10:41:22 CET schrieb Troels Ring:
>>>
>>>> Hi friends - I hope this is not a misplaced question. From the
>>>> literature (Kushmerick AJP 1997;272:C1739-C1747) I have a series of
>>>> Mathematica equations which are solved together to yield over
>>>> different
>>>> pH values the concentrations of metabolites in skeletal muscle using
>>>> the
>>>> Mathematica function FindRoot((E1,E2...),(V2,V2..)] where E is a
>>>> list of
>>>> equations and V list of variables.  Most of the equations are
>>>> individual
>>>> binding reactions of the form 10^6.494*atp*h == hatp and next
>>>> 10^9.944*hatp*h ==hhatp describing binding of singe protons or Mg or
>>>> K
>>>> to ATP or creatin for example, but we also have constraints giving
>>>> total
>>>> concentrations of say ATP i.e. ATP + ATPH, ATPH2..ATP.Mg
>>>> I have, without success, tried to find ways to do this in R - I have
>>>> 36
>>>> equations on 36 variables and 8 equations on total concentrations.
>>>> As
>>>> far as I can see from the definition of FindRoot in Wolfram, Newton
>>>> search or secant search is employed.
>>>> I'm on Windows R 4.2.2
>>>> Best wishes
>>>> Troels Ring, MD
>>>> Aalborg, Denmark
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst
>>>> at.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl
>>>> .edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a6233
>>>> 1e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoi
>>>> MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C
>>>> %7C%7C&sdata=7DTBQItdQpAqK%2FCS1%2BqQvYdlvjyJMjzTOXhoS6AY%2FJQ%3D&re
>>>> served=0
>>>> PLEASE do read the posting guide
>>> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
>>> -project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C7c
>>> b98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
>>> 7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
>>> CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=m0
>>> 0vZP75nk9icL6H8Gc0dH1bHhkRCS9I5N27uORQmQ0%3D&reserved=0
>>>
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=7DTBQItdQpAqK%2FCS1%2BqQvYdlvjyJMjzTOXhoS6AY%2FJQ%3D&reserved=0
>> PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=m00vZP75nk9icL6H8Gc0dH1bHhkRCS9I5N27uORQmQ0%3D&reserved=0
>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From bhh @end|ng |rom x@4@||@n|  Thu Jan 19 16:25:58 2023
From: bhh @end|ng |rom x@4@||@n| (Berend Hasselman)
Date: Thu, 19 Jan 2023 16:25:58 +0100
Subject: [R] R emulation of FindRoot in Mathematica
In-Reply-To: <2db9a526-58e9-40c3-623f-ca8db99ba80b@gvdnet.dk>
References: <2db9a526-58e9-40c3-623f-ca8db99ba80b@gvdnet.dk>
Message-ID: <EB3767BF-C7AE-44B2-8D63-7CDB5D2BF2D3@xs4all.nl>


If you need to solve a nonlinear system of equations you could have a look at the 
CRAN Task View: Numerical Mathematics:   https://cran.r-project.org/view=NumericalMathematics

Specifically look in the subsection "Root Finding and Fixed Points".


Berend Hasselman

> On 19 Jan 2023, at 10:41, Troels Ring <tring at gvdnet.dk> wrote:
> 
> Hi friends - I hope this is not a misplaced question. From the literature (Kushmerick AJP 1997;272:C1739-C1747) I have a series of Mathematica equations which are solved together to yield over different pH values the concentrations of metabolites in skeletal muscle using the Mathematica function FindRoot((E1,E2...),(V2,V2..)] where E is a list of equations and V list of variables.  Most of the equations are individual binding reactions of the form 10^6.494*atp*h == hatp and next 10^9.944*hatp*h ==hhatp describing binding of singe protons or Mg or K to ATP or creatin for example, but we also have constraints giving total concentrations of say ATP i.e. ATP + ATPH, ATPH2..ATP.Mg
> 
> I have, without success, tried to find ways to do this in R - I have 36 equations on 36 variables and 8 equations on total concentrations. As far as I can see from the definition of FindRoot in Wolfram, Newton search or secant search is employed.
> 
> I'm on Windows R 4.2.2
> 
> Best wishes
> Troels Ring, MD
> Aalborg, Denmark
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@rc_grt @end|ng |rom y@hoo@|r  Thu Jan 19 16:26:34 2023
From: m@rc_grt @end|ng |rom y@hoo@|r (Marc Girondot)
Date: Thu, 19 Jan 2023 16:26:34 +0100
Subject: [R] 
 MLE Estimation of Gamma Distribution Parameters for data with
 'zeros'
In-Reply-To: <3C467016-F2E5-413B-B893-2F25682AD587@gmail.com>
References: <CAPO0VmZxiSzzpsKVQPpsMSodKM1qisXNCfR1Zm32T9=70se_MQ@mail.gmail.com>
 <CAGxFJbT3HZLWs9V0NpMcdz6EPP1KbDzBmP5jmwYDFp_6=4LNng@mail.gmail.com>
 <3C467016-F2E5-413B-B893-2F25682AD587@gmail.com>
Message-ID: <be44ddb2-b272-9112-2562-9778435bb066@yahoo.fr>

Another situation for the presence of 0 is about dosage when 
concentration is below the detection limit. It is not necessary to 
discretize the data. We propose a method here:
Salvat-Leal I, Cort?s-G?mez AA, Romero D, Girondot M (2022) New method 
for imputation of unquanti?able values using Bayesian statistics for a 
mixture of censored or truncated distributions: Application to trace 
elements measured in blood of olive ridley sea turtles from mexico. 
Animals 2022: 2919 doi 10.3390/ani12212919
with R code.
If the data has "true" 0, the gamma distribution is not the best choice 
as 0 is impossible with gamma distribution.

Marc

Le 19/01/2023 ? 12:49, peter dalgaard a ?crit?:
> Not necessarily homework, Bert. There's a generic issue with MLE and rounded data, in that gamma densities may be 0 at the boundary but small numbers are represented as 0, making the log-likelihood -Inf.
>
> The cleanest way out is to switch to a discretized distribution in the likelihood, so that instead of log(dgamma(0,...)) you use log(pgamma(.005,..) - pgamma(0,...)) == pgamma(.005,..., log=TRUE). (For data rounded to nearest .01, that is). Cruder techniques would be to just add, like, .0025 to all the zeros.
>
> -pd
>
>> On 10 Jan 2023, at 18:42 , Bert Gunter <bgunter.4567 at gmail.com> wrote:
>>
>> Is this homework? This list has a no-homework policy.
>>
>>
>> -- Bert
>>
>> On Tue, Jan 10, 2023 at 8:13 AM Nyasha <kahuninyasha13296 at gmail.com> wrote:
>>> Please how can one go about this one? I don't know how to go about it.
>>>
>>>         [[alternative HTML version deleted]]
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From ken@k|e|nm@n @end|ng |rom gm@||@com  Thu Jan 19 16:26:09 2023
From: ken@k|e|nm@n @end|ng |rom gm@||@com (Ken Kleinman)
Date: Thu, 19 Jan 2023 10:26:09 -0500
Subject: [R] 
 MLE Estimation of Gamma Distribution Parameters for data with
 'zeros'
In-Reply-To: <51BBA0DF-14E3-41F9-B3B9-AF666583C981@dcn.davis.ca.us>
References: <CAPO0VmZxiSzzpsKVQPpsMSodKM1qisXNCfR1Zm32T9=70se_MQ@mail.gmail.com>
 <CAGxFJbT3HZLWs9V0NpMcdz6EPP1KbDzBmP5jmwYDFp_6=4LNng@mail.gmail.com>
 <3C467016-F2E5-413B-B893-2F25682AD587@gmail.com>
 <51BBA0DF-14E3-41F9-B3B9-AF666583C981@dcn.davis.ca.us>
Message-ID: <CAG7OsdZbX-ys7nWOEzpetGPJzTmOaVFd9Lc0fBXYZ5XWALCiiA@mail.gmail.com>

There's at least one package that can do zero-inflated gamma regression
(Rfast2::zigamma).  I'm not sure it's ML, though.


On Thu, Jan 19, 2023 at 10:17 AM Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
wrote:

> Beware of adding a constant... the magnitude of the constant used can have
> an outsized impact on the answer obtained. See e.g.
> https://gist.github.com/jdnewmil/99301a88de702ad2fcbaef33326b08b4
>
> On January 19, 2023 3:49:29 AM PST, peter dalgaard <pdalgd at gmail.com>
> wrote:
> >Not necessarily homework, Bert. There's a generic issue with MLE and
> rounded data, in that gamma densities may be 0 at the boundary but small
> numbers are represented as 0, making the log-likelihood -Inf.
> >
> >The cleanest way out is to switch to a discretized distribution in the
> likelihood, so that instead of log(dgamma(0,...)) you use
> log(pgamma(.005,..) - pgamma(0,...)) == pgamma(.005,..., log=TRUE). (For
> data rounded to nearest .01, that is). Cruder techniques would be to just
> add, like, .0025 to all the zeros.
> >
> >-pd
> >
> >> On 10 Jan 2023, at 18:42 , Bert Gunter <bgunter.4567 at gmail.com> wrote:
> >>
> >> Is this homework? This list has a no-homework policy.
> >>
> >>
> >> -- Bert
> >>
> >> On Tue, Jan 10, 2023 at 8:13 AM Nyasha <kahuninyasha13296 at gmail.com>
> wrote:
> >>>
> >>> Please how can one go about this one? I don't know how to go about it.
> >>>
> >>>        [[alternative HTML version deleted]]
> >>>
> >>> ______________________________________________
> >>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >>> and provide commented, minimal, self-contained, reproducible code.
> >>
> >> ______________________________________________
> >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> >> and provide commented, minimal, self-contained, reproducible code.
> >
>
> --
> Sent from my phone. Please excuse my brevity.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @orenh @end|ng |rom m@th@@@u@dk  Thu Jan 19 18:10:15 2023
From: @orenh @end|ng |rom m@th@@@u@dk (=?utf-8?B?U8O4cmVuIEjDuGpzZ2FhcmQ=?=)
Date: Thu, 19 Jan 2023 17:10:15 +0000
Subject: [R] R emulation of FindRoot in Mathematica
In-Reply-To: <39939baf-3821-cef4-a887-cad77bfd1993@gvdnet.dk>
References: <2db9a526-58e9-40c3-623f-ca8db99ba80b@gvdnet.dk>
 <3488657.iIbC2pHGDl@archbox>
 <7d242389-3f1a-a90b-3070-bd3ac9ce1642@gvdnet.dk>
 <BN6PR2201MB155386A591E76D72AE877936CFC49@BN6PR2201MB1553.namprd22.prod.outlook.com>
 <35CE739B-50F5-447D-B061-99B5A4F6E589@dcn.davis.ca.us>
 <39939baf-3821-cef4-a887-cad77bfd1993@gvdnet.dk>
Message-ID: <9880387cf90ea3bbc91da41ce9a9abad1947774b.camel@math.aau.dk>

Dear Troels,

Are you aware of the caracas package for computer algebra in R? The package provides an interface to the SymPy package in python via the reticulate package.

I have no idea if the package can be helpful in your connection, but please report succeses and failures back.

Best regards
S?ren

-----Original Message-----
From: Troels Ring <tring at gvdnet.dk<mailto:Troels%20Ring%20%3ctring at gvdnet.dk%3e>>
To: Jeff Newmiller <jdnewmil at dcn.davis.ca.us<mailto:Jeff%20Newmiller%20%3cjdnewmil at dcn.davis.ca.us%3e>>, r-help at r-project.org<mailto:r-help at r-project.org>, "Ebert,Timothy Aaron" <tebert at ufl.edu<mailto:%22Ebert,Timothy%20Aaron%22%20%3ctebert at ufl.edu%3e>>, Valentin Petzel <valentin at petzel.at<mailto:Valentin%20Petzel%20%3cvalentin at petzel.at%3e>>
Subject: Re: [R] R emulation of FindRoot in Mathematica
Date: Thu, 19 Jan 2023 16:18:57 +0100


Hi Jeff - that is definitely not fair, this is a highly respected

scientist but old me are probably not clever enough to explain problem

which I think is not too difficult. Basically, it is a series of

consecutive statements of H and Mg and K combining to ATP and ADP,

creatin and creatinP under assumption og known total inorganic phosphate

(pi), total ATP total ADP, creatin and creatinphosphate. It was written

in 1997 when R was less mature - and if we know how to do it in R so not

to depend on black box operations it would be fun. For the moment, I'm

not even sure I understand why there is now focus on the problem being

nonlinear, since I want to evaluate at given H or pH.  hatp <- 10^6.494

* H * ATP ?


BW Troels



Den 19-01-2023 kl. 15:54 skrev Jeff Newmiller:

But it is simultaneously an example of why some researchers like black box solvers... a system of dozens of nonlinear equations can potentially have many or even infinite solutions. If the researcher is weak in math, they may have no idea which solutions are possible and having a tool like FindRoot confidently return a solution lets them focus on other things. Sort of like ChatGPT.


TL;DR the author may have no idea about how to resolve this without relying on the opaque FindRoot.


On January 19, 2023 6:28:53 AM PST, "Ebert,Timothy Aaron" <

<mailto:tebert at ufl.edu>

tebert at ufl.edu

> wrote:

This is a poster child for why we like open source software. "I dump numbers into a black box and get numbers out but I cannot verify how the numbers out were calculated so they must be correct" approach to analysis does not really work for me.

Tim


-----Original Message-----

From: R-help <

<mailto:r-help-bounces at r-project.org>

r-help-bounces at r-project.org

> On Behalf Of Troels Ring

Sent: Thursday, January 19, 2023 9:18 AM

To: Valentin Petzel <

<mailto:valentin at petzel.at>

valentin at petzel.at

>; r-help mailing list <

<mailto:r-help at r-project.org>

r-help at r-project.org

>

Subject: Re: [R] R emulation of FindRoot in Mathematica


[External Email]


Thanks,   Valentin for the suggestion. I'm not sure I can go that way. I

include below the statements from the paper containing the knowledge on the basis of which I would like to know at specified [H] the concentration of each of the many metabolites given the constraints. I have tried to contact the author to get the full code but it seems difficult.


BW Troels



hatp <- 10^6.494*H*atp

hhatp <- 10^3.944*H*hatp

hhhatp <- 10^1.9*H*hhatp

hhhhatp  <- 10*H*hhhatp

mgatp <- 10^4.363*atp*mg

mghatp <- 10^2.299*hatp*mg

mg2atp <- 10^1-7*mg*mgatp

katp <- 10^0.959*atp*k


hadp <- 10^6.349*adp*H

hhadp <- 10^3.819*hadp*H

hhhadp <- 10*H*hhadp

mgadp <- 10^3.294*mg*adp

mghadp <- 10^1.61*mg*hadp

mg2adp <- 10*mg*mgadp

kadp <- 10^0.82*k*adp


hpi <- 10^11.616*H*pi

hhpi <- 10^6.7*h*hpi

hhhpi <- 10^1.962*h*hhpi

mgpi <- 10^3.4*mg*pi

mghpi <- 10^1.946*mg*hpi

mghhpi <- 10^1.19*mg*hhpi

kpi <- 10^0.6*k*pi

khpi <- 10^1.218*k*hpi

khhpi <- 10^-0.2*k*hhpi


hpcr <- 10^14.3*h*pcr

hhpcr <- 10^4.5*h*hpcr

hhhpcr <- 10^2.7*h*hhpcr

hhhhpcr <- 100*h*hhhpcr

mghpcr <- 10^1.6*mg*hpcr

kpcr <- 10^0.74*k*pcr

khpcr <- 10^0.31*k*hpcr

khhpcr <- 10^-0.13*k*hhpcr


hcr <- 10^14.3*h*cr

hhcr <- 10^2.512*h*hcr


hlactate <- 10^3.66*h*lactate

mglactate <- 10^0.93*mg*lactate


tatp <- atp + hatp + hhatp + hhhatp + mgatp + mghatp + mg2atp + katp


tadp <- adp + hadp + hhadp + hhhadp + mghadp + mgadp + mg2adp + kadp


tpi <- pi + hpi + hhpi + hhhpi + mgpi + mghpi + mghhpi + kpi + khpi + khhpi


tpcr <- pcr + hpcr + hhpcr + hhhpcr + hhhhpcr + mghpcr + kpcr + khpcr + khhpcr


tcr <- cr + hcr + hhcr


tmg <- mg + mgatp + mghatp + mg2atp + mgadp + mghadp + mg2adp + mgpi + kghpi + mghhpi +

   mghpcr + mglactate


tk <- k + katp + kadp + kpi + khpi + khhpi + kpcr + khpcr + khhpcr


tlactate <- lactate + hlactate + mglactate


# conditions


tatp <- 0.008

tpcr <- 0.042

tcr <- 0.004

tadp <- 0.00001

tpi <- 0.003

tlactate <- 0.005


# free K and Mg constrained to be fixed

#

mg <- 0.0006

k <- 0.12


Den 19-01-2023 kl. 12:11 skrev Valentin Petzel:

Hello Troels,



As fair as I understand you attempt to numerically solve a system of

non linear equations in multiple variables in R. R does not provide

this functionality natively, but have you tried multiroot from the

rootSolve package:



<https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran>

https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcran


.r-project.org%2Fweb%2Fpackages%2FrootSolve%2FrootSolve.pdf&data=05%7C

01%7Ctebert%40ufl.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a3

14d76ace60a62331e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZ

sb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3

D%7C3000%7C%7C%7C&sdata=D9A3fwJ5x7GbEV4A01wncLUil7szTdSPul5vd0lsSBw%3D

&reserved=0



multiroot is called like



multiroot(f, start, ...)



where f is a function of one argument which is a vector of n values

(representing the n variables) and returning a vector of d values

(symbolising the d equations) and start is a vector of length n.



E.g. if we want so solve



x^2 + y^2 + z^2 = 1


x^3-y^3 = 0


x - z = 0



(which is of course equivalent to x = y = z, x^2 + y^2 + z^2 = 1, so x

= y = z = ?sqrt(1/3) ~ 0.577)



we'd enter



f <- function(x) c(x[1]**2 + x[2]**2 + x[3]**2 - 1, x[1]**3 - x[2]**3,

x[1] - x[3])



multiroot(f, c(0,0,0))



which yields



$root


[1] 0.5773502 0.5773505 0.5773502



$f.root


[1] 1.412261e-07 -2.197939e-07  0.000000e+00



$iter


[1] 31



$estim.precis


[1] 1.2034e-07



Best regards,


Valentin



Am Donnerstag, 19. J?nner 2023, 10:41:22 CET schrieb Troels Ring:


Hi friends - I hope this is not a misplaced question. From the

literature (Kushmerick AJP 1997;272:C1739-C1747) I have a series of

Mathematica equations which are solved together to yield over

different

pH values the concentrations of metabolites in skeletal muscle using

the

Mathematica function FindRoot((E1,E2...),(V2,V2..)] where E is a

list of

equations and V list of variables.  Most of the equations are

individual

binding reactions of the form 10^6.494*atp*h == hatp and next

10^9.944*hatp*h ==hhatp describing binding of singe protons or Mg or

K

to ATP or creatin for example, but we also have constraints giving

total

concentrations of say ATP i.e. ATP + ATPH, ATPH2..ATP.Mg

I have, without success, tried to find ways to do this in R - I have

36

equations on 36 variables and 8 equations on total concentrations.

As

far as I can see from the definition of FindRoot in Wolfram, Newton

search or secant search is employed.

I'm on Windows R 4.2.2

Best wishes

Troels Ring, MD

Aalborg, Denmark

______________________________________________

<mailto:R-help at r-project.org>

R-help at r-project.org

 mailing list -- To UNSUBSCRIBE and more, see

<https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst>

https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fst


at.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl

.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a6233

1e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoi

MC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C

%7C%7C&sdata=7DTBQItdQpAqK%2FCS1%2BqQvYdlvjyJMjzTOXhoS6AY%2FJQ%3D&re

served=0

PLEASE do read the posting guide

<https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r>

https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r


-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C7c

b98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a62331e1b84%7C0%

7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL

CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=m0

0vZP75nk9icL6H8Gc0dH1bHhkRCS9I5N27uORQmQ0%3D&reserved=0


and provide commented, minimal, self-contained, reproducible code.



        [[alternative HTML version deleted]]


______________________________________________

<mailto:R-help at r-project.org>

R-help at r-project.org

 mailing list -- To UNSUBSCRIBE and more, see

<https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=7DTBQItdQpAqK%2FCS1%2BqQvYdlvjyJMjzTOXhoS6AY%2FJQ%3D&reserved=0>

https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=7DTBQItdQpAqK%2FCS1%2BqQvYdlvjyJMjzTOXhoS6AY%2FJQ%3D&reserved=0


PLEASE do read the posting guide

<https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=m00vZP75nk9icL6H8Gc0dH1bHhkRCS9I5N27uORQmQ0%3D&reserved=0>

https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C7cb98cd926b34284cd5f08dafa28026c%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638097347110882622%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=m00vZP75nk9icL6H8Gc0dH1bHhkRCS9I5N27uORQmQ0%3D&reserved=0


and provide commented, minimal, self-contained, reproducible code.


______________________________________________

<mailto:R-help at r-project.org>

R-help at r-project.org

 mailing list -- To UNSUBSCRIBE and more, see

<https://stat.ethz.ch/mailman/listinfo/r-help>

https://stat.ethz.ch/mailman/listinfo/r-help


PLEASE do read the posting guide

<http://www.R-project.org/posting-guide.html>

http://www.R-project.org/posting-guide.html


and provide commented, minimal, self-contained, reproducible code.


______________________________________________

<mailto:R-help at r-project.org>

R-help at r-project.org

 mailing list -- To UNSUBSCRIBE and more, see

<https://stat.ethz.ch/mailman/listinfo/r-help>

https://stat.ethz.ch/mailman/listinfo/r-help


PLEASE do read the posting guide

<http://www.R-project.org/posting-guide.html>

http://www.R-project.org/posting-guide.html


and provide commented, minimal, self-contained, reproducible code.

--

S?ren H?jsgaard
Head of Department of Mathematical Sciences
Aalborg University, Denmark


	[[alternative HTML version deleted]]


From ggrothend|eck @end|ng |rom gm@||@com  Thu Jan 19 19:39:38 2023
From: ggrothend|eck @end|ng |rom gm@||@com (Gabor Grothendieck)
Date: Thu, 19 Jan 2023 13:39:38 -0500
Subject: [R] R emulation of FindRoot in Mathematica
In-Reply-To: <2db9a526-58e9-40c3-623f-ca8db99ba80b@gvdnet.dk>
References: <2db9a526-58e9-40c3-623f-ca8db99ba80b@gvdnet.dk>
Message-ID: <CAP01uRnYRfMsTSk4MUhp92omDgB70ZUu1sR=Q3208R70BadGgQ@mail.gmail.com>

If the equations are in the form shown in your post then take the log of
both sides, expand the logs and replace log(whatever) with new variables so
now the equations are in linear form and are easy to solve.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Thu Jan 19 23:28:21 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Thu, 19 Jan 2023 22:28:21 +0000
Subject: [R] function doesn't exists but still runs.....
Message-ID: <PU4P216MB1568AED34F5EE91DFBD0BF79C8C49@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

dear members,
                            I am using the RSelenium package which uses the function selenium() from the wdman package. The selenium function contains the function java_check at line 12. If I try to run it, it throws an error:

>   javapath <- java_check()
Error in java_check() : could not find function "java_check"

Also:

> exists("java_check")
[1] FALSE

But when I run selenium(), it works fine....

How do you explain this conundrum? You can refer to this link: https://github.com/ropensci/wdman/issues/15

Specifically what concept of R explains this weird behaviour?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI


	[[alternative HTML version deleted]]


From w||||@mwdun|@p @end|ng |rom gm@||@com  Fri Jan 20 01:02:31 2023
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Thu, 19 Jan 2023 16:02:31 -0800
Subject: [R] function doesn't exists but still runs.....
In-Reply-To: <PU4P216MB1568AED34F5EE91DFBD0BF79C8C49@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568AED34F5EE91DFBD0BF79C8C49@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAHqSRuTCBqh84FHg7=Xmd9qHxUiAN3Y4zBJbkAR3dRWhggu89Q@mail.gmail.com>

Look into R's scoping rules.  E.g.,
https://bookdown.org/rdpeng/rprogdatascience/scoping-rules-of-r.html.

* When a function looks up a name, it looks it up in the environment in
which the function was defined.
* Functions in a package are generally defined in the package's environment
(although sometimes they are in a descendent of the parent's environment).
* When one searches an environment for a name, if it is not found in the
environment the search continues in the parent environment of that
environment, recursively until the parent environment is the empty
environment.

> with(environment(wdman::selenium), java_check)
function ()
{
    javapath <- Sys.which("java")
    if (identical(unname(javapath), "")) {
        stop("PATH to JAVA not found. Please check JAVA is installed.")
    }
    javapath
}
<bytecode: 0x000001fd0ab826a8>
<environment: namespace:wdman>

-Bill

On Thu, Jan 19, 2023 at 2:28 PM akshay kulkarni <akshay_e4 at hotmail.com>
wrote:

> dear members,
>                             I am using the RSelenium package which uses
> the function selenium() from the wdman package. The selenium function
> contains the function java_check at line 12. If I try to run it, it throws
> an error:
>
> >   javapath <- java_check()
> Error in java_check() : could not find function "java_check"
>
> Also:
>
> > exists("java_check")
> [1] FALSE
>
> But when I run selenium(), it works fine....
>
> How do you explain this conundrum? You can refer to this link:
> https://github.com/ropensci/wdman/issues/15
>
> Specifically what concept of R explains this weird behaviour?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From JH@rm@e @end|ng |rom roku@com  Fri Jan 20 17:04:24 2023
From: JH@rm@e @end|ng |rom roku@com (Jorgen Harmse)
Date: Fri, 20 Jan 2023 16:04:24 +0000
Subject: [R] 
 function doesn't exists but still runs..... (akshay kulkarni)
In-Reply-To: <mailman.368738.1.1674212402.9424.r-help@r-project.org>
References: <mailman.368738.1.1674212402.9424.r-help@r-project.org>
Message-ID: <MW4PR01MB646566368BCB841E6D18626EDCC59@MW4PR01MB6465.prod.exchangelabs.com>

It may help to expand a bit on Bill Dunlap's answer. I think that library does something like this:



Create a new environment for all the package objects. This environment will not be directly visible from .GlobalEnv, and ancestor environments may not be directly visible either. It may contain functions & other objects that are not exported, and it may use objects in ancestor environments that .GlobalEnv doesn't see directly. On the other hand, functions in the package will still see external functions in the way the package author intended instead of seeing functions with the same name that are visible to .GlobalEnv.



Run the source code in the private environment (using source(local=private environment, ....)?). Most package source code just defines functions, but the source code could build other objects that the package needs for some reason, or it could use delayedAssign to build the objects lazily. By default, the environment of any function defined by the source code is the private environment, so the function has access to private objects and to anything in ancestor environments.



Create a second new environment whose parent is parent.env(.GlobalEnv). For every export, assign the corresponding object from the private environment into the corresponding name in the public environment. Note that the environment of any function is still the private environment in which it was created. (I think that a function is mostly determined by its environment, its formals, and its body. A function call creates a new environment whose parent is the environment of the function. Thus whoever wrote the function can control the search for anything that isn?t passed in or created by the function itself.)



Reset parent.env(.GlobalEnv) to be the public environment. This makes all the exported objects (usually functions) available at the command line and allows the user to see everything that was available before (usually by name only, but by scope-resolved name if necessary). As noted by Bill Dunlap and in more detail above, package functions can use functions & other objects that are not directly visible to the user. As he also showed, you can (usually) pierce the privacy as long at least one function is exported. environment(package_function) is the private environment, so you can use it to see all the private objects and everything in the ancestor environments. You can repeat the trick to see private environments of packages you didn't directly pull in. I think you can even unlock bindings and do ghastly things to the package's private environment.



Regards,

Jorgen Harmse.

------------------------------

Message: 17
Date: Thu, 19 Jan 2023 16:02:31 -0800
From: Bill Dunlap <williamwdunlap at gmail.com>
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] function doesn't exists but still runs.....
Message-ID:
        <CAHqSRuTCBqh84FHg7=Xmd9qHxUiAN3Y4zBJbkAR3dRWhggu89Q at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Look into R's scoping rules.  E.g.,
https://bookdown.org/rdpeng/rprogdatascience/scoping-rules-of-r.html.

* When a function looks up a name, it looks it up in the environment in
which the function was defined.
* Functions in a package are generally defined in the package's environment
(although sometimes they are in a descendent of the parent's environment).
* When one searches an environment for a name, if it is not found in the
environment the search continues in the parent environment of that
environment, recursively until the parent environment is the empty
environment.

> with(environment(wdman::selenium), java_check)
function ()
{
    javapath <- Sys.which("java")
    if (identical(unname(javapath), "")) {
        stop("PATH to JAVA not found. Please check JAVA is installed.")
    }
    javapath
}
<bytecode: 0x000001fd0ab826a8>
<environment: namespace:wdman>

-Bill

On Thu, Jan 19, 2023 at 2:28 PM akshay kulkarni <akshay_e4 at hotmail.com>
wrote:

> dear members,
>                             I am using the RSelenium package which uses
> the function selenium() from the wdman package. The selenium function
> contains the function java_check at line 12. If I try to run it, it throws
> an error:
>
> >   javapath <- java_check()
> Error in java_check() : could not find function "java_check"
>
> Also:
>
> > exists("java_check")
> [1] FALSE
>
> But when I run selenium(), it works fine....
>
> How do you explain this conundrum? You can refer to this link:
> https://github.com/ropensci/wdman/issues/15
>
> Specifically what concept of R explains this weird behaviour?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]




------------------------------

Subject: Digest Footer

_______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


------------------------------

End of R-help Digest, Vol 239, Issue 20
***************************************

	[[alternative HTML version deleted]]


From y@ngk@|9999 @end|ng |rom y@hoo@com  Fri Jan 20 17:20:15 2023
From: y@ngk@|9999 @end|ng |rom y@hoo@com (Kai Yang)
Date: Fri, 20 Jan 2023 16:20:15 +0000 (UTC)
Subject: [R] Problem to run python code in r markdown
References: <191453828.1924329.1674231615887.ref@mail.yahoo.com>
Message-ID: <191453828.1924329.1674231615887@mail.yahoo.com>

Hi Team,I'm trying to run python in R markdown (flexdashboard). The code is below:

try Python=============
```{r, include=FALSE, echo=TRUE}library(reticulate)py_install("numpy")
use_condaenv("base")
```
```{python}import numpy as np```

I got error message below:
Error in py_call_impl(callable, dots$args, dots$keywords) :?? ModuleNotFoundError: No module named 'numpy'Calls: <Anonymous> ... py_capture_output -> force -> <Anonymous> -> py_call_implIn addition: There were 26 warnings (use warnings() to see them)Execution halted


Based on message, the python can not find numpy package. But I'm sure I installed the package. I don't know how to fix the problem. please help
Thank you,Kai















	[[alternative HTML version deleted]]


From 538280 @end|ng |rom gm@||@com  Fri Jan 20 17:58:33 2023
From: 538280 @end|ng |rom gm@||@com (Greg Snow)
Date: Fri, 20 Jan 2023 09:58:33 -0700
Subject: [R] function doesn't exists but still runs.....
In-Reply-To: <PU4P216MB1568AED34F5EE91DFBD0BF79C8C49@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568AED34F5EE91DFBD0BF79C8C49@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <CAFEqCdy__B8-fU0X6K1fSCMJL+LTiRe4fnr0pLnBrtjRt=X7PQ@mail.gmail.com>

A little simpler answer than the others.

Look at package Namespaces.  When a package is created, the NAMESPACE
file defines which functions in the package are exported (i.e.
available for you to use), the other functions are "private" to the
package meaning that other functions in the package can call those
functions, but they are not meant to be called directly by the user.

So in your case, the `selenium` function was exported, but
`java_check` was not exported.  The function does exist, but R's
regular search rules do not find it when you try to call it directly
(but because it shares the Namespace with selenium, it is found when
called there).

It is possible to call non-exported functions (use something like
RSelenium:::java_check()), but non-exported functions are not usually
documented and subject to change without any warning.  You are using
the functionality in a way different from how the author intended, so
there are no guarantees that it will do what you think it should.

On Thu, Jan 19, 2023 at 3:28 PM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> dear members,
>                             I am using the RSelenium package which uses the function selenium() from the wdman package. The selenium function contains the function java_check at line 12. If I try to run it, it throws an error:
>
> >   javapath <- java_check()
> Error in java_check() : could not find function "java_check"
>
> Also:
>
> > exists("java_check")
> [1] FALSE
>
> But when I run selenium(), it works fine....
>
> How do you explain this conundrum? You can refer to this link: https://github.com/ropensci/wdman/issues/15
>
> Specifically what concept of R explains this weird behaviour?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



-- 
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com


From @k@h@y_e4 @end|ng |rom hotm@||@com  Fri Jan 20 18:07:49 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Fri, 20 Jan 2023 17:07:49 +0000
Subject: [R] function doesn't exists but still runs.....
In-Reply-To: <CAFEqCdy__B8-fU0X6K1fSCMJL+LTiRe4fnr0pLnBrtjRt=X7PQ@mail.gmail.com>
References: <PU4P216MB1568AED34F5EE91DFBD0BF79C8C49@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAFEqCdy__B8-fU0X6K1fSCMJL+LTiRe4fnr0pLnBrtjRt=X7PQ@mail.gmail.com>
Message-ID: <PU4P216MB15680C184B9B24AB95EA734CC8C59@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Greg,
                  THanks for a very well pointed answer.....

THanking you,
yours sincerely
AKSHAY M KULKARNI
________________________________
From: Greg Snow <538280 at gmail.com>
Sent: Friday, January 20, 2023 10:28 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] function doesn't exists but still runs.....

A little simpler answer than the others.

Look at package Namespaces.  When a package is created, the NAMESPACE
file defines which functions in the package are exported (i.e.
available for you to use), the other functions are "private" to the
package meaning that other functions in the package can call those
functions, but they are not meant to be called directly by the user.

So in your case, the `selenium` function was exported, but
`java_check` was not exported.  The function does exist, but R's
regular search rules do not find it when you try to call it directly
(but because it shares the Namespace with selenium, it is found when
called there).

It is possible to call non-exported functions (use something like
RSelenium:::java_check()), but non-exported functions are not usually
documented and subject to change without any warning.  You are using
the functionality in a way different from how the author intended, so
there are no guarantees that it will do what you think it should.

On Thu, Jan 19, 2023 at 3:28 PM akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>
> dear members,
>                             I am using the RSelenium package which uses the function selenium() from the wdman package. The selenium function contains the function java_check at line 12. If I try to run it, it throws an error:
>
> >   javapath <- java_check()
> Error in java_check() : could not find function "java_check"
>
> Also:
>
> > exists("java_check")
> [1] FALSE
>
> But when I run selenium(), it works fine....
>
> How do you explain this conundrum? You can refer to this link: https://github.com/ropensci/wdman/issues/15
>
> Specifically what concept of R explains this weird behaviour?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.



--
Gregory (Greg) L. Snow Ph.D.
538280 at gmail.com

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Fri Jan 20 18:10:59 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Fri, 20 Jan 2023 17:10:59 +0000
Subject: [R] function doesn't exists but still runs.....
In-Reply-To: <CAHqSRuTCBqh84FHg7=Xmd9qHxUiAN3Y4zBJbkAR3dRWhggu89Q@mail.gmail.com>
References: <PU4P216MB1568AED34F5EE91DFBD0BF79C8C49@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <CAHqSRuTCBqh84FHg7=Xmd9qHxUiAN3Y4zBJbkAR3dRWhggu89Q@mail.gmail.com>
Message-ID: <PU4P216MB1568CB60C7B91A45E16B92FFC8C59@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Bill,
                Thanks for your reply...If I run selenium() in debug mode,  java_check() should work inside of selenium(), right?
Any other points to be considered when running selenium() in debug mode?

THanking you,
yours sincerely
AKSHAY M KULKARNI
________________________________
From: Bill Dunlap <williamwdunlap at gmail.com>
Sent: Friday, January 20, 2023 5:32 AM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] function doesn't exists but still runs.....

Look into R's scoping rules.  E.g., https://bookdown.org/rdpeng/rprogdatascience/scoping-rules-of-r.html.

* When a function looks up a name, it looks it up in the environment in which the function was defined.
* Functions in a package are generally defined in the package's environment (although sometimes they are in a descendent of the parent's environment).
* When one searches an environment for a name, if it is not found in the environment the search continues in the parent environment of that environment, recursively until the parent environment is the empty environment.

> with(environment(wdman::selenium), java_check)
function ()
{
    javapath <- Sys.which("java")
    if (identical(unname(javapath), "")) {
        stop("PATH to JAVA not found. Please check JAVA is installed.")
    }
    javapath
}
<bytecode: 0x000001fd0ab826a8>
<environment: namespace:wdman>

-Bill

On Thu, Jan 19, 2023 at 2:28 PM akshay kulkarni <akshay_e4 at hotmail.com<mailto:akshay_e4 at hotmail.com>> wrote:
dear members,
                            I am using the RSelenium package which uses the function selenium() from the wdman package. The selenium function contains the function java_check at line 12. If I try to run it, it throws an error:

>   javapath <- java_check()
Error in java_check() : could not find function "java_check"

Also:

> exists("java_check")
[1] FALSE

But when I run selenium(), it works fine....

How do you explain this conundrum? You can refer to this link: https://github.com/ropensci/wdman/issues/15

Specifically what concept of R explains this weird behaviour?

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI


        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Fri Jan 20 18:18:54 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Fri, 20 Jan 2023 17:18:54 +0000
Subject: [R] 
 function doesn't exists but still runs..... (akshay kulkarni)
In-Reply-To: <MW4PR01MB646566368BCB841E6D18626EDCC59@MW4PR01MB6465.prod.exchangelabs.com>
References: <mailman.368738.1.1674212402.9424.r-help@r-project.org>
 <MW4PR01MB646566368BCB841E6D18626EDCC59@MW4PR01MB6465.prod.exchangelabs.com>
Message-ID: <PU4P216MB156875424240A880C680B4CFC8C59@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Jorgen,
                     thanks for the reply.....so according to you one can pegion hole the problem as concerning R's lexical scoping rules,am I right? Or some arcane concept regarding environments....?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Jorgen Harmse <JHarmse at roku.com>
Sent: Friday, January 20, 2023 9:34 PM
To: r-help at r-project.org <r-help at r-project.org>; akshay_e4 at hotmail.com <akshay_e4 at hotmail.com>; williamwdunlap at gmail.com <williamwdunlap at gmail.com>
Subject: Re: function doesn't exists but still runs..... (akshay kulkarni)


It may help to expand a bit on Bill Dunlap's answer. I think that library does something like this:



Create a new environment for all the package objects. This environment will not be directly visible from .GlobalEnv, and ancestor environments may not be directly visible either. It may contain functions & other objects that are not exported, and it may use objects in ancestor environments that .GlobalEnv doesn't see directly. On the other hand, functions in the package will still see external functions in the way the package author intended instead of seeing functions with the same name that are visible to .GlobalEnv.



Run the source code in the private environment (using source(local=private environment, ....)?). Most package source code just defines functions, but the source code could build other objects that the package needs for some reason, or it could use delayedAssign to build the objects lazily. By default, the environment of any function defined by the source code is the private environment, so the function has access to private objects and to anything in ancestor environments.



Create a second new environment whose parent is parent.env(.GlobalEnv). For every export, assign the corresponding object from the private environment into the corresponding name in the public environment. Note that the environment of any function is still the private environment in which it was created. (I think that a function is mostly determined by its environment, its formals, and its body. A function call creates a new environment whose parent is the environment of the function. Thus whoever wrote the function can control the search for anything that isn?t passed in or created by the function itself.)



Reset parent.env(.GlobalEnv) to be the public environment. This makes all the exported objects (usually functions) available at the command line and allows the user to see everything that was available before (usually by name only, but by scope-resolved name if necessary). As noted by Bill Dunlap and in more detail above, package functions can use functions & other objects that are not directly visible to the user. As he also showed, you can (usually) pierce the privacy as long at least one function is exported. environment(package_function) is the private environment, so you can use it to see all the private objects and everything in the ancestor environments. You can repeat the trick to see private environments of packages you didn't directly pull in. I think you can even unlock bindings and do ghastly things to the package's private environment.



Regards,

Jorgen Harmse.

------------------------------

Message: 17
Date: Thu, 19 Jan 2023 16:02:31 -0800
From: Bill Dunlap <williamwdunlap at gmail.com>
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] function doesn't exists but still runs.....
Message-ID:
        <CAHqSRuTCBqh84FHg7=Xmd9qHxUiAN3Y4zBJbkAR3dRWhggu89Q at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Look into R's scoping rules.  E.g.,
https://bookdown.org/rdpeng/rprogdatascience/scoping-rules-of-r.html.

* When a function looks up a name, it looks it up in the environment in
which the function was defined.
* Functions in a package are generally defined in the package's environment
(although sometimes they are in a descendent of the parent's environment).
* When one searches an environment for a name, if it is not found in the
environment the search continues in the parent environment of that
environment, recursively until the parent environment is the empty
environment.

> with(environment(wdman::selenium), java_check)
function ()
{
    javapath <- Sys.which("java")
    if (identical(unname(javapath), "")) {
        stop("PATH to JAVA not found. Please check JAVA is installed.")
    }
    javapath
}
<bytecode: 0x000001fd0ab826a8>
<environment: namespace:wdman>

-Bill

On Thu, Jan 19, 2023 at 2:28 PM akshay kulkarni <akshay_e4 at hotmail.com>
wrote:

> dear members,
>                             I am using the RSelenium package which uses
> the function selenium() from the wdman package. The selenium function
> contains the function java_check at line 12. If I try to run it, it throws
> an error:
>
> >   javapath <- java_check()
> Error in java_check() : could not find function "java_check"
>
> Also:
>
> > exists("java_check")
> [1] FALSE
>
> But when I run selenium(), it works fine....
>
> How do you explain this conundrum? You can refer to this link:
> https://github.com/ropensci/wdman/issues/15
>
> Specifically what concept of R explains this weird behaviour?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]




------------------------------

Subject: Digest Footer

_______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


------------------------------

End of R-help Digest, Vol 239, Issue 20
***************************************

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Jan 20 18:59:40 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 20 Jan 2023 09:59:40 -0800
Subject: [R] 
 function doesn't exists but still runs..... (akshay kulkarni)
In-Reply-To: <PU4P216MB156875424240A880C680B4CFC8C59@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <mailman.368738.1.1674212402.9424.r-help@r-project.org>
 <MW4PR01MB646566368BCB841E6D18626EDCC59@MW4PR01MB6465.prod.exchangelabs.com>
 <PU4P216MB156875424240A880C680B4CFC8C59@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <1ACFC3C6-8B81-4FCF-ADB1-98E8240B1B00@dcn.davis.ca.us>

This is not a "problem" ... it is a "feature". Packages often use functions from other packages, but that does NOT mean that you as a user can automatically use those functions  also.

If Package A uses Package B to implement something, but Package B becomes unavailable, the maintainer of Package A would like to fill in the gap. If Package A "Depends" on Package B then users of package A automatically get access to Package B and they get used to treating Package A like it contains all of the functions in Package B directly.

Therefore it is common to have Package A "Import" Package B so that the Package A maintainer won't have to re-implement all of Package B to avoid breaking code for users of Package A. They can fix things under the hood for their own Package A functions using other code.

If a user wants to depend on Package B, it is up to them to use the library function to do so explicitly... and when Package B goes away, they are responsible for dealing with that mess themselves.

You asked "how", and got answers... but you didn't bother to follow up on those answers by reading things like "Writing R Extensions" or Hadley Wickham's "R Packages" or "Advanced R". Don't turn that laziness into a value judgement about "problems" with R.

On January 20, 2023 9:18:54 AM PST, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>Dear Jorgen,
>                     thanks for the reply.....so according to you one can pegion hole the problem as concerning R's lexical scoping rules,am I right? Or some arcane concept regarding environments....?
>
>THanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>________________________________
>From: Jorgen Harmse <JHarmse at roku.com>
>Sent: Friday, January 20, 2023 9:34 PM
>To: r-help at r-project.org <r-help at r-project.org>; akshay_e4 at hotmail.com <akshay_e4 at hotmail.com>; williamwdunlap at gmail.com <williamwdunlap at gmail.com>
>Subject: Re: function doesn't exists but still runs..... (akshay kulkarni)
>
>
>It may help to expand a bit on Bill Dunlap's answer. I think that library does something like this:
>
>
>
>Create a new environment for all the package objects. This environment will not be directly visible from .GlobalEnv, and ancestor environments may not be directly visible either. It may contain functions & other objects that are not exported, and it may use objects in ancestor environments that .GlobalEnv doesn't see directly. On the other hand, functions in the package will still see external functions in the way the package author intended instead of seeing functions with the same name that are visible to .GlobalEnv.
>
>
>
>Run the source code in the private environment (using source(local=private environment, ....)?). Most package source code just defines functions, but the source code could build other objects that the package needs for some reason, or it could use delayedAssign to build the objects lazily. By default, the environment of any function defined by the source code is the private environment, so the function has access to private objects and to anything in ancestor environments.
>
>
>
>Create a second new environment whose parent is parent.env(.GlobalEnv). For every export, assign the corresponding object from the private environment into the corresponding name in the public environment. Note that the environment of any function is still the private environment in which it was created. (I think that a function is mostly determined by its environment, its formals, and its body. A function call creates a new environment whose parent is the environment of the function. Thus whoever wrote the function can control the search for anything that isn?t passed in or created by the function itself.)
>
>
>
>Reset parent.env(.GlobalEnv) to be the public environment. This makes all the exported objects (usually functions) available at the command line and allows the user to see everything that was available before (usually by name only, but by scope-resolved name if necessary). As noted by Bill Dunlap and in more detail above, package functions can use functions & other objects that are not directly visible to the user. As he also showed, you can (usually) pierce the privacy as long at least one function is exported. environment(package_function) is the private environment, so you can use it to see all the private objects and everything in the ancestor environments. You can repeat the trick to see private environments of packages you didn't directly pull in. I think you can even unlock bindings and do ghastly things to the package's private environment.
>
>
>
>Regards,
>
>Jorgen Harmse.
>
>------------------------------
>
>Message: 17
>Date: Thu, 19 Jan 2023 16:02:31 -0800
>From: Bill Dunlap <williamwdunlap at gmail.com>
>To: akshay kulkarni <akshay_e4 at hotmail.com>
>Cc: R help Mailing list <r-help at r-project.org>
>Subject: Re: [R] function doesn't exists but still runs.....
>Message-ID:
>        <CAHqSRuTCBqh84FHg7=Xmd9qHxUiAN3Y4zBJbkAR3dRWhggu89Q at mail.gmail.com>
>Content-Type: text/plain; charset="utf-8"
>
>Look into R's scoping rules.  E.g.,
>https://bookdown.org/rdpeng/rprogdatascience/scoping-rules-of-r.html.
>
>* When a function looks up a name, it looks it up in the environment in
>which the function was defined.
>* Functions in a package are generally defined in the package's environment
>(although sometimes they are in a descendent of the parent's environment).
>* When one searches an environment for a name, if it is not found in the
>environment the search continues in the parent environment of that
>environment, recursively until the parent environment is the empty
>environment.
>
>> with(environment(wdman::selenium), java_check)
>function ()
>{
>    javapath <- Sys.which("java")
>    if (identical(unname(javapath), "")) {
>        stop("PATH to JAVA not found. Please check JAVA is installed.")
>    }
>    javapath
>}
><bytecode: 0x000001fd0ab826a8>
><environment: namespace:wdman>
>
>-Bill
>
>On Thu, Jan 19, 2023 at 2:28 PM akshay kulkarni <akshay_e4 at hotmail.com>
>wrote:
>
>> dear members,
>>                             I am using the RSelenium package which uses
>> the function selenium() from the wdman package. The selenium function
>> contains the function java_check at line 12. If I try to run it, it throws
>> an error:
>>
>> >   javapath <- java_check()
>> Error in java_check() : could not find function "java_check"
>>
>> Also:
>>
>> > exists("java_check")
>> [1] FALSE
>>
>> But when I run selenium(), it works fine....
>>
>> How do you explain this conundrum? You can refer to this link:
>> https://github.com/ropensci/wdman/issues/15
>>
>> Specifically what concept of R explains this weird behaviour?
>>
>> Thanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>>
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>        [[alternative HTML version deleted]]
>
>
>
>
>------------------------------
>
>Subject: Digest Footer
>
>_______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.
>
>
>------------------------------
>
>End of R-help Digest, Vol 239, Issue 20
>***************************************
>
>	[[alternative HTML version deleted]]
>

-- 
Sent from my phone. Please excuse my brevity.


From JH@rm@e @end|ng |rom roku@com  Fri Jan 20 19:05:24 2023
From: JH@rm@e @end|ng |rom roku@com (Jorgen Harmse)
Date: Fri, 20 Jan 2023 18:05:24 +0000
Subject: [R] [EXTERNAL] Re: function doesn't exists but still runs.....
 (akshay kulkarni)
In-Reply-To: <PU4P216MB156875424240A880C680B4CFC8C59@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <mailman.368738.1.1674212402.9424.r-help@r-project.org>
 <MW4PR01MB646566368BCB841E6D18626EDCC59@MW4PR01MB6465.prod.exchangelabs.com>
 <PU4P216MB156875424240A880C680B4CFC8C59@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <MW4PR01MB64651D15AD89A2A28C1F1B3BDCC59@MW4PR01MB6465.prod.exchangelabs.com>

Hi Akshay,

Lexical scoping and environments are closely tied. (I think Bill even cited the documentation.) I guess it's arcane in the sense that scoping usually does what you expect, but the way that works is related to what we discussed.

What led you to discover the issue? Were you debugging the public package function because it didn't do what you expected, or were you just curious how it worked?

Regards,
Jorgen.


From: akshay kulkarni <akshay_e4 at hotmail.com>
Date: Friday, January 20, 2023 at 11:19
To: Jorgen Harmse <JHarmse at roku.com>, r-help at r-project.org <r-help at r-project.org>, williamwdunlap at gmail.com <williamwdunlap at gmail.com>
Subject: [EXTERNAL] Re: function doesn't exists but still runs..... (akshay kulkarni)
Dear Jorgen,
                     thanks for the reply.....so according to you one can pegion hole the problem as concerning R's lexical scoping rules,am I right? Or some arcane concept regarding environments....?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Jorgen Harmse <JHarmse at roku.com>
Sent: Friday, January 20, 2023 9:34 PM
To: r-help at r-project.org <r-help at r-project.org>; akshay_e4 at hotmail.com <akshay_e4 at hotmail.com>; williamwdunlap at gmail.com <williamwdunlap at gmail.com>
Subject: Re: function doesn't exists but still runs..... (akshay kulkarni)


It may help to expand a bit on Bill Dunlap's answer. I think that library does something like this:



Create a new environment for all the package objects. This environment will not be directly visible from .GlobalEnv, and ancestor environments may not be directly visible either. It may contain functions & other objects that are not exported, and it may use objects in ancestor environments that .GlobalEnv doesn't see directly. On the other hand, functions in the package will still see external functions in the way the package author intended instead of seeing functions with the same name that are visible to .GlobalEnv.



Run the source code in the private environment (using source(local=private environment, ....)?). Most package source code just defines functions, but the source code could build other objects that the package needs for some reason, or it could use delayedAssign to build the objects lazily. By default, the environment of any function defined by the source code is the private environment, so the function has access to private objects and to anything in ancestor environments.



Create a second new environment whose parent is parent.env(.GlobalEnv). For every export, assign the corresponding object from the private environment into the corresponding name in the public environment. Note that the environment of any function is still the private environment in which it was created. (I think that a function is mostly determined by its environment, its formals, and its body. A function call creates a new environment whose parent is the environment of the function. Thus whoever wrote the function can control the search for anything that isn?t passed in or created by the function itself.)



Reset parent.env(.GlobalEnv) to be the public environment. This makes all the exported objects (usually functions) available at the command line and allows the user to see everything that was available before (usually by name only, but by scope-resolved name if necessary). As noted by Bill Dunlap and in more detail above, package functions can use functions & other objects that are not directly visible to the user. As he also showed, you can (usually) pierce the privacy as long at least one function is exported. environment(package_function) is the private environment, so you can use it to see all the private objects and everything in the ancestor environments. You can repeat the trick to see private environments of packages you didn't directly pull in. I think you can even unlock bindings and do ghastly things to the package's private environment.



Regards,

Jorgen Harmse.

------------------------------

Message: 17
Date: Thu, 19 Jan 2023 16:02:31 -0800
From: Bill Dunlap <williamwdunlap at gmail.com>
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] function doesn't exists but still runs.....
Message-ID:
        <CAHqSRuTCBqh84FHg7=Xmd9qHxUiAN3Y4zBJbkAR3dRWhggu89Q at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Look into R's scoping rules.  E.g.,
https://bookdown.org/rdpeng/rprogdatascience/scoping-rules-of-r.html.

* When a function looks up a name, it looks it up in the environment in
which the function was defined.
* Functions in a package are generally defined in the package's environment
(although sometimes they are in a descendent of the parent's environment).
* When one searches an environment for a name, if it is not found in the
environment the search continues in the parent environment of that
environment, recursively until the parent environment is the empty
environment.

> with(environment(wdman::selenium), java_check)
function ()
{
    javapath <- Sys.which("java")
    if (identical(unname(javapath), "")) {
        stop("PATH to JAVA not found. Please check JAVA is installed.")
    }
    javapath
}
<bytecode: 0x000001fd0ab826a8>
<environment: namespace:wdman>

-Bill

On Thu, Jan 19, 2023 at 2:28 PM akshay kulkarni <akshay_e4 at hotmail.com>
wrote:

> dear members,
>                             I am using the RSelenium package which uses
> the function selenium() from the wdman package. The selenium function
> contains the function java_check at line 12. If I try to run it, it throws
> an error:
>
> >   javapath <- java_check()
> Error in java_check() : could not find function "java_check"
>
> Also:
>
> > exists("java_check")
> [1] FALSE
>
> But when I run selenium(), it works fine....
>
> How do you explain this conundrum? You can refer to this link:
> https://github.com/ropensci/wdman/issues/15
>
> Specifically what concept of R explains this weird behaviour?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]




------------------------------

Subject: Digest Footer

_______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


------------------------------

End of R-help Digest, Vol 239, Issue 20
***************************************

	[[alternative HTML version deleted]]


From er|cjberger @end|ng |rom gm@||@com  Fri Jan 20 19:29:58 2023
From: er|cjberger @end|ng |rom gm@||@com (Eric Berger)
Date: Fri, 20 Jan 2023 20:29:58 +0200
Subject: [R] Problem to run python code in r markdown
In-Reply-To: <191453828.1924329.1674231615887@mail.yahoo.com>
References: <191453828.1924329.1674231615887.ref@mail.yahoo.com>
 <191453828.1924329.1674231615887@mail.yahoo.com>
Message-ID: <CAGgJW77AYewxLZMguiEhaYaBc0EsqRJOs=y4a7N0SmVhQqE+Vw@mail.gmail.com>

You don't specify what platform you are on (linux / Windows / other),
and what tools you are using.
I am running a linux system and I have virtual environments set up.
I set the environment variable RETICULATE_PYTHON to point to python
(in my virtual environment).
I am using RStudio, and I use the File pulldown menu and select New
File --> 'R Markdown' or New File --> 'Quarto document'.
In the R Markdown (or Quarto) document, create a python code chunk:

```{python}
import numpy as np
print(np.arange(5))
```

works for me.
HTH,
Eric




On Fri, Jan 20, 2023 at 6:20 PM Kai Yang via R-help
<r-help at r-project.org> wrote:
>
> Hi Team,I'm trying to run python in R markdown (flexdashboard). The code is below:
>
> try Python=============
> ```{r, include=FALSE, echo=TRUE}library(reticulate)py_install("numpy")
> use_condaenv("base")
> ```
> ```{python}import numpy as np```
>
> I got error message below:
> Error in py_call_impl(callable, dots$args, dots$keywords) :   ModuleNotFoundError: No module named 'numpy'Calls: <Anonymous> ... py_capture_output -> force -> <Anonymous> -> py_call_implIn addition: There were 26 warnings (use warnings() to see them)Execution halted
>
>
> Based on message, the python can not find numpy package. But I'm sure I installed the package. I don't know how to fix the problem. please help
> Thank you,Kai
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From new@ @end|ng |rom m||@ng|@c|er@com  Fri Jan 20 21:30:03 2023
From: new@ @end|ng |rom m||@ng|@c|er@com (Milan Glacier)
Date: Fri, 20 Jan 2023 15:30:03 -0500
Subject: [R] Problem to run python code in r markdown
In-Reply-To: <191453828.1924329.1674231615887@mail.yahoo.com>
References: <191453828.1924329.1674231615887.ref@mail.yahoo.com>
 <191453828.1924329.1674231615887@mail.yahoo.com>
Message-ID: <20230120203003.waudn5b4ssxfyqc4@zoho.com>

Maybe it is the order. You called py_install() first and then called
use_condaenv(). Perhaps you need to switch to your conda env first and
then call py_install().

On 01/20/23 16:20, Kai Yang via R-help wrote:
>Hi Team,I'm trying to run python in R markdown (flexdashboard). The code is below:
>
>try Python=============
>```{r, include=FALSE, echo=TRUE}library(reticulate)py_install("numpy")
>use_condaenv("base")
>```
>```{python}import numpy as np```
>
>I got error message below:
>Error in py_call_impl(callable, dots$args, dots$keywords) :?? ModuleNotFoundError: No module named 'numpy'Calls: <Anonymous> ... py_capture_output -> force -> <Anonymous> -> py_call_implIn addition: There were 26 warnings (use warnings() to see them)Execution halted
>
>
>Based on message, the python can not find numpy package. But I'm sure I installed the package. I don't know how to fix the problem. please help
>Thank you,Kai


From @vi@e@gross m@iii@g oii gm@ii@com  Fri Jan 20 21:33:04 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Fri, 20 Jan 2023 15:33:04 -0500
Subject: [R] Problem to run python code in r markdown
In-Reply-To: <191453828.1924329.1674231615887@mail.yahoo.com>
References: <191453828.1924329.1674231615887.ref@mail.yahoo.com>
 <191453828.1924329.1674231615887@mail.yahoo.com>
Message-ID: <007a01d92d0e$6613dc70$323b9550$@gmail.com>

Kai,

Just FYI, this is mainly an R mailing list and although there ware ways to combine python with R (or sort of alone) within environments like RSTUDIO, this may not be an optimal place to discuss this. You are discussing what is no longer really "R markdown" and more just plain "markdown" that supports many languages in many environments and you are using one called flexdashboard.

I had a similar problem for a while because I had an amazing number of copies of python installed on my machine in various ways including directly and within Anaconda and several other ways. Each may have kept copies of modules like numpy in a different place. Unfortunately, when running python from RSTUDIO, it was looking in a place that did not have it and when I used "pip" to get the latest copy, it insisted I already had it!

So I eventually uninstalled all versions I could find and reinstalled just one version and then got the numpy and pandas modules installed under that version. Oh, I also replaced/updated RSTUDIO. Things work fine for now.

Some people may advise you on how to determine which version of python you are calling, or change it, and how to download numpy to the place it is expected, or change some environmental variable to point to it or any number of other solutions. Some like virtual environments, for example.

The bottom line is your setup does not have numpy installed as far as the software is concerned even if it is installed somewhere on your machine. When you get things aligned, you will be fine. 

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Kai Yang via R-help
Sent: Friday, January 20, 2023 11:20 AM
To: R-help Mailing List <r-help at r-project.org>
Subject: [R] Problem to run python code in r markdown

Hi Team,I'm trying to run python in R markdown (flexdashboard). The code is below:

try Python=============
```{r, include=FALSE, echo=TRUE}library(reticulate)py_install("numpy")
use_condaenv("base")
```
```{python}import numpy as np```

I got error message below:
Error in py_call_impl(callable, dots$args, dots$keywords) :   ModuleNotFoundError: No module named 'numpy'Calls: <Anonymous> ... py_capture_output -> force -> <Anonymous> -> py_call_implIn addition: There were 26 warnings (use warnings() to see them)Execution halted


Based on message, the python can not find numpy package. But I'm sure I installed the package. I don't know how to fix the problem. please help Thank you,Kai















	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From tz|yun2 @end|ng |rom gm@||@com  Sat Jan 21 21:14:15 2023
From: tz|yun2 @end|ng |rom gm@||@com (Ziyun Tang)
Date: Sat, 21 Jan 2023 15:14:15 -0500
Subject: [R] Flickering when scrolling in R graphics windows
Message-ID: <CAM-2newL_1zFzxpcOuv4bFbmCHTr5E_DZWi__GSdrku=Er1PJQ@mail.gmail.com>

Hello, I have been experiencing some issues regarding scrolling with
the mouse or trackpad in R graphics windows (from the base graphics
package), which sometimes results in flickering, and wanted to see if
anyone else had the same issues, or any advice. This happens for R
version 4.2.2 on Windows 10 x64, and occurs when using Rgui and at the
command line (whenever graphics windows are invoked). Note that some
of the example code below can cause flickering and can be an issue for
those with photosensitive epilepsy.

Specifically, I have been experiencing three main issues, as follows:

1. When viewing a dataset with View(), the graphics window flickers
when scrolling downwards too quickly, even with the option
buffered=TRUE. For example:
> View(iris)

2. When viewing a graph with plot(), and scrolling down, the graphics
window flickers between the background and the graph itself. For
example:
> plot(iris$Sepal.Length, iris$Sepal.Width)

3. When viewing a matrix of scatterplots with pairs(), and scrolling
down, the graphics window flickers between the background and the
individual scatterplots. In some instances, when scrolling down with
the trackpad, the window flickers continuously, and subsequently
closing the window crashes R. For example:
> pairs(iris[1:4])

My sessionInfo() is as follows:

R version 4.2.2 (2022-10-31 ucrt)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 19044)

Matrix products: default

locale:
[1] LC_COLLATE=English_United States.utf8
[2] LC_CTYPE=English_United States.utf8
[3] LC_MONETARY=English_United States.utf8
[4] LC_NUMERIC=C
[5] LC_TIME=English_United States.utf8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_4.2.2 tools_4.2.2

Thank you in advance,
Ziyun


From L@urentRHe|p @end|ng |rom |ree@|r  Sun Jan 22 14:18:07 2023
From: L@urentRHe|p @end|ng |rom |ree@|r (Laurent Rhelp)
Date: Sun, 22 Jan 2023 14:18:07 +0100
Subject: [R] lattice xyplot: trouble about the use of yscale.components to
 start the yscale from zero
Message-ID: <d7938db4-5d8d-0268-1fbd-419cd57ff1a2@free.fr>

Dear RHelp-list,

 ?I want to choice my scale for every panel in a lattice graph according to
 ?the ylim range of every panel, with 10 ticks and with a start from 0. 
Also I want to plot a grid
 ? according to the y ticks (I did that in the panel argument with the 
panel.abline function) .
 ?So I decided to use the yscale.components argument and I write the 
script below.
 ?Before using the pretty function I introduce the 0 value in my range but
it does not work : the labels are not displayed and the panel.abline do 
nothing. I am not able to understand why.
 ? If I comment the line ylim <- c(0,max(lim)) the labels appear but of 
course they do not start from 0.

Thank you for your help.

Laurent


 ?--------------------------o<----------------------------------------------->o-----------------------------------------
library(lattice)
library(zoo)
##
## Rq : mydata is a zoo object
##
mydata <- structure(c(0.190991684047867, 0.186639474048368, 
0.188562286982088,
 ??????????? 0.187781290093149, 0.188242724296645, 0.190412570465429, 
0.188922969182772,
 ??????????? 0.194037520889193, 0.191973884842229, 0.197032138922638, 
1.03204611806177,
 ??????????? 1.02831610106898, 1.0280323738983, 1.03595907392095, 
1.03316162925952,
 ??????????? 1.04755124287765, 1.04403986225312, 1.05686325668364, 
1.04672225664295,
 ??????????? 1.05462971668107), dim = c(10L, 2L), dimnames = list(c("f1",
 ???????? "f1", "f1", "f1", "f1", "f1", "f1", "f1", "f1", "f1"), 
c("col1","col2"))
 ???????? , index = c(1.27904891967773, 1.27909898757935, 1.27915000915527
 ????? , 1.27920007705688, 1.2792489528656, 1.27929902076721, 
1.27935004234314
 ????? ,1.27939891815186, 1.27944993972778, 1.27950000762939), class = 
"zoo")

options(digits=17)

yscale.components.n.ticks <- function(lim,...){

 ? ans <- yscale.components.default(lim = lim,...)
 ? ylim <- lim
 ? ## I want to start from 0
 ? ylim <- c(0,max(lim))
 ? tick.at <- pretty(ylim, n=10, min.n = 9)
 ?? cat("lim yscale : ",ylim,"\n")

 ? mylabels_y <- formatC(?? tick.at
 ???????????????????????? , format = "f"
 ???????????????????????? , digits=3
 ???????????????????????? , width=9
 ???????????????????????? ,flag=" ")

 ? print(cbind( mylabels_y = mylabels_y, tick.at_y = tick.at))

 ? ans$left$tick$at <- tick.at
 ? ans$left$labels$at <- tick.at
 ? ans$left$labels$labels <- mylabels_y
 ? ans
}


xscale.components.n.ticks <- function(lim, ... ){

 ? ans <- xscale.components.default(lim = lim,...)
 ? tick.at <- pretty(lim,20,9)
 ? mylabels_x <- formatC(?? tick.at
 ???????????????????????? , format = "f"
 ???????????????????????? , digits=6
 ???????????????????????? , width=9
 ???????????????????????? , flag=" ")

 ? print(cbind( mylabels_x = mylabels_x, tick.at_x = tick.at))

 ? ans$bottom$tick$at <- tick.at
 ? ans$bottom$labels$at <- tick.at
 ? ans$bottom$labels$labels <- mylabels_x
 ? ans
}

# to see the x values
time(mydata)

gr <- xyplot(? mydata
 ?????????????? , main = "title"
 ?????????????? , layout = c(1,2)
 ?????????????? , pch = 20
 ?????????????? , panel = function(...) {

 ???????????????? ylim <- current.panel.limits()$ylim
 ???????????????? xlim <- current.panel.limits()$xlim

 ???????????????? ## I create here the same ticks that those created
 ???????????????? ##? in xscale.components and yscale.components
 ???? ???????? ? ylim <- c(0,max(ylim))
 ??????????????? cat("ylim panel : ",ylim,"\n")
 ??????????????? y.tick.at <- pretty(ylim,10,9)
 ??????????????? print(cbind(y.tick.at.panel= y.tick.at))

 ???????????????? x.tick.at <- pretty(xlim,20,9)

 ??????????????? panel.abline( h = y.tick.at, v = x.tick.at, col = 
"lightgrey")

 ???????????????? panel.xyplot(...)
 ?????????????? }
##?????????????? , ylim = c(0,1.5)
 ?????????????? , scales = list(
 ???????????????? y= list(?? relation = "free"
 ????????????????????????? , axs="i"
 ????????????????????????? , rot = 45
 ????????????????????????? ),
 ???????????????? x = list(
 ???????????????????????????? axs="i"
 ?????????????????????????? , rot = 90
 ????????????????????????? )
 ?????????????? )
 ?????????????? , yscale.components = yscale.components.n.ticks
 ?????????????? , xscale.components = xscale.components.n.ticks

)

print(gr)

-- 
Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
www.avast.com


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Jan 22 15:25:59 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 22 Jan 2023 14:25:59 +0000
Subject: [R] [EXTERNAL] Re: function doesn't exists but still runs.....
 (akshay kulkarni)
In-Reply-To: <MW4PR01MB64651D15AD89A2A28C1F1B3BDCC59@MW4PR01MB6465.prod.exchangelabs.com>
References: <mailman.368738.1.1674212402.9424.r-help@r-project.org>
 <MW4PR01MB646566368BCB841E6D18626EDCC59@MW4PR01MB6465.prod.exchangelabs.com>
 <PU4P216MB156875424240A880C680B4CFC8C59@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <MW4PR01MB64651D15AD89A2A28C1F1B3BDCC59@MW4PR01MB6465.prod.exchangelabs.com>
Message-ID: <PU4P216MB1568BDE0E4929806E096CC11C8CB9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Jorgen,
                        regrets to reply this late....
I got into this issue because it threw an error, and it took more than 4 days to fix this. I  learnt a lot, and one things I learnt  is to debug the function, even when that is a public package function....instead of googling the error message...Any ideas on how to do this more efficiently?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Jorgen Harmse <JHarmse at roku.com>
Sent: Friday, January 20, 2023 11:35 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; r-help at r-project.org <r-help at r-project.org>; williamwdunlap at gmail.com <williamwdunlap at gmail.com>
Subject: Re: [EXTERNAL] Re: function doesn't exists but still runs..... (akshay kulkarni)


Hi Akshay,



Lexical scoping and environments are closely tied. (I think Bill even cited the documentation.) I guess it's arcane in the sense that scoping usually does what you expect, but the way that works is related to what we discussed.



What led you to discover the issue? Were you debugging the public package function because it didn't do what you expected, or were you just curious how it worked?



Regards,

Jorgen.





From: akshay kulkarni <akshay_e4 at hotmail.com>
Date: Friday, January 20, 2023 at 11:19
To: Jorgen Harmse <JHarmse at roku.com>, r-help at r-project.org <r-help at r-project.org>, williamwdunlap at gmail.com <williamwdunlap at gmail.com>
Subject: [EXTERNAL] Re: function doesn't exists but still runs..... (akshay kulkarni)

Dear Jorgen,

                     thanks for the reply.....so according to you one can pegion hole the problem as concerning R's lexical scoping rules,am I right? Or some arcane concept regarding environments....?



THanking you,

Yours sincerely,

AKSHAY M KULKARNI

________________________________

From: Jorgen Harmse <JHarmse at roku.com>
Sent: Friday, January 20, 2023 9:34 PM
To: r-help at r-project.org <r-help at r-project.org>; akshay_e4 at hotmail.com <akshay_e4 at hotmail.com>; williamwdunlap at gmail.com <williamwdunlap at gmail.com>
Subject: Re: function doesn't exists but still runs..... (akshay kulkarni)



It may help to expand a bit on Bill Dunlap's answer. I think that library does something like this:



Create a new environment for all the package objects. This environment will not be directly visible from .GlobalEnv, and ancestor environments may not be directly visible either. It may contain functions & other objects that are not exported, and it may use objects in ancestor environments that .GlobalEnv doesn't see directly. On the other hand, functions in the package will still see external functions in the way the package author intended instead of seeing functions with the same name that are visible to .GlobalEnv.



Run the source code in the private environment (using source(local=private environment, ....)?). Most package source code just defines functions, but the source code could build other objects that the package needs for some reason, or it could use delayedAssign to build the objects lazily. By default, the environment of any function defined by the source code is the private environment, so the function has access to private objects and to anything in ancestor environments.



Create a second new environment whose parent is parent.env(.GlobalEnv). For every export, assign the corresponding object from the private environment into the corresponding name in the public environment. Note that the environment of any function is still the private environment in which it was created. (I think that a function is mostly determined by its environment, its formals, and its body. A function call creates a new environment whose parent is the environment of the function. Thus whoever wrote the function can control the search for anything that isn?t passed in or created by the function itself.)



Reset parent.env(.GlobalEnv) to be the public environment. This makes all the exported objects (usually functions) available at the command line and allows the user to see everything that was available before (usually by name only, but by scope-resolved name if necessary). As noted by Bill Dunlap and in more detail above, package functions can use functions & other objects that are not directly visible to the user. As he also showed, you can (usually) pierce the privacy as long at least one function is exported. environment(package_function) is the private environment, so you can use it to see all the private objects and everything in the ancestor environments. You can repeat the trick to see private environments of packages you didn't directly pull in. I think you can even unlock bindings and do ghastly things to the package's private environment.



Regards,

Jorgen Harmse.

------------------------------

Message: 17
Date: Thu, 19 Jan 2023 16:02:31 -0800
From: Bill Dunlap <williamwdunlap at gmail.com>
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] function doesn't exists but still runs.....
Message-ID:
        <CAHqSRuTCBqh84FHg7=Xmd9qHxUiAN3Y4zBJbkAR3dRWhggu89Q at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Look into R's scoping rules.  E.g.,
https://bookdown.org/rdpeng/rprogdatascience/scoping-rules-of-r.html.

* When a function looks up a name, it looks it up in the environment in
which the function was defined.
* Functions in a package are generally defined in the package's environment
(although sometimes they are in a descendent of the parent's environment).
* When one searches an environment for a name, if it is not found in the
environment the search continues in the parent environment of that
environment, recursively until the parent environment is the empty
environment.

> with(environment(wdman::selenium), java_check)
function ()
{
    javapath <- Sys.which("java")
    if (identical(unname(javapath), "")) {
        stop("PATH to JAVA not found. Please check JAVA is installed.")
    }
    javapath
}
<bytecode: 0x000001fd0ab826a8>
<environment: namespace:wdman>

-Bill

On Thu, Jan 19, 2023 at 2:28 PM akshay kulkarni <akshay_e4 at hotmail.com>
wrote:

> dear members,
>                             I am using the RSelenium package which uses
> the function selenium() from the wdman package. The selenium function
> contains the function java_check at line 12. If I try to run it, it throws
> an error:
>
> >   javapath <- java_check()
> Error in java_check() : could not find function "java_check"
>
> Also:
>
> > exists("java_check")
> [1] FALSE
>
> But when I run selenium(), it works fine....
>
> How do you explain this conundrum? You can refer to this link:
> https://github.com/ropensci/wdman/issues/15
>
> Specifically what concept of R explains this weird behaviour?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]




------------------------------

Subject: Digest Footer

_______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


------------------------------

End of R-help Digest, Vol 239, Issue 20
***************************************

	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Jan 22 15:39:38 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 22 Jan 2023 14:39:38 +0000
Subject: [R] 
 function doesn't exists but still runs..... (akshay kulkarni)
In-Reply-To: <1ACFC3C6-8B81-4FCF-ADB1-98E8240B1B00@dcn.davis.ca.us>
References: <mailman.368738.1.1674212402.9424.r-help@r-project.org>
 <MW4PR01MB646566368BCB841E6D18626EDCC59@MW4PR01MB6465.prod.exchangelabs.com>
 <PU4P216MB156875424240A880C680B4CFC8C59@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <1ACFC3C6-8B81-4FCF-ADB1-98E8240B1B00@dcn.davis.ca.us>
Message-ID: <PU4P216MB156887FAC66D1A61178EE9A1C8CB9@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Jeff,
                  I am indeed guilty of a highly inadvertent diction...I have to welcome your exhortations....

Coming back to the point, I have read Avanced R by HAdley. But its all theory...and the present issue that I ran into is, possibly, a practical application of ALL that. For example, I never knew, and don't think that it is ever mentioned in Avanced R, that, as Bill advised, to use the function with() to get the source code of java_check()...(caveat: if it is mentioned in Advanced R, please let me know the chapter and page number so that I can have a look...). And to get on the path to solve these practical problems, my first choice is R Help Mailing list! Therefore, a hearty thanks for your pointed answer and more importantly, your exhortations....!

Thanking you,
Yours sincerely
AKSHAY M KULKARNI

________________________________
From: Jeff Newmiller <jdnewmil at dcn.davis.ca.us>
Sent: Friday, January 20, 2023 11:29 PM
To: r-help at r-project.org <r-help at r-project.org>; akshay kulkarni <akshay_e4 at hotmail.com>; Jorgen Harmse <JHarmse at roku.com>; r-help at r-project.org <r-help at r-project.org>; williamwdunlap at gmail.com <williamwdunlap at gmail.com>
Subject: Re: [R] function doesn't exists but still runs..... (akshay kulkarni)

This is not a "problem" ... it is a "feature". Packages often use functions from other packages, but that does NOT mean that you as a user can automatically use those functions  also.

If Package A uses Package B to implement something, but Package B becomes unavailable, the maintainer of Package A would like to fill in the gap. If Package A "Depends" on Package B then users of package A automatically get access to Package B and they get used to treating Package A like it contains all of the functions in Package B directly.

Therefore it is common to have Package A "Import" Package B so that the Package A maintainer won't have to re-implement all of Package B to avoid breaking code for users of Package A. They can fix things under the hood for their own Package A functions using other code.

If a user wants to depend on Package B, it is up to them to use the library function to do so explicitly... and when Package B goes away, they are responsible for dealing with that mess themselves.

You asked "how", and got answers... but you didn't bother to follow up on those answers by reading things like "Writing R Extensions" or Hadley Wickham's "R Packages" or "Advanced R". Don't turn that laziness into a value judgement about "problems" with R.

On January 20, 2023 9:18:54 AM PST, akshay kulkarni <akshay_e4 at hotmail.com> wrote:
>Dear Jorgen,
>                     thanks for the reply.....so according to you one can pegion hole the problem as concerning R's lexical scoping rules,am I right? Or some arcane concept regarding environments....?
>
>THanking you,
>Yours sincerely,
>AKSHAY M KULKARNI
>________________________________
>From: Jorgen Harmse <JHarmse at roku.com>
>Sent: Friday, January 20, 2023 9:34 PM
>To: r-help at r-project.org <r-help at r-project.org>; akshay_e4 at hotmail.com <akshay_e4 at hotmail.com>; williamwdunlap at gmail.com <williamwdunlap at gmail.com>
>Subject: Re: function doesn't exists but still runs..... (akshay kulkarni)
>
>
>It may help to expand a bit on Bill Dunlap's answer. I think that library does something like this:
>
>
>
>Create a new environment for all the package objects. This environment will not be directly visible from .GlobalEnv, and ancestor environments may not be directly visible either. It may contain functions & other objects that are not exported, and it may use objects in ancestor environments that .GlobalEnv doesn't see directly. On the other hand, functions in the package will still see external functions in the way the package author intended instead of seeing functions with the same name that are visible to .GlobalEnv.
>
>
>
>Run the source code in the private environment (using source(local=private environment, ....)?). Most package source code just defines functions, but the source code could build other objects that the package needs for some reason, or it could use delayedAssign to build the objects lazily. By default, the environment of any function defined by the source code is the private environment, so the function has access to private objects and to anything in ancestor environments.
>
>
>
>Create a second new environment whose parent is parent.env(.GlobalEnv). For every export, assign the corresponding object from the private environment into the corresponding name in the public environment. Note that the environment of any function is still the private environment in which it was created. (I think that a function is mostly determined by its environment, its formals, and its body. A function call creates a new environment whose parent is the environment of the function. Thus whoever wrote the function can control the search for anything that isn?t passed in or created by the function itself.)
>
>
>
>Reset parent.env(.GlobalEnv) to be the public environment. This makes all the exported objects (usually functions) available at the command line and allows the user to see everything that was available before (usually by name only, but by scope-resolved name if necessary). As noted by Bill Dunlap and in more detail above, package functions can use functions & other objects that are not directly visible to the user. As he also showed, you can (usually) pierce the privacy as long at least one function is exported. environment(package_function) is the private environment, so you can use it to see all the private objects and everything in the ancestor environments. You can repeat the trick to see private environments of packages you didn't directly pull in. I think you can even unlock bindings and do ghastly things to the package's private environment.
>
>
>
>Regards,
>
>Jorgen Harmse.
>
>------------------------------
>
>Message: 17
>Date: Thu, 19 Jan 2023 16:02:31 -0800
>From: Bill Dunlap <williamwdunlap at gmail.com>
>To: akshay kulkarni <akshay_e4 at hotmail.com>
>Cc: R help Mailing list <r-help at r-project.org>
>Subject: Re: [R] function doesn't exists but still runs.....
>Message-ID:
>        <CAHqSRuTCBqh84FHg7=Xmd9qHxUiAN3Y4zBJbkAR3dRWhggu89Q at mail.gmail.com>
>Content-Type: text/plain; charset="utf-8"
>
>Look into R's scoping rules.  E.g.,
>https://bookdown.org/rdpeng/rprogdatascience/scoping-rules-of-r.html.
>
>* When a function looks up a name, it looks it up in the environment in
>which the function was defined.
>* Functions in a package are generally defined in the package's environment
>(although sometimes they are in a descendent of the parent's environment).
>* When one searches an environment for a name, if it is not found in the
>environment the search continues in the parent environment of that
>environment, recursively until the parent environment is the empty
>environment.
>
>> with(environment(wdman::selenium), java_check)
>function ()
>{
>    javapath <- Sys.which("java")
>    if (identical(unname(javapath), "")) {
>        stop("PATH to JAVA not found. Please check JAVA is installed.")
>    }
>    javapath
>}
><bytecode: 0x000001fd0ab826a8>
><environment: namespace:wdman>
>
>-Bill
>
>On Thu, Jan 19, 2023 at 2:28 PM akshay kulkarni <akshay_e4 at hotmail.com>
>wrote:
>
>> dear members,
>>                             I am using the RSelenium package which uses
>> the function selenium() from the wdman package. The selenium function
>> contains the function java_check at line 12. If I try to run it, it throws
>> an error:
>>
>> >   javapath <- java_check()
>> Error in java_check() : could not find function "java_check"
>>
>> Also:
>>
>> > exists("java_check")
>> [1] FALSE
>>
>> But when I run selenium(), it works fine....
>>
>> How do you explain this conundrum? You can refer to this link:
>> https://github.com/ropensci/wdman/issues/15
>>
>> Specifically what concept of R explains this weird behaviour?
>>
>> Thanking you,
>> Yours sincerely,
>> AKSHAY M KULKARNI
>>
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>        [[alternative HTML version deleted]]
>
>
>
>
>------------------------------
>
>Subject: Digest Footer
>
>_______________________________________________
>R-help at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.
>
>
>------------------------------
>
>End of R-help Digest, Vol 239, Issue 20
>***************************************
>
>       [[alternative HTML version deleted]]
>

--
Sent from my phone. Please excuse my brevity.

	[[alternative HTML version deleted]]


From n@re@h_gurbux@n| @end|ng |rom hotm@||@com  Sun Jan 22 18:09:57 2023
From: n@re@h_gurbux@n| @end|ng |rom hotm@||@com (Naresh Gurbuxani)
Date: Sun, 22 Jan 2023 17:09:57 +0000
Subject: [R] Info files in Windows and Mac distributions
Message-ID: <IA1P223MB0499FFD767FBFB80C54426BEFACB9@IA1P223MB0499.NAMP223.PROD.OUTLOOK.COM>

Recently I installed Linux on my desktop.  I discovered that R for Linux ships with info files of manuals.  R for Windows and Mac only ship with html and pdf files of manuals.

Why not include info files in R distributions for Windows and Mac?  These are very convenient with emacs.  Using pandoc , I tried converting from html to info.  The results were nowhere near as good as the originals.

Naresh

Sent from my iPhone

From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Sun Jan 22 18:43:36 2023
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Sun, 22 Jan 2023 23:13:36 +0530
Subject: [R] 
 lattice xyplot: trouble about the use of yscale.components to
 start the yscale from zero
In-Reply-To: <d7938db4-5d8d-0268-1fbd-419cd57ff1a2@free.fr>
References: <d7938db4-5d8d-0268-1fbd-419cd57ff1a2@free.fr>
Message-ID: <CADfFDC5kQd6=pX_DiNXGWg3kjhUeunCQvnFRGWbVOuwfvG1NYw@mail.gmail.com>

On Sun, Jan 22, 2023 at 6:48 PM Laurent Rhelp <LaurentRHelp at free.fr> wrote:

> Dear RHelp-list,
>
>   I want to choice my scale for every panel in a lattice graph according to
>   the ylim range of every panel, with 10 ticks and with a start from 0.
> Also I want to plot a grid
>    according to the y ticks (I did that in the panel argument with the
> panel.abline function) .
>   So I decided to use the yscale.components argument and I write the
> script below.
>   Before using the pretty function I introduce the 0 value in my range but
> it does not work : the labels are not displayed and the panel.abline do
> nothing. I am not able to understand why.
>    If I comment the line ylim <- c(0,max(lim)) the labels appear but of
> course they do not start from 0.
>

You have mistyped

  ans$left$ticks$at <- tick.at

as

  ans$left$tick$at <- tick.at

You might think that partial matching will help you, but partial matching
doesn't work for assignment (for obvious reasons). Consider

> foo <- list(ticks = list(at = 1:10))
> foo$tick$at <- "bar"
> str(foo)
List of 2
 $ ticks:List of 1
  ..$ at: int [1:10] 1 2 3 4 5 6 7 8 9 10
 $ tick :List of 1
  ..$ at: chr "bar"

I don't know if there is a good argument for this assignment to work at all
(other than that NULL and an empty list are conceptually equivalent), but
it is what it is.

This is why I tend to set options(warnPartialMatchDollar = TRUE). In this
case it would give you an inaccurate warning, but at least it will give you
a warning.

As for the range of the scales, these are determined by 'ylim' and
'prepanel', so you would need to specify one of these.

As you are using scales$axs = "i", you can simply provide ylim = c(0, NA),
which forces the lower limit to 0, and lets the upper limit be decided as
usual.

For finer control, you can specify a prepanel function, e.g.,

prepanel = function(x, y, ...) list(ylim = c(0, max(y)))

Hope this helps,

Best,
-Deepayan


>
> Thank you for your help.
>
> Laurent
>
>
>
>   --------------------------o<----------------------------------------------->o-----------------------------------------
> library(lattice)
> library(zoo)
> ##
> ## Rq : mydata is a zoo object
> ##
> mydata <- structure(c(0.190991684047867, 0.186639474048368,
> 0.188562286982088,
>              0.187781290093149, 0.188242724296645, 0.190412570465429,
> 0.188922969182772,
>              0.194037520889193, 0.191973884842229, 0.197032138922638,
> 1.03204611806177,
>              1.02831610106898, 1.0280323738983, 1.03595907392095,
> 1.03316162925952,
>              1.04755124287765, 1.04403986225312, 1.05686325668364,
> 1.04672225664295,
>              1.05462971668107), dim = c(10L, 2L), dimnames = list(c("f1",
>           "f1", "f1", "f1", "f1", "f1", "f1", "f1", "f1", "f1"),
> c("col1","col2"))
>           , index = c(1.27904891967773, 1.27909898757935, 1.27915000915527
>        , 1.27920007705688, 1.2792489528656, 1.27929902076721,
> 1.27935004234314
>        ,1.27939891815186, 1.27944993972778, 1.27950000762939), class =
> "zoo")
>
> options(digits=17)
>
> yscale.components.n.ticks <- function(lim,...){
>
>    ans <- yscale.components.default(lim = lim,...)
>    ylim <- lim
>    ## I want to start from 0
>    ylim <- c(0,max(lim))
>    tick.at <- pretty(ylim, n=10, min.n = 9)
>     cat("lim yscale : ",ylim,"\n")
>
>    mylabels_y <- formatC(   tick.at
>                           , format = "f"
>                           , digits=3
>                           , width=9
>                           ,flag=" ")
>
>    print(cbind( mylabels_y = mylabels_y, tick.at_y = tick.at))
>
>    ans$left$tick$at <- tick.at
>    ans$left$labels$at <- tick.at
>    ans$left$labels$labels <- mylabels_y
>    ans
> }
>
>
> xscale.components.n.ticks <- function(lim, ... ){
>
>    ans <- xscale.components.default(lim = lim,...)
>    tick.at <- pretty(lim,20,9)
>    mylabels_x <- formatC(   tick.at
>                           , format = "f"
>                           , digits=6
>                           , width=9
>                           , flag=" ")
>
>    print(cbind( mylabels_x = mylabels_x, tick.at_x = tick.at))
>
>    ans$bottom$tick$at <- tick.at
>    ans$bottom$labels$at <- tick.at
>    ans$bottom$labels$labels <- mylabels_x
>    ans
> }
>
> # to see the x values
> time(mydata)
>
> gr <- xyplot(  mydata
>                 , main = "title"
>                 , layout = c(1,2)
>                 , pch = 20
>                 , panel = function(...) {
>
>                   ylim <- current.panel.limits()$ylim
>                   xlim <- current.panel.limits()$xlim
>
>                   ## I create here the same ticks that those created
>                   ##  in xscale.components and yscale.components
>                  ylim <- c(0,max(ylim))
>                  cat("ylim panel : ",ylim,"\n")
>                  y.tick.at <- pretty(ylim,10,9)
>                  print(cbind(y.tick.at.panel= y.tick.at))
>
>                   x.tick.at <- pretty(xlim,20,9)
>
>                  panel.abline( h = y.tick.at, v = x.tick.at, col =
> "lightgrey")
>
>                   panel.xyplot(...)
>                 }
> ##               , ylim = c(0,1.5)
>                 , scales = list(
>                   y= list(   relation = "free"
>                            , axs="i"
>                            , rot = 45
>                            ),
>                   x = list(
>                               axs="i"
>                             , rot = 90
>                            )
>                 )
>                 , yscale.components = yscale.components.n.ticks
>                 , xscale.components = xscale.components.n.ticks
>
> )
>
> print(gr)
>
> --
> Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
> www.avast.com
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |eo@m@d@ @end|ng |rom @yon|c@eu  Mon Jan 23 01:24:58 2023
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leonard Mada)
Date: Mon, 23 Jan 2023 02:24:58 +0200
Subject: [R] R emulation of FindRoot in Mathematica
In-Reply-To: <f52da468-5e5a-45c6-d7ca-c0d849e51033@syonic.eu>
References: <f52da468-5e5a-45c6-d7ca-c0d849e51033@syonic.eu>
Message-ID: <8ec44b74-2cd0-28bf-e2e1-e3464dce6660@syonic.eu>

Dear Troels,

I send you an updated version of the response. I think that a hybrid 
approach is probably the best solution:
- Input / Starting values = free: ATP, ADP, Crea, CreaP, lactate, 
inorganic phosphate;
- Output: diff(Total, given total value);
- I assume that the pH is given;
- I did NOT check all individual eqs;

library(rootSolve)

solve.AcidSpecies = function(x, H, Mg=0.0006, K = 0.12) {
 ??? # ... the eqs: ...;
 ??? ATPTotal = KaATPH * ATP * H + KaATPH2 * KaATPH * ATP * H^2 +
 ??? + KaATPH3 * KaATPH2 * KaATPH * ATP * H^3 + KdATPMg * ATP * Mg +
 ??? + KdATPHMg * ATP * H * Mg + KdATPMg2 * ATP * Mg^2 + KdATPK * ATP * K;
 ??? ### Output:
 ??? total = c(
 ??? ??? ATPTotal - 0.008,
 ??? ??? ADPTotal - 1E-5,
 ??? ??? CreaTotal - 0.004,
 ??? ??? CreaPTotal - 0.042,
 ??? ??? PiTotal - 0.003,
 ??? ??? LactateTotal - 0.005);
 ??? return(total);
}

KaATPH = 10^6.494; # ...
x0 = c(ATP = 0.008, ADP = 1E-5,
 ??? Crea = 0.004, CreaP = 0.042, Pi = 0.003, Lactate = 0.005) / 2;
x = multiroot(solve.AcidSpecies, x0, H = 4E-8);


print(x)


I think that it is possible to use the eqs directly as provided 
initially (with some minor corrections). You only need to output the 
known totals (as a diff), see full code below.


Sincerely,


Leonard



library(rootSolve)

solve.AcidSpecies = function(x, H, Mg=0.0006, k = 0.12) {
 ?? ?# with(list(x), { seems NOT to work with multiroot });
 ?? ?atp = x[1]; adp = x[2]; pi = x[3];
 ?? ?pcr = x[4]; cr = x[5]; lactate = x[6];

###
hatp <- 10^6.494*H*atp
hhatp <- 10^3.944*H*hatp
hhhatp <- 10^1.9*H*hhatp
hhhhatp? <- 10*H*hhhatp
mgatp <- 10^4.363*atp*Mg
mghatp <- 10^2.299*hatp*Mg
mg2atp <- 10^1-7*Mg*mgatp
katp <- 10^0.959*atp*k

hadp <- 10^6.349*adp*H
hhadp <- 10^3.819*hadp*H
hhhadp <- 10*H*hhadp
mgadp <- 10^3.294*Mg*adp
mghadp <- 10^1.61*Mg*hadp
mg2adp <- 10*Mg*mgadp
kadp <- 10^0.82*k*adp

hpi <- 10^11.616*H*pi
hhpi <- 10^6.7*H*hpi
hhhpi <- 10^1.962*H*hhpi
mgpi <- 10^3.4*Mg*pi
mghpi <- 10^1.946*Mg*hpi
mghhpi <- 10^1.19*Mg*hhpi
kpi <- 10^0.6*k*pi
khpi <- 10^1.218*k*hpi
khhpi <- 10^-0.2*k*hhpi

hpcr <- 10^14.3*H*pcr
hhpcr <- 10^4.5*H*hpcr
hhhpcr <- 10^2.7*H*hhpcr
hhhhpcr <- 100*H*hhhpcr
mghpcr <- 10^1.6*Mg*hpcr
kpcr <- 10^0.74*k*pcr
khpcr <- 10^0.31*k*hpcr
khhpcr <- 10^-0.13*k*hhpcr

hcr <- 10^14.3*H*cr
hhcr <- 10^2.512*H*hcr

hlactate <- 10^3.66*H*lactate
mglactate <- 10^0.93*Mg*lactate

tatp <- atp + hatp + hhatp + hhhatp + mgatp + mghatp + mg2atp + katp
tadp <- adp + hadp + hhadp + hhhadp + mghadp + mgadp + mg2adp + kadp
tpi? <- pi + hpi + hhpi + hhhpi + mgpi + mghpi + mghhpi + kpi + khpi + khhpi
tpcr <- pcr + hpcr + hhpcr + hhhpcr + hhhhpcr + mghpcr + kpcr + khpcr + 
khhpcr
tcr? <- cr + hcr + hhcr
tlactate <- lactate + hlactate + mglactate
# tmg <- Mg + mgatp + mghatp + mg2atp + mgadp + mghadp + mg2adp + mgpi +
#??? kghpi + mghhpi + mghpcr + mglactate
# tk <- k + katp + kadp + kpi + khpi + khhpi + kpcr + khpcr + khhpcr


total = c(
 ?? ?tatp - 0.008,
 ?? ?tadp - 0.00001,
 ?? ?tpi - 0.003,
 ?? ?tpcr - 0.042,
 ?? ?tcr - 0.004,
 ?? ?tlactate - 0.005)
return(total);
# })
}

# conditions

x0 = c(
 ?? ?atp = 0.008,
 ?? ?adp = 0.00001,
 ?? ?pi = 0.003,
 ?? ?pcr = 0.042,
 ?? ?cr = 0.004,
 ?? ?lactate = 0.005
) / 3;
# tricky to get a positive value !!!
x0[1] = 0.001; # still NOT positive;

x = multiroot(solve.AcidSpecies, x0, H = 4E-8)


On 1/23/2023 12:37 AM, Leonard Mada wrote:
> Dear Troels,
>
> The system that you mentioned needs to be transformed first. The 
> equations are standard acid-base equilibria-type equations in analytic 
> chemistry.
>
> ATP + H <-> ATPH
> ATPH + H <-> ATPH2
> ATPH2 + H <-> ATPH3
> [...]
> The total amount of [ATP] is provided, while the concentration of the 
> intermediates are unknown.
>
> Q.) It was unclear from your description:
> Do you know the pH?
> Or is the pH also unknown?
>
> I believe that the system is exactly solvable. The "multivariable" 
> system/solution may be easier to write down: but is uglier to solve, 
> as the "system" is under-determined. You can use optim in such cases, 
> see eg. an example were I use it:
> https://github.com/discoleo/R/blob/master/Stat/Polygons.Examples.R
>
>
> a2 = optim(c(0.9, 0.5), polygonOptim, d=x)
> # where the function polygonOptim() computes the distance between the 
> starting-point & ending point of the polygon;
> # (the polygon is defined only by the side lengths and optim() tries 
> to compute the angles);
> # optimal distance = 0, when the polygon is closed;
> # Note: it is possible to use more than 2 starting values in the 
> example above (the version with optim) works quit well;
> # - but you need to "design" the function that is optimized for your 
> particular system, e.g.
> #?? by returning: c((ATPTotal - value)^2, (ADPTotal - value)^2, ...);
>
>
> S.1.) Exact Solution
> ATP system: You can express all components as eqs of free ATP, [ATP], 
> and [H], [Mg], [K].
> ATPH = KaATPH * ATP * H;
> ATPH2 = KaATPH2 * ATPH * H
> = KaATPH2 * KaATPH * ATP * H^2;
> [...]
>
> Then you substitute these into the total-eqs. It is a bit uglier, as 
> you have 5 coupled systems: ATP, ADP, Creatinine, CreaP and Lactate. 
> This is why I thought that it may be easier to do it, at least 
> partially/hybrid, in a "multivariate" way.
>
> # Total ATP:
> ATPTotal = KaATPH * ATP * H + KaATPH2 * KaATPH * ATP * H^2 +
> ??? + KaATPH3 * KaATPH2 * KaATPH * ATP * H^3 + ...;
>
> Note:
> - the system above is solvable, if the pH is known; it may be 
> undetermined if the pH is NOT known (but I am not very certain: easier 
> to spot only when all the eqs are written down nicely);
> - the eqs for total K & total Mg: are not useful to solve the system, 
> as there are NO constraints on the total values; they will yield only 
> some numerical values (which may be interesting for the analysis);
> - total K & total Mg can be computed after solving the system;
>
> Please let me know if you need further assistance.
>
> Sincerely,
>
> Leonard
>
>
	[[alternative HTML version deleted]]


From |eo@m@d@ @end|ng |rom @yon|c@eu  Mon Jan 23 01:37:36 2023
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leonard Mada)
Date: Mon, 23 Jan 2023 02:37:36 +0200
Subject: [R] R emulation of FindRoot in Mathematica
In-Reply-To: <8ec44b74-2cd0-28bf-e2e1-e3464dce6660@syonic.eu>
References: <f52da468-5e5a-45c6-d7ca-c0d849e51033@syonic.eu>
 <8ec44b74-2cd0-28bf-e2e1-e3464dce6660@syonic.eu>
Message-ID: <ced27184-84f3-cc35-38a4-3ae174e87833@syonic.eu>

Dear Troels,


There might be an error in one of the eqs:

# [modified] TODO: check;
mg2atp <- 10^(-7)*Mg*mgatp;

This version works:
x0 = c(
 ?? ?atp = 0.008,
 ?? ?adp = 0.00001,
 ?? ?pi = 0.003,
 ?? ?pcr = 0.042,
 ?? ?cr = 0.004,
 ?? ?lactate = 0.005
) / 30;
# solved the positive value
x0[1] = 1E-6;

x = multiroot(solve.AcidSpecies, x0, H = 4E-8)
print(x)

# Results:
#???????? atp????????? adp?????????? pi????????? pcr cr????? lactate
# 4.977576e-04 3.254998e-06 5.581774e-08 4.142785e-09 5.011807e-10 
4.973691e-03


Sincerely,


Leonard


On 1/23/2023 2:24 AM, Leonard Mada wrote:
> Dear Troels,
>
> I send you an updated version of the response. I think that a hybrid 
> approach is probably the best solution:
> - Input / Starting values = free: ATP, ADP, Crea, CreaP, lactate, 
> inorganic phosphate;
> - Output: diff(Total, given total value);
> - I assume that the pH is given;
> - I did NOT check all individual eqs;
>
> library(rootSolve)
>
> solve.AcidSpecies = function(x, H, Mg=0.0006, K = 0.12) {
> ??? # ... the eqs: ...;
> ??? ATPTotal = KaATPH * ATP * H + KaATPH2 * KaATPH * ATP * H^2 +
> ??? + KaATPH3 * KaATPH2 * KaATPH * ATP * H^3 + KdATPMg * ATP * Mg +
> ??? + KdATPHMg * ATP * H * Mg + KdATPMg2 * ATP * Mg^2 + KdATPK * ATP * K;
> ??? ### Output:
> ??? total = c(
> ??? ??? ATPTotal - 0.008,
> ??? ??? ADPTotal - 1E-5,
> ??? ??? CreaTotal - 0.004,
> ??? ??? CreaPTotal - 0.042,
> ??? ??? PiTotal - 0.003,
> ??? ??? LactateTotal - 0.005);
> ??? return(total);
> }
>
> KaATPH = 10^6.494; # ...
> x0 = c(ATP = 0.008, ADP = 1E-5,
> ??? Crea = 0.004, CreaP = 0.042, Pi = 0.003, Lactate = 0.005) / 2;
> x = multiroot(solve.AcidSpecies, x0, H = 4E-8);
>
>
> print(x)
>
>
> I think that it is possible to use the eqs directly as provided 
> initially (with some minor corrections). You only need to output the 
> known totals (as a diff), see full code below.
>
>
> Sincerely,
>
>
> Leonard
>
>
>
> library(rootSolve)
>
> solve.AcidSpecies = function(x, H, Mg=0.0006, k = 0.12) {
> ?? ?# with(list(x), { seems NOT to work with multiroot });
> ?? ?atp = x[1]; adp = x[2]; pi = x[3];
> ?? ?pcr = x[4]; cr = x[5]; lactate = x[6];
>
> ###
> hatp <- 10^6.494*H*atp
> hhatp <- 10^3.944*H*hatp
> hhhatp <- 10^1.9*H*hhatp
> hhhhatp? <- 10*H*hhhatp
> mgatp <- 10^4.363*atp*Mg
> mghatp <- 10^2.299*hatp*Mg
> mg2atp <- 10^1-7*Mg*mgatp
> katp <- 10^0.959*atp*k
>
> hadp <- 10^6.349*adp*H
> hhadp <- 10^3.819*hadp*H
> hhhadp <- 10*H*hhadp
> mgadp <- 10^3.294*Mg*adp
> mghadp <- 10^1.61*Mg*hadp
> mg2adp <- 10*Mg*mgadp
> kadp <- 10^0.82*k*adp
>
> hpi <- 10^11.616*H*pi
> hhpi <- 10^6.7*H*hpi
> hhhpi <- 10^1.962*H*hhpi
> mgpi <- 10^3.4*Mg*pi
> mghpi <- 10^1.946*Mg*hpi
> mghhpi <- 10^1.19*Mg*hhpi
> kpi <- 10^0.6*k*pi
> khpi <- 10^1.218*k*hpi
> khhpi <- 10^-0.2*k*hhpi
>
> hpcr <- 10^14.3*H*pcr
> hhpcr <- 10^4.5*H*hpcr
> hhhpcr <- 10^2.7*H*hhpcr
> hhhhpcr <- 100*H*hhhpcr
> mghpcr <- 10^1.6*Mg*hpcr
> kpcr <- 10^0.74*k*pcr
> khpcr <- 10^0.31*k*hpcr
> khhpcr <- 10^-0.13*k*hhpcr
>
> hcr <- 10^14.3*H*cr
> hhcr <- 10^2.512*H*hcr
>
> hlactate <- 10^3.66*H*lactate
> mglactate <- 10^0.93*Mg*lactate
>
> tatp <- atp + hatp + hhatp + hhhatp + mgatp + mghatp + mg2atp + katp
> tadp <- adp + hadp + hhadp + hhhadp + mghadp + mgadp + mg2adp + kadp
> tpi? <- pi + hpi + hhpi + hhhpi + mgpi + mghpi + mghhpi + kpi + khpi + 
> khhpi
> tpcr <- pcr + hpcr + hhpcr + hhhpcr + hhhhpcr + mghpcr + kpcr + khpcr 
> + khhpcr
> tcr? <- cr + hcr + hhcr
> tlactate <- lactate + hlactate + mglactate
> # tmg <- Mg + mgatp + mghatp + mg2atp + mgadp + mghadp + mg2adp + mgpi +
> #??? kghpi + mghhpi + mghpcr + mglactate
> # tk <- k + katp + kadp + kpi + khpi + khhpi + kpcr + khpcr + khhpcr
>
>
> total = c(
> ?? ?tatp - 0.008,
> ?? ?tadp - 0.00001,
> ?? ?tpi - 0.003,
> ?? ?tpcr - 0.042,
> ?? ?tcr - 0.004,
> ?? ?tlactate - 0.005)
> return(total);
> # })
> }
>
> # conditions
>
> x0 = c(
> ?? ?atp = 0.008,
> ?? ?adp = 0.00001,
> ?? ?pi = 0.003,
> ?? ?pcr = 0.042,
> ?? ?cr = 0.004,
> ?? ?lactate = 0.005
> ) / 3;
> # tricky to get a positive value !!!
> x0[1] = 0.001; # still NOT positive;
>
> x = multiroot(solve.AcidSpecies, x0, H = 4E-8)
>
>
> On 1/23/2023 12:37 AM, Leonard Mada wrote:
>> Dear Troels,
>>
>> The system that you mentioned needs to be transformed first. The 
>> equations are standard acid-base equilibria-type equations in 
>> analytic chemistry.
>>
>> ATP + H <-> ATPH
>> ATPH + H <-> ATPH2
>> ATPH2 + H <-> ATPH3
>> [...]
>> The total amount of [ATP] is provided, while the concentration of the 
>> intermediates are unknown.
>>
>> Q.) It was unclear from your description:
>> Do you know the pH?
>> Or is the pH also unknown?
>>
>> I believe that the system is exactly solvable. The "multivariable" 
>> system/solution may be easier to write down: but is uglier to solve, 
>> as the "system" is under-determined. You can use optim in such cases, 
>> see eg. an example were I use it:
>> https://github.com/discoleo/R/blob/master/Stat/Polygons.Examples.R
>>
>>
>> a2 = optim(c(0.9, 0.5), polygonOptim, d=x)
>> # where the function polygonOptim() computes the distance between the 
>> starting-point & ending point of the polygon;
>> # (the polygon is defined only by the side lengths and optim() tries 
>> to compute the angles);
>> # optimal distance = 0, when the polygon is closed;
>> # Note: it is possible to use more than 2 starting values in the 
>> example above (the version with optim) works quit well;
>> # - but you need to "design" the function that is optimized for your 
>> particular system, e.g.
>> #?? by returning: c((ATPTotal - value)^2, (ADPTotal - value)^2, ...);
>>
>>
>> S.1.) Exact Solution
>> ATP system: You can express all components as eqs of free ATP, [ATP], 
>> and [H], [Mg], [K].
>> ATPH = KaATPH * ATP * H;
>> ATPH2 = KaATPH2 * ATPH * H
>> = KaATPH2 * KaATPH * ATP * H^2;
>> [...]
>>
>> Then you substitute these into the total-eqs. It is a bit uglier, as 
>> you have 5 coupled systems: ATP, ADP, Creatinine, CreaP and Lactate. 
>> This is why I thought that it may be easier to do it, at least 
>> partially/hybrid, in a "multivariate" way.
>>
>> # Total ATP:
>> ATPTotal = KaATPH * ATP * H + KaATPH2 * KaATPH * ATP * H^2 +
>> ??? + KaATPH3 * KaATPH2 * KaATPH * ATP * H^3 + ...;
>>
>> Note:
>> - the system above is solvable, if the pH is known; it may be 
>> undetermined if the pH is NOT known (but I am not very certain: 
>> easier to spot only when all the eqs are written down nicely);
>> - the eqs for total K & total Mg: are not useful to solve the system, 
>> as there are NO constraints on the total values; they will yield only 
>> some numerical values (which may be interesting for the analysis);
>> - total K & total Mg can be computed after solving the system;
>>
>> Please let me know if you need further assistance.
>>
>> Sincerely,
>>
>> Leonard
>>
>>
	[[alternative HTML version deleted]]


From tr|ng @end|ng |rom gvdnet@dk  Mon Jan 23 09:04:02 2023
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Mon, 23 Jan 2023 09:04:02 +0100
Subject: [R] R emulation of FindRoot in Mathematica
In-Reply-To: <8ec44b74-2cd0-28bf-e2e1-e3464dce6660@syonic.eu>
References: <f52da468-5e5a-45c6-d7ca-c0d849e51033@syonic.eu>
 <8ec44b74-2cd0-28bf-e2e1-e3464dce6660@syonic.eu>
Message-ID: <9c893774-7ae1-72db-c6a5-6e19c8139e92@gvdnet.dk>

Dear Leonard - thanks a lot for the solution! Yes, you are right: pH is 
presumed known, so the effort is repeated at a series of chosen pH 
values.? It appears that no matter x0 the estimate for atp is always 
-6.239560e-01 which even accounting for offset of 0.008 is negative 
which is not possible and the estimate of the other species also appear 
to be constant no matter x0? The algorithm needs only 2 or 3 iterations 
and doesn't complain. I have been through the equations and they appear 
correct. Wonder what I did wrong?

Below some output

Best wishes
Troels

x0 = c(
 ? atp = 0.008,
 ? adp = 0.00001,
 ? pi = 0.003,
 ? pcr = 0.042,
 ? cr = 0.004,
 ? lactate = 0.005
) / 3;
# tricky to get a positive value !!!
 ?x0[1] = 0.001; # still NOT positive;

x = multiroot(solve.AcidSpecies, x0, H = 4E-8)
x
# $root
# atp?????????? adp??????????? pi?????????? pcr cr?????? lactate
# -6.239560e-01? 3.254998e-06? 5.581774e-08? 4.142785e-09 5.011807e-10? 
4.973691e-03

x0 <- 1000*x0
x = multiroot(solve.AcidSpecies, x0, H = 4E-8)
x
# $root
# atp?????????? adp??????????? pi?????????? pcr cr?????? lactate
# -6.239560e-01? 3.254998e-06? 5.581774e-08? 4.142785e-09 5.011807e-10? 
4.973691e-03

x0 <- x0*1e-6
x = multiroot(solve.AcidSpecies, x0, H = 4E-8)
x
# $root
# atp?????????? adp??????????? pi?????????? pcr cr?????? lactate
# -6.239560e-01? 3.254998e-06? 5.581774e-08? 4.142785e-09 5.011807e-10? 
4.973691e-03


Den 23-01-2023 kl. 01:24 skrev Leonard Mada:
> Dear Troels,
>
> I send you an updated version of the response. I think that a hybrid 
> approach is probably the best solution:
> - Input / Starting values = free: ATP, ADP, Crea, CreaP, lactate, 
> inorganic phosphate;
> - Output: diff(Total, given total value);
> - I assume that the pH is given;
> - I did NOT check all individual eqs;
>
> library(rootSolve)
>
> solve.AcidSpecies = function(x, H, Mg=0.0006, K = 0.12) {
> ??? # ... the eqs: ...;
> ??? ATPTotal = KaATPH * ATP * H + KaATPH2 * KaATPH * ATP * H^2 +
> ??? + KaATPH3 * KaATPH2 * KaATPH * ATP * H^3 + KdATPMg * ATP * Mg +
> ??? + KdATPHMg * ATP * H * Mg + KdATPMg2 * ATP * Mg^2 + KdATPK * ATP * K;
> ??? ### Output:
> ??? total = c(
> ??? ??? ATPTotal - 0.008,
> ??? ??? ADPTotal - 1E-5,
> ??? ??? CreaTotal - 0.004,
> ??? ??? CreaPTotal - 0.042,
> ??? ??? PiTotal - 0.003,
> ??? ??? LactateTotal - 0.005);
> ??? return(total);
> }
>
> KaATPH = 10^6.494; # ...
> x0 = c(ATP = 0.008, ADP = 1E-5,
> ??? Crea = 0.004, CreaP = 0.042, Pi = 0.003, Lactate = 0.005) / 2;
> x = multiroot(solve.AcidSpecies, x0, H = 4E-8);
>
>
> print(x)
>
>
> I think that it is possible to use the eqs directly as provided 
> initially (with some minor corrections). You only need to output the 
> known totals (as a diff), see full code below.
>
>
> Sincerely,
>
>
> Leonard
>
>
>
> library(rootSolve)
>
> solve.AcidSpecies = function(x, H, Mg=0.0006, k = 0.12) {
> ?? ?# with(list(x), { seems NOT to work with multiroot });
> ?? ?atp = x[1]; adp = x[2]; pi = x[3];
> ?? ?pcr = x[4]; cr = x[5]; lactate = x[6];
>
> ###
> hatp <- 10^6.494*H*atp
> hhatp <- 10^3.944*H*hatp
> hhhatp <- 10^1.9*H*hhatp
> hhhhatp? <- 10*H*hhhatp
> mgatp <- 10^4.363*atp*Mg
> mghatp <- 10^2.299*hatp*Mg
> mg2atp <- 10^1-7*Mg*mgatp
> katp <- 10^0.959*atp*k
>
> hadp <- 10^6.349*adp*H
> hhadp <- 10^3.819*hadp*H
> hhhadp <- 10*H*hhadp
> mgadp <- 10^3.294*Mg*adp
> mghadp <- 10^1.61*Mg*hadp
> mg2adp <- 10*Mg*mgadp
> kadp <- 10^0.82*k*adp
>
> hpi <- 10^11.616*H*pi
> hhpi <- 10^6.7*H*hpi
> hhhpi <- 10^1.962*H*hhpi
> mgpi <- 10^3.4*Mg*pi
> mghpi <- 10^1.946*Mg*hpi
> mghhpi <- 10^1.19*Mg*hhpi
> kpi <- 10^0.6*k*pi
> khpi <- 10^1.218*k*hpi
> khhpi <- 10^-0.2*k*hhpi
>
> hpcr <- 10^14.3*H*pcr
> hhpcr <- 10^4.5*H*hpcr
> hhhpcr <- 10^2.7*H*hhpcr
> hhhhpcr <- 100*H*hhhpcr
> mghpcr <- 10^1.6*Mg*hpcr
> kpcr <- 10^0.74*k*pcr
> khpcr <- 10^0.31*k*hpcr
> khhpcr <- 10^-0.13*k*hhpcr
>
> hcr <- 10^14.3*H*cr
> hhcr <- 10^2.512*H*hcr
>
> hlactate <- 10^3.66*H*lactate
> mglactate <- 10^0.93*Mg*lactate
>
> tatp <- atp + hatp + hhatp + hhhatp + mgatp + mghatp + mg2atp + katp
> tadp <- adp + hadp + hhadp + hhhadp + mghadp + mgadp + mg2adp + kadp
> tpi? <- pi + hpi + hhpi + hhhpi + mgpi + mghpi + mghhpi + kpi + khpi + 
> khhpi
> tpcr <- pcr + hpcr + hhpcr + hhhpcr + hhhhpcr + mghpcr + kpcr + khpcr 
> + khhpcr
> tcr? <- cr + hcr + hhcr
> tlactate <- lactate + hlactate + mglactate
> # tmg <- Mg + mgatp + mghatp + mg2atp + mgadp + mghadp + mg2adp + mgpi +
> #??? kghpi + mghhpi + mghpcr + mglactate
> # tk <- k + katp + kadp + kpi + khpi + khhpi + kpcr + khpcr + khhpcr
>
>
> total = c(
> ?? ?tatp - 0.008,
> ?? ?tadp - 0.00001,
> ?? ?tpi - 0.003,
> ?? ?tpcr - 0.042,
> ?? ?tcr - 0.004,
> ?? ?tlactate - 0.005)
> return(total);
> # })
> }
>
> # conditions
>
> x0 = c(
> ?? ?atp = 0.008,
> ?? ?adp = 0.00001,
> ?? ?pi = 0.003,
> ?? ?pcr = 0.042,
> ?? ?cr = 0.004,
> ?? ?lactate = 0.005
> ) / 3;
> # tricky to get a positive value !!!
> x0[1] = 0.001; # still NOT positive;
>
> x = multiroot(solve.AcidSpecies, x0, H = 4E-8)
>
>
> On 1/23/2023 12:37 AM, Leonard Mada wrote:
>> Dear Troels,
>>
>> The system that you mentioned needs to be transformed first. The 
>> equations are standard acid-base equilibria-type equations in 
>> analytic chemistry.
>>
>> ATP + H <-> ATPH
>> ATPH + H <-> ATPH2
>> ATPH2 + H <-> ATPH3
>> [...]
>> The total amount of [ATP] is provided, while the concentration of the 
>> intermediates are unknown.
>>
>> Q.) It was unclear from your description:
>> Do you know the pH?
>> Or is the pH also unknown?
>>
>> I believe that the system is exactly solvable. The "multivariable" 
>> system/solution may be easier to write down: but is uglier to solve, 
>> as the "system" is under-determined. You can use optim in such cases, 
>> see eg. an example were I use it:
>> https://github.com/discoleo/R/blob/master/Stat/Polygons.Examples.R
>>
>>
>> a2 = optim(c(0.9, 0.5), polygonOptim, d=x)
>> # where the function polygonOptim() computes the distance between the 
>> starting-point & ending point of the polygon;
>> # (the polygon is defined only by the side lengths and optim() tries 
>> to compute the angles);
>> # optimal distance = 0, when the polygon is closed;
>> # Note: it is possible to use more than 2 starting values in the 
>> example above (the version with optim) works quit well;
>> # - but you need to "design" the function that is optimized for your 
>> particular system, e.g.
>> #?? by returning: c((ATPTotal - value)^2, (ADPTotal - value)^2, ...);
>>
>>
>> S.1.) Exact Solution
>> ATP system: You can express all components as eqs of free ATP, [ATP], 
>> and [H], [Mg], [K].
>> ATPH = KaATPH * ATP * H;
>> ATPH2 = KaATPH2 * ATPH * H
>> = KaATPH2 * KaATPH * ATP * H^2;
>> [...]
>>
>> Then you substitute these into the total-eqs. It is a bit uglier, as 
>> you have 5 coupled systems: ATP, ADP, Creatinine, CreaP and Lactate. 
>> This is why I thought that it may be easier to do it, at least 
>> partially/hybrid, in a "multivariate" way.
>>
>> # Total ATP:
>> ATPTotal = KaATPH * ATP * H + KaATPH2 * KaATPH * ATP * H^2 +
>> ??? + KaATPH3 * KaATPH2 * KaATPH * ATP * H^3 + ...;
>>
>> Note:
>> - the system above is solvable, if the pH is known; it may be 
>> undetermined if the pH is NOT known (but I am not very certain: 
>> easier to spot only when all the eqs are written down nicely);
>> - the eqs for total K & total Mg: are not useful to solve the system, 
>> as there are NO constraints on the total values; they will yield only 
>> some numerical values (which may be interesting for the analysis);
>> - total K & total Mg can be computed after solving the system;
>>
>> Please let me know if you need further assistance.
>>
>> Sincerely,
>>
>> Leonard
>>
>>
	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Jan 22 18:38:13 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sun, 22 Jan 2023 12:38:13 -0500
Subject: [R] Info files in Windows and Mac distributions
In-Reply-To: <IA1P223MB0499FFD767FBFB80C54426BEFACB9@IA1P223MB0499.NAMP223.PROD.OUTLOOK.COM>
References: <IA1P223MB0499FFD767FBFB80C54426BEFACB9@IA1P223MB0499.NAMP223.PROD.OUTLOOK.COM>
Message-ID: <6a1cb904-fd30-7686-9f7f-3d28e9b63bb5@gmail.com>

On 22/01/2023 12:09 p.m., Naresh Gurbuxani wrote:
> Recently I installed Linux on my desktop.  I discovered that R for Linux ships with info files of manuals.  R for Windows and Mac only ship with html and pdf files of manuals.
> 
> Why not include info files in R distributions for Windows and Mac?  These are very convenient with emacs.  Using pandoc , I tried converting from html to info.  The results were nowhere near as good as the originals.

I think the answer to the question is just that there isn't much demand 
for them:  emacs is mainly used by Linux users these days.

But the source to the manuals is available, so presumably you could 
produce these pretty easily yourself.  The R-devel versions are here:

   https://github.com/r-devel/r-svn/tree/master/doc/manual

I don't know whether the .texi files are sufficient for emacs or whether 
you need to process them first; I'm not an emacs user.

Duncan Murdoch


From JH@rm@e @end|ng |rom roku@com  Mon Jan 23 17:01:15 2023
From: JH@rm@e @end|ng |rom roku@com (Jorgen Harmse)
Date: Mon, 23 Jan 2023 16:01:15 +0000
Subject: [R] [EXTERNAL] Re: function doesn't exists but still runs.....
 (akshay kulkarni)
In-Reply-To: <mailman.368758.1.1674471601.10506.r-help@r-project.org>
References: <mailman.368758.1.1674471601.10506.r-help@r-project.org>
Message-ID: <MW4PR01MB6465AAB90079281B2151D808DCC89@MW4PR01MB6465.prod.exchangelabs.com>

Hi Akshay,

I usually use debug (a function provided by R). When you are stepping through a function your environment is the one in which function code is being executed, so you can easily see everything that is visible to the function. If you single step into a function that the first function calls then you also see everything that is available to that function. Moreover, you don't see anything that is not visible to the function you are debugging, so you can really determine what any piece of code would do if called inside the function.

Note 1: Code in R is always executed in an environment. I show in the example below that in the empty environment (the ultimate ancestor of all other environments) R can't even add. Usually the current environment (e.g. .GlobalEnv at the command line or a fresh environment created by a function call) has the right contents and the right parent to do what you expect, but in some special cases you need to understand how environments work. Even evalq & with are functions (unavailable for example in the empty environment), and the environment argument has to be evaluated in the current environment before the main expression can be evaluated in the environment that you want.


> E[1]

[[1]]

<environment: R_EmptyEnv>



> evalq(2+2, E[[1L]])

Error in 2 + 2 : could not find function "+"

> evalq(2L+2L, E[[1L]])

Error in 2L + 2L : could not find function "+"

Note 2: Besides automatically showing what a function sees, using debug (instead of hand-executing lines of code from the function) gives you the correct call stack. Suppose that you run some code at the debug command line to make a sub-sub-?-function do what you want, and you create in that environment what you hope is the correct return value. You can then use parent.frame() to put that value into the environment of the caller and run the caller's remaining code in the correct environment to see what happens. If there are no other problems then you can work your way up to top level and confirm that your patch has the right effect before you even modify the actual code of the offending function. (Saving all environments in .GlobalEnv forces R to keep them even if you quit the debugger. Combining eval & parse is sometimes more convenient than using evalq.)

Regards,
Jorgen.

------------------------------

Message: 2
Date: Sun, 22 Jan 2023 14:25:59 +0000
From: akshay kulkarni <akshay_e4 at hotmail.com>
To: Jorgen Harmse <JHarmse at roku.com>, "r-help at r-project.org"
        <r-help at r-project.org>, "williamwdunlap at gmail.com"
        <williamwdunlap at gmail.com>
Subject: Re: [R] [EXTERNAL] Re: function doesn't exists but still
        runs..... (akshay kulkarni)
Message-ID:
        <PU4P216MB1568BDE0E4929806E096CC11C8CB9 at PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Content-Type: text/plain; charset="utf-8"

Dear Jorgen,
                        regrets to reply this late....
I got into this issue because it threw an error, and it took more than 4 days to fix this. I  learnt a lot, and one things I learnt  is to debug the function, even when that is a public package function....instead of googling the error message...Any ideas on how to do this more efficiently?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Jorgen Harmse <JHarmse at roku.com>
Sent: Friday, January 20, 2023 11:35 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; r-help at r-project.org <r-help at r-project.org>; williamwdunlap at gmail.com <williamwdunlap at gmail.com>
Subject: Re: [EXTERNAL] Re: function doesn't exists but still runs..... (akshay kulkarni)


Hi Akshay,



Lexical scoping and environments are closely tied. (I think Bill even cited the documentation.) I guess it's arcane in the sense that scoping usually does what you expect, but the way that works is related to what we discussed.



What led you to discover the issue? Were you debugging the public package function because it didn't do what you expected, or were you just curious how it worked?



Regards,

Jorgen.





From: akshay kulkarni <akshay_e4 at hotmail.com>
Date: Friday, January 20, 2023 at 11:19
To: Jorgen Harmse <JHarmse at roku.com>, r-help at r-project.org <r-help at r-project.org>, williamwdunlap at gmail.com <williamwdunlap at gmail.com>
Subject: [EXTERNAL] Re: function doesn't exists but still runs..... (akshay kulkarni)

Dear Jorgen,

                     thanks for the reply.....so according to you one can pegion hole the problem as concerning R's lexical scoping rules,am I right? Or some arcane concept regarding environments....?



THanking you,

Yours sincerely,

AKSHAY M KULKARNI

________________________________

From: Jorgen Harmse <JHarmse at roku.com>
Sent: Friday, January 20, 2023 9:34 PM
To: r-help at r-project.org <r-help at r-project.org>; akshay_e4 at hotmail.com <akshay_e4 at hotmail.com>; williamwdunlap at gmail.com <williamwdunlap at gmail.com>
Subject: Re: function doesn't exists but still runs..... (akshay kulkarni)



It may help to expand a bit on Bill Dunlap's answer. I think that library does something like this:



Create a new environment for all the package objects. This environment will not be directly visible from .GlobalEnv, and ancestor environments may not be directly visible either. It may contain functions & other objects that are not exported, and it may use objects in ancestor environments that .GlobalEnv doesn't see directly. On the other hand, functions in the package will still see external functions in the way the package author intended instead of seeing functions with the same name that are visible to .GlobalEnv.



Run the source code in the private environment (using source(local=private environment, ....)?). Most package source code just defines functions, but the source code could build other objects that the package needs for some reason, or it could use delayedAssign to build the objects lazily. By default, the environment of any function defined by the source code is the private environment, so the function has access to private objects and to anything in ancestor environments.



Create a second new environment whose parent is parent.env(.GlobalEnv). For every export, assign the corresponding object from the private environment into the corresponding name in the public environment. Note that the environment of any function is still the private environment in which it was created. (I think that a function is mostly determined by its environment, its formals, and its body. A function call creates a new environment whose parent is the environment of the function. Thus whoever wrote the function can control the search for anything that isn?t passed in or created by the function itself.)



Reset parent.env(.GlobalEnv) to be the public environment. This makes all the exported objects (usually functions) available at the command line and allows the user to see everything that was available before (usually by name only, but by scope-resolved name if necessary). As noted by Bill Dunlap and in more detail above, package functions can use functions & other objects that are not directly visible to the user. As he also showed, you can (usually) pierce the privacy as long at least one function is exported. environment(package_function) is the private environment, so you can use it to see all the private objects and everything in the ancestor environments. You can repeat the trick to see private environments of packages you didn't directly pull in. I think you can even unlock bindings and do ghastly things to the package's private environment.



Regards,

Jorgen Harmse.

------------------------------

Message: 17
Date: Thu, 19 Jan 2023 16:02:31 -0800
From: Bill Dunlap <williamwdunlap at gmail.com>
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] function doesn't exists but still runs.....
Message-ID:
        <CAHqSRuTCBqh84FHg7=Xmd9qHxUiAN3Y4zBJbkAR3dRWhggu89Q at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Look into R's scoping rules.  E.g.,
https://bookdown.org/rdpeng/rprogdatascience/scoping-rules-of-r.html.

* When a function looks up a name, it looks it up in the environment in
which the function was defined.
* Functions in a package are generally defined in the package's environment
(although sometimes they are in a descendent of the parent's environment).
* When one searches an environment for a name, if it is not found in the
environment the search continues in the parent environment of that
environment, recursively until the parent environment is the empty
environment.

> with(environment(wdman::selenium), java_check)
function ()
{
    javapath <- Sys.which("java")
    if (identical(unname(javapath), "")) {
        stop("PATH to JAVA not found. Please check JAVA is installed.")
    }
    javapath
}
<bytecode: 0x000001fd0ab826a8>
<environment: namespace:wdman>

-Bill

On Thu, Jan 19, 2023 at 2:28 PM akshay kulkarni <akshay_e4 at hotmail.com>
wrote:

> dear members,
>                             I am using the RSelenium package which uses
> the function selenium() from the wdman package. The selenium function
> contains the function java_check at line 12. If I try to run it, it throws
> an error:
>
> >   javapath <- java_check()
> Error in java_check() : could not find function "java_check"
>
> Also:
>
> > exists("java_check")
> [1] FALSE
>
> But when I run selenium(), it works fine....
>
> How do you explain this conundrum? You can refer to this link:
> https://github.com/ropensci/wdman/issues/15
>
> Specifically what concept of R explains this weird behaviour?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]




------------------------------

Subject: Digest Footer

_______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


------------------------------

End of R-help Digest, Vol 239, Issue 20
***************************************

        [[alternative HTML version deleted]]





	[[alternative HTML version deleted]]


From @k@h@y_e4 @end|ng |rom hotm@||@com  Mon Jan 23 18:54:47 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Mon, 23 Jan 2023 17:54:47 +0000
Subject: [R] [EXTERNAL] Re: function doesn't exists but still runs.....
 (akshay kulkarni)
In-Reply-To: <MW4PR01MB6465AAB90079281B2151D808DCC89@MW4PR01MB6465.prod.exchangelabs.com>
References: <mailman.368758.1.1674471601.10506.r-help@r-project.org>
 <MW4PR01MB6465AAB90079281B2151D808DCC89@MW4PR01MB6465.prod.exchangelabs.com>
Message-ID: <PU4P216MB15683A4FA52903D059493EB3C8C89@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Jorgen,
                       thanks a lot....

Thanking you,
Yours sincerely
Akshay M Kulkarni
________________________________
From: Jorgen Harmse <JHarmse at roku.com>
Sent: Monday, January 23, 2023 9:31 PM
To: r-help at r-project.org <r-help at r-project.org>; akshay kulkarni <akshay_e4 at hotmail.com>
Subject: Re: [R] [EXTERNAL] Re: function doesn't exists but still runs..... (akshay kulkarni)


Hi Akshay,



I usually use debug (a function provided by R). When you are stepping through a function your environment is the one in which function code is being executed, so you can easily see everything that is visible to the function. If you single step into a function that the first function calls then you also see everything that is available to that function. Moreover, you don't see anything that is not visible to the function you are debugging, so you can really determine what any piece of code would do if called inside the function.



Note 1: Code in R is always executed in an environment. I show in the example below that in the empty environment (the ultimate ancestor of all other environments) R can't even add. Usually the current environment (e.g. .GlobalEnv at the command line or a fresh environment created by a function call) has the right contents and the right parent to do what you expect, but in some special cases you need to understand how environments work. Even evalq & with are functions (unavailable for example in the empty environment), and the environment argument has to be evaluated in the current environment before the main expression can be evaluated in the environment that you want.



> E[1]

[[1]]

<environment: R_EmptyEnv>



> evalq(2+2, E[[1L]])

Error in 2 + 2 : could not find function "+"

> evalq(2L+2L, E[[1L]])

Error in 2L + 2L : could not find function "+"



Note 2: Besides automatically showing what a function sees, using debug (instead of hand-executing lines of code from the function) gives you the correct call stack. Suppose that you run some code at the debug command line to make a sub-sub-?-function do what you want, and you create in that environment what you hope is the correct return value. You can then use parent.frame() to put that value into the environment of the caller and run the caller's remaining code in the correct environment to see what happens. If there are no other problems then you can work your way up to top level and confirm that your patch has the right effect before you even modify the actual code of the offending function. (Saving all environments in .GlobalEnv forces R to keep them even if you quit the debugger. Combining eval & parse is sometimes more convenient than using evalq.)



Regards,

Jorgen.

------------------------------

Message: 2
Date: Sun, 22 Jan 2023 14:25:59 +0000
From: akshay kulkarni <akshay_e4 at hotmail.com>
To: Jorgen Harmse <JHarmse at roku.com>, "r-help at r-project.org"
        <r-help at r-project.org>, "williamwdunlap at gmail.com"
        <williamwdunlap at gmail.com>
Subject: Re: [R] [EXTERNAL] Re: function doesn't exists but still
        runs..... (akshay kulkarni)
Message-ID:
        <PU4P216MB1568BDE0E4929806E096CC11C8CB9 at PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Content-Type: text/plain; charset="utf-8"

Dear Jorgen,
                        regrets to reply this late....
I got into this issue because it threw an error, and it took more than 4 days to fix this. I  learnt a lot, and one things I learnt  is to debug the function, even when that is a public package function....instead of googling the error message...Any ideas on how to do this more efficiently?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Jorgen Harmse <JHarmse at roku.com>
Sent: Friday, January 20, 2023 11:35 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; r-help at r-project.org <r-help at r-project.org>; williamwdunlap at gmail.com <williamwdunlap at gmail.com>
Subject: Re: [EXTERNAL] Re: function doesn't exists but still runs..... (akshay kulkarni)


Hi Akshay,



Lexical scoping and environments are closely tied. (I think Bill even cited the documentation.) I guess it's arcane in the sense that scoping usually does what you expect, but the way that works is related to what we discussed.



What led you to discover the issue? Were you debugging the public package function because it didn't do what you expected, or were you just curious how it worked?



Regards,

Jorgen.





From: akshay kulkarni <akshay_e4 at hotmail.com>
Date: Friday, January 20, 2023 at 11:19
To: Jorgen Harmse <JHarmse at roku.com>, r-help at r-project.org <r-help at r-project.org>, williamwdunlap at gmail.com <williamwdunlap at gmail.com>
Subject: [EXTERNAL] Re: function doesn't exists but still runs..... (akshay kulkarni)

Dear Jorgen,

                     thanks for the reply.....so according to you one can pegion hole the problem as concerning R's lexical scoping rules,am I right? Or some arcane concept regarding environments....?



THanking you,

Yours sincerely,

AKSHAY M KULKARNI

________________________________

From: Jorgen Harmse <JHarmse at roku.com>
Sent: Friday, January 20, 2023 9:34 PM
To: r-help at r-project.org <r-help at r-project.org>; akshay_e4 at hotmail.com <akshay_e4 at hotmail.com>; williamwdunlap at gmail.com <williamwdunlap at gmail.com>
Subject: Re: function doesn't exists but still runs..... (akshay kulkarni)



It may help to expand a bit on Bill Dunlap's answer. I think that library does something like this:



Create a new environment for all the package objects. This environment will not be directly visible from .GlobalEnv, and ancestor environments may not be directly visible either. It may contain functions & other objects that are not exported, and it may use objects in ancestor environments that .GlobalEnv doesn't see directly. On the other hand, functions in the package will still see external functions in the way the package author intended instead of seeing functions with the same name that are visible to .GlobalEnv.



Run the source code in the private environment (using source(local=private environment, ....)?). Most package source code just defines functions, but the source code could build other objects that the package needs for some reason, or it could use delayedAssign to build the objects lazily. By default, the environment of any function defined by the source code is the private environment, so the function has access to private objects and to anything in ancestor environments.



Create a second new environment whose parent is parent.env(.GlobalEnv). For every export, assign the corresponding object from the private environment into the corresponding name in the public environment. Note that the environment of any function is still the private environment in which it was created. (I think that a function is mostly determined by its environment, its formals, and its body. A function call creates a new environment whose parent is the environment of the function. Thus whoever wrote the function can control the search for anything that isn?t passed in or created by the function itself.)



Reset parent.env(.GlobalEnv) to be the public environment. This makes all the exported objects (usually functions) available at the command line and allows the user to see everything that was available before (usually by name only, but by scope-resolved name if necessary). As noted by Bill Dunlap and in more detail above, package functions can use functions & other objects that are not directly visible to the user. As he also showed, you can (usually) pierce the privacy as long at least one function is exported. environment(package_function) is the private environment, so you can use it to see all the private objects and everything in the ancestor environments. You can repeat the trick to see private environments of packages you didn't directly pull in. I think you can even unlock bindings and do ghastly things to the package's private environment.



Regards,

Jorgen Harmse.

------------------------------

Message: 17
Date: Thu, 19 Jan 2023 16:02:31 -0800
From: Bill Dunlap <williamwdunlap at gmail.com>
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] function doesn't exists but still runs.....
Message-ID:
        <CAHqSRuTCBqh84FHg7=Xmd9qHxUiAN3Y4zBJbkAR3dRWhggu89Q at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Look into R's scoping rules.  E.g.,
https://bookdown.org/rdpeng/rprogdatascience/scoping-rules-of-r.html.

* When a function looks up a name, it looks it up in the environment in
which the function was defined.
* Functions in a package are generally defined in the package's environment
(although sometimes they are in a descendent of the parent's environment).
* When one searches an environment for a name, if it is not found in the
environment the search continues in the parent environment of that
environment, recursively until the parent environment is the empty
environment.

> with(environment(wdman::selenium), java_check)
function ()
{
    javapath <- Sys.which("java")
    if (identical(unname(javapath), "")) {
        stop("PATH to JAVA not found. Please check JAVA is installed.")
    }
    javapath
}
<bytecode: 0x000001fd0ab826a8>
<environment: namespace:wdman>

-Bill

On Thu, Jan 19, 2023 at 2:28 PM akshay kulkarni <akshay_e4 at hotmail.com>
wrote:

> dear members,
>                             I am using the RSelenium package which uses
> the function selenium() from the wdman package. The selenium function
> contains the function java_check at line 12. If I try to run it, it throws
> an error:
>
> >   javapath <- java_check()
> Error in java_check() : could not find function "java_check"
>
> Also:
>
> > exists("java_check")
> [1] FALSE
>
> But when I run selenium(), it works fine....
>
> How do you explain this conundrum? You can refer to this link:
> https://github.com/ropensci/wdman/issues/15
>
> Specifically what concept of R explains this weird behaviour?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]




------------------------------

Subject: Digest Footer

_______________________________________________
R-help at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


------------------------------

End of R-help Digest, Vol 239, Issue 20
***************************************

        [[alternative HTML version deleted]]





	[[alternative HTML version deleted]]


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Mon Jan 23 19:38:23 2023
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Mon, 23 Jan 2023 18:38:23 +0000 (UTC)
Subject: [R] package FactoMineR
References: <830985149.1604446.1674499103618.ref@mail.yahoo.com>
Message-ID: <830985149.1604446.1674499103618@mail.yahoo.com>

Dear R-experts,

Here below the R code working (page 8?http://www2.uaem.mx/r-mirror/web/packages/FactoMineR/FactoMineR.pdf).?

But I am trying to get all the labels (the writes) : comfort, university, economic, world, ... smaller.?
How could I do that ?

Many thanks.

library(FactoMineR)
data(children)
res.ca <- CA (children, row.sup = 15:18, col.sup = 6:8)


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Mon Jan 23 20:16:42 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Mon, 23 Jan 2023 19:16:42 +0000
Subject: [R] package FactoMineR
In-Reply-To: <830985149.1604446.1674499103618@mail.yahoo.com>
References: <830985149.1604446.1674499103618.ref@mail.yahoo.com>
 <830985149.1604446.1674499103618@mail.yahoo.com>
Message-ID: <1fc08bf7-1a52-cabc-f8e9-4dabc158635c@sapo.pt>

?s 18:38 de 23/01/2023, varin sacha via R-help escreveu:
> Dear R-experts,
> 
> Here below the R code working (page 8?http://www2.uaem.mx/r-mirror/web/packages/FactoMineR/FactoMineR.pdf).
> 
> But I am trying to get all the labels (the writes) : comfort, university, economic, world, ... smaller.
> How could I do that ?
> 
> Many thanks.
> 
> library(FactoMineR)
> data(children)
> res.ca <- CA (children, row.sup = 15:18, col.sup = 6:8)
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

I'm not finding "smaller" but are you looking for


rownames(res.ca$row$coord)
rownames(res.ca$row.sup$coord)

?

Hope this helps,

Rui Barradas


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Tue Jan 24 10:50:26 2023
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Tue, 24 Jan 2023 10:50:26 +0100
Subject: [R] Flickering when scrolling in R graphics windows
In-Reply-To: <CAM-2newL_1zFzxpcOuv4bFbmCHTr5E_DZWi__GSdrku=Er1PJQ@mail.gmail.com>
References: <CAM-2newL_1zFzxpcOuv4bFbmCHTr5E_DZWi__GSdrku=Er1PJQ@mail.gmail.com>
Message-ID: <25551.43490.524282.598327@stat.math.ethz.ch>

>>>>> Ziyun Tang 
>>>>>     on Sat, 21 Jan 2023 15:14:15 -0500 writes:

    > Hello, I have been experiencing some issues regarding scrolling with
    > the mouse or trackpad in R graphics windows (from the base graphics
    > package), which sometimes results in flickering, and wanted to see if
    > anyone else had the same issues, or any advice. This happens for R
    > version 4.2.2 on Windows 10 x64, and occurs when using Rgui and at the
    > command line (whenever graphics windows are invoked). Note that some
    > of the example code below can cause flickering and can be an issue for
    > those with photosensitive epilepsy.

    > Specifically, I have been experiencing three main issues, as follows:

    > 1. When viewing a dataset with View(), the graphics window flickers
    > when scrolling downwards too quickly, even with the option
    > buffered=TRUE. For example:
    >> View(iris)

If you use [Page Up]  and [Page Down]  there is no "flickering",
also using the cursor (up/down "arrows").
Still here, I would not think anything to be "wrong".
If you tell the computer to refresh a screen more quickly than
makes sense I guess you must expect what you see here.
(but yes, more modern GUIs would do 'smooth scrolling' here; I
 think that's not available for the graphapp GUI in R for Windows)

By "scrolling", what exactly do you mean?
Is it that you use your mouse "wheel"? ...  I assume "yes" in
the following, because in that case I can partly reproduce what
you describe.


    > 2. When viewing a graph with plot(), and scrolling down, the graphics
    > window flickers between the background and the graph itself. For
    > example:
    >> plot(iris$Sepal.Length, iris$Sepal.Width)

At first I wrote
   I don't understand how you can "scroll down" in this plot

but now that I've guessed you mean "mouse wheel scrolling" I can
indeed see what you describe.

    > 3. When viewing a matrix of scatterplots with pairs(), and scrolling
    > down, the graphics window flickers between the background and the
    > individual scatterplots. In some instances, when scrolling down with
    > the trackpad, the window flickers continuously, and subsequently
    > closing the window crashes R. For example:
    >> pairs(iris[1:4])

That you bring R to crash just by "scrolling" really seems a bad
thing and points to a bug.
OTOH, I have not been able to replicate a crash.

I don't know what mouse-wheel-scrolling should do in a graphics window
in R for Windows.
In our terminal server version of Windows,
using Rterm (via ESS = Emacs Speaks Statistics), I can indeed
see that  mouse-scrolling in a graphics window has *very funny*
/ strange effects when using the default interactive graphics
device ( .Device == "windows" ) :

Notably, after say   pairs(iris)    mouse-wheel-scrolling
"kind of" redraws some of the panel plots mostly in full size
(instead of the size they were as panels and as part of the full
"pairs" i.e., scatter plot matrix.

If instead I use RStudio and their own device "RD<something>"
mouse-wheel-scrolling has no effect, e.g., after  pairs(iris).
And "no effect" is clearly better than what we observe with the R
default device "windows" i.e., windows() in the above situation.


    > My sessionInfo() is as follows:

    > R version 4.2.2 (2022-10-31 ucrt)
    > Platform: x86_64-w64-mingw32/x64 (64-bit)
    > Running under: Windows 10 x64 (build 19044)

    > Matrix products: default

    > locale:
    > [1] LC_COLLATE=English_United States.utf8
    > [2] LC_CTYPE=English_United States.utf8
    > [3] LC_MONETARY=English_United States.utf8
    > [4] LC_NUMERIC=C
    > [5] LC_TIME=English_United States.utf8

    > attached base packages:
    > [1] stats     graphics  grDevices utils     datasets  methods   base

    > loaded via a namespace (and not attached):
    > [1] compiler_4.2.2 tools_4.2.2

    > Thank you in advance,
    > Ziyun


From petr@p|k@| @end|ng |rom prechez@@cz  Tue Jan 24 11:09:52 2023
From: petr@p|k@| @end|ng |rom prechez@@cz (PIKAL Petr)
Date: Tue, 24 Jan 2023 10:09:52 +0000
Subject: [R] package FactoMineR
In-Reply-To: <830985149.1604446.1674499103618@mail.yahoo.com>
References: <830985149.1604446.1674499103618.ref@mail.yahoo.com>
 <830985149.1604446.1674499103618@mail.yahoo.com>
Message-ID: <8e2fa4fe9f284e08b236e9b9f1dbd94a@SRVEXCHCM1302.precheza.cz>

Hallo Sacha

AFAIK the functions in FactoMineR do not enable to manipulate label size. Plot 
is performed by this part:

if (graph & (ncp > 1)) {
        print(plot(res, axes = axes))
        if (!is.null(quanti.sup))
            print(plot(res, choix = "quanti.sup", axes = axes,
                new.plot = TRUE))

and the function is not designed to accept additional parameters to manipulate 
size of labels.

I struggled with it few years ago and I decided to use biplot instead as it 
enables more options.

You can contact maintainers if they consider an improvement in future 
versions. Probably simple ... in function definition and print(plot(res, axes 
= axes, ...)) addition could do the trick, but I am not sure.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of varin sacha via R-
> help
> Sent: Monday, January 23, 2023 7:38 PM
> To: r-help at r-project.org
> Subject: [R] package FactoMineR
>
> Dear R-experts,
>
> Here below the R code working (page 8 http://www2.uaem.mx/r-
> mirror/web/packages/FactoMineR/FactoMineR.pdf).
>
> But I am trying to get all the labels (the writes) : comfort, university, 
> economic,
> world, ... smaller. How could I do that ?
>
> Many thanks.
>
> library(FactoMineR)
> data(children)
> res.ca <- CA (children, row.sup = 15:18, col.sup = 6:8)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

From SYLen@|ng @end|ng |rom u@m@@edu  Tue Jan 24 15:45:30 2023
From: SYLen@|ng @end|ng |rom u@m@@edu (Lensing, Shelly Y)
Date: Tue, 24 Jan 2023 14:45:30 +0000
Subject: [R] INSUBSCRIBE
In-Reply-To: <mailman.368765.1.1674558002.60653.r-help@r-project.org>
References: <mailman.368765.1.1674558002.60653.r-help@r-project.org>
Message-ID: <891A0FD4-F064-4F8E-B1F5-2CA3D761939A@uams.edu>



On Jan 24, 2023, at 5:00 AM, r-help-request at r-project.org wrote:

?
Send R-help mailing list submissions to r-help@?r-project.?org To subscribe or unsubscribe via the World Wide Web, visit https:?//urldefense.?proofpoint.?com/v2/url?u=https-3A__stat.?ethz.?ch_mailman_listinfo_r-2Dhelp&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=WyAtmOvZqkJ83zE98hkQxz9o1I6k6gYj7KJzInNKmcQ&e=
ZjQcmQRYFpfptBannerStart
This Message Is From an External Sender
This message came from outside your organization.

ZjQcmQRYFpfptBannerEnd

Send R-help mailing list submissions to
        r-help at r-project.org

To subscribe or unsubscribe via the World Wide Web, visit
        https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=WyAtmOvZqkJ83zE98hkQxz9o1I6k6gYj7KJzInNKmcQ&e=
or, via email, send a message with subject or body 'help' to
        r-help-request at r-project.org

You can reach the person managing the list at
        r-help-owner at r-project.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of R-help digest..."


Today's Topics:

   1. Re: Info files in Windows and Mac distributions (Duncan Murdoch)
   2. Re: [EXTERNAL] Re: function doesn't exists but still
      runs..... (akshay kulkarni) (Jorgen Harmse)
   3. Re: [EXTERNAL] Re: function doesn't exists but still
      runs..... (akshay kulkarni) (akshay kulkarni)
   4. package FactoMineR (varin sacha)
   5. Re: package FactoMineR (Rui Barradas)
   6. Re: Flickering when scrolling in R graphics windows
      (Martin Maechler)
   7. Re: package FactoMineR (PIKAL Petr)

----------------------------------------------------------------------

Message: 1
Date: Sun, 22 Jan 2023 12:38:13 -0500
From: Duncan Murdoch <murdoch.duncan at gmail.com>
To: Naresh Gurbuxani <naresh_gurbuxani at hotmail.com>, R Help
        <r-help at r-project.org>
Subject: Re: [R] Info files in Windows and Mac distributions
Message-ID: <6a1cb904-fd30-7686-9f7f-3d28e9b63bb5 at gmail.com>
Content-Type: text/plain; charset="utf-8"; Format="flowed"

On 22/01/2023 12:09 p.m., Naresh Gurbuxani wrote:
> Recently I installed Linux on my desktop.  I discovered that R for Linux ships with info files of manuals.  R for Windows and Mac only ship with html and pdf files of manuals.
>
> Why not include info files in R distributions for Windows and Mac?  These are very convenient with emacs.  Using pandoc , I tried converting from html to info.  The results were nowhere near as good as the originals.

I think the answer to the question is just that there isn't much demand
for them:  emacs is mainly used by Linux users these days.

But the source to the manuals is available, so presumably you could
produce these pretty easily yourself.  The R-devel versions are here:

   https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_r-2Ddevel_r-2Dsvn_tree_master_doc_manual&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=XnWhnshtwyINVkabbrzkIYLCxHOxWnBrO3Jemc-Mqcw&e=

I don't know whether the .texi files are sufficient for emacs or whether
you need to process them first; I'm not an emacs user.

Duncan Murdoch




------------------------------

Message: 2
Date: Mon, 23 Jan 2023 16:01:15 +0000
From: Jorgen Harmse <JHarmse at roku.com>
To: "r-help at r-project.org" <r-help at r-project.org>, akshay kulkarni
        <akshay_e4 at hotmail.com>
Subject: Re: [R] [EXTERNAL] Re: function doesn't exists but still
        runs..... (akshay kulkarni)
Message-ID:
        <MW4PR01MB6465AAB90079281B2151D808DCC89 at MW4PR01MB6465.prod.exchangelabs.com>

Content-Type: text/plain; charset="utf-8"

Hi Akshay,

I usually use debug (a function provided by R). When you are stepping through a function your environment is the one in which function code is being executed, so you can easily see everything that is visible to the function. If you single step into a function that the first function calls then you also see everything that is available to that function. Moreover, you don't see anything that is not visible to the function you are debugging, so you can really determine what any piece of code would do if called inside the function.

Note 1: Code in R is always executed in an environment. I show in the example below that in the empty environment (the ultimate ancestor of all other environments) R can't even add. Usually the current environment (e.g. .GlobalEnv at the command line or a fresh environment created by a function call) has the right contents and the right parent to do what you expect, but in some special cases you need to understand how environments work. Even evalq & with are functions (unavailable for example in the empty environment), and the environment argument has to be evaluated in the current environment before the main expression can be evaluated in the environment that you want.


> E[1]

[[1]]

<environment: R_EmptyEnv>



> evalq(2+2, E[[1L]])

Error in 2 + 2 : could not find function "+"

> evalq(2L+2L, E[[1L]])

Error in 2L + 2L : could not find function "+"

Note 2: Besides automatically showing what a function sees, using debug (instead of hand-executing lines of code from the function) gives you the correct call stack. Suppose that you run some code at the debug command line to make a sub-sub-?-function do what you want, and you create in that environment what you hope is the correct return value. You can then use parent.frame() to put that value into the environment of the caller and run the caller's remaining code in the correct environment to see what happens. If there are no other problems then you can work your way up to top level and confirm that your patch has the right effect before you even modify the actual code of the offending function. (Saving all environments in .GlobalEnv forces R to keep them even if you quit the debugger. Combining eval & parse is sometimes more convenient than using evalq.)

Regards,
Jorgen.

------------------------------

Message: 2
Date: Sun, 22 Jan 2023 14:25:59 +0000
From: akshay kulkarni <akshay_e4 at hotmail.com>
To: Jorgen Harmse <JHarmse at roku.com>, "r-help at r-project.org"
        <r-help at r-project.org>, "williamwdunlap at gmail.com"
        <williamwdunlap at gmail.com>
Subject: Re: [R] [EXTERNAL] Re: function doesn't exists but still
        runs..... (akshay kulkarni)
Message-ID:
        <PU4P216MB1568BDE0E4929806E096CC11C8CB9 at PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Content-Type: text/plain; charset="utf-8"

Dear Jorgen,
                        regrets to reply this late....
I got into this issue because it threw an error, and it took more than 4 days to fix this. I  learnt a lot, and one things I learnt  is to debug the function, even when that is a public package function....instead of googling the error message...Any ideas on how to do this more efficiently?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Jorgen Harmse <JHarmse at roku.com>
Sent: Friday, January 20, 2023 11:35 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; r-help at r-project.org <r-help at r-project.org>; williamwdunlap at gmail.com <williamwdunlap at gmail.com>
Subject: Re: [EXTERNAL] Re: function doesn't exists but still runs..... (akshay kulkarni)


Hi Akshay,



Lexical scoping and environments are closely tied. (I think Bill even cited the documentation.) I guess it's arcane in the sense that scoping usually does what you expect, but the way that works is related to what we discussed.



What led you to discover the issue? Were you debugging the public package function because it didn't do what you expected, or were you just curious how it worked?



Regards,

Jorgen.





From: akshay kulkarni <akshay_e4 at hotmail.com>
Date: Friday, January 20, 2023 at 11:19
To: Jorgen Harmse <JHarmse at roku.com>, r-help at r-project.org <r-help at r-project.org>, williamwdunlap at gmail.com <williamwdunlap at gmail.com>
Subject: [EXTERNAL] Re: function doesn't exists but still runs..... (akshay kulkarni)

Dear Jorgen,

                     thanks for the reply.....so according to you one can pegion hole the problem as concerning R's lexical scoping rules,am I right? Or some arcane concept regarding environments....?



THanking you,

Yours sincerely,

AKSHAY M KULKARNI

________________________________

From: Jorgen Harmse <JHarmse at roku.com>
Sent: Friday, January 20, 2023 9:34 PM
To: r-help at r-project.org <r-help at r-project.org>; akshay_e4 at hotmail.com <akshay_e4 at hotmail.com>; williamwdunlap at gmail.com <williamwdunlap at gmail.com>
Subject: Re: function doesn't exists but still runs..... (akshay kulkarni)



It may help to expand a bit on Bill Dunlap's answer. I think that library does something like this:



Create a new environment for all the package objects. This environment will not be directly visible from .GlobalEnv, and ancestor environments may not be directly visible either. It may contain functions & other objects that are not exported, and it may use objects in ancestor environments that .GlobalEnv doesn't see directly. On the other hand, functions in the package will still see external functions in the way the package author intended instead of seeing functions with the same name that are visible to .GlobalEnv.



Run the source code in the private environment (using source(local=private environment, ....)?). Most package source code just defines functions, but the source code could build other objects that the package needs for some reason, or it could use delayedAssign to build the objects lazily. By default, the environment of any function defined by the source code is the private environment, so the function has access to private objects and to anything in ancestor environments.



Create a second new environment whose parent is parent.env(.GlobalEnv). For every export, assign the corresponding object from the private environment into the corresponding name in the public environment. Note that the environment of any function is still the private environment in which it was created. (I think that a function is mostly determined by its environment, its formals, and its body. A function call creates a new environment whose parent is the environment of the function. Thus whoever wrote the function can control the search for anything that isn?t passed in or created by the function itself.)



Reset parent.env(.GlobalEnv) to be the public environment. This makes all the exported objects (usually functions) available at the command line and allows the user to see everything that was available before (usually by name only, but by scope-resolved name if necessary). As noted by Bill Dunlap and in more detail above, package functions can use functions & other objects that are not directly visible to the user. As he also showed, you can (usually) pierce the privacy as long at least one function is exported. environment(package_function) is the private environment, so you can use it to see all the private objects and everything in the ancestor environments. You can repeat the trick to see private environments of packages you didn't directly pull in. I think you can even unlock bindings and do ghastly things to the package's private environment.



Regards,

Jorgen Harmse.

------------------------------

Message: 17
Date: Thu, 19 Jan 2023 16:02:31 -0800
From: Bill Dunlap <williamwdunlap at gmail.com>
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] function doesn't exists but still runs.....
Message-ID:
        <CAHqSRuTCBqh84FHg7=Xmd9qHxUiAN3Y4zBJbkAR3dRWhggu89Q at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Look into R's scoping rules.  E.g.,
https://urldefense.proofpoint.com/v2/url?u=https-3A__bookdown.org_rdpeng_rprogdatascience_scoping-2Drules-2Dof-2Dr.html&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=Mb3F4Yi_5e0mAkovoM8_Dai8vSPPDK3hbOWblRvh4Yo&e=.

* When a function looks up a name, it looks it up in the environment in
which the function was defined.
* Functions in a package are generally defined in the package's environment
(although sometimes they are in a descendent of the parent's environment).
* When one searches an environment for a name, if it is not found in the
environment the search continues in the parent environment of that
environment, recursively until the parent environment is the empty
environment.

> with(environment(wdman::selenium), java_check)
function ()
{
    javapath <- Sys.which("java")
    if (identical(unname(javapath), "")) {
        stop("PATH to JAVA not found. Please check JAVA is installed.")
    }
    javapath
}
<bytecode: 0x000001fd0ab826a8>
<environment: namespace:wdman>

-Bill

On Thu, Jan 19, 2023 at 2:28 PM akshay kulkarni <akshay_e4 at hotmail.com>
wrote:

> dear members,
>                             I am using the RSelenium package which uses
> the function selenium() from the wdman package. The selenium function
> contains the function java_check at line 12. If I try to run it, it throws
> an error:
>
> >   javapath <- java_check()
> Error in java_check() : could not find function "java_check"
>
> Also:
>
> > exists("java_check")
> [1] FALSE
>
> But when I run selenium(), it works fine....
>
> How do you explain this conundrum? You can refer to this link:
> https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ropensci_wdman_issues_15&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=XolZgwav8rnGPXeiF55H6PWDBFufTzdVohRiF_1uj7g&e=
>
> Specifically what concept of R explains this weird behaviour?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=WyAtmOvZqkJ83zE98hkQxz9o1I6k6gYj7KJzInNKmcQ&e=
> PLEASE do read the posting guide
> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=LvYxgn0N8iyJd6E3RK9ecZ0STO1_BIgO6gtE_zSJv-g&e=
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]




------------------------------

Subject: Digest Footer

_______________________________________________
R-help at r-project.org mailing list
https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=WyAtmOvZqkJ83zE98hkQxz9o1I6k6gYj7KJzInNKmcQ&e=
PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=LvYxgn0N8iyJd6E3RK9ecZ0STO1_BIgO6gtE_zSJv-g&e=
and provide commented, minimal, self-contained, reproducible code.


------------------------------

End of R-help Digest, Vol 239, Issue 20
***************************************

        [[alternative HTML version deleted]]





        [[alternative HTML version deleted]]



------------------------------

Message: 3
Date: Mon, 23 Jan 2023 17:54:47 +0000
From: akshay kulkarni <akshay_e4 at hotmail.com>
To: Jorgen Harmse <JHarmse at roku.com>, "r-help at r-project.org"
        <r-help at r-project.org>
Subject: Re: [R] [EXTERNAL] Re: function doesn't exists but still
        runs..... (akshay kulkarni)
Message-ID:
        <PU4P216MB15683A4FA52903D059493EB3C8C89 at PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Content-Type: text/plain; charset="utf-8"

Dear Jorgen,
                       thanks a lot....

Thanking you,
Yours sincerely
Akshay M Kulkarni
________________________________
From: Jorgen Harmse <JHarmse at roku.com>
Sent: Monday, January 23, 2023 9:31 PM
To: r-help at r-project.org <r-help at r-project.org>; akshay kulkarni <akshay_e4 at hotmail.com>
Subject: Re: [R] [EXTERNAL] Re: function doesn't exists but still runs..... (akshay kulkarni)


Hi Akshay,



I usually use debug (a function provided by R). When you are stepping through a function your environment is the one in which function code is being executed, so you can easily see everything that is visible to the function. If you single step into a function that the first function calls then you also see everything that is available to that function. Moreover, you don't see anything that is not visible to the function you are debugging, so you can really determine what any piece of code would do if called inside the function.



Note 1: Code in R is always executed in an environment. I show in the example below that in the empty environment (the ultimate ancestor of all other environments) R can't even add. Usually the current environment (e.g. .GlobalEnv at the command line or a fresh environment created by a function call) has the right contents and the right parent to do what you expect, but in some special cases you need to understand how environments work. Even evalq & with are functions (unavailable for example in the empty environment), and the environment argument has to be evaluated in the current environment before the main expression can be evaluated in the environment that you want.



> E[1]

[[1]]

<environment: R_EmptyEnv>



> evalq(2+2, E[[1L]])

Error in 2 + 2 : could not find function "+"

> evalq(2L+2L, E[[1L]])

Error in 2L + 2L : could not find function "+"



Note 2: Besides automatically showing what a function sees, using debug (instead of hand-executing lines of code from the function) gives you the correct call stack. Suppose that you run some code at the debug command line to make a sub-sub-?-function do what you want, and you create in that environment what you hope is the correct return value. You can then use parent.frame() to put that value into the environment of the caller and run the caller's remaining code in the correct environment to see what happens. If there are no other problems then you can work your way up to top level and confirm that your patch has the right effect before you even modify the actual code of the offending function. (Saving all environments in .GlobalEnv forces R to keep them even if you quit the debugger. Combining eval & parse is sometimes more convenient than using evalq.)



Regards,

Jorgen.

------------------------------

Message: 2
Date: Sun, 22 Jan 2023 14:25:59 +0000
From: akshay kulkarni <akshay_e4 at hotmail.com>
To: Jorgen Harmse <JHarmse at roku.com>, "r-help at r-project.org"
        <r-help at r-project.org>, "williamwdunlap at gmail.com"
        <williamwdunlap at gmail.com>
Subject: Re: [R] [EXTERNAL] Re: function doesn't exists but still
        runs..... (akshay kulkarni)
Message-ID:
        <PU4P216MB1568BDE0E4929806E096CC11C8CB9 at PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Content-Type: text/plain; charset="utf-8"

Dear Jorgen,
                        regrets to reply this late....
I got into this issue because it threw an error, and it took more than 4 days to fix this. I  learnt a lot, and one things I learnt  is to debug the function, even when that is a public package function....instead of googling the error message...Any ideas on how to do this more efficiently?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Jorgen Harmse <JHarmse at roku.com>
Sent: Friday, January 20, 2023 11:35 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>; r-help at r-project.org <r-help at r-project.org>; williamwdunlap at gmail.com <williamwdunlap at gmail.com>
Subject: Re: [EXTERNAL] Re: function doesn't exists but still runs..... (akshay kulkarni)


Hi Akshay,



Lexical scoping and environments are closely tied. (I think Bill even cited the documentation.) I guess it's arcane in the sense that scoping usually does what you expect, but the way that works is related to what we discussed.



What led you to discover the issue? Were you debugging the public package function because it didn't do what you expected, or were you just curious how it worked?



Regards,

Jorgen.





From: akshay kulkarni <akshay_e4 at hotmail.com>
Date: Friday, January 20, 2023 at 11:19
To: Jorgen Harmse <JHarmse at roku.com>, r-help at r-project.org <r-help at r-project.org>, williamwdunlap at gmail.com <williamwdunlap at gmail.com>
Subject: [EXTERNAL] Re: function doesn't exists but still runs..... (akshay kulkarni)

Dear Jorgen,

                     thanks for the reply.....so according to you one can pegion hole the problem as concerning R's lexical scoping rules,am I right? Or some arcane concept regarding environments....?



THanking you,

Yours sincerely,

AKSHAY M KULKARNI

________________________________

From: Jorgen Harmse <JHarmse at roku.com>
Sent: Friday, January 20, 2023 9:34 PM
To: r-help at r-project.org <r-help at r-project.org>; akshay_e4 at hotmail.com <akshay_e4 at hotmail.com>; williamwdunlap at gmail.com <williamwdunlap at gmail.com>
Subject: Re: function doesn't exists but still runs..... (akshay kulkarni)



It may help to expand a bit on Bill Dunlap's answer. I think that library does something like this:



Create a new environment for all the package objects. This environment will not be directly visible from .GlobalEnv, and ancestor environments may not be directly visible either. It may contain functions & other objects that are not exported, and it may use objects in ancestor environments that .GlobalEnv doesn't see directly. On the other hand, functions in the package will still see external functions in the way the package author intended instead of seeing functions with the same name that are visible to .GlobalEnv.



Run the source code in the private environment (using source(local=private environment, ....)?). Most package source code just defines functions, but the source code could build other objects that the package needs for some reason, or it could use delayedAssign to build the objects lazily. By default, the environment of any function defined by the source code is the private environment, so the function has access to private objects and to anything in ancestor environments.



Create a second new environment whose parent is parent.env(.GlobalEnv). For every export, assign the corresponding object from the private environment into the corresponding name in the public environment. Note that the environment of any function is still the private environment in which it was created. (I think that a function is mostly determined by its environment, its formals, and its body. A function call creates a new environment whose parent is the environment of the function. Thus whoever wrote the function can control the search for anything that isn?t passed in or created by the function itself.)



Reset parent.env(.GlobalEnv) to be the public environment. This makes all the exported objects (usually functions) available at the command line and allows the user to see everything that was available before (usually by name only, but by scope-resolved name if necessary). As noted by Bill Dunlap and in more detail above, package functions can use functions & other objects that are not directly visible to the user. As he also showed, you can (usually) pierce the privacy as long at least one function is exported. environment(package_function) is the private environment, so you can use it to see all the private objects and everything in the ancestor environments. You can repeat the trick to see private environments of packages you didn't directly pull in. I think you can even unlock bindings and do ghastly things to the package's private environment.



Regards,

Jorgen Harmse.

------------------------------

Message: 17
Date: Thu, 19 Jan 2023 16:02:31 -0800
From: Bill Dunlap <williamwdunlap at gmail.com>
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] function doesn't exists but still runs.....
Message-ID:
        <CAHqSRuTCBqh84FHg7=Xmd9qHxUiAN3Y4zBJbkAR3dRWhggu89Q at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Look into R's scoping rules.  E.g.,
https://urldefense.proofpoint.com/v2/url?u=https-3A__bookdown.org_rdpeng_rprogdatascience_scoping-2Drules-2Dof-2Dr.html&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=Mb3F4Yi_5e0mAkovoM8_Dai8vSPPDK3hbOWblRvh4Yo&e=.

* When a function looks up a name, it looks it up in the environment in
which the function was defined.
* Functions in a package are generally defined in the package's environment
(although sometimes they are in a descendent of the parent's environment).
* When one searches an environment for a name, if it is not found in the
environment the search continues in the parent environment of that
environment, recursively until the parent environment is the empty
environment.

> with(environment(wdman::selenium), java_check)
function ()
{
    javapath <- Sys.which("java")
    if (identical(unname(javapath), "")) {
        stop("PATH to JAVA not found. Please check JAVA is installed.")
    }
    javapath
}
<bytecode: 0x000001fd0ab826a8>
<environment: namespace:wdman>

-Bill

On Thu, Jan 19, 2023 at 2:28 PM akshay kulkarni <akshay_e4 at hotmail.com>
wrote:

> dear members,
>                             I am using the RSelenium package which uses
> the function selenium() from the wdman package. The selenium function
> contains the function java_check at line 12. If I try to run it, it throws
> an error:
>
> >   javapath <- java_check()
> Error in java_check() : could not find function "java_check"
>
> Also:
>
> > exists("java_check")
> [1] FALSE
>
> But when I run selenium(), it works fine....
>
> How do you explain this conundrum? You can refer to this link:
> https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_ropensci_wdman_issues_15&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=XolZgwav8rnGPXeiF55H6PWDBFufTzdVohRiF_1uj7g&e=
>
> Specifically what concept of R explains this weird behaviour?
>
> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=WyAtmOvZqkJ83zE98hkQxz9o1I6k6gYj7KJzInNKmcQ&e=
> PLEASE do read the posting guide
> https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=LvYxgn0N8iyJd6E3RK9ecZ0STO1_BIgO6gtE_zSJv-g&e=
> and provide commented, minimal, self-contained, reproducible code.
>

        [[alternative HTML version deleted]]




------------------------------

Subject: Digest Footer

_______________________________________________
R-help at r-project.org mailing list
https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=WyAtmOvZqkJ83zE98hkQxz9o1I6k6gYj7KJzInNKmcQ&e=
PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=LvYxgn0N8iyJd6E3RK9ecZ0STO1_BIgO6gtE_zSJv-g&e=
and provide commented, minimal, self-contained, reproducible code.


------------------------------

End of R-help Digest, Vol 239, Issue 20
***************************************

        [[alternative HTML version deleted]]





        [[alternative HTML version deleted]]



------------------------------

Message: 4
Date: Mon, 23 Jan 2023 18:38:23 +0000 (UTC)
From: varin sacha <varinsacha at yahoo.fr>
To: "r-help at r-project.org" <r-help at r-project.org>
Subject: [R] package FactoMineR
Message-ID: <830985149.1604446.1674499103618 at mail.yahoo.com>
Content-Type: text/plain; charset="utf-8"

Dear R-experts,

Here below the R code working (page 8 https://urldefense.proofpoint.com/v2/url?u=http-3A__www2.uaem.mx_r-2Dmirror_web_packages_FactoMineR_FactoMineR.pdf&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=YSmLvNnRQ7MWmcgbyifplmgAMBL22w7f9xufQdUzwyQ&e=).

But I am trying to get all the labels (the writes) : comfort, university, economic, world, ... smaller.
How could I do that ?

Many thanks.

library(FactoMineR)
data(children)
res.ca <- CA (children, row.sup = 15:18, col.sup = 6:8)




------------------------------

Message: 5
Date: Mon, 23 Jan 2023 19:16:42 +0000
From: Rui Barradas <ruipbarradas at sapo.pt>
To: varin sacha <varinsacha at yahoo.fr>, "r-help at r-project.org"
        <r-help at r-project.org>
Subject: Re: [R] package FactoMineR
Message-ID: <1fc08bf7-1a52-cabc-f8e9-4dabc158635c at sapo.pt>
Content-Type: text/plain; charset="utf-8"; Format="flowed"

?s 18:38 de 23/01/2023, varin sacha via R-help escreveu:
> Dear R-experts,
>
> Here below the R code working (page 8 https://urldefense.proofpoint.com/v2/url?u=http-3A__www2.uaem.mx_r-2Dmirror_web_packages_FactoMineR_FactoMineR.pdf&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=YSmLvNnRQ7MWmcgbyifplmgAMBL22w7f9xufQdUzwyQ&e=).
>
> But I am trying to get all the labels (the writes) : comfort, university, economic, world, ... smaller.
> How could I do that ?
>
> Many thanks.
>
> library(FactoMineR)
> data(children)
> res.ca <- CA (children, row.sup = 15:18, col.sup = 6:8)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=WyAtmOvZqkJ83zE98hkQxz9o1I6k6gYj7KJzInNKmcQ&e=
> PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=LvYxgn0N8iyJd6E3RK9ecZ0STO1_BIgO6gtE_zSJv-g&e=
> and provide commented, minimal, self-contained, reproducible code.
Hello,

I'm not finding "smaller" but are you looking for


rownames(res.ca$row$coord)
rownames(res.ca$row.sup$coord)

?

Hope this helps,

Rui Barradas




------------------------------

Message: 6
Date: Tue, 24 Jan 2023 10:50:26 +0100
From: Martin Maechler <maechler at stat.math.ethz.ch>
To: Ziyun Tang <tziyun2 at gmail.com>
Cc: <r-help at r-project.org>
Subject: Re: [R] Flickering when scrolling in R graphics windows
Message-ID: <25551.43490.524282.598327 at stat.math.ethz.ch>
Content-Type: text/plain; charset="us-ascii"

>>>>> Ziyun Tang
>>>>>     on Sat, 21 Jan 2023 15:14:15 -0500 writes:

    > Hello, I have been experiencing some issues regarding scrolling with
    > the mouse or trackpad in R graphics windows (from the base graphics
    > package), which sometimes results in flickering, and wanted to see if
    > anyone else had the same issues, or any advice. This happens for R
    > version 4.2.2 on Windows 10 x64, and occurs when using Rgui and at the
    > command line (whenever graphics windows are invoked). Note that some
    > of the example code below can cause flickering and can be an issue for
    > those with photosensitive epilepsy.

    > Specifically, I have been experiencing three main issues, as follows:

    > 1. When viewing a dataset with View(), the graphics window flickers
    > when scrolling downwards too quickly, even with the option
    > buffered=TRUE. For example:
    >> View(iris)

If you use [Page Up]  and [Page Down]  there is no "flickering",
also using the cursor (up/down "arrows").
Still here, I would not think anything to be "wrong".
If you tell the computer to refresh a screen more quickly than
makes sense I guess you must expect what you see here.
(but yes, more modern GUIs would do 'smooth scrolling' here; I
 think that's not available for the graphapp GUI in R for Windows)

By "scrolling", what exactly do you mean?
Is it that you use your mouse "wheel"? ...  I assume "yes" in
the following, because in that case I can partly reproduce what
you describe.


    > 2. When viewing a graph with plot(), and scrolling down, the graphics
    > window flickers between the background and the graph itself. For
    > example:
    >> plot(iris$Sepal.Length, iris$Sepal.Width)

At first I wrote
   I don't understand how you can "scroll down" in this plot

but now that I've guessed you mean "mouse wheel scrolling" I can
indeed see what you describe.

    > 3. When viewing a matrix of scatterplots with pairs(), and scrolling
    > down, the graphics window flickers between the background and the
    > individual scatterplots. In some instances, when scrolling down with
    > the trackpad, the window flickers continuously, and subsequently
    > closing the window crashes R. For example:
    >> pairs(iris[1:4])

That you bring R to crash just by "scrolling" really seems a bad
thing and points to a bug.
OTOH, I have not been able to replicate a crash.

I don't know what mouse-wheel-scrolling should do in a graphics window
in R for Windows.
In our terminal server version of Windows,
using Rterm (via ESS = Emacs Speaks Statistics), I can indeed
see that  mouse-scrolling in a graphics window has *very funny*
/ strange effects when using the default interactive graphics
device ( .Device == "windows" ) :

Notably, after say   pairs(iris)    mouse-wheel-scrolling
"kind of" redraws some of the panel plots mostly in full size
(instead of the size they were as panels and as part of the full
"pairs" i.e., scatter plot matrix.

If instead I use RStudio and their own device "RD<something>"
mouse-wheel-scrolling has no effect, e.g., after  pairs(iris).
And "no effect" is clearly better than what we observe with the R
default device "windows" i.e., windows() in the above situation.


    > My sessionInfo() is as follows:

    > R version 4.2.2 (2022-10-31 ucrt)
    > Platform: x86_64-w64-mingw32/x64 (64-bit)
    > Running under: Windows 10 x64 (build 19044)

    > Matrix products: default

    > locale:
    > [1] LC_COLLATE=English_United States.utf8
    > [2] LC_CTYPE=English_United States.utf8
    > [3] LC_MONETARY=English_United States.utf8
    > [4] LC_NUMERIC=C
    > [5] LC_TIME=English_United States.utf8

    > attached base packages:
    > [1] stats     graphics  grDevices utils     datasets  methods   base

    > loaded via a namespace (and not attached):
    > [1] compiler_4.2.2 tools_4.2.2

    > Thank you in advance,
    > Ziyun




------------------------------

Message: 7
Date: Tue, 24 Jan 2023 10:09:52 +0000
From: PIKAL Petr <petr.pikal at precheza.cz>
To: varin sacha <varinsacha at yahoo.fr>, "r-help at r-project.org"
        <r-help at r-project.org>
Subject: Re: [R] package FactoMineR
Message-ID:
        <8e2fa4fe9f284e08b236e9b9f1dbd94a at SRVEXCHCM1302.precheza.cz>
Content-Type: text/plain; charset="utf-8"

Hallo Sacha

AFAIK the functions in FactoMineR do not enable to manipulate label size. Plot
is performed by this part:

if (graph & (ncp > 1)) {
        print(plot(res, axes = axes))
        if (!is.null(quanti.sup))
            print(plot(res, choix = "quanti.sup", axes = axes,
                new.plot = TRUE))

and the function is not designed to accept additional parameters to manipulate
size of labels.

I struggled with it few years ago and I decided to use biplot instead as it
enables more options.

You can contact maintainers if they consider an improvement in future
versions. Probably simple ... in function definition and print(plot(res, axes
= axes, ...)) addition could do the trick, but I am not sure.

Cheers
Petr

> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of varin sacha via R-
> help
> Sent: Monday, January 23, 2023 7:38 PM
> To: r-help at r-project.org
> Subject: [R] package FactoMineR
>
> Dear R-experts,
>
> Here below the R code working (page 8 https://urldefense.proofpoint.com/v2/url?u=http-3A__www2.uaem.mx_r-2D&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=xKACgL9iNPXeIvE0V5ckPFY1PuPDY-l0gT_UjZwmkr4&e=
> mirror/web/packages/FactoMineR/FactoMineR.pdf).
>
> But I am trying to get all the labels (the writes) : comfort, university,
> economic,
> world, ... smaller. How could I do that ?
>
> Many thanks.
>
> library(FactoMineR)
> data(children)
> res.ca <- CA (children, row.sup = 15:18, col.sup = 6:8)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=WyAtmOvZqkJ83zE98hkQxz9o1I6k6gYj7KJzInNKmcQ&e=
> PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=LvYxgn0N8iyJd6E3RK9ecZ0STO1_BIgO6gtE_zSJv-g&e=
> and provide commented, minimal, self-contained, reproducible code.


------------------------------

Subject: Digest Footer

_______________________________________________
R-help at r-project.org mailing list
https://urldefense.proofpoint.com/v2/url?u=https-3A__stat.ethz.ch_mailman_listinfo_r-2Dhelp&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=WyAtmOvZqkJ83zE98hkQxz9o1I6k6gYj7KJzInNKmcQ&e=
PLEASE do read the posting guide https://urldefense.proofpoint.com/v2/url?u=http-3A__www.R-2Dproject.org_posting-2Dguide.html&d=DwIGaQ&c=27AKQ-AFTMvLXtgZ7shZqsfSXu-Fwzpqk4BoASshREk&r=ug-gw1ia3rShGleyKIdg4GIXRt6aKD3u1CM4odHlsvE&m=FCARkfGgHXcSaTZN1f38_6XCbtZ-Lopl641M4MpApMJf7EuJ7y2Y4873aWz38wiY&s=LvYxgn0N8iyJd6E3RK9ecZ0STO1_BIgO6gtE_zSJv-g&e=
and provide commented, minimal, self-contained, reproducible code.


------------------------------

End of R-help Digest, Vol 239, Issue 24
***************************************

----------------------------------------------------------------------
Confidentiality Notice: This e-mail message, including any attachments, is for the sole use of the intended recipient(s) and may contain confidential and privileged information. Any unauthorized review, use, disclosure or distribution is prohibited. If you are not the intended recipient, please contact the sender by reply e-mail and destroy all copies of the original message.

	[[alternative HTML version deleted]]


From n|ckmwr@y @end|ng |rom gm@||@com  Tue Jan 24 16:29:48 2023
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Tue, 24 Jan 2023 15:29:48 +0000
Subject: [R] yamamoto
Message-ID: <CABxY9BPR5bfbzrvq_JpnxgxgwziAkbuSGBB+omCLpcHbX9oXHA@mail.gmail.com>

Hello I am trying to use the yamamoto function, as given in an example: on
this site:
R: Yamamoto (r-project.org)
<https://search.r-project.org/CRAN/refmans/BreakPoints/html/yamamoto.html>

but it doesn't seem to give the package when the function comes and it
doesn't work in base.  I can't actually find which package (I assume that
it is in a package) it is within.  I've tried "mediation2 and that doesn't
work.  Can anyone help? Thanks Nick WQray

	[[alternative HTML version deleted]]


From n|ckmwr@y @end|ng |rom gm@||@com  Tue Jan 24 16:32:21 2023
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Tue, 24 Jan 2023 15:32:21 +0000
Subject: [R] Scrub last query on yamamoto
Message-ID: <CABxY9BOiLYLtx4WmP3MWB1-uq=b-nmUXa0OCd9-W4ZnpQvZrNg@mail.gmail.com>

Ach please scrub my last email - I didn't realise that the package name was
given without it being expicit in the site quoted
Sorry Nick Wray

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Jan 24 16:47:24 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 24 Jan 2023 10:47:24 -0500
Subject: [R] yamamoto
In-Reply-To: <CABxY9BPR5bfbzrvq_JpnxgxgwziAkbuSGBB+omCLpcHbX9oXHA@mail.gmail.com>
References: <CABxY9BPR5bfbzrvq_JpnxgxgwziAkbuSGBB+omCLpcHbX9oXHA@mail.gmail.com>
Message-ID: <09f76130-f666-2aea-9042-2b49635def48@gmail.com>

On 24/01/2023 10:29 a.m., Nick Wray wrote:
> Hello I am trying to use the yamamoto function, as given in an example: on
> this site:
> R: Yamamoto (r-project.org)
> <https://search.r-project.org/CRAN/refmans/BreakPoints/html/yamamoto.html>
> 
> but it doesn't seem to give the package when the function comes and it
> doesn't work in base.  I can't actually find which package (I assume that
> it is in a package) it is within.  I've tried "mediation2 and that doesn't
> work.  Can anyone help? Thanks Nick WQray

The help page convention is to list the package after the function on 
the top line.  So "yamamoto {BreakPoints}" indicates that the function 
is in the BreakPoints package.

Duncan Murdoch


From L@urentRHe|p @end|ng |rom |ree@|r  Tue Jan 24 20:00:49 2023
From: L@urentRHe|p @end|ng |rom |ree@|r (Laurent Rhelp)
Date: Tue, 24 Jan 2023 20:00:49 +0100
Subject: [R] 
 lattice xyplot: trouble about the use of yscale.components to
 start the yscale from zero
In-Reply-To: <CADfFDC5kQd6=pX_DiNXGWg3kjhUeunCQvnFRGWbVOuwfvG1NYw@mail.gmail.com>
References: <d7938db4-5d8d-0268-1fbd-419cd57ff1a2@free.fr>
 <CADfFDC5kQd6=pX_DiNXGWg3kjhUeunCQvnFRGWbVOuwfvG1NYw@mail.gmail.com>
Message-ID: <e9abdb04-aa80-ad98-0d0d-f6a8c4b78082@free.fr>

Thank you very much for the typo !! and the example about the 
consequences.? I did not know about the option warnPartialMatchDollar = 
TRUE, I tested it with my mistake it is very effective indeed. This 
option should be TRUE by default.

I edited my mistake but there is still the trouble, the labels do not 
appear on the y-axis if I keep ylim = c(0,max(lim)). But nevermind 
because your solution to use prepanel works very well and I will think 
next time to use prepanel.

Best regards
L.



Le 22/01/2023 ? 18:43, Deepayan Sarkar a ?crit?:
>
>
> On Sun, Jan 22, 2023 at 6:48 PM Laurent Rhelp <LaurentRHelp at free.fr> 
> wrote:
>
>     Dear RHelp-list,
>
>     ??I want to choice my scale for every panel in a lattice graph
>     according to
>     ??the ylim range of every panel, with 10 ticks and with a start
>     from 0.
>     Also I want to plot a grid
>     ?? according to the y ticks (I did that in the panel argument with
>     the
>     panel.abline function) .
>     ??So I decided to use the yscale.components argument and I write the
>     script below.
>     ??Before using the pretty function I introduce the 0 value in my
>     range but
>     it does not work : the labels are not displayed and the
>     panel.abline do
>     nothing. I am not able to understand why.
>     ?? If I comment the line ylim <- c(0,max(lim)) the labels appear
>     but of
>     course they do not start from 0.
>
>
> You have mistyped
>
> ? ans$left$ticks$at <- tick.at <http://tick.at>
>
> as
>
> ? ans$left$tick$at <- tick.at <http://tick.at>
>
> You might think that partial matching will help you, but partial 
> matching doesn't work for assignment (for obvious reasons). Consider
>
> > foo <- list(ticks = list(at = 1:10))
> > foo$tick$at <- "bar"
> > str(foo)
> List of 2
> ?$ ticks:List of 1
> ? ..$ at: int [1:10] 1 2 3 4 5 6 7 8 9 10
> ?$ tick :List of 1
> ? ..$ at: chr "bar"
>
> I don't know if there is a good argument for this assignment to work 
> at all (other than that NULL and an empty list are conceptually 
> equivalent), but it is what it is.
>
> This is why I tend to set options(warnPartialMatchDollar = TRUE). In 
> this case it would give you an inaccurate warning, but at least it 
> will give you a warning.
>
> As for the range of the scales, these are determined by 'ylim' and 
> 'prepanel', so you would need to specify one of these.
>
> As you are using scales$axs = "i", you can simply provide ylim = c(0, 
> NA), which forces the lower limit to 0, and lets the upper limit be 
> decided as usual.
>
> For finer control, you can specify a prepanel function, e.g.,
>
> prepanel = function(x, y, ...) list(ylim = c(0, max(y)))
>
> Hope this helps,
>
> Best,
> -Deepayan
>
>
>     Thank you for your help.
>
>     Laurent
>
>
>     ??--------------------------o<----------------------------------------------->o-----------------------------------------
>     library(lattice)
>     library(zoo)
>     ##
>     ## Rq : mydata is a zoo object
>     ##
>     mydata <- structure(c(0.190991684047867, 0.186639474048368,
>     0.188562286982088,
>     ???????????? 0.187781290093149, 0.188242724296645, 0.190412570465429,
>     0.188922969182772,
>     ???????????? 0.194037520889193, 0.191973884842229, 0.197032138922638,
>     1.03204611806177,
>     ???????????? 1.02831610106898, 1.0280323738983, 1.03595907392095,
>     1.03316162925952,
>     ???????????? 1.04755124287765, 1.04403986225312, 1.05686325668364,
>     1.04672225664295,
>     ???????????? 1.05462971668107), dim = c(10L, 2L), dimnames =
>     list(c("f1",
>     ????????? "f1", "f1", "f1", "f1", "f1", "f1", "f1", "f1", "f1"),
>     c("col1","col2"))
>     ????????? , index = c(1.27904891967773, 1.27909898757935,
>     1.27915000915527
>     ?????? , 1.27920007705688, 1.2792489528656, 1.27929902076721,
>     1.27935004234314
>     ?????? ,1.27939891815186, 1.27944993972778, 1.27950000762939),
>     class =
>     "zoo")
>
>     options(digits=17)
>
>     yscale.components.n.ticks <- function(lim,...){
>
>     ?? ans <- yscale.components.default(lim = lim,...)
>     ?? ylim <- lim
>     ?? ## I want to start from 0
>     ?? ylim <- c(0,max(lim))
>     tick.at <http://tick.at> <- pretty(ylim, n=10, min.n = 9)
>     ??? cat("lim yscale : ",ylim,"\n")
>
>     ?? mylabels_y <- formatC( tick.at <http://tick.at>
>     ????????????????????????? , format = "f"
>     ????????????????????????? , digits=3
>     ????????????????????????? , width=9
>     ????????????????????????? ,flag=" ")
>
>     ?? print(cbind( mylabels_y = mylabels_y, tick.at_y = tick.at
>     <http://tick.at>))
>
>     ?? ans$left$tick$at <- tick.at <http://tick.at>
>     ?? ans$left$labels$at <- tick.at <http://tick.at>
>     ?? ans$left$labels$labels <- mylabels_y
>     ?? ans
>     }
>
>
>     xscale.components.n.ticks <- function(lim, ... ){
>
>     ?? ans <- xscale.components.default(lim = lim,...)
>     tick.at <http://tick.at> <- pretty(lim,20,9)
>     ?? mylabels_x <- formatC( tick.at <http://tick.at>
>     ????????????????????????? , format = "f"
>     ????????????????????????? , digits=6
>     ????????????????????????? , width=9
>     ????????????????????????? , flag=" ")
>
>     ?? print(cbind( mylabels_x = mylabels_x, tick.at_x = tick.at
>     <http://tick.at>))
>
>     ?? ans$bottom$tick$at <- tick.at <http://tick.at>
>     ?? ans$bottom$labels$at <- tick.at <http://tick.at>
>     ?? ans$bottom$labels$labels <- mylabels_x
>     ?? ans
>     }
>
>     # to see the x values
>     time(mydata)
>
>     gr <- xyplot(? mydata
>     ??????????????? , main = "title"
>     ??????????????? , layout = c(1,2)
>     ??????????????? , pch = 20
>     ??????????????? , panel = function(...) {
>
>     ????????????????? ylim <- current.panel.limits()$ylim
>     ????????????????? xlim <- current.panel.limits()$xlim
>
>     ????????????????? ## I create here the same ticks that those created
>     ????????????????? ##? in xscale.components and yscale.components
>     ????? ???????? ? ylim <- c(0,max(ylim))
>     ???????????????? cat("ylim panel : ",ylim,"\n")
>     y.tick.at <http://y.tick.at> <- pretty(ylim,10,9)
>     ???????????????? print(cbind(y.tick.at.panel= y.tick.at
>     <http://y.tick.at>))
>
>     x.tick.at <http://x.tick.at> <- pretty(xlim,20,9)
>
>     ???????????????? panel.abline( h = y.tick.at <http://y.tick.at>, v
>     = x.tick.at <http://x.tick.at>, col =
>     "lightgrey")
>
>     ????????????????? panel.xyplot(...)
>     ??????????????? }
>     ##?????????????? , ylim = c(0,1.5)
>     ??????????????? , scales = list(
>     ????????????????? y= list(?? relation = "free"
>     ?????????????????????????? , axs="i"
>     ?????????????????????????? , rot = 45
>     ?????????????????????????? ),
>     ????????????????? x = list(
>     ????????????????????????????? axs="i"
>     ??????????????????????????? , rot = 90
>     ?????????????????????????? )
>     ??????????????? )
>     ??????????????? , yscale.components = yscale.components.n.ticks
>     ??????????????? , xscale.components = xscale.components.n.ticks
>
>     )
>
>     print(gr)
>
>     -- 
>     Cet e-mail a ?t? v?rifi? par le logiciel antivirus d'Avast.
>     www.avast.com <http://www.avast.com>
>
>     ______________________________________________
>     R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>     and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |eo@m@d@ @end|ng |rom @yon|c@eu  Tue Jan 24 21:26:34 2023
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leonard Mada)
Date: Tue, 24 Jan 2023 22:26:34 +0200
Subject: [R] Covid-19 Variants & Lineages
Message-ID: <f89f1873-eaa4-4d6a-0d2d-a2514998ca46@syonic.eu>

Dear R-Users,

1.) Is there a package which gives the full code of a Covid-19 
lineage/variant?

E.g. Omicron = B.1.1.529, while BA correspond to specific subtypes of 
Omicron:
BA.x:
BA.1 = B.1.1.529.1;
BA.1.1 = B.1.1.529.1.1;
BA.1.1.5 = B.1.1.529.1.1.5;

Is there any package to offer such trans-coding functionality? And 
possibly warn if the lineage has been withdrawn?

The full list is available on GitHub:
https://github.com/cov-lineages/pango-designation/blob/master/lineage_notes.txt
Some of the lineages are reassigned or withdrawn. It seems feasible to 
process this list.

2.) Covid Mutations
Is there a package to retrieve the full list of mutations of a specific 
lineage/variant?

E.g. each node in the "tree" B.1.1.529.1.1.5 accumulates 1 or more new 
mutations. It is probably very uncommon for a mutation to get mutated 
back; so the mutations accumulate.

The data on the NCBI page "Explore in SARS-CoV-2 Variants Overview" 
seems very difficult to download:
https://www.ncbi.nlm.nih.gov/activ
E.g.: (in the lower-left corner, but impossible to copy)
NSP1: S135R
NSP13: R392C
[...]


Maybe there is a package already offering such functionality. I am now 
looking over the documentation of the COVID19.Analytics package, but I 
may miss the relevant functions.


Sincerely,


Leonard


From kry|ov@r00t @end|ng |rom gm@||@com  Tue Jan 24 22:29:23 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 25 Jan 2023 00:29:23 +0300
Subject: [R] Covid-19 Variants & Lineages
In-Reply-To: <f89f1873-eaa4-4d6a-0d2d-a2514998ca46@syonic.eu>
References: <f89f1873-eaa4-4d6a-0d2d-a2514998ca46@syonic.eu>
Message-ID: <20230125002923.4bde7acd@Tarkus>

On Tue, 24 Jan 2023 22:26:34 +0200
Leonard Mada via R-help <r-help at r-project.org> wrote:

> The data on the NCBI page "Explore in SARS-CoV-2 Variants Overview" 
> seems very difficult to download:
> https://www.ncbi.nlm.nih.gov/activ
> E.g.: (in the lower-left corner, but impossible to copy)
> NSP1: S135R
> NSP13: R392C

The page has a "download" button, which requests
https://www.ncbi.nlm.nih.gov/genomes/VirusVariation/activ/?report=download_lineages
and offers to save it as "lineages.csv".

I think that the information you're looking for is available if you
feed this URL to read.csv() and look at the aa_definition column.

-- 
Best regards,
Ivan


From d@v|d@@teven@ @end|ng |rom u@u@edu  Tue Jan 24 22:33:48 2023
From: d@v|d@@teven@ @end|ng |rom u@u@edu (David Stevens)
Date: Tue, 24 Jan 2023 21:33:48 +0000
Subject: [R] Plotmath isn't working for special characters
Message-ID: <19b767c3-657e-3521-7b01-8d18b0c232b5@usu.edu>

Simple expressions on plots, such as parse(text='x >= y') have been 
resulting in just a placeholder box (x box y and not the symbol) in my R 
plot labels in windows, R v 4.2.2. I haven't down an exhaustive test but 
<= and >= have this behavior.

plot(1,1,main=parse(text="x >= y"))

Has anyone else seen this?

best

David

-- 
David K Stevens, PhD, PE, Professor
Civil and Environmental Engineering
Utah Water Research Laboratory
Utah State University
8200 Old Main Hill
Logan, UT 84322-8200
david.stevens at usu.edu
(435) 797-3229 (office)


From @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org  Tue Jan 24 22:53:48 2023
From: @pencer@gr@ve@ @end|ng |rom e||ect|vede|en@e@org (Spencer Graves)
Date: Tue, 24 Jan 2023 15:53:48 -0600
Subject: [R] Plotmath isn't working for special characters
In-Reply-To: <19b767c3-657e-3521-7b01-8d18b0c232b5@usu.edu>
References: <19b767c3-657e-3521-7b01-8d18b0c232b5@usu.edu>
Message-ID: <6620d30e-b425-596c-14bc-9028195bff21@effectivedefense.org>



On 1/24/23 3:33 PM, David Stevens wrote:
> Simple expressions on plots, such as parse(text='x >= y') have been
> resulting in just a placeholder box (x box y and not the symbol) in my R
> plot labels in windows, R v 4.2.2. I haven't down an exhaustive test but
> <= and >= have this behavior.
> 
> plot(1,1,main=parse(text="x >= y"))
> 
> Has anyone else seen this?


	  What's your "sessionInfo()"?


	  I got the symbol, not problem.  Spencer Graves


sessionInfo()
R version 4.2.2 (2022-10-31)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Big Sur 11.7.2

Matrix products: default
LAPACK: 
/Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods
[7] base

loaded via a namespace (and not attached):
[1] compiler_4.2.2  tools_4.2.2     rstudioapi_0.14
[4] remotes_2.4.2
 > >
> best
> 
> David
>


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Tue Jan 24 22:55:15 2023
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Tue, 24 Jan 2023 22:55:15 +0100
Subject: [R] package FactoMineR
In-Reply-To: <8e2fa4fe9f284e08b236e9b9f1dbd94a@SRVEXCHCM1302.precheza.cz>
References: <8e2fa4fe9f284e08b236e9b9f1dbd94a@SRVEXCHCM1302.precheza.cz>
Message-ID: <CADD489B-A74F-43BD-A519-90C7A8900810@yahoo.fr>

Dear Petr,
Dear Rui,

Thanks for your response. I will thus try biplot thanks for the advice.

Best,
Sacha 

Envoy? de mon iPhone

> Le 24 janv. 2023 ? 11:09, PIKAL Petr <petr.pikal at precheza.cz> a ?crit :
> 
> ?Hallo Sacha
> 
> AFAIK the functions in FactoMineR do not enable to manipulate label size. Plot 
> is performed by this part:
> 
> if (graph & (ncp > 1)) {
>        print(plot(res, axes = axes))
>        if (!is.null(quanti.sup))
>            print(plot(res, choix = "quanti.sup", axes = axes,
>                new.plot = TRUE))
> 
> and the function is not designed to accept additional parameters to manipulate 
> size of labels.
> 
> I struggled with it few years ago and I decided to use biplot instead as it 
> enables more options.
> 
> You can contact maintainers if they consider an improvement in future 
> versions. Probably simple ... in function definition and print(plot(res, axes 
> = axes, ...)) addition could do the trick, but I am not sure.
> 
> Cheers
> Petr
> 
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of varin sacha via R-
>> help
>> Sent: Monday, January 23, 2023 7:38 PM
>> To: r-help at r-project.org
>> Subject: [R] package FactoMineR
>> 
>> Dear R-experts,
>> 
>> Here below the R code working (page 8 http://www2.uaem.mx/r-
>> mirror/web/packages/FactoMineR/FactoMineR.pdf).
>> 
>> But I am trying to get all the labels (the writes) : comfort, university, 
>> economic,
>> world, ... smaller. How could I do that ?
>> 
>> Many thanks.
>> 
>> library(FactoMineR)
>> data(children)
>> res.ca <- CA (children, row.sup = 15:18, col.sup = 6:8)
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From r@turner @end|ng |rom @uck|@nd@@c@nz  Tue Jan 24 22:57:16 2023
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Wed, 25 Jan 2023 10:57:16 +1300
Subject: [R] Partial matching with $ extractor.
Message-ID: <20230125105716.7858fae7@rolf-Latitude-E7470>


Has something changed, but I missed it?

My recollection is that $ extraction used partial matching.

E.g. if one did

    junk <- list(yuck=1,yurk=2,y=3)
    junk$y

then one would get 1 as the result; probably *not* the desired result.
See fortunes::fortune("toad").

To get the desired result, one would need to use junk[["y"]].

Likewise junk$yu would give 1; to get the value of "yurk", one would
need to use junk$yur or junk$yurk or (better?) junk[["yurk"]].

However, either my recollection is wrong, or something has changed.
When I do junk$y I get 3 (the "right" answer; the same as junk[["y"]]).
When I do junk$yu I get NULL (just as if I'd done junk[["yu"]]).

So: has something changed, or am I miss-remembering, or am I completely
confused about the whole issue?

Thanks for any enlightenment.

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From tz|yun2 @end|ng |rom gm@||@com  Tue Jan 24 22:59:21 2023
From: tz|yun2 @end|ng |rom gm@||@com (Ziyun Tang)
Date: Tue, 24 Jan 2023 16:59:21 -0500
Subject: [R] Flickering when scrolling in R graphics windows
In-Reply-To: <25551.43490.524282.598327@stat.math.ethz.ch>
References: <CAM-2newL_1zFzxpcOuv4bFbmCHTr5E_DZWi__GSdrku=Er1PJQ@mail.gmail.com>
 <25551.43490.524282.598327@stat.math.ethz.ch>
Message-ID: <CAM-2neyvg2Nwb_h7EFEv-m2MhBJ53SJo61n7m8iFrWmUqzx-cg@mail.gmail.com>

On Tue, Jan 24, 2023 at 4:50 AM Martin Maechler
<maechler at stat.math.ethz.ch> wrote:
>
> >>>>> Ziyun Tang
> >>>>>     on Sat, 21 Jan 2023 15:14:15 -0500 writes:
>
>     > Hello, I have been experiencing some issues regarding scrolling with
>     > the mouse or trackpad in R graphics windows (from the base graphics
>     > package), which sometimes results in flickering, and wanted to see if
>     > anyone else had the same issues, or any advice. This happens for R
>     > version 4.2.2 on Windows 10 x64, and occurs when using Rgui and at the
>     > command line (whenever graphics windows are invoked). Note that some
>     > of the example code below can cause flickering and can be an issue for
>     > those with photosensitive epilepsy.
>
>     > Specifically, I have been experiencing three main issues, as follows:
>
>     > 1. When viewing a dataset with View(), the graphics window flickers
>     > when scrolling downwards too quickly, even with the option
>     > buffered=TRUE. For example:
>     >> View(iris)
>
> If you use [Page Up]  and [Page Down]  there is no "flickering",
> also using the cursor (up/down "arrows").
> Still here, I would not think anything to be "wrong".
> If you tell the computer to refresh a screen more quickly than
> makes sense I guess you must expect what you see here.
> (but yes, more modern GUIs would do 'smooth scrolling' here; I
>  think that's not available for the graphapp GUI in R for Windows)
>
> By "scrolling", what exactly do you mean?
> Is it that you use your mouse "wheel"? ...  I assume "yes" in
> the following, because in that case I can partly reproduce what
> you describe.

I am seeing that [Page Up], [Page Down] and the cursor still seem to
have some flickering when pressed continuously. And yes, by
"scrolling" I mean with the mouse wheel, and also with two-finger
scrolling via the trackpad, and for the first issue, with the
scrollbar.

>     > 2. When viewing a graph with plot(), and scrolling down, the graphics
>     > window flickers between the background and the graph itself. For
>     > example:
>     >> plot(iris$Sepal.Length, iris$Sepal.Width)
>
> At first I wrote
>    I don't understand how you can "scroll down" in this plot
>
> but now that I've guessed you mean "mouse wheel scrolling" I can
> indeed see what you describe.
>
>     > 3. When viewing a matrix of scatterplots with pairs(), and scrolling
>     > down, the graphics window flickers between the background and the
>     > individual scatterplots. In some instances, when scrolling down with
>     > the trackpad, the window flickers continuously, and subsequently
>     > closing the window crashes R. For example:
>     >> pairs(iris[1:4])
>
> That you bring R to crash just by "scrolling" really seems a bad
> thing and points to a bug.
> OTOH, I have not been able to replicate a crash.

I have retried the example code, and I've found that usually the
flickering/updating eventually settles on one panel of the matrix.
However, when the panel plots are continuously updating, and if the
plot window is closed before it has settled, then R will crash.

> I don't know what mouse-wheel-scrolling should do in a graphics window
> in R for Windows.
> In our terminal server version of Windows,
> using Rterm (via ESS = Emacs Speaks Statistics), I can indeed
> see that  mouse-scrolling in a graphics window has *very funny*
> / strange effects when using the default interactive graphics
> device ( .Device == "windows" ) :
>
> Notably, after say   pairs(iris)    mouse-wheel-scrolling
> "kind of" redraws some of the panel plots mostly in full size
> (instead of the size they were as panels and as part of the full
> "pairs" i.e., scatter plot matrix.
>
> If instead I use RStudio and their own device "RD<something>"
> mouse-wheel-scrolling has no effect, e.g., after  pairs(iris).
> And "no effect" is clearly better than what we observe with the R
> default device "windows" i.e., windows() in the above situation.

>     > My sessionInfo() is as follows:
>
>     > R version 4.2.2 (2022-10-31 ucrt)
>     > Platform: x86_64-w64-mingw32/x64 (64-bit)
>     > Running under: Windows 10 x64 (build 19044)
>
>     > Matrix products: default
>
>     > locale:
>     > [1] LC_COLLATE=English_United States.utf8
>     > [2] LC_CTYPE=English_United States.utf8
>     > [3] LC_MONETARY=English_United States.utf8
>     > [4] LC_NUMERIC=C
>     > [5] LC_TIME=English_United States.utf8
>
>     > attached base packages:
>     > [1] stats     graphics  grDevices utils     datasets  methods   base
>
>     > loaded via a namespace (and not attached):
>     > [1] compiler_4.2.2 tools_4.2.2
>
>     > Thank you in advance,
>     > Ziyun

I'm unsure how to identify the device used by RStudio, but when
viewing RStudio plots in the "Plots" tab I have also seen that
mouse-wheel-scrolling and trackpad-scrolling have no effect for
pairs(iris).


From @kw@|mmo @end|ng |rom gm@||@com  Tue Jan 24 23:12:13 2023
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Tue, 24 Jan 2023 17:12:13 -0500
Subject: [R] Partial matching with $ extractor.
In-Reply-To: <20230125105716.7858fae7@rolf-Latitude-E7470>
References: <20230125105716.7858fae7@rolf-Latitude-E7470>
Message-ID: <CAPcHnpQ7q6LyCkCgb5nqy+xLhYCDPporgsauuu5iGjO+meLNCA@mail.gmail.com>

junk$y extracts the element named "y" because it found an exact match for
the name.

junk$yu extracts nothing because it does not find an exact match and finds
multiple partial matches.

junk$yuc or junk$yur would work because it finds no exact match and then
exactly one partial match.

On Tue, Jan 24, 2023, 17:04 Rolf Turner <r.turner at auckland.ac.nz> wrote:

>
> Has something changed, but I missed it?
>
> My recollection is that $ extraction used partial matching.
>
> E.g. if one did
>
>     junk <- list(yuck=1,yurk=2,y=3)
>     junk$y
>
> then one would get 1 as the result; probably *not* the desired result.
> See fortunes::fortune("toad").
>
> To get the desired result, one would need to use junk[["y"]].
>
> Likewise junk$yu would give 1; to get the value of "yurk", one would
> need to use junk$yur or junk$yurk or (better?) junk[["yurk"]].
>
> However, either my recollection is wrong, or something has changed.
> When I do junk$y I get 3 (the "right" answer; the same as junk[["y"]]).
> When I do junk$yu I get NULL (just as if I'd done junk[["yu"]]).
>
> So: has something changed, or am I miss-remembering, or am I completely
> confused about the whole issue?
>
> Thanks for any enlightenment.
>
> cheers,
>
> Rolf Turner
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Tue Jan 24 23:16:44 2023
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Tue, 24 Jan 2023 17:16:44 -0500
Subject: [R] Partial matching with $ extractor.
In-Reply-To: <20230125105716.7858fae7@rolf-Latitude-E7470>
References: <20230125105716.7858fae7@rolf-Latitude-E7470>
Message-ID: <CAPcHnpSixxboehOh+TMGepYS-G7FEikpF3VvGJppDqBdyD4r0Q@mail.gmail.com>

I tried this again with R 2.15.3, the oldest version I have installed,
and I still got the same behaviour. It extracts the first exact match,
then the only partial match, then NULL.

On Tue, Jan 24, 2023 at 5:04 PM Rolf Turner <r.turner at auckland.ac.nz> wrote:
>
>
> Has something changed, but I missed it?
>
> My recollection is that $ extraction used partial matching.
>
> E.g. if one did
>
>     junk <- list(yuck=1,yurk=2,y=3)
>     junk$y
>
> then one would get 1 as the result; probably *not* the desired result.
> See fortunes::fortune("toad").
>
> To get the desired result, one would need to use junk[["y"]].
>
> Likewise junk$yu would give 1; to get the value of "yurk", one would
> need to use junk$yur or junk$yurk or (better?) junk[["yurk"]].
>
> However, either my recollection is wrong, or something has changed.
> When I do junk$y I get 3 (the "right" answer; the same as junk[["y"]]).
> When I do junk$yu I get NULL (just as if I'd done junk[["yu"]]).
>
> So: has something changed, or am I miss-remembering, or am I completely
> confused about the whole issue?
>
> Thanks for any enlightenment.
>
> cheers,
>
> Rolf Turner
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Phone: +64-9-373-7599 ext. 88276
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From |eo@m@d@ @end|ng |rom @yon|c@eu  Tue Jan 24 23:56:03 2023
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leonard Mada)
Date: Wed, 25 Jan 2023 00:56:03 +0200
Subject: [R] Covid-19 Variants & Lineages
In-Reply-To: <20230125002923.4bde7acd@Tarkus>
References: <f89f1873-eaa4-4d6a-0d2d-a2514998ca46@syonic.eu>
 <20230125002923.4bde7acd@Tarkus>
Message-ID: <08948643-fd33-e90d-ed9e-9404ac7e4ab1@syonic.eu>

Dear Ivan,


Thank you very much.


Indeed, I missed the download button. The csv file seems to contain all 
the mutations in a usable format.


Sincerely,


Leonard


On 1/24/2023 11:29 PM, Ivan Krylov wrote:
> On Tue, 24 Jan 2023 22:26:34 +0200
> Leonard Mada via R-help <r-help at r-project.org> wrote:
>
>> The data on the NCBI page "Explore in SARS-CoV-2 Variants Overview"
>> seems very difficult to download:
>> https://www.ncbi.nlm.nih.gov/activ
>> E.g.: (in the lower-left corner, but impossible to copy)
>> NSP1: S135R
>> NSP13: R392C
> The page has a "download" button, which requests
> https://www.ncbi.nlm.nih.gov/genomes/VirusVariation/activ/?report=download_lineages
> and offers to save it as "lineages.csv".
>
> I think that the information you're looking for is available if you
> feed this URL to read.csv() and look at the aa_definition column.
>


From r@turner @end|ng |rom @uck|@nd@@c@nz  Wed Jan 25 00:06:47 2023
From: r@turner @end|ng |rom @uck|@nd@@c@nz (Rolf Turner)
Date: Wed, 25 Jan 2023 12:06:47 +1300
Subject: [R] Partial matching with $ extractor.
In-Reply-To: <CAPcHnpSixxboehOh+TMGepYS-G7FEikpF3VvGJppDqBdyD4r0Q@mail.gmail.com>
References: <20230125105716.7858fae7@rolf-Latitude-E7470>
 <CAPcHnpSixxboehOh+TMGepYS-G7FEikpF3VvGJppDqBdyD4r0Q@mail.gmail.com>
Message-ID: <20230125120647.01dc2dfa@rolf-Latitude-E7470>


On Tue, 24 Jan 2023 17:16:44 -0500
Andrew Simmons <akwsimmo at gmail.com> wrote:

> I tried this again with R 2.15.3, the oldest version I have installed,
> and I still got the same behaviour. It extracts the first exact match,
> then the only partial match, then NULL.

Thanks for that.

I am *sure* that I had problems with lists (say "xxx") that had entries
"ylengths" and (later) "y".  I got into trouble when I did xxx$y.  This
produced the value of xxx[["ylengths"]], not of xxx[["y"]], which of
course caused chaos.

Now xxx$y produces xxx[["y"]] as desired.

But you say that nothing has changed!

The only explanation that I can think of is that the Universe
(including its past) has changed, while I wasn't looking.  That
seems to keep happening to me! :-)  (Cf. "The Lathe of Heaven" by
Ursula le Guin.)

cheers,

Rolf

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Phone: +64-9-373-7599 ext. 88276


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jan 25 00:33:10 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 24 Jan 2023 15:33:10 -0800
Subject: [R] Plotmath isn't working for special characters
In-Reply-To: <19b767c3-657e-3521-7b01-8d18b0c232b5@usu.edu>
References: <19b767c3-657e-3521-7b01-8d18b0c232b5@usu.edu>
Message-ID: <CAGxFJbRKQvDcHHFYsDQrkiL-ywpNk5UMqvy8D44XoJocTLhPjg@mail.gmail.com>

Also works for me on a Mac Ventura in the RStudio graphics device. Just for
the heckuva it, does
plot(1,1,main= quote( x >= y ))
work? I shouldn't think so, but ...

Cheers,
Bert



On Tue, Jan 24, 2023 at 1:43 PM David Stevens <david.stevens at usu.edu> wrote:

> Simple expressions on plots, such as parse(text='x >= y') have been
> resulting in just a placeholder box (x box y and not the symbol) in my R
> plot labels in windows, R v 4.2.2. I haven't down an exhaustive test but
> <= and >= have this behavior.
>
> plot(1,1,main=parse(text="x >= y"))
>
> Has anyone else seen this?
>
> best
>
> David
>
> --
> David K Stevens, PhD, PE, Professor
> Civil and Environmental Engineering
> Utah Water Research Laboratory
> Utah State University
> 8200 Old Main Hill
> Logan, UT 84322-8200
> david.stevens at usu.edu
> (435) 797-3229 (office)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From r@oknz @end|ng |rom gm@||@com  Wed Jan 25 07:20:48 2023
From: r@oknz @end|ng |rom gm@||@com (Richard O'Keefe)
Date: Wed, 25 Jan 2023 19:20:48 +1300
Subject: [R] Plotmath isn't working for special characters
In-Reply-To: <CAGxFJbRKQvDcHHFYsDQrkiL-ywpNk5UMqvy8D44XoJocTLhPjg@mail.gmail.com>
References: <19b767c3-657e-3521-7b01-8d18b0c232b5@usu.edu>
 <CAGxFJbRKQvDcHHFYsDQrkiL-ywpNk5UMqvy8D44XoJocTLhPjg@mail.gmail.com>
Message-ID: <CABcYAdJ=KLKBU90AvhcmtWpf=-+MoLWoB3NS=KcMAGEybwX-cQ@mail.gmail.com>

plot(1,1, main=quote(x>=y))
produces the symbol for me.
plot(1,1, main=parse(text="x>=y"))
also produces the symbol.

 setting  value
 version  R version 4.2.2 Patched (2022-11-10 r83330)
 os       Ubuntu 22.04.1 LTS
 system   x86_64, linux-gnu
 ui       X11
 language en_NZ:en
 collate  en_NZ.iso88591
 ctype    en_NZ.iso88591
 tz       Pacific/Auckland
 date     2023-01-25
 pandoc   2.9.2.1 @ /usr/bin/pandoc

- Packages
-------------------------------------------------------------------
 package     * version date (UTC) lib source
 cli           3.4.1   2022-09-23 [1] CRAN (R 4.2.2)
 sessioninfo   1.2.2   2021-12-06 [1] CRAN (R 4.2.2)

 [1] /home/ok/R/x86_64-pc-linux-gnu-library/4.2
 [2] /usr/local/lib/R/site-library
 [3] /usr/lib/R/site-library
 [4] /usr/lib/R/library



On Wed, 25 Jan 2023 at 12:34, Bert Gunter <bgunter.4567 at gmail.com> wrote:

> Also works for me on a Mac Ventura in the RStudio graphics device. Just for
> the heckuva it, does
> plot(1,1,main= quote( x >= y ))
> work? I shouldn't think so, but ...
>
> Cheers,
> Bert
>
>
>
> On Tue, Jan 24, 2023 at 1:43 PM David Stevens <david.stevens at usu.edu>
> wrote:
>
> > Simple expressions on plots, such as parse(text='x >= y') have been
> > resulting in just a placeholder box (x box y and not the symbol) in my R
> > plot labels in windows, R v 4.2.2. I haven't down an exhaustive test but
> > <= and >= have this behavior.
> >
> > plot(1,1,main=parse(text="x >= y"))
> >
> > Has anyone else seen this?
> >
> > best
> >
> > David
> >
> > --
> > David K Stevens, PhD, PE, Professor
> > Civil and Environmental Engineering
> > Utah Water Research Laboratory
> > Utah State University
> > 8200 Old Main Hill
> > Logan, UT 84322-8200
> > david.stevens at usu.edu
> > (435) 797-3229 (office)
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From kry|ov@r00t @end|ng |rom gm@||@com  Wed Jan 25 08:29:48 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Wed, 25 Jan 2023 10:29:48 +0300
Subject: [R] Plotmath isn't working for special characters
In-Reply-To: <19b767c3-657e-3521-7b01-8d18b0c232b5@usu.edu>
References: <19b767c3-657e-3521-7b01-8d18b0c232b5@usu.edu>
Message-ID: <20230125102948.30a680c0@Tarkus>

On Tue, 24 Jan 2023 21:33:48 +0000
David Stevens <david.stevens at usu.edu> wrote:

> Simple expressions on plots, such as parse(text='x >= y') have been 
> resulting in just a placeholder box (x box y and not the symbol) in
> my R plot labels in windows, R v 4.2.2.

Here's a recently fixed bug that may be related:
https://bugs.r-project.org/show_bug.cgi?id=18440

Does the R-patched build work for you?
https://cloud.r-project.org/bin/windows/base/rpatched.html

-- 
Best regards,
Ivan


From tobby @end|ng |rom htu@@t  Wed Jan 25 10:03:01 2023
From: tobby @end|ng |rom htu@@t (Tobias Fellinger)
Date: Wed, 25 Jan 2023 10:03:01 +0100
Subject: [R] as.factor and floating point numbers
Message-ID: <CBC7D0E0-C6E3-4093-B6EB-D376ECBF05D3@htu.at>

Hello,

I'm encountering the following error: 

In a package for survival analysis I use a data.frame is created, one column is created by applying unique on the event times while others are created by running table on the event times and the treatment arm.

When there are event times very close together they are put in the same factor level when coerced to factor while unique outputs both values, leading to different lengths of the columns.

Try this to reproduce: 
x <- c(1, 1+.Machine$double.eps)
unique(x)
table(x)

Is there a general best practice to deal with such issues?

Should calling table on floats be avoided in general?

What can one use instead? 

One could easily iterate over the unique values and compare all values with the whole vector but this are N*N comparisons, compared to N*log(N) when sorting first and taking into account that the vector is sorted.

I think for my purposes I'll round to a hundredth of a day before calling the function, but any advice on avoiding this issue an writing more fault tolerant code is greatly appreciated.

all the best, Tobias


	[[alternative HTML version deleted]]


From @kw@|mmo @end|ng |rom gm@||@com  Wed Jan 25 10:13:08 2023
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Wed, 25 Jan 2023 04:13:08 -0500
Subject: [R] as.factor and floating point numbers
In-Reply-To: <CBC7D0E0-C6E3-4093-B6EB-D376ECBF05D3@htu.at>
References: <CBC7D0E0-C6E3-4093-B6EB-D376ECBF05D3@htu.at>
Message-ID: <CAPcHnpQAwQa3izpsFN3tydTtvXfYy3H58kY+uifGpXAiD+REVw@mail.gmail.com>

R converts floats to strings with ~15 digits of accuracy, specifically
to avoid differentiating between 1 and 1 + .Machine$double.eps, it is
assumed that small differences such as this are due to rounding errors
and are unimportant.

So, if when making your factor, you want all digits, you could write
this: `as.factor(format(x, digits = 17L))`

On Wed, Jan 25, 2023 at 4:03 AM Tobias Fellinger <tobby at htu.at> wrote:
>
> Hello,
>
> I'm encountering the following error:
>
> In a package for survival analysis I use a data.frame is created, one column is created by applying unique on the event times while others are created by running table on the event times and the treatment arm.
>
> When there are event times very close together they are put in the same factor level when coerced to factor while unique outputs both values, leading to different lengths of the columns.
>
> Try this to reproduce:
> x <- c(1, 1+.Machine$double.eps)
> unique(x)
> table(x)
>
> Is there a general best practice to deal with such issues?
>
> Should calling table on floats be avoided in general?
>
> What can one use instead?
>
> One could easily iterate over the unique values and compare all values with the whole vector but this are N*N comparisons, compared to N*log(N) when sorting first and taking into account that the vector is sorted.
>
> I think for my purposes I'll round to a hundredth of a day before calling the function, but any advice on avoiding this issue an writing more fault tolerant code is greatly appreciated.
>
> all the best, Tobias
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Wed Jan 25 13:24:00 2023
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Wed, 25 Jan 2023 12:24:00 +0000
Subject: [R] as.factor and floating point numbers
In-Reply-To: <CAPcHnpQAwQa3izpsFN3tydTtvXfYy3H58kY+uifGpXAiD+REVw@mail.gmail.com>
References: <CBC7D0E0-C6E3-4093-B6EB-D376ECBF05D3@htu.at>
 <CAPcHnpQAwQa3izpsFN3tydTtvXfYy3H58kY+uifGpXAiD+REVw@mail.gmail.com>
Message-ID: <BN6PR2201MB15539137067E4D18F4CB5B2BCFCE9@BN6PR2201MB1553.namprd22.prod.outlook.com>

Another option is to convert all times to base units or the sample rate from the analog-to-digital converter. If this is 100 milliseconds then use milliseconds rather than fractions of an hour or day. This approach might not help if the range in values spans more than 16 digits: slightly finer resolution than one year sampled in microseconds.
Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Andrew Simmons
Sent: Wednesday, January 25, 2023 4:13 AM
To: Tobias Fellinger <tobby at htu.at>
Cc: r-help at r-project.org
Subject: Re: [R] as.factor and floating point numbers

[External Email]

R converts floats to strings with ~15 digits of accuracy, specifically to avoid differentiating between 1 and 1 + .Machine$double.eps, it is assumed that small differences such as this are due to rounding errors and are unimportant.

So, if when making your factor, you want all digits, you could write
this: `as.factor(format(x, digits = 17L))`

On Wed, Jan 25, 2023 at 4:03 AM Tobias Fellinger <tobby at htu.at> wrote:
>
> Hello,
>
> I'm encountering the following error:
>
> In a package for survival analysis I use a data.frame is created, one column is created by applying unique on the event times while others are created by running table on the event times and the treatment arm.
>
> When there are event times very close together they are put in the same factor level when coerced to factor while unique outputs both values, leading to different lengths of the columns.
>
> Try this to reproduce:
> x <- c(1, 1+.Machine$double.eps)
> unique(x)
> table(x)
>
> Is there a general best practice to deal with such issues?
>
> Should calling table on floats be avoided in general?
>
> What can one use instead?
>
> One could easily iterate over the unique values and compare all values with the whole vector but this are N*N comparisons, compared to N*log(N) when sorting first and taking into account that the vector is sorted.
>
> I think for my purposes I'll round to a hundredth of a day before calling the function, but any advice on avoiding this issue an writing more fault tolerant code is greatly appreciated.
>
> all the best, Tobias
>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu
> %7C0195a6c837ad415067ac08dafeb5360b%7C0d4da0f84a314d76ace60a62331e1b84
> %7C0%7C0%7C638102351500433338%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAw
> MDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sda
> ta=%2FqBEN7jKAYswd1Hz5xAvitS3%2F2TEGm%2FweHoUk80sBgs%3D&reserved=0
> PLEASE do read the posting guide 
> https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r
> -project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C01
> 95a6c837ad415067ac08dafeb5360b%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
> 7C0%7C638102351500433338%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
> CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=kn
> %2BJ8XO8XqOpc5cKXJ6%2FDjIBfN9CH9m6qvimXLTwUBg%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://nam10.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstat.ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu%7C0195a6c837ad415067ac08dafeb5360b%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638102351500433338%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=%2FqBEN7jKAYswd1Hz5xAvitS3%2F2TEGm%2FweHoUk80sBgs%3D&reserved=0
PLEASE do read the posting guide https://nam10.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.r-project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C0195a6c837ad415067ac08dafeb5360b%7C0d4da0f84a314d76ace60a62331e1b84%7C0%7C0%7C638102351500433338%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=kn%2BJ8XO8XqOpc5cKXJ6%2FDjIBfN9CH9m6qvimXLTwUBg%3D&reserved=0
and provide commented, minimal, self-contained, reproducible code.


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Jan 25 13:36:12 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 25 Jan 2023 12:36:12 +0000
Subject: [R] Plotmath isn't working for special characters
In-Reply-To: <6620d30e-b425-596c-14bc-9028195bff21@effectivedefense.org>
References: <19b767c3-657e-3521-7b01-8d18b0c232b5@usu.edu>
 <6620d30e-b425-596c-14bc-9028195bff21@effectivedefense.org>
Message-ID: <b58b0427-2a4b-0f4b-f232-acfb3efd37b3@sapo.pt>

?s 21:53 de 24/01/2023, Spencer Graves escreveu:
> 
> 
> On 1/24/23 3:33 PM, David Stevens wrote:
>> Simple expressions on plots, such as parse(text='x >= y') have been
>> resulting in just a placeholder box (x box y and not the symbol) in my R
>> plot labels in windows, R v 4.2.2. I haven't down an exhaustive test but
>> <= and >= have this behavior.
>>
>> plot(1,1,main=parse(text="x >= y"))
>>
>> Has anyone else seen this?
> 
> 
>  ????? What's your "sessionInfo()"?
> 
> 
>  ????? I got the symbol, not problem.? Spencer Graves
> 
> 
> sessionInfo()
> R version 4.2.2 (2022-10-31)
> Platform: x86_64-apple-darwin17.0 (64-bit)
> Running under: macOS Big Sur 11.7.2
> 
> Matrix products: default
> LAPACK: 
> /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib
> 
> locale:
> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> 
> attached base packages:
> [1] stats???? graphics? grDevices utils???? datasets? methods
> [7] base
> 
> loaded via a namespace (and not attached):
> [1] compiler_4.2.2? tools_4.2.2???? rstudioapi_0.14
> [4] remotes_2.4.2
>  > >
>> best
>>
>> David
>>
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

I can reproduce the problem in RGui, R 4.2.2 on Windows 11.
Any of the following solved it.


plot(1,1, main=bquote(x~"\u2265"~y))
plot(1,1, main=expression(x~"\u2265"~y))


Hope this helps,

Rui Barradas


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Wed Jan 25 13:42:58 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Wed, 25 Jan 2023 12:42:58 +0000
Subject: [R] Plotmath isn't working for special characters
In-Reply-To: <b58b0427-2a4b-0f4b-f232-acfb3efd37b3@sapo.pt>
References: <19b767c3-657e-3521-7b01-8d18b0c232b5@usu.edu>
 <6620d30e-b425-596c-14bc-9028195bff21@effectivedefense.org>
 <b58b0427-2a4b-0f4b-f232-acfb3efd37b3@sapo.pt>
Message-ID: <b7573da6-4c22-c5bc-08b7-0465cd9257e7@sapo.pt>

?s 12:36 de 25/01/2023, Rui Barradas escreveu:
> ?s 21:53 de 24/01/2023, Spencer Graves escreveu:
>>
>>
>> On 1/24/23 3:33 PM, David Stevens wrote:
>>> Simple expressions on plots, such as parse(text='x >= y') have been
>>> resulting in just a placeholder box (x box y and not the symbol) in my R
>>> plot labels in windows, R v 4.2.2. I haven't down an exhaustive test but
>>> <= and >= have this behavior.
>>>
>>> plot(1,1,main=parse(text="x >= y"))
>>>
>>> Has anyone else seen this?
>>
>>
>> ?????? What's your "sessionInfo()"?
>>
>>
>> ?????? I got the symbol, not problem.? Spencer Graves
>>
>>
>> sessionInfo()
>> R version 4.2.2 (2022-10-31)
>> Platform: x86_64-apple-darwin17.0 (64-bit)
>> Running under: macOS Big Sur 11.7.2
>>
>> Matrix products: default
>> LAPACK: 
>> /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib
>>
>> locale:
>> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
>>
>> attached base packages:
>> [1] stats???? graphics? grDevices utils???? datasets? methods
>> [7] base
>>
>> loaded via a namespace (and not attached):
>> [1] compiler_4.2.2? tools_4.2.2???? rstudioapi_0.14
>> [4] remotes_2.4.2
>> ?> >
>>> best
>>>
>>> David
>>>
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide 
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> Hello,
> 
> I can reproduce the problem in RGui, R 4.2.2 on Windows 11.
> Any of the following solved it.
> 
> 
> plot(1,1, main=bquote(x~"\u2265"~y))
> plot(1,1, main=expression(x~"\u2265"~y))
> 
> 
> Hope this helps,
> 
> Rui Barradas
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

Sorry, forgot the


sessionInfo()
R version 4.2.2 (2022-10-31 ucrt)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 22621)

Matrix products: default

locale:
[1] LC_COLLATE=Portuguese_Portugal.utf8 
LC_CTYPE=Portuguese_Portugal.utf8
[3] LC_MONETARY=Portuguese_Portugal.utf8 LC_NUMERIC=C 

[5] LC_TIME=Portuguese_Portugal.utf8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_4.2.2


Rui Barradas


From d@v|d@@teven@ @end|ng |rom u@u@edu  Wed Jan 25 15:33:39 2023
From: d@v|d@@teven@ @end|ng |rom u@u@edu (David Stevens)
Date: Wed, 25 Jan 2023 14:33:39 +0000
Subject: [R] Plotmath isn't working for special characters
In-Reply-To: <CAGxFJbRKQvDcHHFYsDQrkiL-ywpNk5UMqvy8D44XoJocTLhPjg@mail.gmail.com>
References: <19b767c3-657e-3521-7b01-8d18b0c232b5@usu.edu>
 <CAGxFJbRKQvDcHHFYsDQrkiL-ywpNk5UMqvy8D44XoJocTLhPjg@mail.gmail.com>
Message-ID: <9efbff03-412b-fcca-39eb-570b13af65b0@usu.edu>

A more extensive test (no=produced an empty box on the plot, yes=produced the intended plotmath result). It appears that plotmath is not producing the special math characters. Greek symbols are produced. I'll try to reinstall R and report back.

David

plot(1,1, main = parse(text = "x >= y")) - no
plot(1,1, main = parse(text = "x == y")) - yes
plot(1,1, main = parse(text = "x <= y")) - no
plot(1,1, main = parse(text = "x ~ y")) - yes
plot(1,1, main = parse(text = "x * y")) - yes
plot(1,1, main = parse(text = "x %~~% y")) - no

plot(1,1, main = bquote(x %~~% y)) - no
plot(1,1, main = bquote(x  %prop% y)) - no

plot(1,1, main = expression(x  %prop% y)) - no
plot(1,1, main = expression(x == y)) - yes
plot(1,1, main = expression(x %+-% y)) - no
plot(1,1, main = expression(integral(f(x)*dx, a, b))) - no
plot(1,1, main = expression(sum(x[i], i==1, n))) - no
plot(1,1, main = expression(x^(y + z))) - yes
plot(1,1, main = expression(inf(x))) - no
plot(1,1, main = expression(x[(y + z)])) - yes

David K Stevens, PhD, PE, Professor
Civil and Environmental Engineering
Utah Water Research Laboratory
Utah State University
8200 Old Main Hill
Logan, UT 84322-8200
david.stevens at usu.edu<mailto:david.stevens at usu.edu>
(435) 797-3229 (office)

On 1/24/2023 3:33 PM, Bert Gunter wrote:
Also works for me on a Mac Ventura in the RStudio graphics device. Just for the heckuva it, does
plot(1,1,main= quote( x >= y ))
work? I shouldn't think so, but ...

Cheers,
Bert



On Tue, Jan 24, 2023 at 1:43 PM David Stevens <david.stevens at usu.edu<mailto:david.stevens at usu.edu>> wrote:
Simple expressions on plots, such as parse(text='x >= y') have been
resulting in just a placeholder box (x box y and not the symbol) in my R
plot labels in windows, R v 4.2.2. I haven't down an exhaustive test but
<= and >= have this behavior.

plot(1,1,main=parse(text="x >= y"))

Has anyone else seen this?

best

David

--
David K Stevens, PhD, PE, Professor
Civil and Environmental Engineering
Utah Water Research Laboratory
Utah State University
8200 Old Main Hill
Logan, UT 84322-8200
david.stevens at usu.edu<mailto:david.stevens at usu.edu>
(435) 797-3229 (office)

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From @w@y @end|ng |rom empowerph@rm@cy@com  Wed Jan 25 15:48:32 2023
From: @w@y @end|ng |rom empowerph@rm@cy@com (Shawn Way)
Date: Wed, 25 Jan 2023 14:48:32 +0000
Subject: [R] Plotmath isn't working for special characters
In-Reply-To: <9efbff03-412b-fcca-39eb-570b13af65b0@usu.edu>
References: <19b767c3-657e-3521-7b01-8d18b0c232b5@usu.edu>
 <CAGxFJbRKQvDcHHFYsDQrkiL-ywpNk5UMqvy8D44XoJocTLhPjg@mail.gmail.com>
 <9efbff03-412b-fcca-39eb-570b13af65b0@usu.edu>
Message-ID: <SA1PR13MB48782AAC2929FAA7A16D2C35C3CE9@SA1PR13MB4878.namprd13.prod.outlook.com>

I see the same thing using 4.2.2 on Windows 10.


Thank you kindly,
Shawn Way, PE???Director of Engineering
Phone: (832) 403-0414
Empower Pharmacy???Expanding Access.
??????

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of David Stevens
Sent: Wednesday, January 25, 2023 8:34 AM
To: Bert Gunter <bgunter.4567 at gmail.com>
Cc: r-help at r-project.org
Subject: Re: [R] Plotmath isn't working for special characters

External Email: This message originated from outside Empower Pharmacy. Please exercise caution before opening attachments, clicking links, replying, or providing information to the sender.


A more extensive test (no=produced an empty box on the plot, yes=produced the intended plotmath result). It appears that plotmath is not producing the special math characters. Greek symbols are produced. I'll try to reinstall R and report back.

David

plot(1,1, main = parse(text = "x >= y")) - no plot(1,1, main = parse(text = "x == y")) - yes plot(1,1, main = parse(text = "x <= y")) - no plot(1,1, main = parse(text = "x ~ y")) - yes plot(1,1, main = parse(text = "x * y")) - yes plot(1,1, main = parse(text = "x %~~% y")) - no

plot(1,1, main = bquote(x %~~% y)) - no
plot(1,1, main = bquote(x  %prop% y)) - no

plot(1,1, main = expression(x  %prop% y)) - no plot(1,1, main = expression(x == y)) - yes plot(1,1, main = expression(x %+-% y)) - no plot(1,1, main = expression(integral(f(x)*dx, a, b))) - no plot(1,1, main = expression(sum(x[i], i==1, n))) - no plot(1,1, main = expression(x^(y + z))) - yes plot(1,1, main = expression(inf(x))) - no plot(1,1, main = expression(x[(y + z)])) - yes

David K Stevens, PhD, PE, Professor
Civil and Environmental Engineering
Utah Water Research Laboratory
Utah State University
8200 Old Main Hill
Logan, UT 84322-8200
david.stevens at usu.edu<mailto:david.stevens at usu.edu>
(435) 797-3229 (office)

On 1/24/2023 3:33 PM, Bert Gunter wrote:
Also works for me on a Mac Ventura in the RStudio graphics device. Just for the heckuva it, does plot(1,1,main= quote( x >= y )) work? I shouldn't think so, but ...

Cheers,
Bert



On Tue, Jan 24, 2023 at 1:43 PM David Stevens <david.stevens at usu.edu<mailto:david.stevens at usu.edu>> wrote:
Simple expressions on plots, such as parse(text='x >= y') have been resulting in just a placeholder box (x box y and not the symbol) in my R plot labels in windows, R v 4.2.2. I haven't down an exhaustive test but <= and >= have this behavior.

plot(1,1,main=parse(text="x >= y"))

Has anyone else seen this?

best

David

--
David K Stevens, PhD, PE, Professor
Civil and Environmental Engineering
Utah Water Research Laboratory
Utah State University
8200 Old Main Hill
Logan, UT 84322-8200
david.stevens at usu.edu<mailto:david.stevens at usu.edu>
(435) 797-3229 (office)

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From br|nk|ey@norton @end|ng |rom bru|n@@be|mont@edu  Tue Jan 24 20:35:52 2023
From: br|nk|ey@norton @end|ng |rom bru|n@@be|mont@edu (Brinkley Norton)
Date: Tue, 24 Jan 2023 19:35:52 +0000
Subject: [R] Shadow Graphics Error in R Studio
Message-ID: <BYAPR06MB6231C27E7F17134C59F5DD93C8C99@BYAPR06MB6231.namprd06.prod.outlook.com>

Good afternoon!

I'm new to R Studio and am encountering a plotting issue. I'm currently using version 4.2.2 on a Mac OSX. RStudio has been deleted and re-downloaded (as per the help pages) yet I am still encountering the same error. The plot works in R but not in R Studio. Here is the code:
----------------------------------------
Input:
plot(mtcars)

Output:
Error in RStudioGD() :   Shadow graphics device error: r error 4 (Error : C stack usage  7969600 is too close to the limit)
----------------------------------------
Is there a way to correct this issue?

Every good wish,

Brinkley Norton

	[[alternative HTML version deleted]]


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Wed Jan 25 17:25:53 2023
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Wed, 25 Jan 2023 17:25:53 +0100
Subject: [R] Plotmath isn't working for special characters
In-Reply-To: <SA1PR13MB48782AAC2929FAA7A16D2C35C3CE9@SA1PR13MB4878.namprd13.prod.outlook.com>
References: <19b767c3-657e-3521-7b01-8d18b0c232b5@usu.edu>
 <CAGxFJbRKQvDcHHFYsDQrkiL-ywpNk5UMqvy8D44XoJocTLhPjg@mail.gmail.com>
 <9efbff03-412b-fcca-39eb-570b13af65b0@usu.edu>
 <SA1PR13MB48782AAC2929FAA7A16D2C35C3CE9@SA1PR13MB4878.namprd13.prod.outlook.com>
Message-ID: <cfc8f788-8e95-f28e-a59a-4abefc2ef81a@statistik.tu-dortmund.de>

Yes, and is is fixed in R-4.2.2-pacthed for soe  time already.

Best,
Uwe Ligges


On 25.01.2023 15:48, Shawn Way wrote:
> I see the same thing using 4.2.2 on Windows 10.
> 
> 
> Thank you kindly,
> Shawn Way, PE???Director of Engineering
> Phone: (832) 403-0414
> Empower Pharmacy???Expanding Access.
>        
> 
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of David Stevens
> Sent: Wednesday, January 25, 2023 8:34 AM
> To: Bert Gunter <bgunter.4567 at gmail.com>
> Cc: r-help at r-project.org
> Subject: Re: [R] Plotmath isn't working for special characters
> 
> External Email: This message originated from outside Empower Pharmacy. Please exercise caution before opening attachments, clicking links, replying, or providing information to the sender.
> 
> 
> A more extensive test (no=produced an empty box on the plot, yes=produced the intended plotmath result). It appears that plotmath is not producing the special math characters. Greek symbols are produced. I'll try to reinstall R and report back.
> 
> David
> 
> plot(1,1, main = parse(text = "x >= y")) - no plot(1,1, main = parse(text = "x == y")) - yes plot(1,1, main = parse(text = "x <= y")) - no plot(1,1, main = parse(text = "x ~ y")) - yes plot(1,1, main = parse(text = "x * y")) - yes plot(1,1, main = parse(text = "x %~~% y")) - no
> 
> plot(1,1, main = bquote(x %~~% y)) - no
> plot(1,1, main = bquote(x  %prop% y)) - no
> 
> plot(1,1, main = expression(x  %prop% y)) - no plot(1,1, main = expression(x == y)) - yes plot(1,1, main = expression(x %+-% y)) - no plot(1,1, main = expression(integral(f(x)*dx, a, b))) - no plot(1,1, main = expression(sum(x[i], i==1, n))) - no plot(1,1, main = expression(x^(y + z))) - yes plot(1,1, main = expression(inf(x))) - no plot(1,1, main = expression(x[(y + z)])) - yes
> 
> David K Stevens, PhD, PE, Professor
> Civil and Environmental Engineering
> Utah Water Research Laboratory
> Utah State University
> 8200 Old Main Hill
> Logan, UT 84322-8200
> david.stevens at usu.edu<mailto:david.stevens at usu.edu>
> (435) 797-3229 (office)
> 
> On 1/24/2023 3:33 PM, Bert Gunter wrote:
> Also works for me on a Mac Ventura in the RStudio graphics device. Just for the heckuva it, does plot(1,1,main= quote( x >= y )) work? I shouldn't think so, but ...
> 
> Cheers,
> Bert
> 
> 
> 
> On Tue, Jan 24, 2023 at 1:43 PM David Stevens <david.stevens at usu.edu<mailto:david.stevens at usu.edu>> wrote:
> Simple expressions on plots, such as parse(text='x >= y') have been resulting in just a placeholder box (x box y and not the symbol) in my R plot labels in windows, R v 4.2.2. I haven't down an exhaustive test but <= and >= have this behavior.
> 
> plot(1,1,main=parse(text="x >= y"))
> 
> Has anyone else seen this?
> 
> best
> 
> David
> 
> --
> David K Stevens, PhD, PE, Professor
> Civil and Environmental Engineering
> Utah Water Research Laboratory
> Utah State University
> 8200 Old Main Hill
> Logan, UT 84322-8200
> david.stevens at usu.edu<mailto:david.stevens at usu.edu>
> (435) 797-3229 (office)
> 
> ______________________________________________
> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
>          [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Wed Jan 25 17:39:37 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 25 Jan 2023 08:39:37 -0800
Subject: [R] Shadow Graphics Error in R Studio
In-Reply-To: <BYAPR06MB6231C27E7F17134C59F5DD93C8C99@BYAPR06MB6231.namprd06.prod.outlook.com>
References: <BYAPR06MB6231C27E7F17134C59F5DD93C8C99@BYAPR06MB6231.namprd06.prod.outlook.com>
Message-ID: <A8F6FBB0-D9C3-4149-9E7E-D6370660A4BB@dcn.davis.ca.us>

If the problem goes away in R but persists in RStudio, then most likely you will need to ask in a forum where RStudio experts hang out, like the RStudio community forum website.

On January 24, 2023 11:35:52 AM PST, Brinkley Norton <brinkley.norton at bruins.belmont.edu> wrote:
>Good afternoon!
>
>I'm new to R Studio and am encountering a plotting issue. I'm currently using version 4.2.2 on a Mac OSX. RStudio has been deleted and re-downloaded (as per the help pages) yet I am still encountering the same error. The plot works in R but not in R Studio. Here is the code:
>----------------------------------------
>Input:
>plot(mtcars)
>
>Output:
>Error in RStudioGD() :   Shadow graphics device error: r error 4 (Error : C stack usage  7969600 is too close to the limit)
>----------------------------------------
>Is there a way to correct this issue?
>
>Every good wish,
>
>Brinkley Norton
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From murdoch@dunc@n @end|ng |rom gm@||@com  Wed Jan 25 17:44:02 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 25 Jan 2023 11:44:02 -0500
Subject: [R] Shadow Graphics Error in R Studio
In-Reply-To: <BYAPR06MB6231C27E7F17134C59F5DD93C8C99@BYAPR06MB6231.namprd06.prod.outlook.com>
References: <BYAPR06MB6231C27E7F17134C59F5DD93C8C99@BYAPR06MB6231.namprd06.prod.outlook.com>
Message-ID: <b192af4f-a699-9b7b-fec1-e3ad433a8ea2@gmail.com>

On 24/01/2023 2:35 p.m., Brinkley Norton wrote:
> Good afternoon!
> 
> I'm new to R Studio and am encountering a plotting issue. I'm currently using version 4.2.2 on a Mac OSX. RStudio has been deleted and re-downloaded (as per the help pages) yet I am still encountering the same error. The plot works in R but not in R Studio. Here is the code:
> ----------------------------------------
> Input:
> plot(mtcars)
> 
> Output:
> Error in RStudioGD() :   Shadow graphics device error: r error 4 (Error : C stack usage  7969600 is too close to the limit)
> ----------------------------------------
> Is there a way to correct this issue?

You'll need to ask the RStudio people; this list is for R.  I think the 
right place to go is community.rstudio.com (but that will eventually 
change; the company has renamed itself to "Posit").

Duncan Murdoch


From v@|ent|n @end|ng |rom petze|@@t  Wed Jan 25 20:59:16 2023
From: v@|ent|n @end|ng |rom petze|@@t (Valentin Petzel)
Date: Wed, 25 Jan 2023 20:59:16 +0100
Subject: [R] as.factor and floating point numbers
In-Reply-To: <CBC7D0E0-C6E3-4093-B6EB-D376ECBF05D3@htu.at>
References: <CBC7D0E0-C6E3-4093-B6EB-D376ECBF05D3@htu.at>
Message-ID: <4795442.GXAFRqVoOG@archbox>

Hello Tobias,

A factor is basically a way to get a character to behave like an integer. It 
consists of an integer with values from 1 to nlev, and a character vector 
levels, specifying for each value a level name.

But this means that factors only really make sense with characters, and 
anything that is not a character will be forced to be a character. Thus two 
values that are represented by the same value in as.character will be treated 
as the same.

Now this is probably reasonable most of the time, as numeric values will 
usually represent metric data, which tends to make little sense as factor. But 
if we want to do this we can easily build or own factors from floats, and even 
write some convenience wrapper around table, as shown in the appended file.

Best regards,
Valentin


Am Mittwoch, 25. J?nner 2023, 10:03:01 CET schrieb Tobias Fellinger:
> Hello,
> 
> I'm encountering the following error:
> 
> In a package for survival analysis I use a data.frame is created, one column
> is created by applying unique on the event times while others are created
> by running table on the event times and the treatment arm.
> 
> When there are event times very close together they are put in the same
> factor level when coerced to factor while unique outputs both values,
> leading to different lengths of the columns.
> 
> Try this to reproduce:
> x <- c(1, 1+.Machine$double.eps)
> unique(x)
> table(x)
> 
> Is there a general best practice to deal with such issues?
> 
> Should calling table on floats be avoided in general?
> 
> What can one use instead?
> 
> One could easily iterate over the unique values and compare all values with
> the whole vector but this are N*N comparisons, compared to N*log(N) when
> sorting first and taking into account that the vector is sorted.
> 
> I think for my purposes I'll round to a hundredth of a day before calling
> the function, but any advice on avoiding this issue an writing more fault
> tolerant code is greatly appreciated.
> 
> all the best, Tobias
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: This is a digitally signed message part.
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20230125/20efc180/attachment.sig>

From tobby @end|ng |rom htu@@t  Wed Jan 25 21:57:33 2023
From: tobby @end|ng |rom htu@@t (Tobias Fellinger)
Date: Wed, 25 Jan 2023 21:57:33 +0100
Subject: [R] as.factor and floating point numbers
In-Reply-To: <4795442.GXAFRqVoOG@archbox>
References: <CBC7D0E0-C6E3-4093-B6EB-D376ECBF05D3@htu.at>
 <4795442.GXAFRqVoOG@archbox>
Message-ID: <3216745.44csPzL39Z@donnager>

Hello, 

I'll reply in one mail to all. 

Thank you for your suggestions. I already tried Andrews solution with 
increasing the digits. In the most extreme case I encountered I had to take 
the maximum possible digits in format but it worked. 

Tims solution is also a good workaround but in this case I would have to know 
much about the user input.

Valentins solution works and is surely the safest of the options but somehow 
more than I need. The case I encountered does not really need to deal with the 
levels, but just with the counts of every unique value across another 
variable.

After thinking about it a little bit longer I came up with another solution 
that works alright for my purposes: I use table on the ranks. Since in the 
case I encountered the vector does not have duplicates and is already sorted, 
I can use table on the ranks of the vector and get the counts in the right 
order.

Thanks Everyone, Tobias

On Mittwoch, 25. J?nner 2023 20:59:16 CET Valentin Petzel wrote:
> Hello Tobias,
> 
> A factor is basically a way to get a character to behave like an integer. It
> consists of an integer with values from 1 to nlev, and a character vector
> levels, specifying for each value a level name.
> 
> But this means that factors only really make sense with characters, and
> anything that is not a character will be forced to be a character. Thus two
> values that are represented by the same value in as.character will be
> treated as the same.
> 
> Now this is probably reasonable most of the time, as numeric values will
> usually represent metric data, which tends to make little sense as factor.
> But if we want to do this we can easily build or own factors from floats,
> and even write some convenience wrapper around table, as shown in the
> appended file.
> 
> Best regards,
> Valentin
> 
> Am Mittwoch, 25. J?nner 2023, 10:03:01 CET schrieb Tobias Fellinger:
> > Hello,
> > 
> > I'm encountering the following error:
> > 
> > In a package for survival analysis I use a data.frame is created, one
> > column is created by applying unique on the event times while others are
> > created by running table on the event times and the treatment arm.
> > 
> > When there are event times very close together they are put in the same
> > factor level when coerced to factor while unique outputs both values,
> > leading to different lengths of the columns.
> > 
> > Try this to reproduce:
> > x <- c(1, 1+.Machine$double.eps)
> > unique(x)
> > table(x)
> > 
> > Is there a general best practice to deal with such issues?
> > 
> > Should calling table on floats be avoided in general?
> > 
> > What can one use instead?
> > 
> > One could easily iterate over the unique values and compare all values
> > with
> > the whole vector but this are N*N comparisons, compared to N*log(N) when
> > sorting first and taking into account that the vector is sorted.
> > 
> > I think for my purposes I'll round to a hundredth of a day before calling
> > the function, but any advice on avoiding this issue an writing more fault
> > tolerant code is greatly appreciated.
> > 
> > all the best, Tobias
> > 
> > 	[[alternative HTML version deleted]]
> > 
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html and provide commented,
> > minimal, self-contained, reproducible code.


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jan 26 01:19:01 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 25 Jan 2023 19:19:01 -0500
Subject: [R] Minimal match to regexp?
Message-ID: <37382c1f-7ab1-6145-5fd7-d4a15e7a7655@gmail.com>

The docs for ?regexp say this:  "By default repetition is greedy, so the 
maximal possible number of repeats is used. This can be changed to 
?minimal? by appending ? to the quantifier. (There are further 
quantifiers that allow approximate matching: see the TRE documentation.)"

I want the minimal match, but I don't seem to be getting it.  For example,

x <- "abaca"
grep("a.*?a", x, value = TRUE)
#> [1] "abaca"

Shouldn't I have gotten "aba", which is the first match to "a.*a"?  If 
not, what would be the regexp that would give me the first match to 
"a.*a", without greedy expansion of the .*?

Duncan Murdoch


From @kw@|mmo @end|ng |rom gm@||@com  Thu Jan 26 01:34:45 2023
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Wed, 25 Jan 2023 19:34:45 -0500
Subject: [R] Minimal match to regexp?
In-Reply-To: <37382c1f-7ab1-6145-5fd7-d4a15e7a7655@gmail.com>
References: <37382c1f-7ab1-6145-5fd7-d4a15e7a7655@gmail.com>
Message-ID: <CAPcHnpTT1p-_U+FxoeJHv4puisZe6SCPc41A7xkn2TJpYEKQVg@mail.gmail.com>

grep(value = TRUE) just returns the strings which match the pattern. You
have to use regexpr() or gregexpr() if you want to know where the matches
are:

```
x <- "abaca"

# extract only the first match with regexpr()
m <- regexpr("a.*?a", x)
regmatches(x, m)

# or

# extract every match with gregexpr()
m <- gregexpr("a.*?a", x)
regmatches(x, m)
```

You could also use sub() to remove the rest of the string:
`sub("^.*(a.*?a).*$", "\\1", x)`
keeping only the match within the parenthesis.


On Wed, Jan 25, 2023, 19:19 Duncan Murdoch <murdoch.duncan at gmail.com> wrote:

> The docs for ?regexp say this:  "By default repetition is greedy, so the
> maximal possible number of repeats is used. This can be changed to
> ?minimal? by appending ? to the quantifier. (There are further
> quantifiers that allow approximate matching: see the TRE documentation.)"
>
> I want the minimal match, but I don't seem to be getting it.  For example,
>
> x <- "abaca"
> grep("a.*?a", x, value = TRUE)
> #> [1] "abaca"
>
> Shouldn't I have gotten "aba", which is the first match to "a.*a"?  If
> not, what would be the regexp that would give me the first match to
> "a.*a", without greedy expansion of the .*?
>
> Duncan Murdoch
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Thu Jan 26 01:42:51 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Wed, 25 Jan 2023 16:42:51 -0800
Subject: [R] Minimal match to regexp?
In-Reply-To: <37382c1f-7ab1-6145-5fd7-d4a15e7a7655@gmail.com>
References: <37382c1f-7ab1-6145-5fd7-d4a15e7a7655@gmail.com>
Message-ID: <C72BD0E7-6B9C-400A-A6AE-451947D5D9D2@dcn.davis.ca.us>

Perhaps

sub( "^.*(a.*?a).*$", "\\1", x )


On January 25, 2023 4:19:01 PM PST, Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>The docs for ?regexp say this:  "By default repetition is greedy, so the maximal possible number of repeats is used. This can be changed to ?minimal? by appending ? to the quantifier. (There are further quantifiers that allow approximate matching: see the TRE documentation.)"
>
>I want the minimal match, but I don't seem to be getting it.  For example,
>
>x <- "abaca"
>grep("a.*?a", x, value = TRUE)
>#> [1] "abaca"
>
>Shouldn't I have gotten "aba", which is the first match to "a.*a"?  If not, what would be the regexp that would give me the first match to "a.*a", without greedy expansion of the .*?
>
>Duncan Murdoch
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jan 26 01:37:50 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 25 Jan 2023 19:37:50 -0500
Subject: [R] Minimal match to regexp?
In-Reply-To: <37382c1f-7ab1-6145-5fd7-d4a15e7a7655@gmail.com>
References: <37382c1f-7ab1-6145-5fd7-d4a15e7a7655@gmail.com>
Message-ID: <fde09b62-7b3b-8494-99fe-25c286c79b9c@gmail.com>

On 25/01/2023 7:19 p.m., Duncan Murdoch wrote:
> The docs for ?regexp say this:  "By default repetition is greedy, so the
> maximal possible number of repeats is used. This can be changed to
> ?minimal? by appending ? to the quantifier. (There are further
> quantifiers that allow approximate matching: see the TRE documentation.)"
> 
> I want the minimal match, but I don't seem to be getting it.  For example,
> 
> x <- "abaca"
> grep("a.*?a", x, value = TRUE)
> #> [1] "abaca"
> 
> Shouldn't I have gotten "aba", which is the first match to "a.*a"?  If
> not, what would be the regexp that would give me the first match to
> "a.*a", without greedy expansion of the .*?

Sorry, that was a dumb question.  Of course grep returned the whole 
thing.  I should be using regexpr() or some related function to extract 
the match.

Duncan Murdoch


From murdoch@dunc@n @end|ng |rom gm@||@com  Thu Jan 26 01:57:11 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Wed, 25 Jan 2023 19:57:11 -0500
Subject: [R] Minimal match to regexp?
In-Reply-To: <CAPcHnpTT1p-_U+FxoeJHv4puisZe6SCPc41A7xkn2TJpYEKQVg@mail.gmail.com>
References: <37382c1f-7ab1-6145-5fd7-d4a15e7a7655@gmail.com>
 <CAPcHnpTT1p-_U+FxoeJHv4puisZe6SCPc41A7xkn2TJpYEKQVg@mail.gmail.com>
Message-ID: <e1ba31be-9504-fb93-8194-78858407eb07@gmail.com>

Thanks for pointing out my mistake.  I oversimplified the real problem.

I'll try to post a version of it that comes closer:  Suppose I have a 
string like this:

x <- "\n```html\nblah blah \n```\n\n```r\nblah blah\n```\n"

If I cat() it, I see that it is really markdown source:

   ```html
   blah blah
   ```

   ```r
   blah blah
   ```

I want to find the part that includes the html block, but not the r 
block.  So I want to match "```html", followed by a minimal number of 
characters, then "```".  Then this pattern works:

   pattern <- "\n```html\n.*?\n```\n"

and we get the right answer:

   cat(regmatches(x, regexpr(pattern, x)))

   ```html
   blah blah
   ```

Okay, but this flavour of markdown says there can be more backticks, not 
just 3.  So the block might look like

   ````html
   blah blah
   ````

I need to have the same number of backticks in the opening and closing 
marker.  So I make the pattern more complicated, and it doesn't work:

   pattern2 <- "\n([`]{3,})html\n.*?\n\\1\n"

This matches all of x:

   > pattern2 <- "\n([`]{3,})html\n.*?\n\\1\n"
   > cat(regmatches(x, regexpr(pattern2, x)))

   ```html
   blah blah
   ```

   ```r
   blah blah
   ```


Is that a bug, or am I making a silly mistake again?

Duncan Murdoch



On 25/01/2023 7:34 p.m., Andrew Simmons wrote:
> grep(value = TRUE) just returns the strings which match the pattern. You 
> have to use regexpr() or gregexpr() if you want to know where the 
> matches are:
> 
> ```
> x <- "abaca"
> 
> # extract only the first match with?regexpr()
> m <- regexpr("a.*?a", x)
> regmatches(x, m)
> 
> # or
> 
> # extract every match with gregexpr()
> m <- gregexpr("a.*?a", x)
> regmatches(x, m)
> ```
> 
> You could also use sub() to remove the rest of the string: 
> `sub("^.*(a.*?a).*$", "\\1", x)`
> keeping only the match within the parenthesis.
> 
> 
> On Wed, Jan 25, 2023, 19:19 Duncan Murdoch <murdoch.duncan at gmail.com 
> <mailto:murdoch.duncan at gmail.com>> wrote:
> 
>     The docs for ?regexp say this:? "By default repetition is greedy, so
>     the
>     maximal possible number of repeats is used. This can be changed to
>     ?minimal? by appending ? to the quantifier. (There are further
>     quantifiers that allow approximate matching: see the TRE
>     documentation.)"
> 
>     I want the minimal match, but I don't seem to be getting it.? For
>     example,
> 
>     x <- "abaca"
>     grep("a.*?a", x, value = TRUE)
>     #> [1] "abaca"
> 
>     Shouldn't I have gotten "aba", which is the first match to "a.*a"?? If
>     not, what would be the regexp that would give me the first match to
>     "a.*a", without greedy expansion of the .*?
> 
>     Duncan Murdoch
> 
>     ______________________________________________
>     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
>     To UNSUBSCRIBE and more, see
>     https://stat.ethz.ch/mailman/listinfo/r-help
>     <https://stat.ethz.ch/mailman/listinfo/r-help>
>     PLEASE do read the posting guide
>     http://www.R-project.org/posting-guide.html
>     <http://www.R-project.org/posting-guide.html>
>     and provide commented, minimal, self-contained, reproducible code.
>


From @kw@|mmo @end|ng |rom gm@||@com  Thu Jan 26 02:38:36 2023
From: @kw@|mmo @end|ng |rom gm@||@com (Andrew Simmons)
Date: Wed, 25 Jan 2023 20:38:36 -0500
Subject: [R] Minimal match to regexp?
In-Reply-To: <e1ba31be-9504-fb93-8194-78858407eb07@gmail.com>
References: <37382c1f-7ab1-6145-5fd7-d4a15e7a7655@gmail.com>
 <CAPcHnpTT1p-_U+FxoeJHv4puisZe6SCPc41A7xkn2TJpYEKQVg@mail.gmail.com>
 <e1ba31be-9504-fb93-8194-78858407eb07@gmail.com>
Message-ID: <CAPcHnpSADhURtx0aAbDAfrDywu7FnhnmZjGZ5WochiYOMzKs5w@mail.gmail.com>

It seems like a bug to me. Using perl = TRUE, I see the desired result:

```
x <- "\n```html\nblah blah \n```\n\n```r\nblah blah\n```\n"

pattern2 <- "\n([`]{3,})html\n.*?\n\\1\n"

cat(regmatches(x, regexpr(pattern2, x, perl = TRUE)))
```

If you change it to something like:

```
x <- c(
    "\n```html\nblah blah \n```\n\n```r\nblah blah\n```\n",
    "\n```html\nblah blah \n```\n"
)

pattern2 <- "\n([`]{3,})html\n.*?\n\\1\n"

print(regmatches(x, regexpr(pattern2, x)), width = 10)
```

you can see that it does find the match, so the combination of *? and
\\1 must be messing up regexpr(). They seem to work perfectly fine on
their own.

On Wed, Jan 25, 2023 at 7:57 PM Duncan Murdoch <murdoch.duncan at gmail.com> wrote:
>
> Thanks for pointing out my mistake.  I oversimplified the real problem.
>
> I'll try to post a version of it that comes closer:  Suppose I have a
> string like this:
>
> x <- "\n```html\nblah blah \n```\n\n```r\nblah blah\n```\n"
>
> If I cat() it, I see that it is really markdown source:
>
>    ```html
>    blah blah
>    ```
>
>    ```r
>    blah blah
>    ```
>
> I want to find the part that includes the html block, but not the r
> block.  So I want to match "```html", followed by a minimal number of
> characters, then "```".  Then this pattern works:
>
>    pattern <- "\n```html\n.*?\n```\n"
>
> and we get the right answer:
>
>    cat(regmatches(x, regexpr(pattern, x)))
>
>    ```html
>    blah blah
>    ```
>
> Okay, but this flavour of markdown says there can be more backticks, not
> just 3.  So the block might look like
>
>    ````html
>    blah blah
>    ````
>
> I need to have the same number of backticks in the opening and closing
> marker.  So I make the pattern more complicated, and it doesn't work:
>
>    pattern2 <- "\n([`]{3,})html\n.*?\n\\1\n"
>
> This matches all of x:
>
>    > pattern2 <- "\n([`]{3,})html\n.*?\n\\1\n"
>    > cat(regmatches(x, regexpr(pattern2, x)))
>
>    ```html
>    blah blah
>    ```
>
>    ```r
>    blah blah
>    ```
>
>
> Is that a bug, or am I making a silly mistake again?
>
> Duncan Murdoch
>
>
>
> On 25/01/2023 7:34 p.m., Andrew Simmons wrote:
> > grep(value = TRUE) just returns the strings which match the pattern. You
> > have to use regexpr() or gregexpr() if you want to know where the
> > matches are:
> >
> > ```
> > x <- "abaca"
> >
> > # extract only the first match with regexpr()
> > m <- regexpr("a.*?a", x)
> > regmatches(x, m)
> >
> > # or
> >
> > # extract every match with gregexpr()
> > m <- gregexpr("a.*?a", x)
> > regmatches(x, m)
> > ```
> >
> > You could also use sub() to remove the rest of the string:
> > `sub("^.*(a.*?a).*$", "\\1", x)`
> > keeping only the match within the parenthesis.
> >
> >
> > On Wed, Jan 25, 2023, 19:19 Duncan Murdoch <murdoch.duncan at gmail.com
> > <mailto:murdoch.duncan at gmail.com>> wrote:
> >
> >     The docs for ?regexp say this:  "By default repetition is greedy, so
> >     the
> >     maximal possible number of repeats is used. This can be changed to
> >     ?minimal? by appending ? to the quantifier. (There are further
> >     quantifiers that allow approximate matching: see the TRE
> >     documentation.)"
> >
> >     I want the minimal match, but I don't seem to be getting it.  For
> >     example,
> >
> >     x <- "abaca"
> >     grep("a.*?a", x, value = TRUE)
> >     #> [1] "abaca"
> >
> >     Shouldn't I have gotten "aba", which is the first match to "a.*a"?  If
> >     not, what would be the regexp that would give me the first match to
> >     "a.*a", without greedy expansion of the .*?
> >
> >     Duncan Murdoch
> >
> >     ______________________________________________
> >     R-help at r-project.org <mailto:R-help at r-project.org> mailing list --
> >     To UNSUBSCRIBE and more, see
> >     https://stat.ethz.ch/mailman/listinfo/r-help
> >     <https://stat.ethz.ch/mailman/listinfo/r-help>
> >     PLEASE do read the posting guide
> >     http://www.R-project.org/posting-guide.html
> >     <http://www.R-project.org/posting-guide.html>
> >     and provide commented, minimal, self-contained, reproducible code.
> >
>


