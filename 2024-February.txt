From roy@mende|@@ohn @end|ng |rom no@@@gov  Thu Feb  1 00:47:18 2024
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Wed, 31 Jan 2024 15:47:18 -0800
Subject: [R] Need help testing a problem
Message-ID: <15EE349C-1593-481E-9A22-2014393B8DB9@noaa.gov>

HI All:

We are trying to figure out a problem that is occurring with a package,  and we need a non-NOAA person with a Windows computer with the latest R to test for us what is failing (but works on Macs and Linux from different sites).  Part of the problem is there is an Akamai service in between that we feel may be messing up things. To do this you would need to be willing to:

1.  install the ?rerddap? package from CRAN,  with all dependencies - or if installed make certain it is the latest

2. make certain that the packages ?curl?, ?crul? and ?http? are up to date.  

3.  Run the following:

# load rerddap
library("rerddap?)
# delete rerddap cache just in case
cache_delete_all()
# get the data extract
dat <- tabledap('FED_JSATS_detects', url = "https://oceanview.pfeg.noaa.gov/erddap/", 'study_id="RBDD_2018"', callopts = list(verbose = TRUE), store = memory())

4. If it works also do:

 head(dat)

Either way if all the output could be sent to me it would be very helpful.  The download may take a couple of minutes,
the file size is about 3.5MB.

If anyone has concerns about what is being downloaded you can check the ?rerddap? docs to see these are all legitimate ?rerddap' commands,  the datasets being accessed is https://oceanview.pfeg.noaa.gov/erddap/tabledap/FED_JSATS_detects.html.  The downloaded file goes to R temp space, and its location,  if successful is given in the output.

Thanks to anyone willing to help.  One of my issues is I have been unable to reproduce the error,  but I also do not have ready access to a Windows machine.

-ROy
	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Thu Feb  1 11:16:33 2024
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Thu, 1 Feb 2024 10:16:33 +0000
Subject: [R] Need help testing a problem
In-Reply-To: <15EE349C-1593-481E-9A22-2014393B8DB9@noaa.gov>
References: <15EE349C-1593-481E-9A22-2014393B8DB9@noaa.gov>
Message-ID: <06f41ffa-4505-49db-b7a4-6ec78919b761@sapo.pt>

?s 23:47 de 31/01/2024, Roy Mendelssohn - NOAA Federal via R-help escreveu:
> HI All:
> 
> We are trying to figure out a problem that is occurring with a package,  and we need a non-NOAA person with a Windows computer with the latest R to test for us what is failing (but works on Macs and Linux from different sites).  Part of the problem is there is an Akamai service in between that we feel may be messing up things. To do this you would need to be willing to:
> 
> 1.  install the ?rerddap? package from CRAN,  with all dependencies - or if installed make certain it is the latest
> 
> 2. make certain that the packages ?curl?, ?crul? and ?http? are up to date.
> 
> 3.  Run the following:
> 
> # load rerddap
> library("rerddap?)
> # delete rerddap cache just in case
> cache_delete_all()
> # get the data extract
> dat <- tabledap('FED_JSATS_detects', url = "https://oceanview.pfeg.noaa.gov/erddap/", 'study_id="RBDD_2018"', callopts = list(verbose = TRUE), store = memory())
> 
> 4. If it works also do:
> 
>   head(dat)
> 
> Either way if all the output could be sent to me it would be very helpful.  The download may take a couple of minutes,
> the file size is about 3.5MB.
> 
> If anyone has concerns about what is being downloaded you can check the ?rerddap? docs to see these are all legitimate ?rerddap' commands,  the datasets being accessed is https://oceanview.pfeg.noaa.gov/erddap/tabledap/FED_JSATS_detects.html.  The downloaded file goes to R temp space, and its location,  if successful is given in the output.
> 
> Thanks to anyone willing to help.  One of my issues is I have been unable to reproduce the error,  but I also do not have ready access to a Windows machine.
> 
> -ROy
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Tested with R 4.3.2 running on Windows 11.

1. You mention package http but there is no package http on CRAN, did 
you mean package httr?

2. I wrote a script rhelp.R, ran it on a command window and here is what 
I got on the command window output.



C:\Users\ruipb\Documents>R -q -f rhelp.R > rhelp_out.txt
* WARNING: failed to open cookie file ""
* Found bundle for host: 0x21cb7410670 [serially]
* Can not multiplex, even if we wanted to
* Re-using existing connection with host oceanview.pfeg.noaa.gov
 > GET 
/erddap/tabledap/FED_JSATS_detects.csv?&study_id%3D%22RBDD_2018%22 HTTP/1.1
Host: oceanview.pfeg.noaa.gov
User-Agent: libcurl/8.3.0 r-curl/5.2.0 crul/1.4.0
Accept-Encoding: gzip, deflate
Accept: application/json, text/xml, application/xml, */*

< HTTP/1.1 504 Gateway Time-out
< Server: AkamaiGHost
< Mime-Version: 1.0
< Content-Type: text/html
< Content-Length: 176
< Expires: Thu, 01 Feb 2024 09:56:40 GMT
< Date: Thu, 01 Feb 2024 09:56:40 GMT
< Connection: keep-alive
< Strict-Transport-Security: max-age=31536000
<
* Connection #0 to host oceanview.pfeg.noaa.gov left intact


3. The file rhelp_out.txt was created and its contents are the 
following. (I installed package "hoardr" separately because for some 
reason it was not being recognized as a dependency)



 > # pkgs <- c("hoardr", "rerddap", "curl", "crul", "httr")
 > # utils::install.packages(
 > 	# pkgs = pkgs,
 > 	# lib = .libPaths()[1],
 > 	# repos = "https://cloud.r-project.org",
 > 	# dependencies = TRUE
 > # )
 >
 > # load rerddap
 > library("rerddap")
 > # delete rerddap cache just in case
 > cache_delete_all()
 > # get the data extract
 > dat <- tryCatch(
+   tabledap(
+     'FED_JSATS_detects',
+     url = "https://oceanview.pfeg.noaa.gov/erddap/",
+ 	'study_id="RBDD_2018"',
+ 	callopts = list(verbose = TRUE),
+ 	store = memory()
+   ),
+   warning = function(w) w,
+   error = function(e) e,
+   finally = print("download end")
+ )
[1] "download end"
 >
 > # 4. If it works also do:
 > head(dat)
$message
[1] ""

$call
NULL

 >
 > str(dat)
List of 2
  $ message: chr ""
  $ call   : NULL
  - attr(*, "class")= chr [1:3] "simpleError" "error" "condition"
 >
 > sessionInfo()
R version 4.3.2 (2023-10-31 ucrt)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 11 x64 (build 22621)

Matrix products: default


locale:
[1] LC_COLLATE=Portuguese_Portugal.utf8 
LC_CTYPE=Portuguese_Portugal.utf8
[3] LC_MONETARY=Portuguese_Portugal.utf8 LC_NUMERIC=C 

[5] LC_TIME=Portuguese_Portugal.utf8

time zone: Europe/Lisbon
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] rerddap_1.1.0

loaded via a namespace (and not attached):
  [1] vctrs_0.6.3       cli_3.6.1         rlang_1.1.1       ncdf4_1.22 

  [5] crul_1.4.0        generics_0.1.3    jsonlite_1.8.7 
data.table_1.14.8
  [9] glue_1.6.2        httpcode_0.3.0    triebeard_0.4.1   fansi_1.0.5 

[13] rappdirs_0.3.3    tibble_3.2.1      hoardr_0.5.4      lifecycle_1.0.4
[17] compiler_4.3.2    dplyr_1.1.3       Rcpp_1.0.12       pkgconfig_2.0.3
[21] digest_0.6.33     R6_2.5.1          tidyselect_1.2.0  utf8_1.2.4
[25] pillar_1.9.0      curl_5.2.0        magrittr_2.0.3    urltools_1.7.3
[29] xml2_1.3.5
 >



So there was an unspecified error, an error without a condition message 
and no call expression. I find this stranger, a call like the following 
is expected.


tryCatch(stop("error"), error = function(e) e) |> str()
List of 2
  $ message: chr "error"
  $ call   : language doTryCatch(return(expr), name, parentenv, handler)
  - attr(*, "class")= chr [1:3] "simpleError" "error" "condition"


Function tabledap doesn't seem to be handling errors properly.

Hope this helps,

Rui Barradas


-- 
Este e-mail foi analisado pelo software antiv?rus AVG para verificar a presen?a de v?rus.
www.avg.com


From roy@mende|@@ohn @end|ng |rom no@@@gov  Thu Feb  1 16:09:01 2024
From: roy@mende|@@ohn @end|ng |rom no@@@gov (Roy Mendelssohn - NOAA Federal)
Date: Thu, 1 Feb 2024 07:09:01 -0800
Subject: [R] Need help testing a problem
In-Reply-To: <06f41ffa-4505-49db-b7a4-6ec78919b761@sapo.pt>
References: <15EE349C-1593-481E-9A22-2014393B8DB9@noaa.gov>
 <06f41ffa-4505-49db-b7a4-6ec78919b761@sapo.pt>
Message-ID: <8191B147-3A93-4346-92F6-E29C4A4F7067@noaa.gov>

HI Rui:

First and foremost thanks  for taking the time to do this.  That was a typo,  it was httr and is not needed,  I was careless.  That request works fine on a Mac and a Linux box.  We needed to check if there was something about  iour internal network settings, our Windows setup or something else that was causing the problem.  Bill Dunlop got the same results so it is something else,  We do not know how much Akamai is interfering with this,  we have had issues with folks running Windows behind Cloudfare that caused problems.

Again,  thanks for taking the time,  it eliminates on possible cause.

-Roy



> On Feb 1, 2024, at 2:16 AM, Rui Barradas <ruipbarradas at sapo.pt> wrote:
> 
> ?s 23:47 de 31/01/2024, Roy Mendelssohn - NOAA Federal via R-help escreveu:
>> HI All:
>> We are trying to figure out a problem that is occurring with a package,  and we need a non-NOAA person with a Windows computer with the latest R to test for us what is failing (but works on Macs and Linux from different sites).  Part of the problem is there is an Akamai service in between that we feel may be messing up things. To do this you would need to be willing to:
>> 1.  install the ?rerddap? package from CRAN,  with all dependencies - or if installed make certain it is the latest
>> 2. make certain that the packages ?curl?, ?crul? and ?http? are up to date.
>> 3.  Run the following:
>> # load rerddap
>> library("rerddap?)
>> # delete rerddap cache just in case
>> cache_delete_all()
>> # get the data extract
>> dat <- tabledap('FED_JSATS_detects', url = "https://oceanview.pfeg.noaa.gov/erddap/", 'study_id="RBDD_2018"', callopts = list(verbose = TRUE), store = memory())
>> 4. If it works also do:
>>  head(dat)
>> Either way if all the output could be sent to me it would be very helpful.  The download may take a couple of minutes,
>> the file size is about 3.5MB.
>> If anyone has concerns about what is being downloaded you can check the ?rerddap? docs to see these are all legitimate ?rerddap' commands,  the datasets being accessed is https://oceanview.pfeg.noaa.gov/erddap/tabledap/FED_JSATS_detects.html.  The downloaded file goes to R temp space, and its location,  if successful is given in the output.
>> Thanks to anyone willing to help.  One of my issues is I have been unable to reproduce the error,  but I also do not have ready access to a Windows machine.
>> -ROy
>> 	[[alternative HTML version deleted]]
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> Hello,
> 
> Tested with R 4.3.2 running on Windows 11.
> 
> 1. You mention package http but there is no package http on CRAN, did you mean package httr?
> 
> 2. I wrote a script rhelp.R, ran it on a command window and here is what I got on the command window output.
> 
> 
> 
> C:\Users\ruipb\Documents>R -q -f rhelp.R > rhelp_out.txt
> * WARNING: failed to open cookie file ""
> * Found bundle for host: 0x21cb7410670 [serially]
> * Can not multiplex, even if we wanted to
> * Re-using existing connection with host oceanview.pfeg.noaa.gov
> > GET /erddap/tabledap/FED_JSATS_detects.csv?&study_id%3D%22RBDD_2018%22 HTTP/1.1
> Host: oceanview.pfeg.noaa.gov
> User-Agent: libcurl/8.3.0 r-curl/5.2.0 crul/1.4.0
> Accept-Encoding: gzip, deflate
> Accept: application/json, text/xml, application/xml, */*
> 
> < HTTP/1.1 504 Gateway Time-out
> < Server: AkamaiGHost
> < Mime-Version: 1.0
> < Content-Type: text/html
> < Content-Length: 176
> < Expires: Thu, 01 Feb 2024 09:56:40 GMT
> < Date: Thu, 01 Feb 2024 09:56:40 GMT
> < Connection: keep-alive
> < Strict-Transport-Security: max-age=31536000
> <
> * Connection #0 to host oceanview.pfeg.noaa.gov left intact
> 
> 
> 3. The file rhelp_out.txt was created and its contents are the following. (I installed package "hoardr" separately because for some reason it was not being recognized as a dependency)
> 
> 
> 
> > # pkgs <- c("hoardr", "rerddap", "curl", "crul", "httr")
> > # utils::install.packages(
> > 	# pkgs = pkgs,
> > 	# lib = .libPaths()[1],
> > 	# repos = "https://cloud.r-project.org",
> > 	# dependencies = TRUE
> > # )
> >
> > # load rerddap
> > library("rerddap")
> > # delete rerddap cache just in case
> > cache_delete_all()
> > # get the data extract
> > dat <- tryCatch(
> +   tabledap(
> +     'FED_JSATS_detects',
> +     url = "https://oceanview.pfeg.noaa.gov/erddap/",
> + 	'study_id="RBDD_2018"',
> + 	callopts = list(verbose = TRUE),
> + 	store = memory()
> +   ),
> +   warning = function(w) w,
> +   error = function(e) e,
> +   finally = print("download end")
> + )
> [1] "download end"
> >
> > # 4. If it works also do:
> > head(dat)
> $message
> [1] ""
> 
> $call
> NULL
> 
> >
> > str(dat)
> List of 2
> $ message: chr ""
> $ call   : NULL
> - attr(*, "class")= chr [1:3] "simpleError" "error" "condition"
> >
> > sessionInfo()
> R version 4.3.2 (2023-10-31 ucrt)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows 11 x64 (build 22621)
> 
> Matrix products: default
> 
> 
> locale:
> [1] LC_COLLATE=Portuguese_Portugal.utf8 LC_CTYPE=Portuguese_Portugal.utf8
> [3] LC_MONETARY=Portuguese_Portugal.utf8 LC_NUMERIC=C 
> [5] LC_TIME=Portuguese_Portugal.utf8
> 
> time zone: Europe/Lisbon
> tzcode source: internal
> 
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
> 
> other attached packages:
> [1] rerddap_1.1.0
> 
> loaded via a namespace (and not attached):
> [1] vctrs_0.6.3       cli_3.6.1         rlang_1.1.1       ncdf4_1.22 
> [5] crul_1.4.0        generics_0.1.3    jsonlite_1.8.7 data.table_1.14.8
> [9] glue_1.6.2        httpcode_0.3.0    triebeard_0.4.1   fansi_1.0.5 
> [13] rappdirs_0.3.3    tibble_3.2.1      hoardr_0.5.4      lifecycle_1.0.4
> [17] compiler_4.3.2    dplyr_1.1.3       Rcpp_1.0.12       pkgconfig_2.0.3
> [21] digest_0.6.33     R6_2.5.1          tidyselect_1.2.0  utf8_1.2.4
> [25] pillar_1.9.0      curl_5.2.0        magrittr_2.0.3    urltools_1.7.3
> [29] xml2_1.3.5
> >
> 
> 
> 
> So there was an unspecified error, an error without a condition message and no call expression. I find this stranger, a call like the following is expected.
> 
> 
> tryCatch(stop("error"), error = function(e) e) |> str()
> List of 2
> $ message: chr "error"
> $ call   : language doTryCatch(return(expr), name, parentenv, handler)
> - attr(*, "class")= chr [1:3] "simpleError" "error" "condition"
> 
> 
> Function tabledap doesn't seem to be handling errors properly.
> 
> Hope this helps,
> 
> Rui Barradas
> 
> 
> -- 
> Este e-mail foi analisado pelo software antiv?rus AVG para verificar a presen?a de v?rus.
> www.avg.com

**********************
"The contents of this message do not reflect any position of the U.S. Government or NOAA."
**********************
Roy Mendelssohn
Supervisory Operations Research Analyst
NOAA/NMFS
Environmental Research Division
Southwest Fisheries Science Center
***Note new street address***
110 McAllister Way
Santa Cruz, CA 95060
Phone: (831)-420-3666
Fax: (831) 420-3980
e-mail: Roy.Mendelssohn at noaa.gov www: https://www.pfeg.noaa.gov/

"Old age and treachery will overcome youth and skill."
"From those who have been given much, much will be expected" 
"the arc of the moral universe is long, but it bends toward justice" -MLK Jr.


From teotjunk @end|ng |rom hotm@||@com  Fri Feb  2 01:37:21 2024
From: teotjunk @end|ng |rom hotm@||@com (TJUN KIAT TEO)
Date: Fri, 2 Feb 2024 00:37:21 +0000
Subject: [R] List of Words in BioWordVec
Message-ID: <TYSPR04MB8035F2072634C71C8E6A2733DF422@TYSPR04MB8035.apcprd04.prod.outlook.com>

Is there a way to extract list of words in  BioWordVec  in R

Thank you

Tjun Kiat

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Fri Feb  2 03:09:04 2024
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 1 Feb 2024 18:09:04 -0800
Subject: [R] List of Words in BioWordVec
In-Reply-To: <TYSPR04MB8035F2072634C71C8E6A2733DF422@TYSPR04MB8035.apcprd04.prod.outlook.com>
References: <TYSPR04MB8035F2072634C71C8E6A2733DF422@TYSPR04MB8035.apcprd04.prod.outlook.com>
Message-ID: <CAGxFJbRrO7GtsYCQB83sjFm7pVX00X6bMww2JEM4W6jVTXqbNg@mail.gmail.com>

I *think* this might be better posted here:
https://bioconductor.org/help/support/

Cheers,
Bert

On Thu, Feb 1, 2024 at 4:37?PM TJUN KIAT TEO <teotjunk at hotmail.com> wrote:

> Is there a way to extract list of words in  BioWordVec  in R
>
> Thank you
>
> Tjun Kiat
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Feb  2 03:57:18 2024
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Thu, 01 Feb 2024 18:57:18 -0800
Subject: [R] List of Words in BioWordVec
In-Reply-To: <CAGxFJbRrO7GtsYCQB83sjFm7pVX00X6bMww2JEM4W6jVTXqbNg@mail.gmail.com>
References: <TYSPR04MB8035F2072634C71C8E6A2733DF422@TYSPR04MB8035.apcprd04.prod.outlook.com>
 <CAGxFJbRrO7GtsYCQB83sjFm7pVX00X6bMww2JEM4W6jVTXqbNg@mail.gmail.com>
Message-ID: <06877C2E-A5B4-4AC6-A156-C3BB0E2F5B3A@dcn.davis.ca.us>

I thought so too, but Google suggests there is at least one package on CRAN with this symbol in it.

OP:

a) You should always mention which contributed package you are using. Most references to this term online seem to be related to Python rather than R.

b) This seems like extremely specialized knowledge... even if it is a CRAN package this doesn't seem like the kind of R language topic normally discussed here. The CRAN package entry online may include a pointer to a more appropriate venue for getting help.

c) Also, we can only see the text portion of your email ... it is strongly recommended in the Posting Guide (linked in the message footer) to send your questions formatted as text rather than HTML to avoid "we don't see what you see" mis-communication. Sorry if that seems vague, but there are too many email programs out there for us to know how you should configure yours to do this... but it is practically always possible.

On February 1, 2024 6:09:04 PM PST, Bert Gunter <bgunter.4567 at gmail.com> wrote:
>I *think* this might be better posted here:
>https://bioconductor.org/help/support/
>
>Cheers,
>Bert
>
>On Thu, Feb 1, 2024 at 4:37?PM TJUN KIAT TEO <teotjunk at hotmail.com> wrote:
>
>> Is there a way to extract list of words in  BioWordVec  in R
>>
>> Thank you
>>
>> Tjun Kiat
>>
>>         [[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From tr|ng @end|ng |rom gvdnet@dk  Fri Feb  2 11:01:43 2024
From: tr|ng @end|ng |rom gvdnet@dk (Troels Ring)
Date: Fri, 2 Feb 2024 11:01:43 +0100
Subject: [R] gathering denominator under frac
Message-ID: <d20ae319-3a9f-4fc2-b5cf-7c0bb814fe68@gvdnet.dk>

Hi friends - I'm plotting a ratio of bicarbonates i ggplot2 and

ylab(expression(paste(frac("additive BIC","true BIC")))) worked OK - but 
now I have been asked to put the chemistry instead - so I wrote

 ?ylab(expression(paste(frac("additive",HCO[3]^"-","true",HCO[3]^"-")))) 
- and frac saw that as additive = numerator and HCO3- = denominator and 
the rest was ignored-

So how do I make frac ignore the first ","? and print the fraction as I 
want?


All best wishes
Troels


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Feb  2 12:05:47 2024
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 2 Feb 2024 11:05:47 +0000
Subject: [R] gathering denominator under frac
In-Reply-To: <d20ae319-3a9f-4fc2-b5cf-7c0bb814fe68@gvdnet.dk>
References: <d20ae319-3a9f-4fc2-b5cf-7c0bb814fe68@gvdnet.dk>
Message-ID: <e836fc61-edef-4087-962f-357c69ec5e35@sapo.pt>

?s 10:01 de 02/02/2024, Troels Ring escreveu:
> Hi friends - I'm plotting a ratio of bicarbonates i ggplot2 and
> 
> ylab(expression(paste(frac("additive BIC","true BIC")))) worked OK - but 
> now I have been asked to put the chemistry instead - so I wrote
> 
>  ?ylab(expression(paste(frac("additive",HCO[3]^"-","true",HCO[3]^"-")))) 
> - and frac saw that as additive = numerator and HCO3- = denominator and 
> the rest was ignored-
> 
> So how do I make frac ignore the first ","? and print the fraction as I 
> want?
> 
> 
> All best wishes
> Troels
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

This seems to work. Instead of separating the two numerator strings with 
a comma, separate them with a tilde. The same goes for the denominator.
And there is no need for double quotes around "additive" and "true".


library(ggplot2)

g <- ggplot(iris, aes(Sepal.Length, Sepal.Width, color = Species)) +
   geom_point()

g + ylab(expression(paste(frac(
   additive~HCO[3]^"-",
   true~HCO[3]^"-"
))))



Hope this helps,

Rui Barradas


-- 
Este e-mail foi analisado pelo software antiv?rus AVG para verificar a presen?a de v?rus.
www.avg.com


From bgunter@4567 @end|ng |rom gm@||@com  Fri Feb  2 17:33:44 2024
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 2 Feb 2024 08:33:44 -0800
Subject: [R] gathering denominator under frac
In-Reply-To: <e836fc61-edef-4087-962f-357c69ec5e35@sapo.pt>
References: <d20ae319-3a9f-4fc2-b5cf-7c0bb814fe68@gvdnet.dk>
 <e836fc61-edef-4087-962f-357c69ec5e35@sapo.pt>
Message-ID: <CAGxFJbQcPomfULky7_aDrNvNnFnBAWH46uyAb7i+1VrU=dGSXA@mail.gmail.com>

... or if I understand correctly, simply

expression(frac(additive ~ HCO[3]^"-",
                           true ~ HCO[3]^"-" )))

Cheers,
Bert

On Fri, Feb 2, 2024 at 3:06?AM Rui Barradas <ruipbarradas at sapo.pt> wrote:

> ?s 10:01 de 02/02/2024, Troels Ring escreveu:
> > Hi friends - I'm plotting a ratio of bicarbonates i ggplot2 and
> >
> > ylab(expression(paste(frac("additive BIC","true BIC")))) worked OK - but
> > now I have been asked to put the chemistry instead - so I wrote
> >
> >   ylab(expression(paste(frac("additive",HCO[3]^"-","true",HCO[3]^"-"))))
> > - and frac saw that as additive = numerator and HCO3- = denominator and
> > the rest was ignored-
> >
> > So how do I make frac ignore the first ","  and print the fraction as I
> > want?
> >
> >
> > All best wishes
> > Troels
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> Hello,
>
> This seems to work. Instead of separating the two numerator strings with
> a comma, separate them with a tilde. The same goes for the denominator.
> And there is no need for double quotes around "additive" and "true".
>
>
> library(ggplot2)
>
> g <- ggplot(iris, aes(Sepal.Length, Sepal.Width, color = Species)) +
>    geom_point()
>
> g + ylab(expression(paste(frac(
>    additive~HCO[3]^"-",
>    true~HCO[3]^"-"
> ))))
>
>
>
> Hope this helps,
>
> Rui Barradas
>
>
> --
> Este e-mail foi analisado pelo software antiv?rus AVG para verificar a
> presen?a de v?rus.
> www.avg.com
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Fri Feb  2 23:04:09 2024
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 2 Feb 2024 14:04:09 -0800
Subject: [R] gathering denominator under frac
In-Reply-To: <CAGxFJbQcPomfULky7_aDrNvNnFnBAWH46uyAb7i+1VrU=dGSXA@mail.gmail.com>
References: <d20ae319-3a9f-4fc2-b5cf-7c0bb814fe68@gvdnet.dk>
 <e836fc61-edef-4087-962f-357c69ec5e35@sapo.pt>
 <CAGxFJbQcPomfULky7_aDrNvNnFnBAWH46uyAb7i+1VrU=dGSXA@mail.gmail.com>
Message-ID: <CAGxFJbQKhVxSp=JvG97w10_JqazTNGBNK_HMD2_oTJdMxiNR4Q@mail.gmail.com>

BTW, for your amusement,

ylab = ~ frac(additive ~ HCO[3]^"-",
                           true ~ HCO[3]^"-" ))

also should work. The reason is (from ?plotmath):

"In most cases other language objects (names and calls, including
formulas) are coerced to expressions and so can also be used."

Cheers,
Bert


On Fri, Feb 2, 2024 at 8:33?AM Bert Gunter <bgunter.4567 at gmail.com> wrote:
>
> ... or if I understand correctly, simply
>
> expression(frac(additive ~ HCO[3]^"-",
>                            true ~ HCO[3]^"-" )))
>
> Cheers,
> Bert
>
> On Fri, Feb 2, 2024 at 3:06?AM Rui Barradas <ruipbarradas at sapo.pt> wrote:
>>
>> ?s 10:01 de 02/02/2024, Troels Ring escreveu:
>> > Hi friends - I'm plotting a ratio of bicarbonates i ggplot2 and
>> >
>> > ylab(expression(paste(frac("additive BIC","true BIC")))) worked OK - but
>> > now I have been asked to put the chemistry instead - so I wrote
>> >
>> >   ylab(expression(paste(frac("additive",HCO[3]^"-","true",HCO[3]^"-"))))
>> > - and frac saw that as additive = numerator and HCO3- = denominator and
>> > the rest was ignored-
>> >
>> > So how do I make frac ignore the first ","  and print the fraction as I
>> > want?
>> >
>> >
>> > All best wishes
>> > Troels
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> > http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>> Hello,
>>
>> This seems to work. Instead of separating the two numerator strings with
>> a comma, separate them with a tilde. The same goes for the denominator.
>> And there is no need for double quotes around "additive" and "true".
>>
>>
>> library(ggplot2)
>>
>> g <- ggplot(iris, aes(Sepal.Length, Sepal.Width, color = Species)) +
>>    geom_point()
>>
>> g + ylab(expression(paste(frac(
>>    additive~HCO[3]^"-",
>>    true~HCO[3]^"-"
>> ))))
>>
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>>
>> --
>> Este e-mail foi analisado pelo software antiv?rus AVG para verificar a presen?a de v?rus.
>> www.avg.com
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.


From tr@xp|@yer @end|ng |rom gm@||@com  Sat Feb  3 10:27:07 2024
From: tr@xp|@yer @end|ng |rom gm@||@com (=?UTF-8?Q?Martin_M=C3=B8ller_Skarbiniks_Pedersen?=)
Date: Sat, 3 Feb 2024 10:27:07 +0100
Subject: [R] List of Words in BioWordVec
In-Reply-To: <TYSPR04MB8035F2072634C71C8E6A2733DF422@TYSPR04MB8035.apcprd04.prod.outlook.com>
References: <TYSPR04MB8035F2072634C71C8E6A2733DF422@TYSPR04MB8035.apcprd04.prod.outlook.com>
Message-ID: <CAGAA5bcs2qgM3MP-y=9ek8eXW3X6eG=gZP68QmuFnG=gvO701w@mail.gmail.com>

On Fri, Feb 2, 2024, 01:37 TJUN KIAT TEO <teotjunk at hotmail.com> wrote:

> Is there a way to extract list of words in  BioWordVec  in R
>

library(text)


word_vectors <- textEmbed(texts = NULL, model = 'bioWordVecModel',
model_type = 'wordvectors')

word_list <- rownames(word_vectors$wordvectors)

	[[alternative HTML version deleted]]


From j|br|n@@|h@@@@n @end|ng |rom unn@edu@ng  Sun Feb  4 11:10:00 2024
From: j|br|n@@|h@@@@n @end|ng |rom unn@edu@ng (Jibrin Alhassan)
Date: Sun, 4 Feb 2024 11:10:00 +0100
Subject: [R] Help
Message-ID: <CAEGeL+EiEd2uiToa1CNGjmq2rmuvmV6j9Nnpj2N8CBfWUrRVaw@mail.gmail.com>

I have done a scatter plot in R. I want to insert the coefficient of
determination R^2 = 0.62 as a text in the plot. I have tried to write R^2
but could not produce R2. I would appreciate it if someone could help me
with the syntax. I have tried:  expression(paste("", R^2,"=", 0.62)), but
it did not produce R squared, rather it gave me error messages. Thanks.
Jibrin Alhassan
*Jibrin Adejoh Alhassan (Ph.D)*
Department of Physics and Astronomy,
University of Nigeria, Nsukka

	[[alternative HTML version deleted]]


From j@zh@o @end|ng |rom ye@h@net  Sun Feb  4 15:19:09 2024
From: j@zh@o @end|ng |rom ye@h@net (Jinsong Zhao)
Date: Sun, 4 Feb 2024 22:19:09 +0800
Subject: [R] Help
In-Reply-To: <CAEGeL+EiEd2uiToa1CNGjmq2rmuvmV6j9Nnpj2N8CBfWUrRVaw@mail.gmail.com>
References: <CAEGeL+EiEd2uiToa1CNGjmq2rmuvmV6j9Nnpj2N8CBfWUrRVaw@mail.gmail.com>
Message-ID: <7cf73cd9-e6c6-49ce-9fe9-14de39c17c8e@yeah.net>

?plotmath

expression(R^2==0.62)

On 2024/2/4 18:10, Jibrin Alhassan wrote:
> I have done a scatter plot in R. I want to insert the coefficient of
> determination R^2 = 0.62 as a text in the plot. I have tried to write R^2
> but could not produce R2. I would appreciate it if someone could help me
> with the syntax. I have tried:  expression(paste("", R^2,"=", 0.62)), but
> it did not produce R squared, rather it gave me error messages. Thanks.
> Jibrin Alhassan
> *Jibrin Adejoh Alhassan (Ph.D)*
> Department of Physics and Astronomy,
> University of Nigeria, Nsukka
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From j|br|n@@|h@@@@n @end|ng |rom unn@edu@ng  Sun Feb  4 16:45:32 2024
From: j|br|n@@|h@@@@n @end|ng |rom unn@edu@ng (Jibrin Alhassan)
Date: Sun, 4 Feb 2024 16:45:32 +0100
Subject: [R] Help
In-Reply-To: <7cf73cd9-e6c6-49ce-9fe9-14de39c17c8e@yeah.net>
References: <CAEGeL+EiEd2uiToa1CNGjmq2rmuvmV6j9Nnpj2N8CBfWUrRVaw@mail.gmail.com>
 <7cf73cd9-e6c6-49ce-9fe9-14de39c17c8e@yeah.net>
Message-ID: <CAEGeL+FU1wPhrpR+=iMhT-Ro6RDfrb8rAoAEbXG18-NbQU5qVQ@mail.gmail.com>

Thank you Zhao for the code. When I replotted the graph after inserting the
code in my script, it gave me this error message without plotting the graph:
Warning message:
In lm.fit(x, y, offset = offset, singular.ok = singular.ok, ...) :
 extra argument ?col? will be disregarded.
My regards.
*Jibrin Adejoh Alhassan (Ph.D)*
Department of Physics and Astronomy,
University of Nigeria, Nsukka


On Sun, Feb 4, 2024 at 3:21?PM Jinsong Zhao <jszhao at yeah.net> wrote:

> ?plotmath
>
> expression(R^2==0.62)
>
> On 2024/2/4 18:10, Jibrin Alhassan wrote:
> > I have done a scatter plot in R. I want to insert the coefficient of
> > determination R^2 = 0.62 as a text in the plot. I have tried to write R^2
> > but could not produce R2. I would appreciate it if someone could help me
> > with the syntax. I have tried:  expression(paste("", R^2,"=", 0.62)), but
> > it did not produce R squared, rather it gave me error messages. Thanks.
> > Jibrin Alhassan
> > *Jibrin Adejoh Alhassan (Ph.D)*
> > Department of Physics and Astronomy,
> > University of Nigeria, Nsukka
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From k|mmo@e|o @end|ng |rom utu@||  Sun Feb  4 16:46:57 2024
From: k|mmo@e|o @end|ng |rom utu@|| (Kimmo Elo)
Date: Sun, 4 Feb 2024 15:46:57 +0000
Subject: [R] Help
In-Reply-To: <CAEGeL+EiEd2uiToa1CNGjmq2rmuvmV6j9Nnpj2N8CBfWUrRVaw@mail.gmail.com>
References: <CAEGeL+EiEd2uiToa1CNGjmq2rmuvmV6j9Nnpj2N8CBfWUrRVaw@mail.gmail.com>
Message-ID: <adc8fa21-82b4-4a0c-b75f-c34c4cb20253@utu.fi>

Hi,

maybe this works:

expression(R^2 * "= 0.62")

HTH,

Kimmo

4. helmik. 2024, 16.11, Jibrin Alhassan <jibrin.alhassan at unn.edu.ng<mailto:jibrin.alhassan at unn.edu.ng>> kirjoitti:

I have done a scatter plot in R. I want to insert the coefficient of
determination R^2 = 0.62 as a text in the plot. I have tried to write R^2
but could not produce R2. I would appreciate it if someone could help me
with the syntax. I have tried:  expression(paste("", R^2,"=", 0.62)), but
it did not produce R squared, rather it gave me error messages. Thanks.
Jibrin Alhassan
*Jibrin Adejoh Alhassan (Ph.D)*
Department of Physics and Astronomy,
University of Nigeria, Nsukka

 [[alternative HTML version deleted]]

________________________________

R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From j|br|n@@|h@@@@n @end|ng |rom unn@edu@ng  Sun Feb  4 17:03:06 2024
From: j|br|n@@|h@@@@n @end|ng |rom unn@edu@ng (Jibrin Alhassan)
Date: Sun, 4 Feb 2024 17:03:06 +0100
Subject: [R] Help
In-Reply-To: <CAEGeL+FU1wPhrpR+=iMhT-Ro6RDfrb8rAoAEbXG18-NbQU5qVQ@mail.gmail.com>
References: <CAEGeL+EiEd2uiToa1CNGjmq2rmuvmV6j9Nnpj2N8CBfWUrRVaw@mail.gmail.com>
 <7cf73cd9-e6c6-49ce-9fe9-14de39c17c8e@yeah.net>
 <CAEGeL+FU1wPhrpR+=iMhT-Ro6RDfrb8rAoAEbXG18-NbQU5qVQ@mail.gmail.com>
Message-ID: <CAEGeL+GoL7v0rrw-LmF2M0+sMbUjs7PFzKiysOCZptcG592ROA@mail.gmail.com>

Hi Elo,
It gave this error message:
CR_plot2.R:14:37: unexpected string constant
13: plot(FDapt,FDcli, pch = 16,  cex.lab = 1.6, cex.axis = 1.4, cex.main =
0.8, font.lab = 1.7, font.axis = 1.7,  col = "red",main = "Simultaneous
Events at CLMX and APTY",ylab="CLMX",xlab="APTY")
14: text(-8,-8, "expression(R^2*"=  0.62"),  r = 0.79, N = 161"
                                        ^
*Jibrin Adejoh Alhassan (Ph.D)*
Department of Physics and Astronomy,
University of Nigeria, Nsukka


On Sun, Feb 4, 2024 at 4:45?PM Jibrin Alhassan <jibrin.alhassan at unn.edu.ng>
wrote:

> Thank you Zhao for the code. When I replotted the graph after inserting
> the code in my script, it gave me this error message without plotting the
> graph:
> Warning message:
> In lm.fit(x, y, offset = offset, singular.ok = singular.ok, ...) :
>  extra argument ?col? will be disregarded.
> My regards.
> *Jibrin Adejoh Alhassan (Ph.D)*
> Department of Physics and Astronomy,
> University of Nigeria, Nsukka
>
>
> On Sun, Feb 4, 2024 at 3:21?PM Jinsong Zhao <jszhao at yeah.net> wrote:
>
>> ?plotmath
>>
>> expression(R^2==0.62)
>>
>> On 2024/2/4 18:10, Jibrin Alhassan wrote:
>> > I have done a scatter plot in R. I want to insert the coefficient of
>> > determination R^2 = 0.62 as a text in the plot. I have tried to write
>> R^2
>> > but could not produce R2. I would appreciate it if someone could help me
>> > with the syntax. I have tried:  expression(paste("", R^2,"=", 0.62)),
>> but
>> > it did not produce R squared, rather it gave me error messages. Thanks.
>> > Jibrin Alhassan
>> > *Jibrin Adejoh Alhassan (Ph.D)*
>> > Department of Physics and Astronomy,
>> > University of Nigeria, Nsukka
>> >
>> >       [[alternative HTML version deleted]]
>> >
>> > ______________________________________________
>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> > https://stat.ethz.ch/mailman/listinfo/r-help
>> > PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> > and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>

	[[alternative HTML version deleted]]


From j|br|n@@|h@@@@n @end|ng |rom unn@edu@ng  Sun Feb  4 17:16:23 2024
From: j|br|n@@|h@@@@n @end|ng |rom unn@edu@ng (Jibrin Alhassan)
Date: Sun, 4 Feb 2024 17:16:23 +0100
Subject: [R] Help
In-Reply-To: <CAEGeL+GoL7v0rrw-LmF2M0+sMbUjs7PFzKiysOCZptcG592ROA@mail.gmail.com>
References: <CAEGeL+EiEd2uiToa1CNGjmq2rmuvmV6j9Nnpj2N8CBfWUrRVaw@mail.gmail.com>
 <7cf73cd9-e6c6-49ce-9fe9-14de39c17c8e@yeah.net>
 <CAEGeL+FU1wPhrpR+=iMhT-Ro6RDfrb8rAoAEbXG18-NbQU5qVQ@mail.gmail.com>
 <CAEGeL+GoL7v0rrw-LmF2M0+sMbUjs7PFzKiysOCZptcG592ROA@mail.gmail.com>
Message-ID: <CAEGeL+HwuqiwbctxUgyQh-rJSTamNweZatvqTZ0ur7Jv1u6JKw@mail.gmail.com>

Here is the script I used to plot the graph indicating the text I wanted to
insert. The line in the script that I have issues with is: text(-8,-8,
"R^2=  0.62",  r = 0.79, N = 161", cex = 2
R^2=  0.62 is not producing R squared = 0.62.
Thanks.
Sys.setenv( TZ="GMT" )
dt <- read.table("CLMXAPTY_sim", col.names = c("FDcli", "FDapt"))
FDcli=dt$FDcli
FDapt=dt$FDapt
setEPS()
postscript(file = "cliapt2.eps")
par(mar = c(4.3, 4.3, 1.3, 1.3), oma = c(1, 1, 1 , 1))
plot(FDapt,FDcli, pch = 16,  cex.lab = 1.6, cex.axis = 1.4, cex.main = 0.8,
font.lab = 1.7, font.axis = 1.7,  col = "red",main = "Simultaneous Events
at CLMX and APTY",ylab="CLMX",xlab="APTY")
text(-8,-8, "R^2=  0.62",  r = 0.79, N = 161", cex = 2 )
abline(lm(FDcli ~ FDapt, col="black"))
dev.off()
*Jibrin Adejoh Alhassan (Ph.D)*
Department of Physics and Astronomy,
University of Nigeria, Nsukka


On Sun, Feb 4, 2024 at 5:03?PM Jibrin Alhassan <jibrin.alhassan at unn.edu.ng>
wrote:

> Hi Elo,
> It gave this error message:
> CR_plot2.R:14:37: unexpected string constant
> 13: plot(FDapt,FDcli, pch = 16,  cex.lab = 1.6, cex.axis = 1.4, cex.main =
> 0.8, font.lab = 1.7, font.axis = 1.7,  col = "red",main = "Simultaneous
> Events at CLMX and APTY",ylab="CLMX",xlab="APTY")
> 14: text(-8,-8, "expression(R^2*"=  0.62"),  r = 0.79, N = 161"
>                                         ^
> *Jibrin Adejoh Alhassan (Ph.D)*
> Department of Physics and Astronomy,
> University of Nigeria, Nsukka
>
>
> On Sun, Feb 4, 2024 at 4:45?PM Jibrin Alhassan <jibrin.alhassan at unn.edu.ng>
> wrote:
>
>> Thank you Zhao for the code. When I replotted the graph after inserting
>> the code in my script, it gave me this error message without plotting the
>> graph:
>> Warning message:
>> In lm.fit(x, y, offset = offset, singular.ok = singular.ok, ...) :
>>  extra argument ?col? will be disregarded.
>> My regards.
>> *Jibrin Adejoh Alhassan (Ph.D)*
>> Department of Physics and Astronomy,
>> University of Nigeria, Nsukka
>>
>>
>> On Sun, Feb 4, 2024 at 3:21?PM Jinsong Zhao <jszhao at yeah.net> wrote:
>>
>>> ?plotmath
>>>
>>> expression(R^2==0.62)
>>>
>>> On 2024/2/4 18:10, Jibrin Alhassan wrote:
>>> > I have done a scatter plot in R. I want to insert the coefficient of
>>> > determination R^2 = 0.62 as a text in the plot. I have tried to write
>>> R^2
>>> > but could not produce R2. I would appreciate it if someone could help
>>> me
>>> > with the syntax. I have tried:  expression(paste("", R^2,"=", 0.62)),
>>> but
>>> > it did not produce R squared, rather it gave me error messages. Thanks.
>>> > Jibrin Alhassan
>>> > *Jibrin Adejoh Alhassan (Ph.D)*
>>> > Department of Physics and Astronomy,
>>> > University of Nigeria, Nsukka
>>> >
>>> >       [[alternative HTML version deleted]]
>>> >
>>> > ______________________________________________
>>> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> > https://stat.ethz.ch/mailman/listinfo/r-help
>>> > PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> > and provide commented, minimal, self-contained, reproducible code.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>

	[[alternative HTML version deleted]]


From tr@xp|@yer @end|ng |rom gm@||@com  Sun Feb  4 19:01:23 2024
From: tr@xp|@yer @end|ng |rom gm@||@com (=?UTF-8?Q?Martin_M=C3=B8ller_Skarbiniks_Pedersen?=)
Date: Sun, 4 Feb 2024 19:01:23 +0100
Subject: [R] Help
In-Reply-To: <CAEGeL+HwuqiwbctxUgyQh-rJSTamNweZatvqTZ0ur7Jv1u6JKw@mail.gmail.com>
References: <CAEGeL+EiEd2uiToa1CNGjmq2rmuvmV6j9Nnpj2N8CBfWUrRVaw@mail.gmail.com>
 <7cf73cd9-e6c6-49ce-9fe9-14de39c17c8e@yeah.net>
 <CAEGeL+FU1wPhrpR+=iMhT-Ro6RDfrb8rAoAEbXG18-NbQU5qVQ@mail.gmail.com>
 <CAEGeL+GoL7v0rrw-LmF2M0+sMbUjs7PFzKiysOCZptcG592ROA@mail.gmail.com>
 <CAEGeL+HwuqiwbctxUgyQh-rJSTamNweZatvqTZ0ur7Jv1u6JKw@mail.gmail.com>
Message-ID: <CAGAA5bftVHmGBkCQrggBgutgAUF8fzOCEbD9rK7aHouNxye2bA@mail.gmail.com>

On Sun, 4 Feb 2024 at 17:26, Jibrin Alhassan <jibrin.alhassan at unn.edu.ng> wrote:
>
> Here is the script I used to plot the graph indicating the text I wanted to
> insert. The line in the script that I have issues with is: text(-8,-8,
> "R^2=  0.62",  r = 0.79, N = 161", cex = 2
> R^2=  0.62 is not producing R squared = 0.62.
> Thanks.

This works for me:

curve(dnorm, from=-3, to=3, main="Normal Distribution")
text(x=0, y=0.1, cex=1.5, expression(R^2 == 0.62))

if you are used to write expression using LaTeX math , then maybe you
like the latex2exp package:
curve(dnorm, from=-3, to=3, main="Normal Distribution")
text(0, 0.1, latex2exp::TeX("$R^2 = 0.62$"))

Regards
Martin


From ro||turner @end|ng |rom po@teo@net  Mon Feb  5 01:06:46 2024
From: ro||turner @end|ng |rom po@teo@net (Rolf Turner)
Date: Mon,  5 Feb 2024 00:06:46 +0000
Subject: [R] Help
In-Reply-To: <CAEGeL+EiEd2uiToa1CNGjmq2rmuvmV6j9Nnpj2N8CBfWUrRVaw@mail.gmail.com>
References: <CAEGeL+EiEd2uiToa1CNGjmq2rmuvmV6j9Nnpj2N8CBfWUrRVaw@mail.gmail.com>
Message-ID: <20240205130646.384993ca@rolf-Latitude-E7470>


Please see fortunes::fortune(285).

cheers,

Rolf Turner

-- 
Honorary Research Fellow
Department of Statistics
University of Auckland
Stats. Dep't. (secretaries) phone:
         +64-9-373-7599 ext. 89622
Home phone: +64-9-480-4619


From j|br|n@@|h@@@@n @end|ng |rom unn@edu@ng  Mon Feb  5 07:25:11 2024
From: j|br|n@@|h@@@@n @end|ng |rom unn@edu@ng (Jibrin Alhassan)
Date: Mon, 5 Feb 2024 07:25:11 +0100
Subject: [R] Help
In-Reply-To: <20240205130646.384993ca@rolf-Latitude-E7470>
References: <CAEGeL+EiEd2uiToa1CNGjmq2rmuvmV6j9Nnpj2N8CBfWUrRVaw@mail.gmail.com>
 <20240205130646.384993ca@rolf-Latitude-E7470>
Message-ID: <CAEGeL+FCcM13F8aQ5TRs5ohjn-csCtfe22o2qiCNCRJpEVS7eA@mail.gmail.com>

Many thanks.

On Mon, Feb 5, 2024, 1:06 AM Rolf Turner <rolfturner at posteo.net> wrote:

>
> Please see fortunes::fortune(285).
>
> cheers,
>
> Rolf Turner
>
> --
> Honorary Research Fellow
> Department of Statistics
> University of Auckland
> Stats. Dep't. (secretaries) phone:
>          +64-9-373-7599 ext. 89622
> Home phone: +64-9-480-4619
>

	[[alternative HTML version deleted]]


From k|mmo@e|o @end|ng |rom utu@||  Mon Feb  5 07:40:17 2024
From: k|mmo@e|o @end|ng |rom utu@|| (Kimmo Elo)
Date: Mon, 5 Feb 2024 06:40:17 +0000
Subject: [R] Help
In-Reply-To: <CAEGeL+HwuqiwbctxUgyQh-rJSTamNweZatvqTZ0ur7Jv1u6JKw@mail.gmail.com>
References: <CAEGeL+EiEd2uiToa1CNGjmq2rmuvmV6j9Nnpj2N8CBfWUrRVaw@mail.gmail.com>
 <7cf73cd9-e6c6-49ce-9fe9-14de39c17c8e@yeah.net>
 <CAEGeL+FU1wPhrpR+=iMhT-Ro6RDfrb8rAoAEbXG18-NbQU5qVQ@mail.gmail.com>
 <CAEGeL+GoL7v0rrw-LmF2M0+sMbUjs7PFzKiysOCZptcG592ROA@mail.gmail.com>
 <CAEGeL+HwuqiwbctxUgyQh-rJSTamNweZatvqTZ0ur7Jv1u6JKw@mail.gmail.com>
Message-ID: <6336a0a33a73e5f94e7227937f23df47363fe5ab.camel@utu.fi>

Hi,

the command line with 'text' should be:

text(-8,-8, expression(R^2 * " = 0.62,  r = 0.79, N = 161"), cex = 2 )

Best,

Kimmo

su, 2024-02-04 kello 17:16 +0100, Jibrin Alhassan kirjoitti:
> Here is the script I used to plot the graph indicating the text I
> wanted to
> insert. The line in the script that I have issues with is: text(-8,-
> 8,
> "R^2=? 0.62",? r = 0.79, N = 161", cex = 2
> R^2=? 0.62 is not producing R squared = 0.62.
> Thanks.
> Sys.setenv( TZ="GMT" )
> dt <- read.table("CLMXAPTY_sim", col.names = c("FDcli", "FDapt"))
> FDcli=dt$FDcli
> FDapt=dt$FDapt
> setEPS()
> postscript(file = "cliapt2.eps")
> par(mar = c(4.3, 4.3, 1.3, 1.3), oma = c(1, 1, 1 , 1))
> plot(FDapt,FDcli, pch = 16,? cex.lab = 1.6, cex.axis = 1.4, cex.main
> = 0.8,
> font.lab = 1.7, font.axis = 1.7,? col = "red",main = "Simultaneous
> Events
> at CLMX and APTY",ylab="CLMX",xlab="APTY")
> text(-8,-8, "R^2=? 0.62",? r = 0.79, N = 161", cex = 2 )
> abline(lm(FDcli ~ FDapt, col="black"))
> dev.off()
> *Jibrin Adejoh Alhassan (Ph.D)*
> Department of Physics and Astronomy,
> University of Nigeria, Nsukka
> 
> 
> On Sun, Feb 4, 2024 at 5:03?PM Jibrin Alhassan
> <jibrin.alhassan at unn.edu.ng>
> wrote:
> 
> > Hi Elo,
> > It gave this error message:
> > CR_plot2.R:14:37: unexpected string constant
> > 13: plot(FDapt,FDcli, pch = 16,? cex.lab = 1.6, cex.axis = 1.4,
> > cex.main =
> > 0.8, font.lab = 1.7, font.axis = 1.7,? col = "red",main =
> > "Simultaneous
> > Events at CLMX and APTY",ylab="CLMX",xlab="APTY")
> > 14: text(-8,-8, "expression(R^2*"=? 0.62"),? r = 0.79, N = 161"
> > ??????????????????????????????????????? ^
> > *Jibrin Adejoh Alhassan (Ph.D)*
> > Department of Physics and Astronomy,
> > University of Nigeria, Nsukka
> > 
> > 
> > On Sun, Feb 4, 2024 at 4:45?PM Jibrin Alhassan
> > <jibrin.alhassan at unn.edu.ng>
> > wrote:
> > 
> > > Thank you Zhao for the code. When I replotted the graph after
> > > inserting
> > > the code in my script, it gave me this error message without
> > > plotting the
> > > graph:
> > > Warning message:
> > > In lm.fit(x, y, offset = offset, singular.ok = singular.ok, ...)
> > > :
> > > ?extra argument ?col? will be disregarded.
> > > My regards.
> > > *Jibrin Adejoh Alhassan (Ph.D)*
> > > Department of Physics and Astronomy,
> > > University of Nigeria, Nsukka
> > > 
> > > 
> > > On Sun, Feb 4, 2024 at 3:21?PM Jinsong Zhao <jszhao at yeah.net>
> > > wrote:
> > > 
> > > > ?plotmath
> > > > 
> > > > expression(R^2==0.62)
> > > > 
> > > > On 2024/2/4 18:10, Jibrin Alhassan wrote:
> > > > > I have done a scatter plot in R. I want to insert the
> > > > > coefficient of
> > > > > determination R^2 = 0.62 as a text in the plot. I have tried
> > > > > to write
> > > > R^2
> > > > > but could not produce R2. I would appreciate it if someone
> > > > > could help
> > > > me
> > > > > with the syntax. I have tried:? expression(paste("", R^2,"=",
> > > > > 0.62)),
> > > > but
> > > > > it did not produce R squared, rather it gave me error
> > > > > messages. Thanks.
> > > > > Jibrin Alhassan
> > > > > *Jibrin Adejoh Alhassan (Ph.D)*
> > > > > Department of Physics and Astronomy,
> > > > > University of Nigeria, Nsukka
> > > > > 
> > > > > ????? [[alternative HTML version deleted]]
> > > > > 
> > > > > ______________________________________________
> > > > > R-help at r-project.org?mailing list -- To UNSUBSCRIBE and more,
> > > > > see
> > > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > > PLEASE do read the posting guide
> > > > http://www.R-project.org/posting-guide.html
> > > > > and provide commented, minimal, self-contained, reproducible
> > > > > code.
> > > > 
> > > > ______________________________________________
> > > > R-help at r-project.org?mailing list -- To UNSUBSCRIBE and more,
> > > > see
> > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > PLEASE do read the posting guide
> > > > http://www.R-project.org/posting-guide.html
> > > > and provide commented, minimal, self-contained, reproducible
> > > > code.
> > > > 
> > > 
> 
> ????????[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org?mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From j|br|n@@|h@@@@n @end|ng |rom unn@edu@ng  Mon Feb  5 08:13:10 2024
From: j|br|n@@|h@@@@n @end|ng |rom unn@edu@ng (Jibrin Alhassan)
Date: Mon, 5 Feb 2024 08:13:10 +0100
Subject: [R] Help
In-Reply-To: <6336a0a33a73e5f94e7227937f23df47363fe5ab.camel@utu.fi>
References: <CAEGeL+EiEd2uiToa1CNGjmq2rmuvmV6j9Nnpj2N8CBfWUrRVaw@mail.gmail.com>
 <7cf73cd9-e6c6-49ce-9fe9-14de39c17c8e@yeah.net>
 <CAEGeL+FU1wPhrpR+=iMhT-Ro6RDfrb8rAoAEbXG18-NbQU5qVQ@mail.gmail.com>
 <CAEGeL+GoL7v0rrw-LmF2M0+sMbUjs7PFzKiysOCZptcG592ROA@mail.gmail.com>
 <CAEGeL+HwuqiwbctxUgyQh-rJSTamNweZatvqTZ0ur7Jv1u6JKw@mail.gmail.com>
 <6336a0a33a73e5f94e7227937f23df47363fe5ab.camel@utu.fi>
Message-ID: <CAEGeL+GqpKpSokrdEv8dCn2gPnDdpyFRUgcMNx2RxnBktmwz2Q@mail.gmail.com>

Hi Kimmo,
The code you sent has worked for me. Thank you very much.
*Jibrin Adejoh Alhassan (Ph.D)*
Department of Physics and Astronomy,
University of Nigeria, Nsukka


On Mon, Feb 5, 2024 at 7:40?AM Kimmo Elo <kimmo.elo at utu.fi> wrote:

> Hi,
>
> the command line with 'text' should be:
>
> text(-8,-8, expression(R^2 * " = 0.62,  r = 0.79, N = 161"), cex = 2 )
>
> Best,
>
> Kimmo
>
> su, 2024-02-04 kello 17:16 +0100, Jibrin Alhassan kirjoitti:
> > Here is the script I used to plot the graph indicating the text I
> > wanted to
> > insert. The line in the script that I have issues with is: text(-8,-
> > 8,
> > "R^2=  0.62",  r = 0.79, N = 161", cex = 2
> > R^2=  0.62 is not producing R squared = 0.62.
> > Thanks.
> > Sys.setenv( TZ="GMT" )
> > dt <- read.table("CLMXAPTY_sim", col.names = c("FDcli", "FDapt"))
> > FDcli=dt$FDcli
> > FDapt=dt$FDapt
> > setEPS()
> > postscript(file = "cliapt2.eps")
> > par(mar = c(4.3, 4.3, 1.3, 1.3), oma = c(1, 1, 1 , 1))
> > plot(FDapt,FDcli, pch = 16,  cex.lab = 1.6, cex.axis = 1.4, cex.main
> > = 0.8,
> > font.lab = 1.7, font.axis = 1.7,  col = "red",main = "Simultaneous
> > Events
> > at CLMX and APTY",ylab="CLMX",xlab="APTY")
> > text(-8,-8, "R^2=  0.62",  r = 0.79, N = 161", cex = 2 )
> > abline(lm(FDcli ~ FDapt, col="black"))
> > dev.off()
> > *Jibrin Adejoh Alhassan (Ph.D)*
> > Department of Physics and Astronomy,
> > University of Nigeria, Nsukka
> >
> >
> > On Sun, Feb 4, 2024 at 5:03?PM Jibrin Alhassan
> > <jibrin.alhassan at unn.edu.ng>
> > wrote:
> >
> > > Hi Elo,
> > > It gave this error message:
> > > CR_plot2.R:14:37: unexpected string constant
> > > 13: plot(FDapt,FDcli, pch = 16,  cex.lab = 1.6, cex.axis = 1.4,
> > > cex.main =
> > > 0.8, font.lab = 1.7, font.axis = 1.7,  col = "red",main =
> > > "Simultaneous
> > > Events at CLMX and APTY",ylab="CLMX",xlab="APTY")
> > > 14: text(-8,-8, "expression(R^2*"=  0.62"),  r = 0.79, N = 161"
> > >                                         ^
> > > *Jibrin Adejoh Alhassan (Ph.D)*
> > > Department of Physics and Astronomy,
> > > University of Nigeria, Nsukka
> > >
> > >
> > > On Sun, Feb 4, 2024 at 4:45?PM Jibrin Alhassan
> > > <jibrin.alhassan at unn.edu.ng>
> > > wrote:
> > >
> > > > Thank you Zhao for the code. When I replotted the graph after
> > > > inserting
> > > > the code in my script, it gave me this error message without
> > > > plotting the
> > > > graph:
> > > > Warning message:
> > > > In lm.fit(x, y, offset = offset, singular.ok = singular.ok, ...)
> > > > :
> > > >  extra argument ?col? will be disregarded.
> > > > My regards.
> > > > *Jibrin Adejoh Alhassan (Ph.D)*
> > > > Department of Physics and Astronomy,
> > > > University of Nigeria, Nsukka
> > > >
> > > >
> > > > On Sun, Feb 4, 2024 at 3:21?PM Jinsong Zhao <jszhao at yeah.net>
> > > > wrote:
> > > >
> > > > > ?plotmath
> > > > >
> > > > > expression(R^2==0.62)
> > > > >
> > > > > On 2024/2/4 18:10, Jibrin Alhassan wrote:
> > > > > > I have done a scatter plot in R. I want to insert the
> > > > > > coefficient of
> > > > > > determination R^2 = 0.62 as a text in the plot. I have tried
> > > > > > to write
> > > > > R^2
> > > > > > but could not produce R2. I would appreciate it if someone
> > > > > > could help
> > > > > me
> > > > > > with the syntax. I have tried:  expression(paste("", R^2,"=",
> > > > > > 0.62)),
> > > > > but
> > > > > > it did not produce R squared, rather it gave me error
> > > > > > messages. Thanks.
> > > > > > Jibrin Alhassan
> > > > > > *Jibrin Adejoh Alhassan (Ph.D)*
> > > > > > Department of Physics and Astronomy,
> > > > > > University of Nigeria, Nsukka
> > > > > >
> > > > > >       [[alternative HTML version deleted]]
> > > > > >
> > > > > > ______________________________________________
> > > > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> > > > > > see
> > > > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > > > PLEASE do read the posting guide
> > > > > http://www.R-project.org/posting-guide.html
> > > > > > and provide commented, minimal, self-contained, reproducible
> > > > > > code.
> > > > >
> > > > > ______________________________________________
> > > > > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more,
> > > > > see
> > > > > https://stat.ethz.ch/mailman/listinfo/r-help
> > > > > PLEASE do read the posting guide
> > > > > http://www.R-project.org/posting-guide.html
> > > > > and provide commented, minimal, self-contained, reproducible
> > > > > code.
> > > > >
> > > >
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From sibyiie@stoeckii m@iii@g oii gmx@ch  Mon Feb  5 11:00:16 2024
From: sibyiie@stoeckii m@iii@g oii gmx@ch (sibyiie@stoeckii m@iii@g oii gmx@ch)
Date: Mon, 5 Feb 2024 11:00:16 +0100
Subject: [R] ggarrange & legend
Message-ID: <009201da581a$1ef2e600$5cd8b200$@gmx.ch>

Dear R community

It is possible to adjust the legend in combined ggplots using ggarrange with
be positions top, bottom, left and right.
My question: Is there a function to change the position of the legend to
topright or bottomleft? Right and top etc are in the middle of the axis.

Kind regards
Sibylle


From @n@@j@m@hed1994 @end|ng |rom gm@||@com  Mon Feb  5 12:03:47 2024
From: @n@@j@m@hed1994 @end|ng |rom gm@||@com (Anas Jamshed)
Date: Mon, 5 Feb 2024 16:03:47 +0500
Subject: [R] DrDimont package in R
Message-ID: <CAG0CrLgV34ZcOejR-CZw=q87s3MU+kTssyK8F6fBaVMO-QJGMA@mail.gmail.com>



	[[alternative HTML version deleted]]


From jrkr|de@u @end|ng |rom gm@||@com  Mon Feb  5 13:52:25 2024
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Mon, 5 Feb 2024 07:52:25 -0500
Subject: [R] DrDimont package in R
In-Reply-To: <CAG0CrLgV34ZcOejR-CZw=q87s3MU+kTssyK8F6fBaVMO-QJGMA@mail.gmail.com>
References: <CAG0CrLgV34ZcOejR-CZw=q87s3MU+kTssyK8F6fBaVMO-QJGMA@mail.gmail.com>
Message-ID: <CAKZQJMC=FjgpTPUhot3-AZQWX3jMhLtxhL2Z5B1tTNka7RdYxQ@mail.gmail.com>

Nothing got through.  Try plain text rather than HTML.

On Mon, 5 Feb 2024 at 06:04, Anas Jamshed <anasjamshed1994 at gmail.com> wrote:

>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From jrkr|de@u @end|ng |rom gm@||@com  Mon Feb  5 13:58:37 2024
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Mon, 5 Feb 2024 07:58:37 -0500
Subject: [R] ggarrange & legend
In-Reply-To: <009201da581a$1ef2e600$5cd8b200$@gmx.ch>
References: <009201da581a$1ef2e600$5cd8b200$@gmx.ch>
Message-ID: <CAKZQJMDNXW9TGaEBDY4BQ4Lv-nGSjFbk4r+vr9-=i45cCs7wyQ@mail.gmail.com>

Could you supply us with a MWE (minimal working example)of what you have so
far?
Thanks.

On Mon, 5 Feb 2024 at 05:00, SIBYLLE ST?CKLI via R-help <
r-help at r-project.org> wrote:

> Dear R community
>
> It is possible to adjust the legend in combined ggplots using ggarrange
> with
> be positions top, bottom, left and right.
> My question: Is there a function to change the position of the legend to
> topright or bottomleft? Right and top etc are in the middle of the axis.
>
> Kind regards
> Sibylle
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From sibyiie@stoeckii m@iii@g oii gmx@ch  Mon Feb  5 14:42:39 2024
From: sibyiie@stoeckii m@iii@g oii gmx@ch (sibyiie@stoeckii m@iii@g oii gmx@ch)
Date: Mon, 5 Feb 2024 14:42:39 +0100
Subject: [R] ggarrange & legend
In-Reply-To: <CAKZQJMDNXW9TGaEBDY4BQ4Lv-nGSjFbk4r+vr9-=i45cCs7wyQ@mail.gmail.com>
References: <009201da581a$1ef2e600$5cd8b200$@gmx.ch>
 <CAKZQJMDNXW9TGaEBDY4BQ4Lv-nGSjFbk4r+vr9-=i45cCs7wyQ@mail.gmail.com>
Message-ID: <00ee01da5839$2fa9faa0$8efdefe0$@gmx.ch>

Dear John Kane

Dear R community

 

Here my working example

1.	Example that is working with legend=?top?. However, as mentioned, the legend is in the middle of the top axis. 

mylist<-list(p1, p2)

dev.new(width=28, height=18)

fig1<- ggarrange(plotlist=mylist, common.legend = TRUE, legend="top", labels = c("(A)", "(B)"), font.label = list(size = 18, color = "black"), ncol=2)

fig1

 

2.	My question is how I can position the legend on the topright of the top axis. However, ?topright? is not a common label for legend in ggarrange (but in other plot functions), so legend =?topright? is not working.

mylist<-list(p1, p2)

dev.new(width=28, height=18)

fig1<- ggarrange(plotlist=mylist, common.legend = TRUE, legend="topright", labels = c("(A)", "(B)"), font.label = list(size = 18, color = "black"), ncol=2)

fig1

 

Kind regards

Sibylle

 

From: John Kane <jrkrideau at gmail.com> 
Sent: Monday, February 5, 2024 1:59 PM
To: sibylle.stoeckli at gmx.ch
Cc: r-help at r-project.org
Subject: Re: [R] ggarrange & legend

 

Could you supply us with a MWE (minimal working example)of what you have so far?

Thanks.

 

On Mon, 5 Feb 2024 at 05:00, SIBYLLE ST?CKLI via R-help <r-help at r-project.org <mailto:r-help at r-project.org> > wrote:

Dear R community

It is possible to adjust the legend in combined ggplots using ggarrange with
be positions top, bottom, left and right.
My question: Is there a function to change the position of the legend to
topright or bottomleft? Right and top etc are in the middle of the axis.

Kind regards
Sibylle

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.



-- 

John Kane
Kingston ON Canada


	[[alternative HTML version deleted]]


From jrkr|de@u @end|ng |rom gm@||@com  Mon Feb  5 15:13:32 2024
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Mon, 5 Feb 2024 09:13:32 -0500
Subject: [R] ggarrange & legend
In-Reply-To: <00ee01da5839$2fa9faa0$8efdefe0$@gmx.ch>
References: <009201da581a$1ef2e600$5cd8b200$@gmx.ch>
 <CAKZQJMDNXW9TGaEBDY4BQ4Lv-nGSjFbk4r+vr9-=i45cCs7wyQ@mail.gmail.com>
 <00ee01da5839$2fa9faa0$8efdefe0$@gmx.ch>
Message-ID: <CAKZQJMB8S5wXDgXPFF8GO1DNAivwjTFio3Z_S82-BUE_Lq9PAg@mail.gmail.com>

I'm sorry but that is not a working example.

A working example needs to create the plots being used.

For example, stealing some code from
https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html
#=================================================================

data <https://rdrr.io/r/utils/data.html>("ToothGrowth")df <-
ToothGrowthdf$dose <- as.factor
<https://rdrr.io/r/base/factor.html>(df$dose)# Box plotbxp <-
ggboxplot <https://rpkgs.datanovia.com/ggpubr/reference/ggboxplot.html>(df,
x = "dose", y = "len",    color = "dose", palette = "jco")# Density
plotdens <- ggdensity
<https://rpkgs.datanovia.com/ggpubr/reference/ggdensity.html>(df, x =
"len", fill = "dose", palette = "jco")

mylist<-list(bxp, dens)

dev.new(width=28, height=18)

fig1<- ggarrange(plotlist=mylist, common.legend = TRUE, legend="top",
labels = c("(A)", "(B)"), font.label = list(size = 18, color =
"black"), ncol=2)

fig1
#=====================================================================================


On Mon, 5 Feb 2024 at 08:44, <sibylle.stoeckli at gmx.ch> wrote:

> Dear John Kane
>
> Dear R community
>
>
>
> Here my working example
>
>    1. Example that is working with legend=?top?. However, as mentioned,
>    the legend is in the middle of the top axis.
>
> mylist<-list(p1, p2)
>
> dev.new(width=28, height=18)
>
> fig1<- ggarrange(plotlist=mylist, common.legend = TRUE, legend="top",
> labels = c("(A)", "(B)"), font.label = list(size = 18, color = "black"),
> ncol=2)
>
> fig1
>
>
>
>    1. My question is how I can position the legend on the topright of the
>    top axis. However, ?topright? is not a common label for legend in ggarrange
>    (but in other plot functions), so legend =?topright? is not working.
>
> mylist<-list(p1, p2)
>
> dev.new(width=28, height=18)
>
> fig1<- ggarrange(plotlist=mylist, common.legend = TRUE, legend="topright",
> labels = c("(A)", "(B)"), font.label = list(size = 18, color = "black"),
> ncol=2)
>
> fig1
>
>
>
> Kind regards
>
> Sibylle
>
>
>
> *From:* John Kane <jrkrideau at gmail.com>
> *Sent:* Monday, February 5, 2024 1:59 PM
> *To:* sibylle.stoeckli at gmx.ch
> *Cc:* r-help at r-project.org
> *Subject:* Re: [R] ggarrange & legend
>
>
>
> Could you supply us with a MWE (minimal working example)of what you have
> so far?
>
> Thanks.
>
>
>
> On Mon, 5 Feb 2024 at 05:00, SIBYLLE ST?CKLI via R-help <
> r-help at r-project.org> wrote:
>
> Dear R community
>
> It is possible to adjust the legend in combined ggplots using ggarrange
> with
> be positions top, bottom, left and right.
> My question: Is there a function to change the position of the legend to
> topright or bottomleft? Right and top etc are in the middle of the axis.
>
> Kind regards
> Sibylle
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>
>
> --
>
> John Kane
> Kingston ON Canada
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From tebert @end|ng |rom u||@edu  Mon Feb  5 15:19:32 2024
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Mon, 5 Feb 2024 14:19:32 +0000
Subject: [R] ggarrange & legend
In-Reply-To: <00ee01da5839$2fa9faa0$8efdefe0$@gmx.ch>
References: <009201da581a$1ef2e600$5cd8b200$@gmx.ch>
 <CAKZQJMDNXW9TGaEBDY4BQ4Lv-nGSjFbk4r+vr9-=i45cCs7wyQ@mail.gmail.com>
 <00ee01da5839$2fa9faa0$8efdefe0$@gmx.ch>
Message-ID: <CH3PR22MB45148693E1DB5BF879B42D6DCF472@CH3PR22MB4514.namprd22.prod.outlook.com>

Would something like this help?
library(ggplot2)

# Create a plot
p <- ggplot(mtcars, aes(x = wt, y = mpg)) +
  geom_point() +
  labs(title = "Scatter Plot", x = "Weight", y = "Miles Per Gallon")

# Add text at a specific location
p + annotate("text", x = min(mtcars$wt) + 23, y = max(mtcars$mpg) - 10, label = "Custom Text")


Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of SIBYLLE ST?CKLI via R-help
Sent: Monday, February 5, 2024 8:43 AM
To: 'John Kane' <jrkrideau at gmail.com>
Cc: r-help at r-project.org
Subject: Re: [R] ggarrange & legend

[External Email]

Dear John Kane

Dear R community



Here my working example

1.      Example that is working with legend="top". However, as mentioned, the legend is in the middle of the top axis.

mylist<-list(p1, p2)

dev.new(width=28, height=18)

fig1<- ggarrange(plotlist=mylist, common.legend = TRUE, legend="top", labels = c("(A)", "(B)"), font.label = list(size = 18, color = "black"), ncol=2)

fig1



2.      My question is how I can position the legend on the topright of the top axis. However, "topright" is not a common label for legend in ggarrange (but in other plot functions), so legend ="topright" is not working.

mylist<-list(p1, p2)

dev.new(width=28, height=18)

fig1<- ggarrange(plotlist=mylist, common.legend = TRUE, legend="topright", labels = c("(A)", "(B)"), font.label = list(size = 18, color = "black"), ncol=2)

fig1



Kind regards

Sibylle



From: John Kane <jrkrideau at gmail.com>
Sent: Monday, February 5, 2024 1:59 PM
To: sibylle.stoeckli at gmx.ch
Cc: r-help at r-project.org
Subject: Re: [R] ggarrange & legend



Could you supply us with a MWE (minimal working example)of what you have so far?

Thanks.



On Mon, 5 Feb 2024 at 05:00, SIBYLLE ST?CKLI via R-help <r-help at r-project.org <mailto:r-help at r-project.org> > wrote:

Dear R community

It is possible to adjust the legend in combined ggplots using ggarrange with be positions top, bottom, left and right.
My question: Is there a function to change the position of the legend to topright or bottomleft? Right and top etc are in the middle of the axis.

Kind regards
Sibylle

______________________________________________
R-help at r-project.org <mailto:R-help at r-project.org>  mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.



--

John Kane
Kingston ON Canada


        [[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From jrkr|de@u @end|ng |rom gm@||@com  Mon Feb  5 15:22:44 2024
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Mon, 5 Feb 2024 09:22:44 -0500
Subject: [R] ggarrange & legend
In-Reply-To: <CAKZQJMB8S5wXDgXPFF8GO1DNAivwjTFio3Z_S82-BUE_Lq9PAg@mail.gmail.com>
References: <009201da581a$1ef2e600$5cd8b200$@gmx.ch>
 <CAKZQJMDNXW9TGaEBDY4BQ4Lv-nGSjFbk4r+vr9-=i45cCs7wyQ@mail.gmail.com>
 <00ee01da5839$2fa9faa0$8efdefe0$@gmx.ch>
 <CAKZQJMB8S5wXDgXPFF8GO1DNAivwjTFio3Z_S82-BUE_Lq9PAg@mail.gmail.com>
Message-ID: <CAKZQJMDU7VDRQ+Z6xdDa7RNbKbi6CE=rEuwVJZG7YmrNfmoQOQ@mail.gmail.com>

Blast it hit send by accident. Anyway the code above is a WWE.

I don't see any obvious way no move the legend


On Mon, 5 Feb 2024 at 09:13, John Kane <jrkrideau at gmail.com> wrote:

> I'm sorry but that is not a working example.
>
> A working example needs to create the plots being used.
>
> For example, stealing some code from
> https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html
> #=================================================================
>
> data <https://rdrr.io/r/utils/data.html>("ToothGrowth")df <- ToothGrowthdf$dose <- as.factor <https://rdrr.io/r/base/factor.html>(df$dose)# Box plotbxp <- ggboxplot <https://rpkgs.datanovia.com/ggpubr/reference/ggboxplot.html>(df, x = "dose", y = "len",    color = "dose", palette = "jco")# Density plotdens <- ggdensity <https://rpkgs.datanovia.com/ggpubr/reference/ggdensity.html>(df, x = "len", fill = "dose", palette = "jco")
>
> mylist<-list(bxp, dens)
>
> dev.new(width=28, height=18)
>
> fig1<- ggarrange(plotlist=mylist, common.legend = TRUE, legend="top", labels = c("(A)", "(B)"), font.label = list(size = 18, color = "black"), ncol=2)
>
> fig1
> #=====================================================================================
>
>
> On Mon, 5 Feb 2024 at 08:44, <sibylle.stoeckli at gmx.ch> wrote:
>
>> Dear John Kane
>>
>> Dear R community
>>
>>
>>
>> Here my working example
>>
>>    1. Example that is working with legend=?top?. However, as mentioned,
>>    the legend is in the middle of the top axis.
>>
>> mylist<-list(p1, p2)
>>
>> dev.new(width=28, height=18)
>>
>> fig1<- ggarrange(plotlist=mylist, common.legend = TRUE, legend="top",
>> labels = c("(A)", "(B)"), font.label = list(size = 18, color = "black"),
>> ncol=2)
>>
>> fig1
>>
>>
>>
>>    1. My question is how I can position the legend on the topright of
>>    the top axis. However, ?topright? is not a common label for legend in
>>    ggarrange (but in other plot functions), so legend =?topright? is not
>>    working.
>>
>> mylist<-list(p1, p2)
>>
>> dev.new(width=28, height=18)
>>
>> fig1<- ggarrange(plotlist=mylist, common.legend = TRUE,
>> legend="topright", labels = c("(A)", "(B)"), font.label = list(size = 18,
>> color = "black"), ncol=2)
>>
>> fig1
>>
>>
>>
>> Kind regards
>>
>> Sibylle
>>
>>
>>
>> *From:* John Kane <jrkrideau at gmail.com>
>> *Sent:* Monday, February 5, 2024 1:59 PM
>> *To:* sibylle.stoeckli at gmx.ch
>> *Cc:* r-help at r-project.org
>> *Subject:* Re: [R] ggarrange & legend
>>
>>
>>
>> Could you supply us with a MWE (minimal working example)of what you have
>> so far?
>>
>> Thanks.
>>
>>
>>
>> On Mon, 5 Feb 2024 at 05:00, SIBYLLE ST?CKLI via R-help <
>> r-help at r-project.org> wrote:
>>
>> Dear R community
>>
>> It is possible to adjust the legend in combined ggplots using ggarrange
>> with
>> be positions top, bottom, left and right.
>> My question: Is there a function to change the position of the legend to
>> topright or bottomleft? Right and top etc are in the middle of the axis.
>>
>> Kind regards
>> Sibylle
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>>
>>
>> --
>>
>> John Kane
>> Kingston ON Canada
>>
>
>
> --
> John Kane
> Kingston ON Canada
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From p@u| @end|ng |rom @t@t@@uck|@nd@@c@nz  Tue Feb  6 21:28:38 2024
From: p@u| @end|ng |rom @t@t@@uck|@nd@@c@nz (Paul Murrell)
Date: Wed, 7 Feb 2024 09:28:38 +1300
Subject: [R] ggarrange & legend
In-Reply-To: <CAKZQJMDU7VDRQ+Z6xdDa7RNbKbi6CE=rEuwVJZG7YmrNfmoQOQ@mail.gmail.com>
References: <009201da581a$1ef2e600$5cd8b200$@gmx.ch>
 <CAKZQJMDNXW9TGaEBDY4BQ4Lv-nGSjFbk4r+vr9-=i45cCs7wyQ@mail.gmail.com>
 <00ee01da5839$2fa9faa0$8efdefe0$@gmx.ch>
 <CAKZQJMB8S5wXDgXPFF8GO1DNAivwjTFio3Z_S82-BUE_Lq9PAg@mail.gmail.com>
 <CAKZQJMDU7VDRQ+Z6xdDa7RNbKbi6CE=rEuwVJZG7YmrNfmoQOQ@mail.gmail.com>
Message-ID: <61b6e988-dc04-4742-99bf-dd284b94068a@stat.auckland.ac.nz>

Hi

Using John's example ...


data("ToothGrowth")
df <-ToothGrowth
df$dose <- as.factor(df$dose)
## Box plot
bxp <- ggboxplot(df, x = "dose", y = "len",
	         color = "dose", palette = "jco")
## Density plot
dens <- ggdensity(df, x = "len", fill = "dose", palette = "jco")
mylist<-list(bxp, dens)
dev.new(width=28, height=18)
fig1<- ggarrange(plotlist=mylist, common.legend = TRUE,
                  legend="top",
                  labels = c("(A)", "(B)"),
                  font.label = list(size = 18, color = "black"), ncol=2)
fig1


... the problem is that even though 'ggplot2' allows a numeric 'legend'
(although this result is probably not what you want anyway) ...


bxp + theme(legend.position=c(1, 1))


... ggpubr::ggarrange() passes the 'legend' on to ggpubr:::.plot_grid(),
which does an explicit switch(legend), which fails ...


try(ggarrange(plotlist=mylist, common.legend = TRUE,
               legend=c(1, 1),
               labels = c("(A)", "(B)"),
               font.label = list(size = 18, color = "black"), ncol=2))


One option is to extract the legend
('position' will affect orientation of legend?) ...


legend <- ggpubr::get_legend(bxp, position="top")


... and then draw the legend yourself (in the top-right corner)
and tell ggarange() NOT to draw the legend ...


library(grid)
h <- sum(legend$height)
w <- sum(legend$width)
combined <- ggarrange(plotlist=mylist, common.legend = TRUE,
                       legend="none",
                       labels = c("(A)", "(B)"),
                       font.label = list(size = 18, color = "black"),
                       ncol=2)
grid.newpage()
pushViewport(viewport(y=1, height=h,
                       x=1, width=w,
                       just=c("right", "top")))
grid.draw(legend)
popViewport()
pushViewport(viewport(y=0, height=unit(1, "npc") - h, just="bottom"))
print(combined, newpage=FALSE)
popViewport()


Is that what you were looking for?

Paul


On 6/02/24 03:22, John Kane wrote:
> Blast it hit send by accident. Anyway the code above is a WWE.
> 
> I don't see any obvious way no move the legend
> 
> 
> On Mon, 5 Feb 2024 at 09:13, John Kane <jrkrideau at gmail.com> wrote:
> 
>  > I'm sorry but that is not a working example.
>  >
>  > A working example needs to create the plots being used.
>  >
>  > For example, stealing some code from
>  > https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html 
> <https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html>
>  > #=================================================================
>  >
>  > data <https://rdrr.io/r/utils/data.html 
> <https://rdrr.io/r/utils/data.html>>("ToothGrowth")df <- ToothGrowthdf$dose <- as.factor <https://rdrr.io/r/base/factor.html <https://rdrr.io/r/base/factor.html>>(df$dose)# Box plotbxp <- ggboxplot <https://rpkgs.datanovia.com/ggpubr/reference/ggboxplot.html <https://rpkgs.datanovia.com/ggpubr/reference/ggboxplot.html>>(df, x = "dose", y = "len", color = "dose", palette = "jco")# Density plotdens <- ggdensity <https://rpkgs.datanovia.com/ggpubr/reference/ggdensity.html <https://rpkgs.datanovia.com/ggpubr/reference/ggdensity.html>>(df, x = "len", fill = "dose", palette = "jco")
>  >
>  > mylist<-list(bxp, dens)
>  >
>  > dev.new(width=28, height=18)
>  >
>  > fig1<- ggarrange(plotlist=mylist, common.legend = TRUE, legend="top", 
> labels = c("(A)", "(B)"), font.label = list(size = 18, color = "black"), 
> ncol=2)
>  >
>  > fig1
>  > 
> #=====================================================================================
>  >
>  >
>  > On Mon, 5 Feb 2024 at 08:44, <sibylle.stoeckli at gmx.ch> wrote:
>  >
>  >> Dear John Kane
>  >>
>  >> Dear R community
>  >>
>  >>
>  >>
>  >> Here my working example
>  >>
>  >> 1. Example that is working with legend=?top?. However, as mentioned,
>  >> the legend is in the middle of the top axis.
>  >>
>  >> mylist<-list(p1, p2)
>  >>
>  >> dev.new(width=28, height=18)
>  >>
>  >> fig1<- ggarrange(plotlist=mylist, common.legend = TRUE, legend="top",
>  >> labels = c("(A)", "(B)"), font.label = list(size = 18, color = "black"),
>  >> ncol=2)
>  >>
>  >> fig1
>  >>
>  >>
>  >>
>  >> 1. My question is how I can position the legend on the topright of
>  >> the top axis. However, ?topright? is not a common label for legend in
>  >> ggarrange (but in other plot functions), so legend =?topright? is not
>  >> working.
>  >>
>  >> mylist<-list(p1, p2)
>  >>
>  >> dev.new(width=28, height=18)
>  >>
>  >> fig1<- ggarrange(plotlist=mylist, common.legend = TRUE,
>  >> legend="topright", labels = c("(A)", "(B)"), font.label = list(size 
> = 18,
>  >> color = "black"), ncol=2)
>  >>
>  >> fig1
>  >>
>  >>
>  >>
>  >> Kind regards
>  >>
>  >> Sibylle
>  >>
>  >>
>  >>
>  >> *From:* John Kane <jrkrideau at gmail.com>
>  >> *Sent:* Monday, February 5, 2024 1:59 PM
>  >> *To:* sibylle.stoeckli at gmx.ch
>  >> *Cc:* r-help at r-project.org
>  >> *Subject:* Re: [R] ggarrange & legend
>  >>
>  >>
>  >>
>  >> Could you supply us with a MWE (minimal working example)of what you have
>  >> so far?
>  >>
>  >> Thanks.
>  >>
>  >>
>  >>
>  >> On Mon, 5 Feb 2024 at 05:00, SIBYLLE ST?CKLI via R-help <
>  >> r-help at r-project.org> wrote:
>  >>
>  >> Dear R community
>  >>
>  >> It is possible to adjust the legend in combined ggplots using ggarrange
>  >> with
>  >> be positions top, bottom, left and right.
>  >> My question: Is there a function to change the position of the legend to
>  >> topright or bottomleft? Right and top etc are in the middle of the axis.
>  >>
>  >> Kind regards
>  >> Sibylle
>  >>
>  >> ______________________________________________
>  >> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>  >> https://stat.ethz.ch/mailman/listinfo/r-help 
> <https://stat.ethz.ch/mailman/listinfo/r-help>
>  >> PLEASE do read the posting guide
>  >> http://www.R-project.org/posting-guide.html 
> <http://www.R-project.org/posting-guide.html>
>  >> and provide commented, minimal, self-contained, reproducible code.
>  >>
>  >>
>  >>
>  >> --
>  >>
>  >> John Kane
>  >> Kingston ON Canada
>  >>
>  >
>  >
>  > --
>  > John Kane
>  > Kingston ON Canada
>  >
> 
> 
> -- 
> John Kane
> Kingston ON Canada
> 
> [[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help 
> <https://stat.ethz.ch/mailman/listinfo/r-help>
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html 
> <http://www.R-project.org/posting-guide.html>
> and provide commented, minimal, self-contained, reproducible code.

-- 
Dr Paul Murrell
Te Kura Tatauranga | Department of Statistics
Waipapa Taumata Rau | The University of Auckland
Private Bag 92019, Auckland 1142, New Zealand
64 9 3737599 x85392
paul at stat.auckland.ac.nz
www.stat.auckland.ac.nz/~paul/


From @rb@utjc @end|ng |rom gm@||@com  Thu Feb  8 02:18:11 2024
From: @rb@utjc @end|ng |rom gm@||@com (Jean-Claude Arbaut)
Date: Thu, 8 Feb 2024 02:18:11 +0100
Subject: [R] Is simplify2array working for dimension > 2?
Message-ID: <CANufCk64bQiuD+rSf+_1kxeOHjfhfdcayseGsacf7MVSt8QLkg@mail.gmail.com>

Reading the doc for ?simplify2array, I got the impression that with the
'higher = T' argument the function returns an array of dimension greater
than 2 when it makes sense (the doc says "when appropriate", which is
rather vague). I would expect

a <- list(
  list(list(1, 2), list(3, 4)),
  list(list(5, 6), list(7, 8))
)
simplify2array(a, higher = T)

to return the same (possibly up to a dimension permutation) as
array(1:8, dim = c(2, 2, 2))

However, in this case simplify2array returns a matrix (i.e. 2 dimensional
array), whose elements are lists.
It's the same as
structure(list(list(1, 2), list(3, 4), list(5, 6), list(7, 8)), dim = c(2,
2))

I get the same behavior with
a <- list(
  list(c(1, 2), c(3, 4)),
  list(c(5, 6), c(7, 8))
)
but then the matrix elements are numeric vectors instead of lists.

Did I miss something to get the result I expected with this function? Or is
it a bug? Or maybe the function is not supposed to return a higher
dimensional array, and I didn't understand the documentation correctly?

There is a workaround, one can do for instance
array(unlist(a), dim = c(2, 2, 2))
and there may be better options (checking dimensions?).

In case it's important: running R 4.3.2 on Debian 12.4.

Best regards,

Jean-Claude Arbaut

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Thu Feb  8 10:32:35 2024
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 8 Feb 2024 01:32:35 -0800
Subject: [R] Is simplify2array working for dimension > 2?
In-Reply-To: <CANufCk64bQiuD+rSf+_1kxeOHjfhfdcayseGsacf7MVSt8QLkg@mail.gmail.com>
References: <CANufCk64bQiuD+rSf+_1kxeOHjfhfdcayseGsacf7MVSt8QLkg@mail.gmail.com>
Message-ID: <CAGxFJbRvMX=CTLedrS1aLoJms4iVF1Ei6WxX143xZJgpU3kLLQ@mail.gmail.com>

Jean-Claude:

Well, here's my "explanation". Caveat emptor!

Note that:
"simplify2array() is the utility called from sapply() when simplify is
not false"

and

> sapply(a, I, simplify = "array")
     [,1]   [,2]
[1,] list,2 list,2
[2,] list,2 list,2

So it seems that simplify2array() is not intended to operate in the
way that you expected, i.e. that recursive simplification is done.
And, indeed, if you check the code for the function, you will see that
that is the case. Perhaps the key phrase in the docs is in the
sapply() part that says:

"sapply is a user-friendly version and wrapper of lapply by default
returning a vector, matrix or, if simplify = "array", an array ***if
appropriate***, by applying simplify2array(). "   In other words,
recursive simplification is considered not "appropriate".

FWIW I also find this somewhat confusing and think that explicitly
saying that recursive simplification is not done might make it less
so. But writing docs that  address all our possible misconceptions is
pretty difficult (or impossible!), and maybe adding that explicit
caveat would confuse others even more... :-(

Cheers,
Bert









On Thu, Feb 8, 2024 at 12:12?AM Jean-Claude Arbaut <arbautjc at gmail.com> wrote:
>
> Reading the doc for ?simplify2array, I got the impression that with the
> 'higher = T' argument the function returns an array of dimension greater
> than 2 when it makes sense (the doc says "when appropriate", which is
> rather vague). I would expect
>
> a <- list(
>   list(list(1, 2), list(3, 4)),
>   list(list(5, 6), list(7, 8))
> )
> simplify2array(a, higher = T)
>
> to return the same (possibly up to a dimension permutation) as
> array(1:8, dim = c(2, 2, 2))
>
> However, in this case simplify2array returns a matrix (i.e. 2 dimensional
> array), whose elements are lists.
> It's the same as
> structure(list(list(1, 2), list(3, 4), list(5, 6), list(7, 8)), dim = c(2,
> 2))
>
> I get the same behavior with
> a <- list(
>   list(c(1, 2), c(3, 4)),
>   list(c(5, 6), c(7, 8))
> )
> but then the matrix elements are numeric vectors instead of lists.
>
> Did I miss something to get the result I expected with this function? Or is
> it a bug? Or maybe the function is not supposed to return a higher
> dimensional array, and I didn't understand the documentation correctly?
>
> There is a workaround, one can do for instance
> array(unlist(a), dim = c(2, 2, 2))
> and there may be better options (checking dimensions?).
>
> In case it's important: running R 4.3.2 on Debian 12.4.
>
> Best regards,
>
> Jean-Claude Arbaut
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From |@go@g|ne @end|ng |rom @jd@e@  Fri Feb  9 12:25:56 2024
From: |@go@g|ne @end|ng |rom @jd@e@ (=?utf-8?B?SWFnbyBHaW7DqSBWw6F6cXVleg==?=)
Date: Fri, 9 Feb 2024 11:25:56 +0000
Subject: [R] Avoiding Delete key function as 'Quit R' in Rterm when there
 are no characters in cursor line
Message-ID: <AM6PR02MB44232D0185AEEA5CAFB6CAE4944B2@AM6PR02MB4423.eurprd02.prod.outlook.com>

Hi all,

I cite from README.Rterm

^D, DEL?????: Delete the character under the cursor.

That is the general behaviour, but when there is no character (neither under the cursor nor at its left), pressing the Delete key suggests closing the R terminal. Is there any (configurable) way to avoid this behaviour?

Thanks!

Best regards,
Iago

	[[alternative HTML version deleted]]


From @rb@utjc @end|ng |rom gm@||@com  Thu Feb  8 23:14:58 2024
From: @rb@utjc @end|ng |rom gm@||@com (Jean-Claude Arbaut)
Date: Thu, 8 Feb 2024 23:14:58 +0100
Subject: [R] Is simplify2array working for dimension > 2?
In-Reply-To: <CAGxFJbRvMX=CTLedrS1aLoJms4iVF1Ei6WxX143xZJgpU3kLLQ@mail.gmail.com>
References: <CANufCk64bQiuD+rSf+_1kxeOHjfhfdcayseGsacf7MVSt8QLkg@mail.gmail.com>
 <CAGxFJbRvMX=CTLedrS1aLoJms4iVF1Ei6WxX143xZJgpU3kLLQ@mail.gmail.com>
Message-ID: <CANufCk6afaSDTcdKFfjAgj1p-Kj4+DLPZYaDD8TXJurW2mERkQ@mail.gmail.com>

Re your mention in your other mail (which didn't go to r-help) of this part
of the doc:

"The default value, TRUE, returns a vector or matrix if appropriate,
whereas if simplify = "array" the result may be an array of ?rank?
(==length(dim(.))) **one higher than the result of FUN(X[[i]]).**"

It's not I understood this, but it makes some sense:

sapply(1:2, function(i) diag(3)) is a matrix, but
sapply(1:2, function(i) diag(3), simplify = "array") is a rank-3 array.

So this is the "appropriate case", and recursively simplifying nested list
to high rank arrays is not something that's supposed to be done.

And indeed, simplify2array(list(diag(2), diag(2))) does yield a rank-3
array as well. And it works for a list of rank-3 arrays, converted to
rank-4, etc.

So list of array is ok, list of list is not, except for rank 2. The
behavior for rank 2 led me to think it applied as well for higher rank, and
the doc for the 'higher' argument seemed to confirm this, but I was a bit
optimistic.

Thanks for your answer. I believe the doc may be improved a little bit, but
the intent looks clearer now.



Le jeu. 8 f?vr. 2024 ? 10:32, Bert Gunter <bgunter.4567 at gmail.com> a ?crit :

> Jean-Claude:
>
> Well, here's my "explanation". Caveat emptor!
>
> Note that:
> "simplify2array() is the utility called from sapply() when simplify is
> not false"
>
> and
>
> > sapply(a, I, simplify = "array")
>      [,1]   [,2]
> [1,] list,2 list,2
> [2,] list,2 list,2
>
> So it seems that simplify2array() is not intended to operate in the
> way that you expected, i.e. that recursive simplification is done.
> And, indeed, if you check the code for the function, you will see that
> that is the case. Perhaps the key phrase in the docs is in the
> sapply() part that says:
>
> "sapply is a user-friendly version and wrapper of lapply by default
> returning a vector, matrix or, if simplify = "array", an array ***if
> appropriate***, by applying simplify2array(). "   In other words,
> recursive simplification is considered not "appropriate".
>
> FWIW I also find this somewhat confusing and think that explicitly
> saying that recursive simplification is not done might make it less
> so. But writing docs that  address all our possible misconceptions is
> pretty difficult (or impossible!), and maybe adding that explicit
> caveat would confuse others even more... :-(
>
> Cheers,
> Bert
>
>
>
>
>
>
>
>
>
> On Thu, Feb 8, 2024 at 12:12?AM Jean-Claude Arbaut <arbautjc at gmail.com>
> wrote:
> >
> > Reading the doc for ?simplify2array, I got the impression that with the
> > 'higher = T' argument the function returns an array of dimension greater
> > than 2 when it makes sense (the doc says "when appropriate", which is
> > rather vague). I would expect
> >
> > a <- list(
> >   list(list(1, 2), list(3, 4)),
> >   list(list(5, 6), list(7, 8))
> > )
> > simplify2array(a, higher = T)
> >
> > to return the same (possibly up to a dimension permutation) as
> > array(1:8, dim = c(2, 2, 2))
> >
> > However, in this case simplify2array returns a matrix (i.e. 2 dimensional
> > array), whose elements are lists.
> > It's the same as
> > structure(list(list(1, 2), list(3, 4), list(5, 6), list(7, 8)), dim =
> c(2,
> > 2))
> >
> > I get the same behavior with
> > a <- list(
> >   list(c(1, 2), c(3, 4)),
> >   list(c(5, 6), c(7, 8))
> > )
> > but then the matrix elements are numeric vectors instead of lists.
> >
> > Did I miss something to get the result I expected with this function? Or
> is
> > it a bug? Or maybe the function is not supposed to return a higher
> > dimensional array, and I didn't understand the documentation correctly?
> >
> > There is a workaround, one can do for instance
> > array(unlist(a), dim = c(2, 2, 2))
> > and there may be better options (checking dimensions?).
> >
> > In case it's important: running R 4.3.2 on Debian 12.4.
> >
> > Best regards,
> >
> > Jean-Claude Arbaut
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |@go@g|ne @end|ng |rom @jd@e@  Fri Feb  9 16:03:52 2024
From: |@go@g|ne @end|ng |rom @jd@e@ (=?utf-8?B?SWFnbyBHaW7DqSBWw6F6cXVleg==?=)
Date: Fri, 9 Feb 2024 15:03:52 +0000
Subject: [R] 
 Avoiding Delete key function as 'Quit R' in Rterm when there
 are no characters in cursor line
In-Reply-To: <fdd21940-a5d2-4d43-85c4-66ed3bce8310@gmail.com>
References: <AM6PR02MB44232D0185AEEA5CAFB6CAE4944B2@AM6PR02MB4423.eurprd02.prod.outlook.com>
 <fdd21940-a5d2-4d43-85c4-66ed3bce8310@gmail.com>
Message-ID: <AM6PR02MB4423C21E3B6538A1FD962316944B2@AM6PR02MB4423.eurprd02.prod.outlook.com>

Yes, indeed, I am talking about Rterm in Windows.

Iago
________________________________
De: Duncan Murdoch <murdoch.duncan at gmail.com>
Enviat el: divendres, 9 de febrer de 2024 13:50
Per a: Iago Gin? V?zquez <iago.gine at sjd.es>
Tema: Re: [R] Avoiding Delete key function as 'Quit R' in Rterm when there are no characters in cursor line

On 09/02/2024 6:25 a.m., Iago Gin? V?zquez wrote:
> Hi all,
>
> I cite from README.Rterm
>
> ^D, DEL?????: Delete the character under the cursor.
>
> That is the general behaviour, but when there is no character (neither under the cursor nor at its left), pressing the Delete key suggests closing the R terminal. Is there any (configurable) way to avoid this behaviour?

Are you talking about rterm in Windows, or which front end?

Duncan Murdoch


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Feb  9 18:20:44 2024
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 9 Feb 2024 12:20:44 -0500
Subject: [R] 
 Avoiding Delete key function as 'Quit R' in Rterm when there
 are no characters in cursor line
In-Reply-To: <AM6PR02MB4423C21E3B6538A1FD962316944B2@AM6PR02MB4423.eurprd02.prod.outlook.com>
References: <AM6PR02MB44232D0185AEEA5CAFB6CAE4944B2@AM6PR02MB4423.eurprd02.prod.outlook.com>
 <fdd21940-a5d2-4d43-85c4-66ed3bce8310@gmail.com>
 <AM6PR02MB4423C21E3B6538A1FD962316944B2@AM6PR02MB4423.eurprd02.prod.outlook.com>
Message-ID: <cc818ba3-8fd6-48f5-8e8b-7b6347d5ce39@gmail.com>

That looks to me like a bug, but I don't use Windows any more, so I 
won't offer to try to fix it for you.  In fact I don't think Rterm has 
many users at all:  most Windows users probably use RStudio or one of 
the other graphical front ends (Visual Studio, Emacs, Rgui, etc.)

So maybe you can track down the issue, or someone else will try.  Or 
maybe you'll just have to avoid triggering the bug (if it really is one).

Duncan Murdoch

On 09/02/2024 10:03 a.m., Iago Gin? V?zquez wrote:
> Yes, indeed, I am talking about Rterm in Windows.
> 
> Iago
> ------------------------------------------------------------------------
> *De:* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Enviat el:* divendres, 9 de febrer de 2024 13:50
> *Per a:* Iago Gin? V?zquez <iago.gine at sjd.es>
> *Tema:* Re: [R] Avoiding Delete key function as 'Quit R' in Rterm when 
> there are no characters in cursor line
> On 09/02/2024 6:25 a.m., Iago Gin? V?zquez wrote:
>> Hi all,
>> 
>> I cite from README.Rterm
>> 
>> ^D, DEL?????: Delete the character under the cursor.
>> 
>> That is the general behaviour, but when there is no character (neither under the cursor nor at its left), pressing the Delete key suggests closing the R terminal. Is there any (configurable) way to avoid this behaviour?
> 
> Are you talking about rterm in Windows, or which front end?
> 
> Duncan Murdoch
>


From po|c1410 @end|ng |rom gm@||@com  Fri Feb  9 18:28:50 2024
From: po|c1410 @end|ng |rom gm@||@com (CALUM POLWART)
Date: Fri, 9 Feb 2024 17:28:50 +0000
Subject: [R] 
 Avoiding Delete key function as 'Quit R' in Rterm when there
 are no characters in cursor line
In-Reply-To: <cc818ba3-8fd6-48f5-8e8b-7b6347d5ce39@gmail.com>
References: <AM6PR02MB44232D0185AEEA5CAFB6CAE4944B2@AM6PR02MB4423.eurprd02.prod.outlook.com>
 <fdd21940-a5d2-4d43-85c4-66ed3bce8310@gmail.com>
 <AM6PR02MB4423C21E3B6538A1FD962316944B2@AM6PR02MB4423.eurprd02.prod.outlook.com>
 <cc818ba3-8fd6-48f5-8e8b-7b6347d5ce39@gmail.com>
Message-ID: <CA+etgPnD=8r_5Jgyk672S-50mYfWDzdcSOr7HBEo9eO-e84WOQ@mail.gmail.com>

I don't use term, but I've just tested it and this is reproducable.

Is it a bug? Not sure. If you hit c after getting the message it will
cancel the q() request.


On Fri, 9 Feb 2024, 17:21 Duncan Murdoch, <murdoch.duncan at gmail.com> wrote:

> That looks to me like a bug, but I don't use Windows any more, so I
> won't offer to try to fix it for you.  In fact I don't think Rterm has
> many users at all:  most Windows users probably use RStudio or one of
> the other graphical front ends (Visual Studio, Emacs, Rgui, etc.)
>
> So maybe you can track down the issue, or someone else will try.  Or
> maybe you'll just have to avoid triggering the bug (if it really is one).
>
> Duncan Murdoch
>
> On 09/02/2024 10:03 a.m., Iago Gin? V?zquez wrote:
> > Yes, indeed, I am talking about Rterm in Windows.
> >
> > Iago
> > ------------------------------------------------------------------------
> > *De:* Duncan Murdoch <murdoch.duncan at gmail.com>
> > *Enviat el:* divendres, 9 de febrer de 2024 13:50
> > *Per a:* Iago Gin? V?zquez <iago.gine at sjd.es>
> > *Tema:* Re: [R] Avoiding Delete key function as 'Quit R' in Rterm when
> > there are no characters in cursor line
> > On 09/02/2024 6:25 a.m., Iago Gin? V?zquez wrote:
> >> Hi all,
> >>
> >> I cite from README.Rterm
> >>
> >> ^D, DEL : Delete the character under the cursor.
> >>
> >> That is the general behaviour, but when there is no character (neither
> under the cursor nor at its left), pressing the Delete key suggests closing
> the R terminal. Is there any (configurable) way to avoid this behaviour?
> >
> > Are you talking about rterm in Windows, or which front end?
> >
> > Duncan Murdoch
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |@go@g|ne @end|ng |rom @jd@e@  Fri Feb  9 21:39:48 2024
From: |@go@g|ne @end|ng |rom @jd@e@ (=?utf-8?B?SWFnbyBHaW7DqSBWw6F6cXVleg==?=)
Date: Fri, 9 Feb 2024 20:39:48 +0000
Subject: [R] 
 Avoiding Delete key function as 'Quit R' in Rterm when there
 are no characters in cursor line
In-Reply-To: <CA+etgPnD=8r_5Jgyk672S-50mYfWDzdcSOr7HBEo9eO-e84WOQ@mail.gmail.com>
References: <AM6PR02MB44232D0185AEEA5CAFB6CAE4944B2@AM6PR02MB4423.eurprd02.prod.outlook.com>
 <fdd21940-a5d2-4d43-85c4-66ed3bce8310@gmail.com>
 <AM6PR02MB4423C21E3B6538A1FD962316944B2@AM6PR02MB4423.eurprd02.prod.outlook.com>
 <cc818ba3-8fd6-48f5-8e8b-7b6347d5ce39@gmail.com>
 <CA+etgPnD=8r_5Jgyk672S-50mYfWDzdcSOr7HBEo9eO-e84WOQ@mail.gmail.com>
Message-ID: <AM6PR02MB4423799DFE3EF7EE0DD4DC4C944B2@AM6PR02MB4423.eurprd02.prod.outlook.com>

Duncan, do you think it's worth to comment this in R-devel list?

Iago

________________________________
De: CALUM POLWART <polc1410 at gmail.com>
Enviat el: divendres, 9 de febrer de 2024 18:28
Per a: Duncan Murdoch <murdoch.duncan at gmail.com>
A/c: Iago Gin? V?zquez <iago.gine at sjd.es>; r-help at r-project.org <r-help at r-project.org>
Tema: Re: [R] Avoiding Delete key function as 'Quit R' in Rterm when there are no characters in cursor line

I don't use term, but I've just tested it and this is reproducable.

Is it a bug? Not sure. If you hit c after getting the message it will cancel the q() request.


On Fri, 9 Feb 2024, 17:21 Duncan Murdoch, <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>> wrote:
That looks to me like a bug, but I don't use Windows any more, so I
won't offer to try to fix it for you.  In fact I don't think Rterm has
many users at all:  most Windows users probably use RStudio or one of
the other graphical front ends (Visual Studio, Emacs, Rgui, etc.)

So maybe you can track down the issue, or someone else will try.  Or
maybe you'll just have to avoid triggering the bug (if it really is one).

Duncan Murdoch

On 09/02/2024 10:03 a.m., Iago Gin? V?zquez wrote:
> Yes, indeed, I am talking about Rterm in Windows.
>
> Iago
> ------------------------------------------------------------------------
> *De:* Duncan Murdoch <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>>
> *Enviat el:* divendres, 9 de febrer de 2024 13:50
> *Per a:* Iago Gin? V?zquez <iago.gine at sjd.es<mailto:iago.gine at sjd.es>>
> *Tema:* Re: [R] Avoiding Delete key function as 'Quit R' in Rterm when
> there are no characters in cursor line
> On 09/02/2024 6:25 a.m., Iago Gin? V?zquez wrote:
>> Hi all,
>>
>> I cite from README.Rterm
>>
>> ^D, DEL?????: Delete the character under the cursor.
>>
>> That is the general behaviour, but when there is no character (neither under the cursor nor at its left), pressing the Delete key suggests closing the R terminal. Is there any (configurable) way to avoid this behaviour?
>
> Are you talking about rterm in Windows, or which front end?
>
> Duncan Murdoch
>

______________________________________________
R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From tom@@@k@||ber@ @end|ng |rom gm@||@com  Mon Feb 12 11:18:01 2024
From: tom@@@k@||ber@ @end|ng |rom gm@||@com (Tomas Kalibera)
Date: Mon, 12 Feb 2024 11:18:01 +0100
Subject: [R] 
 Avoiding Delete key function as 'Quit R' in Rterm when there
 are no characters in cursor line
In-Reply-To: <AM6PR02MB4423799DFE3EF7EE0DD4DC4C944B2@AM6PR02MB4423.eurprd02.prod.outlook.com>
References: <AM6PR02MB44232D0185AEEA5CAFB6CAE4944B2@AM6PR02MB4423.eurprd02.prod.outlook.com>
 <fdd21940-a5d2-4d43-85c4-66ed3bce8310@gmail.com>
 <AM6PR02MB4423C21E3B6538A1FD962316944B2@AM6PR02MB4423.eurprd02.prod.outlook.com>
 <cc818ba3-8fd6-48f5-8e8b-7b6347d5ce39@gmail.com>
 <CA+etgPnD=8r_5Jgyk672S-50mYfWDzdcSOr7HBEo9eO-e84WOQ@mail.gmail.com>
 <AM6PR02MB4423799DFE3EF7EE0DD4DC4C944B2@AM6PR02MB4423.eurprd02.prod.outlook.com>
Message-ID: <5a2995dd-a134-42a9-903f-07c1769a9e88@gmail.com>

On 2/9/24 21:39, Iago Gin? V?zquez wrote:
> Duncan, do you think it's worth to comment this in R-devel list?

Duncan filed a bug report via R bugzilla (thanks).

There is no way to disable this functionality and it has existed for 
very long time, I tested that at least in R 3.0. Optionally ending the 
session was I believe intentional with Ctrl+D, when the input is empty, 
and it is also how Unix terminals work. But ending the session with DEL 
was probably an implementation compromise and I've changed that in 
R-devel. Thanks for the report.

More implementation details in the bugzilla report:
https://bugs.r-project.org/show_bug.cgi?id=18666

Best
Tomas

> Iago
>
> ________________________________
> De: CALUM POLWART <polc1410 at gmail.com>
> Enviat el: divendres, 9 de febrer de 2024 18:28
> Per a: Duncan Murdoch <murdoch.duncan at gmail.com>
> A/c: Iago Gin? V?zquez <iago.gine at sjd.es>; r-help at r-project.org <r-help at r-project.org>
> Tema: Re: [R] Avoiding Delete key function as 'Quit R' in Rterm when there are no characters in cursor line
>
> I don't use term, but I've just tested it and this is reproducable.
>
> Is it a bug? Not sure. If you hit c after getting the message it will cancel the q() request.
>
>
> On Fri, 9 Feb 2024, 17:21 Duncan Murdoch, <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>> wrote:
> That looks to me like a bug, but I don't use Windows any more, so I
> won't offer to try to fix it for you.  In fact I don't think Rterm has
> many users at all:  most Windows users probably use RStudio or one of
> the other graphical front ends (Visual Studio, Emacs, Rgui, etc.)
>
> So maybe you can track down the issue, or someone else will try.  Or
> maybe you'll just have to avoid triggering the bug (if it really is one).
>
> Duncan Murdoch
>
> On 09/02/2024 10:03 a.m., Iago Gin? V?zquez wrote:
>> Yes, indeed, I am talking about Rterm in Windows.
>>
>> Iago
>> ------------------------------------------------------------------------
>> *De:* Duncan Murdoch <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>>
>> *Enviat el:* divendres, 9 de febrer de 2024 13:50
>> *Per a:* Iago Gin? V?zquez <iago.gine at sjd.es<mailto:iago.gine at sjd.es>>
>> *Tema:* Re: [R] Avoiding Delete key function as 'Quit R' in Rterm when
>> there are no characters in cursor line
>> On 09/02/2024 6:25 a.m., Iago Gin? V?zquez wrote:
>>> Hi all,
>>>
>>> I cite from README.Rterm
>>>
>>> ^D, DEL?????: Delete the character under the cursor.
>>>
>>> That is the general behaviour, but when there is no character (neither under the cursor nor at its left), pressing the Delete key suggests closing the R terminal. Is there any (configurable) way to avoid this behaviour?
>> Are you talking about rterm in Windows, or which front end?
>>
>> Duncan Murdoch
>>
> ______________________________________________
> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From |@go@g|ne @end|ng |rom @jd@e@  Mon Feb 12 11:24:05 2024
From: |@go@g|ne @end|ng |rom @jd@e@ (=?utf-8?B?SWFnbyBHaW7DqSBWw6F6cXVleg==?=)
Date: Mon, 12 Feb 2024 10:24:05 +0000
Subject: [R] 
 Avoiding Delete key function as 'Quit R' in Rterm when there
 are no characters in cursor line
In-Reply-To: <5a2995dd-a134-42a9-903f-07c1769a9e88@gmail.com>
References: <AM6PR02MB44232D0185AEEA5CAFB6CAE4944B2@AM6PR02MB4423.eurprd02.prod.outlook.com>
 <fdd21940-a5d2-4d43-85c4-66ed3bce8310@gmail.com>
 <AM6PR02MB4423C21E3B6538A1FD962316944B2@AM6PR02MB4423.eurprd02.prod.outlook.com>
 <cc818ba3-8fd6-48f5-8e8b-7b6347d5ce39@gmail.com>
 <CA+etgPnD=8r_5Jgyk672S-50mYfWDzdcSOr7HBEo9eO-e84WOQ@mail.gmail.com>
 <AM6PR02MB4423799DFE3EF7EE0DD4DC4C944B2@AM6PR02MB4423.eurprd02.prod.outlook.com>
 <5a2995dd-a134-42a9-903f-07c1769a9e88@gmail.com>
Message-ID: <AM6PR02MB44238E3D00D4B0FDA218A1AB94482@AM6PR02MB4423.eurprd02.prod.outlook.com>

Thanks to both, Duncan and Thomas.

Best,
Iago

________________________________
De: Tomas Kalibera <tomas.kalibera at gmail.com>
Enviat el: dilluns, 12 de febrer de 2024 11:18
Per a: Iago Gin? V?zquez <iago.gine at sjd.es>; CALUM POLWART <polc1410 at gmail.com>; Duncan Murdoch <murdoch.duncan at gmail.com>
A/c: r-help at r-project.org <r-help at r-project.org>
Tema: Re: [R] Avoiding Delete key function as 'Quit R' in Rterm when there are no characters in cursor line

On 2/9/24 21:39, Iago Gin? V?zquez wrote:
> Duncan, do you think it's worth to comment this in R-devel list?

Duncan filed a bug report via R bugzilla (thanks).

There is no way to disable this functionality and it has existed for
very long time, I tested that at least in R 3.0. Optionally ending the
session was I believe intentional with Ctrl+D, when the input is empty,
and it is also how Unix terminals work. But ending the session with DEL
was probably an implementation compromise and I've changed that in
R-devel. Thanks for the report.

More implementation details in the bugzilla report:
https://bugs.r-project.org/show_bug.cgi?id=18666

Best
Tomas

> Iago
>
> ________________________________
> De: CALUM POLWART <polc1410 at gmail.com>
> Enviat el: divendres, 9 de febrer de 2024 18:28
> Per a: Duncan Murdoch <murdoch.duncan at gmail.com>
> A/c: Iago Gin? V?zquez <iago.gine at sjd.es>; r-help at r-project.org <r-help at r-project.org>
> Tema: Re: [R] Avoiding Delete key function as 'Quit R' in Rterm when there are no characters in cursor line
>
> I don't use term, but I've just tested it and this is reproducable.
>
> Is it a bug? Not sure. If you hit c after getting the message it will cancel the q() request.
>
>
> On Fri, 9 Feb 2024, 17:21 Duncan Murdoch, <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>> wrote:
> That looks to me like a bug, but I don't use Windows any more, so I
> won't offer to try to fix it for you.  In fact I don't think Rterm has
> many users at all:  most Windows users probably use RStudio or one of
> the other graphical front ends (Visual Studio, Emacs, Rgui, etc.)
>
> So maybe you can track down the issue, or someone else will try.  Or
> maybe you'll just have to avoid triggering the bug (if it really is one).
>
> Duncan Murdoch
>
> On 09/02/2024 10:03 a.m., Iago Gin? V?zquez wrote:
>> Yes, indeed, I am talking about Rterm in Windows.
>>
>> Iago
>> ------------------------------------------------------------------------
>> *De:* Duncan Murdoch <murdoch.duncan at gmail.com<mailto:murdoch.duncan at gmail.com>>
>> *Enviat el:* divendres, 9 de febrer de 2024 13:50
>> *Per a:* Iago Gin? V?zquez <iago.gine at sjd.es<mailto:iago.gine at sjd.es>>
>> *Tema:* Re: [R] Avoiding Delete key function as 'Quit R' in Rterm when
>> there are no characters in cursor line
>> On 09/02/2024 6:25 a.m., Iago Gin? V?zquez wrote:
>>> Hi all,
>>>
>>> I cite from README.Rterm
>>>
>>> ^D, DEL?????: Delete the character under the cursor.
>>>
>>> That is the general behaviour, but when there is no character (neither under the cursor nor at its left), pressing the Delete key suggests closing the R terminal. Is there any (configurable) way to avoid this behaviour?
>> Are you talking about rterm in Windows, or which front end?
>>
>> Duncan Murdoch
>>
> ______________________________________________
> R-help at r-project.org<mailto:R-help at r-project.org> mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
>        [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

	[[alternative HTML version deleted]]


From ger@ophii m@iii@g oii gmx@@et  Tue Feb 13 09:59:17 2024
From: ger@ophii m@iii@g oii gmx@@et (ger@ophii m@iii@g oii gmx@@et)
Date: Tue, 13 Feb 2024 09:59:17 +0100
Subject: [R] Packages sometimes don't update,
 but no error or warning is thrown
Message-ID: <trinity-0a48d5f6-d21d-472d-8b19-ff5b2ef80e6c-1707814757726@3c-app-gmx-bs39>

Hey everyone,
?
this question is related to this (https://community.rstudio.com/t/packages-are-not-updating/166214/3), this (https://www.biostars.org/p/9586316/#9586323) and this (https://support.bioconductor.org/p/9156283/#9156308). The two latter ones are pots from myself.
?
To sum it up: If I am updating packages (be it via Bioconductor or CRAN) some packages simply don?t update, but they also don?t throw any warning or error that they have not been updated. The reason behind this is most likely that there is an update, but it?s not yet available as a binary ? in my case as a "mac.binary.big-sur-arm64", since I am on Apple Silicon. My pkgType is set to "both" (default), but my .Platform$pkgType is "mac.binary.big-sur-arm64" (also default).
?
If the system shows an update is available and I click update (or update via install.packages()), but the package will not be updated, I would expect any kind of message that the package will not be updated, since no newer binary is available or a prompt, if I want to compile from source. However, the only message I get is:
```
trying URL '<url_to_package>'
Content type 'application/x-gzip' length XXXXXXX bytes (X.X MB)
==================================================
downloaded X.X MB
?
?
The downloaded binary packages are in
??????????????? /var/folders/ws/XXX/T//YYY/downloaded_packages
```
To see, if the package was actually updated, I have to check for updates again (or check the version of the installed package). Is this the expected behavior and if so, why? (Also, why is there a double slash in the path to the downloaded packages?)
?
Thanks for your help.
?
Best,
Philipp


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Feb 13 10:53:22 2024
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 13 Feb 2024 04:53:22 -0500
Subject: [R] Packages sometimes don't update,
 but no error or warning is thrown
In-Reply-To: <7f0678ca-bd6f-45b2-ae3d-ae0644c495b5@gmail.com>
References: <7f0678ca-bd6f-45b2-ae3d-ae0644c495b5@gmail.com>
Message-ID: <ef3ab7c9-8e71-4f77-98ca-c97fca79e1fb@gmail.com>


Those three references are about RStudio and Bioconductor (or at least 
they start out that way, I didn't read through the long threads). 
Neither of those is relevant here, but from my quick scan it appears the 
issue is that those systems detect a package in source form is 
available, then install an older binary instead.

If you have an example where update.packages() does this, that would be 
on topic on this list.  Please post just that here:  your calls, and all 
the output you received.  In my experience update.packages() asks 
whether you want the source or binary install and respects your choice.

Duncan Murdoch

On 13/02/2024 3:59 a.m., gernophil--- via R-help wrote:
> Hey everyone,
>   
> this question is related to this (https://community.rstudio.com/t/packages-are-not-updating/166214/3), this (https://www.biostars.org/p/9586316/#9586323) and this (https://support.bioconductor.org/p/9156283/#9156308). The two latter ones are pots from myself.
>   
> To sum it up: If I am updating packages (be it via Bioconductor or CRAN) some packages simply don?t update, but they also don?t throw any warning or error that they have not been updated. The reason behind this is most likely that there is an update, but it?s not yet available as a binary ? in my case as a "mac.binary.big-sur-arm64", since I am on Apple Silicon. My pkgType is set to "both" (default), but my .Platform$pkgType is "mac.binary.big-sur-arm64" (also default).
>   
> If the system shows an update is available and I click update (or update via install.packages()), but the package will not be updated, I would expect any kind of message that the package will not be updated, since no newer binary is available or a prompt, if I want to compile from source. However, the only message I get is:
> ```
> trying URL '<url_to_package>'
> Content type 'application/x-gzip' length XXXXXXX bytes (X.X MB)
> ==================================================
> downloaded X.X MB
>   
>   
> The downloaded binary packages are in
>  ??????????????? /var/folders/ws/XXX/T//YYY/downloaded_packages
> ```
> To see, if the package was actually updated, I have to check for updates again (or check the version of the installed package). Is this the expected behavior and if so, why? (Also, why is there a double slash in the path to the downloaded packages?)
>   
> Thanks for your help.
>   
> Best,
> Philipp
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ger@ophii m@iii@g oii gmx@@et  Tue Feb 13 11:09:26 2024
From: ger@ophii m@iii@g oii gmx@@et (ger@ophii m@iii@g oii gmx@@et)
Date: Tue, 13 Feb 2024 11:09:26 +0100
Subject: [R] Packages sometimes don't update,
 but no error or warning is thrown
Message-ID: <trinity-ef76e042-2013-41fe-afbc-2772fec46bf2-1707818966682@3c-app-gmx-bs12>

Yes you're right that it started as an Bioconductor issue. The reason I am writing it here, if because of one of the core members of the Bioconductor project stated this:
"(...) But anyway, it's almost certainly an install.packages issue rather than BiocManager::install, so you might check over at r-help at r-project.org."
?
It's hard to give an explicit example here since it's always a bit time dependent, when and if this happens. And "unfortunately", right now all packages can be updated, but I'll come back to this as soon as I experience it again. It's more of a general feature request then a help request, but as you say "In my experience update.packages() asks whether you want the source or binary install and respects your choice." However, at least for me, it does not do this anymore, but simply silently fails to update those packages.
?
The Bioconductor thread is the most informative for this (https://support.bioconductor.org/p/9156283[https://support.bioconductor.org/p/9156283/#9156308]) in case anyone wants to check the situation in more detail.

?
Philipp
?

Gesendet:?Dienstag, 13. Februar 2024 um 10:53 Uhr
Von:?"Duncan Murdoch" <murdoch.duncan at gmail.com>
An:?"R Project Help" <R-help at r-project.org>
Betreff:?[R] Packages sometimes don't update, but no error or warning is thrown
Those three references are about RStudio and Bioconductor (or at least
they start out that way, I didn't read through the long threads).
Neither of those is relevant here, but from my quick scan it appears the
issue is that those systems detect a package in source form is
available, then install an older binary instead.

If you have an example where update.packages() does this, that would be
on topic on this list. Please post just that here: your calls, and all
the output you received. In my experience update.packages() asks
whether you want the source or binary install and respects your choice.

Duncan Murdoch

On 13/02/2024 3:59 a.m., gernophil--- via R-help wrote:
> Hey everyone,
>
> this question is related to this (https://community.rstudio.com/t/packages-are-not-updating/166214/3[https://community.rstudio.com/t/packages-are-not-updating/166214/3]), this (https://www.biostars.org/p/9586316/#9586323[https://www.biostars.org/p/9586316/#9586323]) and this (https://support.bioconductor.org/p/9156283/#9156308[https://support.bioconductor.org/p/9156283/#9156308]). The two latter ones are pots from myself.
>
> To sum it up: If I am updating packages (be it via Bioconductor or CRAN) some packages simply don?t update, but they also don?t throw any warning or error that they have not been updated. The reason behind this is most likely that there is an update, but it?s not yet available as a binary ? in my case as a "mac.binary.big-sur-arm64", since I am on Apple Silicon. My pkgType is set to "both" (default), but my .Platform$pkgType is "mac.binary.big-sur-arm64" (also default).
>
> If the system shows an update is available and I click update (or update via install.packages()), but the package will not be updated, I would expect any kind of message that the package will not be updated, since no newer binary is available or a prompt, if I want to compile from source. However, the only message I get is:
> ```
> trying URL '<url_to_package>'
> Content type 'application/x-gzip' length XXXXXXX bytes (X.X MB)
> ==================================================
> downloaded X.X MB
>
>
> The downloaded binary packages are in
> ??????????????? /var/folders/ws/XXX/T//YYY/downloaded_packages
> ```
> To see, if the package was actually updated, I have to check for updates again (or check the version of the installed package). Is this the expected behavior and if so, why? (Also, why is there a double slash in the path to the downloaded packages?)
>
> Thanks for your help.
>
> Best,
> Philipp
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help[https://stat.ethz.ch/mailman/listinfo/r-help]
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html[http://www.R-project.org/posting-guide.html]
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help[https://stat.ethz.ch/mailman/listinfo/r-help]
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html[http://www.R-project.org/posting-guide.html]
and provide commented, minimal, self-contained, reproducible code.
?
?


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Tue Feb 13 11:33:29 2024
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Tue, 13 Feb 2024 10:33:29 +0000
Subject: [R] Packages sometimes don't update,
 but no error or warning is thrown
In-Reply-To: <trinity-ef76e042-2013-41fe-afbc-2772fec46bf2-1707818966682@3c-app-gmx-bs12>
References: <trinity-ef76e042-2013-41fe-afbc-2772fec46bf2-1707818966682@3c-app-gmx-bs12>
Message-ID: <e54d2a2c-d0e3-4718-9656-9ba67c8edeaa@sapo.pt>

?s 10:09 de 13/02/2024, gernophil--- via R-help escreveu:
> Yes you're right that it started as an Bioconductor issue. The reason I am writing it here, if because of one of the core members of the Bioconductor project stated this:
> "(...) But anyway, it's almost certainly an install.packages issue rather than BiocManager::install, so you might check over at r-help at r-project.org."
>   
> It's hard to give an explicit example here since it's always a bit time dependent, when and if this happens. And "unfortunately", right now all packages can be updated, but I'll come back to this as soon as I experience it again. It's more of a general feature request then a help request, but as you say "In my experience update.packages() asks whether you want the source or binary install and respects your choice." However, at least for me, it does not do this anymore, but simply silently fails to update those packages.
>   
> The Bioconductor thread is the most informative for this (https://support.bioconductor.org/p/9156283[https://support.bioconductor.org/p/9156283/#9156308]) in case anyone wants to check the situation in more detail.
> 
>   
> Philipp
>   
> 
> Gesendet:?Dienstag, 13. Februar 2024 um 10:53 Uhr
> Von:?"Duncan Murdoch" <murdoch.duncan at gmail.com>
> An:?"R Project Help" <R-help at r-project.org>
> Betreff:?[R] Packages sometimes don't update, but no error or warning is thrown
> Those three references are about RStudio and Bioconductor (or at least
> they start out that way, I didn't read through the long threads).
> Neither of those is relevant here, but from my quick scan it appears the
> issue is that those systems detect a package in source form is
> available, then install an older binary instead.
> 
> If you have an example where update.packages() does this, that would be
> on topic on this list. Please post just that here: your calls, and all
> the output you received. In my experience update.packages() asks
> whether you want the source or binary install and respects your choice.
> 
> Duncan Murdoch
> 
> On 13/02/2024 3:59 a.m., gernophil--- via R-help wrote:
>> Hey everyone,
>>
>> this question is related to this (https://community.rstudio.com/t/packages-are-not-updating/166214/3[https://community.rstudio.com/t/packages-are-not-updating/166214/3]), this (https://www.biostars.org/p/9586316/#9586323[https://www.biostars.org/p/9586316/#9586323]) and this (https://support.bioconductor.org/p/9156283/#9156308[https://support.bioconductor.org/p/9156283/#9156308]). The two latter ones are pots from myself.
>>
>> To sum it up: If I am updating packages (be it via Bioconductor or CRAN) some packages simply don?t update, but they also don?t throw any warning or error that they have not been updated. The reason behind this is most likely that there is an update, but it?s not yet available as a binary ? in my case as a "mac.binary.big-sur-arm64", since I am on Apple Silicon. My pkgType is set to "both" (default), but my .Platform$pkgType is "mac.binary.big-sur-arm64" (also default).
>>
>> If the system shows an update is available and I click update (or update via install.packages()), but the package will not be updated, I would expect any kind of message that the package will not be updated, since no newer binary is available or a prompt, if I want to compile from source. However, the only message I get is:
>> ```
>> trying URL '<url_to_package>'
>> Content type 'application/x-gzip' length XXXXXXX bytes (X.X MB)
>> ==================================================
>> downloaded X.X MB
>>
>>
>> The downloaded binary packages are in
>>  ??????????????? /var/folders/ws/XXX/T//YYY/downloaded_packages
>> ```
>> To see, if the package was actually updated, I have to check for updates again (or check the version of the installed package). Is this the expected behavior and if so, why? (Also, why is there a double slash in the path to the downloaded packages?)
>>
>> Thanks for your help.
>>
>> Best,
>> Philipp
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help[https://stat.ethz.ch/mailman/listinfo/r-help]
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html[http://www.R-project.org/posting-guide.html]
>> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help[https://stat.ethz.ch/mailman/listinfo/r-help]
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html[http://www.R-project.org/posting-guide.html]
> and provide commented, minimal, self-contained, reproducible code.
>   
>   
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Not exactly an answer, just a thought:
Whenever I have problems updating or installing packages from whithin 
RStudio I close RStudio, write a script with the install.packages() call 
and run it from a command window.


R -q -f "instscript.R"


This many times works better and it also works with Bioconductor's 
BiocManager::install or with remotes'/devtools's install_github.

Hope this helps,

Rui Barradas


-- 
Este e-mail foi analisado pelo software antiv?rus AVG para verificar a presen?a de v?rus.
www.avg.com


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Feb 13 11:36:04 2024
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 13 Feb 2024 05:36:04 -0500
Subject: [R] Packages sometimes don't update,
 but no error or warning is thrown
In-Reply-To: <trinity-6b5ee632-3d81-4345-98d2-b3dc429115d6-1707818851857@3c-app-gmx-bs12>
References: <7f0678ca-bd6f-45b2-ae3d-ae0644c495b5@gmail.com>
 <ef3ab7c9-8e71-4f77-98ca-c97fca79e1fb@gmail.com>
 <trinity-6b5ee632-3d81-4345-98d2-b3dc429115d6-1707818851857@3c-app-gmx-bs12>
Message-ID: <4fad3bfa-a119-44a1-81e3-348277f4fac5@gmail.com>

I think you should ask more from the BioC folks, or do more digging 
yourself.  At a minimum we would need to know what arguments were used 
in the call that failed before we could help you with this.  So if this 
ever happens again, here's what you can do:

  Run debug(install.packages), then the call to BiocManager::install. 
It will break to the debugger when install.packages is called.  It will 
print the whole source of install.packages which is quite long, but at 
the very top it will show something like

   debugging in: install.packages(pkgs = x)

The "install.packages(pkgs = x)" will be the call from whatever function 
calls install.packages.  The arguments shown may be constants or 
variables like x; the argument names may or may not be shown, depending 
on the Bioconductor code.  If they are variables, they are in the scope 
of the caller, not install.packages, whereas the argument name "pkgs" 
would be in scope and you could print it.  Record all the arguments that 
were passed, then quit using Q.

Now run undebug(install.packages), and re-run the install.packages() 
call from the command line, substituting the variables you recorded.  If 
that shows the same problems as when called from BiocManager::install, 
show us the log of what happened.  If not, it's a Bioconductor issue.

Duncan Murdoch

On 13/02/2024 5:07 a.m., gernophil at gmx.net wrote:
> Yes you're right that it started as an Bioconductor issue. The reason I 
> am writing it here, if because of one of the core members of the 
> Bioconductor project stated this:
> "(...) But anyway, it's almost certainly an install.packages issue 
> rather than BiocManager::install, so you might check over at 
> r-help at r-project.org."
> It's hard to give an explicit example here since it's always a bit time 
> dependent, when and if this happens. And "unfortunately", right now all 
> packages can be updated, but I'll come back to this as soon as I 
> experience it again. It's more of a general feature request then a help 
> request, but as you say "In my experience update.packages() asks whether 
> you want the source or binary install and respects your choice." 
> However, at least for me, it does not do this anymore, but simply 
> silently fails to update those packages.
> The Bioconductor thread is the most informative for this 
> (https://support.bioconductor.org/p/9156283 
> <https://support.bioconductor.org/p/9156283/#9156308>) in case anyone 
> wants to check the situation in more detail.
> Philipp
> *Gesendet:*?Dienstag, 13. Februar 2024 um 10:53 Uhr
> *Von:*?"Duncan Murdoch" <murdoch.duncan at gmail.com>
> *An:*?"R Project Help" <R-help at r-project.org>
> *Betreff:*?[R] Packages sometimes don't update, but no error or warning 
> is thrown
> 
> Those three references are about RStudio and Bioconductor (or at least
> they start out that way, I didn't read through the long threads).
> Neither of those is relevant here, but from my quick scan it appears the
> issue is that those systems detect a package in source form is
> available, then install an older binary instead.
> 
> If you have an example where update.packages() does this, that would be
> on topic on this list. Please post just that here: your calls, and all
> the output you received. In my experience update.packages() asks
> whether you want the source or binary install and respects your choice.
> 
> Duncan Murdoch
> 
> On 13/02/2024 3:59 a.m., gernophil--- via R-help wrote:
>  > Hey everyone,
>  >
>  > this question is related to this 
> (https://community.rstudio.com/t/packages-are-not-updating/166214/3 
> <https://community.rstudio.com/t/packages-are-not-updating/166214/3>), 
> this (https://www.biostars.org/p/9586316/#9586323 
> <https://www.biostars.org/p/9586316/#9586323>) and this 
> (https://support.bioconductor.org/p/9156283/#9156308 
> <https://support.bioconductor.org/p/9156283/#9156308>). The two latter 
> ones are pots from myself.
>  >
>  > To sum it up: If I am updating packages (be it via Bioconductor or 
> CRAN) some packages simply don?t update, but they also don?t throw any 
> warning or error that they have not been updated. The reason behind this 
> is most likely that there is an update, but it?s not yet available as a 
> binary ? in my case as a "mac.binary.big-sur-arm64", since I am on Apple 
> Silicon. My pkgType is set to "both" (default), but my .Platform$pkgType 
> is "mac.binary.big-sur-arm64" (also default).
>  >
>  > If the system shows an update is available and I click update (or 
> update via install.packages()), but the package will not be updated, I 
> would expect any kind of message that the package will not be updated, 
> since no newer binary is available or a prompt, if I want to compile 
> from source. However, the only message I get is:
>  > ```
>  > trying URL '<url_to_package>'
>  > Content type 'application/x-gzip' length XXXXXXX bytes (X.X MB)
>  > ==================================================
>  > downloaded X.X MB
>  >
>  >
>  > The downloaded binary packages are in
>  > ??????????????? /var/folders/ws/XXX/T//YYY/downloaded_packages
>  > ```
>  > To see, if the package was actually updated, I have to check for 
> updates again (or check the version of the installed package). Is this 
> the expected behavior and if so, why? (Also, why is there a double slash 
> in the path to the downloaded packages?)
>  >
>  > Thanks for your help.
>  >
>  > Best,
>  > Philipp
>  >
>  > ______________________________________________
>  > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>  > https://stat.ethz.ch/mailman/listinfo/r-help 
> <https://stat.ethz.ch/mailman/listinfo/r-help>
>  > PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html 
> <http://www.R-project.org/posting-guide.html>
>  > and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help 
> <https://stat.ethz.ch/mailman/listinfo/r-help>
> PLEASE do read the posting guide 
> http://www.R-project.org/posting-guide.html 
> <http://www.R-project.org/posting-guide.html>
> and provide commented, minimal, self-contained, reproducible code.


From |eo@m@d@ @end|ng |rom @yon|c@eu  Tue Feb 13 16:29:10 2024
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leo Mada)
Date: Tue, 13 Feb 2024 15:29:10 +0000
Subject: [R] Skip jumps in curve
Message-ID: <AM5P192MB00825BB890639BC5C560F5FC844F2@AM5P192MB0082.EURP192.PROD.OUTLOOK.COM>

Dear R-Users,

Is there a way to skip over without plotting the jumps/discontinuities in curve()?

I have not seen such an option, but maybe I am missing something.

plot.gamma = function(xlim = c(-6, -1), ylim = c(-1,3), hline = NULL, n = 1000) {
   curve(gamma(x), from = xlim[1], to = xlim[2], ylim=ylim, n=n);
   if( ! is.null(hline)) abline(h = hline, col = "green");
}

Euler = 0.57721566490153286060651209008240243079;
plot.gamma(hline = Euler)

Adding an option to the function curve may be useful:
options = c("warn", "silent", "unconnected")

This is part of some experiments in math; but that's another topic. For latest version:
https://github.com/discoleo/R/blob/master/Math/Integrals.Gamma.Inv.R

Sincerely,

Leonard


	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Feb 13 17:05:47 2024
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 13 Feb 2024 11:05:47 -0500
Subject: [R] Skip jumps in curve
In-Reply-To: <AM5P192MB00825BB890639BC5C560F5FC844F2@AM5P192MB0082.EURP192.PROD.OUTLOOK.COM>
References: <AM5P192MB00825BB890639BC5C560F5FC844F2@AM5P192MB0082.EURP192.PROD.OUTLOOK.COM>
Message-ID: <ee12deaf-cc74-4c98-b240-1e6fc166cebc@gmail.com>

On 13/02/2024 10:29 a.m., Leo Mada via R-help wrote:
> Dear R-Users,
> 
> Is there a way to skip over without plotting the jumps/discontinuities in curve()?
> 
> I have not seen such an option, but maybe I am missing something.
> 
> plot.gamma = function(xlim = c(-6, -1), ylim = c(-1,3), hline = NULL, n = 1000) {
>     curve(gamma(x), from = xlim[1], to = xlim[2], ylim=ylim, n=n);
>     if( ! is.null(hline)) abline(h = hline, col = "green");
> }
> 
> Euler = 0.57721566490153286060651209008240243079;
> plot.gamma(hline = Euler)
> 
> Adding an option to the function curve may be useful:
> options = c("warn", "silent", "unconnected")
> 
> This is part of some experiments in math; but that's another topic. For latest version:
> https://github.com/discoleo/R/blob/master/Math/Integrals.Gamma.Inv.R

If you know where the discontinuities are, plot multiple times with the 
discontinuities as endpoints:

plot.gamma = function(xlim = c(-6, -1), ylim = c(-1,3), hline = NULL, n 
= 1000) {
   start <- floor(xlim[1]):floor(xlim[2])
   end <- start + 1

   start[1] <- xlim[1]
   end[length(end)] <- xlim[2]

   n <- round(n/length(start))

   curve(gamma(x), from = start[1], to = end[1], ylim=ylim, n=n, xlim = 
xlim)
   for (i in seq_along(start)[-1])
     curve(gamma(x), from = start[i], to = end[i], add = TRUE, n)
   if( ! is.null(hline)) abline(h = hline, col = "green");
}

Euler = 0.57721566490153286060651209008240243079;
plot.gamma(hline = Euler)

If you don't know where the discontinuities are, it would be much 
harder, because discontinuities can be hard to detect unless the jumps 
are really big.

Duncan Murdoch


From |eo@m@d@ @end|ng |rom @yon|c@eu  Tue Feb 13 19:44:20 2024
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leo Mada)
Date: Tue, 13 Feb 2024 18:44:20 +0000
Subject: [R] Skip jumps in curve
In-Reply-To: <ee12deaf-cc74-4c98-b240-1e6fc166cebc@gmail.com>
References: <AM5P192MB00825BB890639BC5C560F5FC844F2@AM5P192MB0082.EURP192.PROD.OUTLOOK.COM>
 <ee12deaf-cc74-4c98-b240-1e6fc166cebc@gmail.com>
Message-ID: <VI1P192MB009569F845A43F604D1BD5FE844F2@VI1P192MB0095.EURP192.PROD.OUTLOOK.COM>

Dear Duncan,

Thank you very much for the response. I suspected that such an option has not been implemented yet.

The plot was very cluttered due to those vertical lines. Fortunately, the gamma function is easy to handle. But the feature remains on my wishlist as useful more in general.

Sincerely,

Leonard

________________________________
From: Duncan Murdoch <murdoch.duncan at gmail.com>
Sent: Tuesday, February 13, 2024 6:05 PM
To: Leo Mada <leo.mada at syonic.eu>; r-help at r-project.org <r-help at r-project.org>
Subject: Re: [R] Skip jumps in curve

On 13/02/2024 10:29 a.m., Leo Mada via R-help wrote:
> Dear R-Users,
>
> Is there a way to skip over without plotting the jumps/discontinuities in curve()?
>
> I have not seen such an option, but maybe I am missing something.
>
> plot.gamma = function(xlim = c(-6, -1), ylim = c(-1,3), hline = NULL, n = 1000) {
>     curve(gamma(x), from = xlim[1], to = xlim[2], ylim=ylim, n=n);
>     if( ! is.null(hline)) abline(h = hline, col = "green");
> }
>
> Euler = 0.57721566490153286060651209008240243079;
> plot.gamma(hline = Euler)
>
> Adding an option to the function curve may be useful:
> options = c("warn", "silent", "unconnected")
>
> This is part of some experiments in math; but that's another topic. For latest version:
> https://github.com/discoleo/R/blob/master/Math/Integrals.Gamma.Inv.R

If you know where the discontinuities are, plot multiple times with the
discontinuities as endpoints:

plot.gamma = function(xlim = c(-6, -1), ylim = c(-1,3), hline = NULL, n
= 1000) {
   start <- floor(xlim[1]):floor(xlim[2])
   end <- start + 1

   start[1] <- xlim[1]
   end[length(end)] <- xlim[2]

   n <- round(n/length(start))

   curve(gamma(x), from = start[1], to = end[1], ylim=ylim, n=n, xlim =
xlim)
   for (i in seq_along(start)[-1])
     curve(gamma(x), from = start[i], to = end[i], add = TRUE, n)
   if( ! is.null(hline)) abline(h = hline, col = "green");
}

Euler = 0.57721566490153286060651209008240243079;
plot.gamma(hline = Euler)

If you don't know where the discontinuities are, it would be much
harder, because discontinuities can be hard to detect unless the jumps
are really big.

Duncan Murdoch



	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Tue Feb 13 19:49:31 2024
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Tue, 13 Feb 2024 13:49:31 -0500
Subject: [R] Skip jumps in curve
In-Reply-To: <VI1P192MB009569F845A43F604D1BD5FE844F2@VI1P192MB0095.EURP192.PROD.OUTLOOK.COM>
References: <AM5P192MB00825BB890639BC5C560F5FC844F2@AM5P192MB0082.EURP192.PROD.OUTLOOK.COM>
 <ee12deaf-cc74-4c98-b240-1e6fc166cebc@gmail.com>
 <VI1P192MB009569F845A43F604D1BD5FE844F2@VI1P192MB0095.EURP192.PROD.OUTLOOK.COM>
Message-ID: <1fcc5d21-77e2-41f3-8da1-afd0e8ab304b@gmail.com>

It should be pretty easy to generalize my version of the `plot.gamma()` 
function to a version of `curve()` with an extra `discontinuities` argument.

Duncan Murdoch

On 13/02/2024 1:44 p.m., Leo Mada wrote:
> Dear Duncan,
> 
> Thank you very much for the response. I suspected that such an option 
> has not been implemented yet.
> 
> The plot was very cluttered due to those vertical lines. Fortunately, 
> the gamma function?is easy to handle. But the feature remains on my 
> wishlist as useful more in general.
> 
> Sincerely,
> 
> Leonard
> 
> ------------------------------------------------------------------------
> *From:* Duncan Murdoch <murdoch.duncan at gmail.com>
> *Sent:* Tuesday, February 13, 2024 6:05 PM
> *To:* Leo Mada <leo.mada at syonic.eu>; r-help at r-project.org 
> <r-help at r-project.org>
> *Subject:* Re: [R] Skip jumps in curve
> On 13/02/2024 10:29 a.m., Leo Mada via R-help wrote:
>> Dear R-Users,
>> 
>> Is there a way to skip over without plotting the jumps/discontinuities in curve()?
>> 
>> I have not seen such an option, but maybe I am missing something.
>> 
>> plot.gamma = function(xlim = c(-6, -1), ylim = c(-1,3), hline = NULL, n = 1000) {
>>???? curve(gamma(x), from = xlim[1], to = xlim[2], ylim=ylim, n=n);
>>???? if( ! is.null(hline)) abline(h = hline, col = "green");
>> }
>> 
>> Euler = 0.57721566490153286060651209008240243079;
>> plot.gamma(hline = Euler)
>> 
>> Adding an option to the function curve may be useful:
>> options = c("warn", "silent", "unconnected")
>> 
>> This is part of some experiments in math; but that's another topic. For latest version:
>> https://github.com/discoleo/R/blob/master/Math/Integrals.Gamma.Inv.R 
> <https://github.com/discoleo/R/blob/master/Math/Integrals.Gamma.Inv.R>
> 
> If you know where the discontinuities are, plot multiple times with the
> discontinuities as endpoints:
> 
> plot.gamma = function(xlim = c(-6, -1), ylim = c(-1,3), hline = NULL, n
> = 1000) {
>  ?? start <- floor(xlim[1]):floor(xlim[2])
>  ?? end <- start + 1
> 
>  ?? start[1] <- xlim[1]
>  ?? end[length(end)] <- xlim[2]
> 
>  ?? n <- round(n/length(start))
> 
>  ?? curve(gamma(x), from = start[1], to = end[1], ylim=ylim, n=n, xlim =
> xlim)
>  ?? for (i in seq_along(start)[-1])
>  ???? curve(gamma(x), from = start[i], to = end[i], add = TRUE, n)
>  ?? if( ! is.null(hline)) abline(h = hline, col = "green");
> }
> 
> Euler = 0.57721566490153286060651209008240243079;
> plot.gamma(hline = Euler)
> 
> If you don't know where the discontinuities are, it would be much
> harder, because discontinuities can be hard to detect unless the jumps
> are really big.
> 
> Duncan Murdoch
> 
>


From w||||@mwdun|@p @end|ng |rom gm@||@com  Tue Feb 13 22:54:23 2024
From: w||||@mwdun|@p @end|ng |rom gm@||@com (Bill Dunlap)
Date: Tue, 13 Feb 2024 13:54:23 -0800
Subject: [R] Skip jumps in curve
In-Reply-To: <1fcc5d21-77e2-41f3-8da1-afd0e8ab304b@gmail.com>
References: <AM5P192MB00825BB890639BC5C560F5FC844F2@AM5P192MB0082.EURP192.PROD.OUTLOOK.COM>
 <ee12deaf-cc74-4c98-b240-1e6fc166cebc@gmail.com>
 <VI1P192MB009569F845A43F604D1BD5FE844F2@VI1P192MB0095.EURP192.PROD.OUTLOOK.COM>
 <1fcc5d21-77e2-41f3-8da1-afd0e8ab304b@gmail.com>
Message-ID: <CAHqSRuQg0aRoweUehnZ6nQCL2aZXYNGTjZ797eNp9b=L0e_sKA@mail.gmail.com>

Here is the skeleton of a function that lets you supply a function that
will be applied to diff(y) to say if this next point should be connected by
a line to the previous point.

p <- function (x, y = NULL, dy = diff(y), predicate = function(dy)
abs(dy)>2, ...,
  xlab = if (!missing(x)) deparse1(substitute(x)),
  ylab = if (!missing(y)) deparse1(substitute(y)), log = "", type="l")
{
  force(xlab)
  force(ylab)
  xy <- xy.coords(x, y, xlab, ylab, log)
  x <- xy$x
  y <- xy$y
  group <- cumsum( c(TRUE, !is.finite(dy) | predicate(dy)))
  plot(x, y, xlab=xy$xlab, ylab=xy$ylab, log=log, ..., type="n")
  sx <- split(x, group)
  sy <- split(y, group)
  lapply(seq_len(max(group)), function(i)points(type=type, sx[[i]],
sy[[i]]))
  invisible()
}


E.g., plot the tangent function where we know that the discontinuities are
where diff(y) is negative:

par(mfrow=c(2,1))
plot(tan(seq(0,10,by=1/4)), type="b")
p(tan(seq(0,10,by=1/4)), predicate = function(dy)dy<0, type="b")

-Bill

On Tue, Feb 13, 2024 at 10:54?AM Duncan Murdoch <murdoch.duncan at gmail.com>
wrote:

> It should be pretty easy to generalize my version of the `plot.gamma()`
> function to a version of `curve()` with an extra `discontinuities`
> argument.
>
> Duncan Murdoch
>
> On 13/02/2024 1:44 p.m., Leo Mada wrote:
> > Dear Duncan,
> >
> > Thank you very much for the response. I suspected that such an option
> > has not been implemented yet.
> >
> > The plot was very cluttered due to those vertical lines. Fortunately,
> > the gamma function is easy to handle. But the feature remains on my
> > wishlist as useful more in general.
> >
> > Sincerely,
> >
> > Leonard
> >
> > ------------------------------------------------------------------------
> > *From:* Duncan Murdoch <murdoch.duncan at gmail.com>
> > *Sent:* Tuesday, February 13, 2024 6:05 PM
> > *To:* Leo Mada <leo.mada at syonic.eu>; r-help at r-project.org
> > <r-help at r-project.org>
> > *Subject:* Re: [R] Skip jumps in curve
> > On 13/02/2024 10:29 a.m., Leo Mada via R-help wrote:
> >> Dear R-Users,
> >>
> >> Is there a way to skip over without plotting the jumps/discontinuities
> in curve()?
> >>
> >> I have not seen such an option, but maybe I am missing something.
> >>
> >> plot.gamma = function(xlim = c(-6, -1), ylim = c(-1,3), hline = NULL, n
> = 1000) {
> >>     curve(gamma(x), from = xlim[1], to = xlim[2], ylim=ylim, n=n);
> >>     if( ! is.null(hline)) abline(h = hline, col = "green");
> >> }
> >>
> >> Euler = 0.57721566490153286060651209008240243079;
> >> plot.gamma(hline = Euler)
> >>
> >> Adding an option to the function curve may be useful:
> >> options = c("warn", "silent", "unconnected")
> >>
> >> This is part of some experiments in math; but that's another topic. For
> latest version:
> >> https://github.com/discoleo/R/blob/master/Math/Integrals.Gamma.Inv.R
> > <https://github.com/discoleo/R/blob/master/Math/Integrals.Gamma.Inv.R>
> >
> > If you know where the discontinuities are, plot multiple times with the
> > discontinuities as endpoints:
> >
> > plot.gamma = function(xlim = c(-6, -1), ylim = c(-1,3), hline = NULL, n
> > = 1000) {
> >     start <- floor(xlim[1]):floor(xlim[2])
> >     end <- start + 1
> >
> >     start[1] <- xlim[1]
> >     end[length(end)] <- xlim[2]
> >
> >     n <- round(n/length(start))
> >
> >     curve(gamma(x), from = start[1], to = end[1], ylim=ylim, n=n, xlim =
> > xlim)
> >     for (i in seq_along(start)[-1])
> >       curve(gamma(x), from = start[i], to = end[i], add = TRUE, n)
> >     if( ! is.null(hline)) abline(h = hline, col = "green");
> > }
> >
> > Euler = 0.57721566490153286060651209008240243079;
> > plot.gamma(hline = Euler)
> >
> > If you don't know where the discontinuities are, it would be much
> > harder, because discontinuities can be hard to detect unless the jumps
> > are really big.
> >
> > Duncan Murdoch
> >
> >
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From |eo@m@d@ @end|ng |rom @yon|c@eu  Wed Feb 14 02:16:11 2024
From: |eo@m@d@ @end|ng |rom @yon|c@eu (Leo Mada)
Date: Wed, 14 Feb 2024 01:16:11 +0000
Subject: [R] Optimal use of optim?
Message-ID: <VI1P192MB0095CC74932B18D9846F8603844E2@VI1P192MB0095.EURP192.PROD.OUTLOOK.COM>

Dear R-Users,

I am interested in the optimal strategy for optim:

Q: How to formulate the optimization problem?
Q1: Are there benefits for abs(f(x)) vs (f(x))^2?
Q2: Are there any limitations for using abs(...)?

Regarding point 1: my feeling is that the gradients should be more robust with the abs(...) method; but I did not test it.

Regarding point 2: Obviously, abs(f(x)) is not differentiable. This is a limitation from a mathematical point of view, but the gradient should be still computable using a finite difference method. Are there any other limitations?

The question is based on the following example:
solving gamma(x) = y for some given y.

Function multiroot in package rootSolve fails when y < 1. The version using optim fares much better. However, I had to tweak somewhat the parameters in order to get a higher precision. This made me curious about the optimal strategy; unfortunately, I do not have much experience with optimizations.

The example is also available on GitHub:
https://github.com/discoleo/R/blob/master/Math/Integrals.Gamma.Inv.R

Sincerely,

Leonard

### Example:
gamma.invN = function(x, x0, lim, ...,
????????????ndeps = 1E-5, rtol = 1E-9, gtol = 0.0001, digits = 10) {
??????v = x;
??????if(length(lim) == 1) lim = c(lim - 1 + gtol, lim - gtol);
??????cntr = c(list(...), ndeps = ndeps, pgtol = rtol);
??????# abs(): should provide greater precision than ()^2 when computing the gradients;
??????# param ndeps: needed to improve accuracy;
??????r = optim(x0, \(x) { abs(gamma(x) - v); }, lower = lim[1], upper =lim[2],
????????????method = "L-BFGS-B", control = cntr);
??????if( ! is.null(digits)) print(r$par, digits);
??????return(r$par);
}

### Example
Euler   = 0.57721566490153286060651209008240243079;
x = gamma.invN(Euler, -3.5, lim = -3)
gamma(x) - Euler
x = gamma.invN(Euler, -3.9, lim = -3)
gamma(x) - Euler


	[[alternative HTML version deleted]]


From pro|jcn@@h @end|ng |rom gm@||@com  Wed Feb 14 02:40:46 2024
From: pro|jcn@@h @end|ng |rom gm@||@com (J C Nash)
Date: Tue, 13 Feb 2024 17:40:46 -0800
Subject: [R] Optimal use of optim?
In-Reply-To: <VI1P192MB0095CC74932B18D9846F8603844E2@VI1P192MB0095.EURP192.PROD.OUTLOOK.COM>
References: <VI1P192MB0095CC74932B18D9846F8603844E2@VI1P192MB0095.EURP192.PROD.OUTLOOK.COM>
Message-ID: <ba506c2b-37a6-4fb9-9803-2fc21e5c71fb@gmail.com>

This won't answer the questions, but will point out that I wrote the Nelder-Mead,
BFGS (I call it Variable Metric) and CG methods in BASIC in 1974. They were re-coded
many times and then incorporated in R around 1995 as I recall (Brian Ripley did the
incorporation). There are some great 50 year old cars, but ....

Might want to look at some of the more recent evolutions of the codes (all in R)
in optimx. Note that not all the optimx methods are "good". Many are present to
allow for comparison. Rvmmin and Rcgmin have proved quite reliable; if rarely
the winners in all cases, they tend to come in close to the front. Both do, however,
need gradients. Note that derivative of abs(x) can be defined as 0 at x=0 (even
if that offends purists). If you must use numerical derivatives, avoid forward or
backward approximations in favour of central or better ones.

JN


On 2024-02-13 17:16, Leo Mada via R-help wrote:
> Dear R-Users,
> 
> I am interested in the optimal strategy for optim:
> 
> Q: How to formulate the optimization problem?
> Q1: Are there benefits for abs(f(x)) vs (f(x))^2?
> Q2: Are there any limitations for using abs(...)?
> 
> Regarding point 1: my feeling is that the gradients should be more robust with the abs(...) method; but I did not test it.
> 
> Regarding point 2: Obviously, abs(f(x)) is not differentiable. This is a limitation from a mathematical point of view, but the gradient should be still computable using a finite difference method. Are there any other limitations?
> 
> The question is based on the following example:
> solving gamma(x) = y for some given y.
> 
> Function multiroot in package rootSolve fails when y < 1. The version using optim fares much better. However, I had to tweak somewhat the parameters in order to get a higher precision. This made me curious about the optimal strategy; unfortunately, I do not have much experience with optimizations.
> 
> The example is also available on GitHub:
> https://github.com/discoleo/R/blob/master/Math/Integrals.Gamma.Inv.R
> 
> Sincerely,
> 
> Leonard
> 
> ### Example:
> gamma.invN = function(x, x0, lim, ...,
> ????????????ndeps = 1E-5, rtol = 1E-9, gtol = 0.0001, digits = 10) {
> ??????v = x;
> ??????if(length(lim) == 1) lim = c(lim - 1 + gtol, lim - gtol);
> ??????cntr = c(list(...), ndeps = ndeps, pgtol = rtol);
> ??????# abs(): should provide greater precision than ()^2 when computing the gradients;
> ??????# param ndeps: needed to improve accuracy;
> ??????r = optim(x0, \(x) { abs(gamma(x) - v); }, lower = lim[1], upper =lim[2],
> ????????????method = "L-BFGS-B", control = cntr);
> ??????if( ! is.null(digits)) print(r$par, digits);
> ??????return(r$par);
> }
> 
> ### Example
> Euler   = 0.57721566490153286060651209008240243079;
> x = gamma.invN(Euler, -3.5, lim = -3)
> gamma(x) - Euler
> x = gamma.invN(Euler, -3.9, lim = -3)
> gamma(x) - Euler
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


