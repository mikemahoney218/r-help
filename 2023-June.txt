From deep@y@n@@@rk@r @end|ng |rom gm@||@com  Thu Jun  1 06:04:48 2023
From: deep@y@n@@@rk@r @end|ng |rom gm@||@com (Deepayan Sarkar)
Date: Thu, 1 Jun 2023 09:34:48 +0530
Subject: [R] plot level, velocity, acceleration with one x axis
In-Reply-To: <39decd19-d963-8324-bb2e-7d44a33eaf9c@effectivedefense.org>
References: <96cad904-56fb-8db5-d909-96ddb037a31a@effectivedefense.org>
 <CAGgJW75z_KExV7ONJ3tNJJaeZF_6A9HH3qx5+sAFNCdw8_yTrw@mail.gmail.com>
 <88be9a8e-86bd-cd5f-0d4b-c871d4987bf3@effectivedefense.org>
 <CAGgJW77unDi9_HCtrX76HtTNDb8sXDv09guGvVw1qJ+yBuRi5g@mail.gmail.com>
 <CAGgJW76M8K49zrv7o1WR6mhQQVZZoOESBU1j5_QVKbb4LvVtcw@mail.gmail.com>
 <f6334593-bcfe-3d6e-3195-59ec836fc11f@effectivedefense.org>
 <CAGgJW747qiznEMdBfAL_v35iwQK1EVWZ3J9JN6UcQL=F-VhESA@mail.gmail.com>
 <c2df4c1e-319c-b7d4-7576-8233f9bcef0f@effectivedefense.org>
 <CAGgJW77OREAocxEiphZAtJe-xL79+AhgfzH2mn+2-sHNvUxp-g@mail.gmail.com>
 <c2885246-ac90-233c-2f37-655f5da9afed@effectivedefense.org>
 <CAGgJW74Hy4qeyWsFoO+BzGjJm0cBf7UZhFz81EtAS0peTcHdnA@mail.gmail.com>
 <6c729593-7aeb-030d-c595-e1241d6169d3@effectivedefense.org>
 <fc519fb7315a4a1f8f4361178a5a5a86@maastrichtuniversity.nl>
 <39decd19-d963-8324-bb2e-7d44a33eaf9c@effectivedefense.org>
Message-ID: <CADfFDC67F8ig3sgmZ3Jeu8=3mhGOaLFxtoR76t9aUjM+e-KQqw@mail.gmail.com>

I think your proposal of modifying plot.ts() to allow 'log' to be
vectorized would be the most natural solution here.

For what it's worth, the details of the implementation and the fact
that you can supply a panel function allows an ugly hack:

pfun <- function(...) {
    e <- parent.frame()
    e$log <- ""
    lines(...)
}
plot(DAX., log = "y", panel = pfun)

This would need to be modified to include a counter in more
complicated cases; we can do without because only the first panel has
a log scale in this example.

-Deepayan

On Thu, Jun 1, 2023 at 12:53?AM Spencer Graves
<spencer.graves at effectivedefense.org> wrote:
>
>
>
> On 5/31/23 2:12 PM, Viechtbauer, Wolfgang (NP) wrote:
> > How about using the same 'mar' for all plots, but adding an outer margin?
> >
> > DAX <- EuStockMarkets[, 'DAX']
> > DAX. <- cbind(DAX, diff(log(DAX)), diff(diff(log(DAX))))
> > colnames(DAX.) <- c("DAX", 'vel (%)', 'accel (%)')
> > head(DAX.)
> >
> > par(mfrow=c(3,1), mar=c(1,4.5,0,2), oma=c(3,0,1,0))
> >
> > plot(DAX.[, 1], log='y', ylab='DAX', axes=FALSE)
> > axis(2)
> > box(col='grey')
> >
> > plot(DAX.[, 2], ylab='vel (%)', axes=FALSE)
> > axis(2)
> > box(col='grey')
> >
> > plot(DAX.[, 3], ylab='accel (%)', axes=FALSE)
> > axis(2)
> > box(col='grey')
> > axis(1)
> >
> > Best,
> > Wolfgang
>
>
> That's exactly what I needed.
>
>
> Thanks, Spencer
> >
>
> >> -----Original Message-----
> >> From: R-help [mailto:r-help-bounces at r-project.org] On Behalf Of Spencer Graves
> >> Sent: Wednesday, 31 May, 2023 17:45
> >> To: Eric Berger
> >> Cc: r-help
> >> Subject: Re: [R] plot level, velocity, acceleration with one x axis
> >>
> >> On 5/31/23 9:20 AM, Eric Berger wrote:
> >>> I sent you an updated response to deal with the redundant copies of the x-axis.
> >>> Re-sending.
> >>>
> >> par(mfrow=c(3,1))
> >> plot(DAX.[, 1], log='y', ylab='DAX', xaxt="n")
> >> plot(DAX.[, 2], ylab='vel (%)', xaxt="n")
> >> plot(DAX.[, 3], ylab='accel (%)')
> >>
> >>        I got that.  The primary problem with that is that most of the
> >> vertical space is reserved for axis labels, whether they are printed or
> >> not.  If I squeeze the vertical dimension of the plot, I get, "figure
> >> margins too large".  To control that, I need to set "mar" separately for
> >> each panel, and then the plot regions for each are not the same size.
> >> Using the "layout" function instead of "mfrow" is better, but I don't
> >> see now to make that work consistently without fixing the aspect ratio.
> >> There may be a way in the tidyverse, but I haven't found it yet.  The
> >> only solution I've found so far that makes sense to me is to modify the
> >> code for plot.ts to accept a vector for the log argument, with the
> >> constraint that length(lot) = either 1 or ncol(x) and returning
> >> invisibly an object that would make it feasible for a user to call
> >> axis(2, ...) once for each vertical axis to handle cases where someone
> >> wanted to a vertical scale different from linear and log.  I'd want to
> >> make sure that lines.ts also works with this, because I want to add fits
> >> and predictions.
> >>
> >>        Comments?
> >>        Thanks,
> >>        Spencer Graves
> >>
> >> ** With either of the following plots, if I adjust the aspect ratio by
> >> enlarging or reducing the vertical dimension of the plot, the relative
> >> sizes of the plot regions change.
> >>
> >> DAX <- EuStockMarkets[, 'DAX']
> >> DAX. <- cbind(DAX, diff(log(DAX)), diff(diff(log(DAX))))
> >> colnames(DAX.) <- c("DAX", 'vel (%)', 'accel (%)')
> >> head(DAX.)
> >>
> >> plot(DAX., log='xy')
> >>
> >> op <- par(mfrow=c(3,1), mar=c(0, 4.1, 4.1, 2.1))
> >> plot(DAX.[, 1], log='y', ylab='DAX', axes=FALSE)
> >> axis(2)
> >> box(col='grey')
> >> par(mar=c(0, 4.1, 0, 2.1))
> >> plot(DAX.[, 2], ylab='vel (%)', axes=FALSE)
> >> axis(2)
> >> box(col='grey')
> >> par(mar=c(5.1, 4.1, 0, 2.1))
> >> plot(DAX.[, 3], ylab='accel (%)', axes=FALSE)
> >> axis(2)
> >> box(col='grey')
> >> axis(1)
> >> par(op)
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Thu Jun  1 09:58:32 2023
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Thu, 1 Jun 2023 09:58:32 +0200
Subject: [R] error in arfima...
In-Reply-To: <PU4P216MB1568160291D547CFE411E1ADC8489@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568160291D547CFE411E1ADC8489@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <25720.20392.521283.415199@stat.math.ethz.ch>

>>>>> akshay kulkarni 
>>>>>     on Wed, 31 May 2023 20:55:33 +0000 writes:

    > dear members,

    > I am using arfima() from forecast package to model a time
    > series. The following is the code:

    >> LYGH[[202]]
    > [1] 45.40  3.25  6.50  2.15

    >> arfima(LYGH[[202]])
    > Error in .fdcov(x, fdf$d, h, nar = nar, nma = nma, hess = hess, fdf.work = fdf$w) :
    > NA/NaN/Inf in foreign function call (arg 5)

    > I tried viewing .fdcov() with the following code:

    > View(environment(fracdiff)$.fdcov)

    > but I see no stop() with the above mentioned error message.

    > Can you please help?

Well, as I am the maintainer of the *fracdiff* package,
I'm trying.  OTOH, as we will see below, you did not give us enough
information to really help you...

    > THanking you,
    > Yours sincerely,
    > AKSHAY M KULKARNI

Your problem is not (yet) reproducible (*)
I've done the following in an "empty" (i.e. freshly started) R
session, R 4.3.0:

----begin_R_transcript___save_as__arfima-ex.Rout__------------------------------
> 
> lN <- loadedNamespaces()
> library(forecast)
Registered S3 method overwritten by 'quantmod':
  method            from
  as.zoo.data.frame zoo 
> options(width=75)
> setdiff(loadedNamespaces(), lN) # -- see all the  *!^@...!   forecast loads:
 [1] "gtable"     "dplyr"      "tidyselect" "Rcpp"       "parallel"  
 [6] "scales"     "lattice"    "ggplot2"    "R6"         "generics"  
[11] "curl"       "lmtest"     "tibble"     "munsell"    "nnet"      
[16] "forecast"   "timeDate"   "pillar"     "rlang"      "quantmod"  
[21] "utf8"       "urca"       "quadprog"   "cli"        "magrittr"  
[26] "xts"        "grid"       "nlme"       "lifecycle"  "fracdiff"  
[31] "vctrs"      "glue"       "tseries"    "zoo"        "fansi"     
[36] "colorspace" "TTR"        "pkgconfig" 
> arfima(c(45.40, 3.25, 6.50, 2.15))

Call:
  arfima(y = c(45.4, 3.25, 6.5, 2.15)) 

Coefficients:
           d 
4.583013e-05 
sigma[eps] = 18.01252 
a list with components:
 [1] "log.likelihood"  "n"               "msg"            
 [4] "d"               "ar"              "ma"             
 [7] "covariance.dpq"  "fnormMin"        "sigma"          
[10] "stderror.dpq"    "correlation.dpq" "h"              
[13] "d.tol"           "M"               "hessian.dpq"    
[16] "length.w"        "residuals"       "fitted"         
[19] "call"            "x"               "series"         
> 
> sessionInfo()
R version 4.3.0 (2023-04-21)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Fedora Linux 36 (Thirty Six)

Matrix products: default
BLAS:   /usr/local64.sfs/app/R/R-4.3.0-inst/lib/libRblas.so 
LAPACK: /usr/lib64/liblapack.so.3.10.1

locale:
 [1] LC_CTYPE=de_CH.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=de_CH.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=de_CH.UTF-8   
 [7] LC_PAPER=de_CH.UTF-8       LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=de_CH.UTF-8 LC_IDENTIFICATION=C       

time zone: Europe/Zurich
tzcode source: system (glibc)

attached base packages:
[1] graphics  grDevices datasets  stats     utils     methods   base     

other attached packages:
[1] forecast_8.21  fortunes_1.5-4 sfsmisc_1.1-15

loaded via a namespace (and not attached):
 [1] gtable_0.3.3      dplyr_1.1.2       compiler_4.3.0   
 [4] tidyselect_1.2.0  Rcpp_1.0.10       parallel_4.3.0   
 [7] scales_1.2.1      lattice_0.21-8    ggplot2_3.4.2    
[10] R6_2.5.1          generics_0.1.3    curl_5.0.0       
[13] lmtest_0.9-40     tibble_3.2.1      munsell_0.5.0    
[16] nnet_7.3-19       timeDate_4022.108 pillar_1.9.0     
[19] rlang_1.1.1       quantmod_0.4.22   utf8_1.2.3       
[22] urca_1.3-3        quadprog_1.5-8    cli_3.6.1        
[25] magrittr_2.0.3    xts_0.13.1        grid_4.3.0       
[28] nlme_3.1-162      lifecycle_1.0.3   fracdiff_1.5-2   
[31] vctrs_0.6.2       glue_1.6.2        tseries_0.10-54  
[34] zoo_1.8-12        fansi_1.0.4       colorspace_2.1-0 
[37] TTR_0.24.3        tools_4.3.0       pkgconfig_2.0.3  
> 
##---end__R_transcript---------------------------------------------------------------


Note that your error message pointed me to my (old, but still
fine) package {fracdiff} with its principal function fracdiff()
around which   arfima()  is a user-friendly and
generalization wrapper.

In other words arfima() calls fracdiff::fracdiff() and the error
happens there --- for you, but not for me, if I try to use the
same data as you.
I see that you must have found that too, because you mentioned
   View(environment(fracdiff)$.fdcov)

Maybe you need to

      update.packages()

{which should re-install R packages you have installed but which
 have become outdated in the mean time}

If the error persists, please send us the output of

1)
   dput(LYGH[[202]])

   so we get your exact data

2)
   sessionInfo()

   so we get much info about your R "setup"

.... last but not least:  If you are really calling arfima()
with a time series of length 4  (which your LYGH[[202]] above
seems to suggest)
then you really need to learn a bit about the tools you are
using: It really does not make any sense to fit a somewhat
sophisticated time-series model (or *any* time-series model, I'd say) 
to a "series" with 4 values.

Best regards,
Martin

--
Martin Maechler
ETH Zurich  and  R Core team


From v@r|n@@ch@ @end|ng |rom y@hoo@|r  Thu Jun  1 21:42:21 2023
From: v@r|n@@ch@ @end|ng |rom y@hoo@|r (varin sacha)
Date: Thu, 1 Jun 2023 19:42:21 +0000 (UTC)
Subject: [R] Exact 95% CIs weibull distribution
References: <1210843777.5136267.1685648541248.ref@mail.yahoo.com>
Message-ID: <1210843777.5136267.1685648541248@mail.yahoo.com>

R-experts,

I am trying to find the exact 95% confidence intervals of the mean (and the median) for the weibull distribution. Here below I have the exact 95% CIs of the meanlog and the median for a lognormal using EnvStats library (ready-to-run function in library) but I don't find how to get the exact 95% CIs of the mean and median for the weibull. Indeed, the ready-to-run function in EnvStats library is not available for weibull.

Any help would be appreciated.


#Exact 95% CIs for the meanlog lognormal distribution
library(EnvStats)
x=rlnorm(100000,0,1)
elnorm(x,method="mvue",ci=TRUE,ci.type="two-sided",ci.method="exact",conf.level=0.95)
?
#Exact 95% CIs for the median lognormal distribution
library(EnvStats)
x=rlnorm(100000,0,1)
eqlnorm(x, p=0.5, method="mvue",ci=TRUE,ci.type="two-sided",ci.method="exact",conf.level=0.95)
?

#Exact 95% CIs for the mean weibull distribution
library(EnvStats)
x=rweibull(100000,shape=2, scale=2)
eqweibull(x, p = 0.925)
eqweibull(x, p = 0.975)

#Exact 95% CIs for the median weibull distribution
library(EnvStats)
x=rweibull(100000,shape=2, scale=2)
eqweibull(x, p = 0.5, method = "mle", digits = 0)


From ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de  Fri Jun  2 11:17:42 2023
From: ||gge@ @end|ng |rom @t@t|@t|k@tu-dortmund@de (Uwe Ligges)
Date: Fri, 2 Jun 2023 11:17:42 +0200
Subject: [R] Help sourcing datasets (.csv)
In-Reply-To: <AS8PR10MB6972DEFBA1881BE7DF96B2A7BC459@AS8PR10MB6972.EURPRD10.PROD.OUTLOOK.COM>
References: <AS8PR10MB6972DEFBA1881BE7DF96B2A7BC459@AS8PR10MB6972.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <74c477a0-9a10-2c94-e874-bb101281347d@statistik.tu-dortmund.de>

See ?data


On 28.05.2023 10:53, james carrigan wrote:
> Dear Sir or Madam
> I?m trying to compile a collection of datasets that require use of the following hypothesis tests.
> Are there datasets within the R library that I can get access to?
> Kind regards
> James Carrigan
> 
> Hypothesis Testing
> t.test(X,Y)
> ? performs a two sample t-test between X and Y
> t.test(X,Y,paired=TRUE)
> ? performs a paired t-test between X and Y
> prop.test(x = c(a, b), n = c(n1, n2))
> ? performs a 2-sample test for equality of proportions with continuity correction
> 
> Sent from my iPad Sent from my iPhone
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From tebert @end|ng |rom u||@edu  Fri Jun  2 17:55:08 2023
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Fri, 2 Jun 2023 15:55:08 +0000
Subject: [R] Help sourcing datasets (.csv)
In-Reply-To: <74c477a0-9a10-2c94-e874-bb101281347d@statistik.tu-dortmund.de>
References: <AS8PR10MB6972DEFBA1881BE7DF96B2A7BC459@AS8PR10MB6972.EURPRD10.PROD.OUTLOOK.COM>
 <74c477a0-9a10-2c94-e874-bb101281347d@statistik.tu-dortmund.de>
Message-ID: <SN4PR22MB28242EE1CCD92411740ADE21CF4EA@SN4PR22MB2824.namprd22.prod.outlook.com>

Another suggestion:
     The statistics does not care where the numbers come from. The values 1, 2, 3 have a mean of 2 no matter if these are weights of a bird, plant heights, or concrete tensile strength. Your interpretation might change, but the mean is still 2.

Try synthetic data.
X<-rnorm(1000, mean=4, sd=2)
Y<-14+12*X
cor(X,Y)

That is too simple, but it is the start.
Y<- rnorm(1000, mean=14, sd=2) + 12*X
cor(X,Y)

look at the result in something like ggplot2
Dataf <- data.frame(X,Y)
ggplot(Dataf, aes(X, Y)) + geom.point() + stat_smooth(method=lm, se=FALSE)


This approach has a few advantages:
1) I know that X and Y are samples from the Gaussian (Normal) distribution.
2) I know that the data are homoscedastic.
3) I can change 1 and 2 in whatever way I want. Possibly useful if you want to understand how violations in model assumptions influence outcomes.
4) I can look closely at the influence of sample size when assumptions are met and when they are not.

Note that ANOVA and regression do not assume that the independent or dependent variables are normally distributed. The assumption of Normality is for the error term in the model. However, if both dependent and independent variables are normally distributed then it is likely that the error term will also be normally distributed.

What should I get here?
Y<- rnorm(1000, mean=14, sd=2) + X*rnorm(1000, mean=12, sd=27)



Tim
-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Uwe Ligges
Sent: Friday, June 2, 2023 5:18 AM
To: james carrigan <james5431 at hotmail.com>; r-help at r-project.org
Subject: Re: [R] Help sourcing datasets (.csv)

[External Email]

See ?data


On 28.05.2023 10:53, james carrigan wrote:
> Dear Sir or Madam
> I'm trying to compile a collection of datasets that require use of the following hypothesis tests.
> Are there datasets within the R library that I can get access to?
> Kind regards
> James Carrigan
>
> Hypothesis Testing
> t.test(X,Y)
> - performs a two sample t-test between X and Y
> t.test(X,Y,paired=TRUE)
> - performs a paired t-test between X and Y prop.test(x = c(a, b), n =
> c(n1, n2)) - performs a 2-sample test for equality of proportions with
> continuity correction
>
> Sent from my iPad Sent from my iPhone
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat/
> .ethz.ch%2Fmailman%2Flistinfo%2Fr-help&data=05%7C01%7Ctebert%40ufl.edu
> %7C5f3292c3315b446b8b9008db634a37cb%7C0d4da0f84a314d76ace60a62331e1b84
> %7C0%7C0%7C638212942641271785%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAw
> MDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sda
> ta=s5NqLzxYTlnA1BHldzka%2F2i%2FoefvsLmU%2FDuLJav5mMc%3D&reserved=0
> PLEASE do read the posting guide
> http://www.r/
> -project.org%2Fposting-guide.html&data=05%7C01%7Ctebert%40ufl.edu%7C5f
> 3292c3315b446b8b9008db634a37cb%7C0d4da0f84a314d76ace60a62331e1b84%7C0%
> 7C0%7C638212942641271785%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiL
> CJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=xG
> MQDNZksGydmnYDLAFjZ%2BEZp4ne%2Bf5JK%2BO9qrH7zeU%3D&reserved=0
> and provide commented, minimal, self-contained, reproducible code.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Sun Jun  4 13:24:41 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Sun, 4 Jun 2023 11:24:41 +0000
Subject: [R] error in arfima...
In-Reply-To: <25720.20392.521283.415199@stat.math.ethz.ch>
References: <PU4P216MB1568160291D547CFE411E1ADC8489@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <25720.20392.521283.415199@stat.math.ethz.ch>
Message-ID: <PU4P216MB15688B7338B1E2898AE49959C84CA@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Martin,
                     REgrets to reply this late....

I am staring at a conundrum never before encountered in my experience with R:

LYGH[[201]]
[1] 45.40  3.25  6.50  2.15
> arfima(LYGH[[201]])
 Error in .fdcov(x, fdf$d, h, nar = nar, nma = nma, hess = hess, fdf.work = fdf$w) :
NA/NaN/Inf in foreign function call (arg 5)
> arfima(c(45.40,3.25,6.50,2.15))

Call:
  arfima(y = c(45.4, 3.25, 6.5, 2.15))

Coefficients:
           d
4.583013e-05
sigma[eps] = 18.01252
a list with components:
 [1] "log.likelihood"  "n"               "msg"             "d"               "ar"
 [6] "ma"              "covariance.dpq"  "fnormMin"        "sigma"           "stderror.dpq"
[11] "correlation.dpq" "h"               "d.tol"           "M"               "hessian.dpq"
[16] "length.w"        "residuals"       "fitted"          "call"            "x"
[21] "series"

Please note that the index of LYGH has changed from 202 to 201 due to some randomness in one of my function.

PLEASE HELP.

Output of dput LYGH[[201]]:

> dput(LYGH[[201]])
c(45.4, 3.25, 6.5, 2.14999999999998)

output of session info()

sessionInfo()
R version 4.1.2 (2021-11-01)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows Server x64 (build 14393)

Matrix products: default

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

attached base packages:
[1] parallel  stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] pbmcapply_1.5.1 imputeTS_3.3    forecast_8.17.0

loaded via a namespace (and not attached):
 [1] Rcpp_1.0.7        urca_1.3-3        pillar_1.9.0      compiler_4.1.2    tseries_0.10-51
 [6] tools_4.1.2       xts_0.12.1        nlme_3.1-153      lifecycle_1.0.3   tibble_3.2.1
[11] gtable_0.3.3      lattice_0.20-45   pkgconfig_2.0.3   rlang_1.1.0       cli_3.6.1
[16] rstudioapi_0.14   curl_4.3.2        xml2_1.3.3        dplyr_1.1.1       generics_0.1.3
[21] vctrs_0.6.1       gridtext_0.1.5    ggtext_0.1.2      lmtest_0.9-40     grid_4.1.2
[26] nnet_7.3-16       tidyselect_1.2.0  glue_1.6.2        R6_2.5.1          fansi_1.0.4
[31] ggplot2_3.4.2     TTR_0.24.3        magrittr_2.0.3    scales_1.2.1      quantmod_0.4.20
[36] timeDate_4021.106 colorspace_2.1-0  fracdiff_1.5-1    quadprog_1.5-8    utf8_1.2.3
[41] stinepack_1.4     munsell_0.5.0     zoo_1.8-10


PLease Also note:

arfima(c(45.4, 3.25, 6.5, 2.14999999999998))

Call:
  arfima(y = c(45.4, 3.25, 6.5, 2.14999999999998))

Coefficients:
           d
4.583013e-05
sigma[eps] = 18.01252
a list with components:
 [1] "log.likelihood"  "n"               "msg"             "d"               "ar"
 [6] "ma"              "covariance.dpq"  "fnormMin"        "sigma"           "stderror.dpq"
[11] "correlation.dpq" "h"               "d.tol"           "M"               "hessian.dpq"
[16] "length.w"        "residuals"       "fitted"          "call"            "x"
[21] "series"


Many thanks in advance....

Thanking you,
Yours sincerely,
AKSHAY M KULKARNI


________________________________
From: Martin Maechler <maechler at stat.math.ethz.ch>
Sent: Thursday, June 1, 2023 1:28 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: R help Mailing list <r-help at r-project.org>
Subject: Re: [R] error in arfima...

>>>>> akshay kulkarni
>>>>>     on Wed, 31 May 2023 20:55:33 +0000 writes:

    > dear members,

    > I am using arfima() from forecast package to model a time
    > series. The following is the code:

    >> LYGH[[202]]
    > [1] 45.40  3.25  6.50  2.15

    >> arfima(LYGH[[202]])
    > Error in .fdcov(x, fdf$d, h, nar = nar, nma = nma, hess = hess, fdf.work = fdf$w) :
    > NA/NaN/Inf in foreign function call (arg 5)

    > I tried viewing .fdcov() with the following code:

    > View(environment(fracdiff)$.fdcov)

    > but I see no stop() with the above mentioned error message.

    > Can you please help?

Well, as I am the maintainer of the *fracdiff* package,
I'm trying.  OTOH, as we will see below, you did not give us enough
information to really help you...

    > THanking you,
    > Yours sincerely,
    > AKSHAY M KULKARNI

Your problem is not (yet) reproducible (*)
I've done the following in an "empty" (i.e. freshly started) R
session, R 4.3.0:

----begin_R_transcript___save_as__arfima-ex.Rout__------------------------------
>
> lN <- loadedNamespaces()
> library(forecast)
Registered S3 method overwritten by 'quantmod':
  method            from
  as.zoo.data.frame zoo
> options(width=75)
> setdiff(loadedNamespaces(), lN) # -- see all the  *!^@...!   forecast loads:
 [1] "gtable"     "dplyr"      "tidyselect" "Rcpp"       "parallel"
 [6] "scales"     "lattice"    "ggplot2"    "R6"         "generics"
[11] "curl"       "lmtest"     "tibble"     "munsell"    "nnet"
[16] "forecast"   "timeDate"   "pillar"     "rlang"      "quantmod"
[21] "utf8"       "urca"       "quadprog"   "cli"        "magrittr"
[26] "xts"        "grid"       "nlme"       "lifecycle"  "fracdiff"
[31] "vctrs"      "glue"       "tseries"    "zoo"        "fansi"
[36] "colorspace" "TTR"        "pkgconfig"
> arfima(c(45.40, 3.25, 6.50, 2.15))

Call:
  arfima(y = c(45.4, 3.25, 6.5, 2.15))

Coefficients:
           d
4.583013e-05
sigma[eps] = 18.01252
a list with components:
 [1] "log.likelihood"  "n"               "msg"
 [4] "d"               "ar"              "ma"
 [7] "covariance.dpq"  "fnormMin"        "sigma"
[10] "stderror.dpq"    "correlation.dpq" "h"
[13] "d.tol"           "M"               "hessian.dpq"
[16] "length.w"        "residuals"       "fitted"
[19] "call"            "x"               "series"
>
> sessionInfo()
R version 4.3.0 (2023-04-21)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Fedora Linux 36 (Thirty Six)

Matrix products: default
BLAS:   /usr/local64.sfs/app/R/R-4.3.0-inst/lib/libRblas.so
LAPACK: /usr/lib64/liblapack.so.3.10.1

locale:
 [1] LC_CTYPE=de_CH.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=de_CH.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=de_CH.UTF-8
 [7] LC_PAPER=de_CH.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=de_CH.UTF-8 LC_IDENTIFICATION=C

time zone: Europe/Zurich
tzcode source: system (glibc)

attached base packages:
[1] graphics  grDevices datasets  stats     utils     methods   base

other attached packages:
[1] forecast_8.21  fortunes_1.5-4 sfsmisc_1.1-15

loaded via a namespace (and not attached):
 [1] gtable_0.3.3      dplyr_1.1.2       compiler_4.3.0
 [4] tidyselect_1.2.0  Rcpp_1.0.10       parallel_4.3.0
 [7] scales_1.2.1      lattice_0.21-8    ggplot2_3.4.2
[10] R6_2.5.1          generics_0.1.3    curl_5.0.0
[13] lmtest_0.9-40     tibble_3.2.1      munsell_0.5.0
[16] nnet_7.3-19       timeDate_4022.108 pillar_1.9.0
[19] rlang_1.1.1       quantmod_0.4.22   utf8_1.2.3
[22] urca_1.3-3        quadprog_1.5-8    cli_3.6.1
[25] magrittr_2.0.3    xts_0.13.1        grid_4.3.0
[28] nlme_3.1-162      lifecycle_1.0.3   fracdiff_1.5-2
[31] vctrs_0.6.2       glue_1.6.2        tseries_0.10-54
[34] zoo_1.8-12        fansi_1.0.4       colorspace_2.1-0
[37] TTR_0.24.3        tools_4.3.0       pkgconfig_2.0.3
>
##---end__R_transcript---------------------------------------------------------------


Note that your error message pointed me to my (old, but still
fine) package {fracdiff} with its principal function fracdiff()
around which   arfima()  is a user-friendly and
generalization wrapper.

In other words arfima() calls fracdiff::fracdiff() and the error
happens there --- for you, but not for me, if I try to use the
same data as you.
I see that you must have found that too, because you mentioned
   View(environment(fracdiff)$.fdcov)

Maybe you need to

      update.packages()

{which should re-install R packages you have installed but which
 have become outdated in the mean time}

If the error persists, please send us the output of

1)
   dput(LYGH[[202]])

   so we get your exact data

2)
   sessionInfo()

   so we get much info about your R "setup"

.... last but not least:  If you are really calling arfima()
with a time series of length 4  (which your LYGH[[202]] above
seems to suggest)
then you really need to learn a bit about the tools you are
using: It really does not make any sense to fit a somewhat
sophisticated time-series model (or *any* time-series model, I'd say)
to a "series" with 4 values.

Best regards,
Martin

--
Martin Maechler
ETH Zurich  and  R Core team

	[[alternative HTML version deleted]]


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Mon Jun  5 01:11:08 2023
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Sun, 4 Jun 2023 18:11:08 -0500
Subject: [R] Adding  a numeric class to a data.frame
References: <00d301d99739$d9000ed0$8b002c70$.ref@sbcglobal.net>
Message-ID: <00d301d99739$d9000ed0$8b002c70$@sbcglobal.net>

R-Help Community

 

How do I add a numeric class to a data .frame. 

 

For example, I have calculated the following probabilities

 

           1            2            3

0.0011566127 0.0009267028 0.0081623324

 

How would I add them back into my data.frame for example

 

My_df <- data.frame(col_1 = c('A', 'B', 'C')) such that I end up with

 

col_1                   col_2

        A  0.0011566127

 

Though I could use a cbind.

 

Jeff


	[[alternative HTML version deleted]]


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Jun  5 01:37:23 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 04 Jun 2023 16:37:23 -0700
Subject: [R] Adding  a numeric class to a data.frame
In-Reply-To: <00d301d99739$d9000ed0$8b002c70$@sbcglobal.net>
References: <00d301d99739$d9000ed0$8b002c70$.ref@sbcglobal.net>
 <00d301d99739$d9000ed0$8b002c70$@sbcglobal.net>
Message-ID: <86F1D370-63B3-4655-AF83-ACBE724F19D4@dcn.davis.ca.us>

The obvious answer is

My_df$col_2 <- prob_result

but whether that would work might depend on the structure of prob_result.

What does

dput(prob_result)

return?

On June 4, 2023 4:11:08 PM PDT, Jeff Reichman <reichmanj at sbcglobal.net> wrote:
>R-Help Community
>
> 
>
>How do I add a numeric class to a data .frame. 
>
> 
>
>For example, I have calculated the following probabilities
>
> 
>
>           1            2            3
>
>0.0011566127 0.0009267028 0.0081623324
>
> 
>
>How would I add them back into my data.frame for example
>
> 
>
>My_df <- data.frame(col_1 = c('A', 'B', 'C')) such that I end up with
>
> 
>
>col_1                   col_2
>
>        A  0.0011566127
>
> 
>
>Though I could use a cbind.
>
> 
>
>Jeff
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @vi@e@gross m@iii@g oii gm@ii@com  Mon Jun  5 03:59:47 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Sun, 4 Jun 2023 21:59:47 -0400
Subject: [R] Adding  a numeric class to a data.frame
In-Reply-To: <00d301d99739$d9000ed0$8b002c70$@sbcglobal.net>
References: <00d301d99739$d9000ed0$8b002c70$.ref@sbcglobal.net>
 <00d301d99739$d9000ed0$8b002c70$@sbcglobal.net>
Message-ID: <009201d99751$68622d30$39268790$@gmail.com>

Jeff R, it would be helpful if your intent was understood.

For example, did you want output as a column of labels c("A", "B", "C") and
another adjacent of c(0.0011566127, 0.0009267028, 0.0081623324) then you
could do:

data.frame(labels=c("A", "B", "C"), data=c(0.0011566127, 0.0009267028,
0.0081623324))
  labels         data
1      A 0.0011566127
2      B 0.0009267028
3      C 0.0081623324

If you wanted your columns labeled with the data in multiple columns, try
this:

> result <- data.frame(t(c(0.0011566127, 0.0009267028, 0.0081623324)))
> result
           X1           X2          X3
1 0.001156613 0.0009267028 0.008162332
> names(result) <- c("A", "B", "C")
> result
            A            B           C
1 0.001156613 0.0009267028 0.008162332

But these are not solutions to your specified problem unless you explain
properly what you want to do and the exact expected output.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Reichman
Sent: Sunday, June 4, 2023 7:11 PM
To: r-help at r-project.org
Subject: [R] Adding a numeric class to a data.frame

R-Help Community

 

How do I add a numeric class to a data .frame. 

 

For example, I have calculated the following probabilities

 

           1            2            3

0.0011566127 0.0009267028 0.0081623324

 

How would I add them back into my data.frame for example

 

My_df <- data.frame(col_1 = c('A', 'B', 'C')) such that I end up with

 

col_1                   col_2

        A  0.0011566127

 

Though I could use a cbind.

 

Jeff


	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Mon Jun  5 04:20:56 2023
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Sun, 4 Jun 2023 21:20:56 -0500
Subject: [R] Adding  a numeric class to a data.frame
In-Reply-To: <009201d99751$68622d30$39268790$@gmail.com>
References: <00d301d99739$d9000ed0$8b002c70$.ref@sbcglobal.net>
 <00d301d99739$d9000ed0$8b002c70$@sbcglobal.net>
 <009201d99751$68622d30$39268790$@gmail.com>
Message-ID: <012601d99754$5ce4dd10$16ae9730$@sbcglobal.net>

Yes - I could have done that but I have over 5,000 calculated probabilities.
So yes a little more detail would have helped. I'm needing to add those
probability back into the original data.frame from which the model was
created as I'm going  to be using ggplot2 so I need the probabilities and
original dataframe to be one.

-----Original Message-----
From: avi.e.gross at gmail.com <avi.e.gross at gmail.com> 
Sent: Sunday, June 4, 2023 9:00 PM
To: 'Jeff Reichman' <reichmanj at sbcglobal.net>; r-help at r-project.org
Subject: RE: [R] Adding a numeric class to a data.frame

Jeff R, it would be helpful if your intent was understood.

For example, did you want output as a column of labels c("A", "B", "C") and
another adjacent of c(0.0011566127, 0.0009267028, 0.0081623324) then you
could do:

data.frame(labels=c("A", "B", "C"), data=c(0.0011566127, 0.0009267028,
0.0081623324))
  labels         data
1      A 0.0011566127
2      B 0.0009267028
3      C 0.0081623324

If you wanted your columns labeled with the data in multiple columns, try
this:

> result <- data.frame(t(c(0.0011566127, 0.0009267028, 0.0081623324))) 
> result
           X1           X2          X3
1 0.001156613 0.0009267028 0.008162332
> names(result) <- c("A", "B", "C")
> result
            A            B           C
1 0.001156613 0.0009267028 0.008162332

But these are not solutions to your specified problem unless you explain
properly what you want to do and the exact expected output.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Reichman
Sent: Sunday, June 4, 2023 7:11 PM
To: r-help at r-project.org
Subject: [R] Adding a numeric class to a data.frame

R-Help Community

 

How do I add a numeric class to a data .frame. 

 

For example, I have calculated the following probabilities

 

           1            2            3

0.0011566127 0.0009267028 0.0081623324

 

How would I add them back into my data.frame for example

 

My_df <- data.frame(col_1 = c('A', 'B', 'C')) such that I end up with

 

col_1                   col_2

        A  0.0011566127

 

Though I could use a cbind.

 

Jeff


	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Mon Jun  5 04:38:24 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sun, 04 Jun 2023 19:38:24 -0700
Subject: [R] Adding  a numeric class to a data.frame
In-Reply-To: <012601d99754$5ce4dd10$16ae9730$@sbcglobal.net>
References: <00d301d99739$d9000ed0$8b002c70$.ref@sbcglobal.net>
 <00d301d99739$d9000ed0$8b002c70$@sbcglobal.net>
 <009201d99751$68622d30$39268790$@gmail.com>
 <012601d99754$5ce4dd10$16ae9730$@sbcglobal.net>
Message-ID: <37DEDB3D-8F8A-4FBE-8EB8-7566E3E7B34E@dcn.davis.ca.us>

Still waiting for you to communicate... https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

On June 4, 2023 7:20:56 PM PDT, Jeff Reichman <reichmanj at sbcglobal.net> wrote:
>Yes - I could have done that but I have over 5,000 calculated probabilities.
>So yes a little more detail would have helped. I'm needing to add those
>probability back into the original data.frame from which the model was
>created as I'm going  to be using ggplot2 so I need the probabilities and
>original dataframe to be one.
>
>-----Original Message-----
>From: avi.e.gross at gmail.com <avi.e.gross at gmail.com> 
>Sent: Sunday, June 4, 2023 9:00 PM
>To: 'Jeff Reichman' <reichmanj at sbcglobal.net>; r-help at r-project.org
>Subject: RE: [R] Adding a numeric class to a data.frame
>
>Jeff R, it would be helpful if your intent was understood.
>
>For example, did you want output as a column of labels c("A", "B", "C") and
>another adjacent of c(0.0011566127, 0.0009267028, 0.0081623324) then you
>could do:
>
>data.frame(labels=c("A", "B", "C"), data=c(0.0011566127, 0.0009267028,
>0.0081623324))
>  labels         data
>1      A 0.0011566127
>2      B 0.0009267028
>3      C 0.0081623324
>
>If you wanted your columns labeled with the data in multiple columns, try
>this:
>
>> result <- data.frame(t(c(0.0011566127, 0.0009267028, 0.0081623324))) 
>> result
>           X1           X2          X3
>1 0.001156613 0.0009267028 0.008162332
>> names(result) <- c("A", "B", "C")
>> result
>            A            B           C
>1 0.001156613 0.0009267028 0.008162332
>
>But these are not solutions to your specified problem unless you explain
>properly what you want to do and the exact expected output.
>
>
>
>-----Original Message-----
>From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Reichman
>Sent: Sunday, June 4, 2023 7:11 PM
>To: r-help at r-project.org
>Subject: [R] Adding a numeric class to a data.frame
>
>R-Help Community
>
> 
>
>How do I add a numeric class to a data .frame. 
>
> 
>
>For example, I have calculated the following probabilities
>
> 
>
>           1            2            3
>
>0.0011566127 0.0009267028 0.0081623324
>
> 
>
>How would I add them back into my data.frame for example
>
> 
>
>My_df <- data.frame(col_1 = c('A', 'B', 'C')) such that I end up with
>
> 
>
>col_1                   col_2
>
>        A  0.0011566127
>
> 
>
>Though I could use a cbind.
>
> 
>
>Jeff
>
>
>	[[alternative HTML version deleted]]
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From @vi@e@gross m@iii@g oii gm@ii@com  Mon Jun  5 04:57:35 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Sun, 4 Jun 2023 22:57:35 -0400
Subject: [R] Adding  a numeric class to a data.frame
In-Reply-To: <012601d99754$5ce4dd10$16ae9730$@sbcglobal.net>
References: <00d301d99739$d9000ed0$8b002c70$.ref@sbcglobal.net>
 <00d301d99739$d9000ed0$8b002c70$@sbcglobal.net>
 <009201d99751$68622d30$39268790$@gmail.com>
 <012601d99754$5ce4dd10$16ae9730$@sbcglobal.net>
Message-ID: <009401d99759$7b74b570$725e2050$@gmail.com>

Jeff,

The number of items is not relevant except insofar as your vector of
probabilities is in the same order as the other vector and the same length.

If for example you had a vector of test scores for 10,000 tests and you
calculated the probability in the data of having a 100, then the probability
of a 99 and so on, then you could make another vector of 10,000 giving the
probability of the corresponding entries.

So before calling ggplot, assuming you have two vectors called orig and
prob, you make a data.frame like

Df <- data.frame(orig=orig, prob=prob)

You use that in ggplot.

You can of course add additional columns. Or if your data is in another
format, do things like long to wide conversion and many other things.

If you already have a data.frame with one or more columns including orig,
you can attache the probabilities with something as simple as:

Df$prob = prob

If you are using ggplot, you may as well be using elements of the tidyverse
that provide a different take on how to do some things compared to base R
but that is not something easily discussed here.



-----Original Message-----
From: Jeff Reichman <reichmanj at sbcglobal.net> 
Sent: Sunday, June 4, 2023 10:21 PM
To: avi.e.gross at gmail.com; r-help at r-project.org
Subject: RE: [R] Adding a numeric class to a data.frame

Yes - I could have done that but I have over 5,000 calculated probabilities.
So yes a little more detail would have helped. I'm needing to add those
probability back into the original data.frame from which the model was
created as I'm going  to be using ggplot2 so I need the probabilities and
original dataframe to be one.

-----Original Message-----
From: avi.e.gross at gmail.com <avi.e.gross at gmail.com> 
Sent: Sunday, June 4, 2023 9:00 PM
To: 'Jeff Reichman' <reichmanj at sbcglobal.net>; r-help at r-project.org
Subject: RE: [R] Adding a numeric class to a data.frame

Jeff R, it would be helpful if your intent was understood.

For example, did you want output as a column of labels c("A", "B", "C") and
another adjacent of c(0.0011566127, 0.0009267028, 0.0081623324) then you
could do:

data.frame(labels=c("A", "B", "C"), data=c(0.0011566127, 0.0009267028,
0.0081623324))
  labels         data
1      A 0.0011566127
2      B 0.0009267028
3      C 0.0081623324

If you wanted your columns labeled with the data in multiple columns, try
this:

> result <- data.frame(t(c(0.0011566127, 0.0009267028, 0.0081623324))) 
> result
           X1           X2          X3
1 0.001156613 0.0009267028 0.008162332
> names(result) <- c("A", "B", "C")
> result
            A            B           C
1 0.001156613 0.0009267028 0.008162332

But these are not solutions to your specified problem unless you explain
properly what you want to do and the exact expected output.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Reichman
Sent: Sunday, June 4, 2023 7:11 PM
To: r-help at r-project.org
Subject: [R] Adding a numeric class to a data.frame

R-Help Community

 

How do I add a numeric class to a data .frame. 

 

For example, I have calculated the following probabilities

 

           1            2            3

0.0011566127 0.0009267028 0.0081623324

 

How would I add them back into my data.frame for example

 

My_df <- data.frame(col_1 = c('A', 'B', 'C')) such that I end up with

 

col_1                   col_2

        A  0.0011566127

 

Though I could use a cbind.

 

Jeff


	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From m@ech|er @end|ng |rom @t@t@m@th@ethz@ch  Mon Jun  5 11:49:20 2023
From: m@ech|er @end|ng |rom @t@t@m@th@ethz@ch (Martin Maechler)
Date: Mon, 5 Jun 2023 11:49:20 +0200
Subject: [R] error in arfima...
In-Reply-To: <PU4P216MB15688B7338B1E2898AE49959C84CA@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
References: <PU4P216MB1568160291D547CFE411E1ADC8489@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <25720.20392.521283.415199@stat.math.ethz.ch>
 <PU4P216MB15688B7338B1E2898AE49959C84CA@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
Message-ID: <25725.44960.478222.430645@stat.math.ethz.ch>


> Dear Martin,
>                      REgrets to reply this late....

> I am staring at a conundrum never before encountered in my experience with R:

> LYGH[[201]]
> [1] 45.40  3.25  6.50  2.15
> > arfima(LYGH[[201]])
>  Error in .fdcov(x, fdf$d, h, nar = nar, nma = nma, hess = hess, fdf.work = fdf$w) :
> NA/NaN/Inf in foreign function call (arg 5)
> > arfima(c(45.40,3.25,6.50,2.15))

> Call:
>   arfima(y = c(45.4, 3.25, 6.5, 2.15))

> Coefficients:
>            d
> 4.583013e-05
> sigma[eps] = 18.01252
> a list with components:
>  [1] "log.likelihood"  "n"               "msg"             "d"               "ar"
>  [6] "ma"              "covariance.dpq"  "fnormMin"        "sigma"           "stderror.dpq"
> [11] "correlation.dpq" "h"               "d.tol"           "M"               "hessian.dpq"
> [16] "length.w"        "residuals"       "fitted"          "call"            "x"
> [21] "series"

> Please note that the index of LYGH has changed from 202 to 201 due to some randomness in one of my function.

> PLEASE HELP.

> Output of dput LYGH[[201]]:

> > dput(LYGH[[201]])
> c(45.4, 3.25, 6.5, 2.14999999999998)

> output of session info()

> sessionInfo()
> R version 4.1.2 (2021-11-01)
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> Running under: Windows Server x64 (build 14393)

> Matrix products: default

> locale:
> [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252
> [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
> [5] LC_TIME=English_United States.1252

> attached base packages:
> [1] parallel  stats     graphics  grDevices utils     datasets  methods   base

> other attached packages:
> [1] pbmcapply_1.5.1 imputeTS_3.3    forecast_8.17.0

> loaded via a namespace (and not attached):
>  [1] Rcpp_1.0.7        urca_1.3-3        pillar_1.9.0      compiler_4.1.2    tseries_0.10-51
>  [6] tools_4.1.2       xts_0.12.1        nlme_3.1-153      lifecycle_1.0.3   tibble_3.2.1
> [11] gtable_0.3.3      lattice_0.20-45   pkgconfig_2.0.3   rlang_1.1.0       cli_3.6.1
> [16] rstudioapi_0.14   curl_4.3.2        xml2_1.3.3        dplyr_1.1.1       generics_0.1.3
> [21] vctrs_0.6.1       gridtext_0.1.5    ggtext_0.1.2      lmtest_0.9-40     grid_4.1.2
> [26] nnet_7.3-16       tidyselect_1.2.0  glue_1.6.2        R6_2.5.1          fansi_1.0.4
> [31] ggplot2_3.4.2     TTR_0.24.3        magrittr_2.0.3    scales_1.2.1      quantmod_0.4.20
> [36] timeDate_4021.106 colorspace_2.1-0  fracdiff_1.5-1    quadprog_1.5-8    utf8_1.2.3
> [41] stinepack_1.4     munsell_0.5.0     zoo_1.8-10


> PLease Also note:

> arfima(c(45.4, 3.25, 6.5, 2.14999999999998))

> Call:
>   arfima(y = c(45.4, 3.25, 6.5, 2.14999999999998))

> Coefficients:
>            d
> 4.583013e-05
> sigma[eps] = 18.01252
> a list with components:
>  [1] "log.likelihood"  "n"               "msg"             "d"               "ar"
>  [6] "ma"              "covariance.dpq"  "fnormMin"        "sigma"           "stderror.dpq"
> [11] "correlation.dpq" "h"               "d.tol"           "M"               "hessian.dpq"
> [16] "length.w"        "residuals"       "fitted"          "call"            "x"
> [21] "series"


> Many thanks in advance....

> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI

Hmm... indeed, "conundrum" may be a euphemism for the
situation..... which clearly points to a bug *somewhere*.
As your dput() shows, the argument *is* a simple vector .. and
even if the default dput() may loose a few bits in
precison... you did show that with (possibly only almost)
identical argument, the error did not happen.

I really have no idea what's going on, ....
Some musing/ideas: the  NA/NaN/Inf  warning
may come from a memory corruption problem somewhere because some
of the involved packages using compiled code or the old version of R/lapack/??? 
or ??? cause it.

Does the error only happen occasionally?
If you "randomly" do a few calls of either
  arfima(c(45.4, 3.25, 6.5, 2.14999999999998))
or
  arfima(LYGH[[201]])
do you see "random" behavior? [if yes; this confirms typically
memory protection/allocation/... bugs]

fracdiff itself has also been updated (to 1.5-2) but that was really only
a compiler warning, not a bug fix, and I cannot imagine that
that makes the difference.

I think you should consider let your 'Windows Server' provider
update R on that server.  Notably the Windows version of R has
had problems fixed in the mean time ..
and at least there's a hope the problem disappears.

Lastly (but probably not helping more), you could use
dput() with control="digits"  and even
.Internal(inspect( * ))  magic on your  LYGH[[201]]

When I use simple numeric vectors "like" your LYGH[..], I get

> dput(c(45.4, 3.25, 6.5, 2.15), control="digits")
 c(45.399999999999999, 3.25, 6.5, 2.1499999999999999)

> .Internal(inspect(c(45.4, 3.25, 6.5, 2.15)) + ) 
@9874728 14 REALSXP g0c3 [] (len=4, tl=0) 45.4,3.25,6.5,2.15
>

Martin


> ________________________________
> From: Martin Maechler <maechler at stat.math.ethz.ch>
> Sent: Thursday, June 1, 2023 1:28 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] error in arfima...

> >>>>> akshay kulkarni
> >>>>>     on Wed, 31 May 2023 20:55:33 +0000 writes:

>     > dear members,

>     > I am using arfima() from forecast package to model a time
>     > series. The following is the code:

>     >> LYGH[[202]]
>     > [1] 45.40  3.25  6.50  2.15

>     >> arfima(LYGH[[202]])
>     > Error in .fdcov(x, fdf$d, h, nar = nar, nma = nma, hess = hess, fdf.work = fdf$w) :
>     > NA/NaN/Inf in foreign function call (arg 5)

>     > I tried viewing .fdcov() with the following code:

>     > View(environment(fracdiff)$.fdcov)

>     > but I see no stop() with the above mentioned error message.

>     > Can you please help?

> Well, as I am the maintainer of the *fracdiff* package,
> I'm trying.  OTOH, as we will see below, you did not give us enough
> information to really help you...

>     > THanking you,
>     > Yours sincerely,
>     > AKSHAY M KULKARNI

> Your problem is not (yet) reproducible (*)
> I've done the following in an "empty" (i.e. freshly started) R
> session, R 4.3.0:

> ----begin_R_transcript___save_as__arfima-ex.Rout__------------------------------
> >
> > lN <- loadedNamespaces()
> > library(forecast)
> Registered S3 method overwritten by 'quantmod':
>   method            from
>   as.zoo.data.frame zoo
> > options(width=75)
> > setdiff(loadedNamespaces(), lN) # -- see all the  *!^@...!   forecast loads:
>  [1] "gtable"     "dplyr"      "tidyselect" "Rcpp"       "parallel"
>  [6] "scales"     "lattice"    "ggplot2"    "R6"         "generics"
> [11] "curl"       "lmtest"     "tibble"     "munsell"    "nnet"
> [16] "forecast"   "timeDate"   "pillar"     "rlang"      "quantmod"
> [21] "utf8"       "urca"       "quadprog"   "cli"        "magrittr"
> [26] "xts"        "grid"       "nlme"       "lifecycle"  "fracdiff"
> [31] "vctrs"      "glue"       "tseries"    "zoo"        "fansi"
> [36] "colorspace" "TTR"        "pkgconfig"
> > arfima(c(45.40, 3.25, 6.50, 2.15))

> Call:
>   arfima(y = c(45.4, 3.25, 6.5, 2.15))

> Coefficients:
>            d
> 4.583013e-05
> sigma[eps] = 18.01252
> a list with components:
>  [1] "log.likelihood"  "n"               "msg"
>  [4] "d"               "ar"              "ma"
>  [7] "covariance.dpq"  "fnormMin"        "sigma"
> [10] "stderror.dpq"    "correlation.dpq" "h"
> [13] "d.tol"           "M"               "hessian.dpq"
> [16] "length.w"        "residuals"       "fitted"
> [19] "call"            "x"               "series"
> >
> > sessionInfo()
> R version 4.3.0 (2023-04-21)
> Platform: x86_64-pc-linux-gnu (64-bit)
> Running under: Fedora Linux 36 (Thirty Six)

> Matrix products: default
> BLAS:   /usr/local64.sfs/app/R/R-4.3.0-inst/lib/libRblas.so
> LAPACK: /usr/lib64/liblapack.so.3.10.1

> locale:
>  [1] LC_CTYPE=de_CH.UTF-8       LC_NUMERIC=C
>  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=de_CH.UTF-8
>  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=de_CH.UTF-8
>  [7] LC_PAPER=de_CH.UTF-8       LC_NAME=C
>  [9] LC_ADDRESS=C               LC_TELEPHONE=C
> [11] LC_MEASUREMENT=de_CH.UTF-8 LC_IDENTIFICATION=C

> time zone: Europe/Zurich
> tzcode source: system (glibc)

> attached base packages:
> [1] graphics  grDevices datasets  stats     utils     methods   base

> other attached packages:
> [1] forecast_8.21  fortunes_1.5-4 sfsmisc_1.1-15

> loaded via a namespace (and not attached):
>  [1] gtable_0.3.3      dplyr_1.1.2       compiler_4.3.0
>  [4] tidyselect_1.2.0  Rcpp_1.0.10       parallel_4.3.0
>  [7] scales_1.2.1      lattice_0.21-8    ggplot2_3.4.2
> [10] R6_2.5.1          generics_0.1.3    curl_5.0.0
> [13] lmtest_0.9-40     tibble_3.2.1      munsell_0.5.0
> [16] nnet_7.3-19       timeDate_4022.108 pillar_1.9.0
> [19] rlang_1.1.1       quantmod_0.4.22   utf8_1.2.3
> [22] urca_1.3-3        quadprog_1.5-8    cli_3.6.1
> [25] magrittr_2.0.3    xts_0.13.1        grid_4.3.0
> [28] nlme_3.1-162      lifecycle_1.0.3   fracdiff_1.5-2
> [31] vctrs_0.6.2       glue_1.6.2        tseries_0.10-54
> [34] zoo_1.8-12        fansi_1.0.4       colorspace_2.1-0
> [37] TTR_0.24.3        tools_4.3.0       pkgconfig_2.0.3
> >
> ##---end__R_transcript---------------------------------------------------------------


> Note that your error message pointed me to my (old, but still
> fine) package {fracdiff} with its principal function fracdiff()
> around which   arfima()  is a user-friendly and
> generalization wrapper.

> In other words arfima() calls fracdiff::fracdiff() and the error
> happens there --- for you, but not for me, if I try to use the
> same data as you.
> I see that you must have found that too, because you mentioned
>    View(environment(fracdiff)$.fdcov)

> Maybe you need to

>       update.packages()

> {which should re-install R packages you have installed but which
>  have become outdated in the mean time}

> If the error persists, please send us the output of

> 1)
>    dput(LYGH[[202]])

>    so we get your exact data

> 2)
>    sessionInfo()

>    so we get much info about your R "setup"

> .... last but not least:  If you are really calling arfima()
> with a time series of length 4  (which your LYGH[[202]] above
> seems to suggest)
> then you really need to learn a bit about the tools you are
> using: It really does not make any sense to fit a somewhat
> sophisticated time-series model (or *any* time-series model, I'd say)
> to a "series" with 4 values.

> Best regards,
> Martin

> --
> Martin Maechler
> ETH Zurich  and  R Core team


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Mon Jun  5 13:29:27 2023
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Mon, 5 Jun 2023 06:29:27 -0500
Subject: [R] Adding  a numeric class to a data.frame
In-Reply-To: <009401d99759$7b74b570$725e2050$@gmail.com>
References: <00d301d99739$d9000ed0$8b002c70$.ref@sbcglobal.net>
 <00d301d99739$d9000ed0$8b002c70$@sbcglobal.net>
 <009201d99751$68622d30$39268790$@gmail.com>
 <012601d99754$5ce4dd10$16ae9730$@sbcglobal.net>
 <009401d99759$7b74b570$725e2050$@gmail.com>
Message-ID: <001e01d997a0$fd9cbf10$f8d63d30$@sbcglobal.net>

Avi

But I don't have a column header to call. Do I simply use column position 

> pred_probability 
             1              2              3              5              8 
0.001156612672 0.000926702837 0.008162332353 0.001544764162 0.000919503109
..........
> str(pred_probability )
 Named num [1:6964] 0.001157 0.000927 0.008162 0.001545 0.00092 ...
 - attr(*, "names")= chr [1:6964] "1" "2" "3" "5" ...
>

Jeff

-----Original Message-----
From: avi.e.gross at gmail.com <avi.e.gross at gmail.com> 
Sent: Sunday, June 4, 2023 9:58 PM
To: 'Jeff Reichman' <reichmanj at sbcglobal.net>; r-help at r-project.org
Subject: RE: [R] Adding a numeric class to a data.frame

Jeff,

The number of items is not relevant except insofar as your vector of
probabilities is in the same order as the other vector and the same length.

If for example you had a vector of test scores for 10,000 tests and you
calculated the probability in the data of having a 100, then the probability
of a 99 and so on, then you could make another vector of 10,000 giving the
probability of the corresponding entries.

So before calling ggplot, assuming you have two vectors called orig and
prob, you make a data.frame like

Df <- data.frame(orig=orig, prob=prob)

You use that in ggplot.

You can of course add additional columns. Or if your data is in another
format, do things like long to wide conversion and many other things.

If you already have a data.frame with one or more columns including orig,
you can attache the probabilities with something as simple as:

Df$prob = prob

If you are using ggplot, you may as well be using elements of the tidyverse
that provide a different take on how to do some things compared to base R
but that is not something easily discussed here.



-----Original Message-----
From: Jeff Reichman <reichmanj at sbcglobal.net>
Sent: Sunday, June 4, 2023 10:21 PM
To: avi.e.gross at gmail.com; r-help at r-project.org
Subject: RE: [R] Adding a numeric class to a data.frame

Yes - I could have done that but I have over 5,000 calculated probabilities.
So yes a little more detail would have helped. I'm needing to add those
probability back into the original data.frame from which the model was
created as I'm going  to be using ggplot2 so I need the probabilities and
original dataframe to be one.

-----Original Message-----
From: avi.e.gross at gmail.com <avi.e.gross at gmail.com>
Sent: Sunday, June 4, 2023 9:00 PM
To: 'Jeff Reichman' <reichmanj at sbcglobal.net>; r-help at r-project.org
Subject: RE: [R] Adding a numeric class to a data.frame

Jeff R, it would be helpful if your intent was understood.

For example, did you want output as a column of labels c("A", "B", "C") and
another adjacent of c(0.0011566127, 0.0009267028, 0.0081623324) then you
could do:

data.frame(labels=c("A", "B", "C"), data=c(0.0011566127, 0.0009267028,
0.0081623324))
  labels         data
1      A 0.0011566127
2      B 0.0009267028
3      C 0.0081623324

If you wanted your columns labeled with the data in multiple columns, try
this:

> result <- data.frame(t(c(0.0011566127, 0.0009267028, 0.0081623324))) 
> result
           X1           X2          X3
1 0.001156613 0.0009267028 0.008162332
> names(result) <- c("A", "B", "C")
> result
            A            B           C
1 0.001156613 0.0009267028 0.008162332

But these are not solutions to your specified problem unless you explain
properly what you want to do and the exact expected output.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Reichman
Sent: Sunday, June 4, 2023 7:11 PM
To: r-help at r-project.org
Subject: [R] Adding a numeric class to a data.frame

R-Help Community

 

How do I add a numeric class to a data .frame. 

 

For example, I have calculated the following probabilities

 

           1            2            3

0.0011566127 0.0009267028 0.0081623324

 

How would I add them back into my data.frame for example

 

My_df <- data.frame(col_1 = c('A', 'B', 'C')) such that I end up with

 

col_1                   col_2

        A  0.0011566127

 

Though I could use a cbind.

 

Jeff


	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From @k@h@y_e4 @end|ng |rom hotm@||@com  Mon Jun  5 16:11:12 2023
From: @k@h@y_e4 @end|ng |rom hotm@||@com (akshay kulkarni)
Date: Mon, 5 Jun 2023 14:11:12 +0000
Subject: [R] error in arfima...
In-Reply-To: <25725.44960.478222.430645@stat.math.ethz.ch>
References: <PU4P216MB1568160291D547CFE411E1ADC8489@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <25720.20392.521283.415199@stat.math.ethz.ch>
 <PU4P216MB15688B7338B1E2898AE49959C84CA@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>
 <25725.44960.478222.430645@stat.math.ethz.ch>
Message-ID: <PU4P216MB156872EF3760CF852ABE65F8C84DA@PU4P216MB1568.KORP216.PROD.OUTLOOK.COM>

Dear Martin,
                     Sad that the bug is beyond your ken...

Fortunately, the error happens only rarely...The length of LYGH was 719 and there were only two such errors..I will just replace them with NA and make do.

By the by, what if I send LYGH as an attachment to your actual mail ( not the r-help mail)? Will it help? Can you then pinpoint the cause?

Or should I raise a bug report? If yes, how( I never raised one)?

THanking you,
Yours sincerely,
AKSHAY M KULKARNI
________________________________
From: Martin Maechler <maechler at stat.math.ethz.ch>
Sent: Monday, June 5, 2023 3:19 PM
To: akshay kulkarni <akshay_e4 at hotmail.com>
Cc: Martin Maechler <maechler at stat.math.ethz.ch>; R help Mailing list <r-help at r-project.org>
Subject: Re: [R] error in arfima...


> Dear Martin,
>                      REgrets to reply this late....

> I am staring at a conundrum never before encountered in my experience with R:

> LYGH[[201]]
> [1] 45.40  3.25  6.50  2.15
> > arfima(LYGH[[201]])
>  Error in .fdcov(x, fdf$d, h, nar = nar, nma = nma, hess = hess, fdf.work = fdf$w) :
> NA/NaN/Inf in foreign function call (arg 5)
> > arfima(c(45.40,3.25,6.50,2.15))

> Call:
>   arfima(y = c(45.4, 3.25, 6.5, 2.15))

> Coefficients:
>            d
> 4.583013e-05
> sigma[eps] = 18.01252
> a list with components:
>  [1] "log.likelihood"  "n"               "msg"             "d"               "ar"
>  [6] "ma"              "covariance.dpq"  "fnormMin"        "sigma"           "stderror.dpq"
> [11] "correlation.dpq" "h"               "d.tol"           "M"               "hessian.dpq"
> [16] "length.w"        "residuals"       "fitted"          "call"            "x"
> [21] "series"

> Please note that the index of LYGH has changed from 202 to 201 due to some randomness in one of my function.

> PLEASE HELP.

> Output of dput LYGH[[201]]:

> > dput(LYGH[[201]])
> c(45.4, 3.25, 6.5, 2.14999999999998)

> output of session info()

> sessionInfo()
> R version 4.1.2 (2021-11-01)
> Platform: x86_64-w64-mingw32/x64 (64-bit)


> Matrix products: default

> locale:
> [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252
> [3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
> [5] LC_TIME=English_United States.1252

> attached base packages:
> [1] parallel  stats     graphics  grDevices utils     datasets  methods   base

> other attached packages:
> [1] pbmcapply_1.5.1 imputeTS_3.3    forecast_8.17.0

> loaded via a namespace (and not attached):
>  [1] Rcpp_1.0.7        urca_1.3-3        pillar_1.9.0      compiler_4.1.2    tseries_0.10-51
>  [6] tools_4.1.2       xts_0.12.1        nlme_3.1-153      lifecycle_1.0.3   tibble_3.2.1
> [11] gtable_0.3.3      lattice_0.20-45   pkgconfig_2.0.3   rlang_1.1.0       cli_3.6.1
> [16] rstudioapi_0.14   curl_4.3.2        xml2_1.3.3        dplyr_1.1.1       generics_0.1.3
> [21] vctrs_0.6.1       gridtext_0.1.5    ggtext_0.1.2      lmtest_0.9-40     grid_4.1.2
> [26] nnet_7.3-16       tidyselect_1.2.0  glue_1.6.2        R6_2.5.1          fansi_1.0.4
> [31] ggplot2_3.4.2     TTR_0.24.3        magrittr_2.0.3    scales_1.2.1      quantmod_0.4.20
> [36] timeDate_4021.106 colorspace_2.1-0  fracdiff_1.5-1    quadprog_1.5-8    utf8_1.2.3
> [41] stinepack_1.4     munsell_0.5.0     zoo_1.8-10


> PLease Also note:

> arfima(c(45.4, 3.25, 6.5, 2.14999999999998))

> Call:
>   arfima(y = c(45.4, 3.25, 6.5, 2.14999999999998))

> Coefficients:
>            d
> 4.583013e-05
> sigma[eps] = 18.01252
> a list with components:
>  [1] "log.likelihood"  "n"               "msg"             "d"               "ar"
>  [6] "ma"              "covariance.dpq"  "fnormMin"        "sigma"           "stderror.dpq"
> [11] "correlation.dpq" "h"               "d.tol"           "M"               "hessian.dpq"
> [16] "length.w"        "residuals"       "fitted"          "call"            "x"
> [21] "series"


> Many thanks in advance....

> Thanking you,
> Yours sincerely,
> AKSHAY M KULKARNI

Hmm... indeed, "conundrum" may be a euphemism for the
situation..... which clearly points to a bug *somewhere*.
As your dput() shows, the argument *is* a simple vector .. and
even if the default dput() may loose a few bits in
precison... you did show that with (possibly only almost)
identical argument, the error did not happen.

I really have no idea what's going on, ....
Some musing/ideas: the  NA/NaN/Inf  warning
may come from a memory corruption problem somewhere because some
of the involved packages using compiled code or the old version of R/lapack/???
or ??? cause it.

Does the error only happen occasionally?
If you "randomly" do a few calls of either
  arfima(c(45.4, 3.25, 6.5, 2.14999999999998))
or
  arfima(LYGH[[201]])
do you see "random" behavior? [if yes; this confirms typically
memory protection/allocation/... bugs]

fracdiff itself has also been updated (to 1.5-2) but that was really only
a compiler warning, not a bug fix, and I cannot imagine that
that makes the difference.



had problems fixed in the mean time ..
and at least there's a hope the problem disappears.

Lastly (but probably not helping more), you could use
dput() with control="digits"  and even
.Internal(inspect( * ))  magic on your  LYGH[[201]]

When I use simple numeric vectors "like" your LYGH[..], I get

> dput(c(45.4, 3.25, 6.5, 2.15), control="digits")
 c(45.399999999999999, 3.25, 6.5, 2.1499999999999999)

> .Internal(inspect(c(45.4, 3.25, 6.5, 2.15)) + )
@9874728 14 REALSXP g0c3 [] (len=4, tl=0) 45.4,3.25,6.5,2.15
>

Martin


> ________________________________
> From: Martin Maechler <maechler at stat.math.ethz.ch>
> Sent: Thursday, June 1, 2023 1:28 PM
> To: akshay kulkarni <akshay_e4 at hotmail.com>
> Cc: R help Mailing list <r-help at r-project.org>
> Subject: Re: [R] error in arfima...

> >>>>> akshay kulkarni
> >>>>>     on Wed, 31 May 2023 20:55:33 +0000 writes:

>     > dear members,

>     > I am using arfima() from forecast package to model a time
>     > series. The following is the code:

>     >> LYGH[[202]]
>     > [1] 45.40  3.25  6.50  2.15

>     >> arfima(LYGH[[202]])
>     > Error in .fdcov(x, fdf$d, h, nar = nar, nma = nma, hess = hess, fdf.work = fdf$w) :
>     > NA/NaN/Inf in foreign function call (arg 5)

>     > I tried viewing .fdcov() with the following code:

>     > View(environment(fracdiff)$.fdcov)

>     > but I see no stop() with the above mentioned error message.

>     > Can you please help?

> Well, as I am the maintainer of the *fracdiff* package,
> I'm trying.  OTOH, as we will see below, you did not give us enough
> information to really help you...

>     > THanking you,
>     > Yours sincerely,
>     > AKSHAY M KULKARNI

> Your problem is not (yet) reproducible (*)
> I've done the following in an "empty" (i.e. freshly started) R
> session, R 4.3.0:

> ----begin_R_transcript___save_as__arfima-ex.Rout__------------------------------
> >
> > lN <- loadedNamespaces()
> > library(forecast)
> Registered S3 method overwritten by 'quantmod':
>   method            from
>   as.zoo.data.frame zoo
> > options(width=75)
> > setdiff(loadedNamespaces(), lN) # -- see all the  *!^@...!   forecast loads:
>  [1] "gtable"     "dplyr"      "tidyselect" "Rcpp"       "parallel"
>  [6] "scales"     "lattice"    "ggplot2"    "R6"         "generics"
> [11] "curl"       "lmtest"     "tibble"     "munsell"    "nnet"
> [16] "forecast"   "timeDate"   "pillar"     "rlang"      "quantmod"
> [21] "utf8"       "urca"       "quadprog"   "cli"        "magrittr"
> [26] "xts"        "grid"       "nlme"       "lifecycle"  "fracdiff"
> [31] "vctrs"      "glue"       "tseries"    "zoo"        "fansi"
> [36] "colorspace" "TTR"        "pkgconfig"
> > arfima(c(45.40, 3.25, 6.50, 2.15))

> Call:
>   arfima(y = c(45.4, 3.25, 6.5, 2.15))

> Coefficients:
>            d
> 4.583013e-05
> sigma[eps] = 18.01252
> a list with components:
>  [1] "log.likelihood"  "n"               "msg"
>  [4] "d"               "ar"              "ma"
>  [7] "covariance.dpq"  "fnormMin"        "sigma"
> [10] "stderror.dpq"    "correlation.dpq" "h"
> [13] "d.tol"           "M"               "hessian.dpq"
> [16] "length.w"        "residuals"       "fitted"
> [19] "call"            "x"               "series"
> >
> > sessionInfo()
> R version 4.3.0 (2023-04-21)
> Platform: x86_64-pc-linux-gnu (64-bit)
> Running under: Fedora Linux 36 (Thirty Six)

> Matrix products: default
> BLAS:   /usr/local64.sfs/app/R/R-4.3.0-inst/lib/libRblas.so
> LAPACK: /usr/lib64/liblapack.so.3.10.1

> locale:
>  [1] LC_CTYPE=de_CH.UTF-8       LC_NUMERIC=C
>  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=de_CH.UTF-8
>  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=de_CH.UTF-8
>  [7] LC_PAPER=de_CH.UTF-8       LC_NAME=C
>  [9] LC_ADDRESS=C               LC_TELEPHONE=C
> [11] LC_MEASUREMENT=de_CH.UTF-8 LC_IDENTIFICATION=C

> time zone: Europe/Zurich
> tzcode source: system (glibc)

> attached base packages:
> [1] graphics  grDevices datasets  stats     utils     methods   base

> other attached packages:
> [1] forecast_8.21  fortunes_1.5-4 sfsmisc_1.1-15

> loaded via a namespace (and not attached):
>  [1] gtable_0.3.3      dplyr_1.1.2       compiler_4.3.0
>  [4] tidyselect_1.2.0  Rcpp_1.0.10       parallel_4.3.0
>  [7] scales_1.2.1      lattice_0.21-8    ggplot2_3.4.2
> [10] R6_2.5.1          generics_0.1.3    curl_5.0.0
> [13] lmtest_0.9-40     tibble_3.2.1      munsell_0.5.0
> [16] nnet_7.3-19       timeDate_4022.108 pillar_1.9.0
> [19] rlang_1.1.1       quantmod_0.4.22   utf8_1.2.3
> [22] urca_1.3-3        quadprog_1.5-8    cli_3.6.1
> [25] magrittr_2.0.3    xts_0.13.1        grid_4.3.0
> [28] nlme_3.1-162      lifecycle_1.0.3   fracdiff_1.5-2
> [31] vctrs_0.6.2       glue_1.6.2        tseries_0.10-54
> [34] zoo_1.8-12        fansi_1.0.4       colorspace_2.1-0
> [37] TTR_0.24.3        tools_4.3.0       pkgconfig_2.0.3
> >
> ##---end__R_transcript---------------------------------------------------------------


> Note that your error message pointed me to my (old, but still
> fine) package {fracdiff} with its principal function fracdiff()
> around which   arfima()  is a user-friendly and
> generalization wrapper.

> In other words arfima() calls fracdiff::fracdiff() and the error
> happens there --- for you, but not for me, if I try to use the
> same data as you.
> I see that you must have found that too, because you mentioned
>    View(environment(fracdiff)$.fdcov)

> Maybe you need to

>       update.packages()

> {which should re-install R packages you have installed but which
>  have become outdated in the mean time}

> If the error persists, please send us the output of

> 1)
>    dput(LYGH[[202]])

>    so we get your exact data

> 2)
>    sessionInfo()

>    so we get much info about your R "setup"

> .... last but not least:  If you are really calling arfima()
> with a time series of length 4  (which your LYGH[[202]] above
> seems to suggest)
> then you really need to learn a bit about the tools you are
> using: It really does not make any sense to fit a somewhat
> sophisticated time-series model (or *any* time-series model, I'd say)
> to a "series" with 4 values.

> Best regards,
> Martin

> --
> Martin Maechler
> ETH Zurich  and  R Core team

	[[alternative HTML version deleted]]


From @vi@e@gross m@iii@g oii gm@ii@com  Tue Jun  6 02:55:07 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Mon, 5 Jun 2023 20:55:07 -0400
Subject: [R] Adding  a numeric class to a data.frame
In-Reply-To: <001e01d997a0$fd9cbf10$f8d63d30$@sbcglobal.net>
References: <00d301d99739$d9000ed0$8b002c70$.ref@sbcglobal.net>
 <00d301d99739$d9000ed0$8b002c70$@sbcglobal.net>
 <009201d99751$68622d30$39268790$@gmail.com>
 <012601d99754$5ce4dd10$16ae9730$@sbcglobal.net>
 <009401d99759$7b74b570$725e2050$@gmail.com>
 <001e01d997a0$fd9cbf10$f8d63d30$@sbcglobal.net>
Message-ID: <01ca01d99811$89ced5c0$9d6c8140$@gmail.com>

Jeff,

I wish I could give you an answer to a very specific question.

You have lots of numbers in a vector representing whatever "probabilities"
mean something to you. There are currently no names associated with them.
And you want to make some kind of graph using ggplot.

So, to be quite clear, ggplot tends to like a data.frame or one of several
other such tabular constructs when making graphs, or have some data coerced
into such a format. BUT I am aghast at the concept of giving it a data.frame
with one row and thousands of un-named columns. First, the columns will have
semi-numerical names by default and second, they cannot be used by ggplot
unless you specify a name.

What you normally need is not lots of columns but lots of rows. One column
suffices for some purposes and multiple columns are often present for many
purposes. 

But what are you graphing as in probability versus what? Is that item
correlated with each result in some way? 

You eventually need to probably make a data.frame with two or more such
columns with names for the columns. You need to tell ggplot something like 

ggplot(mydata, aes(x=whatever, y=whatever, ...)) + geom_line(or whatever)
...

But as you release info this slowly, I think I will now drop out of this
conversation.

Good luck.

-----Original Message-----
From: Jeff Reichman <reichmanj at sbcglobal.net> 
Sent: Monday, June 5, 2023 7:29 AM
To: avi.e.gross at gmail.com; r-help at r-project.org
Subject: RE: [R] Adding a numeric class to a data.frame

Avi

But I don't have a column header to call. Do I simply use column position 

> pred_probability 
             1              2              3              5              8 
0.001156612672 0.000926702837 0.008162332353 0.001544764162 0.000919503109
..........
> str(pred_probability )
 Named num [1:6964] 0.001157 0.000927 0.008162 0.001545 0.00092 ...
 - attr(*, "names")= chr [1:6964] "1" "2" "3" "5" ...
>

Jeff

-----Original Message-----
From: avi.e.gross at gmail.com <avi.e.gross at gmail.com> 
Sent: Sunday, June 4, 2023 9:58 PM
To: 'Jeff Reichman' <reichmanj at sbcglobal.net>; r-help at r-project.org
Subject: RE: [R] Adding a numeric class to a data.frame

Jeff,

The number of items is not relevant except insofar as your vector of
probabilities is in the same order as the other vector and the same length.

If for example you had a vector of test scores for 10,000 tests and you
calculated the probability in the data of having a 100, then the probability
of a 99 and so on, then you could make another vector of 10,000 giving the
probability of the corresponding entries.

So before calling ggplot, assuming you have two vectors called orig and
prob, you make a data.frame like

Df <- data.frame(orig=orig, prob=prob)

You use that in ggplot.

You can of course add additional columns. Or if your data is in another
format, do things like long to wide conversion and many other things.

If you already have a data.frame with one or more columns including orig,
you can attache the probabilities with something as simple as:

Df$prob = prob

If you are using ggplot, you may as well be using elements of the tidyverse
that provide a different take on how to do some things compared to base R
but that is not something easily discussed here.



-----Original Message-----
From: Jeff Reichman <reichmanj at sbcglobal.net>
Sent: Sunday, June 4, 2023 10:21 PM
To: avi.e.gross at gmail.com; r-help at r-project.org
Subject: RE: [R] Adding a numeric class to a data.frame

Yes - I could have done that but I have over 5,000 calculated probabilities.
So yes a little more detail would have helped. I'm needing to add those
probability back into the original data.frame from which the model was
created as I'm going  to be using ggplot2 so I need the probabilities and
original dataframe to be one.

-----Original Message-----
From: avi.e.gross at gmail.com <avi.e.gross at gmail.com>
Sent: Sunday, June 4, 2023 9:00 PM
To: 'Jeff Reichman' <reichmanj at sbcglobal.net>; r-help at r-project.org
Subject: RE: [R] Adding a numeric class to a data.frame

Jeff R, it would be helpful if your intent was understood.

For example, did you want output as a column of labels c("A", "B", "C") and
another adjacent of c(0.0011566127, 0.0009267028, 0.0081623324) then you
could do:

data.frame(labels=c("A", "B", "C"), data=c(0.0011566127, 0.0009267028,
0.0081623324))
  labels         data
1      A 0.0011566127
2      B 0.0009267028
3      C 0.0081623324

If you wanted your columns labeled with the data in multiple columns, try
this:

> result <- data.frame(t(c(0.0011566127, 0.0009267028, 0.0081623324))) 
> result
           X1           X2          X3
1 0.001156613 0.0009267028 0.008162332
> names(result) <- c("A", "B", "C")
> result
            A            B           C
1 0.001156613 0.0009267028 0.008162332

But these are not solutions to your specified problem unless you explain
properly what you want to do and the exact expected output.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Reichman
Sent: Sunday, June 4, 2023 7:11 PM
To: r-help at r-project.org
Subject: [R] Adding a numeric class to a data.frame

R-Help Community

 

How do I add a numeric class to a data .frame. 

 

For example, I have calculated the following probabilities

 

           1            2            3

0.0011566127 0.0009267028 0.0081623324

 

How would I add them back into my data.frame for example

 

My_df <- data.frame(col_1 = c('A', 'B', 'C')) such that I end up with

 

col_1                   col_2

        A  0.0011566127

 

Though I could use a cbind.

 

Jeff


	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From re|chm@nj @end|ng |rom @bcg|ob@|@net  Tue Jun  6 03:26:57 2023
From: re|chm@nj @end|ng |rom @bcg|ob@|@net (Jeff Reichman)
Date: Mon, 5 Jun 2023 20:26:57 -0500
Subject: [R] Adding  a numeric class to a data.frame
In-Reply-To: <01ca01d99811$89ced5c0$9d6c8140$@gmail.com>
References: <00d301d99739$d9000ed0$8b002c70$.ref@sbcglobal.net>
 <00d301d99739$d9000ed0$8b002c70$@sbcglobal.net>
 <009201d99751$68622d30$39268790$@gmail.com>
 <012601d99754$5ce4dd10$16ae9730$@sbcglobal.net>
 <009401d99759$7b74b570$725e2050$@gmail.com>
 <001e01d997a0$fd9cbf10$f8d63d30$@sbcglobal.net>
 <01ca01d99811$89ced5c0$9d6c8140$@gmail.com>
Message-ID: <010401d99815$fd1e5920$f75b0b60$@sbcglobal.net>

Avi

I'm not sure why but neither the "cbind" nor "with" functions seemed to work
with the numeric object so I ended up converting the object to a numeric
vector

prob <- as.numeric(pred_probability)

then used the cbind function 

df <- cbind(train, prob); which seemed to work????

I do appreciate your time and assistance.

Jeff

-----Original Message-----
From: avi.e.gross at gmail.com <avi.e.gross at gmail.com> 
Sent: Monday, June 5, 2023 7:55 PM
To: 'Jeff Reichman' <reichmanj at sbcglobal.net>; r-help at r-project.org
Subject: RE: [R] Adding a numeric class to a data.frame

Jeff,

I wish I could give you an answer to a very specific question.

You have lots of numbers in a vector representing whatever "probabilities"
mean something to you. There are currently no names associated with them.
And you want to make some kind of graph using ggplot.

So, to be quite clear, ggplot tends to like a data.frame or one of several
other such tabular constructs when making graphs, or have some data coerced
into such a format. BUT I am aghast at the concept of giving it a data.frame
with one row and thousands of un-named columns. First, the columns will have
semi-numerical names by default and second, they cannot be used by ggplot
unless you specify a name.

What you normally need is not lots of columns but lots of rows. One column
suffices for some purposes and multiple columns are often present for many
purposes. 

But what are you graphing as in probability versus what? Is that item
correlated with each result in some way? 

You eventually need to probably make a data.frame with two or more such
columns with names for the columns. You need to tell ggplot something like 

ggplot(mydata, aes(x=whatever, y=whatever, ...)) + geom_line(or whatever)
...

But as you release info this slowly, I think I will now drop out of this
conversation.

Good luck.

-----Original Message-----
From: Jeff Reichman <reichmanj at sbcglobal.net>
Sent: Monday, June 5, 2023 7:29 AM
To: avi.e.gross at gmail.com; r-help at r-project.org
Subject: RE: [R] Adding a numeric class to a data.frame

Avi

But I don't have a column header to call. Do I simply use column position 

> pred_probability
             1              2              3              5              8 
0.001156612672 0.000926702837 0.008162332353 0.001544764162 0.000919503109
..........
> str(pred_probability )
 Named num [1:6964] 0.001157 0.000927 0.008162 0.001545 0.00092 ...
 - attr(*, "names")= chr [1:6964] "1" "2" "3" "5" ...
>

Jeff

-----Original Message-----
From: avi.e.gross at gmail.com <avi.e.gross at gmail.com>
Sent: Sunday, June 4, 2023 9:58 PM
To: 'Jeff Reichman' <reichmanj at sbcglobal.net>; r-help at r-project.org
Subject: RE: [R] Adding a numeric class to a data.frame

Jeff,

The number of items is not relevant except insofar as your vector of
probabilities is in the same order as the other vector and the same length.

If for example you had a vector of test scores for 10,000 tests and you
calculated the probability in the data of having a 100, then the probability
of a 99 and so on, then you could make another vector of 10,000 giving the
probability of the corresponding entries.

So before calling ggplot, assuming you have two vectors called orig and
prob, you make a data.frame like

Df <- data.frame(orig=orig, prob=prob)

You use that in ggplot.

You can of course add additional columns. Or if your data is in another
format, do things like long to wide conversion and many other things.

If you already have a data.frame with one or more columns including orig,
you can attache the probabilities with something as simple as:

Df$prob = prob

If you are using ggplot, you may as well be using elements of the tidyverse
that provide a different take on how to do some things compared to base R
but that is not something easily discussed here.



-----Original Message-----
From: Jeff Reichman <reichmanj at sbcglobal.net>
Sent: Sunday, June 4, 2023 10:21 PM
To: avi.e.gross at gmail.com; r-help at r-project.org
Subject: RE: [R] Adding a numeric class to a data.frame

Yes - I could have done that but I have over 5,000 calculated probabilities.
So yes a little more detail would have helped. I'm needing to add those
probability back into the original data.frame from which the model was
created as I'm going  to be using ggplot2 so I need the probabilities and
original dataframe to be one.

-----Original Message-----
From: avi.e.gross at gmail.com <avi.e.gross at gmail.com>
Sent: Sunday, June 4, 2023 9:00 PM
To: 'Jeff Reichman' <reichmanj at sbcglobal.net>; r-help at r-project.org
Subject: RE: [R] Adding a numeric class to a data.frame

Jeff R, it would be helpful if your intent was understood.

For example, did you want output as a column of labels c("A", "B", "C") and
another adjacent of c(0.0011566127, 0.0009267028, 0.0081623324) then you
could do:

data.frame(labels=c("A", "B", "C"), data=c(0.0011566127, 0.0009267028,
0.0081623324))
  labels         data
1      A 0.0011566127
2      B 0.0009267028
3      C 0.0081623324

If you wanted your columns labeled with the data in multiple columns, try
this:

> result <- data.frame(t(c(0.0011566127, 0.0009267028, 0.0081623324))) 
> result
           X1           X2          X3
1 0.001156613 0.0009267028 0.008162332
> names(result) <- c("A", "B", "C")
> result
            A            B           C
1 0.001156613 0.0009267028 0.008162332

But these are not solutions to your specified problem unless you explain
properly what you want to do and the exact expected output.



-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Reichman
Sent: Sunday, June 4, 2023 7:11 PM
To: r-help at r-project.org
Subject: [R] Adding a numeric class to a data.frame

R-Help Community

 

How do I add a numeric class to a data .frame. 

 

For example, I have calculated the following probabilities

 

           1            2            3

0.0011566127 0.0009267028 0.0081623324

 

How would I add them back into my data.frame for example

 

My_df <- data.frame(col_1 = c('A', 'B', 'C')) such that I end up with

 

col_1                   col_2

        A  0.0011566127

 

Though I could use a cbind.

 

Jeff


	[[alternative HTML version deleted]]

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From tg@77m @end|ng |rom y@hoo@com  Tue Jun  6 05:34:03 2023
From: tg@77m @end|ng |rom y@hoo@com (Thomas Subia)
Date: Tue, 6 Jun 2023 03:34:03 +0000 (UTC)
Subject: [R] latticeExtra
References: <1791465946.209568.1686022443270.ref@mail.yahoo.com>
Message-ID: <1791465946.209568.1686022443270@mail.yahoo.com>

Colleagues,

I am trying to create a 3D barplot using the following script

d <- read.table(text=' x?? y???? z
t1?? 5?? high
t1?? 2?? low
t1?? 4?? med
t2?? 8?? high
t2?? 1?? low
t2?? 3?? med
t3? 50?? high
t3? 12?? med
t3? 35?? low', header=TRUE)

library(latticeExtra)

cloud(y~x+z, d, panel.3d.cloud=panel.3dbars, col.facet='grey', 
????? xbase=0.4, ybase=0.4, scales=list(arrows=FALSE, col=1), 
????? par.settings = list(axis.line = list(col = "transparent")))

Executing this results in this error message

Error using packet 1
non-numeric argument to binary operator

I suspect that this error stems from read.table.

This graph is easily done with Excel but I'd rather use R

Any help would be appreciated.

Thanks

Thomas Subia

	[[alternative HTML version deleted]]


From rmh @end|ng |rom temp|e@edu  Tue Jun  6 05:45:34 2023
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Tue, 6 Jun 2023 03:45:34 +0000
Subject: [R] [External]  latticeExtra
In-Reply-To: <1791465946.209568.1686022443270@mail.yahoo.com>
References: <1791465946.209568.1686022443270.ref@mail.yahoo.com>
 <1791465946.209568.1686022443270@mail.yahoo.com>
Message-ID: <60EE2E67-74E8-4777-AD6A-EFE88AE5D9E6@temple.edu>

This works.
> d$zz <- factor(d$z, levels=c("low","med","high"))
> d$xx <- as.factor(d$x)
> cloud(y~xx+zz, d, panel.3d.cloud=panel.3dbars, col.facet='grey', 
+       xbase=0.4, ybase=0.4, scales=list(arrows=FALSE, col=1), 
+       par.settings = list(axis.line = list(col = "transparent")))
> 

the default levels for factor are alphabetic.  That is ok for d$x.


From tg@77m @end|ng |rom y@hoo@com  Tue Jun  6 06:19:55 2023
From: tg@77m @end|ng |rom y@hoo@com (Thomas Subia)
Date: Tue, 6 Jun 2023 04:19:55 +0000 (UTC)
Subject: [R] [External]  latticeExtra
In-Reply-To: <60EE2E67-74E8-4777-AD6A-EFE88AE5D9E6@temple.edu>
References: <1791465946.209568.1686022443270.ref@mail.yahoo.com>
 <1791465946.209568.1686022443270@mail.yahoo.com>
 <60EE2E67-74E8-4777-AD6A-EFE88AE5D9E6@temple.edu>
Message-ID: <23449470.221905.1686025195890@mail.yahoo.com>

 Colleagues,
Thanks for the help!
Root cause of the problem was not to define z and x as factors!Now I know better.
All the best,
Thomas Subia


    On Monday, June 5, 2023 at 08:45:39 PM PDT, Richard M. Heiberger <rmh at temple.edu> wrote:  
 
 This works.
> d$zz <- factor(d$z, levels=c("low","med","high"))
> d$xx <- as.factor(d$x)
> cloud(y~xx+zz, d, panel.3d.cloud=panel.3dbars, col.facet='grey', 
+? ? ? xbase=0.4, ybase=0.4, scales=list(arrows=FALSE, col=1), 
+? ? ? par.settings = list(axis.line = list(col = "transparent")))
> 

the default levels for factor are alphabetic.? That is ok for d$x.

  
	[[alternative HTML version deleted]]


From kev|n @end|ng |rom zembower@org  Tue Jun  6 20:37:45 2023
From: kev|n @end|ng |rom zembower@org (=?UTF-8?Q?Kevin_Zembower?=)
Date: Tue, 6 Jun 2023 18:37:45 +0000
Subject: [R] Recommended ways to draw US Census map on Open Street Map base
 map?
References: <cb9f702b-6020-88f7-c387-97436d5f6f83@zembower.org>
Message-ID: <0100018892002da7-a934c35c-a4cd-4b10-add7-79eedc3beeab-000000@email.amazonses.com>

Hello, all,

I asked a version of this question on the R-sig-geo list, but didn't get 
any response. I'm asking here in the hopes of a wider audience.

I'm trying to draw US Census map data, fetched with tigris, on top of a 
base map fetched by the package OpenStreetMap. I'm hoping for the most 
straight-forward solution. I made significant progress with leaflet(), 
but didn't need the interactivity of the map. I just need a 2D, static 
map that I can print and include in a document.

Here's some of what I've tried so far:
==========================================
library(tidyverse)
library(tigris)
options(tigris_use_cache = TRUE)
library(OpenStreetMap)
library(ggplot2)

## Get an Open Street Map:
rw_map <- openmap(nw, se,
                   type = "osm",
                   mergeTiles = TRUE) %>%
     openproj(projection = "+proj=longlat +ellps=WGS84 +datum=WGS84 
+no_defs")

## Get an example census map:
rw_tract <- tracts(state = "MD",
                     county = "Baltimore city",
                     year = "2020") %>%
     filter(NAME == "2711.01")

## This works:
autoplot.OpenStreetMap(rw_map)

## So does this:
plot(rw_tract$geometry)

## These don't:
autoplot.OpenStreetMap(rw_map) +
     geom_sf(rw_tract$geometry)

ggplot(map_data(rw_map), aes(long, lat))


ggplot(aes(x="long", y="lat")) +
     geom_sf(rw_map$geometry)
=====================================================

I think my problem in part is failing to fully understand the formats of 
the rw_map and rw_tract containers. rw_tract says it's a simple feature 
collection, but rw_map just gives me lists of the data.

Can anyone help nudge me along in getting my rw_tract to be drawn on my 
rw_map? Any advice or guidance on putting together map data from 
different sources?

And an over-arching question: Is moving in this direction, with ggplot2, 
the way you would recommend accomplishing this task? Is there a simpler, 
more straight-forward way of doing this?

Thanks in advance for your help and efforts.

-Kevin


From bgunter@4567 @end|ng |rom gm@||@com  Tue Jun  6 21:17:58 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Tue, 6 Jun 2023 12:17:58 -0700
Subject: [R] 
 Recommended ways to draw US Census map on Open Street Map base map?
In-Reply-To: <0100018892002da7-a934c35c-a4cd-4b10-add7-79eedc3beeab-000000@email.amazonses.com>
References: <cb9f702b-6020-88f7-c387-97436d5f6f83@zembower.org>
 <0100018892002da7-a934c35c-a4cd-4b10-add7-79eedc3beeab-000000@email.amazonses.com>
Message-ID: <CAGxFJbQu--sFaPMYbU7a9zb7Cm7NmqePM9FeGKW3dMyfdyFAHA@mail.gmail.com>

As you are using Rstudio stuff(ggplot, tidyverse,etc.), you might try the
RStudio support site here <https://community.rstudio.com/> (note that they
have rebranded under the banner "posit.co").

However, I would have also thought the R-sig-geo list was the best place to
look for such help.

Cheers,
Bert


On Tue, Jun 6, 2023 at 11:38?AM Kevin Zembower via R-help <
r-help at r-project.org> wrote:

> Hello, all,
>
> I asked a version of this question on the R-sig-geo list, but didn't get
> any response. I'm asking here in the hopes of a wider audience.
>
> I'm trying to draw US Census map data, fetched with tigris, on top of a
> base map fetched by the package OpenStreetMap. I'm hoping for the most
> straight-forward solution. I made significant progress with leaflet(),
> but didn't need the interactivity of the map. I just need a 2D, static
> map that I can print and include in a document.
>
> Here's some of what I've tried so far:
> ==========================================
> library(tidyverse)
> library(tigris)
> options(tigris_use_cache = TRUE)
> library(OpenStreetMap)
> library(ggplot2)
>
> ## Get an Open Street Map:
> rw_map <- openmap(nw, se,
>                    type = "osm",
>                    mergeTiles = TRUE) %>%
>      openproj(projection = "+proj=longlat +ellps=WGS84 +datum=WGS84
> +no_defs")
>
> ## Get an example census map:
> rw_tract <- tracts(state = "MD",
>                      county = "Baltimore city",
>                      year = "2020") %>%
>      filter(NAME == "2711.01")
>
> ## This works:
> autoplot.OpenStreetMap(rw_map)
>
> ## So does this:
> plot(rw_tract$geometry)
>
> ## These don't:
> autoplot.OpenStreetMap(rw_map) +
>      geom_sf(rw_tract$geometry)
>
> ggplot(map_data(rw_map), aes(long, lat))
>
>
> ggplot(aes(x="long", y="lat")) +
>      geom_sf(rw_map$geometry)
> =====================================================
>
> I think my problem in part is failing to fully understand the formats of
> the rw_map and rw_tract containers. rw_tract says it's a simple feature
> collection, but rw_map just gives me lists of the data.
>
> Can anyone help nudge me along in getting my rw_tract to be drawn on my
> rw_map? Any advice or guidance on putting together map data from
> different sources?
>
> And an over-arching question: Is moving in this direction, with ggplot2,
> the way you would recommend accomplishing this task? Is there a simpler,
> more straight-forward way of doing this?
>
> Thanks in advance for your help and efforts.
>
> -Kevin
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From drj|m|emon @end|ng |rom gm@||@com  Wed Jun  7 06:27:23 2023
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 7 Jun 2023 14:27:23 +1000
Subject: [R] Plotrix pyramid plot: request for a little help
In-Reply-To: <KL1PR0601MB55656CE02A751BC15A13A6FBE552A@KL1PR0601MB5565.apcprd06.prod.outlook.com>
References: <KL1PR0601MB55656CE02A751BC15A13A6FBE552A@KL1PR0601MB5565.apcprd06.prod.outlook.com>
Message-ID: <CA+8X3fUi49iwYEmypQi9p_cbj5CF_NJBqpwV7aUg=3FhvSpUig@mail.gmail.com>

Hi Mohsin,
As I don't have your data, I had to fake it, so there are probably
some mistakes in the example below:

# my suggestion
x<-c(143,108,95,72,70,85,125,123,64,67,144,55,60,200,70,100,65,140,49,45,77,58,66,50,77)
y<-c(41,32,28,13,15,29,72,71,17,180,9,13,145,29,56,22,97,13,9,42,20,7,30,10,41)
labels<-c("sector","increase","period","foreign","compared","exchange","rate",
 "expected","impact","mpc","oil","sbp","growth","credit","economic","private",
 "year","government","improvement","months","average","cpi","real","net",
 "developments")
top25_df<-data.frame(x=x,y=y,labels=labels)
pyramid.plot(top25_df$x,top25_df$y,
 labels=top25_df$labels,
 main="Words Common in MPS statements",
 gap=40,
 unit="Count",
 top.labels=c("2016-20","Words","2021-23"),
 laxlab=seq(0,200,by=25),raxlab=seq(0,200,by=25))

To answer your question, I used the "laxlab" and "raxlab" arguments. I
also extended them to 0-200 to cover the range of the largest counts.
You can use 0-150 for both, but it is not a good idea to req I added
the unit="Count", which you can delete if you don't want it. I think
it's a good idea to let the viewer know what the units are. Apart from

On Tue, Jun 6, 2023 at 3:39?PM Mohsin Waheed <mohsin.waheed at hotmail.com> wrote:
>
> Hi,
>
>
>
> I am working on a research study wherein I have employed a variety of textual analysis methods including plotrix pyramid plot. However, with the pyramid plot, I am unable to set the x-axis limits; for example, how can I manually define the frequency range as 0, 50, 100, 150?
>
>
>
> Would really appreciate your reply. Plot and codes files are attached for your perusal.
>
>
>
> Regards,
>
>
>
> Mohsin
>
>
>
>
>
> Sent from Mail for Windows
>
>


From drj|m|emon @end|ng |rom gm@||@com  Wed Jun  7 06:31:38 2023
From: drj|m|emon @end|ng |rom gm@||@com (Jim Lemon)
Date: Wed, 7 Jun 2023 14:31:38 +1000
Subject: [R] Plotrix pyramid plot: request for a little help
In-Reply-To: <CA+8X3fUi49iwYEmypQi9p_cbj5CF_NJBqpwV7aUg=3FhvSpUig@mail.gmail.com>
References: <KL1PR0601MB55656CE02A751BC15A13A6FBE552A@KL1PR0601MB5565.apcprd06.prod.outlook.com>
 <CA+8X3fUi49iwYEmypQi9p_cbj5CF_NJBqpwV7aUg=3FhvSpUig@mail.gmail.com>
Message-ID: <CA+8X3fU6pJcSgOeSmTkMJ-6akBN6CfX0zzDVpd5BQ4FZY0k2Tg@mail.gmail.com>

Hi Mohsin,
I must  have hit the wrong key and sent the last email. The last
paragraph should read:

To answer your question, I used the "laxlab" and "raxlab" arguments. I
also extended them to 0-200 to cover the range of the largest counts.
You can use 0-150 for both, but it is not a good idea to request
different labels, as the plot won't be correct. I added
the unit="Count", which you can delete if you don't want it. I think
it's a good idea to let the viewer know what the units are.

I have also attached an image which didn't get into the last email.

Jim

-------------- next part --------------
A non-text attachment was scrubbed...
Name: ms_07_06.png
Type: image/png
Size: 34420 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20230607/59bb7bf4/attachment.png>

From @jord@ng@rz@2009 @end|ng |rom my@||t@edu  Wed Jun  7 23:11:50 2023
From: @jord@ng@rz@2009 @end|ng |rom my@||t@edu (=?UTF-8?Q?Ad=C3=A1n_Guillermo_Jordan=2DGarza?=)
Date: Wed, 7 Jun 2023 15:11:50 -0600
Subject: [R] side scan data
In-Reply-To: <mailman.369503.1.1685959201.49974.r-help@r-project.org>
References: <mailman.369503.1.1685959201.49974.r-help@r-project.org>
Message-ID: <CAAHMRucggCO0mTykmG0Za+ZP6NhBa8nw_9R72XF6FAHi6KSMVA@mail.gmail.com>

>
> Dear R users, is there a package that will allow us to read and visualize
> sonar data from .xtf files?
>
Thank you,

<http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
Libre
de virus.www.avg.com
<http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail>
<#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>

	[[alternative HTML version deleted]]


From bgunter@4567 @end|ng |rom gm@||@com  Wed Jun  7 23:37:41 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Wed, 7 Jun 2023 14:37:41 -0700
Subject: [R] side scan data
In-Reply-To: <CAAHMRucggCO0mTykmG0Za+ZP6NhBa8nw_9R72XF6FAHi6KSMVA@mail.gmail.com>
References: <mailman.369503.1.1685959201.49974.r-help@r-project.org>
 <CAAHMRucggCO0mTykmG0Za+ZP6NhBa8nw_9R72XF6FAHi6KSMVA@mail.gmail.com>
Message-ID: <CAGxFJbS9nOuQ=5cDdEkZtkx=4Mm4aFmfF6mAabKYZ1fL7zTAnQ@mail.gmail.com>

I found none, e.g. searching here <https://www.rdocumentation.org/> . There
is a python module, however, that you might be able to use instead:
https://pypi.org/project/pyxtf/

Cheers,
Bert

On Wed, Jun 7, 2023 at 2:12?PM Ad?n Guillermo Jordan-Garza <
ajordangarza2009 at my.fit.edu> wrote:

> >
> > Dear R users, is there a package that will allow us to read and visualize
> > sonar data from .xtf files?
> >
> Thank you,
>
> <
> http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail
> >
> Libre
> de virus.www.avg.com
> <
> http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail
> >
> <#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From @@h|mk@poor @end|ng |rom gm@||@com  Thu Jun  8 07:41:08 2023
From: @@h|mk@poor @end|ng |rom gm@||@com (Ashim Kapoor)
Date: Thu, 8 Jun 2023 11:11:08 +0530
Subject: [R] Cryptic error from stargazer
Message-ID: <CAC8=1eo2Wrn7jiKFR_uUk6xwEut5HLWLeXGpERRkjXv3igzKcw@mail.gmail.com>

Dear All,

Here is my reproducible example:

> library(stargazer)

Please cite as:

 Hlavac, Marek (2018). stargazer: Well-Formatted Regression and
Summary Statistics Tables.
 R package version 5.2.2. https://CRAN.R-project.org/package=stargazer

> x1=1:1000 ; y = 2 * x1+ rnorm(1000)
> stargazer(lm(y~x1))
Error in (.format.s.statistics.list != "p25") &&
(.format.s.statistics.list !=  :
  'length = 7' in coercion to 'logical(1)'

The error returned is cryptic and I am not able to google and find the solution.

Here is my sessionInfo:

> sessionInfo()
R version 4.3.0 (2023-04-21)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Debian GNU/Linux 10 (buster)

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.3.5.so;  LAPACK version 3.8.0

locale:
 [1] LC_CTYPE=en_IN       LC_NUMERIC=C         LC_TIME=en_IN
 [4] LC_COLLATE=en_IN     LC_MONETARY=en_IN    LC_MESSAGES=en_IN
 [7] LC_PAPER=en_IN       LC_NAME=C            LC_ADDRESS=C
[10] LC_TELEPHONE=C       LC_MEASUREMENT=en_IN LC_IDENTIFICATION=C

time zone: Asia/Kolkata
tzcode source: system (glibc)

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] stargazer_5.2.2

loaded via a namespace (and not attached):
[1] compiler_4.3.0

Any help will be appreciated.

Thank you,
Ashim


From @@h|mk@poor @end|ng |rom gm@||@com  Thu Jun  8 07:51:40 2023
From: @@h|mk@poor @end|ng |rom gm@||@com (Ashim Kapoor)
Date: Thu, 8 Jun 2023 11:21:40 +0530
Subject: [R] Cryptic error from stargazer
In-Reply-To: <CAC8=1eo2Wrn7jiKFR_uUk6xwEut5HLWLeXGpERRkjXv3igzKcw@mail.gmail.com>
References: <CAC8=1eo2Wrn7jiKFR_uUk6xwEut5HLWLeXGpERRkjXv3igzKcw@mail.gmail.com>
Message-ID: <CAC8=1eqQor2QVau=dqtY5-AOWNeq1DEVCm4jAz3m4JpkryJdsQ@mail.gmail.com>

Dear All,

I had done an automatic upgrade of my Debian 10  system which had also
upgraded R.

I reinstalled the stargazer package and the error went away.

Query : Do I need to reinstall all packages with each upgrade of R ?

Best,
Ashim

On Thu, Jun 8, 2023 at 11:11?AM Ashim Kapoor <ashimkapoor at gmail.com> wrote:
>
> Dear All,
>
> Here is my reproducible example:
>
> > library(stargazer)
>
> Please cite as:
>
>  Hlavac, Marek (2018). stargazer: Well-Formatted Regression and
> Summary Statistics Tables.
>  R package version 5.2.2. https://CRAN.R-project.org/package=stargazer
>
> > x1=1:1000 ; y = 2 * x1+ rnorm(1000)
> > stargazer(lm(y~x1))
> Error in (.format.s.statistics.list != "p25") &&
> (.format.s.statistics.list !=  :
>   'length = 7' in coercion to 'logical(1)'
>
> The error returned is cryptic and I am not able to google and find the solution.
>
> Here is my sessionInfo:
>
> > sessionInfo()
> R version 4.3.0 (2023-04-21)
> Platform: x86_64-pc-linux-gnu (64-bit)
> Running under: Debian GNU/Linux 10 (buster)
>
> Matrix products: default
> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.3.5.so;  LAPACK version 3.8.0
>
> locale:
>  [1] LC_CTYPE=en_IN       LC_NUMERIC=C         LC_TIME=en_IN
>  [4] LC_COLLATE=en_IN     LC_MONETARY=en_IN    LC_MESSAGES=en_IN
>  [7] LC_PAPER=en_IN       LC_NAME=C            LC_ADDRESS=C
> [10] LC_TELEPHONE=C       LC_MEASUREMENT=en_IN LC_IDENTIFICATION=C
>
> time zone: Asia/Kolkata
> tzcode source: system (glibc)
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] stargazer_5.2.2
>
> loaded via a namespace (and not attached):
> [1] compiler_4.3.0
>
> Any help will be appreciated.
>
> Thank you,
> Ashim


From e@ @end|ng |rom enr|co@chum@nn@net  Thu Jun  8 09:43:52 2023
From: e@ @end|ng |rom enr|co@chum@nn@net (Enrico Schumann)
Date: Thu, 08 Jun 2023 09:43:52 +0200
Subject: [R] Cryptic error from stargazer
In-Reply-To: <CAC8=1eqQor2QVau=dqtY5-AOWNeq1DEVCm4jAz3m4JpkryJdsQ@mail.gmail.com>
 (Ashim Kapoor's message of "Thu, 8 Jun 2023 11:21:40 +0530")
References: <CAC8=1eo2Wrn7jiKFR_uUk6xwEut5HLWLeXGpERRkjXv3igzKcw@mail.gmail.com>
 <CAC8=1eqQor2QVau=dqtY5-AOWNeq1DEVCm4jAz3m4JpkryJdsQ@mail.gmail.com>
Message-ID: <87legueb2v.fsf@enricoschumann.net>

On Thu, 08 Jun 2023, Ashim Kapoor writes:

> Dear All,
>
> I had done an automatic upgrade of my Debian 10  system which had also
> upgraded R.
>
> I reinstalled the stargazer package and the error went away.
>
> Query : Do I need to reinstall all packages with each upgrade of R ?
>
> Best,
> Ashim

Your session info says "stargazer 5.2.2".  What version do
you have now?  CRAN has 5.2.3. It seems likely to me that

  i) with R 4.3-0, certain warnings in the package have
     become errors (the NEWS file for R 4.3-0,
     https://cloud.r-project.org/doc/manuals/r-release/NEWS.html ,
     has a prominent first item about using && and errors.)

and

 ii) the package maintainer fixed those warnings/errors in 5.2.3.

kind regards
    Enrico


> On Thu, Jun 8, 2023 at 11:11?AM Ashim Kapoor <ashimkapoor at gmail.com> wrote:
>>
>> Dear All,
>>
>> Here is my reproducible example:
>>
>> > library(stargazer)
>>
>> Please cite as:
>>
>>  Hlavac, Marek (2018). stargazer: Well-Formatted Regression and
>> Summary Statistics Tables.
>>  R package version 5.2.2. https://CRAN.R-project.org/package=stargazer
>>
>> > x1=1:1000 ; y = 2 * x1+ rnorm(1000)
>> > stargazer(lm(y~x1))
>> Error in (.format.s.statistics.list != "p25") &&
>> (.format.s.statistics.list !=  :
>>   'length = 7' in coercion to 'logical(1)'
>>
>> The error returned is cryptic and I am not able to google and find the solution.
>>
>> Here is my sessionInfo:
>>
>> > sessionInfo()
>> R version 4.3.0 (2023-04-21)
>> Platform: x86_64-pc-linux-gnu (64-bit)
>> Running under: Debian GNU/Linux 10 (buster)
>>
>> Matrix products: default
>> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
>> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.3.5.so;  LAPACK version 3.8.0
>>
>> locale:
>>  [1] LC_CTYPE=en_IN       LC_NUMERIC=C         LC_TIME=en_IN
>>  [4] LC_COLLATE=en_IN     LC_MONETARY=en_IN    LC_MESSAGES=en_IN
>>  [7] LC_PAPER=en_IN       LC_NAME=C            LC_ADDRESS=C
>> [10] LC_TELEPHONE=C       LC_MEASUREMENT=en_IN LC_IDENTIFICATION=C
>>
>> time zone: Asia/Kolkata
>> tzcode source: system (glibc)
>>
>> attached base packages:
>> [1] stats     graphics  grDevices utils     datasets  methods   base
>>
>> other attached packages:
>> [1] stargazer_5.2.2
>>
>> loaded via a namespace (and not attached):
>> [1] compiler_4.3.0
>>
>> Any help will be appreciated.
>>
>> Thank you,
>> Ashim
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Enrico Schumann
Lucerne, Switzerland
http://enricoschumann.net


From @@h|mk@poor @end|ng |rom gm@||@com  Thu Jun  8 10:12:34 2023
From: @@h|mk@poor @end|ng |rom gm@||@com (Ashim Kapoor)
Date: Thu, 8 Jun 2023 13:42:34 +0530
Subject: [R] Cryptic error from stargazer
In-Reply-To: <87legueb2v.fsf@enricoschumann.net>
References: <CAC8=1eo2Wrn7jiKFR_uUk6xwEut5HLWLeXGpERRkjXv3igzKcw@mail.gmail.com>
 <CAC8=1eqQor2QVau=dqtY5-AOWNeq1DEVCm4jAz3m4JpkryJdsQ@mail.gmail.com>
 <87legueb2v.fsf@enricoschumann.net>
Message-ID: <CAC8=1eqSLDeZ1h2+JWyYyL7SJYYak8eanDNQ8=dNuFk537J9ng@mail.gmail.com>

Dear Enrico,

--- snip ------------------------------
> library(stargazer)

Please cite as:

 Hlavac, Marek (2022). stargazer: Well-Formatted Regression and
Summary Statistics Tables.
 R package version 5.2.3. https://CRAN.R-project.org/package=stargazer

>
--- snip--------------------------

Yes I do think I now have 5.2.3

Many thanks,
Ashim


On Thu, Jun 8, 2023 at 1:13?PM Enrico Schumann <es at enricoschumann.net> wrote:
>
> On Thu, 08 Jun 2023, Ashim Kapoor writes:
>
> > Dear All,
> >
> > I had done an automatic upgrade of my Debian 10  system which had also
> > upgraded R.
> >
> > I reinstalled the stargazer package and the error went away.
> >
> > Query : Do I need to reinstall all packages with each upgrade of R ?
> >
> > Best,
> > Ashim
>
> Your session info says "stargazer 5.2.2".  What version do
> you have now?  CRAN has 5.2.3. It seems likely to me that
>
>   i) with R 4.3-0, certain warnings in the package have
>      become errors (the NEWS file for R 4.3-0,
>      https://cloud.r-project.org/doc/manuals/r-release/NEWS.html ,
>      has a prominent first item about using && and errors.)
>
> and
>
>  ii) the package maintainer fixed those warnings/errors in 5.2.3.
>
> kind regards
>     Enrico
>
>
> > On Thu, Jun 8, 2023 at 11:11?AM Ashim Kapoor <ashimkapoor at gmail.com> wrote:
> >>
> >> Dear All,
> >>
> >> Here is my reproducible example:
> >>
> >> > library(stargazer)
> >>
> >> Please cite as:
> >>
> >>  Hlavac, Marek (2018). stargazer: Well-Formatted Regression and
> >> Summary Statistics Tables.
> >>  R package version 5.2.2. https://CRAN.R-project.org/package=stargazer
> >>
> >> > x1=1:1000 ; y = 2 * x1+ rnorm(1000)
> >> > stargazer(lm(y~x1))
> >> Error in (.format.s.statistics.list != "p25") &&
> >> (.format.s.statistics.list !=  :
> >>   'length = 7' in coercion to 'logical(1)'
> >>
> >> The error returned is cryptic and I am not able to google and find the solution.
> >>
> >> Here is my sessionInfo:
> >>
> >> > sessionInfo()
> >> R version 4.3.0 (2023-04-21)
> >> Platform: x86_64-pc-linux-gnu (64-bit)
> >> Running under: Debian GNU/Linux 10 (buster)
> >>
> >> Matrix products: default
> >> BLAS:   /usr/lib/x86_64-linux-gnu/openblas/libblas.so.3
> >> LAPACK: /usr/lib/x86_64-linux-gnu/libopenblasp-r0.3.5.so;  LAPACK version 3.8.0
> >>
> >> locale:
> >>  [1] LC_CTYPE=en_IN       LC_NUMERIC=C         LC_TIME=en_IN
> >>  [4] LC_COLLATE=en_IN     LC_MONETARY=en_IN    LC_MESSAGES=en_IN
> >>  [7] LC_PAPER=en_IN       LC_NAME=C            LC_ADDRESS=C
> >> [10] LC_TELEPHONE=C       LC_MEASUREMENT=en_IN LC_IDENTIFICATION=C
> >>
> >> time zone: Asia/Kolkata
> >> tzcode source: system (glibc)
> >>
> >> attached base packages:
> >> [1] stats     graphics  grDevices utils     datasets  methods   base
> >>
> >> other attached packages:
> >> [1] stargazer_5.2.2
> >>
> >> loaded via a namespace (and not attached):
> >> [1] compiler_4.3.0
> >>
> >> Any help will be appreciated.
> >>
> >> Thank you,
> >> Ashim
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
>
> --
> Enrico Schumann
> Lucerne, Switzerland
> http://enricoschumann.net


From ||@her @end|ng |rom p|e@@th@n@com  Thu Jun  8 04:14:58 2023
From: ||@her @end|ng |rom p|e@@th@n@com (Dennis Fisher)
Date: Wed, 7 Jun 2023 19:14:58 -0700
Subject: [R] need help with plotmath and/or plotting unicode characters
Message-ID: <80B29117-3F79-4B55-9A13-B6EF1BFFFA52@plessthan.com>

R 4.2.3
OS X

Colleagues

This should be easy -- but not for me.

I want to plot text similar to this:
	N ? XX: YY

where XX can be either 1 or 50 and YY is an integer

I envision that there would be two solutions:

UNICODE: If I can generate "?" via unicode, the problem is solved:
	mtext(side=3, paste0("N ", UNICODE, " ", XX, ": ", YY))

PLOTMATH:
	mtext(side=3, bquote(N <= .(XX) ~":" ~ .(YY)))
This comes close:
	N ? 2 : 13
but I want to remove the space between the 2 and ":"

Dennis



Dennis Fisher MD
P < (The "P Less Than" Company)
Phone / Fax: 1-866-PLessThan (1-866-753-7784)
www.PLessThan.com


From kry|ov@r00t @end|ng |rom gm@||@com  Thu Jun  8 11:04:45 2023
From: kry|ov@r00t @end|ng |rom gm@||@com (Ivan Krylov)
Date: Thu, 8 Jun 2023 12:04:45 +0300
Subject: [R] need help with plotmath and/or plotting unicode characters
In-Reply-To: <80B29117-3F79-4B55-9A13-B6EF1BFFFA52@plessthan.com>
References: <80B29117-3F79-4B55-9A13-B6EF1BFFFA52@plessthan.com>
Message-ID: <20230608120445.348c3204@Tarkus>

On Wed, 7 Jun 2023 19:14:58 -0700
Dennis Fisher <fisher at plessthan.com> wrote:

> UNICODE: If I can generate "?" via unicode, the problem is solved:
> 	mtext(side=3, paste0("N ", UNICODE, " ", XX, ": ", YY))

It should be possible to just copy & paste "?" in the R source code
nowadays. If for some reason the script has to stay ASCII-encoded, use
'\u2265'.

> PLOTMATH:
> 	mtext(side=3, bquote(N <= .(XX) ~":" ~ .(YY)))
> This comes close:
> 	N ? 2 : 13
> but I want to remove the space between the 2 and ":"

Use paste(.(XX), ":") or even just .(XX) * ":" to output them close
together.

-- 
Best regards,
Ivan


From rmh @end|ng |rom temp|e@edu  Thu Jun  8 19:39:32 2023
From: rmh @end|ng |rom temp|e@edu (Richard M. Heiberger)
Date: Thu, 8 Jun 2023 17:39:32 +0000
Subject: [R] [External] need help with plotmath and/or plotting unicode
 characters
In-Reply-To: <80B29117-3F79-4B55-9A13-B6EF1BFFFA52@plessthan.com>
References: <80B29117-3F79-4B55-9A13-B6EF1BFFFA52@plessthan.com>
Message-ID: <02838857-8037-408E-808E-832C55DDA517@temple.edu>

Use * instead of ~

XX <- 5
YY <- 10
plot(1:10)
mtext(side=3, bquote(N <= .(XX) ~":" ~ .(YY)))
mtext(side=1, bquote(N <= .(XX) *":" * .(YY)))


> On Jun 7, 2023, at 22:14, Dennis Fisher <fisher at plessthan.com> wrote:
>
> R 4.2.3
> OS X
>
> Colleagues
>
> This should be easy -- but not for me.
>
> I want to plot text similar to this:
> N ? XX: YY
>
> where XX can be either 1 or 50 and YY is an integer
>
> I envision that there would be two solutions:
>
> UNICODE: If I can generate "?" via unicode, the problem is solved:
> mtext(side=3, paste0("N ", UNICODE, " ", XX, ": ", YY))
>
> PLOTMATH:
> mtext(side=3, bquote(N <= .(XX) ~":" ~ .(YY)))
> This comes close:
> N ? 2 : 13
> but I want to remove the space between the 2 and ":"
>
> Dennis
>
>
>
> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> http://www.plessthan.com/
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


