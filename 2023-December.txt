From rb@er @end|ng |rom @t@u@edu  Fri Dec  1 01:04:39 2023
From: rb@er @end|ng |rom @t@u@edu (Robert Baer)
Date: Thu, 30 Nov 2023 18:04:39 -0600
Subject: [R] back tick names with predict function
In-Reply-To: <ca3d2bde-4426-4a41-9d9f-93e60fc66a55@sapo.pt>
References: <495ef0b7-b017-4aa2-afb0-5c2b6ab4e647@atsu.edu>
 <b25f20f0-c196-4897-8ea3-2a3e5f1a48ff@sapo.pt>
 <ca3d2bde-4426-4a41-9d9f-93e60fc66a55@sapo.pt>
Message-ID: <84461035-4232-4112-82cf-bba5e65d03eb@atsu.edu>

Thank you Rui.? I didn't know about the check.names = FALSE argument.? 
Another good reminder to always read help, but I'm not sure I understood 
what help to read in this case.? Since your clue, I've discovered that a 
tibble-based strategy could also work.

x = seq(min(cob_wt$`plant-density`), max(cob_wt$`plant-density`), length 
= 999)
xvals = tibble(`plant-density` = x)
CI.c = predict(mod2, newdata = xvals, interval = 'c')
CI.p = predict(mod2,? newdata = xvals,? interval = 'p')

Again, appreciate the solution.

On 11/30/2023 12:03 PM, Rui Barradas wrote:
> ?s 17:57 de 30/11/2023, Rui Barradas escreveu:
>> ?s 17:38 de 30/11/2023, Robert Baer escreveu:
>>> I am having trouble using back ticks with the R extractor function 
>>> 'predict' and an lm() model. I'm trying too construct some nice 
>>> vectors that can be used for plotting the two types of regression 
>>> intervals.? I think it works with normal column heading names but it 
>>> fails when I have "special" back-tick names.? Can anyone help with 
>>> how I would reference these?? Short of renaming my columns, is there 
>>> a way to accomplish this?
>>>
>>> Repex
>>>
>>> *# dataframe with dashes in column headings
>>> cob =
>>> ?? structure(list(`cob-wt` = c(212, 241, 215, 225, 250, 241, 237,
>>> ???????????????????????????? 282, 206, 246, 194, 241, 196, 193, 224, 
>>> 257, 200, 190, 208, 224
>>> ), `plant-density` = c(137, 107, 132, 135, 115, 103, 102, 65,
>>> ??????????????????????? 149, 85, 173, 124, 157, 184, 112, 80, 165, 
>>> 160, 157, 119)),
>>> class = c("tbl_df", "tbl", "data.frame"), row.names = c(NA, -20L))
>>>
>>> # regression model works
>>> mod2 = lm(`cob-wt` ~ `plant-density`, data = cob)
>>>
>>> # x sequence for plotting CI's
>>> # Set up x points
>>> x = seq(min(cob$`plant-density`), max(cob$`plant-density`), length = 
>>> 1000)
>>>
>>> # Use predict to get CIs for a plot
>>> # Add CI for regression line (y-hat uses 'c')
>>> # usual trick is to assign x to actual x-var name in middle 
>>> dataframe arguement
>>> CI.c = predict(mod2, data.frame( `plant-density` = x), interval = 
>>> 'c') # fail
>>>
>>> # Add CI for prediction value (y-tilde uses 'p')
>>> # usual trick is to assign x to actual x-var name in middle 
>>> dataframe arguement
>>> CI.p = predict(mod2, data.frame(`plant-density`? = x), interval = 
>>> 'p')??? # fail
>>> *
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide 
>>> http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> Hello,
>>
>> When creating the new data df, the default check.names = TRUE changes 
>> the column name, it is repaired and the hyphen is replaced by a legal 
>> dot.
>>
>>
>> # check.names defaults to TRUE
>> newd <- data.frame(`plant-density` = x)
>> # `plant-density` is not a column name
>> head(newd)
>>
>> # check.names set to FALSE
>> newd <- data.frame(`plant-density` = x, check.names = FALSE)
>> # `plant-density` is becomes a column name
>> head(newd)
>>
>>
>> # Use predict to get CIs for a plot
>> # Add CI for regression line (y-hat uses 'c')
>> # usual trick is to assign x to actual x-var name in middle dataframe 
>> arguement
>> CI.c = predict(mod2, newdata = newd, interval = 'confidence')? # fail
>>
>> # Add CI for prediction value (y-tilde uses 'p')
>> # usual trick is to assign x to actual x-var name in middle dataframe 
>> arguement
>> CI.p = predict(mod2, newdata = newd, interval = 'prediction') # fail
>>
>>
>>
>> Hope this helps,
>>
>> Rui Barradas
>>
>>
> Hello,
>
> Sorry for the comments '# fail' in the last two instructions, I should 
> have changed them.
>
>
> CI.c <- predict(mod2, newdata = newd, interval = 'confidence') # works
> CI.p <- predict(mod2, newdata = newd, interval = 'prediction') # works
>
>
> Hoep this helps,
>
> Rui Barradas
>
>


From bgunter@4567 @end|ng |rom gm@||@com  Fri Dec  1 01:47:23 2023
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Thu, 30 Nov 2023 16:47:23 -0800
Subject: [R] back tick names with predict function
In-Reply-To: <84461035-4232-4112-82cf-bba5e65d03eb@atsu.edu>
References: <495ef0b7-b017-4aa2-afb0-5c2b6ab4e647@atsu.edu>
 <b25f20f0-c196-4897-8ea3-2a3e5f1a48ff@sapo.pt>
 <ca3d2bde-4426-4a41-9d9f-93e60fc66a55@sapo.pt>
 <84461035-4232-4112-82cf-bba5e65d03eb@atsu.edu>
Message-ID: <CAGxFJbTbwg21cz+v4ooaD7BhuH8vD-Jj1fHtE-dDw+ChxZnKcg@mail.gmail.com>

"Thank you Rui.  I didn't know about the check.names = FALSE argument.
> Another good reminder to always read help, but I'm not sure I understood
> what help to read in this case"

?data.frame , of course, which says:

"check.names

logical. If TRUE then the names of the variables in the data frame are
checked to ensure that they are syntactically valid variable names and
are not duplicated. If necessary they are adjusted (by make.names) so
that they are. "

-- Bert


From n|ckmwr@y @end|ng |rom gm@||@com  Fri Dec  1 12:58:18 2023
From: n|ckmwr@y @end|ng |rom gm@||@com (Nick Wray)
Date: Fri, 1 Dec 2023 11:58:18 +0000
Subject: [R] Mann Kendall mutation package?
Message-ID: <CABxY9BOiviytVdHU0bhnTQ6jZrBr9Pyi2k9EOO7jfYfCeUFBBA@mail.gmail.com>

Hello - does anyone know whether there are any packages for Mann-Kendall
mutation tests in R available?  The only one I could find online is this
MK_mut_test: Mann-Kendall mutation test in Sibada/sibadaR: Sibada's
accumulated R scripts for next probably use to avoid reinventing the wheel.
(rdrr.io) <https://rdrr.io/github/Sibada/sibadaR/man/MK_mut_test.html> but
there doesn't seem to be a package corresponding to this.  I've tried
installing various permutations of the apparent name Sibada/sibadaR but
nothing comes up, so I'm not sure whether it even exists...

Thanks Nick Wray

	[[alternative HTML version deleted]]


From ru|pb@rr@d@@ @end|ng |rom @@po@pt  Fri Dec  1 16:44:36 2023
From: ru|pb@rr@d@@ @end|ng |rom @@po@pt (Rui Barradas)
Date: Fri, 1 Dec 2023 15:44:36 +0000
Subject: [R] Mann Kendall mutation package?
In-Reply-To: <CABxY9BOiviytVdHU0bhnTQ6jZrBr9Pyi2k9EOO7jfYfCeUFBBA@mail.gmail.com>
References: <CABxY9BOiviytVdHU0bhnTQ6jZrBr9Pyi2k9EOO7jfYfCeUFBBA@mail.gmail.com>
Message-ID: <ea64fa78-db5b-4a49-a61b-a9481ef4bc25@sapo.pt>

?s 11:58 de 01/12/2023, Nick Wray escreveu:
> Hello - does anyone know whether there are any packages for Mann-Kendall
> mutation tests in R available?  The only one I could find online is this
> MK_mut_test: Mann-Kendall mutation test in Sibada/sibadaR: Sibada's
> accumulated R scripts for next probably use to avoid reinventing the wheel.
> (rdrr.io) <https://rdrr.io/github/Sibada/sibadaR/man/MK_mut_test.html> but
> there doesn't seem to be a package corresponding to this.  I've tried
> installing various permutations of the apparent name Sibada/sibadaR but
> nothing comes up, so I'm not sure whether it even exists...
> 
> Thanks Nick Wray
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
Hello,

Your link points to a GitHub repository, the package can be installed with


devtools::install_github(repo = "Sibada/sibadaR")



Hope this helps

Rui Barradas


-- 
Este e-mail foi analisado pelo software antiv?rus AVG para verificar a presen?a de v?rus.
www.avg.com


From pd@|gd @end|ng |rom gm@||@com  Fri Dec  1 18:47:04 2023
From: pd@|gd @end|ng |rom gm@||@com (peter dalgaard)
Date: Fri, 1 Dec 2023 18:47:04 +0100
Subject: [R] back tick names with predict function
In-Reply-To: <CAGxFJbTbwg21cz+v4ooaD7BhuH8vD-Jj1fHtE-dDw+ChxZnKcg@mail.gmail.com>
References: <495ef0b7-b017-4aa2-afb0-5c2b6ab4e647@atsu.edu>
 <b25f20f0-c196-4897-8ea3-2a3e5f1a48ff@sapo.pt>
 <ca3d2bde-4426-4a41-9d9f-93e60fc66a55@sapo.pt>
 <84461035-4232-4112-82cf-bba5e65d03eb@atsu.edu>
 <CAGxFJbTbwg21cz+v4ooaD7BhuH8vD-Jj1fHtE-dDw+ChxZnKcg@mail.gmail.com>
Message-ID: <240E71BB-E054-4F8A-99C1-8F905FAFBC49@gmail.com>

Also, and possibly more constructively, when you get an error like
 
> CI.c = predict(mod2, data.frame( `plant-density` = x), interval = 'c')  # fail
Error in eval(predvars, data, env) : object 'plant-density' not found

you should check your assumptions. Does "newdata" actually contain a columnn called "plant-density":

> head(data.frame( `plant-density` = x))
  plant.density
1      65.00000
2      65.11912
3      65.23824
4      65.35736
5      65.47648
6      65.59560
> 

I.e., it doesn't. So check help for data.frame and looking for something with names.

> On 1 Dec 2023, at 01:47 , Bert Gunter <bgunter.4567 at gmail.com> wrote:
> 
> "Thank you Rui.  I didn't know about the check.names = FALSE argument.
>> Another good reminder to always read help, but I'm not sure I understood
>> what help to read in this case"
> 
> ?data.frame , of course, which says:
> 
> "check.names
> 
> logical. If TRUE then the names of the variables in the data frame are
> checked to ensure that they are syntactically valid variable names and
> are not duplicated. If necessary they are adjusted (by make.names) so
> that they are. "
> 
> -- Bert
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-- 
Peter Dalgaard, Professor,
Center for Statistics, Copenhagen Business School
Solbjerg Plads 3, 2000 Frederiksberg, Denmark
Phone: (+45)38153501
Office: A 4.23
Email: pd.mes at cbs.dk  Priv: PDalgd at gmail.com


From bbo|ker @end|ng |rom gm@||@com  Fri Dec  1 23:01:46 2023
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Fri, 1 Dec 2023 17:01:46 -0500
Subject: [R] Mann Kendall mutation package?
In-Reply-To: <CABxY9BOiviytVdHU0bhnTQ6jZrBr9Pyi2k9EOO7jfYfCeUFBBA@mail.gmail.com>
References: <CABxY9BOiviytVdHU0bhnTQ6jZrBr9Pyi2k9EOO7jfYfCeUFBBA@mail.gmail.com>
Message-ID: <6f308f48-a604-4659-8cb6-5f36d2249f74@gmail.com>

   Have you looked at the Kendall package?

https://stackoverflow.com/questions/62288340/mann-kendall-in-r

  (you've cross-posted a version of this question to SO as well:

https://stackoverflow.com/questions/77587426/what-is-the-algorithm-for-the-mann-kendall-mutation-test

)

Please don't cross-post between the R help lists and other forums like 
SO -- it dilutes/duplicates effort.



On 2023-12-01 6:58 a.m., Nick Wray wrote:
> Hello - does anyone know whether there are any packages for Mann-Kendall
> mutation tests in R available?  The only one I could find online is this
> MK_mut_test: Mann-Kendall mutation test in Sibada/sibadaR: Sibada's
> accumulated R scripts for next probably use to avoid reinventing the wheel.
> (rdrr.io) <https://rdrr.io/github/Sibada/sibadaR/man/MK_mut_test.html> but
> there doesn't seem to be a package corresponding to this.  I've tried
> installing various permutations of the apparent name Sibada/sibadaR but
> nothing comes up, so I'm not sure whether it even exists...
> 
> Thanks Nick Wray
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From ||@her @end|ng |rom p|e@@th@n@com  Fri Dec  1 21:53:25 2023
From: ||@her @end|ng |rom p|e@@th@n@com (Dennis Fisher)
Date: Fri, 1 Dec 2023 12:53:25 -0800
Subject: [R] adding "Page X of XX" to PDFs
Message-ID: <960162E8-0227-4745-AAF4-D8DF6BC36204@plessthan.com>

OS X
R 4.3.1

Colleagues

I often create multipage PDFs [pdf()] in which the text "Page X" appears in the margin.  These PDFs are created automatically using a massive R script.

One of my clients requested that I change this to:
	Page X of XX 
where XX is the total number of pages.  

I don't know the number of expected pages so I can't think of any clever way to do this.  I suppose that I could create the PDF, find out the number of pages, then have a second pass in which the R script was fed the number of pages.  However, there is one disadvantage to this -- the original PDF contains a timestamp on each page -- the new version would have a different timestamp -- so I would prefer to not use this approach.

Has anyone thought of some terribly clever way to solve this problem?

Dennis

Dennis Fisher MD
P < (The "P Less Than" Company)
Phone / Fax: 1-866-PLessThan (1-866-753-7784)
www.PLessThan.com


From er|ch@@ub@ @end|ng |rom neuw|rth@pr|v@@t  Sat Dec  2 16:37:01 2023
From: er|ch@@ub@ @end|ng |rom neuw|rth@pr|v@@t (Erich Subscriptions)
Date: Sat, 2 Dec 2023 16:37:01 +0100
Subject: [R] adding "Page X of XX" to PDFs
In-Reply-To: <960162E8-0227-4745-AAF4-D8DF6BC36204@plessthan.com>
References: <960162E8-0227-4745-AAF4-D8DF6BC36204@plessthan.com>
Message-ID: <C624E96D-1306-4585-BAD1-66C01A3328C1@neuwirth.priv.at>

You need to use raw LaTeX

See section 4 here

Von meinem iPad gesendet

> Am 02.12.2023 um 15:39 schrieb Dennis Fisher <fisher at plessthan.com>:
> 
> ?OS X
> R 4.3.1
> 
> Colleagues
> 
> I often create multipage PDFs [pdf()] in which the text "Page X" appears in the margin.  These PDFs are created automatically using a massive R script.
> 
> One of my clients requested that I change this to:
>    Page X of XX
> where XX is the total number of pages.  
> 
> I don't know the number of expected pages so I can't think of any clever way to do this.  I suppose that I could create the PDF, find out the number of pages, then have a second pass in which the R script was fed the number of pages.  However, there is one disadvantage to this -- the original PDF contains a timestamp on each page -- the new version would have a different timestamp -- so I would prefer to not use this approach.
> 
> Has anyone thought of some terribly clever way to solve this problem?
> 
> Dennis
> 
> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> www.PLessThan.com
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From po|c1410 @end|ng |rom gm@||@com  Sat Dec  2 17:12:30 2023
From: po|c1410 @end|ng |rom gm@||@com (CALUM POLWART)
Date: Sat, 2 Dec 2023 16:12:30 +0000
Subject: [R] adding "Page X of XX" to PDFs
In-Reply-To: <960162E8-0227-4745-AAF4-D8DF6BC36204@plessthan.com>
References: <960162E8-0227-4745-AAF4-D8DF6BC36204@plessthan.com>
Message-ID: <CA+etgP=6QZZ0A-Amt0Es4iDxovDF==gqNUmLVqY6oV8ktXdfnw@mail.gmail.com>

Can you provide a very simplified version of how the PDF is created?



On Sat, 2 Dec 2023, 14:39 Dennis Fisher, <fisher at plessthan.com> wrote:

> OS X
> R 4.3.1
>
> Colleagues
>
> I often create multipage PDFs [pdf()] in which the text "Page X" appears
> in the margin.  These PDFs are created automatically using a massive R
> script.
>
> One of my clients requested that I change this to:
>         Page X of XX
> where XX is the total number of pages.
>
> I don't know the number of expected pages so I can't think of any clever
> way to do this.  I suppose that I could create the PDF, find out the number
> of pages, then have a second pass in which the R script was fed the number
> of pages.  However, there is one disadvantage to this -- the original PDF
> contains a timestamp on each page -- the new version would have a different
> timestamp -- so I would prefer to not use this approach.
>
> Has anyone thought of some terribly clever way to solve this problem?
>
> Dennis
>
> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> www.PLessThan.com
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From m@rc_grt @end|ng |rom y@hoo@|r  Sat Dec  2 17:36:18 2023
From: m@rc_grt @end|ng |rom y@hoo@|r (Marc Girondot)
Date: Sat, 2 Dec 2023 17:36:18 +0100
Subject: [R] Try reproduce glmm by hand
References: <f0d28e51-b515-4880-aa55-70af47e8dbc9.ref@yahoo.fr>
Message-ID: <f0d28e51-b515-4880-aa55-70af47e8dbc9@yahoo.fr>

Dear all,

In order to be sure I understand glmm correctly, I try to reproduce by 
hand a simple result. Here is a reproducible code. The questions are in 
_________________

Of course I have tried to find the solution using internet but I was not 
able to find a solution. I have also tried to follow glmer but it is 
very complicated code!

Thanks for any help.

Marc


# Generate set of df with nb successes and failures
# and ID being A, B or C (the random effect)
# and x being the fixed effect
set.seed(1)
df <- rbind(matrix(data = c(sample(x=5:30, size=40, replace = TRUE), 
rep(10, 40)), ncol=2),
 ??????????? matrix(data = c(sample(x=10:30, size=40, replace = TRUE), 
rep(10, 40)), ncol=2),
 ??????????? matrix(data = c(sample(x=20:30, size=40, replace = TRUE), 
rep(10, 40)), ncol=2))
ID <- as.factor(c(rep("A", 40), rep("B", 40), rep("C", 40)))
x <- c(runif(40, min=10, max=30), runif(40, min=20, max=30), runif(40, 
min=40, max=60))
x <- (x-min(x))/(max(x)-min(x))

# In g0, I have the results of the glmm
library(lme4)
g0 <- glmer(formula = df ~ x + (1 | ID), family = 
binomial(link="logit"), nAGQ=1)
-logLik(g0) # 'log Lik.' 268.0188 (df=3)
# I get the fitted parameters
fixep <- fixef(g0)
par <- getME(g0, c("theta","beta"))
# _______________________________________________________________________
# Question 1: how theta is converted into the specific effect on 
(intercept) for the random effect ?
# Then how a theta parameter is converted into intercepts?
# _______________________________________________________________________
intercepts <- ranef(g0)$ID

# This part is ok, the predict is correct
pfit <- 1-c(1/(1+exp(fixep["(Intercept)"]+intercepts["A", 
1]+x[ID=="A"]*fixep["x"])),
 ? 1/(1+exp(fixep["(Intercept)"]+intercepts["B", 
1]+x[ID=="B"]*fixep["x"])),
 ? 1/(1+exp(fixep["(Intercept)"]+intercepts["C", 1]+x[ID=="C"]*fixep["x"])))

predict(g0, type = "response")

# _______________________________________________________________________
# Why I obtain 266.4874 and not 268.0188 as in -logLik(g0)?
# _______________________________________________________________________
-sum(dbinom(x=df[, 1], size=df[, 1]+df[, 2], prob=pfit, log=TRUE)) # 
266.4874


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Dec  2 17:45:36 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 02 Dec 2023 08:45:36 -0800
Subject: [R] adding "Page X of XX" to PDFs
In-Reply-To: <960162E8-0227-4745-AAF4-D8DF6BC36204@plessthan.com>
References: <960162E8-0227-4745-AAF4-D8DF6BC36204@plessthan.com>
Message-ID: <A5CA1C96-298C-4AB4-9B17-BA30B40F6F90@dcn.davis.ca.us>

One of the most fundamental characteristics of R programming is the use of data frames of column vectors, and one of the very first challenges I had as a then-Perl-programmer was coming to grips with the fact that unknown-length CSV files would be read completely into memory as rows and once the entire CSV was in memory it would be transposed into column vectors. I was resistant to this philosophy at first, but the advantages in computation speed and simplicity eventually won me over.

I would say that if you want to know how many pages you are going to produce with R, then you are going to have to count them before you create them. Building a dataframe that describes (in terms of parameters to be passed to a page-generating function in each row) what you are going to put on each page before you actually print it can make this pre-counting problem trivial, and the code that does the printing is likely to be more modular and testable as well.

On December 1, 2023 12:53:25 PM PST, Dennis Fisher <fisher at plessthan.com> wrote:
>OS X
>R 4.3.1
>
>Colleagues
>
>I often create multipage PDFs [pdf()] in which the text "Page X" appears in the margin.  These PDFs are created automatically using a massive R script.
>
>One of my clients requested that I change this to:
>	Page X of XX 
>where XX is the total number of pages.  
>
>I don't know the number of expected pages so I can't think of any clever way to do this.  I suppose that I could create the PDF, find out the number of pages, then have a second pass in which the R script was fed the number of pages.  However, there is one disadvantage to this -- the original PDF contains a timestamp on each page -- the new version would have a different timestamp -- so I would prefer to not use this approach.
>
>Has anyone thought of some terribly clever way to solve this problem?
>
>Dennis
>
>Dennis Fisher MD
>P < (The "P Less Than" Company)
>Phone / Fax: 1-866-PLessThan (1-866-753-7784)
>www.PLessThan.com
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From jrkr|de@u @end|ng |rom gm@||@com  Sat Dec  2 18:10:28 2023
From: jrkr|de@u @end|ng |rom gm@||@com (John Kane)
Date: Sat, 2 Dec 2023 12:10:28 -0500
Subject: [R] adding "Page X of XX" to PDFs
In-Reply-To: <960162E8-0227-4745-AAF4-D8DF6BC36204@plessthan.com>
References: <960162E8-0227-4745-AAF4-D8DF6BC36204@plessthan.com>
Message-ID: <CAKZQJMAt2vsxZOyxu4k0yS--4HXsBEGOea1heQVXbZ8xAOykBw@mail.gmail.com>

https://community.rstudio.com/t/total-number-of-pages-in-quarto-pdf/177316/2

On Sat, 2 Dec 2023 at 09:39, Dennis Fisher <fisher at plessthan.com> wrote:

> OS X
> R 4.3.1
>
> Colleagues
>
> I often create multipage PDFs [pdf()] in which the text "Page X" appears
> in the margin.  These PDFs are created automatically using a massive R
> script.
>
> One of my clients requested that I change this to:
>         Page X of XX
> where XX is the total number of pages.
>
> I don't know the number of expected pages so I can't think of any clever
> way to do this.  I suppose that I could create the PDF, find out the number
> of pages, then have a second pass in which the R script was fed the number
> of pages.  However, there is one disadvantage to this -- the original PDF
> contains a timestamp on each page -- the new version would have a different
> timestamp -- so I would prefer to not use this approach.
>
> Has anyone thought of some terribly clever way to solve this problem?
>
> Dennis
>
> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> www.PLessThan.com
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>


-- 
John Kane
Kingston ON Canada

	[[alternative HTML version deleted]]


From tebert @end|ng |rom u||@edu  Sat Dec  2 18:23:07 2023
From: tebert @end|ng |rom u||@edu (Ebert,Timothy Aaron)
Date: Sat, 2 Dec 2023 17:23:07 +0000
Subject: [R] adding "Page X of XX" to PDFs
In-Reply-To: <A5CA1C96-298C-4AB4-9B17-BA30B40F6F90@dcn.davis.ca.us>
References: <960162E8-0227-4745-AAF4-D8DF6BC36204@plessthan.com>
 <A5CA1C96-298C-4AB4-9B17-BA30B40F6F90@dcn.davis.ca.us>
Message-ID: <CH3PR22MB45147EFE273414753339E1D8CF80A@CH3PR22MB4514.namprd22.prod.outlook.com>

Would this work in general? Say I have a document with figures, special equations, text, and tables. The text and tables are relatively easy. The figures would need a conversion from pixels to lines, and the equations maybe printed out, counted as a figure, and then added to the line count. It would also be tricky if a title line was at 32 point font and the text at 12, and the more complex the formatting the harder to deal with rows as related to page size.

Thankfully I do not think I will have to do this, so the question is for theoretical interest on my part (at least for now).

Tim

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Newmiller via R-help
Sent: Saturday, December 2, 2023 11:46 AM
To: r-help at r-project.org
Subject: Re: [R] adding "Page X of XX" to PDFs

[External Email]

One of the most fundamental characteristics of R programming is the use of data frames of column vectors, and one of the very first challenges I had as a then-Perl-programmer was coming to grips with the fact that unknown-length CSV files would be read completely into memory as rows and once the entire CSV was in memory it would be transposed into column vectors. I was resistant to this philosophy at first, but the advantages in computation speed and simplicity eventually won me over.

I would say that if you want to know how many pages you are going to produce with R, then you are going to have to count them before you create them. Building a dataframe that describes (in terms of parameters to be passed to a page-generating function in each row) what you are going to put on each page before you actually print it can make this pre-counting problem trivial, and the code that does the printing is likely to be more modular and testable as well.

On December 1, 2023 12:53:25 PM PST, Dennis Fisher <fisher at plessthan.com> wrote:
>OS X
>R 4.3.1
>
>Colleagues
>
>I often create multipage PDFs [pdf()] in which the text "Page X" appears in the margin.  These PDFs are created automatically using a massive R script.
>
>One of my clients requested that I change this to:
>       Page X of XX
>where XX is the total number of pages.
>
>I don't know the number of expected pages so I can't think of any clever way to do this.  I suppose that I could create the PDF, find out the number of pages, then have a second pass in which the R script was fed the number of pages.  However, there is one disadvantage to this -- the original PDF contains a timestamp on each page -- the new version would have a different timestamp -- so I would prefer to not use this approach.
>
>Has anyone thought of some terribly clever way to solve this problem?
>
>Dennis
>
>Dennis Fisher MD
>P < (The "P Less Than" Company)
>Phone / Fax: 1-866-PLessThan (1-866-753-7784)
>http://www.plessthan.com/
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

--
Sent from my phone. Please excuse my brevity.

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From bbo|ker @end|ng |rom gm@||@com  Sat Dec  2 19:36:44 2023
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sat, 2 Dec 2023 13:36:44 -0500
Subject: [R] adding "Page X of XX" to PDFs
In-Reply-To: <CH3PR22MB45147EFE273414753339E1D8CF80A@CH3PR22MB4514.namprd22.prod.outlook.com>
References: <960162E8-0227-4745-AAF4-D8DF6BC36204@plessthan.com>
 <A5CA1C96-298C-4AB4-9B17-BA30B40F6F90@dcn.davis.ca.us>
 <CH3PR22MB45147EFE273414753339E1D8CF80A@CH3PR22MB4514.namprd22.prod.outlook.com>
Message-ID: <a1d9ac06-4d0f-43dd-afa8-d3ea434147b0@gmail.com>

   It's still not entirely clear to me what framework you're using to 
generate the PDF, but if it's rmarkdown/Rnw (Sweave)/Quarto-based, then 
as far as I know all of those frameworks use LaTeX as the last step in 
the script-to-PDF pipeline, and allow the inclusion of arbitrary LaTeX 
code, so the 'lastpage' package would do this for you:

https://stackoverflow.com/questions/70343001/how-to-show-the-total-number-of-pages-in-a-pdf-via-the-rmarkdown-i-e-display

https://tex.stackexchange.com/questions/227/how-can-i-add-page-of-on-my-document



On 2023-12-02 12:23 p.m., Ebert,Timothy Aaron wrote:
> Would this work in general? Say I have a document with figures, special equations, text, and tables. The text and tables are relatively easy. The figures would need a conversion from pixels to lines, and the equations maybe printed out, counted as a figure, and then added to the line count. It would also be tricky if a title line was at 32 point font and the text at 12, and the more complex the formatting the harder to deal with rows as related to page size.
> 
> Thankfully I do not think I will have to do this, so the question is for theoretical interest on my part (at least for now).
> 
> Tim
> 
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Newmiller via R-help
> Sent: Saturday, December 2, 2023 11:46 AM
> To: r-help at r-project.org
> Subject: Re: [R] adding "Page X of XX" to PDFs
> 
> [External Email]
> 
> One of the most fundamental characteristics of R programming is the use of data frames of column vectors, and one of the very first challenges I had as a then-Perl-programmer was coming to grips with the fact that unknown-length CSV files would be read completely into memory as rows and once the entire CSV was in memory it would be transposed into column vectors. I was resistant to this philosophy at first, but the advantages in computation speed and simplicity eventually won me over.
> 
> I would say that if you want to know how many pages you are going to produce with R, then you are going to have to count them before you create them. Building a dataframe that describes (in terms of parameters to be passed to a page-generating function in each row) what you are going to put on each page before you actually print it can make this pre-counting problem trivial, and the code that does the printing is likely to be more modular and testable as well.
> 
> On December 1, 2023 12:53:25 PM PST, Dennis Fisher <fisher at plessthan.com> wrote:
>> OS X
>> R 4.3.1
>>
>> Colleagues
>>
>> I often create multipage PDFs [pdf()] in which the text "Page X" appears in the margin.  These PDFs are created automatically using a massive R script.
>>
>> One of my clients requested that I change this to:
>>        Page X of XX
>> where XX is the total number of pages.
>>
>> I don't know the number of expected pages so I can't think of any clever way to do this.  I suppose that I could create the PDF, find out the number of pages, then have a second pass in which the R script was fed the number of pages.  However, there is one disadvantage to this -- the original PDF contains a timestamp on each page -- the new version would have a different timestamp -- so I would prefer to not use this approach.
>>
>> Has anyone thought of some terribly clever way to solve this problem?
>>
>> Dennis
>>
>> Dennis Fisher MD
>> P < (The "P Less Than" Company)
>> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
>> http://www.plessthan.com/
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
> 
> --
> Sent from my phone. Please excuse my brevity.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Sat Dec  2 20:03:22 2023
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Sat, 02 Dec 2023 11:03:22 -0800
Subject: [R] adding "Page X of XX" to PDFs
In-Reply-To: <a1d9ac06-4d0f-43dd-afa8-d3ea434147b0@gmail.com>
References: <960162E8-0227-4745-AAF4-D8DF6BC36204@plessthan.com>
 <A5CA1C96-298C-4AB4-9B17-BA30B40F6F90@dcn.davis.ca.us>
 <CH3PR22MB45147EFE273414753339E1D8CF80A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <a1d9ac06-4d0f-43dd-afa8-d3ea434147b0@gmail.com>
Message-ID: <40E309E8-EC80-4461-9240-A438E545457B@dcn.davis.ca.us>

He clearly stated he was using the pdf() graphics device.

On December 2, 2023 10:36:44 AM PST, Ben Bolker <bbolker at gmail.com> wrote:
>  It's still not entirely clear to me what framework you're using to generate the PDF, but if it's rmarkdown/Rnw (Sweave)/Quarto-based, then as far as I know all of those frameworks use LaTeX as the last step in the script-to-PDF pipeline, and allow the inclusion of arbitrary LaTeX code, so the 'lastpage' package would do this for you:
>
>https://stackoverflow.com/questions/70343001/how-to-show-the-total-number-of-pages-in-a-pdf-via-the-rmarkdown-i-e-display
>
>https://tex.stackexchange.com/questions/227/how-can-i-add-page-of-on-my-document
>
>
>
>On 2023-12-02 12:23 p.m., Ebert,Timothy Aaron wrote:
>> Would this work in general? Say I have a document with figures, special equations, text, and tables. The text and tables are relatively easy. The figures would need a conversion from pixels to lines, and the equations maybe printed out, counted as a figure, and then added to the line count. It would also be tricky if a title line was at 32 point font and the text at 12, and the more complex the formatting the harder to deal with rows as related to page size.
>> 
>> Thankfully I do not think I will have to do this, so the question is for theoretical interest on my part (at least for now).
>> 
>> Tim
>> 
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Newmiller via R-help
>> Sent: Saturday, December 2, 2023 11:46 AM
>> To: r-help at r-project.org
>> Subject: Re: [R] adding "Page X of XX" to PDFs
>> 
>> [External Email]
>> 
>> One of the most fundamental characteristics of R programming is the use of data frames of column vectors, and one of the very first challenges I had as a then-Perl-programmer was coming to grips with the fact that unknown-length CSV files would be read completely into memory as rows and once the entire CSV was in memory it would be transposed into column vectors. I was resistant to this philosophy at first, but the advantages in computation speed and simplicity eventually won me over.
>> 
>> I would say that if you want to know how many pages you are going to produce with R, then you are going to have to count them before you create them. Building a dataframe that describes (in terms of parameters to be passed to a page-generating function in each row) what you are going to put on each page before you actually print it can make this pre-counting problem trivial, and the code that does the printing is likely to be more modular and testable as well.
>> 
>> On December 1, 2023 12:53:25 PM PST, Dennis Fisher <fisher at plessthan.com> wrote:
>>> OS X
>>> R 4.3.1
>>> 
>>> Colleagues
>>> 
>>> I often create multipage PDFs [pdf()] in which the text "Page X" appears in the margin.  These PDFs are created automatically using a massive R script.
>>> 
>>> One of my clients requested that I change this to:
>>>        Page X of XX
>>> where XX is the total number of pages.
>>> 
>>> I don't know the number of expected pages so I can't think of any clever way to do this.  I suppose that I could create the PDF, find out the number of pages, then have a second pass in which the R script was fed the number of pages.  However, there is one disadvantage to this -- the original PDF contains a timestamp on each page -- the new version would have a different timestamp -- so I would prefer to not use this approach.
>>> 
>>> Has anyone thought of some terribly clever way to solve this problem?
>>> 
>>> Dennis
>>> 
>>> Dennis Fisher MD
>>> P < (The "P Less Than" Company)
>>> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
>>> http://www.plessthan.com/
>>> 
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> --
>> Sent from my phone. Please excuse my brevity.
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>> 
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From bbo|ker @end|ng |rom gm@||@com  Sat Dec  2 20:07:24 2023
From: bbo|ker @end|ng |rom gm@||@com (Ben Bolker)
Date: Sat, 2 Dec 2023 14:07:24 -0500
Subject: [R] adding "Page X of XX" to PDFs
In-Reply-To: <40E309E8-EC80-4461-9240-A438E545457B@dcn.davis.ca.us>
References: <960162E8-0227-4745-AAF4-D8DF6BC36204@plessthan.com>
 <A5CA1C96-298C-4AB4-9B17-BA30B40F6F90@dcn.davis.ca.us>
 <CH3PR22MB45147EFE273414753339E1D8CF80A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <a1d9ac06-4d0f-43dd-afa8-d3ea434147b0@gmail.com>
 <40E309E8-EC80-4461-9240-A438E545457B@dcn.davis.ca.us>
Message-ID: <70831495-43ec-491e-9947-1f214c6f0a2e@gmail.com>

    Sorry, jumped into the thread too late. (On the other hand, once the 
document gets complicated enough, it may be worth it in the long run to 
convert to something that actually has a document-generating back-end, 
rather than reinventing everything from scratch ...)

On 2023-12-02 2:03 p.m., Jeff Newmiller via R-help wrote:
> He clearly stated he was using the pdf() graphics device.
> 
> On December 2, 2023 10:36:44 AM PST, Ben Bolker <bbolker at gmail.com> wrote:
>>   It's still not entirely clear to me what framework you're using to generate the PDF, but if it's rmarkdown/Rnw (Sweave)/Quarto-based, then as far as I know all of those frameworks use LaTeX as the last step in the script-to-PDF pipeline, and allow the inclusion of arbitrary LaTeX code, so the 'lastpage' package would do this for you:
>>
>> https://stackoverflow.com/questions/70343001/how-to-show-the-total-number-of-pages-in-a-pdf-via-the-rmarkdown-i-e-display
>>
>> https://tex.stackexchange.com/questions/227/how-can-i-add-page-of-on-my-document
>>
>>
>>
>> On 2023-12-02 12:23 p.m., Ebert,Timothy Aaron wrote:
>>> Would this work in general? Say I have a document with figures, special equations, text, and tables. The text and tables are relatively easy. The figures would need a conversion from pixels to lines, and the equations maybe printed out, counted as a figure, and then added to the line count. It would also be tricky if a title line was at 32 point font and the text at 12, and the more complex the formatting the harder to deal with rows as related to page size.
>>>
>>> Thankfully I do not think I will have to do this, so the question is for theoretical interest on my part (at least for now).
>>>
>>> Tim
>>>
>>> -----Original Message-----
>>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Jeff Newmiller via R-help
>>> Sent: Saturday, December 2, 2023 11:46 AM
>>> To: r-help at r-project.org
>>> Subject: Re: [R] adding "Page X of XX" to PDFs
>>>
>>> [External Email]
>>>
>>> One of the most fundamental characteristics of R programming is the use of data frames of column vectors, and one of the very first challenges I had as a then-Perl-programmer was coming to grips with the fact that unknown-length CSV files would be read completely into memory as rows and once the entire CSV was in memory it would be transposed into column vectors. I was resistant to this philosophy at first, but the advantages in computation speed and simplicity eventually won me over.
>>>
>>> I would say that if you want to know how many pages you are going to produce with R, then you are going to have to count them before you create them. Building a dataframe that describes (in terms of parameters to be passed to a page-generating function in each row) what you are going to put on each page before you actually print it can make this pre-counting problem trivial, and the code that does the printing is likely to be more modular and testable as well.
>>>
>>> On December 1, 2023 12:53:25 PM PST, Dennis Fisher <fisher at plessthan.com> wrote:
>>>> OS X
>>>> R 4.3.1
>>>>
>>>> Colleagues
>>>>
>>>> I often create multipage PDFs [pdf()] in which the text "Page X" appears in the margin.  These PDFs are created automatically using a massive R script.
>>>>
>>>> One of my clients requested that I change this to:
>>>>         Page X of XX
>>>> where XX is the total number of pages.
>>>>
>>>> I don't know the number of expected pages so I can't think of any clever way to do this.  I suppose that I could create the PDF, find out the number of pages, then have a second pass in which the R script was fed the number of pages.  However, there is one disadvantage to this -- the original PDF contains a timestamp on each page -- the new version would have a different timestamp -- so I would prefer to not use this approach.
>>>>
>>>> Has anyone thought of some terribly clever way to solve this problem?
>>>>
>>>> Dennis
>>>>
>>>> Dennis Fisher MD
>>>> P < (The "P Less Than" Company)
>>>> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
>>>> http://www.plessthan.com/
>>>>
>>>> ______________________________________________
>>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>> PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
>>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> --
>>> Sent from my phone. Please excuse my brevity.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.r-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>>
>>> ______________________________________________
>>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>


From murdoch@dunc@n @end|ng |rom gm@||@com  Sat Dec  2 21:51:48 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 2 Dec 2023 15:51:48 -0500
Subject: [R] adding "Page X of XX" to PDFs
In-Reply-To: <70831495-43ec-491e-9947-1f214c6f0a2e@gmail.com>
References: <960162E8-0227-4745-AAF4-D8DF6BC36204@plessthan.com>
 <A5CA1C96-298C-4AB4-9B17-BA30B40F6F90@dcn.davis.ca.us>
 <CH3PR22MB45147EFE273414753339E1D8CF80A@CH3PR22MB4514.namprd22.prod.outlook.com>
 <a1d9ac06-4d0f-43dd-afa8-d3ea434147b0@gmail.com>
 <40E309E8-EC80-4461-9240-A438E545457B@dcn.davis.ca.us>
 <70831495-43ec-491e-9947-1f214c6f0a2e@gmail.com>
Message-ID: <66106ec2-191d-4860-8e53-3ae214112d2f@gmail.com>

On 02/12/2023 2:07 p.m., Ben Bolker wrote:
>      Sorry, jumped into the thread too late. (On the other hand, once the
> document gets complicated enough, it may be worth it in the long run to
> convert to something that actually has a document-generating back-end,
> rather than reinventing everything from scratch ...)
> 

I agree with that comment.  However, if one is stuck with a multipage 
PDF file, and wants to add page numbering, you could use the LaTeX 
pdfpages package.

For example, this R Markdown document includes all 10 plots from 
Rplots.pdf on pages with "x of y" page numbering.

   ---
   title: "Numbered"
   output:
     pdf_document:
       extra_dependencies: ["pdfpages", "fancyhdr", "lastpage"]
   ---

   \cfoot{Page \thepage\ of \pageref{LastPage}}

   \addtocounter{page}{-1}

   \includepdf[pages={1-10},pagecommand={\thispagestyle{fancy}}]{Rplots.pdf}


It would make more sense to do this in a LaTeX document, but I'm not 
sure if Dennis knows LaTeX...

Duncan Murdoch


From @vi@e@gross m@iii@g oii gm@ii@com  Sat Dec  2 23:35:04 2023
From: @vi@e@gross m@iii@g oii gm@ii@com (@vi@e@gross m@iii@g oii gm@ii@com)
Date: Sat, 2 Dec 2023 17:35:04 -0500
Subject: [R] adding "Page X of XX" to PDFs
In-Reply-To: <960162E8-0227-4745-AAF4-D8DF6BC36204@plessthan.com>
References: <960162E8-0227-4745-AAF4-D8DF6BC36204@plessthan.com>
Message-ID: <010b01da256f$cb6ee150$624ca3f0$@gmail.com>

Having read all of the replies, it seems there are solutions for the
question and the OP points out that some solutions such as making the
document twice will affect the creation date.

I suspect the additional time to do so is seconds or at most minutes so it
may not be a big deal.

But what about the idea of creating a PDF with a placeholder like "Page N of
XXX" and after the file has been created, dates and all, perhaps edit it
programmatically and replace all instances of XXX with something of the same
length like " 23" as there seem to be tools like the pdftools package that
let you get the number of pages. I have no idea if some program, perhaps
external, can do that and retain the date you want.

-----Original Message-----
From: R-help <r-help-bounces at r-project.org> On Behalf Of Dennis Fisher
Sent: Friday, December 1, 2023 3:53 PM
To: r-help at r-project.org
Subject: [R] adding "Page X of XX" to PDFs

OS X
R 4.3.1

Colleagues

I often create multipage PDFs [pdf()] in which the text "Page X" appears in
the margin.  These PDFs are created automatically using a massive R script.

One of my clients requested that I change this to:
	Page X of XX 
where XX is the total number of pages.  

I don't know the number of expected pages so I can't think of any clever way
to do this.  I suppose that I could create the PDF, find out the number of
pages, then have a second pass in which the R script was fed the number of
pages.  However, there is one disadvantage to this -- the original PDF
contains a timestamp on each page -- the new version would have a different
timestamp -- so I would prefer to not use this approach.

Has anyone thought of some terribly clever way to solve this problem?

Dennis

Dennis Fisher MD
P < (The "P Less Than" Company)
Phone / Fax: 1-866-PLessThan (1-866-753-7784)
www.PLessThan.com

______________________________________________
R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
https://stat.ethz.ch/mailman/listinfo/r-help
PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
and provide commented, minimal, self-contained, reproducible code.


From po|c1410 @end|ng |rom gm@||@com  Sat Dec  2 23:37:44 2023
From: po|c1410 @end|ng |rom gm@||@com (CALUM POLWART)
Date: Sat, 2 Dec 2023 22:37:44 +0000
Subject: [R] adding "Page X of XX" to PDFs
In-Reply-To: <010b01da256f$cb6ee150$624ca3f0$@gmail.com>
References: <960162E8-0227-4745-AAF4-D8DF6BC36204@plessthan.com>
 <010b01da256f$cb6ee150$624ca3f0$@gmail.com>
Message-ID: <CA+etgPntPL-1RSUreZZGr5YpaJQFJ+E8mk4ZswaLMmThEN4eHQ@mail.gmail.com>

You could easily omit the Page X of xX, but leave the timestamp

Then add Page X of XX programmatically using pdftools or some similar pdf
command line tools.

On Sat, 2 Dec 2023, 22:35 , <avi.e.gross at gmail.com> wrote:

> Having read all of the replies, it seems there are solutions for the
> question and the OP points out that some solutions such as making the
> document twice will affect the creation date.
>
> I suspect the additional time to do so is seconds or at most minutes so it
> may not be a big deal.
>
> But what about the idea of creating a PDF with a placeholder like "Page N
> of
> XXX" and after the file has been created, dates and all, perhaps edit it
> programmatically and replace all instances of XXX with something of the
> same
> length like " 23" as there seem to be tools like the pdftools package that
> let you get the number of pages. I have no idea if some program, perhaps
> external, can do that and retain the date you want.
>
> -----Original Message-----
> From: R-help <r-help-bounces at r-project.org> On Behalf Of Dennis Fisher
> Sent: Friday, December 1, 2023 3:53 PM
> To: r-help at r-project.org
> Subject: [R] adding "Page X of XX" to PDFs
>
> OS X
> R 4.3.1
>
> Colleagues
>
> I often create multipage PDFs [pdf()] in which the text "Page X" appears in
> the margin.  These PDFs are created automatically using a massive R script.
>
> One of my clients requested that I change this to:
>         Page X of XX
> where XX is the total number of pages.
>
> I don't know the number of expected pages so I can't think of any clever
> way
> to do this.  I suppose that I could create the PDF, find out the number of
> pages, then have a second pass in which the R script was fed the number of
> pages.  However, there is one disadvantage to this -- the original PDF
> contains a timestamp on each page -- the new version would have a different
> timestamp -- so I would prefer to not use this approach.
>
> Has anyone thought of some terribly clever way to solve this problem?
>
> Dennis
>
> Dennis Fisher MD
> P < (The "P Less Than" Company)
> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
> www.PLessThan.com
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide
> http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.
>

	[[alternative HTML version deleted]]


From murdoch@dunc@n @end|ng |rom gm@||@com  Sun Dec  3 00:14:38 2023
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Sat, 2 Dec 2023 18:14:38 -0500
Subject: [R] adding "Page X of XX" to PDFs
In-Reply-To: <CA+etgPntPL-1RSUreZZGr5YpaJQFJ+E8mk4ZswaLMmThEN4eHQ@mail.gmail.com>
References: <960162E8-0227-4745-AAF4-D8DF6BC36204@plessthan.com>
 <010b01da256f$cb6ee150$624ca3f0$@gmail.com>
 <CA+etgPntPL-1RSUreZZGr5YpaJQFJ+E8mk4ZswaLMmThEN4eHQ@mail.gmail.com>
Message-ID: <322220d8-aa51-48ea-a376-818e18394852@gmail.com>

On 02/12/2023 5:37 p.m., CALUM POLWART wrote:
> You could easily omit the Page X of xX, but leave the timestamp
> 
> Then add Page X of XX programmatically using pdftools or some similar pdf
> command line tools.

You don't need to use command line tools -- I showed how to do it by 
creating an R Markdown document with each page of the PDF on a numbered 
page of the result.

Here's a minor improvement of my post:

    ---
    title: "Numbered"
    output:
      pdf_document:
        extra_dependencies: ["pdfpages", "fancyhdr", "lastpage"]
    ---

    \cfoot{Page \thepage\ of \pageref{LastPage}}

    \addtocounter{page}{-1}

    \includepdf[pages={1-},pagecommand={\thispagestyle{fancy}}]{Rplots.pdf}


This works regardless of the number of pages in Rplots.pdf.

Duncan Murdoch

> 
> On Sat, 2 Dec 2023, 22:35 , <avi.e.gross at gmail.com> wrote:
> 
>> Having read all of the replies, it seems there are solutions for the
>> question and the OP points out that some solutions such as making the
>> document twice will affect the creation date.
>>
>> I suspect the additional time to do so is seconds or at most minutes so it
>> may not be a big deal.
>>
>> But what about the idea of creating a PDF with a placeholder like "Page N
>> of
>> XXX" and after the file has been created, dates and all, perhaps edit it
>> programmatically and replace all instances of XXX with something of the
>> same
>> length like " 23" as there seem to be tools like the pdftools package that
>> let you get the number of pages. I have no idea if some program, perhaps
>> external, can do that and retain the date you want.
>>
>> -----Original Message-----
>> From: R-help <r-help-bounces at r-project.org> On Behalf Of Dennis Fisher
>> Sent: Friday, December 1, 2023 3:53 PM
>> To: r-help at r-project.org
>> Subject: [R] adding "Page X of XX" to PDFs
>>
>> OS X
>> R 4.3.1
>>
>> Colleagues
>>
>> I often create multipage PDFs [pdf()] in which the text "Page X" appears in
>> the margin.  These PDFs are created automatically using a massive R script.
>>
>> One of my clients requested that I change this to:
>>          Page X of XX
>> where XX is the total number of pages.
>>
>> I don't know the number of expected pages so I can't think of any clever
>> way
>> to do this.  I suppose that I could create the PDF, find out the number of
>> pages, then have a second pass in which the R script was fed the number of
>> pages.  However, there is one disadvantage to this -- the original PDF
>> contains a timestamp on each page -- the new version would have a different
>> timestamp -- so I would prefer to not use this approach.
>>
>> Has anyone thought of some terribly clever way to solve this problem?
>>
>> Dennis
>>
>> Dennis Fisher MD
>> P < (The "P Less Than" Company)
>> Phone / Fax: 1-866-PLessThan (1-866-753-7784)
>> www.PLessThan.com
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
>> ______________________________________________
>> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>> https://stat.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide
>> http://www.R-project.org/posting-guide.html
>> and provide commented, minimal, self-contained, reproducible code.
>>
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide http://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


